{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","ng://igniteui-angular/lib/animations/easings.ts","ng://igniteui-angular/lib/animations/fade/index.ts","ng://igniteui-angular/lib/animations/flip/index.ts","ng://igniteui-angular/lib/animations/rotate/index.ts","ng://igniteui-angular/lib/animations/misc/shake.ts","ng://igniteui-angular/lib/animations/misc/pulsate.ts","ng://igniteui-angular/lib/animations/scale/index.ts","ng://igniteui-angular/lib/animations/slide/index.ts","ng://igniteui-angular/lib/animations/swing/index.ts","ng://igniteui-angular/lib/animations/grow/index.ts","ng://igniteui-angular/lib/core/navigation/nav.service.ts","ng://igniteui-angular/lib/core/navigation/directives.ts","ng://igniteui-angular/lib/core/utils.ts","ng://igniteui-angular/lib/data-operations/sorting-expression.interface.ts","ng://igniteui-angular/lib/data-operations/operations.ts","ng://igniteui-angular/lib/data-operations/paging-state.interface.ts","ng://igniteui-angular/lib/data-operations/filtering-expression.interface.ts","ng://igniteui-angular/lib/data-operations/filtering-expressions-tree.ts","ng://igniteui-angular/lib/data-operations/sorting-strategy.ts","ng://igniteui-angular/lib/data-operations/grouping-strategy.ts","ng://igniteui-angular/lib/services/transaction/transaction.ts","ng://igniteui-angular/lib/data-operations/data-util.ts","ng://igniteui-angular/lib/data-operations/filtering-strategy.ts","ng://igniteui-angular/lib/services/csv/csv-exporter-options.ts","ng://igniteui-angular/lib/services/exporter-common/export-utilities.ts","ng://igniteui-angular/lib/grids/api.service.ts","ng://igniteui-angular/lib/grids/tree-grid/tree-grid.filtering.pipe.ts","ng://igniteui-angular/lib/services/exporter-common/base-export-service.ts","ng://igniteui-angular/lib/services/csv/char-separated-value-data.ts","ng://igniteui-angular/lib/services/exporter-common/exporter-options-base.ts","ng://igniteui-angular/lib/services/csv/csv-exporter.ts","ng://igniteui-angular/lib/services/excel/excel-enums.ts","ng://igniteui-angular/lib/services/excel/excel-strings.ts","ng://igniteui-angular/lib/services/overlay/utilities.ts","ng://igniteui-angular/lib/services/excel/excel-files.ts","ng://igniteui-angular/lib/services/excel/excel-folders.ts","ng://igniteui-angular/lib/services/excel/excel-elements-factory.ts","ng://igniteui-angular/lib/services/excel/worksheet-data-dictionary.ts","ng://igniteui-angular/lib/services/excel/worksheet-data.ts","ng://igniteui-angular/lib/services/excel/excel-exporter.ts","ng://igniteui-angular/lib/services/excel/excel-exporter-options.ts","ng://igniteui-angular/lib/services/overlay/position/global-position-strategy.ts","ng://igniteui-angular/lib/services/overlay/scroll/scroll-strategy.ts","ng://igniteui-angular/lib/services/overlay/scroll/NoOpScrollStrategy.ts","ng://igniteui-angular/lib/core/deprecateDecorators.ts","ng://igniteui-angular/lib/services/overlay/overlay.ts","ng://igniteui-angular/lib/drop-down/drop-down.common.ts","ng://igniteui-angular/lib/services/overlay/position/container-position-strategy.ts","ng://igniteui-angular/lib/services/overlay/position/connected-positioning-strategy.ts","ng://igniteui-angular/lib/services/overlay/position/base-fit-position-strategy.ts","ng://igniteui-angular/lib/services/overlay/position/auto-position-strategy.ts","ng://igniteui-angular/lib/services/overlay/position/elastic-position-strategy.ts","ng://igniteui-angular/lib/services/overlay/scroll/absolute-scroll-strategy.ts","ng://igniteui-angular/lib/services/overlay/scroll/block-scroll-strategy.ts","ng://igniteui-angular/lib/services/overlay/scroll/close-scroll-strategy.ts","ng://igniteui-angular/lib/services/transaction/base-transaction.ts","ng://igniteui-angular/lib/services/transaction/igx-transaction.ts","ng://igniteui-angular/lib/services/transaction/igx-hierarchical-transaction.ts","ng://igniteui-angular/lib/directives/toggle/toggle.directive.ts","ng://igniteui-angular/lib/core/displayDensity.ts","ng://igniteui-angular/lib/core/selection.ts","ng://igniteui-angular/lib/drop-down/drop-down-group.component.ts","ng://igniteui-angular/lib/drop-down/drop-down-item.base.ts","ng://igniteui-angular/lib/drop-down/drop-down-item.component.ts","ng://igniteui-angular/lib/drop-down/drop-down.base.ts","ng://igniteui-angular/lib/directives/for-of/display.container.ts","ng://igniteui-angular/lib/directives/for-of/base.helper.component.ts","ng://igniteui-angular/lib/directives/for-of/horizontal.virtual.helper.component.ts","ng://igniteui-angular/lib/directives/for-of/virtual.helper.component.ts","ng://igniteui-angular/lib/directives/scroll-inertia/scroll_inertia.directive.ts","ng://igniteui-angular/lib/directives/for-of/for_of.sync.service.ts","ng://igniteui-angular/lib/directives/for-of/for_of.directive.ts","ng://igniteui-angular/lib/directives/hint/hint.directive.ts","ng://igniteui-angular/lib/drop-down/drop-down.component.ts","ng://igniteui-angular/lib/drop-down/drop-down-navigation.directive.ts","ng://igniteui-angular/lib/drop-down/index.ts","ng://igniteui-angular/lib/directives/input/input.directive.ts","ng://igniteui-angular/lib/input-group/input-group.common.ts","ng://igniteui-angular/lib/input-group/input-group.component.ts","ng://igniteui-angular/lib/directives/label/label.directive.ts","ng://igniteui-angular/lib/directives/prefix/prefix.directive.ts","ng://igniteui-angular/lib/directives/suffix/suffix.directive.ts","ng://igniteui-angular/lib/directives/divider/divider.directive.ts","ng://igniteui-angular/lib/directives/autocomplete/autocomplete.directive.ts","ng://igniteui-angular/lib/directives/button/button.directive.ts","ng://igniteui-angular/lib/directives/drag-drop/drag-drop.directive.ts","ng://igniteui-angular/lib/directives/drag-drop/drag-drop.strategy.ts","ng://igniteui-angular/lib/directives/drag-drop/drag-handle.directive.ts","ng://igniteui-angular/lib/radio/radio.component.ts","ng://igniteui-angular/lib/directives/filter/filter.directive.ts","ng://igniteui-angular/lib/directives/focus/focus.directive.ts","ng://igniteui-angular/lib/directives/layout/layout.directive.ts","ng://igniteui-angular/lib/directives/mask/mask-helper.ts","ng://igniteui-angular/lib/directives/mask/mask.directive.ts","ng://igniteui-angular/lib/avatar/avatar.component.ts","ng://igniteui-angular/lib/directives/ripple/ripple.directive.ts","ng://igniteui-angular/lib/directives/radio/radio-group.directive.ts","ng://igniteui-angular/lib/directives/text-highlight/text-highlight.directive.ts","ng://igniteui-angular/lib/directives/text-selection/text-selection.directive.ts","ng://igniteui-angular/lib/directives/tooltip/tooltip.directive.ts","ng://igniteui-angular/lib/data-operations/filtering-condition.ts","ng://igniteui-angular/lib/data-operations/filtering-state.interface.ts","ng://igniteui-angular/lib/data-operations/groupby-record.interface.ts","ng://igniteui-angular/lib/icon/icon.service.ts","ng://igniteui-angular/lib/icon/icon.component.ts","ng://igniteui-angular/lib/icon/index.ts","ng://igniteui-angular/lib/badge/badge.component.ts","ng://igniteui-angular/lib/expansion-panel/expansion-panel-header.component.ts","ng://igniteui-angular/lib/expansion-panel/expansion-panel.common.ts","ng://igniteui-angular/lib/expansion-panel/expansion-panel-body.component.ts","ng://igniteui-angular/lib/expansion-panel/expansion-panel.directives.ts","ng://igniteui-angular/lib/buttonGroup/buttonGroup.component.ts","ng://igniteui-angular/lib/expansion-panel/expansion-panel.component.ts","ng://igniteui-angular/lib/expansion-panel/expansion-panel.module.ts","ng://igniteui-angular/lib/banner/banner.directives.ts","ng://igniteui-angular/lib/banner/banner.component.ts","ng://igniteui-angular/lib/core/dates/dateRange.ts","ng://igniteui-angular/lib/calendar/calendar.ts","ng://igniteui-angular/lib/calendar/calendar-base.ts","ng://igniteui-angular/lib/calendar/calendar.directives.ts","ng://igniteui-angular/lib/calendar/month-picker-base.ts","ng://igniteui-angular/lib/calendar/days-view/daysview-navigation.service.ts","ng://igniteui-angular/lib/calendar/months-view/months-view.component.ts","ng://igniteui-angular/lib/calendar/years-view/years-view.component.ts","ng://igniteui-angular/lib/calendar/days-view/day-item.component.ts","ng://igniteui-angular/lib/card/card.component.ts","ng://igniteui-angular/lib/calendar/days-view/days-view.component.ts","ng://igniteui-angular/lib/calendar/calendar.component.ts","ng://igniteui-angular/lib/calendar/month-picker/month-picker.component.ts","ng://igniteui-angular/lib/calendar/months-view.pipe.ts","ng://igniteui-angular/lib/calendar/calendar.module.ts","ng://igniteui-angular/lib/carousel/slide.component.ts","ng://igniteui-angular/lib/carousel/carousel.directives.ts","ng://igniteui-angular/lib/core/i18n/resources.ts","ng://igniteui-angular/lib/core/i18n/grid-resources.ts","ng://igniteui-angular/lib/core/i18n/time-picker-resources.ts","ng://igniteui-angular/lib/core/i18n/paginator-resources.ts","ng://igniteui-angular/lib/core/i18n/carousel-resources.ts","ng://igniteui-angular/lib/carousel/carousel.component.ts","ng://igniteui-angular/lib/checkbox/checkbox.component.ts","ng://igniteui-angular/lib/combo/combo.component.ts","ng://igniteui-angular/lib/chips/chip.component.ts","ng://igniteui-angular/lib/chips/chips-area.component.ts","ng://igniteui-angular/lib/chips/chips.module.ts","ng://igniteui-angular/lib/combo/combo.directives.ts","ng://igniteui-angular/lib/combo/combo.api.ts","ng://igniteui-angular/lib/combo/combo-item.component.ts","ng://igniteui-angular/lib/combo/combo.common.ts","ng://igniteui-angular/lib/combo/combo-add-item.component.ts","ng://igniteui-angular/lib/combo/combo-dropdown.component.ts","ng://igniteui-angular/lib/combo/combo.pipes.ts","ng://igniteui-angular/lib/core/enums.ts","ng://igniteui-angular/lib/date-picker/date-picker.utils.ts","ng://igniteui-angular/lib/date-picker/date-picker.pipes.ts","ng://igniteui-angular/lib/date-picker/date-picker.common.ts","ng://igniteui-angular/lib/date-picker/date-picker.directives.ts","ng://igniteui-angular/lib/date-picker/calendar-container.component.ts","ng://igniteui-angular/lib/date-picker/date-picker.component.ts","ng://igniteui-angular/lib/directives/template-outlet/template_outlet.directive.ts","ng://igniteui-angular/lib/dialog/dialog.directives.ts","ng://igniteui-angular/lib/dialog/dialog.component.ts","ng://igniteui-angular/lib/progressbar/progressbar.common.ts","ng://igniteui-angular/lib/services/direction/directionality.ts","ng://igniteui-angular/lib/progressbar/progressbar.component.ts","ng://igniteui-angular/lib/select/select-item.component.ts","ng://igniteui-angular/lib/select/select-positioning-strategy.ts","ng://igniteui-angular/lib/select/select.component.ts","ng://igniteui-angular/lib/select/select-navigation.directive.ts","ng://igniteui-angular/lib/select/select-group.component.ts","ng://igniteui-angular/lib/select/select.module.ts","ng://igniteui-angular/lib/grids/watch-changes.ts","ng://igniteui-angular/lib/grids/hierarchical-grid/row-island-api.service.ts","ng://igniteui-angular/lib/grids/selection/selection.service.ts","ng://igniteui-angular/lib/core/touch.ts","ng://igniteui-angular/lib/grids/common/enums.ts","ng://igniteui-angular/lib/grids/cell.component.ts","ng://igniteui-angular/lib/grids/grid-navigation.service.ts","ng://igniteui-angular/lib/grids/row.directive.ts","ng://igniteui-angular/lib/grids/summaries/grid-summary.ts","ng://igniteui-angular/lib/grids/columns/templates.directive.ts","ng://igniteui-angular/lib/grids/columns/column.component.ts","ng://igniteui-angular/lib/grids/grid.common.ts","ng://igniteui-angular/lib/grids/column-chooser-item-base.ts","ng://igniteui-angular/lib/grids/hiding/column-hiding-item.directive.ts","ng://igniteui-angular/lib/grids/column-chooser-base.ts","ng://igniteui-angular/lib/grids/hiding/column-hiding.component.ts","ng://igniteui-angular/lib/grids/pinning/pinning.directive.ts","ng://igniteui-angular/lib/grids/pinning/column-pinning.component.ts","ng://igniteui-angular/lib/grids/toolbar/grid-toolbar.component.ts","ng://igniteui-angular/lib/grids/grid.rowEdit.directive.ts","ng://igniteui-angular/lib/grids/grid/groupby-row.component.ts","ng://igniteui-angular/lib/list/list.common.ts","ng://igniteui-angular/lib/grids/filtering/svgIcons.ts","ng://igniteui-angular/lib/grids/common/pipes.ts","ng://igniteui-angular/lib/grids/filtering/grid-filtering.service.ts","ng://igniteui-angular/lib/grids/resizing/resizing.service.ts","ng://igniteui-angular/lib/grids/selection/drag-select.directive.ts","ng://igniteui-angular/lib/list/list-item.component.ts","ng://igniteui-angular/lib/list/list.component.ts","ng://igniteui-angular/lib/grids/filtering/excel-style/excel-style-search.component.ts","ng://igniteui-angular/lib/grids/filtering/excel-style/excel-style-default-expression.component.ts","ng://igniteui-angular/lib/grids/filtering/excel-style/excel-style-date-expression.component.ts","ng://igniteui-angular/lib/grids/filtering/excel-style/excel-style-custom-dialog.component.ts","ng://igniteui-angular/lib/grids/filtering/excel-style/excel-style-sorting.component.ts","ng://igniteui-angular/lib/grids/filtering/excel-style/grid.excel-style-filtering.component.ts","ng://igniteui-angular/lib/grids/filtering/excel-style/excel-style-position-strategy.ts","ng://igniteui-angular/lib/grids/headers/grid-header.component.ts","ng://igniteui-angular/lib/grids/filtering/base/grid-filtering-cell.component.ts","ng://igniteui-angular/lib/grids/headers/grid-header-group.component.ts","ng://igniteui-angular/lib/grids/summaries/grid-summary.service.ts","ng://igniteui-angular/lib/grids/summaries/summary-cell.component.ts","ng://igniteui-angular/lib/grids/summaries/summary-row.component.ts","ng://igniteui-angular/lib/grids/moving/moving.service.ts","ng://igniteui-angular/lib/grids/resizing/resizer.directive.ts","ng://igniteui-angular/lib/grids/resizing/resizer.component.ts","ng://igniteui-angular/lib/grids/filtering/base/grid-filtering-row.component.ts","ng://igniteui-angular/lib/grids/grid-mrl-navigation.service.ts","ng://igniteui-angular/lib/grids/moving/moving.drag.directive.ts","ng://igniteui-angular/lib/grids/grid/grid.directives.ts","ng://igniteui-angular/lib/grids/filtering/advanced-filtering/advanced-filtering-dialog.component.ts","ng://igniteui-angular/lib/grids/selection/row-selectors.ts","ng://igniteui-angular/lib/grids/toolbar/toolbar.directive.ts","ng://igniteui-angular/lib/grids/columns/column-group.component.ts","ng://igniteui-angular/lib/grids/row-drag.directive.ts","ng://igniteui-angular/lib/grids/grid-base.directive.ts","ng://igniteui-angular/lib/grids/grid/grid-api.service.ts","ng://igniteui-angular/lib/grids/grid/grid.component.ts","ng://igniteui-angular/lib/grids/state.directive.ts","ng://igniteui-angular/lib/grids/common/shared.module.ts","ng://igniteui-angular/lib/grids/hiding/hiding.module.ts","ng://igniteui-angular/lib/grids/grid-footer/grid-footer.component.ts","ng://igniteui-angular/lib/paginator/paginator.component.ts","ng://igniteui-angular/lib/grids/common/grid-pipes.module.ts","ng://igniteui-angular/lib/grids/filtering/excel-style/excel-style-column-moving.component.ts","ng://igniteui-angular/lib/grids/filtering/excel-style/excel-style-search.pipe.ts","ng://igniteui-angular/lib/grids/filtering/excel-style/grid.excel-style-filtering.module.ts","ng://igniteui-angular/lib/grids/selection/selection.module.ts","ng://igniteui-angular/lib/grids/resizing/resize-handle.directive.ts","ng://igniteui-angular/lib/grids/resizing/resize.module.ts","ng://igniteui-angular/lib/grids/moving/moving.drop.directive.ts","ng://igniteui-angular/lib/grids/moving/moving.module.ts","ng://igniteui-angular/lib/grids/summaries/grid-root-summary.pipe.ts","ng://igniteui-angular/lib/grids/summaries/summary.module.ts","ng://igniteui-angular/lib/grids/pinning/pinning.module.ts","ng://igniteui-angular/lib/grids/toolbar/toolbar.module.ts","ng://igniteui-angular/lib/grids/columns/column-layout.component.ts","ng://igniteui-angular/lib/grids/columns/column.module.ts","ng://igniteui-angular/lib/grids/filtering/base/filtering.module.ts","ng://igniteui-angular/lib/grids/headers/headers.module.ts","ng://igniteui-angular/lib/grids/grid-common.module.ts","ng://igniteui-angular/lib/grids/grid/grid.pipes.ts","ng://igniteui-angular/lib/grids/grid/grid-row.component.ts","ng://igniteui-angular/lib/grids/grid/grid.summary.pipe.ts","ng://igniteui-angular/lib/grids/grid/grid.details.pipe.ts","ng://igniteui-angular/lib/grids/grid/expandable-cell.component.ts","ng://igniteui-angular/lib/grids/grid/grid.module.ts","ng://igniteui-angular/lib/grids/tree-grid/tree-grid-api.service.ts","ng://igniteui-angular/lib/grids/tree-grid/tree-grid-navigation.service.ts","ng://igniteui-angular/lib/grids/tree-grid/tree-grid.directives.ts","ng://igniteui-angular/lib/grids/tree-grid/tree-grid.component.ts","ng://igniteui-angular/lib/grids/tree-grid/tree-grid-row.component.ts","ng://igniteui-angular/lib/grids/tree-grid/tree-grid.pipes.ts","ng://igniteui-angular/lib/grids/tree-grid/tree-cell.component.ts","ng://igniteui-angular/lib/grids/tree-grid/tree-grid.summary.pipe.ts","ng://igniteui-angular/lib/grids/tree-grid/tree-grid.module.ts","ng://igniteui-angular/lib/grids/hierarchical-grid/hierarchical-grid-navigation.service.ts","ng://igniteui-angular/lib/grids/hierarchical-grid/hierarchical-grid-base.directive.ts","ng://igniteui-angular/lib/slider/slider.common.ts","ng://igniteui-angular/lib/grids/hierarchical-grid/hierarchical-grid-api.service.ts","ng://igniteui-angular/lib/grids/hierarchical-grid/row-island.component.ts","ng://igniteui-angular/lib/grids/hierarchical-grid/child-grid-row.component.ts","ng://igniteui-angular/lib/grids/hierarchical-grid/hierarchical-grid.component.ts","ng://igniteui-angular/lib/grids/hierarchical-grid/hierarchical-cell.component.ts","ng://igniteui-angular/lib/grids/hierarchical-grid/hierarchical-row.component.ts","ng://igniteui-angular/lib/grids/hierarchical-grid/hierarchical-grid.pipes.ts","ng://igniteui-angular/lib/grids/hierarchical-grid/hierarchical-grid.module.ts","ng://igniteui-angular/lib/navbar/navbar.component.ts","ng://igniteui-angular/lib/navigation-drawer/navigation-drawer.directives.ts","ng://igniteui-angular/lib/navigation-drawer/navigation-drawer.component.ts","ng://igniteui-angular/lib/navigation-drawer/navigation-drawer.module.ts","ng://igniteui-angular/lib/slider/thumb/thumb-slider.component.ts","ng://igniteui-angular/lib/switch/switch.component.ts","ng://igniteui-angular/lib/slider/label/thumb-label.component.ts","ng://igniteui-angular/lib/slider/ticks/ticks.component.ts","ng://igniteui-angular/lib/slider/ticks/tick.pipe.ts","ng://igniteui-angular/lib/slider/slider.component.ts","ng://igniteui-angular/lib/snackbar/snackbar.component.ts","ng://igniteui-angular/lib/tabs/tabs.directives.ts","ng://igniteui-angular/lib/tabbar/tabbar.component.ts","ng://igniteui-angular/lib/tabs/tabs.common.ts","ng://igniteui-angular/lib/tabs/tabs.component.ts","ng://igniteui-angular/lib/tabs/tab-item.component.ts","ng://igniteui-angular/lib/tabs/tabs-group.component.ts","ng://igniteui-angular/lib/toast/toast.component.ts","ng://igniteui-angular/lib/time-picker/time-picker.common.ts","ng://igniteui-angular/lib/time-picker/time-picker.directives.ts","ng://igniteui-angular/lib/time-picker/time-picker.pipes.ts","ng://igniteui-angular/lib/time-picker/time-picker.component.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","EaseIn","EaseOut","EaseInOut","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__values","o","m","Symbol","iterator","next","value","done","__read","e","ar","push","error","__spread","concat","base","style","opacity","animate","baseParams","delay","duration","easing","sine","endOpacity","startOpacity","fadeIn","animation","params","fadeOut","baseRecipe","backfaceVisibility","transformStyle","keyframes","offset","transform","quad","endAngle","endDistance","rotateX","rotateY","rotateZ","startAngle","startDistance","flipTop","flipBottom","flipLeft","flipRight","flipHorFwd","flipHorBck","flipVerFwd","flipVerBck","transformOrigin","baseInParams","xPos","yPos","baseOutParams","rotateInCenter","rotateOutCenter","rotateInTop","rotateOutTop","rotateInRight","rotateOutRight","rotateInBottom","rotateOutBottom","rotateInLeft","rotateOutLeft","rotateInTr","rotateOutTr","rotateInBr","rotateOutBr","rotateInBl","rotateOutBl","rotateInTl","rotateOutTl","rotateInDiagonal1","rotateOutDiagonal1","rotateInDiagonal2","rotateOutDiagonal2","rotateInHor","rotateOutHor","rotateInVer","rotateOutVer","direction","shakeHor","shakeVer","shakeTop","shakeBottom","shakeRight","shakeLeft","shakeCenter","shakeTr","shakeBr","shakeBl","shakeTl","heartbeatBase","animationTimingFunction","pulsateBase","pulsateParams","fromScale","toScale","blinkBase","pulsateFwd","pulsateBck","heartbeat","blink","midScale","scaleInCenter","scaleInBl","scaleInVerCenter","scaleInTop","scaleInLeft","scaleInVerTop","scaleInTr","scaleInTl","scaleInVerBottom","scaleInRight","scaleInHorCenter","scaleInBr","scaleInHorLeft","scaleInBottom","scaleInHorRight","scaleOutCenter","scaleOutBl","scaleOutBr","scaleOutVerCenter","scaleOutVerTop","scaleOutVerBottom","scaleOutTop","scaleOutLeft","scaleOutTr","scaleOutTl","scaleOutRight","scaleOutBottom","scaleOutHorCenter","scaleOutHorLeft","scaleOutHorRight","fromPosition","toPosition","slideInTop","slideInLeft","slideInRight","slideInBottom","slideInTr","slideInTl","slideInBr","slideInBl","slideOutTop","slideOutRight","slideOutBottom","slideOutLeft","slideOutTr","slideOutBr","slideOutBl","slideOutTl","swingBase","swingParams","back","swingOutParams","swingInTopFwd","swingInRightFwd","swingInBottomFwd","swingInLeftFwd","swingInTopBck","swingInRightBck","swingInBottomBck","swingInLeftBck","swingOutTopFwd","swingOutRightFwd","swingOutBottomFwd","swingOutLefttFwd","swingOutTopBck","swingOutRightBck","swingOutBottomBck","swingOutLeftBck","height","startHeight","endHeight","growVerIn","growVerOut","IgxNavigationService","navs","add","id","navItem","remove","get","toggle","args","_i","_a","open","close","Injectable","IgxNavigationToggleDirective","nav","state","toggleNavigationDrawer","Input","HostListener","Directive","selector","IgxNavigationCloseDirective","closeNavigationDrawer","IgxNavigationModule","NgModule","declarations","exports","providers","cloneArray","array","deep","arr","cloneValue","mergeObjects","obj1","obj2","isObject","Error","_b","keys","_c","isDate","Date","getTime","isArray","Map","Set","result","toString","isEqual","getNodeSizeViaRange","range","node","overflow","isFirefox","selectNodeContents","width","getBoundingClientRect","isIE","navigator","appVersion","indexOf","isEdge","test","userAgent","PlatformUtil","platformId","isBrowser","isPlatformBrowser","isIOS","window","type","Inject","PLATFORM_ID","providedIn","isLeftClick","event","button","flatten","forEach","el","children","toArray","SortingDirection","NAVIGATION_KEYS","ROW_EXPAND_KEYS","split","ROW_COLLAPSE_KEYS","SUPPORTED_KEYS","from","isHierarchyMatch","h1","h2","every","level","index","fieldName","getHierarchy","gRow","hierarchy","undefined","expression","groupParent","unshift","PagingError","FilteringLogic","FilteringExpressionsTreeType","DefaultSortingStrategy","instance","_instance","sort","data","dir","ignoreCase","valueResolver","_this","reverse","Desc","arraySort","compareObjects","compareValues","a","bn","toLowerCase","compareFn","NoopSortingStrategy","expressions","IgxSorting","sortDataRecursive","groupedRecordsByExpression","groupval","res","len","getFieldValue","comparer","groupingComparer","expressionIndex","j","expr","gbData","gbDataLen","exprsLen","dataLen","strategy","groupDataRecursive","parent","metadata","grid","groupsRecords","fullResult","expansion","group","this_1","groupRow","records","groups","renderedRowHeight","expandState","find","expanded","defaultExpanded","recursiveResult","group_1","e_1","group_1_1","groupItem","slice","obj","IgxDataRecordSorting","_super","IgxGrouping","groupBy","TransactionType","DataType","FilteringExpressionsTree","operator","filteringOperands","empty","expressionTree","findIndex","isFilteringExpressionsTreeForColumn","expressionsTree","NoopFilteringStrategy","filter","advancedExpressionsTree","BaseFilteringStrategy","findMatchByExpression","rec","cond","condition","val","logic","searchVal","matchRecord","matchOperand","operand","And","Or","FilteringStrategy","_instace","CsvFileTypes","DataUtil","sorting","treeGridSort","hierarchicalData","hr","cloneTreeGridRecord","hierarchicalRecord","rowID","isFilteredOutParent","grouping","splice","page","recordsPerPage","countPages","countRecords","None","isNaN","IncorrectPageIndex","IncorrectRecordsPerPage","Math","ceil","correctPagingState","maxPage","mergeTransactions","transactions","primaryKey","deleteRows","item","rowId","transaction","UPDATE","newValue","DELETE","ADD","map","mergeHierarchicalTransactions","childDataKey","path","parent_1","findParentFromPath","collection","updateIndex","x","deleteIndex","transactions_1","transactions_1_1","parseValue","dataType","Number","parseFloat","path_1","path_1_1","ExportUtilities","getKeysFromData","dataEntry","dataEntryMiddle","floor","dataEntryLast","keys1","keys2","keys3","isSpecialData","saveBlobToFile","blob","fileName","document","createElement","msSaveOrOpenBlob","url","URL","createObjectURL","download","href","body","appendChild","click","removeChild","revokeObjectURL","stringToArrayBuffer","buf","ArrayBuffer","view","Uint8Array","charCodeAt","hasValue","isNullOrWhitespaces","trim","GridBaseAPIService","destroyMap","get_column_by_name","name","columnList","col","field","get_summary_data","filteredData","enabled","getAggregatedChanges","getTransactionLog","getRowData","get_all_data","get_row_index_in_data","escape_editMode","crudService","end","get_cell_inEditMode","cell","record","get_row_by_key","rowSelector","dataRowList","row","rowData","get_row_by_index","rowIndex","rowList","get_cell_by_key","cells","column","get_cell_by_index","columnIndex","get_cell_by_visible_index","visibleColumnIndex","submit_value","update_cell","editValue","cancel","createEditEventArgs","onCellEdit","emit","castToNumber","oldValue","summaryService","clearSummaryCache","updateData","selectionService","isRowSelected","deselectRow","selectRowById","hasSummarizedColumns","removeSummaries","rowEditable","_pipeTrigger","rowValueInDataSource","rowCurrentValue","rowNewValue","_update_row","rowInEditMode","newData","getAggregatedValue","transactionState","getState","update_row","selected","hasSummarized","onRowEdit","hasChanges","endPending","newId","update_row_in_array","remove_grouping_expression","sortingState","sortingExpressions","prepare_sorting_expression","sort_multiple","expressions_1","expressions_1_1","each","term","conditionOrExpressionsTree","filteringTree","filteringExpressionsTree","endEdit","paging","fieldFilterIndex","prepare_filtering_expression","filter_global","columns","filteringIgnoreCase","clear_filter","filteringState","clear_sort","insertAtIndex","newExpressionsTree","oldExpressionsTreeIndex","newExpression","stateCollections","maxCollection","maxExpr","myExpr","clear_groupby","should_apply_number_style","get_data","includeTransactions","dataWithAddedInTransactionRows","get_filtered_data","getSortStrategyPerColumn","sortStrategy","addRowToData","deleteRowFromData","recordRef","deleteRowById","hasRowInNonDeletedState","onRowDeleted","clearHeaderCBState","notifyChanges","dataAfterDelete","refreshSearch","perPage","get_row_id","row_deleted_transaction","atInexistingPage","totalPages","get_row_expansion_state","states","expansionStates","getDefaultExpandState","set_row_expansion_state","expandedStates","allow_expansion_state_change","onRowToggle","set","eventKey","isToggleKey","zone","onStable","pipe","debounceTime","first","subscribe","focusActiveCell","get_rec_by_id","has","isVirtualized","verticalScrollContainer","dc","notVirtual","activeElement","visibleColumns","nativeElement","focus","TreeGridFilteringStrategy","filterImpl","filteredChildren","IgxTreeGridFilteringPipe","gridAPI","hierarchyData","filterStrategy","advancedFilteringExpressionsTree","pipeTrigger","filteringPipeTrigger","resetFilteredOutProperty","expandAllRecursive","updateNonProcessedRecord","Pipe","pure","IgxBaseExporter","flatRecords","_isTreeGrid","_indexOfLastPinnedColumn","_sort","onRowExport","EventEmitter","onColumnExport","export","options","_columnList","hiddenColumns","lastVisbleColumnIndex","columnHeader","header","exportColumn","hidden","ignoreColumnsVisibility","ignoreColumnsOrder","visibleIndex","columnInfo","skip","formatter","skipFormatter","max","pinned","hiddenColumn","prepareData","exportData","k","skippedPinnedColumnsCount","columnsWithoutHeaderCount","columnExportArgs","dataToExport","exportRow","exportDataImplementation","resetDefaults","rowArgs","reduce","rawValue","originalRowData","rootRecords","prepareHierarchicalData","ignoreFiltering","filteringLogic","ignoreSorting","CharSeparatedValueData","_data","valueDelimiter","_headerRecord","_dataRecords","_eor","_escapeCharacters","_delimiterLength","_isSpecialData","setDelimiter","_delimiter","processHeaderRecord","processDataRecords","processField","escapeChars","safeValue","String","some","v","includes","recordData","keys_1","keys_1_1","keyName","processRecord","keys_2","keys_2_1","currentData","dataRecords","currentData_1","currentData_1_1","IgxExporterOptionsBase","_fileExtension","setFileName","_fileName","endsWith","IgxCsvExporterOptions","fileType","getExtensionFromFileType","setFileType","fType","extension","CSV","TSV","TAB","_valueDelimiter","_fileType","oldExt","pop","newName","replace","ExcelFolderTypes","ExcelFileTypes","IgxCsvExporterService","onExportEnded","csvData","_stringData","saveFile","exportFile","Blob","Output","HorizontalAlignment","VerticalAlignment","ExcelStrings","getRels","XML_STRING","getApp","getCore","getTheme","getStyles","hasNonStringValues","cellXFCount","getWorkbook","getWorksheetRels","getWorkbookRels","hasSharedStrings","retVal","SHARED_STRING_RELATIONSHIP","getSheetXML","dimension","freezePane","cols","sheetData","hasTable","hasGroupedRows","outlineLevel","tableParts","sheetOutlineProp","sOutlineLevel","getSharedStringXML","count","uniqueCount","table","getContentTypesXML","contentTypes","getTablesXML","tableColumns","getExcelColumn","returnString","char","fromCharCode","RootRelsFile","writeElement","folder","worksheetData","file","AppFile","CoreFile","WorkbookRelsFile","isEmpty","ThemeFile","WorksheetFile","dictionary","dataDictionary","maxOutlineLevel","rowHeight","columnCount","saveValue","rowCount","isTreeGridData","sCollapsed","sHidden","hasCollapsedParent","rowOutlineLevel","cellData","getCellData","columnWidths","widthInTwips","columnWidth","MIN_WIDTH","indexOfLastPinnedColumn","ignorePinning","frozenColumnCount","exportAsTable","join","columnName","cellValue","savedValue","isSavedAsString","StyleFile","WorkbookFile","ContentTypesFile","SharedStringsFile","dict","sortedValues","getKeys","sharedStrings","sortedValues_1","sortedValues_1_1","getSanitizedValue","stringsCount","TablesFile","lastColumn","values","sortString","sortingExpression","sc","WorksheetRelsFile","RootExcelFolder","childFiles","childFolders","RootRelsExcelFolder","DocPropsExcelFolder","XLExcelFolder","XLRelsExcelFolder","ThemeExcelFolder","WorksheetsExcelFolder","TablesExcelFolder","WorksheetsRelsExcelFolder","ExcelElementsFactory","getExcelFolder","getExcelFile","WorksheetDataDictionary","_dictionary","_widthsDictionary","_counter","dirtyKeyCollections","_calculateColumnWidth","_columnWidths","_columnTypeInfo","fill","isHeader","sanitizedValue","sanitizeValue","getTextWidth","maxWidth","getValue","_keysAreValid","_keys","metrics","getContext","measureText","TEXT_PADDING","_context","canvas","font","DEFAULT_FONT","WorksheetData","initializeData","_columnCount","_rowCount","_dataDictionary","actualData","IgxExcelExporterService","populateFolder","zip","_d","childFolder","folderIntance","zipFolder","folderName","IgxExcelExporterService_1","_e","_f","childFile","maxLevel_1","_xlsx","JSZip","rootFolder","generateAsync","ZIP_OPTIONS","then","xlsx","atob","compression","IgxExcelExporterOptions","_columnWidth","_rowHeight","Point","y","Util","getTargetRect","settings","targetRect","bottom","left","right","top","HTMLElement","targetPoint","getViewportRect","documentElement","clientWidth","clientHeight","scrollPosition","getViewportScrollPosition","documentRect","horizontalScrollPosition","scrollLeft","scrollX","verticalScrollPosition","scrollTop","scrollY","cloneInstance","object","clonedObj","getPrototypeOf","GlobalPositionStrategy","_defaultSettings","horizontalDirection","Center","verticalDirection","Middle","horizontalStartPoint","verticalStartPoint","openAnimation","closeAnimation","minSize","position","contentElement","size","initialCall","classList","parentElement","setPosition","Left","justifyContent","Right","Top","alignItems","Bottom","clone","scrollContainer","NoOpScrollStrategy","initialize","overlayService","attach","detach","ScrollStrategy","DeprecateMethod","message","isMessageShown","descriptor","originalMethod_1","targetName","showMessage","DeprecateProperty","getter_1","setter_1","messageToDisplay","originalDescriptor","newKey","generateUniqueKey","configurable","enumerable","isDevMode","console","warn","Navigate","DropDownActionKey","warningShown","IgxOverlayService","_factoryResolver","_appRef","_injector","builder","_zone","_componentId","_overlayInfos","destroy$","Subject","positionStrategy","scrollStrategy","modal","closeOnOutsideClick","onOpening","onAppended","onOpened","onClosing","onClosed","onAnimation","documentClicked","ev","info","elementRef","contains","positionTarget","clickOnPositionTarget","excludePositionTarget","closeAnimationPlayer","hasStarted","_hide","repositionAll","reposition","_document","component","moduleRef","getOverlayInfo","show","compOrId","getOverlayById","_show","hide","hideAll","overlayInfo","contentElementRect","setOffset","deltaX","deltaY","transformX","transformY","translate","eventArgs","componentRef","detachView","hostView","destroy","elementRect","initialSize","hook","placeElementHook","moveElementToOverlay","changeDetectorRef","detectChanges","updateSize","addOutsideClickListener","addResizeHandler","setupModalWrapper","playOpenAnimation","visibility","removeOutsideClickListener","removeResizeHandler","child","parentNode","applyAnimationParams","playCloseAnimation","onCloseDone","ngZone","ElementRef","dynamicFactory","factoryResolver","componentFactoryResolver","resolveComponentFactory","injector","dynamicComponent","attachView","element","location","insertBefore","wrapperElement","getWrapperElement","getContentElement","getOverlayElement","wrapper","content","addEventListener","stopPropagation","outlet","_overlayElement","fromEvent","takeUntil","cleanUp","openAnimationPlayer","animationBuilder","build","innerRenderer","_renderer","openAnimationInnerPlayer","engine","players","onDone","reset","closeAnimationInnerPlayer","getPosition","init","animationPlayer","animationType","play","animationOptions","transitionDuration","transitionTimingFunction","shouldRemoveClickEventListener_1","removeEventListener","closingOverlaysCount","defaultView","ngOnDestroy","complete","ComponentFactoryResolver","ApplicationRef","Injector","AnimationBuilder","DOCUMENT","NgZone","ContainerPositionStrategy","ConnectedPositioningStrategy","calculateElementRectangles","rects","setStyle","connectedFit","horizontalOffset","verticalOffset","startPoint","wrapperRect","round","BaseFitPositionStrategy","_initialSettings","viewPortRect","updateViewPortFit","shouldFitInViewPort","fitInViewport","calculateLeft","fitHorizontal","forward","calculateTop","fitVertical","AutoPositionStrategy","transformString","canFlipHorizontal","flipHorizontal","horizontalPush","canFlipVertical","flipVertical","verticalPush","flippedStartPoint","flippedDirection","leftBorder","rightBorder","topBorder","bottomBorder","leftExtend","rightExtend","abs","min","topExtend","bottomExtend","ElasticPositionStrategy","maxReduction","reduction","translation","AbsoluteScrollStrategy","_initialized","onScroll","_overlayService","_id","_scrollContainer","runOutsideAngular","addScrollEventListener","BlockScrollStrategy","preventDefault","_sourceElement","_initialScrollTop","_initialScrollLeft","CloseScrollStrategy","cumulativeScrollTop","cumulativeScrollLeft","initialScrollTop","_threshold","initialScrollLeft","scrollHeight","IgxBaseTransactionService","_isPending","_pendingTransactions","_pendingStates","onStateUpdate","updateState","undo","redo","mergeChanges","updateValue","commit","clear","startPending","mergeValues","second","IgxTransactionService","_transactions","_redoStack","_undoStack","_states","verifyAddedTransaction","addTransaction","pending","pendingState","pendingChange","change","aggregatedValue","originalValue","actions","updateRecord","delete","lastActions","currentActions","currentActions_1","e_3","currentActions_1_1","actions_1","actions_1_1","action","cleanState","JSON","stringify","IgxHierarchicalTransactionService","clearArraysFromObject","currentState","prop","IgxToggleDirective","cdr","navigationService","_overlaySubFilter","_overlayId","_collapsed","overlayClosed","unsubscribe","collapsed","overlaySettings","hasOpenAnimation","hasCloseAnimation","openEventArgs","_overlayAppendedSub","_overlayOpenedSub","_overlayClosingSub","clearSubscription","_overlayClosedSub","isClosing","ngOnInit","subscription","closed","ChangeDetectorRef","Optional","HostBinding","exportAs","IgxToggleActionDirective","_target","_overlayDefaults","onClick","clonedSettings","updateOverlaySettings","positionStrategyClone","IgxOverlayOutletDirective","IgxToggleModule","DisplayDensity","IGX_DROPDOWN_BASE","InjectionToken","IgxSelectionAPIService","selection","componentID","newSelection","get_empty","sel","add_item","itemID","add_items","itemIDs","clearSelection","select_item","select_items","delete_item","delete_items","deselectedItem","deselect_item","deselect_items","is_item_selected","first_item","are_all_selected","dataCount","are_none_selected","get_all_ids","NEXT_ID","IgxDropDownGroupComponent","role","groupClass","disabled","labelId","Component","template","IgxDropDownItemBaseDirective","dropDown","_focused","_selected","_index","_disabled","selectedChange","itemIndex","displayDensity","isSelectable","focused","items","ngDoCheck","dropDownSelectedItem","selectedItem","hasIndex","selectItem","ensureItemFocus","allowItemsFocus","focusedItem","preventScroll","clicked","IgxDropDownItemComponent","focusedState","focusedIndex","DisplayDensityToken","DisplayDensityBase","displayDensityOptions","onDensityChanged","oldDisplayDensityOptions","comfortable","_displayDensity","currentDisplayDensity","densityChangedArgs","oldDensity","newDensity","initialDensity","getComponentDensityClass","baseStyleClass","cosy","compact","IgxDisplayDensityModule","IgxDropDownBaseDirective","_displayDensityOptions","_focusedItem","onSelection","maxHeight","cssClass","headers","onItemActionKey","ENTER","SPACE","ESCAPE","oldSelection","navigate","currentIndex","newIndex","getNearestSiblingFocusableItemIndex","navigateItem","startIndex","oldItem","newItem","scrollToHiddenItem","navigateFirst","Down","navigateLast","Up","navigateNext","navigatePrev","parentRect","DisplayContainerComponent","_viewContainer","ViewContainerRef","ViewChild","read","static","VirtualHelperBaseDirective","scrollAmount","_size","_afterViewInit","ngAfterViewInit","destroyed","HVirtualHelperComponent","cssClasses","VirtualHelperComponent","IgxScrollInertiaDirective","wheelStep","inertiaStep","swipeToleranceX","inertiaDeltaY","inertiaDeltaX","inertiaDuration","_savedSpeedsX","setPointerCaptureFName","Element","releasePointerCaptureFName","targetElem","evt","onWheel","onTouchStart","onTouchMove","onTouchEnd","onPointerDown","onPointerUp","onMSGestureStart","onMSGestureChange","IgxScrollInertiaScrollContainer","scrollDeltaX","scrollDeltaY","scrollStep","minWheelStep","_startX","_startY","wheelDeltaX","sign","calcAxisCoords","wheelDeltaY","IgxScrollInertiaDirection","_scrollToX","curScrollLeft","maxScrollLeft","parseInt","_scrollToY","preventParentScroll","curScrollTop","maxScrollTop","offsetHeight","MSGesture","cancelAnimationFrame","_touchInertiaAnimID","touch","touches","_touchStartX","pageX","_touchStartY","pageY","_lastTouchEnd","_lastTouchX","_lastTouchY","_savedSpeedsY","_totalMovedX","_offsetRecorded","_offsetDirection","_touchPrevented","scrolledXY","destX","destY","timeFromLastTouch","speedX","speedY","shift","_lastMovedX","_lastMovedY","_scrollTo","_inertiaInit","pointerType","_pointer","pointerId","_gestureObject","addPointer","screenX","screenY","touchPos","dest","stepModifer","_nextX","_nextY","requestAnimationFrame","IgxScrollInertiaModule","imports","CommonModule","IgxForOfSyncService","_master","isMaster","directive","igxForScrollOrientation","setMaster","forced","orientation","resetMaster","sizesCache","chunkSize","IgxForOfScrollSyncService","_masterScroll","setScrollMaster","scroll","getScrollMaster","IgxForOfContext","$implicit","even","IgxForOfDirective","_template","_differs","resolver","syncScrollService","totalItemCount","onChunkLoad","onScrollbarVisibilityChanged","onContentSizeChange","onDataChanged","onBeforeViewDestroyed","onChunkPreload","_sizesCache","_differ","heightCache","MAX_PERF_SCROLL_DIFF","_virtHeight","_virtHeightRatio","_virtScrollTop","_bScrollInternal","_embeddedViews","contentResizeNotify","scrollComponent","getScroll","igxForContainerSize","igxForOf","removeScrollEventListeners","func","verticalScrollHandler","isScrollable","totalSize","vc","igxForScrollContainer","igxForSizePropName","dcFactory","createComponent","scrollDirection","touchAction","initSizesCache","_calculateChunkSize","getIndexAt","input","embeddedView","_vcr","createEmbeddedView","getContextIndex","factory","_maxHeight","_calcMaxBrowserHeight","_calcHeight","bind","destructor","throttleTime","leading","trailing","runTask","updateSizes","onHScroll","hvFactory","_updateHScrollOffset","contentObserver","ResizeObserver","observe","disconnect","ngOnChanges","changes","currentValue","igxForTrackBy","getTypeNameForDebugging","firstChange","_applyChanges","_recalcOnContainerChange","diff","_updateSizeCache","run","markForCheck","_updateScrollOffset","addScrollTop","addTop","originalVirtScrollTop","containerSize","maxVirtScrollTop","scrollOffset","fixedUpdateAllElements","maxRealScrollTop","scrollTo","isRemote","isPrevItem","nextScroll","_adjustToIndex","scrollNext","scr","endIndex","scrollPrev","scrollNextPage","scrollPrevPage","getColumnScrollLeft","colIndex","getItemCountInView","getSizeAt","getScrollForIndex","_calcVirtualScrollTop","prevStartIndex","recalcUpdateSizes","diffs","totalDiff","l","rNodes","rootNodes","nodeType","Node","ELEMENT_NODE","nextElementSibling","rNode","h","igxForItemSize","oldVal","newVal","currDiff","totalWidth","reducer","acc","scrToBottom","_isScrolledToBottom","hSum","_isAtBottomIndex","updatesToIndex","sumDiffs","currOffset","inScrollTop","newStart","prevStart","moveApplyScrollNext","moveApplyScrollPrev","fixedApplyScroll","prevIndex","start","embView","cntx","context","insert","_trackByFn","fn","prevChunkSize","applyChunkSizeChange","_recalcScrollBarSize","embeddedViewCopy","div","_calcMaxChunkSize","getElement","viewref","nodeName","elem","getElementsByTagName","_getItemSize","maxLength","sum","availableSize","accumulator","currentItem","curItem","prevItem","prevSize","midIdx","cmp","scrollable","removeLastElem","oldElem","addLastElem","elemIndex","_updateVScrollOffset","currentScrollTop","realPercentScrolled","dim","TemplateRef","IterableDiffers","IgxHintPosition","IgxGridForOfDirective","syncService","onDataChanging","getItemSize","summaries","masterSizesCache","itemsDimension","oldHeight","handleCacheChanges","identityChanges","newHeightCache","newSizesCache","newHeight","numRemovedItems","forEachRemovedItem","forEachIdentityChange","previousIndex","forEachItem","assumeMaster","_updateViews","IgxForOfModule","entryComponents","IgxDropDownComponent","virtDir","toggleDirective","scrollContainerRef","updateScrollPosition","setSelectedItem","collectionLength","direction_1","subRequired","isIndexOutOfBounds","take","skipHeader","virtState","currentPosition","itemPosition","indexOutOfChunk","scrollNeeded","targetScroll","onToggleOpening","_scrollPosition","onToggleContentAppended","scrollToItem","onToggleOpened","onToggleClosing","onToggleClosed","calculateScrollPosition","setTimeout","scrollDelta","elementHeight","isSelectionValid","ContentChild","ContentChildren","forwardRef","descendants","IgxDropDownComponent_1","provide","useExisting","IgxDropDownItemNavigationDirective","dropdown","handleKeyDown","onArrowUpKeyDown","onArrowDownKeyDown","onHomeKeyDown","onEndKeyDown","Self","IgxDropDownModule","IgxInputState","IgxHintDirective","_element","_position","START","isPositionStart","isPositionEnd","toUpperCase","_applyPosition","END","IgxInputGroupBase","nativeValidationAttributes","IgxInputGroupType","IgxInputDirective","inputGroup","ngModel","formControl","_valid","INITIAL","isInput","isTextArea","checkValidity","hasAttribute","required","isRequired","INVALID","onFocus","isFocused","onBlur","ngControl","valid","_hasValidators","onInput","hasPlaceholder","control","validator","validation","tagName","_statusChanges$","statusChanges","onStatusChanged","asyncValidator","touched","dirty","VALID","placeholder","nativeValidationAttributes_1","nativeValidationAttributes_1_1","nativeValidationAttribute","NgModel","FormControlName","IgxLabelDirective","defaultClass","IgxPrefixDirective","IgxPrefixModule","IgxSuffixDirective","IgxSuffixModule","IgxDividerType","IgxInputGroupComponent","_type","LINE","_filled","_supressInputAutofocus","isBox","isBorder","isSearch","isFluentSearch","isFluent","isBootstrap","hasWarning","BOX","BORDER","FLUENT","FLUENT_SEARCH","SEARCH","BOOTSTRAP","hints","IgxInputGroupComponent_1","IgxInputGroupModule","IgxAutocompleteDirective","defaultSettings","dropDownOpened$","onItemSelected","autofill","select","model","setValue","highlightFirstItem","autocompleteSettings","listId","onArrowDown","onTab","IgxAutocompleteModule","IgxButtonDirective","_defaultType","_cssClassPrefix","buttonClick","removeClass","addClass","_color","color","_backgroundColor","_label","setAttribute","Renderer2","IgxButtonModule","RestrictDrag","IgxDividerDirective","_inset","SOLID","middle","vertical","DASHED","baseMargin","IgxDividerModule","IgxDefaultDropStrategy","dropAction","drag","drop","atIndex","IgxAppendDropStrategy","dragElement","dropAreaElement","IgxPrependDropStrategy","IgxInsertDropStrategy","IgxDragHandleDirective","baseClass","RadioLabelPosition","IgxDragLocation","_pageX","_pageY","IgxDragDirective","viewContainer","renderer","ghostContext","dragTolerance","ghost","ghostClass","hideBaseOnDrag","animateOnRelease","dragStart","dragMove","dragEnd","dragClick","ghostCreate","ghostDestroy","transitioned","_visibility","selectDisabled","defaultReturnDuration","animInProgress","_lastX","_lastY","_dragStarted","_ghostHostX","_ghostHostY","_pointerDownId","_clicked","_lastDropArea","_destroy","_removeOnDestroy","_offsetX","_defaultOffsetX","_offsetY","_defaultOffsetY","bVisible","baseOriginLeft","baseOriginTop","PointerEvent","ghostElement","ghostLeft","baseLeft","ghostTop","baseTop","getTransformX","getTransformY","ghostMarginLeft","getComputedStyle","ghostMarginTop","ngAfterContentInit","dragHandles","pointerEventsEnabled","throttle","interval","animationFrameScheduler","onPointerMove","onPointerLost","touchEventsEnabled","onTransitionEnd","setLocation","newLocation","offsetHostX","ghostHost","ghostHostOffsetLeft","offsetHostY","ghostHostOffsetTop","getWindowScrollLeft","getWindowScrollTop","setTransformXY","transitionToOrigin","customAnimArgs","startLocation","_ghostStartX","_ghostStartY","createGhost","transitionProperty","timingFunction","transitionDelay","transitionTo","movedElem","targetRects","handleFound","handle","currentTarget","targetElement","setPointerCapture","ghostOffsetX","ghostOffsetY","totalMovedX","totalMovedY","dragStartArgs_1","originalEvent","owner","startX","startY","moveArgs","nextPageX","nextPageY","setPageX","setPageY","updatedMovedX","updatedMovedY","lastMovedX","lastMovedY","translateX","translateY","dispatchDragEvents","dispatchDropEvent","dynamicGhostRef","ghostTemplate","cloneNode","createEventArgs","visible","topDropArea","customEventArgs","elementsFromPoint","getElementsAtPoint","getAttribute","dispatchEvent","ghostDestroyArgs","viewPortX","pageXOffset","viewPortY","pageYOffset","elements","eventName","dragLeaveEvent","createEvent","initCustomEvent","posX","matrix","match","posY","ghostPosition","getPropertyValue","offsetParent","IgxDropDirective","enter","over","leave","dropped","droppable","dragover","_dropStrategy","classRef","onDragEnter","onDragLeave","onDragOver","elementPosX","elementPosY","offsetX","detail","offsetY","dragData","isDragLinked","onDragDrop","elementsAtPoint","insertIndex","getInsertIndexAt","dragLinkArray","dragChannel","dropLinkArray","dropChannel","dropLinks","dragLinks","draggedDir","dropChildren","childUnder","draggedElemIndex","IgxDragDropModule","IgxFilterOptions","inputValue","get_value","textContent","valueToTest","matchFn","metConditionFn","overdueConditionFn","IgxFilterDirective","filtering","filtered","filterOptions","previousValue","IgxFilterPipe","filteredItems","IgxFilterModule","IgxFocusDirective","comp","focusState","trigger","getEditElement","NG_VALUE_ACCESSOR","IgxFocusModule","IgxLayoutDirective","wrap","justify","itemAlign","display","IgxFlexDirective","grow","shrink","flex","order","basis","IgxLayoutModule","MASK_FLAGS","KEYS","MaskHelper","_cursor","parseValueByMask","maskOptions","cursor","mask","format","literals","getMaskLiterals","literalKeys","nonLiteralIndeces","getNonLiteralIndeces","parseValueByMaskOnInit","insertCharAt","promptChar","isCharValid","validateCharOnPostion","replaceCharAt","parseMask","outputVal","mask_1","mask_1_1","inputVal","literalValues","mask_2","mask_2_1","nonLiteralValues","getNonLiteralValues","pos","nonLiteralValues_1","nonLiteralValues_1_1","restoreValueFromMask","value_1","value_1_1","parseValueByMaskUponSelection","isMarked","parseValueByMaskUponCopyPaste","clipboardData","selectionEnd","clipboardData_1","clipboardData_1_1","inputChar","isValid","charAt","RegExp","strValue","substring","nonLiteralsIndeces","value_2","value_2_1","noop","IgxMaskDirective","onValueChange","_maskOptions","_onTouchedCallback","_onChangeCallback","maskHelper","_placeholder","selectionStart","onKeydown","keyCode","charCode","_stopPropagation","_ctrlDown","_key","_selection","onKeyup","onPaste","_paste","_valOnPaste","_cursorOnPaste","getCursorPosition","onInputChanged","setCursorPosition","currentCursorPos","rawVal","dataValue","includeLiterals","formattedValue","focusedValuePipe","displayValuePipe","setSelectionRange","writeValue","registerOnChange","registerOnTouched","IgxMaskDirective_1","multi","IgxMaskModule","IgxAvatarSize","IgxAvatarType","nextId","IgxRadioComponent","labelPosition","tabindex","disableRipple","ariaLabelledBy","ariaLabel","checked","inputId","_value","_onRadioChange","_onRadioClick","nativeRadio","blur","_onLabelClick","radio","BEFORE","AFTER","IgxRadioComponent_1","IgxRippleDirective","rippleTarget","rippleDuration","rippleDisabled","rippleElementClass","rippleHostClass","_centered","animationQueue","centered","onMouseDown","_ripple","setStyles","rippleElement","styleParams","radius","rippleColor","querySelector","rectBounds","clientX","clientY","dimensions","IgxRippleModule","IgxRadioGroupDirective","_name","_isInitialized","_labelPosition","_required","_selectRadioButton","_setRadioButtonNames","_setRadioButtonsRequired","_disableRadioButtons","_setRadioButtonLabelPosition","_initRadioButtons","radioButtons","props_1","_selectedRadioButtonChanged","IgxRadioGroupDirective_1","IgxRadioModule","IgxTextHighlightDirective","_div","_observer","_nodeWasRemoved","_forceEvaluation","_activeElementIndex","_defaultCssClass","_defaultActiveCssClass","groupName","IgxTextHighlightDirective_1","onActiveElementChanged","deactivate","activateIfNecessary","_lastSearchInfo","setActiveHighlight","highlight","highlightGroupsMap","clearActiveHighlight","clearHighlight","_valueChanged","searchedText","matchCount","caseSensitive","exactMatch","_container","firstElementChild","ngAfterViewChecked","text","caseSensitiveResolved","exactMatchResolved","searchNeedsEvaluation","clearChildElements","getHighlightedText","activate","MutationObserver","mutationList","mutation","removedNodes","addedNodes","childList","spans","querySelectorAll","elementToActivate","activeCssClass","elementToDeactivate","originalContentHidden","setProperty","searchText","appendDiv","stringValue","contentStringResolved","searchTextResolved","appendSpan","appendText","foundIndex","previousMatchEnd","textElement","createText","outerHTML","span","containerClass","IgxTextHighlightModule","IgxTextSelectionDirective","selectionState","IgxTextSelectionModule","IgxTooltipTargetDirective","_navigationService","showDelay","hideDelay","tooltipDisabled","onTooltipShow","onTooltipHide","positionSettings","useAnimation","checkOutletAndOutsideClick","preMouseEnterCheck","toBeShown","clearTimeout","timeoutId","toBeHidden","hidingArgs","tooltip","forceClose","mergedOverlaySettings","preMouseLeaveCheck","onKeydownEscape","onMouseEnter","showingArgs","onMouseLeave","showTooltip","onDocumentTouchStart","hideTooltip","IgxTooltipDirective","forceOpen","finish","IgxTooltipModule","IgxFilteringOperand","operations","isUnary","iconName","findValueInSet","conditionList","f","append","operation","IgxBooleanFilteringOperand","IgxDateFilteringOperand","validateInputData","targetp","getDateParts","searchp","year","month","day","now","td","setDate","getDate","yesterday","date","dateFormat","hours","milliseconds","minutes","seconds","getFullYear","getMonth","getHours","getMinutes","getSeconds","getMilliseconds","toISOString","IgxNumberFilteringOperand","IgxStringFilteringOperand","search","applyIgnoreCase","startsWith","filteringStateDefaults","GroupedRecords","IgxIconService","_sanitizer","_fontSet","_fontSetAliases","_cachedSvgIcons","className","registerFontSetAlias","alias","fontSetClassName","addSvgIcon","fontSet","safeUrl","bypassSecurityTrustResourceUrl","sanitize","SecurityContext","RESOURCE_URL","fetchSvg","addSvgIconFromText","iconText","cacheSvgIcon","isSvgIconCached","iconKey","getSvgIconKey","httpRequest","XMLHttpRequest","responseType","onload","request","status","statusText","responseText","onerror","send","ensureSvgContainerCreated","innerHTML","svg","oldChild","_svgContainer","DomSanitizer","IgxIconComponent","_el","iconService","ariaHidden","active","defaultFontSet","updateIconClass","iconColor","svgImage","noLigature","explicitLigature","IgxIconModule","IgxBadgeType","IgxAvatarComponent","SMALL","roundShape","src","IMAGE","icon","ICON","initials","INITIALS","CUSTOM","imageTemplate","initialsTemplate","iconTemplate","defaultTemplate","roleDescription","getRole","getSrcUrl","IgxAvatarModule","ICON_POSITION","IgxBadgeComponent","PRIMARY","label","setClasses","classes","INFO","SUCCESS","WARNING","ERROR","IgxBadgeModule","IGX_EXPANSION_PANEL_COMPONENT","IgxExpansionPanelBodyComponent","panel","_labelledBy","IgxExpansionPanelTitleDirective","IgxExpansionPanelDescriptionDirective","IgxExpansionPanelIconDirective","ButtonGroupAlignment","IgxExpansionPanelHeaderComponent","_iconTemplate","lv","iconPosition","LEFT","onInteraction","onAction","openPanel","altKey","expand","closePanel","collapse","Host","IgxExpansionPanelComponent","animationSettings","collapsedChange","onCollapsed","onExpanded","Promise","resolve","labelledBy","headerId","cb","IgxExpansionPanelComponent_1","IgxExpansionPanelModule","IgxBannerActionsDirective","IgxBannerComponent","_bannerActionTemplate","_animationSettings","_expansionPanel","_bannerEvent","banner","openingArgs","closingArgs","onExpansionPanelOpen","onExpansionPanelClose","IgxBannerModule","DateRangeType","TimeDeltaInterval","IgxButtonGroupComponent","_cdr","buttonClickNotifier$","queryListNotifier$","zIndex","multiSelection","selectedIndexes","onSelect","onUnselect","viewButtons","templateButtons","_itemContentCssClass","buttons","_isVertical","horizontal","selectButton","buttonElement","indexInViewButtons","deselectButton","initButtons","_clickHandler","ViewChildren","IgxButtonGroupModule","WEEKDAYS","MDAYS","stop","step","isLeap","weekDay","getDay","monthRange","nDays","isDateInRanges","ranges","dateInMs","ranges_1","ranges_1_1","dRanges","dateRange","dRange","datesInMs","datesInMs_1","e_2","datesInMs_1_1","CalendarSelection","ScrollMonth","Calendar","firstWeekDay","SUNDAY","_firstWeekDay","weekdays","monthdates","extraWeek","days","timedelta","generateICalendarDate","e_4","monthdatescalendar","dates","units","ret","checkRollover","setFullYear","setMonth","setTime","formatToParts","locale","parts","Intl","DateTimeFormat","full","formattedParts_1","toType","partType","literal","combined","parts_1","parts_1_1","parts_2","parts_2_1","getFirstViewDate","activeViewIdx","getNextMonth","Month","getPrevMonth","getNextYear","Year","getPrevYear","isCurrentMonth","isNextMonth","isPrevMonth","isPreviousMonth","IgxCalendarYearDirective","onYearSelection","isCurrentYear","IgxCalendarMonthDirective","onMonthSelection","IgxCalendarHeaderTemplateDirective","IgxCalendarSubheaderTemplateDirective","IgxCalendarScrollMonthDirective","debounce","stopScroll","tap","startScroll","onMouseUp","CalendarView","IgxCalendarBaseDirective","hideOutsideDays","SINGLE","rangeStarted","_locale","_disabledDates","_specialDates","_formatOptions","weekday","_formatViews","monthScrollDirection","NONE","scrollMonth$","stopMonthScroll$","startMonthScroll$","calendarModel","viewDate","weekStart","initFormatters","formatOptions","formatViews","selectedDates","MULTI","RANGE","selectDate","_viewDate","getDateOnly","getDateOnlyInMs","generateDateRange","selectSingle","selectMultiple","newDates","selDates","valueDateOnly_1","isDateDisabled","valueOf","selectRange","excludeDisabledDates","deselectSingle","deselectMultiple","selectedDatesCount","datesInMsToDeselect","deselectMultipleInMonth","valueDateOnly","deselectRange","valueStart","valueEnd","selectedDatesStart","selectedDatesEnd","formatterDay","formatterWeekday","formatterMonth","formatterYear","formatterMonthday","disabledDates","deselectDate","selectDateFromClient","Direction","IgxMonthPickerBaseDirective","_activeView","DEFAULT","DECADE","changeYear","activeView","yearsBtns","idx","activeViewDecade","activeViewDecadeKB","formattedYear","IgxMonthsViewComponent","formatView","styleClass","_monthFormat","initMonthFormatter","_calendarModel","formattedMonth","_formatterMonth","selectMonth","monthTracker","monthFormat","onKeydownArrowUp","monthsRef","months","nodeRect","nextNodeRect","onKeydownArrowDown","onKeydownArrowRight","onKeydownArrowLeft","onKeydownHome","onKeydownEnd","onKeydownEnter","IgxMonthsViewComponent_1","CalendarHammerConfig","overrides","pan","Hammer","DIRECTION_VERTICAL","threshold","HammerGestureConfig","IgxYearsViewComponent","_yearFormat","initYearFormatter","_formatterYear","selectYear","delta","generateYearRange","yearTracker","yearFormat","currentYear","IgxYearsViewComponent_1","HAMMER_GESTURE_CONFIG","useClass","IgxDayItemComponent","isLastInRange","isFirstInRange","isWithinRange","onDateSelection","isDisabled","isInactive","today","outOfRangeDates","isHidden","isOutOfRange","isSingleSelection","specialDates","isWeekend","IgxCardType","IgxDaysViewNavigationService","focusNextDate","nextView","childElementCount","nextDate","monthView","isFocusable","dayIsNextMonth","nextMonthView","prevMonthView","daysNavService","changeDaysView","monthAction","NEXT","PREV","onViewChanging","focusHomeDate","focusFirstDay","focusEndDate","focusLastDay","IgxDaysViewComponent","disableOutOfRangeDates","formattedDate","generateWeekHeader","dayNames","rv","rv_1","rv_1_1","rowTracker","dateTracker","isSelected","checkForRange","Between","focusActiveDate","isToday","selectDay","Specific","getFirstMonthView","getLastMonthView","onKeydownArrow","IgxDaysViewComponent_1","IgxCalendarComponent","hasHeader","animationAction","isKeydownTrigger","_monthsViewNumber","startPrevMonthScroll","previousMonth","startNextMonthScroll","nextMonth","stopMonthScroll","daysView","prevMonthBtn","nextMonthBtn","YEAR","headerTemplateDirective","subheaderTemplateDirective","headerDate","generateContext","setSiblingMonths","monthViews","_monthViewsChanges$","switchMap","skipLast","onActiveViewDecade","dacadeView","onActiveViewDecadeKB","getFormattedDate","monthday","childClicked","deselectDateInMonthViews","viewChanging","callback","changeMonth","monthsBtns","onActiveViewYear","monthsView","focusMonth","attributes","onActiveViewYearKB","getViewDate","animationDone","toState","onKeydownPageDown","activeDate","isPageDown","dayItem","onKeydownShiftPageUp","yearView","getMonthView","IgxCalendarComponent_1","animations","transition","IgxMonthPickerComponent","yearAction","nextYear","previousYear","nextYearKB","previousYearKB","yearsBtn","onKeydownPageUp","IgxMonthPickerComponent_1","IgxMonthViewSlotsCalendar","IgxGetViewDateCalendar","calendar","wholeDate","IgxCalendarModule","FormsModule","IgxCardMediaDirective","IgxCardHeaderComponent","IgxCardThumbnailDirective","IgxCardHeaderTitleDirective","IgxCardHeaderSubtitleDirective","IgxCardContentDirective","IgxCardFooterDirective","IgxCardActionsLayout","IgxCardComponent","ELEVATED","OUTLINED","IgxCardActionsComponent","card","isVerticalSet","layout","JUSTIFY","IgxCardModule","IgxCarouselIndicatorDirective","IgxCarouselNextButtonDirective","IgxCarouselPrevButtonDirective","IgxSlideComponent","_active","_destroy$","previous","activeChange","CurrentResourceStrings","GridResStrings","igx_grid_groupByArea_message","igx_grid_emptyFilteredGrid_message","igx_grid_emptyGrid_message","igx_grid_filter","igx_grid_filter_row_close","igx_grid_filter_row_reset","igx_grid_filter_row_placeholder","igx_grid_filter_row_boolean_placeholder","igx_grid_filter_row_date_placeholder","igx_grid_filter_operator_and","igx_grid_filter_operator_or","igx_grid_complex_filter","igx_grid_filter_contains","igx_grid_filter_doesNotContain","igx_grid_filter_startsWith","igx_grid_filter_endsWith","igx_grid_filter_equals","igx_grid_filter_doesNotEqual","igx_grid_filter_empty","igx_grid_filter_notEmpty","igx_grid_filter_null","igx_grid_filter_notNull","igx_grid_filter_before","igx_grid_filter_after","igx_grid_filter_today","igx_grid_filter_yesterday","igx_grid_filter_thisMonth","igx_grid_filter_lastMonth","igx_grid_filter_nextMonth","igx_grid_filter_thisYear","igx_grid_filter_lastYear","igx_grid_filter_nextYear","igx_grid_filter_greaterThan","igx_grid_filter_lessThan","igx_grid_filter_greaterThanOrEqualTo","igx_grid_filter_lessThanOrEqualTo","igx_grid_filter_true","igx_grid_filter_false","igx_grid_filter_all","igx_grid_filter_condition_placeholder","igx_grid_summary_count","igx_grid_summary_min","igx_grid_summary_max","igx_grid_summary_sum","igx_grid_summary_average","igx_grid_summary_earliest","igx_grid_summary_latest","igx_grid_excel_filter_moving_left","igx_grid_excel_filter_moving_left_short","igx_grid_excel_filter_moving_right","igx_grid_excel_filter_moving_right_short","igx_grid_excel_filter_moving_header","igx_grid_excel_filter_sorting_asc","igx_grid_excel_filter_sorting_asc_short","igx_grid_excel_filter_sorting_desc","igx_grid_excel_filter_sorting_desc_short","igx_grid_excel_filter_sorting_header","igx_grid_excel_filter_clear","igx_grid_excel_custom_dialog_add","igx_grid_excel_custom_dialog_clear","igx_grid_excel_custom_dialog_header","igx_grid_excel_cancel","igx_grid_excel_apply","igx_grid_excel_search_placeholder","igx_grid_excel_select_all","igx_grid_excel_blanks","igx_grid_excel_hide","igx_grid_excel_show","igx_grid_excel_pin","igx_grid_excel_unpin","igx_grid_excel_text_filter","igx_grid_excel_number_filter","igx_grid_excel_date_filter","igx_grid_excel_boolean_filter","igx_grid_excel_custom_filter","igx_grid_advanced_filter_title","igx_grid_advanced_filter_and_group","igx_grid_advanced_filter_or_group","igx_grid_advanced_filter_end_group","igx_grid_advanced_filter_create_and_group","igx_grid_advanced_filter_create_or_group","igx_grid_advanced_filter_and_label","igx_grid_advanced_filter_or_label","igx_grid_advanced_filter_add_condition","igx_grid_advanced_filter_ungroup","igx_grid_advanced_filter_delete","igx_grid_advanced_filter_delete_filters","igx_grid_advanced_filter_initial_text","igx_grid_advanced_filter_column_placeholder","igx_grid_advanced_filter_value_placeholder","TimePickerResStrings","igx_time_picker_ok","igx_time_picker_cancel","PaginatorResStrings","igx_paginator_label","CarouselResStrings","igx_carousel_of","updateResourceStrings","currentStrings","newStrings","CarouselIndicatorsOrientation","CarouselAnimationType","LabelPosition","CarouselHammerConfig","DIRECTION_HORIZONTAL","IgxCarouselComponent","iterableDiffers","platformUtil","loop","pause","navigation","keyboardSupport","gesturesSupport","maximumIndicatorsCount","indicatorsOrientation","slide","indicatorTemplate","nextButtonTemplate","prevButtonTemplate","onSlideChanged","onSlideAdded","onSlideRemoved","onCarouselPaused","onCarouselPlaying","_resourceStrings","differ","animationDuration","animationPosition","newDuration","_interval","restartInterval","slides","initSlides","lastInterval","clearInterval","unsubscriber","merge","isDestroyed","onSlideActivated","currentSlide","current","animationWasStarted","finishAnimations","previousSlide","none","playAnimations","carousel","playLeaveAnimation","playEnterAnimation","leaveAnimationPlayer","enterAnimationPlayer","getAnimation","trans","enterAnimation","leaveAnimation","fade","any","ind","forEachAddedItem","total","updateSlidesSelection","defaultIndicator","defaultNextButton","defaultPrevButton","setAriaLabel","resourceStrings","getNextIndex","getPrevIndex","playing","newSlides","notifyOnChanges","prev","stoppedByInteraction","resetInterval","setInterval","tick","onTap","isPlaying","last","onPanLeft","onPanRight","resetSlideStyles","slideWidth","offsetWidth","panOffset","isFinal","incomingSlide","onPanEnd","velocity","IgxCarouselModule","DataTypes","IgxCheckboxComponent","indeterminate","readonly","disableTransitions","checkbox","_onCheckboxChange","_onCheckboxClick","nativeCheckbox","IgxCheckboxComponent_1","preserveWhitespaces","IGX_CHECKBOX_REQUIRED_VALIDATOR","NG_VALIDATORS","IgxCheckboxRequiredDirective","CheckboxRequiredValidator","IgxCheckboxModule","CHIP_ID","IgxChipComponent","draggable","removable","selectable","class","onMoveStart","onMoveEnd","onRemove","onSelectionDone","onKeyDown","_selectedItemClass","_movedWhileRemoving","changeSelection","chipArea","backgroundColor","newColor","removeIcon","defaultRemoveIcon","selectIcon","defaultSelectIcon","selectClass","SELECT_CLASS","srcEvent","onSelectArgs","selectContainer","propertyName","onSelectTransitionDone","onChipKeyDown","keyDownArgs","onRemoveBtnKeyDown","onRemoveMouseDown","onRemoveClick","onRemoveTouchMove","onRemoveTouchEnd","onChipDragStart","onChipDragEnd","dragDirective","onChipMoveEnd","onChipDragClicked","clickEventArgs","onChipDragEnterHandler","chip","dragChip","onChipDrop","IgxChipsAreaComponent","_iterableDiffers","onReorder","chipsList","selectedChips","addedChip","onChipMoveStart","onChipDragEnter","onChipSelectionChange","modifiedChipsArray","chipsArray","dragChipIndex","shiftKey","positionChipAtIndex","dropChipIndex","chipIndex","targetIndex","shiftRestLeft","eventData","IgxChipsModule","IgxComboHeaderDirective","IgxComboFooterDirective","IgxComboItemDirective","IgxComboEmptyDirective","IgxComboHeaderItemDirective","IgxComboAddItemDirective","IgxComboToggleIconDirective","IgxComboClearIconDirective","IgxComboAPIService","register","combo","valueKey","add_custom_item","addItemToCollection","set_selected_item","isItemSelected","deselectItems","selectItems","IgxComboItemComponent","comboAPI","itemHeight","comboID","isVisible","rect","parentDiv","disableCheck","IGX_COMBO_COMPONENT","IgxComboAddItemComponent","IgxComboAddItemComponent_1","IgxComboDropDownComponent","scrollHandler","itemsMaxHeight","focusSearchInput","lastIndex","focusAddItemButton","isAddButtonVisible","sortedChildren","sortedChildren_1","sortedChildren_1_1","handleEnter","handleSpace","isAddItemFocused","IgxComboDropDownComponent_1","IgxComboFilteringPipe","searchValue","displayKey","shouldFilter","searchTerm_1","IgxComboGroupingPipe","groupKey","sorted","Asc","inserts","currentHeader","insertFlag","IgxComboState","ItemHeights","diffInSets","set1","set2","results","entry","InteractionMode","IgxComboComponent","customValueFlag","defaultFallbackGroup","stringFilters","booleanFilters","_groupKey","_prevInputValue","_dataType","_filteredData","_itemHeight","_itemsMaxHeight","_remoteSelection","_overlaySettings","searchInput","itemTemplate","headerTemplate","footerTemplate","headerItemTemplate","addItemTemplate","emptyTemplate","toggleIconTemplate","clearIconTemplate","dropdownContainer","onSelectionChange","onAddition","onSearchInput","onDataPreLoad","allowCustomValues","searchPlaceholder","filterable","manageRequiredAsterisk","_displayKey","comboInput","onInputClick","checkMatch","handleKeyUp","itemMatch","handleInputChange","COMPLEX","PRIMITIVE","registerRemoteEntries","ids","getValueDisplayPairs","selection_1","selection_1_1","ids_1","ids_1_1","triggerCheck","handleSelectAll","selectAllItems","deselectAllItems","addedItem","oldCollection","newCollection","opening","displaySearchInput","NgControl","setDisabledState","complexTemplate","primitiveTemplate","handleClearItems","selectedItems","newItems","clearCurrentSelection","setSelection","ignoreFilter","allVisible","removed","added","newSelectionAsArray","oldSelectionAsArray","displayText","createDisplayText","concatDisplayText","convertKeysToItems","removedItems","addedItems","handleOpening","handleOpened","handleClosing","handleClosed","IgxComboComponent_1","IgxComboModule","ReactiveFormsModule","DatePickerUtil","parseDateFormat","maskValue","DEFAULT_LOCALE","dateStruct","SHORT_DATE_MASK","maskArray","monthInitPosition","dayInitPosition","yearInitPosition","initialPosition","formatType","getYearFormatType","getMonthFormatType","getDayFormatType","isDateChar","SEPARATOR","fillDatePartsPositions","getDefaultLocaleMask","getInputMask","inputMask","getMask","parseDateArray","dateFormatParts","prevDateValue","yearPrefix","dayStr","getDayValueFromInput","monthStr","getMonthValueFromInput","yearStr","getYearValueFromInput","getDateFormatPart","originalYear","fullYear","NaN","daysInMonth","maskToPromptChars","PROMPT_CHAR","trimUnderlines","getModifiedDateInput","isSpinLoop","maxValue","minValue","datePart","getDatePartOnPosition","datePartType","datePartFormatType","datePartValue","getDateValueFromInput","minMax","getMinMaxValue","tempValue","startIdx","endIdx","prefix","getNumericFormatPrefix","addPromptCharsEditMode","dateArray","checkForCompleteDateInput","dayValue","monthValue","yearValue","isFullInput","isFullYearInput","formatterOptions","resolvedOptions","NUMBER_OF_MONTHS","getFullYearFromString","partPosition","yearPart","currentPos","DatePickerDisplayValuePipe","_datePicker","rawDateString","DatePickerInputValuePipe","invalidDate","IgxDatePickerTemplateDirective","IgxDatePickerActionsDirective","PredefinedFormatOptions","IgxCalendarContainerComponent","mode","Dialog","onClose","onTodaySelection","DropDown","onEscape","closeCalendar","triggerTodaySelection","TemplateOutletAction","IgxDatePickerComponent","_moduleRef","labelVisibility","monthsViewNumber","valueChange","onDisabledDate","onValidationFailed","inputValuePipe","spinDelta","defaultLocale","_onOpen","_onClose","_ngControl","_format","ShortDate","_modalOverlay","_dropDownOverlaySettings","_defaultDropDownOverlaySettings","_customFormatChecker","_transformedDate","_getEditorDate","_getDisplayDate","datePickerTemplateDirective","readOnlyDatePickerTemplate","editableDatePickerTemplate","displayData","openDialog","onSpaceClick","getInputGroupElement","inputDirectiveElementRef","_inputElementRef","_inputUserTemplateElementRef","_positionSettings","_modalOverlaySettings","overlay","_componentID","_onOpening","_onOpened","_onClosed","_updateValidityOnBlur","_inputDirective","handleSelection","emitValueChangeEvent","modalOverlay","modalOverlaySettings","dropDownOverlaySettings","mouseDown","_setCursorPosition","setHours","setMinutes","setSeconds","setMilliseconds","_isInEditMode","calculateDate","spinValue","targetValue","cursorPosition","_getCursorPosition","checkInput","inputType","dateString","invokedByEvent","newDateArray","datePicker","prevValue","eventType","modifiedInputValue","_initializeCalendarContainer","_focusCalendarDate","componentInstance","isVertical","subheaderTemplate","cancelButtonLabel","todayButtonLabel","datePickerActions","datePickerActionsDirective","_setLocaleToDate","toLocaleDateString","formatDate","changedValue","_inputDirectiveUserTemplate","NgModuleRef","IgxDatePickerComponent_1","IgxDatePickerModule","IgxDialogTitleDirective","defaultStyle","IgxDialogActionsDirective","DIALOG_ID","IgxDialogComponent","navService","title","leftButtonLabel","leftButtonType","leftButtonColor","leftButtonBackgroundColor","leftButtonRipple","rightButtonLabel","rightButtonType","rightButtonColor","rightButtonBackgroundColor","rightButtonRipple","onOpen","onLeftButtonSelect","onRightButtonSelect","_closeOnOutsideSelect","_isModal","_titleId","IgxDialogComponent_1","_overlayDefaultSettings","isModal","closeOnOutsideSelect","isOpen","toggleRef","emitCloseFromDialog","dialog","onDialogSelected","DIALOG_CLASS","onInternalLeftButtonSelect","onInternalRightButtonSelect","IgxDialogModule","IgxTemplateOutletDirective","_viewContainerRef","_embeddedViewsMap","onViewCreated","onViewMoved","onCachedViewLoaded","onBeforeViewDetach","_getActionType","CreateView","_recreateView","MoveView","_moveView","UseCachedView","_useCachedView","UpdateViewContext","_updateExistingContext","igxTemplateOutletContext","cleanCache","cleanView","tmplID","_viewRef","igxTemplateOutlet","cachedView","oldContext","_cloneContext","_shouldRecreateView","ctxChange","_hasContextShapeChanged","prevCtxKeys","currCtxKeys","currCtxKeys_1","currCtxKeys_1_1","propName","ctx","movedView","shouldRecreate","IgxTemplateOutletModule","IgxProcessBarTextTemplateDirective","IgxProgressBarGradientDirective","DIR_DOCUMENT","DIR_DOCUMENT_FACTORY","inject","IgxTextAlign","IgxProgressType","IgxDirectionality","bodyDir","htmlDir","extractedDir","_dir","BaseProgress","requestAnimationId","_valueInPercent","_max","_animate","runAnimation","updateProgressSmoothly","passedValue","convertInPercentage","progressValue","valueInPercent","updateProgress","isInLimitRange","updateProgressDirectly","directionFlow","comparator","isExceedingUpperLimit","isExceedingLowerLimit","NEXT_LINEAR_ID","NEXT_CIRCULAR_ID","NEXT_GRADIENT_ID","IgxLinearProgressBarComponent","valueMin","striped","textAlign","textVisibility","textTop","onProgressChanged","maxNum","_step","valueInRange","getValueInProperRange","changedValues","IgxCircularProgressBarComponent","_directionality","STROKE_OPACITY_DVIDER","STROKE_OPACITY_ADDITION","gradientId","_circleRadius","_circumference","PI","valueInProperRange","_svgCircle","FRAMES","strokeDashoffset","getProgress","strokeOpacity","percentage","rtl","IgxProgressBarModule","IgxSelectItemComponent","_text","SelectPositioningStrategy","_selectDefaultSettings","global_yOffset","global_xOffset","global_styles","selectFit","styles","scrollContainerRect","itemElement","getInteractionItemElement","itemRect","calculateStyles","calculateScrollAmount","calculateYoffset","calculateXoffset","itemElementRect","footer","lastItemFitSize","itemTextToInputTextDiff","firstItemFitSize","contentElementNewWidth","inputElementStyles","itemElementStyles","numericInputFontSize","fontSize","numericItemFontSize","inputTextToInputTop","itemTextToItemTop","negateInputPaddings","paddingTop","paddingBottom","numericLeftPadding","paddingLeft","numericTextIndent","textIndent","itemTextPadding","itemTextIndent","getFirstItemElement","IgxSelectToggleIconDirective","IgxSelectHeaderDirective","IgxSelectFooterDirective","IgxSelectComponent","itemText","mousedownHandler","IgxSelectComponent_1","IgxSelectItemNavigationDirective","inputStream","clearStream$","Subscription","EMPTY","captureKey","timer","activateItemByText","activeItemIndex","nextItem","IgxSelectGroupComponent","IgxSelectModule","WatchChanges","propDesc","privateKey","originalSetter","_init","SimpleChange","WatchColumnChanges","rowIslandAPI","rowIsland","updateColumnList","repaint","_","IgxRowIslandAPIService","childRowIslands","childGrids","unset","oldId","registerChildRowIsland","unsetChildRowIsland","getChildRowIsland","rowIslandKey","registerChildGrid","parentRowID","getChildGrids","inDepth","allChildren","getChildGridByID","IgxRow","IgxCell","inlineEditorTemplate","isFinite","cellID","IgxGridCRUDService","createCell","createRow","sameRow","sameCell","columnID","beginRowEdit","onRowEditEnter","endRowEdit","openRowOverlay","begin","newCell","onCellEditEnter","rowEditing","isInEditMode","IgxGridSelectionService","dragMode","keyboardState","pointerState","temp","_ranges","rowSelection","initPointerState","initKeyboardState","addKeyboardRange","parse","isCellSelectable","generateRange","primaryButton","ctrl","addToRange","isActiveNode","isInMap","isActive","hasColumnLayouts","isActiveLayout","columnVisibleIndex","addRangeMeta","removeRangeMeta","rowStart","rowEnd","columnStart","columnEnd","keyboardStateOnKeydown","shiftTab","keyboardStateOnFocus","emitter","dom","kbState","isChromium","_moveSelectionChrome","dragSelect","pointerDown","pointerDownShiftKey","clearTextSelection","mergeMap","source","entries","pair","newValue_1","pointerEnter","pointerUp","restoreTextSelection","clearAcriveEl","getSelection","rangeCount","_selectionRange","getRangeAt","removeAllRanges","addRange","createRange","Range","selectNode","getSelectedRows","clearRowSelection","removedRec","isFilteringApplied","getRowIDs","allData","rID","emitRowSelectionEvent","selectAllRows","addedRows","clearPrevSelection","isRowSelectable","isRowDeleted","isMultiRowSelectionEnabled","selectRowsWithNoEvent","rowIDs","allRowsSelected","deselectRowsWithNoEvent","selectMultipleRows","gridData","lastRowID","currIndex","getRowDataById","rows","areAllRowSelected","dataItemsID","hasSomeRowSelected","currSelection","areEqualCollections","onRowSelectionChange","clearAllSelectedRows","filteredSortedData","rData","vendor","FilterMode","GridSummaryPosition","GridSummaryCalculationMode","GridKeydownTargetType","GridSelectionMode","ColumnDisplayOrder","HammerGesturesManager","doc","hammerOptions","_hammerManagers","platformBrowser","inputClass","TouchInput","recognizers","Pan","Swipe","Tap","taps","supports","eventHandler","mc","getManagerForElement","addManagerForElement","handler","eventObj","on","off","addGlobalEventListener","getGlobalEventTarget","getDOM","setManagerOption","manager","removeManagerForElement","MoveDirection","IgxGridCellComponent","touchManager","_vIndex","highlightClass","activeHighlightClass","lastPinned","editMode","isInCompositionMode","_cellSelection","multiple","pointerdown","selectionNode","ctrlKey","pointerenter","pointerup","setStartNavigationCell","colStart","onRangeSelection","_updateCRUDStatus","onDoubleClick","editable","deleted","cellTemplate","defaultCellTemplate","gridID","columnLayoutChild","setEditMode","addPointerListeners","removePointerListeners","highlightText","gridRowSpan","gridColumnSpan","colEnd","rowTransaction","rowCurrentState","inEditMode","_highlight","lastSearchInfo","cellSelectionMode","compositionStartHandler","compositionEndHandler","cssProps","crud","editableCell","isCellSelected","update","onCellClick","onContextMenu","shouldEmitSelection","handleAlt","handleTab","performShiftTabKey","performTab","handleEnd","goToLastCell","handleHome","goToFirstCell","keydownArgs","targetType","onGridKeydown","navigateTop","navigateUp","navigateBottom","navigateDown","onKeydownEnterEditMode","onKeydownExitEditMode","onCellEditCancel","searchable","calculateSizeToFit","changeDetection","ChangeDetectionStrategy","OnPush","IgxRowDirective","dragging","defaultCssClass","_rowData","resolveClasses","groupingExpressions","pinnedColumns","unpinnedColumns","showRowSelectors","rowDraggable","editRowState","onRowSelectorClick","indexClass","evenRowCSS","oddRowCSS","selectedClass","editClass","dirtyClass","deletedClass","mrlClass","dragClass","defaultDragIndicatorCssClass","rowDragging","Boolean","IgxSummaryOperand","operate","summaryResult","IgxNumberSummaryOperand","average","IgxDateSummaryOperand","latest","earliest","IgxFilterCellTemplateDirective","IgxCellTemplateDirective","IgxCellHeaderTemplateDirective","IgxCellFooterTemplateDirective","IgxCellEditorTemplateDirective","IgxCollapsibleIndicatorTemplateDirective","IgxColumnComponent","sortable","groupable","resizable","hiddenChange","expandedChange","collapsibleChange","visibleWhenCollapsedChange","disableHiding","disablePinning","movable","widthChange","_calcWidth","headerClasses","headerGroupClasses","cellStyles","sortingIgnoreCase","pinnedChange","collapsible","_pinned","_summaries","_filters","_sortStrategy","_hidden","_disablePinning","_defaultMinWidth","_hasSummary","_collapsible","_expanded","hasTransactions","isPrimaryColumn","_editable","resetSummaryHeight","filteringService","refreshExpressions","hideFilteringRowOnColumnVisibilityChange","widthSetByUser","_width","defaultWidth","calcPixelWidth","cacheCalcWidth","getCalcWidth","defaultMinWidth","minVal","pin","unpin","_unpinnedIndex","removeSummariesCachePerColumn","_summaryPipeTrigger","_groupingComparer","funcRef","_bodyTemplate","_headerTemplate","_inlineEditorTemplate","_filterCellTemplate","columnGroup","vIndex","childrenVisibleIndexes","indexInCollection","columnLayout","ptr","lvl","_visibleWhenCollapsed","setExpandCollapseState","resetCaches","headTemplate","editorTemplate","filterCellTemplateDirective","filters","getGridTemplate","isRow","rowsCount","multiRowLayoutRowSize","getColumnSizesString","getInitialChildColumnSizes","columnSizes","newWidthSet","newSpanSmaller","colSpan","bothWidthsSet","bothWidthsNotSet","ref","columnWidthSetByUser","calcWidth","getFilledChildColumnSizes","getPossibleColumnWidth","getResizableColUnderEnd","spanUsed","columnSized","targets","targetsSquashed","topLevelParent","pinnable","_unpinnedColumns","_pinnedColumns","targetColumn","isPinned","onColumnPinning","_moveColumns","reinitPinStates","populateVisibleIndexes","headerCellList","filterCellList","filterCell","headerGroupsList","headerGroup","autosize","getLargestCellWidth","reflow","largest","cellsContentWidths_1","cellStyle","cellPadding","paddingRight","borderRightWidth","headerCell","headerStyle","headerPadding","largestCell","getCellWidth","colWidth","isPercentageWidth","cellWidth","featureColumnsWidth","visibleWhenCollapsed","checkCollapsibleState","IgxGridBodyDirective","RowEditPositionStrategy","isTop","isTopInitialPosition","container","ItemPropertyValueChangedDirective","valueChanged","_propName","_object","onValueChanged","ColumnChooserItemBaseDirective","indentation","IgxColumnHidingItemDirective","CustomFilteringStrategy","ColumnChooserBaseDirective","disableFilter","columnsAreaMaxHeight","_currentColumns","_gridColumns","_rawColumns","_columnDisplayOrder","DisplayOrder","_filterCriteria","_filterColumnsPrompt","_title","createColumnItems","filterCriteria","clearFiltering","orderColumns","createColumnItem","Alphabetical","localeCompare","createFilteringExpression","IgxColumnHidingComponent","showAllText","hideAllText","onColumnVisibilityChanged","columnItems","hiddenColumnsCount","hidableColumns","onVisibilityChanged","showAllColumns","collection_1","collection_1_1","hideAllColumns","collection_2","collection_2_1","IgxColumnPinningItemDirective","IgxColumnPinningComponent","checkboxValueChange","columnItem","pinningDisabled","IgxGridToolbarComponent","excelExporter","csvExporter","gridHeight","calcHeight","exportExcel","exportCsv","getTitle","toolbarTitle","getExportText","exportText","getExportExcelText","exportExcelText","getExportCsvText","exportCsvText","exportClicked","exportButton","outletDirective","exportDropdown","exportToExcelClicked","performExport","exportToCsvClicked","exp","exportType","exporter","onToolbarExporting","toggleColumnHidingUI","columnHidingButton","columnHidingDropdown","toggleColumnPinningUI","columnPinningButton","columnPinningDropdown","showAdvancedFilteringUI","openAdvancedFilteringDialog","toolbar","toolbarCustomContentTemplate","IgxRowEditTemplateDirective","IgxRowEditTextDirective","IgxRowEditActionsDirective","IgxRowEditTabStopDirective","api","activateCell","currentCellIndex","rowEditTabs","move","handleEscape","activeNode","getCellElementByVisibleIndex","lastEditableColumnIndex","firstEditableColumnIndex","isColumnFullyVisible","performHorizontalScrollToCell","IgxGridGroupByRowComponent","gridSelection","paddingIndentationCssClass","isExpandedGroup","grRowExpr","groupRowIndex","toggleGroup","rowExpandedIndicatorTemplate","defaultGroupByExpandedTemplate","rowCollapsedIndicatorTemplate","defaultGroupByCollapsedTemplate","isKeySupportedInGroupRow","handleTabKey","getColumnByName","dataView","rootSummariesEnabled","orderedColumns","gridOrderedColumns","lastCol","alt","IgxListPanState","IgxGridNavigationService","parentVirtDir","headerContainer","horizontalScroll","rowComp","summariesRowList","virtDirRow","getColumnUnpinnedIndex","isColumnRightEdgeVisible","isColumnLeftEdgeVisible","forOfDir","isColumnPinned","displayContainerWidth","displayContainerScrollLeft","isRowInEditMode","findNextEditable","gridColumns","RIGHT","isSummary","cellSelector","getCellSelector","selectedNode","isSummaryRow","getFocusableGrid","previousElementSibling","movePreviousEditable","currentColumnVisibleIndex","prevEditableColumnIndex","focusEditableTarget","moveNextEditable","nextEditableColumnIndex","rowElement","firstCell","allCells","findFirstDataRowIndex","verticalScroll","isGroupByRecord","isDetailRecord","findLastDataRowIndex","targetScr","currentRowIndex","containerTopOffset","verticalDisplayContainerElement","offsetTop","tag","getRowByIndex","focusPreviousElement","currentRowEl","focusElem","containerHeight","targetEndTopOffset","nextIndex_1","getNextRowByIndex","focusNextElement","getAllRows","goToLastBodyElement","isRowTarget","nextIsDetailRow","isLastColumn","rowEl","moveFocusToFilterCell","toStart","isFilterRowVisible","focusFilterRowCloseButton","unpinnedFilterableColumns","focusFilterCellChip","scrollToFilterCell","navigatePrevFilterCell","prevFilterableIndex","firstFiltarableCol","getFirstPinnedFilterableColumn","prevColumn","prevVisibleIndex","navigateFirstCellIfPossible","navigateNextFilterCell","nextFilterableIndex","nextColumn","nextVisibleIndex","getLastPinnedFilterableColumn","pinnedFilterableColums","prevIsDetailRow","target_1","applyFocusFunc_1","performVerticalScrollToCell","allowFiltering","filterMode","quickFilter","shouldPerformVerticalScroll","targetRowIndex","targetRow","visibleColIndex","unpinnedIndex","cellElement","getRowSelector","gridTag","toLocaleLowerCase","tbody","getClosestElemByTag","nextIndex","hasDetails","sourceElem","targetTag","icons","IgxGridCellStyleClassesPipe","callbackOrValue","IgxGridCellStylesPipe","css","IgxGridNotGroupedPipe","IgxGridTopLevelColumns","IgxGridFilterConditionPipe","IgxGridTransactionPipe","IgxGridPaginatorOptionsPipe","IgxHasVisibleColumnsPipe","hasVisibleColumns","IgxDatePipeComponent","DEFAULT_DATE_FORMAT","LOCALE_ID","DatePipe","IgxDecimalPipeComponent","DecimalPipe","ExpressionUI","IgxFilteringService","columnsWithComplexFilter","areEventsSubscribed","isFiltering","columnToExpressionsMap","columnStartIndex","_filterIconsRegistered","filteredColumn","selectedExpression","columnToFocus","shouldFocusNext","columnToMoreIconHidden","_datePipe","subscribeToEvents","onColumnResized","updateFilteringCell","updateFilterCellArea","onColumnMovingEnd","filteringRow","filterInternal","createSimpleFilteringTree","clearFilter","conditionOrExpressionTree","expressionsTreeForColumn","expressionForColumn","onFilteringDone","getExpressions","filterGlobal","registerSVGIcons","icons_1","icons_1_1","columnId","expressionUIs","generateExpressionsList","isFilteringTreeComplex","removeExpression","indexToRemove","expressionsList","beforeOperator","afterOperator","expressionUIList","currAndBranch","currExpressionUI","isFilterComplex","isComplex","getOperatorAsString","getChipLabel","datePipe","focusFirst","focusChip","closeButton","currentColumnRight","currentColumnLeft","getChildAndOperatorsCount","expressionsUIs","generateExpressionsListRecursive","exprUI","prevExprUI","isFilteringExpressionsTreeEmpty","exprTree","IgxColumnResizingService","resizeCursor","showResizer","getVisibleContentHeight","columnHeightMultiplier","actualMinWidth","minWidth","actualWidth","MAX_SAFE_INTEGER","autosizeColumnOnDblClick","currentColWidth","prevWidth","newWidth","resizeColumn","startResizePos","colMinWidth","getColMinWidth","colMaxWidth","getColMaxWidth","resizeColumnLayoutFor","isColumnResizing","pinnedMaxWidth","relativeColumns","combinedSpan","columnsToResize","updatedDiff","updatedCombinedSpan","setMinMaxCols","newCombinedSpan","newColsToResize","currentResizeWidth","resizeScaled","IgxListBaseDirective","DragScrollDirection","IgxEmptyListTemplateDirective","IgxDataLoadingTemplateDirective","IgxListItemLeftPanningTemplateDirective","IgxListItemRightPanningTemplateDirective","IgxListItemComponent","list","_panState","lastPanDir","onItemClicked","panStart","isTrue","allowLeftPanning","allowRightPanning","panMove","isPanningToLeft","showLeftPanTemplate","setContentElementLeft","maxLeft","showRightPanTemplate","maxRight","panEnd","relativeOffset","widthTriggeringGrip","panEndTriggeringThreshold","oldPanState","hideLeftAndRightPanTemplates","keepItem","onLeftPan","onRightPan","args2","oldState","newState","onPanStateChange","setLeftAndRightTemplatesVisibility","leftVisibility","rightVisibility","leftPanningTemplateElement","rightPanningTemplateElement","candidates","getElementsByClassName","IgxListThumbnailDirective","IgxListActionDirective","IgxListLineDirective","IgxListLineTitleDirective","IgxListLineSubTitleDirective","IgxListComponent","isLoading","isListEmpty","dataLoadingTemplate","defaultDataLoadingTemplate","emptyListTemplate","defaultEmptyListTemplate","IgxListComponent_1","IgxListModule","IgxExcelStyleLoadingValuesTemplateDirective","IgxExcelStyleSearchComponent","_isLoading","excelStyleLoadingValuesTemplateDirective","defaultExcelStyleLoadingValuesTemplate","refreshSize","clearInput","onCheckboxChange","itemSize","IgxExcelStyleDefaultExpressionComponent","onExpressionRemoved","onLogicOperatorChanged","inputValuesDirective","expressionUI","inputGroupConditions","inputValuesElement","isConditionSelected","conditionName","getConditionName","translateCondition","getInputWidth","getCondition","getIconName","conditions","toggleCustomDialogDropDown","dropdownConditions","onConditionsChanged","onValuesInput","onLogicOperatorButtonClicked","buttonIndex","logicOperatorButtonGroup","selectedButtons","onLogicOperatorKeyDown","onRemoveButtonClick","onInputConditionsKeyDown","IgxExcelStyleDateExpressionComponent","IgxExcelStyleCustomDialogComponent","_customDialogPositionSettings","_customDialogOverlaySettings","dateExpressionTemplate","defaultExpressionTemplate","onCustomDialogOpening","selectedOperator","createInitialExpressionUIElement","onCustomDialogOpened","expressionComponents","esf","overlayComponentId","rootGrid","onClearButtonClick","closeDialog","onApplyButtonClick","onAddButtonClick","markChildrenForCheck","scrollToBottom","onApplyButtonKeyDown","createCondition","expressionDateComponents","firstExprUI","secondExprUI","expressionsContainer","IgxExcelStyleSortingComponent","sortingExpressionsChange","updateSelectedButtons","sortIndex","sortButtonGroup","sortDirection","onSortButtonClicked","isColumnGrouped","clearSort","FilterListItem","isSpecial","isBlanks","IgxExcelStyleSortingTemplateDirective","IgxExcelStyleMovingTemplateDirective","IgxExcelStyleHidingTemplateDirective","IgxExcelStylePinningTemplateDirective","IgxGridExcelStyleFilteringComponent","shouldOpenSubMenu","containsNullOrEmpty","selectAllSelected","selectAllIndeterminate","filterValues","listData","uniqueValues","_subMenuPositionSettings","_subMenuOverlaySettings","inline","_column","_columnPinning","_columnVisibilityChanged","_filteringChanged","_densityChanged","isColumnPinnable","filteringExpressionsTreeChange","minHeight","populateColumnData","clearFilterClass","pinClass","excelStyleSearch","onColumnMoving","closeDropdown","onPin","onHideToggle","onTextFilterClick","gridRect","dropdownRect","mainDropdown","x1","subMenu","onTextFilterKeyDown","onSubMenuClosed","onSubMenuSelection","customDialog","areExpressionsSelectable","areExpressionsValuesInTheList","firstValue","uniqueColumnValuesStrategy","renderColumnValuesRemotely","renderColumnValuesFromData","getColumnFilterExpressionsTree","colVals","columnValues","toDateString","renderValues","columnField","generateUniqueValues","generateFilterValues","generateListData","isDateColumn","shouldUpdateSelection","addBooleanItems","addItems","sortData","addBlanksItem","addSelectAllItem","gridExpressionsTree","filterListItem","numberPipe","selectAll","blanks","valueA","valueB","selectAllFilterItems","excelStyleSortingTemplateDirective","defaultExcelStyleSortingTemplate","excelStyleMovingTemplateDirective","defaultExcelStyleMovingTemplate","excelStylePinningTemplateDirective","defaultExcelStylePinningTemplate","excelStyleHidingTemplateDirective","defaultExcelStyleHidingTemplate","applyFilter","filterTree","IgxGridExcelStyleFilteringComponent_1","filterOptimizationThreshold","blanksItemIndex","blanksItem","onClearFilterKeyDown","showCustomFilterItem","ExcelStylePositionStrategy","IgxGridHeaderComponent","colResizingService","_filteringService","hostRole","defaultClasses","igx-grid__th","asc","ascending","descending","igx-grid__th--number","igx-grid__th--sortable","igx-grid__th--filtrable","igx-grid__th--sorted","klass","hasColumnGroups","maxLevelHeaderDepth","defaultRowHeight","_baseFontSize","initFilteringSettings","getSortDirection","_componentOverlayId","triggerSort","onFilteringIconClick","toggleFilterDropdown","onSortingIconClick","sortDir","filterIconTarget","filterIconClassName","_filterMenuOverlaySettings","_filterMenuPositionSettings","onOverlayOpening","onOverlayClosed","IgxGridFilteringCellComponent","currentTemplate","moreFiltersCount","onTabKeyDown","isLastElementFocused","onShiftTabKeyDown","isFirstElementFocused","isChipVisible","updateVisibleFilters","filterCellTemplate","complexFilter","defaultFilter","emptyFilter","onChipClicked","isColumnRightVisible","isColumnLeftVisible","onChipRemoved","filteringIndicatorClass","isMoreIconHidden","focusFirstElement","focusElement","ghostChip","complexChip","ex","moreIcon","chipsArea","areaWidth","viewWidth","chipsAreaElements","visibleChipsCount","moreIconWidth","areAllColumnsInView","IgxGridHeaderGroupComponent","getHeaderGroupWidth","igx-grid__th--pinned","igx-grid__th--pinned-last","isLastPinned","igx-grid__drag-col-header","isHeaderDragged","igx-grid__th--filtering","isFiltered","draggedColumn","IgxGridHeaderGroupComponent_1","IgxGridSummaryService","summaryCacheMap","rootSummaryID","summaryHeight","maxSummariesLenght","retriggerRootPipe","deleteOperation","recalculateSummaries","isGroupedColumn","deleteSummaryCache","isTreeGrid","removeAllTreeGridSummaries","isHierarchicalGrid","getSummaryID","cache","calcMaxSummaryHeight","maxSummaryLength","hasSummary","getCurrentSummaryColumn","defaultSummaryHeight","calculateSummaries","rowSummaries","updateSummaryCache","groupingArgs","compareGroupingExpressions","filteringApplied","summaryIDs","removeChildRowSummaries","newExpressions","removedCols","ungroupedColumns","newExpr","colName","IgxSummaryCellComponent","firstCellIndentation","isKeySupportedInCell","getRowElementByIndex","sr","dataRowIndex","translateSummary","summary","IgxSummaryRowComponent","getColumnSummaries","DropPosition","IgxGridDragSelectDirective","onDragStop","onDragScroll","end$","lastDirection","startDragSelection","activeDrag","_measureDimensions","_sub","_interval$","stopDragSelection","_activeDrag","clientRect","trunc","TOPLEFT","TOPRIGHT","BOTTOMLEFT","BOTTOMRIGHT","TOP","BOTTOM","IgxColumnResizerDirective","restrictHResizeMin","MIN_SAFE_INTEGER","restrictHResizeMax","resizeEnd","resizeStart","resize","_left","onMousemove","onMouseup","onMousedown","IgxGridColumnResizerComponent","IgxGridFilteringRowComponent","_conditionsOverlaySettings","_operatorsOverlaySettings","chipAreaScrollOffset","isKeyPressed","isComposing","_cancelChipClick","resetExpression","addExpression","showHideArrowButtons","onTabKeydown","onEscKeydown","defaultDateUI","defaultFilterUI","onPrefixKeyDown","dropDownConditions","toggleConditionsDropDown","inputGroupPrefix","stopImmediatePropagation","onInputKeyDown","commitInput","onInputKeyUp","onCompositionStart","onCompositionEnd","datePickerClose","indexToDeselect","scrollChipsWhenAddingExpression","onClearKeyDown","onClearClick","onCommitKeyDown","onCommitClick","onInputGroupFocusout","focusedElement","condToRemove","onDateSelected","toggleOperatorsDropDown","dropDownOperators","unaryConditionChangedCallback","conditionChangedCallback","onChipPointerdown","onChipClick","toggleChip","onLeftArrowKeyDown","scrollChipsOnRemove","scrollChipsOnArrowPress","arrowPosition","chipAraeChildren","containerRect","containerWidth","chipsAreaWidth","showArrows","isColumnFiltered","containerRectRight","lastChipRectRight","resetChipsArea","dif","NavigationDirection","IgxColumnMovingService","_icon","IgxColumnMovingDragDirective","cms","_ghostClass","ghostImgIconClass","ghostImgIconGroupClass","_unsubscribe","cancelDrop","isColumnMoving","onColumnMovingStart","subscription$","flexBasis","createTextNode","childNodes","IgxGroupByRowTemplateDirective","IgxGridDetailTemplateDirective","IgxRowExpandedIndicatorDirective","IgxRowCollapsedIndicatorDirective","IgxHeaderExpandIndicatorDirective","IgxHeaderCollapseIndicatorDirective","IgxGroupAreaDropDirective","hovered","columnBelongsToGrid","isGrouped","innerText","column_1","closestParentByAttr","attr","closestGridID","ExpressionItem","ExpressionGroupItem","ExpressionOperandItem","IgxAdvancedFilteringDialogComponent","selectedExpressions","selectedGroups","columnSelectOverlaySettings","conditionSelectOverlaySettings","_dblClickDelay","_preventChipClick","_editingInputsContainer","scrollElementIntoView","_addModeContainer","_currentGroupButtonsContainer","overlayOutlet","_selectedColumn","selectedCondition","_grid","_filteringChange","advancedFilteringExpressionsTreeChange","dragArgs","_overlayComponentId","contextMenuToggle","calculateContextMenuTarget","onDragMove","addCondition","afterExpression","cancelOperandAdd","operandItem","enterExpressionEdit","addAndGroup","addGroup","addOrGroup","endGroup","currentGroup","commitOperandEdit","editedExpression","selectedColumn","addModeExpression","inAddMode","cancelOperandEdit","deleteItem","operandCanBeCommitted","exitOperandEdit","isExpressionGroup","rootGroup","createExpressionGroupItem","filteringExpr","exprCopy","createExpressionsTreeFromGroupItem","subTree","onChipRemove","expressionItem","_clickTimer","onToggleExpression","onChipDblClick","columnSelect","conditionSelect","searchValueInput","toggleContextMenu","enterExpressionAdd","toggleExpression","deselectParentRecursive","contextMenuClosed","contextualGroup","findSingleSelectedGroup","filteringLogics","op","isInsideGroup","createAndGroup","createGroup","createOrGroup","chips","minIndex","MAX_VALUE","firstExpression","deleteFilters","onGroupClick","toggleGroupRecursive","operandExpression","minTop","targetOffset","ungroup","selectedGroup","deleteGroup","selectFilteringLogic","getConditionFriendlyName","onExpressionsScrolled","invokeClick","onOutletPointerDown","getConditionList","setAddButtonFocus","addRootAndGroupButton","addConditionButton","applyChanges","cancelChanges","onChipSelectionEnd","IgxRowSelectorDirective","templateRef","IgxHeadSelectorDirective","IgxGridToolbarCustomContentDirective","IgxColumnGroupComponent","QueryList","_collapseIndicatorTemplate","collapseIndicatorTemplate","isChildrenWidthInPercent","IgxColumnGroupComponent_1","IgxRowDragDirective","_rowDragStarted","transitionEndEvent","endDragging","onRowDragStart","onRowDragEnd","dropArea","expander","expanderWidth","rowRect","ghostCells","IgxDragIndicatorIconDirective","IgxRowDragGhostDirective","IgxRowDragModule","IgxGridTransaction","IgxGridBaseDirective","differs","viewRef","_cdrRequests","_cdrRequestRepaint","_emptyGridMessage","_emptyFilteredGridMessage","_destroyed","overlayIDs","_advancedFilteringPositionSettings","_advancedFilteringOverlaySettings","autoGenerate","pageChange","perPageChange","columnHidingTitle","columnPinningTitle","onRowEditCancel","onColumnInit","onSortingDone","onPagingDone","onRowAdded","onGridCopy","expansionStatesChange","tmpOutlets","headerExpandIndicatorTemplate","headerCollapseIndicatorTemplate","columnsWithNoSetWidths","_showToolbar","_exportExcel","_exportCsv","_toolbarTitle","_exportText","_exportExcelText","_exportCsvText","_rowEditable","_filteredSortedData","toolbarHtml","clipboardOptions","copyHeaders","copyFormatters","separator","chipsGoupingExpressions","activeMatchIndex","matchInfoCache","_perPage","_page","_paging","_hideRowSelectors","_rowDrag","_filteringPipeTrigger","_columns","_filteringExpressionsTree","_sortingExpressions","_maxLevelHeaderDepth","_columnHiding","_allowFiltering","_allowAdvancedFiltering","_filterMode","observer","resizeNotify","_hiddenColumnsText","_pinnedColumnsText","_height","_horizontalForOfs","_multiRowLayoutRowSize","_expansionStates","_defaultExpandState","_totalWidth","_pinnedVisible","_unpinnedVisible","_pinnedWidth","_unpinnedWidth","_visibleColumns","_columnGroups","_autoGeneratedCols","_headerFeaturesWidth","_defaultTargetRecordNumber","_summaryPosition","_summaryCalculationMode","rootAndChildLevels","_cellSelectionMode","_rowSelectionMode","rowEditPositioningStrategy","rowEditSettings","rowOutletDirective","wheelHandler","changeRowEditingOverlayStateOnScroll","hideOverlays","horizontalScrollHandler","vfor","keydownHandler","isNavigationKey","isScroll","compareDocumentPosition","DOCUMENT_POSITION_CONTAINS","tfoot","rowEditingWheelHandler","_scrollWidth","Regular","_advancedFilteringExpressionsTree","Advanced","navigateTo","refreshGridState","_hostWidth","evaluateLoadingState","calcGridHeadRow","_filteringStrategy","_sortingStrategy","headerGroups","_summaryRowList","sumList","_rowList","rList","_dataRowList","toolbarCustomContentTemplates","headSelectorsTemplates","rowSelectorsTemplates","_outletDirective","rowEditingOutletDirective","rowEditCustom","defaultRowEditTemplate","_customDragIndicatorIconTemplate","dragIndicatorIconTemplates","rowEditTabsCUSTOM","rowEditTabsDEFAULT","_currentRowState","getExportExcel","getExportCsv","selectionMode","overlayID","_setupServices","_setupListeners","_advancedFilteringOverlayId","$event","isPercentHeight","getDataBasedBodyHeight","calculateGridHeight","calculateGridSizes","columnListDiffer","shouldGenerate","getScrollWidth","setupColumns","autogenerateColumns","initColumns","onColumnsChanged","resetColumnsCaches","resetForOfCache","firstVirtRow","resetColumnCollections","resetCachedWidths","recalcFeatureWidth","_setupRowObservers","elementFilter","isDefined","extractForOfs","rowListObserver","summaryRowObserver","resetHorizontalForOfs","_zoneBegoneListeners","initPinning","reattach","vertScrDC","displayContainer","resetNotifyChanges","getDragGhostCustomTemplate","dragGhostCustomTemplates","tmplOutlet","dataLoading","toggleColumnVisibility","expandAll","collapseAll","expandRow","collapseRow","toggleRow","paginatorClassName","getPinnedWidth","getUnpinnedWidth","unpinnedWidth","rowSelectArea","headerSelectorContainer","rowDragArea","headerDragContainer","groupableArea","headerGroupContainer","defaultHeaderGroupMinWidth","getRowByKey","keyValue","getCellByColumn","getCellByKey","pagingState","nextPage","isLastPage","previousPage","isFirstPage","hideRowSelectors","to","fromIndex","toIndex","BeforeDropTarget","AfterDropTarget","newList","_resetColumnList","_reorderColumns","columnCollection","dropIndex","_moveChildColumns","buffer","moveColumn","dropTarget","fi","ti","paginate","addRow","deleteRow","updateCell","updateRow","enableSummaries","rest","_multipleSummaries","disableSummaries","_disableMultipleSummaries","pinColumn","unpinColumn","findNext","findPrev","updateActiveInfo","rebuildMatchCache","activeInfo_1","clearSearch","summaryCalculationMode","childLevelsOnly","_hasVisibleColumns","dataLength","_derivePossibleWidth","MINIMUM_COLUMN_WIDTH","columnWidthCombined","allItems","theadRow","summariesHeight","_calculateGridBodyHeight","getGroupAreaHeight","getToolbarHeight","toolbarHeight","showToolbar","getPagingHeight","pagingHeight","getFilterCellHeight","headerGroupNativeEl","filterCellNativeEl","actualTheadRow","footerHeight","renderedHeight","computed","_shouldAutoSize","bodyHeight","defaultTargetBodyHeight","checkContainerSizeChange","origHeight","hasVerticalScroll","scrollWidth","baseWidth","computedWidth","visibleChildColumns","visibleCols","colsPerBlock","block","combinedBlocksSize","blockCols","columnsWithSetWidths","columnsToSize","sumExistingWidths","curr","widthValue","calculateGridWidth","isPercentWidth","getColumnWidthSum","colSum","added_1","removed_1","hasScroll","repositionRowEditingOverlay","isStable","_applyWidthHostBinding","currentWidth","takeHidden","fc","fc_1","fc_1_1","hostWidth","summaryOperand","customSummary","resolveDataTypes","fields","generateDataFields","onlyTopLevel","layoutSize","columnLayoutColumns","onHeaderSelectorClick","selectedRows","selectRows","deselectRows","onlyFilterData","deselectAllRows","clearCellSelection","dragScroll","arg","columnToVisibleIndex","startNode","endNode","getSelectedRanges","extractDataFromSelection","formatters","selectedData","activeEl","selectionMap","tuple","cellSelection","single","detailsData","temp_1","temp_1_1","getSelectableColumnsAt","selectionMap_1","selectionMap_1_1","colLayout","getSelectedData","copyHandlerIE","copyHandler","ie11","setData","childGridsData","shouldScrollVertically","shouldScrollHorizontally","executeCallback","getNextCell","currRowIndex","curVisibleColIndex","isValidPosition","colIndexes","editCol","nextCellIndex","getNextDataRowIndex","getPreviousCell","prevCellIndex","getPrevDataRowIndex","summaryCell","summaryCells","hierarchicalRow","dataCell","prevRow","nextRow","trackColumnChanges","increment","rebuildCache","matchInfo","inCollection","delayScrolling","scrollDirective","scrollToHorizontally","scrollRow","goal","c1","c2","dataRow","occurenceIndex","searchIndex","_group","rowEditingOverlay","toggleRowEditingOverlay","shouldOverlayLoading","loadingOutlet","_loadingId","loadingOverlay","configureRowEditingOverlay","closeRowEditingOverlay","rowStyle","useOuter","parentRowOutletDirective","rowChanges","writeToData","endRowTransaction","gridOutletKeyboardHandler","activeCell","hasHorizontalScroll","_restoreVirtState","rowForOf","gridScrLeft","viewDetachHandler","focusedCell","cachedViewLoaded","tmplId_1","templateID","index_1","summaryRow","closeAdvancedFilteringDialog","advancedFilteringDialog","IgxGridAPIService","groupingState","arrange_sorting_expressions","groupBy_multiple","names_1","groupedCols","newSortingExpr","grExprIndex","grpExpandState","groupingExpansionState","grExpr","sortExprIndex","groupingState_1","groupingState_1_1","groupBy_get_expanded_for_group","grState","groupBy_is_row_in_group","rowInGroup","groupBy_toggle_group","expansionState","groupsExpanded","groupBy_fully_expand_group","groupExprA","groupExprB","get_groupBy_record_id","recordId","hierrarchy","groupByKey","IgxGridMRLNavigationService","startNavigationCell","applyNavigationCell","navDirection","oppositeDir","focusCellUpFromLayout","focusCellDownFromLayout","isParentColumnFullyVisible","scrollPos","getChildColumnScrollPositions","rightScroll","leftScroll","focusNextCellFromLayout","focusPrevCellFromLayout","nextElementColumn","_moveFocusToCell","nextCell_1","currCell","_focusCell","lastVisibleIndex_1","prevElementColumn","movePrev","isNonDataRow","_isDetailRecordAt","currentRowStart","currentColStart","parentIndex","upperElementColumn","layoutRowEnd_1","moveNext","currentRowEnd","currentColEnd","nextElement","layoutSize_1","prevElement","cellRowStart","layouts","lastLayout","lastLayoutChildren","indexInLayout","allBlocks","getColumnLayoutSelector","firstLayout","targetCol","getColunmByVisibleIndex","parentVIndex","childSizes","_isGroupRecordAt","getVerticalScrollPositions","topOffset","verticalDCTopOffset","rowBottom","isPrevious","rowTop","hScroll","cellElem","gridBoundingClientRect","diffTop","diffBottom","IgxGridComponent","_groupingExpressions","_groupingExpandState","_hideGroupedColumns","_dropAreaMessage","childDetailTemplates","groupingExpressionsChange","groupingExpansionStateChange","onGroupingDone","detailTemplate","_focusIn","oldExpressions","_gridAPI","_applyGrouping","groupedCols_1","ungroupedCols_1","groupingDoneArgs","groupedColumns","groupingDiffer","_setGroupColsVisibility","_groupsRowList","item1","item2","onFocusIn","getDetailsContext","preventContainerScroll","activeElem_1","currRow","nextCellTarget","nextRowTarget","trackChanges","detailsViewFocused","detailsKeyboardHandler","lastColIndex_1","gridDetailsTemplate","getRowTemplate","defaultGroupTemplate","summaryTemplate","detailTemplateContainer","recordTemplate","_groupRowTemplate","_groupAreaTemplate","checkIfNoColumnField","clearGrouping","_getStateForGroupRow","_toggleGroup","fullyExpandGroup","_fullyExpandGroup","toggleAllGroupRows","cachedData","tmlpOutlet","moveView","viewCreatedHandler","viewMovedHandler","emptyGridTemplate","emptyFilteredGridTemplate","emptyGridDefaultTemplate","loadingGridTemplate","loadingGridDefaultTemplate","chipsOrderChanged","newGrouping","KeyboardEvent","chipsMovingEnded","columnExpr","groupArea","groupingResult","groupByRecord","groupingMetadata","groupingFlatResult","dropAreaTemplate","defaultDropAreaTemplate","getGroupByChipTitle","defaultExpandedTemplate","defaultCollapsedTemplate","getColumnGroupable","excelStyleFilter","groupTemplate","hideGroupedColumns","_setupNavigationService","source_1","expression_1","expression_1_1","IgxGridComponent_1","IgxGridStateDirective","_options","advancedFiltering","serialize","feature","getGridFeature","getAllGridFeatures","stringifyCallback","setState","restoreGridState","restoreFeature","restoreColumns","restoreFiltering","restoreAdvancedFiltering","restoreSorting","restoreGroupBy","restorePaging","restoreRowSelection","restoreCellSelection","gridState","getColumns","getFiltering","getAdvancedFiltering","getSorting","getGroupBy","getPaging","getRowSelection","getCellSelection","sortByVisibleIndex","columnsState","newColumns","colState","colA","colB","createExpressionsTreeFromObject","advFilterTree","exprTreeObject","expr_1","generateFilteringCondition","IgxGridStateModule","IgxGridSharedModules","IgxColumnHidingModule","IgxGridFooterComponent","IgxPaginatorComponent","defaultSelectValues","pagerEnabled","pagerHidden","dropdownEnabled","dropdownHidden","selectLabel","_selectOptions","sortUniqueOptions","totalRecords","_totalRecords","newOption","paginatorSelectDisplayDensity","IgxPaginatorModule","IgxGridPipesModule","IgxExcelStyleColumnMovingComponent","findColumn","onMoveButtonClicked","moveDirection","IgxExcelStyleSearchFilterPipe","it","IgxGridExcelStyleFilteringModule","IgxGridSelectionModule","IgxResizeHandleDirective","_dblClick","DEBOUNCE_TIME","_onResizeAreaMouseDown","resizeLine","resizer","onMouseOver","IgxGridResizingModule","IgxColumnMovingDropDirective","_dropIndicator","_lastDropIndicator","_dragLeave","_dropIndicatorClass","_hVirtDir","hasMovableColumns","isDropTarget","_dropPos","lastElementChild","IgxColumnMovingModule","IgxSummaryDataPipe","IgxGridSummaryModule","IgxColumnPinningModule","IgxGridToolbarModule","IgxColumnLayoutComponent","borderWidth","hasLastPinnedChildColumn","headerStyles","orderedCols","rs","IgxColumnLayoutComponent_1","IgxGridColumnModule","IgxGridFilteringModule","IgxGridHeadersModule","IgxGridCommonModule","IgxGridSortingPipe","IgxGridGroupingPipe","IgxGridPagingPipe","IgxGridFilteringPipe","IgxGridRowComponent","_cells","cList","IgxGridRowComponent_1","IgxGridSummaryPipe","summaryPosition","summaryPipeTrigger","rootLevelOnly","addSummaryRows","gridId","recordsWithSummary","lastChildMap","maxSummaryHeight","g","skipAdd","groupRecords","groupRecord","groupRecordId","removeDeletedRecord","summaryRecord","lastChild","lastChildId","IgxGridDetailsPipe","addDetailRows","detailsObj","IgxGridExpandableCellComponent","onIndicatorFocus","indicatorWidth","indicator","indicatorStyle","indicatorMargin","marginRight","leftPadding","indentationDiv","indentationStyle","IgxGridModule","IgxTreeGridAPIService","flatData","processedRootRecords","loadChildrenOnDemand","hasChildrenKey","expand_path_to_record","expansionDepth","foreignKey","childData","treeGrid","flatDataWithCascadeOnDeleteAndTransactions","cascadeOnDelete","selectedChildren","get_selected_children","generateRowPath","selectedRowIDs","row_deleted_parent","IgxTreeGridNavigationService","IgxRowLoadingIndicatorTemplateDirective","IgxTreeGridComponent","processedRecords","_expansionDepth","Infinity","loadingRows","_rowLoadingIndicatorTemplate","loadChildrenOnRowExpansion","rowLoadingTemplate","parentID_1","addChildRows","parentID","children_1","children_1_1","parentData","pid","cloneMap","mapIn","mapCloned","mapObj","parentRecord","childKey","processedExpandedFlatData","nonColumnLayoutColumns","IgxTreeGridComponent_1","IgxTreeGridRowComponent","_treeRow","treeRow","IgxTreeGridRowComponent_1","IgxTreeGridHierarchizingPipe","hierarchicalRecords","treeGridRecordsMap","hierarchizeFlatData","hierarchizeRecursive","getRowID","missingParentRecords","setIndentationLevels","indentationLevel","IgxTreeGridFlatteningPipe","expandedLevels","getFlatDataRecursive","parentExpanded","updateNonProcessedRecordExpansion","IgxTreeGridSortingPipe","flattenTreeGridRecords","records_1","records_1_1","IgxTreeGridPagingPipe","IgxTreeGridTransactionPipe","aggregatedChanges","flatDataClone","hierarchicalDataClone","cloneHierarchicalArray","array_1","array_1_1","clonedItem","IgxTreeGridCellComponent","showIndicator","treeGridAPI","onLoadingDblClick","IgxTreeGridSummaryPipe","isExpanded","cellIndentation","childRecord","deletedRows","lenght","IgxTreeGridModule","IgxHierarchicalGridNavigationService","getChildContainer","getChildGridRowContainer","getChildGrid","childGridID","hgridAPI","getIsChildAtIndex","isChildGridRecord","prevElem","focusPrevChild","_navigateUpInChild","scrollGrid","focusPrev","nextElem","focusNextChild","_navigateDownInChild","focusNext","topIsVisible","getNextScrollable","targetIndex_1","scrTopPosition","verticalScrollTop","cellSelector_1","endIsVisible","getNextScrollableDown","targetIndex_2","rowIsVisible","gridTop","_getMaxTop","scrGrid","topGrid","summaryRows","hasSummaries","isLastDataRow","nextIsDataRow","isLastSummaryRow","virt","isNextChild","_navigateToNextParentRow","focusNextRow","childContainer","focusNextChildDOMElem","parentHasSummary","parentRowIndex","isLastRowInParent","nextIsSiblingChild","parentSummary","childGrid","targetGrid","prevSiblingChild","gridElem","dataRows","hasRows","performShiftTabIntoChild","selNode","getLastGridElem","lastRowIndex_1","closestChild","trContainer","focusPrevRow","prevChild","getSibling","prevChildRow","childRow","lastCellIndex","grids","gridElems","childLevel","childLayoutList","hg","parentRow","isScrolledToBottom","lastRowInChild","currGrid","parentContainer","childRowContainer","prevIsSiblingChild","getNextParentInfo","nonScrollable","parentInfo","nextParentGrid","nextParentElem","parentState","atLastChunk","_getMinBottom","cell_1","closestScrollableGrid","gridBottom","inView","canScroll","horizontalScrollGridToIndex","inChild","cellSelector_2","cell_2","rIndex_1","scrTop","callBackFunc","containerTop","IgxHierarchicalTransactionServiceFactory","useFactory","hierarchicalTransactionServiceFactory","IgxHierarchicalGridBaseDirective","transactionFactory","showExpandAll","createColumnsList","_createColumn","_createColGroupComponent","_createColComponent","factoryGroup","inputs","newChildren_1","newCol","factoryColumn","getGridsForIsland","rowIslandID","getChildGridsForRowIsland","IgxSliderType","SliderHandle","TickLabelsOrientation","TicksOrientation","IgxHierarchicalGridAPIService","currPath","pathElem","childrenForLayout","layoutMap","getParentRowId","inState","ri","IgxRowIslandComponent","childColumns","onLayoutChange","onGridCreated","initialChanges","layout_id","isInit","expandChildren","updateOnRender","pId","parentId","parentIsland","updateChildren","onRowIslandChange","nestedColumns","colsArray","topCols","cleanGridState","childGridTemplates","tmpl","IgxRowIslandComponent_1","IgxChildGridRowComponent","parentGrid","ch","_handleLayoutChanges","hGrid","setupEventEmitters","inputNames","outputs","matchingInputPropName","output","IgxHierarchicalGridComponent","hierarchicalStateChange","childLayoutKeys","highlightedRowID","h_id","hg_verticalScrollHandler","hg_horizontalScrollHandler","dragIndicatorIconTemplate","headerHierarchyExpander","recalcColSizes","allLayoutList","colLength","_clearSeletionHighlights","isRowHighlighted","isHierarchicalRecord","hasExpandedRecords","hasExpandableChildren","rootHeight","topDiff","toggleAll","hasExpandedEntry","relatedGrid","vScr","hScr","inDeph","onContainerScroll","IgxHierarchicalGridComponent_1","IgxHierarchicalGridCellComponent","helement","_rootGrid","_getRootGrid","_clearAllHighlights","currentElement","IgxHierarchicalRowComponent","deselect","expanderClick","expandable","defaultEmptyTemplate","IgxHierarchicalRowComponent_1","IgxGridHierarchicalPipe","childKeys","addHierarchy","IgxGridHierarchicalPagingPipe","IgxHierarchicalGridModule","IgxActionIconDirective","IgxNavbarComponent","titleId","IgxNavbarComponent_1","actionIconTemplate","actionButtonIcon","_triggerAction","IgxNavbarModule","IgxNavDrawerItemDirective","activeClass","IgxNavDrawerTemplateDirective","IgxNavDrawerMiniTemplateDirective","IgxNavigationDrawerComponent","_state","_touchManager","_isOpen","enableGestures","isOpenChange","pinThreshold","miniWidth","pinChange","opened","closing","_gesturesAttached","_widthCache","windowWidth","drawer","mini","styleDummy","_panning","_maxEdgeZone","checkPinThreshold","getWindowWidth","swipe","startPosition","center","distance","maxEdgeZone","panstart","_panStartWidth","getExpectedWidth","_panLimit","visibleWidth","newX","percent","hasAnimateWidth","setXSize","toPrecision","resetPan","toggleOpenedEvent","toggleClosedEvent","miniTemplate","contentTemplate","_miniTemplate","setDrawerWidth","_drawer","_overlay","_styleDummy","updateEdgeZone","ensureEvents","_resizeObserver","set_maxEdgeZone","innerWidth","screen","getDrawerWidth","IgxNavigationDrawerModule","IgxThumbFromTemplateDirective","IgxThumbToTemplateDirective","IgxTickLabelTemplateDirective","SwitchLabelPosition","IgxSliderThumbComponent","_elementRef","_isActive","_isPressed","onThumbValueChange","onChange","onHoverChange","thumbBounderies","thumbCenter","FROM","TO","onPan","mouseX","updateThumbValue","onPinterEnter","onPointerLeave","onFocusListener","showThumbIndicators","toggleThumbIndicators","hideThumbIndicators","calculateTrackUpdate","scaleX","thumbPositionX","stepDistanceCenter","stepDistance","stepToProceed","stepDist","continuous","deactiveState","IgxThumbLabelComponent","IgxTicksComponent","ticksClass","ticksOrientation","primaryTicks","tickLabelsOrientation","TopToBottom","BottomToTop","tickLabel","isPrimary","labels","secondaryTicks","hiddenTickLabels","primaryTickLabels","secondaryTickLabels","labelsViewEnabled","labelVal","ticksLength","toFixed","IgxTickLabelsPipe","IgxSliderComponent","_ngZone","_pMin","_pMax","_hasViewInit","_minValue","_maxValue","_continuous","_primaryTicks","_secondaryTicks","_labels","SLIDER","_destroyer$","_indicatorsDestroyer$","thumbs","labelRefs","slierClass","thumbLabelVisibilityDuration","showTicks","Horizontal","thumb","lowerValue","upperValue","updateTrack","valueToFraction","upperBound","lowerBound","calculateStepDistance","positionHandlersAndUpdateTrack","setTickInterval","normalizeByStep","disable","changeThumbFocusableState","updateUpperBoundAndMaxTravelZone","updateLowerBoundAndMinTravelZone","_lowerBound","_upperBound","isRange","lower","upper","Mirror","findClosestThumb","thumbTo","thumbFrom","showSliderIndicators","releasePointerCapture","hideSliderIndicators","toggleSliderIndicators","onPanListener","_lowerValue","_upperValue","sliderSetup","subscribeTo","thumbChanged","positionHandler","labelFrom","Observable","thumbType","swapThumb","hasValueChanged","emitValueChanged","onThumbChange","toggleThumb","closestHandle","generateTickMarks","thumbHandle","labelHandle","positionLeft","labelTo","fromOffset","offsetLeft","toOffset","xPointer","closestTo","trackRange","renderCallbackExecution","ticks","_indicatorsTimer","positions","pMin","pMax","positionGap","trackLeftIndention","trackRef","validateInitialValue","isSliderWithDifferentValue","isRangeWithOneDifferentValue","IgxSliderComponent_1","IgxSliderModule","IgxSnackbarComponent","autoHide","displayTime","animationStarted","triggerAction","snackbarAnimationStarted","fromState","snackbarAnimationDone","toOpacity","IgxSnackbarModule","ButtonStyle","IgxSwitchComponent","switch","_onSwitchChange","_onSwitchClick","IgxSwitchComponent_1","IGX_SWITCH_REQUIRED_VALIDATOR","IgxSwitchRequiredDirective","IgxSwitchModule","IgxTabTemplateDirective","IgxBottomNavComponent","_currentBottomNavId","onTabSelected","onTabDeselected","selectedIndex","_itemStyle","hasContentTabs","contentTabs","viewTabs","tabs","setPanelsAttributes","_panelsChanges$","panels","panelsArray","tabPanels","getTabPanelId","getTabId","_selectedPanelHandler","tab","_deselectTab","_deselectPanel","selectedTab","aTab","IgxTabComponent","IgxTabPanelComponent","_tabBar","_isSelected","relatedTab","changesCount","_tabTemplate","tabTemplate","ariaDisabled","ariaSelected","_changesCount","relatedPanel","customTabTemplate","customTabTemplateDir","defaultTabTemplate","autoGenerated","IgxBottomNavModule","IgxTabsBase","scrollElement","scrollRight","performSelectionChange","newTab","transformContentAnimation","transformIndicatorAnimation","IgxTabItemBase","setSelectedInternal","IgxTabsGroupBase","IgxTabsType","IgxRightButtonStyleDirective","getRightButtonStyle","VISIBLE","HIDDEN","NOT_DISPLAYED","viewPortWidth","viewPort","itemsContainerChildrenCount","itemsContainer","itemsContainerWidth","lastTab","headerContainerWidth","IgxLeftButtonStyleDirective","getLeftButtonStyle","IgxTabItemTemplateDirective","IgxTabItemComponent","_tabs","_nativeTabItem","relatedGroup","tabsArray","finalIndex","nativeTabItem","IgxTabsGroupComponent","IgxToastPosition","NEXT_TABS_ID","IgxTabsComponent","_currentTabsId","selectedIndexChange","onTabItemDeselected","onTabItemSelected","_selectedIndex","iconLabelFoundInGroups","iconLabelFoundInTabs","FIXED","performSelection","hideIndicator","tabsContainer","setGroupsAttributes","_groupChanges$","resetSelectionOnCollectionChanged","groupsArray","tabsGroup","getTabsGroupId","getTabItemId","currentTab","tabsArray_1","tabsArray_1_1","oldTab","selectedTabItem","performDeselection","oldTabRelatedGroup","newTabRelatedGroup","bringNewTabIntoView","tabNativeElement","viewPortOffsetWidth","contentOffset","contentsContainer","selectedIndicator","IgxTabsComponent_1","IgxTabsModule","IGX_TIME_PICKER_COMPONENT","IgxItemListDirective","timePicker","nextHour","nextMinute","nextSeconds","nextAmPm","prevHour","prevMinute","prevSeconds","prevAmPm","listName","minuteList","secondsList","ampmList","hourList","okButtonClick","cancelButtonClick","onHover","onPanMove","IgxHourItemDirective","itemList","isSelectedHour","selectedHour","scrollHourIntoView","IgxMinuteItemDirective","isSelectedMinute","selectedMinute","scrollMinuteIntoView","IgxSecondsItemDirective","isSelectedSeconds","selectedSeconds","scrollSecondsIntoView","IgxAmPmItemDirective","isSelectedAmPm","selectedAmPm","scrollAmPmIntoView","IgxTimePickerTemplateDirective","IgxTimePickerActionsDirective","TimeDisplayFormatPipe","hour","amPM","maskAmPM","sections","showHoursList","showMinutesList","showSecondsList","showAmPmList","prompt","regExp","hourVal","minutesVal","secondsVal","lastIndexOf","TimeInputFormatPipe","cleared","leadZeroHour","leadZeroMinutes","leadZeroSeconds","TimePickerHammerConfig","IgxTimePickerComponent","_hourItems","_minuteItems","_secondsItems","_ampmItems","isNotEmpty","displayFormat","inputFormat","_okButtonLabel","_cancelButtonLabel","_itemsDelta","_isHourListLoop","_isMinuteListLoop","_isSecondsListLoop","_hourView","_minuteView","_secondsView","_ampmView","_hoursPos","_minutesPos","_secondsPos","_amPmPos","_isValueValid","dispVal","_formatTime","_displayValue","displayValue","setThroughUI","formatValue","trimMask","determineCursorPos","_dialogOverlaySettings","_dateFromModel","_mask","secondsEntries","minuteEntries","hourEntries","timePickerTemplateDirective","defaultTimePickerTemplate","dropdownInputTemplate","_generateHours","_generateMinutes","_generateSeconds","_generateAmPm","spinOnEdit","_inputGroup","_onDropDownClosed","onKeydownSpace","onAltArrowDown","clearCursorPos","_scrollItemIntoView","isListLoop","viewType","itemIntoView","_itemToString","_nextItem","_prevItem","_viewToString","minute","itemsCount","formattedSeconds","formattedMinute","formattedHour","_updateHourView","_updateMinuteView","_updateSecondsView","_updateAmPmView","_addEmptyItems","hourItemsCount","itemsDelta","minuteItemsCount","secondsItemsCount","_getSelectedTime","_convertMinMaxValue","_isEntryValid","validH","validM","validS","re","validHourEntries","validMinuteEntries","validSecondsEntries","_updateEditableInput","_spinHours","currentVal","maxVal","hDelta","_spinMinutes","mDelta","_spinSeconds","sDelta","_initializeContainer","_prevSelectedHour","_prevSelectedMinute","_prevSelectedSeconds","_prevSelectedAmPm","hourIntoView","minuteIntoView","secondsIntoView","ampmIntoView","time","hoursInView","minutesInView","secondsInView","ampmInView","ampm","preserveAmPm","maskWithAmPm","pureMask","displayVal","cursorOnHours","cursorOnMinutes","cursorOnSeconds","cursorOnAmPm","showHours","showMinutes","showSeconds","showAmPm","IgxTimePickerComponent_1","IgxTimePickerModule","IgxToastComponent","_isVisible","CSS_CLASSES","IGX_TOAST_BOTTOM","IGX_TOAST_MIDDLE","IGX_TOAST_TOP","onShowing","onShown","onHiding","onHidden","isVisibleChange","mapPositionToClassName","IgxToastModule"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","enum EaseIn {\n    quad = `cubic-bezier(0.550, 0.085, 0.680, 0.530)` as any,\n    cubic = `cubic-bezier(0.550, 0.055, 0.675, 0.190)` as any,\n    quart = `cubic-bezier(0.895, 0.030, 0.685, 0.220)` as any,\n    quint = `cubic-bezier(0.755, 0.050, 0.855, 0.060)` as any,\n    sine = `cubic-bezier(0.470, 0.000, 0.745, 0.715)` as any,\n    expo = `cubic-bezier(0.950, 0.050, 0.795, 0.035)` as any,\n    circ = `cubic-bezier(0.600, 0.040, 0.980, 0.335)` as any,\n    back = `cubic-bezier(0.600, -0.280, 0.735, 0.045)` as any\n}\n\nenum EaseOut {\n    quad = `cubic-bezier(0.250, 0.460, 0.450, 0.940)` as any,\n    cubic = `cubic-bezier(0.215, 0.610, 0.355, 1.000)` as any,\n    quart = `cubic-bezier(0.165, 0.840, 0.440, 1.000)` as any,\n    quint = `cubic-bezier(0.230, 1.000, 0.320, 1.000)` as any,\n    sine = `cubic-bezier(0.390, 0.575, 0.565, 1.000)` as any,\n    expo = `cubic-bezier(0.190, 1.000, 0.220, 1.000)` as any,\n    circ = `cubic-bezier(0.075, 0.820, 0.165, 1.000)` as any,\n    back = `cubic-bezier(0.175, 0.885, 0.320, 1.275)` as any\n}\n\nenum EaseInOut {\n    quad = `cubic-bezier(0.455, 0.030, 0.515, 0.955)` as any,\n    cubic = `cubic-bezier(0.645, 0.045, 0.355, 1.000)` as any,\n    quart = `cubic-bezier(0.770, 0.000, 0.175, 1.000)` as any,\n    quint = `cubic-bezier(0.860, 0.000, 0.070, 1.000)` as any,\n    sine = `cubic-bezier(0.445, 0.050, 0.550, 0.950)` as any,\n    expo = `cubic-bezier(1.000, 0.000, 0.000, 1.000)` as any,\n    circ = `cubic-bezier(0.785, 0.135, 0.150, 0.860)` as any,\n    back = `cubic-bezier(0.680, -0.550, 0.265, 1.550)` as any\n}\n\nexport { EaseIn, EaseOut, EaseInOut };\n","import { animate, animation, AnimationMetadata, AnimationReferenceMetadata, style } from '@angular/animations';\nimport { EaseOut } from '../easings';\nimport { IAnimationParams } from '../interface';\n\nconst base: AnimationMetadata[] = [\n    style({\n        opacity: `{{startOpacity}}`\n    }),\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        style({\n            opacity: `{{endOpacity}}`\n        })\n    )\n];\n\nconst baseParams: IAnimationParams = {\n    delay: '0s',\n    duration: '350ms',\n    easing: EaseOut.sine,\n    endOpacity: 1,\n    startOpacity: 0\n};\n\nconst fadeIn: AnimationReferenceMetadata = animation(base, {\n    params: baseParams\n});\n\nconst fadeOut: AnimationReferenceMetadata = animation(base, {\n    params: {\n        delay: '0s',\n        duration: '350ms',\n        easing: EaseOut.sine,\n        endOpacity: 0,\n        startOpacity: 1\n    }\n});\n\nexport { fadeIn, fadeOut };\n","import {\n    animate,\n    animation,\n    AnimationMetadata,\n    AnimationReferenceMetadata,\n    keyframes,\n    style\n} from '@angular/animations';\nimport { EaseOut } from '../easings';\nimport { IAnimationParams } from '../interface';\n\nconst baseRecipe: AnimationMetadata[] = [\n    style({\n        backfaceVisibility: 'hidden',\n        transformStyle: 'preserve-3d'\n    }),\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        keyframes([\n            style({\n                offset: 0,\n                transform: `translateZ({{startDistance}})\n                rotate3d({{rotateX}}, {{rotateY}}, {{rotateZ}}, {{startAngle}}deg)`\n            }),\n            style({\n                offset: 1,\n                transform: `translateZ({{endDistance}})\n                rotate3d({{rotateX}}, {{rotateY}}, {{rotateZ}}, {{endAngle}}deg)`\n            })\n        ])\n    )\n];\n\nconst baseParams: IAnimationParams = {\n    delay: '0s',\n    duration: '600ms',\n    easing: EaseOut.quad,\n    endAngle: 180,\n    endDistance: '0px',\n    rotateX: 1,\n    rotateY: 0,\n    rotateZ: 0,\n    startAngle: 0,\n    startDistance: '0px'\n};\n\nconst flipTop: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams\n    }\n});\n\nconst flipBottom: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        endAngle: -180\n    }\n});\n\nconst flipLeft: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        rotateX: 0,\n        rotateY: 1\n    }\n});\n\nconst flipRight: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        endAngle: -180,\n        rotateX: 0,\n        rotateY: 1\n    }\n});\n\nconst flipHorFwd: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        endDistance: '170px'\n    }\n});\n\nconst flipHorBck: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        endDistance: '-170px'\n    }\n});\n\nconst flipVerFwd: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        endDistance: '170px',\n        rotateX: 0,\n        rotateY: 1\n    }\n});\n\nconst flipVerBck: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        endDistance: '-170px',\n        rotateX: 0,\n        rotateY: 1\n    }\n});\n\nexport {\n    flipTop,\n    flipRight,\n    flipBottom,\n    flipLeft,\n    flipHorFwd,\n    flipHorBck,\n    flipVerFwd,\n    flipVerBck\n};\n","import { animate, animation, AnimationMetadata, AnimationReferenceMetadata, style } from '@angular/animations';\nimport { EaseIn, EaseOut } from '../easings';\nimport { IAnimationParams } from '../interface';\n\nconst baseRecipe: AnimationMetadata[] = [\n    style({\n        opacity: `{{startOpacity}}`,\n        transform: `rotate3d({{rotateX}},{{rotateY}},{{rotateZ}},{{startAngle}}deg)`,\n        transformOrigin: `{{xPos}} {{yPos}}`\n    }),\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        style({\n            offset: 0,\n            opacity: `{{endOpacity}}`,\n            transform: `rotate3d({{rotateX}},{{rotateY}},{{rotateZ}},{{endAngle}}deg)`,\n            transformOrigin: `{{xPos}} {{yPos}}`\n        })\n    )\n];\n\nconst baseInParams: IAnimationParams = {\n    delay: '0s',\n    duration: '600ms',\n    easing: EaseOut.quad,\n    endAngle: 0,\n    endOpacity: 1,\n    rotateX: 0,\n    rotateY: 0,\n    rotateZ: 1,\n    startAngle: -360,\n    startOpacity: 0,\n    xPos: 'center',\n    yPos: 'center'\n};\n\nconst baseOutParams: IAnimationParams = {\n    ...baseInParams,\n    easing: EaseIn.quad,\n    endOpacity: 0,\n    startOpacity: 1\n};\n\nconst rotateInCenter: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: { ...baseInParams }\n});\n\nconst rotateOutCenter: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: { ...baseOutParams }\n});\n\nconst rotateInTop: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        xPos: 'top'\n    }\n});\n\nconst rotateOutTop: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        xPos: 'top'\n    }\n});\n\nconst rotateInRight: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        xPos: 'right'\n    }\n});\n\nconst rotateOutRight: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        xPos: 'right'\n    }\n});\n\nconst rotateInBottom: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        xPos: 'bottom'\n    }\n});\n\nconst rotateOutBottom: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        xPos: 'bottom'\n    }\n});\n\nconst rotateInLeft: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        xPos: 'left'\n    }\n});\n\nconst rotateOutLeft: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        xPos: 'left'\n    }\n});\n\nconst rotateInTr: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        xPos: 'right',\n        yPos: 'top'\n    }\n});\n\nconst rotateOutTr: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        xPos: 'right',\n        yPos: 'top'\n    }\n});\n\nconst rotateInBr: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        xPos: 'right',\n        yPos: 'bottom'\n    }\n});\n\nconst rotateOutBr: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        xPos: 'right',\n        yPos: 'bottom'\n    }\n});\n\nconst rotateInBl: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        xPos: 'left',\n        yPos: 'bottom'\n    }\n});\n\nconst rotateOutBl: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        xPos: 'left',\n        yPos: 'bottom'\n    }\n});\n\nconst rotateInTl: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        xPos: 'left',\n        yPos: 'top'\n    }\n});\n\nconst rotateOutTl: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        xPos: 'left',\n        yPos: 'top'\n    }\n});\n\nconst rotateInDiagonal1: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        rotateX: 1,\n        rotateY: 1,\n        rotateZ: 0\n    }\n});\n\nconst rotateOutDiagonal1: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        rotateX: 1,\n        rotateY: 1,\n        rotateZ: 0\n    }\n});\n\nconst rotateInDiagonal2: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        rotateX: -1,\n        rotateY: 1,\n        rotateZ: 0\n    }\n});\n\nconst rotateOutDiagonal2: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        rotateX: -1,\n        rotateY: 1,\n        rotateZ: 0\n    }\n});\n\nconst rotateInHor: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        rotateX: 0,\n        rotateY: 1,\n        rotateZ: 0\n    }\n});\n\nconst rotateOutHor: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        rotateX: 0,\n        rotateY: 1,\n        rotateZ: 0\n    }\n});\n\nconst rotateInVer: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        rotateX: 1,\n        rotateY: 0,\n        rotateZ: 0\n    }\n});\n\nconst rotateOutVer: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        rotateX: 1,\n        rotateY: 0,\n        rotateZ: 0\n    }\n});\n\nexport {\n    rotateInCenter,\n    rotateInTop,\n    rotateInRight,\n    rotateInLeft,\n    rotateInBottom,\n    rotateInTr,\n    rotateInBr,\n    rotateInBl,\n    rotateInTl,\n    rotateInDiagonal1,\n    rotateInDiagonal2,\n    rotateInHor,\n    rotateInVer,\n    rotateOutCenter,\n    rotateOutTop,\n    rotateOutRight,\n    rotateOutLeft,\n    rotateOutBottom,\n    rotateOutTr,\n    rotateOutBr,\n    rotateOutBl,\n    rotateOutTl,\n    rotateOutDiagonal1,\n    rotateOutDiagonal2,\n    rotateOutHor,\n    rotateOutVer\n};\n","import {\n    animate,\n    animation,\n    AnimationMetadata,\n    AnimationReferenceMetadata,\n    keyframes,\n    style\n} from '@angular/animations';\nimport { EaseInOut } from '../easings';\nimport { IAnimationParams } from '../interface';\n\nconst baseRecipe: AnimationMetadata[] = [\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        keyframes([\n            style({\n                offset: 0,\n                transform: `rotate(0deg) translate{{direction}}(0)`,\n                transformOrigin: `{{xPos}} {{yPos}}`\n            }),\n            style({\n                offset: 0.1,\n                transform: `rotate({{endAngle}}deg) translate{{direction}}(-{{startDistance}})`\n            }),\n            style({\n                offset: 0.2,\n                transform: `rotate(-{{startAngle}}deg) translate{{direction}}({{startDistance}})`\n            }),\n            style({\n                offset: 0.3,\n                transform: `rotate({{startAngle}}deg) translate{{direction}}(-{{startDistance}})`\n            }),\n            style({\n                offset: 0.4,\n                transform: `rotate(-{{startAngle}}deg) translate{{direction}}({{startDistance}})`\n\n            }),\n            style({\n                offset: 0.5,\n                transform: `rotate({{startAngle}}deg) translate{{direction}}(-{{startDistance}})`\n            }),\n            style({\n                offset: 0.6,\n                transform: `rotate(-{{startAngle}}deg) translate{{direction}}({{startDistance}})`\n\n            }),\n            style({\n                offset: 0.7,\n                transform: `rotate({{startAngle}}deg) translate{{direction}}(-{{startDistance}})`\n            }),\n            style({\n                offset: 0.8,\n                transform: `rotate(-{{endAngle}}deg) translate{{direction}}({{endDistance}})`\n\n            }),\n            style({\n                offset: 0.9,\n                transform: `rotate({{endAngle}}deg) translate{{direction}}(-{{endDistance}})`\n\n            }),\n            style({\n                offset: 1,\n                transform: `rotate(0deg) translate{{direction}}(0)`,\n                transformOrigin: `{{xPos}} {{yPos}}`\n            })\n        ])\n    )\n];\n\nconst baseParams: IAnimationParams = {\n    delay: '0s',\n    direction: 'X',\n    duration: '800ms',\n    easing: EaseInOut.quad,\n    endAngle: 0,\n    endDistance: '8px',\n    startAngle: 0,\n    startDistance: '10px',\n    xPos: 'center',\n    yPos: 'center'\n};\n\nconst shakeHor: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'X'\n    }\n});\n\nconst shakeVer: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'Y'\n    }\n});\n\nconst shakeTop: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        endAngle: 2,\n        endDistance: '0',\n        startAngle: 4,\n        startDistance: '0',\n        yPos: 'top'\n    }\n});\n\nconst shakeBottom: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'Y',\n        endAngle: 2,\n        endDistance: '0',\n        startAngle: 4,\n        startDistance: '0',\n        yPos: 'bottom'\n    }\n});\n\nconst shakeRight: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'Y',\n        endAngle: 2,\n        endDistance: '0',\n        startAngle: 4,\n        startDistance: '0',\n        xPos: 'right',\n        yPos: 'center'\n    }\n});\n\nconst shakeLeft: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'Y',\n        endAngle: 2,\n        endDistance: '0',\n        startAngle: 4,\n        startDistance: '0',\n        xPos: 'left',\n        yPos: 'center'\n    }\n});\n\nconst shakeCenter: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'Y',\n        endAngle: 8,\n        endDistance: '0',\n        startAngle: 10,\n        startDistance: '0',\n        xPos: 'center',\n        yPos: 'center'\n    }\n});\n\nconst shakeTr: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'Y',\n        endAngle: 2,\n        endDistance: '0',\n        startAngle: 4,\n        startDistance: '0',\n        xPos: 'right',\n        yPos: 'top'\n    }\n});\n\nconst shakeBr: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'Y',\n        endAngle: 2,\n        endDistance: '0',\n        startAngle: 4,\n        startDistance: '0',\n        xPos: 'right',\n        yPos: 'bottom'\n    }\n});\n\nconst shakeBl: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'Y',\n        endAngle: 2,\n        endDistance: '0',\n        startAngle: 4,\n        startDistance: '0',\n        xPos: 'left',\n        yPos: 'bottom'\n    }\n});\n\nconst shakeTl: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'Y',\n        endAngle: 2,\n        endDistance: '0',\n        startAngle: 4,\n        startDistance: '0',\n        xPos: 'left',\n        yPos: 'top'\n    }\n});\n\nexport {\n    shakeHor,\n    shakeVer,\n    shakeTop,\n    shakeBottom,\n    shakeRight,\n    shakeLeft,\n    shakeCenter,\n    shakeTr,\n    shakeBr,\n    shakeBl,\n    shakeTl\n};\n","import {\n    animate,\n    animation,\n    AnimationMetadata,\n    keyframes,\n    style\n} from '@angular/animations';\nimport { IAnimationParams } from '../interface';\n\nconst heartbeatBase: AnimationMetadata[] = [\n    style({\n        animationTimingFunction: `ease-out`,\n        transform: `scale(1)`,\n        transformOrigin: `center center`\n    }),\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        keyframes([\n            style({\n                animationTimingFunction: `ease-in`,\n                offset: 0.1,\n                transform: `scale(0.91)`\n            }),\n            style({\n                animationTimingFunction: `ease-out`,\n                offset: 0.17,\n                transform: `scale(0.98)`\n            }),\n            style({\n                animationTimingFunction: `ease-in`,\n                offset: 0.33,\n                transform: `scale(0.87)`\n            }),\n            style({\n                animationTimingFunction: `ease-out`,\n                offset: 0.45,\n                transform: `scale(1)`\n            })\n        ])\n    )\n];\n\nconst heartbeatParams: IAnimationParams = {\n    delay: '0s',\n    duration: '1.5s',\n    easing: 'ease-in-out'\n};\n\nconst pulsateBase: AnimationMetadata[] = [\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        keyframes([\n            style({\n                offset: 0,\n                transform: `scale({{fromScale}})`\n            }),\n            style({\n                offset: 0.5,\n                transform: `scale({{toScale}})`\n            }),\n            style({\n                offset: 1,\n                transform: `scale({{fromScale}})`\n            })\n        ])\n    )\n];\n\nconst pulsateParams: IAnimationParams = {\n    delay: '0s',\n    duration: '.5s',\n    easing: 'ease-in-out',\n    fromScale: 1,\n    toScale: 1.1\n};\n\nconst blinkBase: AnimationMetadata[] = [\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        keyframes([\n            style({\n                offset: 0,\n                opacity: .8,\n                transform: `scale({{fromScale}})`\n            }),\n            style({\n                offset: 0.8,\n                opacity: 0,\n                transform: `scale({{midScale}})`\n            }),\n            style({\n                offset: 1,\n                opacity: 0,\n                transform: `scale({{toScale}})`\n            })\n        ])\n    )\n];\n\nconst blinkParams: IAnimationParams = {\n    delay: '0s',\n    duration: '.8s',\n    easing: 'ease-in-out',\n    fromScale: .2,\n    midScale: 1.2,\n    toScale: 2.2\n};\n\nconst pulsateFwd = animation(pulsateBase, {\n    params: {\n        ...pulsateParams\n    }\n});\n\nconst pulsateBck = animation(pulsateBase, {\n    params: {\n        ...pulsateParams,\n        toScale: .9\n    }\n});\n\nconst heartbeat = animation(heartbeatBase, {\n    params: {\n        ...heartbeatParams\n    }\n});\n\nconst blink = animation(blinkBase, {\n    params: {\n        ...blinkParams\n    }\n});\n\nexport {\n    heartbeat,\n    pulsateFwd,\n    pulsateBck,\n    blink\n};\n","import { animate, animation, AnimationMetadata, AnimationReferenceMetadata, style } from '@angular/animations';\nimport { EaseOut } from '../easings';\nimport { IAnimationParams } from '../interface';\n\nconst base: AnimationMetadata[] = [\n    style({\n        opacity: `{{startOpacity}}`,\n        transform: `scale{{direction}}({{fromScale}})`,\n        transformOrigin: `{{xPos}} {{yPos}}`\n    }),\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        style({\n            opacity: `{{endOpacity}}`,\n            transform: `scale{{direction}}({{toScale}})`,\n            transformOrigin: `{{xPos}} {{yPos}}`\n        })\n    )\n];\n\nconst baseInParams: IAnimationParams = {\n    delay: '0s',\n    direction: '',\n    duration: '350ms',\n    easing: EaseOut.quad,\n    endOpacity: 1,\n    fromScale: .5,\n    startOpacity: 0,\n    toScale: 1,\n    xPos: '50%',\n    yPos: '50%'\n};\n\nconst baseOutParams: IAnimationParams = {\n    ...baseInParams,\n    easing: EaseOut.sine,\n    endOpacity: 0,\n    fromScale: 1,\n    startOpacity: 1,\n    toScale: .5\n};\n\nconst scaleInCenter: AnimationReferenceMetadata = animation(base, { params: baseInParams });\n\nconst scaleInBl: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            xPos: '0',\n            yPos: '100%'\n        }\n    }\n);\n\nconst scaleInVerCenter: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            direction: 'Y',\n            fromScale: .4\n        }\n    }\n);\n\nconst scaleInTop: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            xPos: '50%',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleInLeft: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            xPos: '0',\n            yPos: '50%'\n        }\n    }\n);\n\nconst scaleInVerTop: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            direction: 'Y',\n            fromScale: .4,\n            xPos: '100%',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleInTr = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            xPos: '100%',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleInTl: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            xPos: '0',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleInVerBottom: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            direction: 'Y',\n            fromScale: .4,\n            xPos: '0',\n            yPos: '100%'\n        }\n    }\n);\n\nconst scaleInRight: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            xPos: '100%',\n            yPos: '50%'\n        }\n    }\n);\n\nconst scaleInHorCenter: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            direction: 'X',\n            fromScale: .4\n        }\n    }\n);\n\nconst scaleInBr: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            xPos: '100%',\n            yPos: '100%'\n        }\n    }\n);\n\nconst scaleInHorLeft: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            direction: 'X',\n            fromScale: .4,\n            xPos: '0',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleInBottom: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            xPos: '50%',\n            yPos: '100%'\n        }\n    }\n);\n\nconst scaleInHorRight: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            direction: 'X',\n            fromScale: .4,\n            xPos: '100%',\n            yPos: '100%'\n        }\n    }\n);\n\nconst scaleOutCenter: AnimationReferenceMetadata = animation(base, { params: baseOutParams });\n\nconst scaleOutBl: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            xPos: '0',\n            yPos: '100%'\n        }\n    }\n);\n\nconst scaleOutBr: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            xPos: '100%',\n            yPos: '100%'\n        }\n    }\n);\n\nconst scaleOutVerCenter: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            direction: 'Y',\n            toScale: .3\n        }\n    }\n);\n\nconst scaleOutVerTop: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            direction: 'Y',\n            toScale: .3,\n            xPos: '100%',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleOutVerBottom: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            direction: 'Y',\n            toScale: .3,\n            xPos: '0',\n            yPos: '100%'\n        }\n    }\n);\n\nconst scaleOutTop: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            xPos: '50%',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleOutLeft: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            xPos: '0',\n            yPos: '50%'\n        }\n    }\n);\n\nconst scaleOutTr: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            xPos: '100%',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleOutTl: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            xPos: '0',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleOutRight: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            xPos: '100%',\n            yPos: '50%'\n        }\n    }\n);\n\nconst scaleOutBottom: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            xPos: '50%',\n            yPos: '100%'\n        }\n    }\n);\n\nconst scaleOutHorCenter: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            direction: 'X',\n            toScale: .3\n        }\n    }\n);\n\nconst scaleOutHorLeft: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            direction: 'X',\n            toScale: .3,\n            xPos: '0',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleOutHorRight: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            direction: 'X',\n            toScale: .3,\n            xPos: '100%',\n            yPos: '100%'\n        }\n    }\n);\n\nexport {\n    scaleInTop,\n    scaleInRight,\n    scaleInBottom,\n    scaleInLeft,\n    scaleInCenter,\n    scaleInTr,\n    scaleInBr,\n    scaleInBl,\n    scaleInTl,\n    scaleInVerTop,\n    scaleInVerBottom,\n    scaleInVerCenter,\n    scaleInHorCenter,\n    scaleInHorLeft,\n    scaleInHorRight,\n    scaleOutTop,\n    scaleOutRight,\n    scaleOutBottom,\n    scaleOutLeft,\n    scaleOutCenter,\n    scaleOutTr,\n    scaleOutBr,\n    scaleOutBl,\n    scaleOutTl,\n    scaleOutVerTop,\n    scaleOutVerBottom,\n    scaleOutVerCenter,\n    scaleOutHorCenter,\n    scaleOutHorLeft,\n    scaleOutHorRight\n};\n","import { animate, animation, AnimationMetadata, AnimationReferenceMetadata, style } from '@angular/animations';\nimport { EaseIn, EaseOut } from '../easings';\nimport { IAnimationParams } from '../interface';\n\nconst base: AnimationMetadata[] = [\n    style({\n        opacity: `{{startOpacity}}`,\n        transform: `{{fromPosition}}`\n    }),\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        style({\n            opacity: `{{endOpacity}}`,\n            transform: `{{toPosition}}`\n        })\n    )\n];\n\nconst baseInParams: IAnimationParams = {\n    delay: '0s',\n    duration: '350ms',\n    easing: EaseOut.quad,\n    endOpacity: 1,\n    fromPosition: 'translateY(-500px)',\n    startOpacity: 0,\n    toPosition: 'translateY(0)'\n};\n\nconst baseOutParams: IAnimationParams = {\n    delay: '0s',\n    duration: '350ms',\n    easing: EaseIn.quad,\n    endOpacity: 0,\n    fromPosition: 'translateY(0)',\n    startOpacity: 1,\n    toPosition: 'translateY(-500px)'\n};\n\nconst slideInTop: AnimationReferenceMetadata = animation(base, { params: baseInParams });\n\nconst slideInLeft: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            delay: '0s',\n            duration: '350ms',\n            easing: EaseOut.quad,\n            endOpacity: 1,\n            fromPosition: 'translateX(-500px)',\n            startOpacity: 0,\n            toPosition: 'translateY(0)'\n        }\n    }\n);\n\nconst slideInRight: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            delay: '0s',\n            duration: '350ms',\n            easing: EaseOut.quad,\n            endOpacity: 1,\n            fromPosition: 'translateX(500px)',\n            startOpacity: 0,\n            toPosition: 'translateY(0)'\n        }\n    }\n);\n\nconst slideInBottom: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            delay: '0s',\n            duration: '350ms',\n            easing: EaseOut.quad,\n            endOpacity: 1,\n            fromPosition: 'translateY(500px)',\n            startOpacity: 0,\n            toPosition: 'translateY(0)'\n        }\n    }\n);\n\nconst slideInTr: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            fromPosition: 'translateY(-500px) translateX(500px)',\n            toPosition: 'translateY(0) translateX(0)'\n        }\n    }\n);\n\nconst slideInTl: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            fromPosition: 'translateY(-500px) translateX(-500px)',\n            toPosition: 'translateY(0) translateX(0)'\n        }\n    }\n);\n\nconst slideInBr: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            fromPosition: 'translateY(500px) translateX(500px)',\n            toPosition: 'translateY(0) translateX(0)'\n        }\n    }\n);\n\nconst slideInBl: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            fromPosition: 'translateY(500px) translateX(-500px)',\n            toPosition: 'translateY(0) translateX(0)'\n        }\n    }\n);\n\nconst slideOutTop: AnimationReferenceMetadata = animation(base, { params: baseOutParams });\n\nconst slideOutRight: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            toPosition: 'translateX(500px)'\n        }\n    }\n);\n\nconst slideOutBottom: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            delay: '0s',\n            duration: '350ms',\n            easing: EaseIn.quad,\n            endOpacity: 0,\n            fromPosition: 'translateY(0)',\n            startOpacity: 1,\n            toPosition: 'translateY(500px)'\n        }\n    }\n);\n\nconst slideOutLeft: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            toPosition: 'translateX(-500px)'\n        }\n    }\n);\n\nconst slideOutTr: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            fromPosition: 'translateY(0) translateX(0)',\n            toPosition: 'translateY(-500px) translateX(500px)'\n        }\n    }\n);\n\nconst slideOutBr: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            fromPosition: 'translateY(0) translateX(0)',\n            toPosition: 'translateY(500px) translateX(500px)'\n        }\n    }\n);\n\nconst slideOutBl: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            fromPosition: 'translateY(0) translateX(0)',\n            toPosition: 'translateY(500px) translateX(-500px)'\n        }\n    }\n);\n\nconst slideOutTl: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            fromPosition: 'translateY(0) translateX(0)',\n            toPosition: 'translateY(-500px) translateX(-500px)'\n        }\n    }\n);\n\nexport {\n    slideInTop,\n    slideInRight,\n    slideInBottom,\n    slideInLeft,\n    slideInTr,\n    slideInBr,\n    slideInBl,\n    slideInTl,\n    slideOutTop,\n    slideOutBottom,\n    slideOutRight,\n    slideOutLeft,\n    slideOutTr,\n    slideOutBr,\n    slideOutBl,\n    slideOutTl\n};\n","import { animate, animation, AnimationMetadata, AnimationReferenceMetadata, style } from '@angular/animations';\nimport { EaseIn, EaseOut } from '../easings';\nimport { IAnimationParams } from '../interface';\n\nconst swingBase: AnimationMetadata[] = [\n    style({\n        opacity: `{{startOpacity}}`,\n        transform: `rotate{{direction}}({{startAngle}}deg)`,\n        transformOrigin: `{{xPos}} {{yPos}}`\n    }),\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        style({\n            opacity: `{{endOpacity}}`,\n            transform: `rotate{{direction}}({{endAngle}}deg)`,\n            transformOrigin: `{{xPos}} {{yPos}}`\n        })\n    )\n];\n\nconst swingParams: IAnimationParams = {\n    delay: '0s',\n    direction: 'X',\n    duration: '.5s',\n    easing: EaseOut.back,\n    endAngle: 0,\n    endOpacity: 1,\n    startAngle: -100,\n    startOpacity: 0,\n    xPos: 'top',\n    yPos: 'center'\n};\n\nconst swingOutParams: IAnimationParams = {\n    ...swingParams,\n    duration: '.55s',\n    easing: EaseIn.back,\n    endAngle: 70,\n    endOpacity: 0,\n    startAngle: 0,\n    startOpacity: 1\n};\n\nconst swingInTopFwd: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingParams\n    }\n});\n\nconst swingInRightFwd: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingParams,\n        direction: 'Y',\n        xPos: 'center',\n        yPos: 'right'\n    }\n});\n\nconst swingInBottomFwd: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingParams,\n        startAngle: 100,\n        xPos: 'bottom'\n    }\n});\n\nconst swingInLeftFwd: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingParams,\n        direction: 'Y',\n        startAngle: 100,\n        xPos: 'center',\n        yPos: 'left'\n    }\n});\n\nconst swingInTopBck: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingParams,\n        duration: '.6s',\n        startAngle: 70\n    }\n});\n\nconst swingInRightBck: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingParams,\n        direction: 'Y',\n        duration: '.6s',\n        startAngle: 70,\n        xPos: 'center',\n        yPos: 'right'\n    }\n});\n\nconst swingInBottomBck: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingParams,\n        duration: '.6s',\n        startAngle: -70,\n        xPos: 'bottom'\n    }\n});\n\nconst swingInLeftBck: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingParams,\n        direction: 'Y',\n        duration: '.6s',\n        startAngle: -70,\n        xPos: 'center',\n        yPos: 'left'\n    }\n});\n\nconst swingOutTopFwd: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingOutParams\n    }\n});\n\nconst swingOutRightFwd: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingOutParams,\n        direction: 'Y',\n        xPos: 'center',\n        yPos: 'right'\n    }\n});\n\nconst swingOutBottomFwd: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingOutParams,\n        endAngle: -70,\n        xPos: 'bottom'\n    }\n});\n\nconst swingOutLefttFwd: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingOutParams,\n        direction: 'Y',\n        endAngle: -70,\n        xPos: 'center',\n        yPos: 'left'\n    }\n});\n\nconst swingOutTopBck: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingOutParams,\n        duration: '.45s',\n        endAngle: -100\n    }\n});\n\nconst swingOutRightBck: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingOutParams,\n        direction: 'Y',\n        duration: '.45s',\n        endAngle: -100,\n        xPos: 'center',\n        yPos: 'right'\n    }\n});\n\nconst swingOutBottomBck: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingOutParams,\n        duration: '.45s',\n        endAngle: 100,\n        xPos: 'bottom'\n    }\n});\n\nconst swingOutLeftBck: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingOutParams,\n        direction: 'Y',\n        duration: '.45s',\n        endAngle: 100,\n        xPos: 'center',\n        yPos: 'left'\n    }\n});\n\nexport {\n    swingInTopFwd,\n    swingInRightFwd,\n    swingInLeftFwd,\n    swingInBottomFwd,\n    swingInTopBck,\n    swingInRightBck,\n    swingInBottomBck,\n    swingInLeftBck,\n    swingOutTopFwd,\n    swingOutRightFwd,\n    swingOutBottomFwd,\n    swingOutLefttFwd,\n    swingOutTopBck,\n    swingOutRightBck,\n    swingOutBottomBck,\n    swingOutLeftBck\n};\n","import { animate, animation, AnimationMetadata, AnimationReferenceMetadata, style } from '@angular/animations';\nimport { EaseOut, EaseIn } from '../easings';\nimport { IAnimationParams } from '../interface';\n\nconst base: AnimationMetadata[] = [\n    style({\n        opacity: `{{ startOpacity }}`,\n        height: `{{ startHeight }}`\n    }),\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        style({\n            opacity: `{{ endOpacity }}`,\n            height: `{{ endHeight }}`\n        })\n    )\n];\n\nconst baseParams: IAnimationParams = {\n    delay: '0s',\n    duration: '350ms',\n    easing: EaseIn.quad,\n    startOpacity: 0,\n    endOpacity: 1,\n    startHeight: '',\n    endHeight: ''\n};\n\nconst growVerIn: AnimationReferenceMetadata = animation(base, {\n    params: {\n        ...baseParams,\n        easing: EaseOut.quad,\n        startOpacity: 0,\n        endOpacity: 1,\n        startHeight: '0px',\n        endHeight: '*'\n    }\n});\n\nconst growVerOut: AnimationReferenceMetadata = animation(base, {\n    params: {\n        ...baseParams,\n        easing: EaseOut.quad,\n        startOpacity: 1,\n        endOpacity: 0,\n        startHeight: '*',\n        endHeight: '0px'\n    }\n});\n\nexport { growVerIn, growVerOut };\n","import { IToggleView } from './IToggleView';\nimport { Injectable } from '@angular/core';\n\n/**\n * Common service to be injected between components where those implementing common\n * ToggleView interface can register and toggle directives can call their methods.\n * TODO: Track currently active? Events?\n */\n@Injectable()\nexport class IgxNavigationService {\n    private navs: { [id: string]: IToggleView; };\n\n    constructor() {\n        this.navs = {};\n    }\n\n    public add(id: string, navItem: IToggleView) {\n        this.navs[id] = navItem;\n    }\n\n    public remove(id: string) {\n        delete this.navs[id];\n    }\n\n    public get(id: string): IToggleView {\n        if (id) {\n            return this.navs[id];\n        }\n    }\n\n    public toggle(id: string, ...args) {\n        if (this.navs[id]) {\n            return this.navs[id].toggle(...args);\n        }\n    }\n    public open(id: string, ...args) {\n        if (this.navs[id]) {\n            return this.navs[id].open(...args);\n        }\n    }\n    public close(id: string, ...args) {\n        if (this.navs[id]) {\n            return this.navs[id].close(...args);\n        }\n    }\n}\n","import { Directive, HostListener, Input, NgModule } from '@angular/core';\nimport {IgxNavigationService} from './nav.service';\n\n/**\n * Directive that can toggle targets through provided NavigationService.\n *\n * Usage:\n * ```\n * <button igxNavToggle=\"ID\"> Toggle </button>\n * ```\n * Where the `ID` matches the ID of compatible `IToggleView` component.\n */\n@Directive({ selector: '[igxNavToggle]' })\nexport class IgxNavigationToggleDirective {\n    public state: IgxNavigationService;\n\n    @Input('igxNavToggle') private target;\n\n    constructor(nav: IgxNavigationService) {\n        this.state = nav;\n    }\n\n    @HostListener('click')\n    public toggleNavigationDrawer() {\n        this.state.toggle(this.target, true);\n    }\n}\n\n/**\n * Directive that can close targets through provided NavigationService.\n *\n * Usage:\n * ```\n * <button igxNavClose=\"ID\"> Close </button>\n * ```\n * Where the `ID` matches the ID of compatible `IToggleView` component.\n */\n@Directive({ selector: '[igxNavClose]' })\nexport class IgxNavigationCloseDirective {\n    public state: IgxNavigationService;\n\n    @Input('igxNavClose') private target;\n\n    constructor(nav: IgxNavigationService) {\n        this.state = nav;\n    }\n\n    @HostListener('click')\n    public closeNavigationDrawer() {\n        this.state.close(this.target, true);\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxNavigationCloseDirective, IgxNavigationToggleDirective],\n    exports: [IgxNavigationCloseDirective, IgxNavigationToggleDirective],\n    providers: [IgxNavigationService]\n})\nexport class IgxNavigationModule {}\n","import { Injectable, PLATFORM_ID, Inject } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { Observable } from 'rxjs';\nimport ResizeObserver from 'resize-observer-polyfill';\n\n/**\n *@hidden\n */\nexport function cloneArray(array: any[], deep?: boolean) {\n    const arr = [];\n    if (!array) {\n        return arr;\n    }\n    let i = array.length;\n    while (i--) {\n        arr[i] = deep ? cloneValue(array[i]) : array[i];\n    }\n    return arr;\n}\n\n/**\n * Doesn't clone leaf items\n * @hidden\n */\nexport function cloneHierarchicalArray(array: any[], childDataKey: any): any[] {\n    const result: any[] = [];\n    if (!array) {\n        return result;\n    }\n\n    for (const item of array) {\n        const clonedItem = cloneValue(item);\n        if (Array.isArray(item[childDataKey])) {\n            clonedItem[childDataKey] = cloneHierarchicalArray(clonedItem[childDataKey], childDataKey);\n        }\n        result.push(clonedItem);\n    }\n    return result;\n}\n\n/**\n * Deep clones all first level keys of Obj2 and merges them to Obj1\n * @param obj1 Object to merge into\n * @param obj2 Object to merge from\n * @returns Obj1 with merged cloned keys from Obj2\n * @hidden\n */\nexport function mergeObjects(obj1: {}, obj2: {}): any {\n    if (!isObject(obj1)) {\n        throw new Error(`Cannot merge into ${obj1}. First param must be an object.`);\n    }\n\n    if (!isObject(obj2)) {\n        return obj1;\n    }\n\n    for (const key of Object.keys(obj2)) {\n        obj1[key] = cloneValue(obj2[key]);\n    }\n\n    return obj1;\n}\n\n/**\n * Creates deep clone of provided value.\n * Supports primitive values, dates and objects.\n * If passed value is array returns shallow copy of the array.\n * @param value value to clone\n * @returns Deep copy of provided value\n *@hidden\n */\nexport function cloneValue(value: any): any {\n    if (isDate(value)) {\n        return new Date(value.getTime());\n    }\n    if (Array.isArray(value)) {\n        return [...value];\n    }\n\n    if (value instanceof Map || value instanceof Set) {\n        return value;\n    }\n\n    if (isObject(value)) {\n        const result = {};\n\n        for (const key of Object.keys(value)) {\n            result[key] = cloneValue(value[key]);\n        }\n        return result;\n    }\n    return value;\n}\n\n/**\n * Checks if provided variable is Object\n * @param value Value to check\n * @returns true if provided variable is Object\n *@hidden\n */\nexport function isObject(value: any): boolean {\n    return value && value.toString() === '[object Object]';\n}\n\n/**\n * Checks if provided variable is Date\n * @param value Value to check\n * @returns true if provided variable is Date\n *@hidden\n */\nexport function isDate(value: any) {\n    return Object.prototype.toString.call(value) === '[object Date]';\n}\n\n/**\n * Checks if the two passed arguments are equal\n * Currently supports date objects\n * @param obj1\n * @param obj2\n * @returns: `boolean`\n * @hidden\n */\nexport function isEqual(obj1, obj2): boolean {\n    if (isDate(obj1) && isDate(obj2)) {\n        return obj1.getTime() === obj2.getTime();\n    }\n    return obj1 === obj2;\n}\n\n/**\n *@hidden\n */\nexport const enum KEYCODES {\n    ENTER = 13,\n    SPACE = 32,\n    ESCAPE = 27,\n    LEFT_ARROW = 37,\n    UP_ARROW = 38,\n    RIGHT_ARROW = 39,\n    DOWN_ARROW = 40,\n    F2 = 113,\n    TAB = 9\n}\n\n/**\n *@hidden\n */\nexport const enum KEYS {\n    ENTER = 'Enter',\n    SPACE = ' ',\n    SPACE_IE = 'Spacebar',\n    ESCAPE = 'Escape',\n    ESCAPE_IE = 'Esc',\n    LEFT_ARROW = 'ArrowLeft',\n    LEFT_ARROW_IE = 'Left',\n    UP_ARROW = 'ArrowUp',\n    UP_ARROW_IE = 'Up',\n    RIGHT_ARROW = 'ArrowRight',\n    RIGHT_ARROW_IE = 'Right',\n    DOWN_ARROW = 'ArrowDown',\n    DOWN_ARROW_IE = 'Down',\n    F2 = 'F2',\n    TAB = 'Tab',\n    HOME = 'Home',\n    END = 'End'\n}\n\n/**\n *@hidden\n* Returns the actual size of the node content, using Range\n* ```typescript\n* let range = document.createRange();\n* let column = this.grid.columnList.filter(c => c.field === 'ID')[0];\n*\n* let size = getNodeSizeViaRange(range, column.cells[0].nativeElement);\n* ```\n */\nexport function getNodeSizeViaRange(range: Range, node: any): number {\n    let overflow = null;\n    if (!isFirefox()) {\n        overflow = node.style.overflow;\n        // we need that hack - otherwise content won't be measured correctly in IE/Edge\n        node.style.overflow = 'visible';\n    }\n\n    range.selectNodeContents(node);\n    const width = range.getBoundingClientRect().width;\n\n    if (!isFirefox()) {\n        // we need that hack - otherwise content won't be measured correctly in IE/Edge\n        node.style.overflow = overflow;\n    }\n\n    return width;\n}\n/**\n *@hidden\n* Returns the actual size of the node content, using Canvas\n* ```typescript\n* let ctx = document.createElement('canvas').getContext('2d');\n* let column = this.grid.columnList.filter(c => c.field === 'ID')[0];\n*\n* let size = valToPxlsUsingCanvas(ctx, column.cells[0].nativeElement);\n* ```\n */\nexport function getNodeSizeViaCanvas(canvas2dCtx: any, node: any): number {\n    const s = this.grid.document.defaultView.getComputedStyle(node);\n\n    // need to set the font to get correct width\n    canvas2dCtx.font = s.fontSize + ' ' + s.fontFamily;\n\n    return canvas2dCtx.measureText(node.textContent).width;\n}\n/**\n *@hidden\n */\nexport function isIE(): boolean {\n    return navigator.appVersion.indexOf('Trident/') > 0;\n}\n/**\n *@hidden\n */\nexport function isEdge(): boolean {\n    const edgeBrowser = /Edge[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent);\n    return edgeBrowser;\n}\n\n/**\n *@hidden\n */\nexport function isFirefox(): boolean {\n    const firefoxBrowser = /Firefox[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent);\n    return firefoxBrowser;\n}\n\n/**\n * @hidden\n */\n@Injectable({ providedIn: 'root' })\nexport class PlatformUtil {\n    public isBrowser: boolean = isPlatformBrowser(this.platformId);\n\n    public isIOS = this.isBrowser && /iPad|iPhone|iPod/.test(navigator.userAgent) && !('MSStream' in window);\n\n    constructor(@Inject(PLATFORM_ID) private platformId: Object) {\n    }\n}\n\n/**\n * @hidden\n */\nexport function isLeftClick(event: PointerEvent) {\n    return event.button === 0;\n}\n\n/** @hidden */\nexport function isNavigationKey(key: string): boolean {\n    return [\n        'down',\n        'up',\n        'left',\n        'right',\n        'arrowdown',\n        'arrowup',\n        'arrowleft',\n        'arrowright',\n        'home',\n        'end',\n        'space',\n        'spacebar',\n        ' '\n    ].indexOf(key) !== -1;\n}\n\n/**\n *@hidden\n */\nexport function flatten(arr: any[]) {\n    let result = [];\n\n    arr.forEach(el => {\n        result.push(el);\n        if (el.children) {\n            const children = Array.isArray(el.children) ? el.children : el.children.toArray();\n            result = result.concat(flatten(children));\n        }\n    });\n    return result;\n}\n\nexport interface CancelableEventArgs {\n    /**\n     * Provides the ability to cancel the event.\n     */\n    cancel: boolean;\n}\n\nexport interface IBaseEventArgs {\n    /**\n     * Provides reference to the owner component.\n     */\n    owner?: any;\n}\n\nexport interface CancelableBrowserEventArgs extends CancelableEventArgs {\n    /** Browser event */\n    event?: Event;\n}\n\nexport const NAVIGATION_KEYS = new Set([\n    'down',\n    'up',\n    'left',\n    'right',\n    'arrowdown',\n    'arrowup',\n    'arrowleft',\n    'arrowright',\n    'home',\n    'end',\n    'space',\n    'spacebar',\n    ' '\n]);\nexport const ROW_EXPAND_KEYS = new Set('right down arrowright arrowdown'.split(' '));\nexport const ROW_COLLAPSE_KEYS = new Set('left up arrowleft arrowup'.split(' '));\nexport const SUPPORTED_KEYS = new Set([...Array.from(NAVIGATION_KEYS), 'tab', 'enter', 'f2', 'escape', 'esc']);\n\n/**\n * @hidden\n * @internal\n *\n * Creates a new ResizeObserver on `target` and returns it as an Observable.\n * Run the resizeObservable outside angular zone, because it patches the MutationObserver which causes an infinite loop.\n * Related issue: https://github.com/angular/angular/issues/31712\n */\nexport function resizeObservable(target: HTMLElement): Observable<ResizeObserverEntry[]> {\n    return new Observable((observer) => {\n        const instance = new ResizeObserver((entries: ResizeObserverEntry[]) => {\n            observer.next(entries);\n        });\n        instance.observe(target);\n        const unsubscribe = () => instance.disconnect();\n        return unsubscribe;\n    });\n}\n","import { ISortingStrategy } from './sorting-strategy';\nimport { IBaseEventArgs } from '../core/utils';\n\n/**\n * Represents sorting expressions.\n */\nexport enum SortingDirection {\n    None = 0,\n    Asc = 1,\n    Desc = 2\n}\n\nexport interface ISortingExpression extends IBaseEventArgs {\n   fieldName: string;\n   dir: SortingDirection;\n   ignoreCase?: boolean;\n   strategy?: ISortingStrategy;\n}\n","import { IGroupByKey } from './groupby-expand-state.interface';\nimport { IGroupByRecord } from './groupby-record.interface';\n\nexport function isHierarchyMatch(h1: Array<IGroupByKey>, h2: Array<IGroupByKey>): boolean {\n    if (h1.length !== h2.length) {\n        return false;\n    }\n    return h1.every((level, index): boolean => {\n        return level.fieldName === h2[index].fieldName && level.value === h2[index].value;\n    });\n}\n\nexport function getHierarchy(gRow: IGroupByRecord): Array<IGroupByKey> {\n    const hierarchy: Array<IGroupByKey> = [];\n    if (gRow !== undefined && gRow.expression) {\n        hierarchy.push({ fieldName: gRow.expression.fieldName, value: gRow.value });\n        while (gRow.groupParent) {\n            gRow = gRow.groupParent;\n            hierarchy.unshift({ fieldName: gRow.expression.fieldName, value: gRow.value });\n        }\n    }\n    return hierarchy;\n}\n","export enum PagingError {\n    None,\n    IncorrectPageIndex,\n    IncorrectRecordsPerPage\n}\n\nexport declare interface IPagingState {\n    index: number;\n    recordsPerPage: number;\n    metadata?: {\n        countPages: number;\n        error: PagingError;\n        countRecords: number;\n    };\n}\n","import { IFilteringOperation } from './filtering-condition';\n\nexport enum FilteringLogic {\n    And,\n    Or\n}\n\n/**\n * Represents filtering expressions.\n */\nexport declare interface IFilteringExpression {\n    fieldName: string;\n    condition: IFilteringOperation;\n    searchVal?: any;\n    ignoreCase?: boolean;\n}\n","import { IFilteringExpression, FilteringLogic } from './filtering-expression.interface';\nimport { IBaseEventArgs } from '../core/utils';\n\nexport enum FilteringExpressionsTreeType {\n    Regular,\n    Advanced\n}\n\nexport declare interface IFilteringExpressionsTree extends IBaseEventArgs {\n    filteringOperands: (IFilteringExpressionsTree | IFilteringExpression)[];\n    operator: FilteringLogic;\n    fieldName?: string;\n    type?: FilteringExpressionsTreeType;\n\n    find(fieldName: string): IFilteringExpressionsTree | IFilteringExpression;\n    findIndex(fieldName: string): number;\n}\n\nexport class FilteringExpressionsTree implements IFilteringExpressionsTree {\n\n    /**\n     * Sets/gets the filtering operands.\n     * ```typescript\n     * const gridExpressionsTree = new FilteringExpressionsTree(FilteringLogic.And);\n     * const expression = [\n     * {\n     *   condition: IgxStringFilteringOperand.instance().condition('contains'),\n     *   fieldName: 'Column Field',\n     *   searchVal: 'Value',\n     *   ignoreCase: false\n     * }];\n     * gridExpressionsTree.filteringOperands.push(expression);\n     * this.grid.filteringExpressionsTree = gridExpressionsTree;\n     * ```\n     * ```typescript\n     * let filteringOperands = gridExpressionsTree.filteringOperands;\n     * ```\n     * @memberof FilteringExpressionsTree\n     */\n    filteringOperands: (IFilteringExpressionsTree | IFilteringExpression)[] = [];\n\n    /**\n     * Sets/gets the operator.\n     * ```typescript\n     * gridExpressionsTree.operator = FilteringLogic.And;\n     * ```\n     * ```typescript\n     * let operator = gridExpressionsTree.operator;\n     * ```\n     * @memberof FilteringExpressionsTree\n     */\n    operator: FilteringLogic;\n\n    /**\n     * Sets/gets the field name of the column where the filtering expression is placed.\n     * ```typescript\n     *  gridExpressionTree.fieldName = 'Column Field';\n     * ```\n     * ```typescript\n     * let columnField = expressionTree.fieldName;\n     * ```\n     * @memberof FilteringExpressionsTree\n     */\n    fieldName?: string;\n\n    /**\n     * Sets/gets the type of the filtering expressions tree.\n     * ```typescript\n     *  gridExpressionTree.type = FilteringExpressionsTree.Advanced;\n     * ```\n     * ```typescript\n     * let type = expressionTree.type;\n     * ```\n     * @memberof FilteringExpressionsTree\n     */\n    type?: FilteringExpressionsTreeType;\n\n    constructor(operator: FilteringLogic, fieldName?: string) {\n        this.operator = operator;\n        this.fieldName = fieldName;\n    }\n\n\n    /**\n     * Checks if filtering expressions tree is empty.\n     * @param expressionTree filtering expressions tree.\n     */\n    public static empty(expressionTree: IFilteringExpressionsTree): boolean {\n        return !expressionTree || !expressionTree.filteringOperands || !expressionTree.filteringOperands.length;\n    }\n\n    /**\n     * Returns the filtering expression for a column with the provided fieldName.\n     * ```typescript\n     * let filteringExpression = gridExpressionTree.find('Column Field');\n     * ```\n     * @memberof FilteringExpressionsTree\n     */\n    public find(fieldName: string): IFilteringExpressionsTree | IFilteringExpression {\n        const index = this.findIndex(fieldName);\n\n        if (index > -1) {\n            return this.filteringOperands[index];\n        }\n\n        return null;\n    }\n\n    /**\n     * Returns the index of the filtering expression for a column with the provided fieldName.\n     * ```typescript\n     * let filteringExpressionIndex = gridExpressionTree.findIndex('Column Field');\n     * ```\n     * @memberof FilteringExpressionsTree\n     */\n    public findIndex(fieldName: string): number {\n        let expr;\n        for (let i = 0; i < this.filteringOperands.length; i++) {\n            expr = this.filteringOperands[i];\n            if (expr instanceof FilteringExpressionsTree) {\n                if (this.isFilteringExpressionsTreeForColumn(expr, fieldName)) {\n                    return i;\n                }\n            } else {\n                if ((expr as IFilteringExpression).fieldName === fieldName) {\n                    return i;\n                }\n            }\n        }\n\n        return -1;\n    }\n\n    protected isFilteringExpressionsTreeForColumn(expressionsTree: IFilteringExpressionsTree, fieldName: string): boolean {\n        if (expressionsTree.fieldName === fieldName) {\n            return true;\n        }\n\n        let expr;\n        for (let i = 0; i < expressionsTree.filteringOperands.length; i++) {\n            expr = expressionsTree.filteringOperands[i];\n            if ((expr instanceof FilteringExpressionsTree)) {\n                return this.isFilteringExpressionsTreeForColumn(expr, fieldName);\n            } else {\n                return (expr as IFilteringExpression).fieldName === fieldName;\n            }\n        }\n\n        return false;\n    }\n}\n","import { cloneArray } from '../core/utils';\nimport { IGroupByRecord } from './groupby-record.interface';\nimport { ISortingExpression, SortingDirection } from './sorting-expression.interface';\nimport { IGroupingExpression } from './grouping-expression.interface';\nimport { IGroupingState } from './groupby-state.interface';\nimport { IGroupByExpandState } from './groupby-expand-state.interface';\nimport { IGroupByResult } from './grouping-result.interface';\nimport { getHierarchy, isHierarchyMatch } from './operations';\n\nexport interface ISortingStrategy {\n    sort: (data: any[],\n           fieldName: string,\n           dir: SortingDirection,\n           ignoreCase: boolean,\n           valueResolver: (obj: any, key: string) => any) => any[];\n}\n\nexport class DefaultSortingStrategy implements ISortingStrategy {\n    private static _instance: DefaultSortingStrategy = null;\n\n    protected constructor() {}\n\n    public static instance(): DefaultSortingStrategy {\n        return this._instance || (this._instance = new this());\n    }\n\n    public sort(data: any[],\n                fieldName: string,\n                dir: SortingDirection,\n                ignoreCase: boolean,\n                valueResolver: (obj: any, key: string) => any) {\n        const key = fieldName;\n        const reverse = (dir === SortingDirection.Desc ? -1 : 1);\n        const cmpFunc = (obj1, obj2) => {\n            return this.compareObjects(obj1, obj2, key, reverse, ignoreCase, valueResolver);\n        };\n        return this.arraySort(data, cmpFunc);\n    }\n\n    public compareValues(a: any, b: any) {\n        const an = (a === null || a === undefined);\n        const bn = (b === null || b === undefined);\n        if (an) {\n            if (bn) {\n                return 0;\n            }\n            return -1;\n        } else if (bn) {\n            return 1;\n        }\n        return a > b ? 1 : a < b ? -1 : 0;\n    }\n\n    protected compareObjects(obj1: object,\n                             obj2: object,\n                             key: string,\n                             reverse: number,\n                             ignoreCase: boolean,\n                             valueResolver: (obj: any, key: string) => any) {\n        let a = valueResolver(obj1, key);\n        let b = valueResolver(obj2, key);\n        if (ignoreCase) {\n            a = a && a.toLowerCase ? a.toLowerCase() : a;\n            b = b && b.toLowerCase ? b.toLowerCase() : b;\n        }\n        return reverse * this.compareValues(a, b);\n    }\n\n    protected arraySort(data: any[], compareFn?): any[] {\n        return data.sort(compareFn);\n    }\n}\n\nexport interface IGridSortingStrategy {\n    sort(data: any[], expressions: ISortingExpression[]): any[];\n}\n\nexport class NoopSortingStrategy implements IGridSortingStrategy {\n    private static _instance: NoopSortingStrategy = null;\n\n    private constructor() {  }\n\n    public static instance() {\n        return this._instance || (this._instance = new NoopSortingStrategy());\n    }\n\n    public sort(data: any[], expressions: ISortingExpression[]): any[] {\n        return data;\n    }\n}\n\nexport class IgxSorting implements IGridSortingStrategy {\n    public sort(data: any[], expressions: ISortingExpression[]): any[] {\n        return this.sortDataRecursive(data, expressions);\n    }\n\n    private groupedRecordsByExpression(data: any[],\n            index: number,\n            expression: IGroupingExpression): any[] {\n        let i;\n        let groupval;\n        const res = [];\n        const key = expression.fieldName;\n        const len = data.length;\n        res.push(data[index]);\n        groupval = this.getFieldValue(data[index], key);\n        index++;\n        const comparer = expression.groupingComparer || DefaultSortingStrategy.instance().compareValues;\n        for (i = index; i < len; i++) {\n            if (comparer(this.getFieldValue(data[i], key), groupval) === 0) {\n                res.push(data[i]);\n            } else {\n                break;\n            }\n        }\n        return res;\n    }\n    private sortDataRecursive<T>(data: T[],\n                                 expressions: ISortingExpression[],\n                                 expressionIndex: number = 0): T[] {\n        let i;\n        let j;\n        let expr: ISortingExpression;\n        let gbData;\n        let gbDataLen;\n        const exprsLen = expressions.length;\n        const dataLen = data.length;\n        expressionIndex = expressionIndex || 0;\n        if (expressionIndex >= exprsLen || dataLen <= 1) {\n            return data;\n        }\n        expr = expressions[expressionIndex];\n        if (!expr.strategy) {\n            expr.strategy = DefaultSortingStrategy.instance();\n        }\n        data = expr.strategy.sort(data, expr.fieldName, expr.dir, expr.ignoreCase, this.getFieldValue);\n        if (expressionIndex === exprsLen - 1) {\n            return data;\n        }\n        // in case of multiple sorting\n        for (i = 0; i < dataLen; i++) {\n            gbData = this.groupedRecordsByExpression(data, i, expr);\n            gbDataLen = gbData.length;\n            if (gbDataLen > 1) {\n                gbData = this.sortDataRecursive(gbData, expressions, expressionIndex + 1);\n            }\n            for (j = 0; j < gbDataLen; j++) {\n                data[i + j] = gbData[j];\n            }\n            i += gbDataLen - 1;\n        }\n        return data;\n    }\n    protected groupDataRecursive<T>(data: T[], state: IGroupingState, level: number,\n        parent: IGroupByRecord, metadata: IGroupByRecord[], grid: any = null,\n        groupsRecords: any[] = [], fullResult: IGroupByResult = { data: [], metadata: [] }): T[] {\n        const expressions = state.expressions;\n        const expansion = state.expansion;\n        let i = 0;\n        let result = [];\n        while (i < data.length) {\n            const group = this.groupedRecordsByExpression(data, i, expressions[level]);\n            const groupRow: IGroupByRecord = {\n                expression: expressions[level],\n                level,\n                records: cloneArray(group),\n                value: group[0][expressions[level].fieldName],\n                groupParent: parent,\n                groups: [],\n                height: grid ? grid.renderedRowHeight : null\n            };\n            if (parent) {\n                parent.groups.push(groupRow);\n            } else {\n                groupsRecords.push(groupRow);\n            }\n            const hierarchy = getHierarchy(groupRow);\n            const expandState: IGroupByExpandState = expansion.find((s) =>\n                isHierarchyMatch(s.hierarchy || [{ fieldName: groupRow.expression.fieldName, value: groupRow.value }], hierarchy));\n            const expanded = expandState ? expandState.expanded : state.defaultExpanded;\n            let recursiveResult;\n            result.push(groupRow);\n            metadata.push(null);\n            fullResult.data.push(groupRow);\n            fullResult.metadata.push(null);\n            if (level < expressions.length - 1) {\n                recursiveResult = this.groupDataRecursive(group, state, level + 1, groupRow,\n                    expanded ? metadata : [], grid, groupsRecords, fullResult);\n                if (expanded) {\n                    result = result.concat(recursiveResult);\n                }\n            } else {\n                for (const groupItem of group) {\n                    fullResult.metadata.push(groupRow);\n                    fullResult.data.push(groupItem);\n                }\n                if (expanded) {\n                    metadata.push(...fullResult.metadata.slice(fullResult.metadata.length - group.length));\n                    result.push(...fullResult.data.slice(fullResult.data.length - group.length));\n                }\n            }\n            i += group.length;\n        }\n        return result;\n    }\n    protected getFieldValue(obj: any, key: string): any {\n        return obj[key];\n    }\n}\n\nexport class IgxDataRecordSorting extends IgxSorting {\n    protected getFieldValue(obj: any, key: string): any {\n        return obj.data[key];\n    }\n}\n","import { IGroupByRecord } from './groupby-record.interface';\nimport { IgxSorting } from './sorting-strategy';\nimport { IGroupingState } from './groupby-state.interface';\nimport { IGroupByResult } from './grouping-result.interface';\n\nexport class IgxGrouping extends IgxSorting {\n    public groupBy(data: any[], state: IGroupingState, grid?: any,\n        groupsRecords?: any[], fullResult: IGroupByResult = { data: [], metadata: [] }): IGroupByResult {\n        const metadata: IGroupByRecord[] = [];\n        const grouping = this.groupDataRecursive(data, state, 0, null, metadata, grid, groupsRecords, fullResult);\n        return {\n            data: grouping,\n            metadata: metadata\n        };\n    }\n}\n\n","import { EventEmitter } from '@angular/core';\n\nexport enum TransactionType {\n    ADD = 'add',\n    DELETE = 'delete',\n    UPDATE = 'update'\n}\n\nexport interface Transaction {\n    id: any;\n    type: TransactionType;\n    newValue: any;\n}\n\n/**\n * @experimental\n * @hidden\n */\nexport interface HierarchicalTransaction extends Transaction {\n    path: any[];\n}\n\nexport interface State {\n    value: any;\n    recordRef: any;\n    type: TransactionType;\n}\n\n/**\n * @experimental\n * @hidden\n */\nexport interface HierarchicalState extends State {\n    path: any[];\n}\n\nexport interface TransactionService<T extends Transaction, S extends State> {\n    /**\n     * Returns whether transaction is enabled for this service\n     */\n    readonly enabled: boolean;\n\n    /**\n     * Event fired when transaction state has changed - add transaction, commit all transactions, undo and redo\n     */\n    onStateUpdate?: EventEmitter<void>;\n\n    /**\n     * @returns if there are any transactions in the Undo stack\n     */\n    canUndo: boolean;\n\n    /**\n     * @returns if there are any transactions in the Redo stack\n     */\n    canRedo: boolean;\n\n    /**\n     * Adds provided  transaction with recordRef if any\n     * @param transaction Transaction to be added\n     * @param recordRef Reference to the value of the record in the data source related to the changed item\n     */\n    add(transaction: T, recordRef?: any): void;\n\n    /**\n     * Returns all recorded transactions in chronological order\n     * @param id Optional record id to get transactions for\n     * @returns All transaction in the service or for the specified record\n     */\n    getTransactionLog(id?: any): T[];\n\n    /**\n     * Remove the last transaction if any\n     */\n    undo(): void;\n\n    /**\n     * Applies the last undone transaction if any\n     */\n    redo(): void;\n\n    /**\n     * Returns aggregated changes from all transactions\n     * @param mergeChanges If set to true will merge each state's value over relate recordRef\n     * and will record resulting value in the related transaction\n     * @returns Collection of aggregated transactions for each changed record\n     */\n    getAggregatedChanges(mergeChanges: boolean): T[];\n\n    /**\n     * Returns the state of the record with provided id\n     * @param id The id of the record\n     * @param pending Should get pending state\n     * @returns State of the record if any\n     */\n    getState(id: any, pending?: boolean): S;\n\n    /**\n     * Returns value of the required id including all uncommitted changes\n     * @param id The id of the record to return value for\n     * @param mergeChanges If set to true will merge state's value over relate recordRef\n     * and will return merged value\n     * @returns Value with changes or **null**\n     */\n    getAggregatedValue(id: any, mergeChanges: boolean): any;\n\n    /**\n     * Applies all transactions over the provided data\n     * @param data Data source to update\n     * @param id Optional record id to commit transactions for\n     */\n    commit(data: any[], id?: any): void;\n\n    /**\n     * Clears all transactions\n     * @param id Optional record id to clear transactions for\n     */\n    clear(id?: any): void;\n\n    /**\n     * Starts pending transactions. All transactions passed after call to startPending\n     * will not be added to transaction log\n     */\n    startPending(): void;\n\n    /**\n     * Clears all pending transactions and aggregated pending state. If commit is set to true\n     * commits pending states as single transaction\n     * @param commit Should commit the pending states\n     */\n    endPending(commit: boolean): void;\n}\n","import { IFilteringState } from './filtering-state.interface';\n\nimport { IgxSorting, IgxDataRecordSorting, IGridSortingStrategy } from './sorting-strategy';\nimport { IgxGrouping } from './grouping-strategy';\nimport { IGroupByResult } from './grouping-result.interface';\n\nimport { IPagingState, PagingError } from './paging-state.interface';\n\nimport { IGroupByKey } from './groupby-expand-state.interface';\nimport { IGroupByRecord } from './groupby-record.interface';\nimport { IGroupingState } from './groupby-state.interface';\nimport { ISortingExpression } from './sorting-expression.interface';\nimport { FilteringStrategy } from './filtering-strategy';\nimport { ITreeGridRecord } from '../grids/tree-grid';\nimport { cloneValue, mergeObjects } from '../core/utils';\nimport { Transaction, TransactionType, HierarchicalTransaction } from '../services/transaction/transaction';\nimport { getHierarchy, isHierarchyMatch } from './operations';\n\n/**\n * @hidden\n */\nexport enum DataType {\n    String = 'string',\n    Number = 'number',\n    Boolean = 'boolean',\n    Date = 'date'\n}\n\n/**\n * @hidden\n */\nexport class DataUtil {\n    public static sort<T>(data: T[], expressions: ISortingExpression[], sorting: IGridSortingStrategy = new IgxSorting()): T[] {\n        return sorting.sort(data, expressions);\n    }\n\n    public static treeGridSort(hierarchicalData: ITreeGridRecord[],\n        expressions: ISortingExpression[],\n        sorting: IGridSortingStrategy = new IgxDataRecordSorting(),\n        parent?: ITreeGridRecord): ITreeGridRecord[] {\n        let res: ITreeGridRecord[] = [];\n        hierarchicalData.forEach((hr: ITreeGridRecord) => {\n            const rec: ITreeGridRecord = DataUtil.cloneTreeGridRecord(hr);\n            rec.parent = parent;\n            if (rec.children) {\n                rec.children = DataUtil.treeGridSort(rec.children, expressions, sorting, rec);\n            }\n            res.push(rec);\n        });\n\n        res = DataUtil.sort(res, expressions, sorting);\n\n        return res;\n    }\n\n    public static cloneTreeGridRecord(hierarchicalRecord: ITreeGridRecord) {\n        const rec: ITreeGridRecord = {\n            rowID: hierarchicalRecord.rowID,\n            data: hierarchicalRecord.data,\n            children: hierarchicalRecord.children,\n            isFilteredOutParent: hierarchicalRecord.isFilteredOutParent,\n            level: hierarchicalRecord.level,\n            expanded: hierarchicalRecord.expanded\n        };\n        return rec;\n    }\n\n    public static group<T>(data: T[], state: IGroupingState, grid: any = null,\n        groupsRecords: any[] = [], fullResult: IGroupByResult = { data: [], metadata: [] }): IGroupByResult {\n        const grouping = new IgxGrouping();\n        groupsRecords.splice(0, groupsRecords.length);\n        return grouping.groupBy(data, state, grid, groupsRecords, fullResult);\n    }\n\n    public static page<T>(data: T[], state: IPagingState): T[] {\n        if (!state) {\n            return data;\n        }\n        const len = data.length;\n        const index = state.index;\n        const res = [];\n        const recordsPerPage = state.recordsPerPage;\n        state.metadata = {\n            countPages: 0,\n            countRecords: data.length,\n            error: PagingError.None\n        };\n        if (index < 0 || isNaN(index)) {\n            state.metadata.error = PagingError.IncorrectPageIndex;\n            return res;\n        }\n        if (recordsPerPage <= 0 || isNaN(recordsPerPage)) {\n            state.metadata.error = PagingError.IncorrectRecordsPerPage;\n            return res;\n        }\n        state.metadata.countPages = Math.ceil(len / recordsPerPage);\n        if (!len) {\n            return data;\n        }\n        if (index >= state.metadata.countPages) {\n            state.metadata.error = PagingError.IncorrectPageIndex;\n            return res;\n        }\n        return data.slice(index * recordsPerPage, (index + 1) * recordsPerPage);\n    }\n\n    public static filter<T>(data: T[], state: IFilteringState): T[] {\n        if (!state.strategy) {\n            state.strategy = new FilteringStrategy();\n        }\n        return state.strategy.filter(data, state.expressionsTree, state.advancedExpressionsTree);\n    }\n\n    public static correctPagingState(state: IPagingState, length: number) {\n        const maxPage = Math.ceil(length / state.recordsPerPage) - 1;\n        if (!isNaN(maxPage) && state.index > maxPage) {\n            state.index = maxPage;\n        }\n    }\n\n    public static getHierarchy(gRow: IGroupByRecord): Array<IGroupByKey> {\n        return getHierarchy(gRow);\n    }\n\n    public static isHierarchyMatch(h1: Array<IGroupByKey>, h2: Array<IGroupByKey>): boolean {\n        return isHierarchyMatch(h1, h2);\n    }\n\n    /**\n     * Merges all changes from provided transactions into provided data collection\n     * @param data Collection to merge\n     * @param transactions Transactions to merge into data\n     * @param primaryKey Primary key of the collection, if any\n     * @param deleteRows Should delete rows with DELETE transaction type from data\n     * @returns Provided data collections updated with all provided transactions\n     */\n    public static mergeTransactions<T>(data: T[], transactions: Transaction[], primaryKey?: any, deleteRows: boolean = false): T[] {\n        data.forEach((item: any, index: number) => {\n            const rowId = primaryKey ? item[primaryKey] : item;\n            const transaction = transactions.find(t => t.id === rowId);\n            if (transaction && transaction.type === TransactionType.UPDATE) {\n                data[index] = transaction.newValue;\n            }\n        });\n\n        if (deleteRows) {\n            transactions\n                .filter(t => t.type === TransactionType.DELETE)\n                .forEach(t => {\n                    const index = primaryKey ? data.findIndex(d => d[primaryKey] === t.id) : data.findIndex(d => d === t.id);\n                    if (0 <= index && index < data.length) {\n                        data.splice(index, 1);\n                    }\n                });\n        }\n\n        data.push(...transactions\n            .filter(t => t.type === TransactionType.ADD)\n            .map(t => t.newValue));\n\n        return data;\n    }\n\n    /**\n     * Merges all changes from provided transactions into provided hierarchical data collection\n     * @param data Collection to merge\n     * @param transactions Transactions to merge into data\n     * @param childDataKey Data key of child collections\n     * @param primaryKey Primary key of the collection, if any\n     * @param deleteRows Should delete rows with DELETE transaction type from data\n     * @returns Provided data collections updated with all provided transactions\n     */\n    public static mergeHierarchicalTransactions(\n        data: any[],\n        transactions: HierarchicalTransaction[],\n        childDataKey: any,\n        primaryKey?: any,\n        deleteRows: boolean = false): any[] {\n        for (const transaction of transactions) {\n            if (transaction.path) {\n                const parent = this.findParentFromPath(data, primaryKey, childDataKey, transaction.path);\n                let collection: any[] = parent ? parent[childDataKey] : data;\n                switch (transaction.type) {\n                    case TransactionType.ADD:\n                        //  if there is no parent this is ADD row at root level\n                        if (parent && !parent[childDataKey]) {\n                            parent[childDataKey] = collection = [];\n                        }\n                        collection.push(transaction.newValue);\n                        break;\n                    case TransactionType.UPDATE:\n                        const updateIndex = collection.findIndex(x => x[primaryKey] === transaction.id);\n                        if (updateIndex !== -1) {\n                            collection[updateIndex] = mergeObjects(cloneValue(collection[updateIndex]), transaction.newValue);\n                        }\n                        break;\n                    case TransactionType.DELETE:\n                        if (deleteRows) {\n                            const deleteIndex = collection.findIndex(r => r[primaryKey] === transaction.id);\n                            if (deleteIndex !== -1) {\n                                collection.splice(deleteIndex, 1);\n                            }\n                        }\n                        break;\n                }\n            } else {\n                //  if there is no path this is ADD row in root. Push the newValue to data\n                data.push(transaction.newValue);\n            }\n        }\n        return data;\n    }\n\n    public static parseValue(dataType: DataType, value: any): any {\n        if (dataType === DataType.Number) {\n            value = parseFloat(value);\n        }\n\n        return value;\n    }\n\n    private static findParentFromPath(data: any[], primaryKey: any, childDataKey: any, path: any[]): any {\n        let collection: any[] = data;\n        let result: any;\n\n        for (const id of path) {\n            result = collection && collection.find(x => x[primaryKey] === id);\n            if (!result) {\n                break;\n            }\n\n            collection = result[childDataKey];\n        }\n\n        return result;\n    }\n}\n","import { FilteringLogic, IFilteringExpression } from './filtering-expression.interface';\nimport { FilteringExpressionsTree, IFilteringExpressionsTree } from './filtering-expressions-tree';\n\nexport interface IFilteringStrategy {\n    filter(data: any[], expressionsTree: IFilteringExpressionsTree, advancedExpressionsTree?: IFilteringExpressionsTree): any[];\n}\n\nexport class NoopFilteringStrategy implements IFilteringStrategy {\n    private static _instance: NoopFilteringStrategy = null;\n\n    private constructor() {  }\n\n    public static instance() {\n        return this._instance || (this._instance = new NoopFilteringStrategy());\n    }\n\n    public filter(data: any[], expressionsTree: IFilteringExpressionsTree, advancedExpressionsTree?: IFilteringExpressionsTree): any[] {\n        return data;\n    }\n}\n\nexport abstract class BaseFilteringStrategy implements IFilteringStrategy  {\n    public abstract filter(data: any[], expressionsTree: IFilteringExpressionsTree,\n        advancedExpressionsTree?: IFilteringExpressionsTree): any[];\n\n    protected abstract getFieldValue(rec: object, fieldName: string): any;\n\n    public findMatchByExpression(rec: object, expr: IFilteringExpression): boolean {\n        const cond = expr.condition;\n        const val = this.getFieldValue(rec, expr.fieldName);\n        return cond.logic(val, expr.searchVal, expr.ignoreCase);\n    }\n\n    public matchRecord(rec: object, expressions: IFilteringExpressionsTree | IFilteringExpression): boolean {\n        if (expressions) {\n            if (expressions instanceof FilteringExpressionsTree) {\n                const expressionsTree = expressions as IFilteringExpressionsTree;\n                const operator = expressionsTree.operator as FilteringLogic;\n                let matchOperand, operand;\n\n                if (expressionsTree.filteringOperands && expressionsTree.filteringOperands.length) {\n                    for (let i = 0; i < expressionsTree.filteringOperands.length; i++) {\n                        operand = expressionsTree.filteringOperands[i];\n                        matchOperand = this.matchRecord(rec, operand);\n\n                        // Return false if at least one operand does not match and the filtering logic is And\n                        if (!matchOperand && operator === FilteringLogic.And) {\n                            return false;\n                        }\n\n                        // Return true if at least one operand matches and the filtering logic is Or\n                        if (matchOperand && operator === FilteringLogic.Or) {\n                            return true;\n                        }\n                    }\n\n                    return matchOperand;\n                }\n\n                return true;\n            } else {\n                const expression = expressions as IFilteringExpression;\n                return this.findMatchByExpression(rec, expression);\n            }\n        }\n\n        return true;\n    }\n}\n\nexport class FilteringStrategy extends BaseFilteringStrategy {\n    private static _instace: FilteringStrategy = null;\n\n    public constructor() { super(); }\n\n    public static instance() {\n        return this._instace || (this._instace = new this());\n    }\n\n    public filter<T>(data: T[], expressionsTree: IFilteringExpressionsTree, advancedExpressionsTree?: IFilteringExpressionsTree): T[] {\n        let i;\n        let rec;\n        const len = data.length;\n        const res: T[] = [];\n        if ((FilteringExpressionsTree.empty(expressionsTree) && FilteringExpressionsTree.empty(advancedExpressionsTree)) || !len) {\n            return data;\n        }\n        for (i = 0; i < len; i++) {\n            rec = data[i];\n            if (this.matchRecord(rec, expressionsTree) && this.matchRecord(rec, advancedExpressionsTree)) {\n                res.push(rec);\n            }\n        }\n        return res;\n    }\n\n    protected getFieldValue(rec: object, fieldName: string): any {\n        return rec[fieldName];\n    }\n}\n","import { IgxExporterOptionsBase } from '../exporter-common/exporter-options-base';\n\n/**\n * Objects of this class are used to configure the CSV exporting process.\n */\nexport class IgxCsvExporterOptions extends IgxExporterOptionsBase {\n\n    private _valueDelimiter;\n    private _fileType;\n\n    constructor(fileName: string, fileType: CsvFileTypes) {\n        super(fileName, IgxCsvExporterOptions.getExtensionFromFileType(fileType));\n        this.setFileType(fileType);\n        this.setDelimiter();\n    }\n\n    private static getExtensionFromFileType(fType: CsvFileTypes) {\n        let extension = '';\n        switch (fType) {\n            case CsvFileTypes.CSV:\n                extension = '.csv';\n                break;\n            case CsvFileTypes.TSV:\n                extension = '.tsv';\n                break;\n            case CsvFileTypes.TAB:\n                extension = '.tab';\n                break;\n            default:\n                throw Error('Unsupported CSV file type!');\n        }\n        return extension;\n    }\n\n    /**\n     * Gets the value delimiter which will be used for the exporting operation.\n     * ```typescript\n     * let delimiter = this.exportOptions.valueDelimiter;\n     * ```\n     * @memberof IgxCsvExporterOptions\n     */\n    get valueDelimiter() {\n        return this._valueDelimiter;\n    }\n\n    /**\n     * Sets a value delimiter which will overwrite the default delimiter of the selected export format.\n     * ```typescript\n     * this.exportOptions.valueDelimiter = '|';\n     * ```\n     * @memberof IgxCsvExporterOptions\n     */\n    set valueDelimiter(value) {\n        this.setDelimiter(value);\n    }\n\n    /**\n     * Gets the CSV export format.\n     * ```typescript\n     * let filetype = this.exportOptions.fileType;\n     * ```\n     * @memberof IgxCsvExporterOptions\n     */\n    get fileType() {\n        return this._fileType;\n    }\n\n    /**\n     * Sets the CSV export format.\n     * ```typescript\n     * this.exportOptions.fileType = CsvFileTypes.TAB;\n     * ```\n     * @memberof IgxCsvExporterOptions\n     */\n    set fileType(value) {\n        this.setFileType(value);\n    }\n\n    private setFileType(value) {\n        if (value !== undefined && value !== null && value !== this._fileType) {\n            this._fileType = value;\n            const extension = IgxCsvExporterOptions.getExtensionFromFileType(value);\n            if (!this.fileName.endsWith(extension)) {\n                const oldExt = '.' + this.fileName.split('.').pop();\n                const newName = this.fileName.replace(oldExt, extension);\n                this._fileExtension = extension;\n                this.fileName = newName;\n            }\n        }\n    }\n\n    private setDelimiter(value?) {\n        if (value !== undefined && value !== '' && value !== null) {\n            this._valueDelimiter = value;\n        } else {\n            switch (this.fileType) {\n                case CsvFileTypes.CSV:\n                    this._valueDelimiter = ',';\n                    break;\n                case CsvFileTypes.TSV:\n                case CsvFileTypes.TAB:\n                    this._valueDelimiter = '\\t';\n                    break;\n            }\n        }\n    }\n}\n\n/**\n * This enumeration is used to configure the default value separator\n * as well as the default file extension used when performing CSV exporting.\n */\nexport enum CsvFileTypes {\n    /**\n     * Character Separated Values, default separator is \"comma\", default file extension is .csv\n     */\n    CSV,\n    /**\n     * Tab Separated Values, default separator is tab, default file extension is .tsv\n     */\n    TSV,\n    /**\n     * Tab Separated Values, default separator is tab, default file extension is .tab\n     */\n    TAB\n}\n","\n/**\n * @hidden\n */\nexport class ExportUtilities {\n    public static getKeysFromData(data: any[]) {\n        const length = data.length;\n        if (length === 0) {\n            return [];\n        }\n\n        const dataEntry = data[0];\n        const dataEntryMiddle = data[Math.floor(length / 2)];\n        const dataEntryLast = data[length - 1];\n\n        const keys1 = Object.keys(dataEntry);\n        const keys2 = Object.keys(dataEntryMiddle);\n        const keys3 = Object.keys(dataEntryLast);\n\n        const keys = new Set(keys1.concat(keys2).concat(keys3));\n\n        return !ExportUtilities.isSpecialData(data) ? Array.from(keys) : [ 'Column 1' ];\n    }\n\n    public static saveBlobToFile(blob: Blob, fileName) {\n        const a = document.createElement('a');\n        if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n            window.navigator.msSaveOrOpenBlob(blob, fileName);\n        } else {\n            const url = window.URL.createObjectURL(blob);\n            a.download = fileName;\n\n            a.href = url;\n            document.body.appendChild(a);\n            a.click();\n            document.body.removeChild(a);\n            window.URL.revokeObjectURL(url);\n        }\n    }\n\n    public static stringToArrayBuffer(s: string): ArrayBuffer {\n        const buf = new ArrayBuffer(s.length);\n        const view = new Uint8Array(buf);\n        for (let i = 0; i !== s.length; ++i) {\n            /* tslint:disable no-bitwise */\n            view[i] = s.charCodeAt(i) & 0xFF;\n            /* tslint:enable no-bitwise */\n        }\n        return buf;\n    }\n\n    public static isSpecialData(data: any[]): boolean {\n        const dataEntry = data[0];\n        return (typeof dataEntry === 'string' ||\n                typeof dataEntry === 'number' ||\n                dataEntry instanceof Date);\n    }\n\n    public static hasValue(value: any): boolean {\n        return value !== undefined && value !== null;\n    }\n\n    public static isNullOrWhitespaces(value: string): boolean {\n        return value === undefined || value === null || !value.trim();\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { cloneArray, isEqual, mergeObjects } from '../core/utils';\nimport { DataUtil, DataType } from '../data-operations/data-util';\nimport { IFilteringExpression } from '../data-operations/filtering-expression.interface';\nimport { ISortingExpression, SortingDirection } from '../data-operations/sorting-expression.interface';\nimport { IgxGridCellComponent } from './cell.component';\nimport { IgxGridBaseDirective } from './grid-base.directive';\nimport { IgxRowDirective } from './row.directive';\nimport { IFilteringOperation } from '../data-operations/filtering-condition';\nimport { IFilteringExpressionsTree, FilteringExpressionsTree } from '../data-operations/filtering-expressions-tree';\nimport { Transaction, TransactionType, State } from '../services/transaction/transaction';\nimport { IgxCell, IgxRow } from './selection/selection.service';\nimport { GridType } from './common/grid.interface';\nimport { ColumnType } from './common/column.interface';\nimport { IRowToggleEventArgs } from './common/events';\nimport {\n    ROW_COLLAPSE_KEYS, ROW_EXPAND_KEYS\n} from '../core/utils';\nimport { first, debounceTime } from 'rxjs/operators';\n/**\n *@hidden\n */\n@Injectable()\nexport class GridBaseAPIService <T extends IgxGridBaseDirective & GridType> {\n\n    grid: T;\n    protected destroyMap: Map<string, Subject<boolean>> = new Map<string, Subject<boolean>>();\n\n    public get_column_by_name(name: string): ColumnType {\n        return this.grid.columnList.find((col: ColumnType) => col.field === name);\n    }\n\n    public get_summary_data() {\n        const grid = this.grid;\n        let data = grid.filteredData;\n        if (!data) {\n            if (grid.transactions.enabled) {\n                data = DataUtil.mergeTransactions(\n                    cloneArray(grid.data),\n                    grid.transactions.getAggregatedChanges(true),\n                    grid.primaryKey\n                );\n                const deletedRows = grid.transactions.getTransactionLog().filter(t => t.type === TransactionType.DELETE).map(t => t.id);\n                deletedRows.forEach(rowID => {\n                    const tempData = grid.primaryKey ? data.map(rec => rec[grid.primaryKey]) : data;\n                    const index = tempData.indexOf(rowID);\n                    if (index !== -1) {\n                       data.splice(index, 1);\n                    }\n                });\n            } else {\n                data = grid.data;\n            }\n        }\n        return data;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public getRowData(rowID: any) {\n        const data = this.get_all_data(this.grid.transactions.enabled);\n        const index = this.get_row_index_in_data(rowID);\n        return data[index];\n    }\n\n    // TODO: Refactor\n    public escape_editMode() {\n        this.grid.crudService.end();\n    }\n\n    // TODO: Refactor\n    public get_cell_inEditMode(): IgxCell {\n        return this.grid.crudService.cell;\n    }\n\n    public get_row_index_in_data(rowID: any): number {\n        const grid = this.grid as IgxGridBaseDirective;\n        if (!grid) {\n            return -1;\n        }\n        const data = this.get_all_data(grid.transactions.enabled);\n        return grid.primaryKey ? data.findIndex(record => record[grid.primaryKey] === rowID) : data.indexOf(rowID);\n    }\n\n    public get_row_by_key(rowSelector: any): IgxRowDirective<IgxGridBaseDirective & GridType> {\n        const primaryKey = this.grid.primaryKey;\n        if (primaryKey !== undefined && primaryKey !== null) {\n            return this.grid.dataRowList.find((row) => row.rowData[primaryKey] === rowSelector);\n        } else {\n            return this.grid.dataRowList.find((row) => row.rowData === rowSelector);\n        }\n    }\n\n    public get_row_by_index(rowIndex: number): IgxRowDirective<IgxGridBaseDirective & GridType> {\n        return this.grid.rowList.find((row) => row.index === rowIndex);\n    }\n\n    public get_cell_by_key(rowSelector: any, field: string): IgxGridCellComponent {\n        const row = this.get_row_by_key(rowSelector);\n        if (row && row.cells) {\n            return row.cells.find((cell) => cell.column.field === field);\n        }\n    }\n\n    public get_cell_by_index(rowIndex: number, columnIndex: number): IgxGridCellComponent {\n        const row = this.get_row_by_index(rowIndex);\n        if (row && row.cells) {\n            return row.cells.find((cell) => cell.columnIndex === columnIndex);\n        }\n    }\n\n    public get_cell_by_visible_index(rowIndex: number, columnIndex: number): IgxGridCellComponent {\n        const row = this.get_row_by_index(rowIndex);\n        if (row && row.cells) {\n            return row.cells.find((cell) => cell.visibleColumnIndex === columnIndex);\n        }\n    }\n\n    public submit_value() {\n        const cell = this.grid.crudService.cell;\n        if (cell ) {\n            const args = this.update_cell(cell, cell.editValue);\n            if (args.cancel) {\n                return;\n            }\n            this.escape_editMode();\n        }\n    }\n\n    update_cell(cell: IgxCell, value: any) {\n        const data = this.get_all_data(this.grid.transactions.enabled);\n        const index = this.get_row_index_in_data(cell.id.rowID);\n\n        cell.editValue = value;\n\n        const args = cell.createEditEventArgs();\n\n        this.grid.onCellEdit.emit(args);\n        if (args.cancel) {\n            return args;\n        }\n\n        // Cast to number after emit\n        // TODO: Clean up this\n        args.newValue = cell.castToNumber(args.newValue);\n\n        if (isEqual(args.oldValue, args.newValue)) {\n            return args;\n        }\n\n        this.grid.summaryService.clearSummaryCache(args);\n        this.updateData(this.grid, cell.id.rowID, data[index], cell.rowData, { [cell.column.field ]: args.newValue });\n        if (this.grid.primaryKey === cell.column.field) {\n             if (this.grid.selectionService.isRowSelected(cell.id.rowID)) {\n                this.grid.selectionService.deselectRow(cell.id.rowID);\n                this.grid.selectionService.selectRowById(args.newValue);\n            }\n            if (this.grid.hasSummarizedColumns) {\n                this.grid.summaryService.removeSummaries(cell.id.rowID);\n            }\n        }\n        if (!this.grid.rowEditable || !this.grid.crudService.row ||\n                this.grid.crudService.row.id !== cell.id.rowID || !this.grid.transactions.enabled) {\n            this.grid.summaryService.clearSummaryCache(args);\n            (this.grid as any)._pipeTrigger++;\n        }\n\n        return args;\n    }\n\n    /**\n     * Updates related row of provided grid's data source with provided new row value\n     * @param grid Grid to update data for\n     * @param rowID ID of the row to update\n     * @param rowValueInDataSource Initial value of the row as it is in data source\n     * @param rowCurrentValue Current value of the row as it is with applied previous transactions\n     * @param rowNewValue New value of the row\n     */\n    protected updateData(grid, rowID, rowValueInDataSource: any, rowCurrentValue: any, rowNewValue: {[x: string]: any}) {\n        if (grid.transactions.enabled) {\n            const transaction: Transaction = {\n                id: rowID,\n                type: TransactionType.UPDATE,\n                newValue: rowNewValue\n            };\n            grid.transactions.add(transaction, rowCurrentValue);\n        } else {\n            mergeObjects(rowValueInDataSource, rowNewValue);\n        }\n    }\n\n    _update_row(row: IgxRow, value?: any) {\n        const grid = this.grid;\n\n        const rowInEditMode = grid.crudService.row;\n        row.newData = value ? value : grid.transactions.getAggregatedValue(row.id, true);\n\n\n        if (rowInEditMode && row.id === rowInEditMode.id) {\n            row.data = { ...row.data, ...rowInEditMode.transactionState };\n        // TODO: Workaround for updating a row in edit mode through the API\n        } else if (this.grid.transactions.enabled) {\n            const state = grid.transactions.getState(row.id);\n            row.data = state ? Object.assign({}, row.data, state.value) : row.data;\n        }\n    }\n\n    update_row(row: IgxRow, value: any) {\n        const grid = this.grid;\n        const selected = grid.selectionService.isRowSelected(row.id);\n        const rowInEditMode = grid.crudService.row;\n        const data = this.get_all_data(grid.transactions.enabled);\n        const index = this.get_row_index_in_data(row.id);\n        const hasSummarized = grid.hasSummarizedColumns;\n\n        this._update_row(row, value);\n\n        const args = row.createEditEventArgs();\n\n        // If no valid row is found\n        if (index === -1) {\n            return args;\n        }\n\n        grid.onRowEdit.emit(args);\n\n        if (args.cancel) {\n            return args;\n        }\n\n        if (rowInEditMode) {\n            const hasChanges = grid.transactions.getState(args.rowID, true);\n            grid.transactions.endPending(false);\n            if (!hasChanges) {\n                return args;\n            }\n        }\n\n        if (!args.newValue) {\n            return args;\n        }\n\n        if (hasSummarized) {\n            grid.summaryService.removeSummaries(args.rowID);\n        }\n\n        this.updateData(grid, row.id, data[index], args.oldValue, args.newValue);\n        const newId = grid.primaryKey ? args.newValue[grid.primaryKey] : args.newValue;\n        if (selected) {\n            grid.selectionService.deselectRow(row.id);\n            grid.selectionService.selectRowById(newId);\n        }\n        if (hasSummarized) {\n            grid.summaryService.removeSummaries(newId);\n        }\n        (grid as any)._pipeTrigger++;\n\n        return args;\n    }\n\n\n\n    protected update_row_in_array(value: any, rowID: any, index: number) {\n        const grid = this.grid;\n        grid.data[index] = value;\n    }\n\n    public sort(expression: ISortingExpression): void {\n        if (expression.dir === SortingDirection.None) {\n            this.remove_grouping_expression(expression.fieldName);\n        }\n        const sortingState = cloneArray(this.grid.sortingExpressions);\n        this.prepare_sorting_expression([sortingState], expression);\n        this.grid.sortingExpressions = sortingState;\n    }\n\n    public sort_multiple(expressions: ISortingExpression[]): void {\n        const sortingState = cloneArray(this.grid.sortingExpressions);\n\n        for (const each of expressions) {\n            if (each.dir === SortingDirection.None) {\n                this.remove_grouping_expression(each.fieldName);\n            }\n            this.prepare_sorting_expression([sortingState], each);\n        }\n\n        this.grid.sortingExpressions = sortingState;\n    }\n\n    public filter(fieldName: string, term, conditionOrExpressionsTree: IFilteringOperation | IFilteringExpressionsTree,\n        ignoreCase: boolean) {\n        const grid = this.grid;\n        const filteringTree = grid.filteringExpressionsTree;\n        grid.endEdit(false);\n\n        if (grid.paging) {\n            grid.page = 0;\n        }\n\n        const fieldFilterIndex = filteringTree.findIndex(fieldName);\n        if (fieldFilterIndex > -1) {\n            filteringTree.filteringOperands.splice(fieldFilterIndex, 1);\n        }\n\n        this.prepare_filtering_expression(filteringTree, fieldName, term, conditionOrExpressionsTree, ignoreCase, fieldFilterIndex);\n        grid.filteringExpressionsTree = filteringTree;\n    }\n\n    public filter_global(term, condition, ignoreCase) {\n        if (!condition) {\n            return;\n        }\n\n        const grid = this.grid;\n        const filteringTree = grid.filteringExpressionsTree;\n        grid.endEdit(false);\n        if (grid.paging) {\n            grid.page = 0;\n        }\n\n        filteringTree.filteringOperands = [];\n        for (const column of grid.columns) {\n            this.prepare_filtering_expression(filteringTree, column.field, term,\n                condition, ignoreCase || column.filteringIgnoreCase);\n        }\n\n        grid.filteringExpressionsTree = filteringTree;\n    }\n\n    public clear_filter(fieldName: string) {\n        const grid = this.grid;\n        grid.endEdit(false);\n        const filteringState = grid.filteringExpressionsTree;\n        const index = filteringState.findIndex(fieldName);\n\n        if (index > -1) {\n            filteringState.filteringOperands.splice(index, 1);\n        } else if (!fieldName) {\n            filteringState.filteringOperands = [];\n        }\n\n        grid.filteringExpressionsTree = filteringState;\n    }\n\n    public clear_sort(fieldName: string) {\n        const sortingState = this.grid.sortingExpressions;\n        const index = sortingState.findIndex((expr) => expr.fieldName === fieldName);\n        if (index > -1) {\n            sortingState.splice(index, 1);\n            this.grid.sortingExpressions = sortingState;\n        }\n    }\n\n    protected prepare_filtering_expression(filteringState: IFilteringExpressionsTree, fieldName: string, searchVal,\n        conditionOrExpressionsTree: IFilteringOperation | IFilteringExpressionsTree, ignoreCase: boolean, insertAtIndex = -1) {\n\n        let newExpressionsTree;\n        const oldExpressionsTreeIndex = filteringState.findIndex(fieldName);\n        const expressionsTree = conditionOrExpressionsTree instanceof FilteringExpressionsTree ?\n            conditionOrExpressionsTree as IFilteringExpressionsTree : null;\n        const condition = conditionOrExpressionsTree instanceof FilteringExpressionsTree ?\n            null : conditionOrExpressionsTree as IFilteringOperation;\n        const newExpression: IFilteringExpression = { fieldName, searchVal, condition, ignoreCase };\n\n        if (oldExpressionsTreeIndex === -1) {\n            // no expressions tree found for this field\n            if (expressionsTree) {\n                if (insertAtIndex > -1) {\n                    filteringState.filteringOperands.splice(insertAtIndex, 0, expressionsTree);\n                } else {\n                    filteringState.filteringOperands.push(expressionsTree);\n                }\n            } else if (condition) {\n                // create expressions tree for this field and add the new expression to it\n                newExpressionsTree = new FilteringExpressionsTree(filteringState.operator, fieldName);\n                newExpressionsTree.filteringOperands.push(newExpression);\n                filteringState.filteringOperands.push(newExpressionsTree);\n            }\n        }\n    }\n\n    protected prepare_sorting_expression(stateCollections: Array<Array<any>>, expression: ISortingExpression) {\n        if (expression.dir === SortingDirection.None) {\n            stateCollections.forEach(state => {\n                state.splice(state.findIndex((expr) => expr.fieldName === expression.fieldName), 1);\n            });\n            return;\n        }\n\n        /**\n         * We need to make sure the states in each collection with same fields point to the same object reference.\n         * If the different state collections provided have different sizes we need to get the largest one.\n         * That way we can get the state reference from the largest one that has the same fieldName as the expression to prepare.\n         */\n        let maxCollection = stateCollections[0];\n        for (let i = 1; i < stateCollections.length; i++) {\n            if (maxCollection.length < stateCollections[i].length) {\n                maxCollection = stateCollections[i];\n            }\n        }\n        const maxExpr = maxCollection.find((expr) => expr.fieldName === expression.fieldName);\n\n        stateCollections.forEach(collection => {\n            const myExpr = collection.find((expr) => expr.fieldName === expression.fieldName);\n            if (!myExpr && !maxExpr) {\n                // Expression with this fieldName is missing from the current and the max collection.\n                collection.push(expression);\n            } else if (!myExpr && maxExpr) {\n                // Expression with this fieldName is missing from the current and but the max collection has.\n                collection.push(maxExpr);\n                Object.assign(maxExpr, expression);\n            } else {\n                // The current collection has the expression so just update it.\n                Object.assign(myExpr, expression);\n            }\n        });\n    }\n\n    protected remove_grouping_expression(fieldName) {\n    }\n\n    public clear_groupby(name?: string | Array<string>) {\n    }\n\n    public should_apply_number_style(column: ColumnType): boolean {\n        return column.dataType === DataType.Number;\n    }\n\n    public get_data(): any[] {\n        const grid = this.grid;\n        const data = grid.data ? grid.data : [];\n        return data;\n    }\n\n    public get_all_data(includeTransactions = false): any[] {\n        const grid = this.grid;\n        let data = grid.data ? grid.data : [];\n        data = includeTransactions ? grid.dataWithAddedInTransactionRows : data;\n        return data;\n    }\n\n    public get_filtered_data(): any[] {\n        return this.grid.filteredData;\n    }\n\n    protected getSortStrategyPerColumn(fieldName: string) {\n        return this.get_column_by_name(fieldName) ?\n            this.get_column_by_name(fieldName).sortStrategy : undefined;\n    }\n\n    public addRowToData(rowData: any) {\n        // Add row goes to transactions and if rowEditable is properly implemented, added rows will go to pending transactions\n        // If there is a row in edit - > commit and close\n        const grid = this.grid;\n        if (grid.transactions.enabled) {\n            const transactionId = grid.primaryKey ? rowData[grid.primaryKey] : rowData;\n            const transaction: Transaction = { id: transactionId, type: TransactionType.ADD, newValue: rowData };\n            grid.transactions.add(transaction);\n        } else {\n            grid.data.push(rowData);\n        }\n    }\n\n    public deleteRowFromData(rowID: any, index: number) {\n        //  if there is a row (index !== 0) delete it\n        //  if there is a row in ADD or UPDATE state change it's state to DELETE\n        const grid = this.grid;\n        if (index !== -1) {\n            if (grid.transactions.enabled) {\n                const transaction: Transaction = { id: rowID, type: TransactionType.DELETE, newValue: null };\n                grid.transactions.add(transaction, grid.data[index]);\n            } else {\n                grid.data.splice(index, 1);\n            }\n        } else {\n            const state: State = grid.transactions.getState(rowID);\n            grid.transactions.add({ id: rowID, type: TransactionType.DELETE, newValue: null }, state && state.recordRef);\n        }\n    }\n\n    public deleteRowById(rowId: any) {\n        let index: number;\n        const grid = this.grid;\n        const data = this.get_all_data();\n        if (grid.primaryKey) {\n            index = data.map((record) => record[grid.primaryKey]).indexOf(rowId);\n        } else {\n            index = data.indexOf(rowId);\n        }\n        const state: State = grid.transactions.getState(rowId);\n        const hasRowInNonDeletedState = state && state.type !== TransactionType.DELETE;\n\n        //  if there is a row (index !== -1) and the we have cell in edit mode on same row exit edit mode\n        //  if there is no row (index === -1), but there is a row in ADD or UPDATE state do as above\n        //  Otherwise just exit - there is nothing to delete\n        if (index !== -1 || hasRowInNonDeletedState) {\n            // Always exit edit when row is deleted\n            grid.endEdit(true);\n        } else {\n            return;\n        }\n\n        //  TODO: should we emit this when cascadeOnDelete is true for each row?!?!\n        grid.onRowDeleted.emit({ data: data[index] });\n\n        this.deleteRowFromData(rowId, index);\n\n        grid.selectionService.isRowSelected(rowId) ? grid.selectionService.deselectRow(rowId) : grid.selectionService.clearHeaderCBState();\n        (grid as any)._pipeTrigger++;\n        grid.notifyChanges();\n        // Data needs to be recalculated if transactions are in place\n        // If no transactions, `data` will be a reference to the grid getter, otherwise it will be stale\n        const dataAfterDelete = grid.transactions.enabled ? grid.dataWithAddedInTransactionRows : data;\n        grid.refreshSearch();\n        if (dataAfterDelete.length % grid.perPage === 0 && dataAfterDelete.length / grid.perPage - 1 < grid.page && grid.page !== 0) {\n            grid.page--;\n        }\n    }\n\n    public get_row_id(rowData) {\n        return this.grid.primaryKey ? rowData[this.grid.primaryKey] : rowData;\n    }\n\n    public row_deleted_transaction(rowID: any): boolean {\n        const grid = this.grid;\n        if (!grid) {\n            return false;\n        }\n        if (!grid.transactions.enabled) {\n            return false;\n        }\n        const state = grid.transactions.getState(rowID);\n        if (state) {\n            return state.type === TransactionType.DELETE;\n        }\n\n        return false;\n    }\n\n    public atInexistingPage(): boolean {\n        return this.grid.totalPages - 1 > this.grid.page;\n    }\n\n    public get_row_expansion_state(record: any): boolean {\n        const grid = this.grid;\n        const states = grid.expansionStates;\n        const rowID = grid.primaryKey ? record[grid.primaryKey] : record;\n        const expanded = states.get(rowID);\n\n        if (expanded !== undefined) {\n            return expanded;\n        } else {\n            return grid.getDefaultExpandState(record);\n        }\n    }\n\n    public set_row_expansion_state(rowID: any, expanded: boolean, event?: Event) {\n        const grid = this.grid;\n        const expandedStates = grid.expansionStates;\n\n        if (!this.allow_expansion_state_change(rowID, expanded)) {\n            return;\n        }\n\n        const args: IRowToggleEventArgs = {\n            rowID: rowID,\n            expanded: expanded,\n            event: event,\n            cancel: false\n        };\n\n        grid.onRowToggle.emit(args);\n\n        if (args.cancel) {\n            return;\n        }\n        expandedStates.set(rowID, expanded);\n        grid.expansionStates = expandedStates;\n        if (grid.rowEditable) {\n            grid.endEdit(true);\n        }\n        const eventKey = event && (event as any).key ? (event as any).key.toLowerCase() : null;\n        if (eventKey && this.isToggleKey(eventKey)) {\n            (this.grid as any).zone.onStable.pipe(debounceTime(30)).pipe(first()).subscribe(() => {\n                this.focusActiveCell(rowID);\n            });\n        }\n    }\n\n    public get_rec_by_id(rowID) {\n        return  this.grid.primaryKey ? this.getRowData(rowID) : rowID;\n    }\n\n    public allow_expansion_state_change(rowID, expanded) {\n        return this.grid.expansionStates.get(rowID) !== expanded;\n    }\n\n    private isToggleKey(key: string): boolean {\n        return ROW_COLLAPSE_KEYS.has(key) || ROW_EXPAND_KEYS.has(key);\n    }\n\n    private focusActiveCell(rowID) {\n        // persist focused cell\n        const isVirtualized = !this.grid.verticalScrollContainer.dc.instance.notVirtual;\n        const el = this.grid.selectionService.activeElement;\n        if (isVirtualized && el) {\n            const cell = this.get_cell_by_key(rowID, this.grid.visibleColumns[el.column].field);\n            if (cell) {\n                cell.nativeElement.focus();\n            }\n        }\n    }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DataUtil } from '../../data-operations/data-util';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxTreeGridComponent } from './tree-grid.component';\nimport { BaseFilteringStrategy, IFilteringStrategy } from '../../data-operations/filtering-strategy';\nimport { IFilteringExpressionsTree, FilteringExpressionsTree } from '../../data-operations/filtering-expressions-tree';\nimport { IFilteringState } from '../../data-operations/filtering-state.interface';\nimport { ITreeGridRecord } from './tree-grid.interfaces';\nimport { IgxTreeGridAPIService } from './tree-grid-api.service';\nimport { IgxGridBaseDirective } from '../grid';\nimport { GridType } from '../common/grid.interface';\n\n/** @hidden */\nexport class TreeGridFilteringStrategy extends BaseFilteringStrategy {\n    public filter(data: ITreeGridRecord[], expressionsTree: IFilteringExpressionsTree,\n        advancedExpressionsTree?: IFilteringExpressionsTree): ITreeGridRecord[] {\n        return this.filterImpl(data, expressionsTree, advancedExpressionsTree, undefined);\n    }\n\n    private filterImpl(data: ITreeGridRecord[], expressionsTree: IFilteringExpressionsTree,\n        advancedExpressionsTree: IFilteringExpressionsTree, parent: ITreeGridRecord): ITreeGridRecord[] {\n        let i: number;\n        let rec: ITreeGridRecord;\n        const len = data.length;\n        const res: ITreeGridRecord[] = [];\n        if ((FilteringExpressionsTree.empty(expressionsTree) && FilteringExpressionsTree.empty(advancedExpressionsTree)) || !len) {\n            return data;\n        }\n        for (i = 0; i < len; i++) {\n            rec = DataUtil.cloneTreeGridRecord(data[i]);\n            rec.parent = parent;\n            if (rec.children) {\n                const filteredChildren = this.filterImpl(rec.children, expressionsTree, advancedExpressionsTree, rec);\n                rec.children = filteredChildren.length > 0 ? filteredChildren : null;\n            }\n\n            if (this.matchRecord(rec, expressionsTree) && this.matchRecord(rec, advancedExpressionsTree)) {\n                res.push(rec);\n            } else if (rec.children && rec.children.length > 0) {\n                rec.isFilteredOutParent = true;\n                res.push(rec);\n            }\n        }\n        return res;\n    }\n\n    protected getFieldValue(rec: object, fieldName: string): any {\n        const hierarchicalRecord = <ITreeGridRecord>rec;\n        return hierarchicalRecord.data[fieldName];\n    }\n}\n\n/** @hidden */\n@Pipe({\n    name: 'treeGridFiltering',\n    pure: true\n})\nexport class IgxTreeGridFilteringPipe implements PipeTransform {\n    private gridAPI: IgxTreeGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxTreeGridAPIService>gridAPI;\n     }\n\n    public transform(hierarchyData: ITreeGridRecord[], expressionsTree: IFilteringExpressionsTree,\n        filterStrategy: IFilteringStrategy,\n        advancedFilteringExpressionsTree: IFilteringExpressionsTree, id: string,\n        pipeTrigger: number, filteringPipeTrigger: number): ITreeGridRecord[] {\n        const grid: IgxTreeGridComponent = this.gridAPI.grid;\n        const state: IFilteringState = {\n            expressionsTree: expressionsTree,\n            advancedExpressionsTree: advancedFilteringExpressionsTree,\n            strategy: new TreeGridFilteringStrategy()\n        };\n\n        if (filterStrategy) {\n            state.strategy = filterStrategy;\n        }\n\n        this.resetFilteredOutProperty(grid.records);\n\n        if (FilteringExpressionsTree.empty(state.expressionsTree) && FilteringExpressionsTree.empty(state.advancedExpressionsTree)) {\n            grid.filteredData = null;\n            return hierarchyData;\n        }\n\n        const result = this.filter(hierarchyData, state);\n        const filteredData: any[] = [];\n        this.expandAllRecursive(grid, result, grid.expansionStates, filteredData);\n        grid.filteredData = filteredData;\n\n        return result;\n    }\n\n    private resetFilteredOutProperty(map: Map<any, ITreeGridRecord>) {\n        const keys = Array.from(map.keys());\n        for (let i = 0; i < keys.length; i++) {\n            map.get(keys[i]).isFilteredOutParent = undefined;\n        }\n    }\n\n    private expandAllRecursive(grid: IgxTreeGridComponent, data: ITreeGridRecord[],\n        expandedStates: Map<any, boolean>, filteredData: any[]) {\n        for (let i = 0; i < data.length; i++) {\n            const rec = data[i];\n            filteredData.push(rec.data);\n            this.updateNonProcessedRecord(grid, rec);\n\n            if (rec.children && rec.children.length > 0) {\n                expandedStates.set(rec.rowID, true);\n                this.expandAllRecursive(grid, rec.children, expandedStates, filteredData);\n            }\n        }\n    }\n\n    private updateNonProcessedRecord(grid: IgxTreeGridComponent, record: ITreeGridRecord) {\n        const rec = grid.records.get(record.rowID);\n        rec.isFilteredOutParent = record.isFilteredOutParent;\n    }\n\n    private filter(data: ITreeGridRecord[], state: IFilteringState): ITreeGridRecord[] {\n        return state.strategy.filter(data, state.expressionsTree, state.advancedExpressionsTree);\n    }\n}\n","import { EventEmitter } from '@angular/core';\n\nimport { cloneValue, IBaseEventArgs } from '../../core/utils';\nimport { DataUtil } from '../../data-operations/data-util';\n\nimport { ExportUtilities } from './export-utilities';\nimport { IgxExporterOptionsBase } from './exporter-options-base';\nimport { ITreeGridRecord } from '../../grids/tree-grid/tree-grid.interfaces';\nimport { TreeGridFilteringStrategy } from '../../grids/tree-grid/tree-grid.filtering.pipe';\n\n/**\n * onRowExport event arguments\n * this.exporterService.onRowExport.subscribe((args: IRowExportingEventArgs) => {\n * // set args properties here\n * })\n */\nexport interface IRowExportingEventArgs extends IBaseEventArgs {\n    /**\n     * Contains the exporting row data\n     */\n    rowData: any;\n\n    /**\n     * Contains the exporting row index\n     */\n    rowIndex: number;\n\n    /**\n     * Skip the exporting row when set to true\n     */\n    cancel: boolean;\n}\n\n/**\n    * onColumnExport event arguments\n    * ```typescript\n    * this.exporterService.onColumnExport.subscribe((args: IColumnExportingEventArgs) => {\n    * // set args properties here\n    * });\n    * ```\n    */\nexport interface IColumnExportingEventArgs extends IBaseEventArgs {\n    /**\n     * Contains the exporting column header\n     */\n    header: string;\n\n    /**\n     * Contains the exporting column field name\n     */\n    field: string;\n\n    /**\n     * Contains the exporting column index\n     */\n    columnIndex: number;\n\n    /**\n     * Skip the exporting column when set to true\n     */\n    cancel: boolean;\n\n    /**\n     * Export the column's data without applying its formatter, when set to true\n     */\n    skipFormatter: boolean;\n}\n\nexport abstract class IgxBaseExporter {\n    private _columnList: any[];\n    private flatRecords = [];\n\n    protected _isTreeGrid = false;\n    protected _indexOfLastPinnedColumn = -1;\n    protected _sort = null;\n\n    /**\n     * This event is emitted when a row is exported.\n     * ```typescript\n     * this.exporterService.onRowExport.subscribe((args: IRowExportingEventArgs) => {\n     * // put event handler code here\n     * });\n     * ```\n     * @memberof IgxBaseExporter\n     */\n    public onRowExport = new EventEmitter<IRowExportingEventArgs>();\n\n    /**\n     * This event is emitted when a column is exported.\n     * ```typescript\n     * this.exporterService.onColumnExport.subscribe((args: IColumnExportingEventArgs) => {\n     * // put event handler code here\n     * });\n     * ```\n     * @memberof IgxBaseExporter\n     */\n    public onColumnExport = new EventEmitter<IColumnExportingEventArgs>();\n\n    /**\n     * Method for exporting IgxGrid component's data.\n     * ```typescript\n     * this.exporterService.export(this.igxGridForExport, this.exportOptions);\n     * ```\n     * @memberof IgxBaseExporter\n     */\n    public export(grid: any, options: IgxExporterOptionsBase): void {\n        if (options === undefined || options === null) {\n            throw Error('No options provided!');\n        }\n\n        const columns = grid.columnList.toArray();\n        this._columnList = new Array<any>(columns.length);\n\n        const hiddenColumns = [];\n        let lastVisbleColumnIndex = -1;\n\n        columns.forEach((column) => {\n            const columnHeader = column.header !== '' ? column.header : column.field;\n            const exportColumn = !column.hidden || options.ignoreColumnsVisibility;\n            const index = options.ignoreColumnsOrder ? column.index : column.visibleIndex;\n\n            const columnInfo = {\n                header: columnHeader,\n                field: column.field,\n                skip: !exportColumn,\n                formatter: column.formatter,\n                skipFormatter: false\n            };\n\n            if (index !== -1) {\n                this._columnList[index] = columnInfo;\n                lastVisbleColumnIndex = Math.max(lastVisbleColumnIndex, index);\n            } else {\n                hiddenColumns.push(columnInfo);\n            }\n\n            if (column.pinned && exportColumn) {\n                this._indexOfLastPinnedColumn++;\n            }\n        });\n\n        // Append the hidden columns to the end of the list\n        hiddenColumns.forEach((hiddenColumn) => {\n            this._columnList[++lastVisbleColumnIndex] = hiddenColumn;\n        });\n\n        const data = this.prepareData(grid, options);\n        this.exportData(data, options);\n    }\n\n    /**\n     * Method for exporting any kind of array data.\n     * ```typescript\n     * this.exporterService.exportData(this.arrayForExport, this.exportOptions);\n     * ```\n     * @memberof IgxBaseExporter\n     */\n    public exportData(data: any[], options: IgxExporterOptionsBase): void {\n        if (options === undefined || options === null) {\n            throw Error('No options provided!');\n        }\n\n        if (!this._columnList || this._columnList.length === 0) {\n            const keys = ExportUtilities.getKeysFromData(data);\n            this._columnList = keys.map((k) => ({ header: k, field: k, skip: false }));\n        }\n\n        let skippedPinnedColumnsCount = 0;\n        let columnsWithoutHeaderCount = 1;\n        this._columnList.forEach((column, index) => {\n            if (!column.skip) {\n                const columnExportArgs = {\n                    header: ExportUtilities.isNullOrWhitespaces(column.header) ?\n                        'Column' + columnsWithoutHeaderCount++ : column.header,\n                    field: column.field,\n                    columnIndex: index,\n                    cancel: false,\n                    skipFormatter: false\n                };\n                this.onColumnExport.emit(columnExportArgs);\n\n                column.header = columnExportArgs.header;\n                column.skip = columnExportArgs.cancel;\n                column.skipFormatter = columnExportArgs.skipFormatter;\n\n                if (column.skip && index <= this._indexOfLastPinnedColumn) {\n                    skippedPinnedColumnsCount++;\n                }\n\n                if (this._sort && this._sort.fieldName === column.field) {\n                    if (column.skip) {\n                        this._sort = null;\n                    } else {\n                        this._sort.fieldName = column.header;\n                    }\n                }\n            }\n        });\n\n        this._indexOfLastPinnedColumn -= skippedPinnedColumnsCount;\n\n        const dataToExport = new Array<any>();\n        const isSpecialData = ExportUtilities.isSpecialData(data);\n\n        data.forEach((row, index) => {\n            this.exportRow(dataToExport, row, index, isSpecialData);\n        });\n\n        this.exportDataImplementation(dataToExport, options);\n        this.resetDefaults();\n    }\n\n    protected abstract exportDataImplementation(data: any[], options: IgxExporterOptionsBase): void;\n\n    private exportRow(data: any[], rowData: any, index: number, isSpecialData: boolean) {\n        let row;\n\n        if (!isSpecialData) {\n            row = this._columnList.reduce((a, e) => {\n                if (!e.skip) {\n                    const rawValue = this._isTreeGrid ? rowData.data[e.field] : rowData[e.field];\n                    a[e.header] = e.formatter && !e.skipFormatter ? e.formatter(rawValue) : rawValue;\n                }\n                return a;\n            }, {});\n        } else {\n            row = this._isTreeGrid ? rowData.data : rowData;\n        }\n\n        const rowArgs = {\n            rowData: row,\n            rowIndex: index,\n            cancel: false\n        };\n        this.onRowExport.emit(rowArgs);\n\n        if (!rowArgs.cancel) {\n            data.push({ rowData: rowArgs.rowData, originalRowData: rowData });\n        }\n    }\n\n    private prepareData(grid: any, options: IgxExporterOptionsBase): any[] {\n        this.flatRecords = [];\n        let rootRecords = grid.rootRecords;\n        this._isTreeGrid = rootRecords !== undefined;\n\n        if (this._isTreeGrid) {\n            this.prepareHierarchicalData(rootRecords);\n        }\n\n        let data = this._isTreeGrid ? this.flatRecords : grid.data;\n\n        if (((grid.filteringExpressionsTree &&\n            grid.filteringExpressionsTree.filteringOperands.length > 0) ||\n            (grid.advancedFilteringExpressionsTree &&\n            grid.advancedFilteringExpressionsTree.filteringOperands.length > 0)) &&\n            !options.ignoreFiltering) {\n            const filteringState: any = {\n                expressionsTree: grid.filteringExpressionsTree,\n                advancedExpressionsTree: grid.advancedFilteringExpressionsTree,\n                logic: grid.filteringLogic\n            };\n\n            if (this._isTreeGrid) {\n                this.flatRecords = [];\n                filteringState.strategy = (grid.filterStrategy) ? grid.filterStrategy : new TreeGridFilteringStrategy();\n                rootRecords = filteringState.strategy.filter(rootRecords,\n                    filteringState.expressionsTree, filteringState.advancedExpressionsTree);\n                this.prepareHierarchicalData(rootRecords);\n                data = this.flatRecords;\n            } else {\n                filteringState.strategy = grid.filterStrategy;\n                data = DataUtil.filter(data, filteringState);\n            }\n        }\n\n        if (grid.sortingExpressions &&\n            grid.sortingExpressions.length > 0 &&\n            !options.ignoreSorting) {\n            this._sort = cloneValue(grid.sortingExpressions[0]);\n\n            if (this._isTreeGrid) {\n                this.flatRecords = [];\n                rootRecords = DataUtil.treeGridSort(rootRecords, grid.sortingExpressions, grid.sortStrategy);\n                this.prepareHierarchicalData(rootRecords);\n                data = this.flatRecords;\n            } else {\n                data = DataUtil.sort(data, grid.sortingExpressions, grid.sortStrategy);\n            }\n        }\n\n        return data;\n    }\n\n    private prepareHierarchicalData(records: ITreeGridRecord[]) {\n        if (!records) {\n            return;\n        }\n        for (let i = 0; i < records.length; i++) {\n            const hierarchicalRecord = records[i];\n\n            this.flatRecords.push(hierarchicalRecord);\n            this.prepareHierarchicalData(hierarchicalRecord.children);\n        }\n    }\n\n    private resetDefaults() {\n        this._columnList = [];\n        this._indexOfLastPinnedColumn = -1;\n        this._sort = null;\n        this.flatRecords = [];\n    }\n}\n","import { ExportUtilities } from '../exporter-common/export-utilities';\n\n/**\n * @hidden\n */\nexport class CharSeparatedValueData {\n    private _headerRecord = '';\n    private _dataRecords = '';\n    private _eor = '\\r\\n';\n    private _delimiter;\n    private _escapeCharacters = ['\\r', '\\n', '\\r\\n'];\n    private _delimiterLength = 1;\n    private _isSpecialData = false;\n\n    constructor(private _data: any[], valueDelimiter: string)  {\n        this.setDelimiter(valueDelimiter);\n    }\n\n    public prepareData() {\n        if (!this._data || this._data.length === 0) {\n            return '';\n        }\n\n        const keys = ExportUtilities.getKeysFromData(this._data);\n\n        if (keys.length === 0) {\n            return '';\n        }\n\n        this._isSpecialData = ExportUtilities.isSpecialData(this._data);\n        this._escapeCharacters.push(this._delimiter);\n\n        this._headerRecord = this.processHeaderRecord(keys, this._escapeCharacters);\n        this._dataRecords = this.processDataRecords(this._data, keys, this._escapeCharacters);\n\n        return this._headerRecord + this._dataRecords;\n    }\n\n    private processField(value, escapeChars): string {\n        let safeValue = ExportUtilities.hasValue(value) ? String(value) : '';\n        if (escapeChars.some((v) => safeValue.includes(v))) {\n            safeValue = `\"${safeValue}\"`;\n        }\n        return safeValue + this._delimiter;\n    }\n\n    private processHeaderRecord(keys, escapeChars): string {\n        let recordData = '';\n        for (const keyName of keys) {\n            recordData += this.processField(keyName, this._escapeCharacters);\n        }\n\n        return recordData.slice(0, -this._delimiterLength) + this._eor;\n    }\n\n    private processRecord(record, keys, escapeChars): string {\n        let recordData = '';\n        for (const keyName of keys) {\n\n            const value = (record[keyName] !== undefined) ? record[keyName] : this._isSpecialData ? record : '';\n            recordData += this.processField(value, this._escapeCharacters);\n        }\n\n        return recordData.slice(0, -this._delimiterLength) + this._eor;\n    }\n\n    private processDataRecords(currentData, keys, escapeChars) {\n        let dataRecords = '';\n        for (const row of currentData) {\n            dataRecords += this.processRecord(row, keys, escapeChars);\n        }\n\n        return dataRecords;\n    }\n\n    private setDelimiter(value) {\n        this._delimiter = value;\n        this._delimiterLength = value.length;\n    }\n}\n","export abstract class IgxExporterOptionsBase {\n    private _fileName: string;\n\n    /**\n     * Specifies whether hidden columns should be exported.\n     * ```typescript\n     * let ignoreColumnsVisibility = this.exportOptions.ignoreColumnsVisibility;\n     * this.exportOptions.ignoreColumnsVisibility = true;\n     * ```\n     * @memberof IgxExporterOptionsBase\n     */\n    public ignoreColumnsVisibility = false;\n\n    /**\n     * Specifies whether filtered out rows should be exported.\n     * ```typescript\n     * let ignoreFiltering = this.exportOptions.ignoreFiltering;\n     * this.exportOptions.ignoreFiltering = true;\n     * ```\n     * @memberof IgxExporterOptionsBase\n     */\n    public ignoreFiltering = false;\n\n    /**\n     * Specifies if the exporter should ignore the current column order in the IgxGrid.\n     * ```typescript\n     * let ignoreColumnsOrder = this.exportOptions.ignoreColumnsOrder;\n     * this.exportOptions.ignoreColumnsOrder = true;\n     * ```\n     * @memberof IgxExporterOptionsBase\n     */\n    public ignoreColumnsOrder = false;\n\n    /**\n     * Specifies whether the exported data should be sorted as in the provided IgxGrid.\n     * ```typescript\n     * let ignoreSorting = this.exportOptions.ignoreSorting;\n     * this.exportOptions.ignoreSorting = true;\n     * ```\n     * @memberof IgxExporterOptionsBase\n     */\n    public ignoreSorting = false;\n\n    constructor(fileName: string, protected _fileExtension: string) {\n        this.setFileName(fileName);\n    }\n\n    private setFileName(fileName: string): void {\n        this._fileName = fileName + (fileName.endsWith(this._fileExtension) === false ? this._fileExtension : '');\n    }\n\n    /**\n     * Gets the file name which will be used for the exporting operation.\n     * ```typescript\n     * let fileName = this.exportOptions.fileName;\n     * ```\n     * @memberof IgxExporterOptionsBase\n     */\n    get fileName() {\n        return this._fileName;\n    }\n\n    /**\n     * Sets the file name which will be used for the exporting operation.\n     * ```typescript\n     * this.exportOptions.fileName = 'exportedData01';\n     * ```\n     * @memberof IgxExporterOptionsBase\n     */\n    set fileName(value) {\n        this.setFileName(value);\n    }\n\n}\n","import { EventEmitter, Injectable, Output } from '@angular/core';\nimport { IgxBaseExporter } from '../exporter-common/base-export-service';\nimport { ExportUtilities } from '../exporter-common/export-utilities';\nimport { CharSeparatedValueData } from './char-separated-value-data';\nimport { CsvFileTypes, IgxCsvExporterOptions } from './csv-exporter-options';\nimport { IBaseEventArgs } from '../../core/utils';\n\nexport interface ICsvExportEndedEventArgs extends IBaseEventArgs {\n    csvData: string;\n}\n\n/**\n * **Ignite UI for Angular CSV Exporter Service** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/exporter_csv.html)\n *\n * The Ignite UI for Angular CSV Exporter service can export data in a Character Separated Values format from\n * both raw data (array) or from an `IgxGrid`.\n *\n * Example:\n * ```typescript\n * public localData = [\n *   { Name: \"Eric Ridley\", Age: \"26\" },\n *   { Name: \"Alanis Brook\", Age: \"22\" },\n *   { Name: \"Jonathan Morris\", Age: \"23\" }\n * ];\n *\n * constructor(private csvExportService: IgxCsvExporterService) {\n * }\n *\n * const opt: IgxCsvExporterOptions = new IgxCsvExporterOptions(\"FileName\", CsvFileTypes.CSV);\n * this.csvExportService.exportData(this.localData, opt);\n * ```\n */\n@Injectable()\nexport class IgxCsvExporterService extends IgxBaseExporter {\n    private _stringData: string;\n\n    /**\n     * This event is emitted when the export process finishes.\n     * ```typescript\n     * this.exporterService.onExportEnded.subscribe((args: ICsvExportEndedEventArgs) => {\n     * // put event handler code here\n     * });\n     * ```\n     * @memberof IgxCsvExporterService\n     */\n    @Output()\n    public onExportEnded = new EventEmitter<ICsvExportEndedEventArgs>();\n\n    protected exportDataImplementation(data: any[], options: IgxCsvExporterOptions) {\n        data = data.map((item) => item.rowData);\n        const csvData = new CharSeparatedValueData(data, options.valueDelimiter);\n        this._stringData = csvData.prepareData();\n\n        this.saveFile(options);\n        this.onExportEnded.emit({ csvData: this._stringData });\n    }\n\n    private saveFile(options: IgxCsvExporterOptions) {\n        switch (options.fileType) {\n            case CsvFileTypes.CSV:\n                this.exportFile(this._stringData, options.fileName, 'text/csv;charset=utf-8;');\n                break;\n            case CsvFileTypes.TSV:\n            case CsvFileTypes.TAB:\n                this.exportFile(this._stringData, options.fileName, 'text/tab-separated-values;charset=utf-8;');\n                break;\n        }\n    }\n\n    private exportFile(data: string, fileName: string, fileType: string): void {\n        const blob = new Blob(['\\ufeff', data], { type: fileType });\n        ExportUtilities.saveBlobToFile(blob, fileName);\n    }\n}\n","/**\n * @hidden\n */\nexport enum ExcelFolderTypes {\n    RootExcelFolder,\n    RootRelsExcelFolder,\n    DocPropsExcelFolder,\n    XLExcelFolder,\n    XLRelsExcelFolder,\n    ThemeExcelFolder,\n    WorksheetsExcelFolder,\n    WorksheetsRelsExcelFolder,\n    TablesExcelFolder\n}\n/**\n * @hidden\n */\nexport enum ExcelFileTypes {\n    RootRelsFile,\n    AppFile,\n    CoreFile,\n    WorkbookRelsFile,\n    ThemeFile,\n    WorksheetFile,\n    StyleFile,\n    WorkbookFile,\n    ContentTypesFile,\n    SharedStringsFile,\n    WorksheetRelsFile,\n    TablesFile\n}\n","/** @hidden */\nexport class ExcelStrings {\n    /* tslint:disable max-line-length */\n    private static XML_STRING = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\r\\n';\n    private static SHARED_STRING_RELATIONSHIP = '<Relationship Id=\"rId4\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings\" Target=\"sharedStrings.xml\" />';\n\n    public static getRels(): string {\n        return ExcelStrings.XML_STRING + '<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\"><Relationship Id=\"rId3\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties\" Target=\"docProps/app.xml\"/><Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties\" Target=\"docProps/core.xml\"/><Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument\" Target=\"xl/workbook.xml\"/></Relationships>';\n    }\n\n    public static getApp(): string {\n        return ExcelStrings.XML_STRING + '<Properties xmlns=\"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties\" xmlns:vt=\"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes\"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size=\"2\" baseType=\"variant\"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>1</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size=\"1\" baseType=\"lpstr\"><vt:lpstr>Sheet1</vt:lpstr></vt:vector></TitlesOfParts><Company></Company><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>16.0300</AppVersion></Properties>';\n    }\n\n    public static getCore(): string {\n        return ExcelStrings.XML_STRING + '<cp:coreProperties xmlns:cp=\"http://schemas.openxmlformats.org/package/2006/metadata/core-properties\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:dcterms=\"http://purl.org/dc/terms/\" xmlns:dcmitype=\"http://purl.org/dc/dcmitype/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><dc:creator></dc:creator><cp:lastModifiedBy></cp:lastModifiedBy><dcterms:created xsi:type=\"dcterms:W3CDTF\">2015-06-05T18:17:20Z</dcterms:created><dcterms:modified xsi:type=\"dcterms:W3CDTF\">2015-06-05T18:17:26Z</dcterms:modified></cp:coreProperties>';\n    }\n\n    public static getTheme(): string {\n        return ExcelStrings.XML_STRING + '<a:theme xmlns:a=\"http://schemas.openxmlformats.org/drawingml/2006/main\" name=\"Office Theme\"><a:themeElements><a:clrScheme name=\"Office\"><a:dk1><a:sysClr val=\"windowText\" lastClr=\"000000\"/></a:dk1><a:lt1><a:sysClr val=\"window\" lastClr=\"FFFFFF\"/></a:lt1><a:dk2><a:srgbClr val=\"44546A\"/></a:dk2><a:lt2><a:srgbClr val=\"E7E6E6\"/></a:lt2><a:accent1><a:srgbClr val=\"5B9BD5\"/></a:accent1><a:accent2><a:srgbClr val=\"ED7D31\"/></a:accent2><a:accent3><a:srgbClr val=\"A5A5A5\"/></a:accent3><a:accent4><a:srgbClr val=\"FFC000\"/></a:accent4><a:accent5><a:srgbClr val=\"4472C4\"/></a:accent5><a:accent6><a:srgbClr val=\"70AD47\"/></a:accent6><a:hlink><a:srgbClr val=\"0563C1\"/></a:hlink><a:folHlink><a:srgbClr val=\"954F72\"/></a:folHlink></a:clrScheme><a:fontScheme name=\"Office\"><a:majorFont><a:latin typeface=\"Calibri Light\" panose=\"020F0302020204030204\"/><a:ea typeface=\"\"/><a:cs typeface=\"\"/><a:font script=\"Jpan\" typeface=\" Light\"/><a:font script=\"Hang\" typeface=\" \"/><a:font script=\"Hans\" typeface=\" Light\"/><a:font script=\"Hant\" typeface=\"\"/><a:font script=\"Arab\" typeface=\"Times New Roman\"/><a:font script=\"Hebr\" typeface=\"Times New Roman\"/><a:font script=\"Thai\" typeface=\"Tahoma\"/><a:font script=\"Ethi\" typeface=\"Nyala\"/><a:font script=\"Beng\" typeface=\"Vrinda\"/><a:font script=\"Gujr\" typeface=\"Shruti\"/><a:font script=\"Khmr\" typeface=\"MoolBoran\"/><a:font script=\"Knda\" typeface=\"Tunga\"/><a:font script=\"Guru\" typeface=\"Raavi\"/><a:font script=\"Cans\" typeface=\"Euphemia\"/><a:font script=\"Cher\" typeface=\"Plantagenet Cherokee\"/><a:font script=\"Yiii\" typeface=\"Microsoft Yi Baiti\"/><a:font script=\"Tibt\" typeface=\"Microsoft Himalaya\"/><a:font script=\"Thaa\" typeface=\"MV Boli\"/><a:font script=\"Deva\" typeface=\"Mangal\"/><a:font script=\"Telu\" typeface=\"Gautami\"/><a:font script=\"Taml\" typeface=\"Latha\"/><a:font script=\"Syrc\" typeface=\"Estrangelo Edessa\"/><a:font script=\"Orya\" typeface=\"Kalinga\"/><a:font script=\"Mlym\" typeface=\"Kartika\"/><a:font script=\"Laoo\" typeface=\"DokChampa\"/><a:font script=\"Sinh\" typeface=\"Iskoola Pota\"/><a:font script=\"Mong\" typeface=\"Mongolian Baiti\"/><a:font script=\"Viet\" typeface=\"Times New Roman\"/><a:font script=\"Uigh\" typeface=\"Microsoft Uighur\"/><a:font script=\"Geor\" typeface=\"Sylfaen\"/></a:majorFont><a:minorFont><a:latin typeface=\"Calibri\" panose=\"020F0502020204030204\"/><a:ea typeface=\"\"/><a:cs typeface=\"\"/><a:font script=\"Jpan\" typeface=\"\"/><a:font script=\"Hang\" typeface=\" \"/><a:font script=\"Hans\" typeface=\"\"/><a:font script=\"Hant\" typeface=\"\"/><a:font script=\"Arab\" typeface=\"Arial\"/><a:font script=\"Hebr\" typeface=\"Arial\"/><a:font script=\"Thai\" typeface=\"Tahoma\"/><a:font script=\"Ethi\" typeface=\"Nyala\"/><a:font script=\"Beng\" typeface=\"Vrinda\"/><a:font script=\"Gujr\" typeface=\"Shruti\"/><a:font script=\"Khmr\" typeface=\"DaunPenh\"/><a:font script=\"Knda\" typeface=\"Tunga\"/><a:font script=\"Guru\" typeface=\"Raavi\"/><a:font script=\"Cans\" typeface=\"Euphemia\"/><a:font script=\"Cher\" typeface=\"Plantagenet Cherokee\"/><a:font script=\"Yiii\" typeface=\"Microsoft Yi Baiti\"/><a:font script=\"Tibt\" typeface=\"Microsoft Himalaya\"/><a:font script=\"Thaa\" typeface=\"MV Boli\"/><a:font script=\"Deva\" typeface=\"Mangal\"/><a:font script=\"Telu\" typeface=\"Gautami\"/><a:font script=\"Taml\" typeface=\"Latha\"/><a:font script=\"Syrc\" typeface=\"Estrangelo Edessa\"/><a:font script=\"Orya\" typeface=\"Kalinga\"/><a:font script=\"Mlym\" typeface=\"Kartika\"/><a:font script=\"Laoo\" typeface=\"DokChampa\"/><a:font script=\"Sinh\" typeface=\"Iskoola Pota\"/><a:font script=\"Mong\" typeface=\"Mongolian Baiti\"/><a:font script=\"Viet\" typeface=\"Arial\"/><a:font script=\"Uigh\" typeface=\"Microsoft Uighur\"/><a:font script=\"Geor\" typeface=\"Sylfaen\"/></a:minorFont></a:fontScheme><a:fmtScheme name=\"Office\"><a:fillStyleLst><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:gradFill rotWithShape=\"1\"><a:gsLst><a:gs pos=\"0\"><a:schemeClr val=\"phClr\"><a:lumMod val=\"110000\"/><a:satMod val=\"105000\"/><a:tint val=\"67000\"/></a:schemeClr></a:gs><a:gs pos=\"50000\"><a:schemeClr val=\"phClr\"><a:lumMod val=\"105000\"/><a:satMod val=\"103000\"/><a:tint val=\"73000\"/></a:schemeClr></a:gs><a:gs pos=\"100000\"><a:schemeClr val=\"phClr\"><a:lumMod val=\"105000\"/><a:satMod val=\"109000\"/><a:tint val=\"81000\"/></a:schemeClr></a:gs></a:gsLst><a:lin ang=\"5400000\" scaled=\"0\"/></a:gradFill><a:gradFill rotWithShape=\"1\"><a:gsLst><a:gs pos=\"0\"><a:schemeClr val=\"phClr\"><a:satMod val=\"103000\"/><a:lumMod val=\"102000\"/><a:tint val=\"94000\"/></a:schemeClr></a:gs><a:gs pos=\"50000\"><a:schemeClr val=\"phClr\"><a:satMod val=\"110000\"/><a:lumMod val=\"100000\"/><a:shade val=\"100000\"/></a:schemeClr></a:gs><a:gs pos=\"100000\"><a:schemeClr val=\"phClr\"><a:lumMod val=\"99000\"/><a:satMod val=\"120000\"/><a:shade val=\"78000\"/></a:schemeClr></a:gs></a:gsLst><a:lin ang=\"5400000\" scaled=\"0\"/></a:gradFill></a:fillStyleLst><a:lnStyleLst><a:ln w=\"6350\" cap=\"flat\" cmpd=\"sng\" algn=\"ctr\"><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:prstDash val=\"solid\"/><a:miter lim=\"800000\"/></a:ln><a:ln w=\"12700\" cap=\"flat\" cmpd=\"sng\" algn=\"ctr\"><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:prstDash val=\"solid\"/><a:miter lim=\"800000\"/></a:ln><a:ln w=\"19050\" cap=\"flat\" cmpd=\"sng\" algn=\"ctr\"><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:prstDash val=\"solid\"/><a:miter lim=\"800000\"/></a:ln></a:lnStyleLst><a:effectStyleLst><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad=\"57150\" dist=\"19050\" dir=\"5400000\" algn=\"ctr\" rotWithShape=\"0\"><a:srgbClr val=\"000000\"><a:alpha val=\"63000\"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle></a:effectStyleLst><a:bgFillStyleLst><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:solidFill><a:schemeClr val=\"phClr\"><a:tint val=\"95000\"/><a:satMod val=\"170000\"/></a:schemeClr></a:solidFill><a:gradFill rotWithShape=\"1\"><a:gsLst><a:gs pos=\"0\"><a:schemeClr val=\"phClr\"><a:tint val=\"93000\"/><a:satMod val=\"150000\"/><a:shade val=\"98000\"/><a:lumMod val=\"102000\"/></a:schemeClr></a:gs><a:gs pos=\"50000\"><a:schemeClr val=\"phClr\"><a:tint val=\"98000\"/><a:satMod val=\"130000\"/><a:shade val=\"90000\"/><a:lumMod val=\"103000\"/></a:schemeClr></a:gs><a:gs pos=\"100000\"><a:schemeClr val=\"phClr\"><a:shade val=\"63000\"/><a:satMod val=\"120000\"/></a:schemeClr></a:gs></a:gsLst><a:lin ang=\"5400000\" scaled=\"0\"/></a:gradFill></a:bgFillStyleLst></a:fmtScheme></a:themeElements><a:objectDefaults/><a:extraClrSchemeLst/><a:extLst><a:ext uri=\"{05A4C25C-085E-4340-85A3-A5531E510DB2}\"><thm15:themeFamily xmlns:thm15=\"http://schemas.microsoft.com/office/thememl/2012/main\" name=\"Office Theme\" id=\"{62F939B6-93AF-4DB8-9C6B-D6C7DFDC589F}\" vid=\"{4A3C46E8-61CC-4603-A589-7422A47A8E4A}\"/></a:ext></a:extLst></a:theme>';\n    }\n\n    public static getStyles(hasNonStringValues: boolean): string {\n        const additionalCellXF = '<xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\" xfId=\"0\" applyNumberFormat=\"1\"/>';\n        const cellXFCount = hasNonStringValues ? 2 : 1;\n        return ExcelStrings.XML_STRING + '<styleSheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" mc:Ignorable=\"x14ac x16r2\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\" xmlns:x16r2=\"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main\"><fonts count=\"1\" x14ac:knownFonts=\"1\"><font><sz val=\"11\"/><color theme=\"1\"/><name val=\"Calibri\"/><family val=\"2\"/><scheme val=\"minor\"/></font></fonts><fills count=\"2\"><fill><patternFill patternType=\"none\"/></fill><fill><patternFill patternType=\"gray125\"/></fill></fills><borders count=\"1\"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellStyleXfs count=\"1\"><xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\"/></cellStyleXfs><cellXfs count=\"' + cellXFCount + '\"><xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\" xfId=\"0\"/>' + additionalCellXF + '</cellXfs><cellStyles count=\"1\"><cellStyle name=\"Normal\" xfId=\"0\" builtinId=\"0\"/></cellStyles><dxfs count=\"0\"/><tableStyles count=\"0\" defaultTableStyle=\"TableStyleMedium2\" defaultPivotStyle=\"PivotStyleLight16\"/><extLst><ext uri=\"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}\" xmlns:x14=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\"><x14:slicerStyles defaultSlicerStyle=\"SlicerStyleLight1\"/></ext><ext uri=\"{9260A510-F301-46a8-8635-F512D64BE5F5}\" xmlns:x15=\"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main\"><x15:timelineStyles defaultTimelineStyle=\"TimeSlicerStyleLight1\"/></ext></extLst></styleSheet>';\n    }\n\n    public static getWorkbook(): string {\n        return ExcelStrings.XML_STRING + '<workbook xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" mc:Ignorable=\"x15\" xmlns:x15=\"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main\"><fileVersion appName=\"xl\" lastEdited=\"6\" lowestEdited=\"6\" rupBuild=\"14420\"/><workbookPr filterPrivacy=\"1\" defaultThemeVersion=\"164011\"/><bookViews><workbookView xWindow=\"0\" yWindow=\"0\" windowWidth=\"22260\" windowHeight=\"12645\"/></bookViews><sheets><sheet name=\"Sheet1\" sheetId=\"1\" r:id=\"rId1\"/></sheets><calcPr calcId=\"162913\"/><extLst><ext uri=\"{140A7094-0E35-4892-8432-C4D2E57EDEB5}\" xmlns:x15=\"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main\"><x15:workbookPr chartTrackingRefBase=\"1\"/></ext></extLst></workbook>';\n    }\n\n    public static getWorksheetRels(): string {\n        return ExcelStrings.XML_STRING + `<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\"><Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table\" Target=\"../tables/table1.xml\"/></Relationships>`;\n    }\n\n    public static getWorkbookRels(hasSharedStrings): string {\n        let retVal = ExcelStrings.XML_STRING + '<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\"><Relationship Id=\"rId3\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles\" Target=\"styles.xml\"/><Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme\" Target=\"theme/theme1.xml\"/><Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet\" Target=\"worksheets/sheet1.xml\"/>';\n\n        if (hasSharedStrings) {\n            retVal += ExcelStrings.SHARED_STRING_RELATIONSHIP;\n        }\n\n        retVal += '</Relationships>';\n\n        return retVal;\n    }\n\n    public static getSheetXML(dimension: string, freezePane: string, cols: string, sheetData: string, hasTable: boolean, hasGroupedRows = false, outlineLevel = 0): string {\n        const tableParts = hasTable ? '<tableParts count=\"1\"><tablePart r:id=\"rId1\"/></tableParts>' : '';\n        const sheetOutlineProp = hasGroupedRows ? '<sheetPr><outlinePr summaryBelow=\"0\"/></sheetPr>' : '';\n        const sOutlineLevel = outlineLevel > 0 ? `outlineLevelRow=\"${outlineLevel}\"` : '';\n        // return ExcelStrings.XML_STRING +\n        //     '<worksheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" mc:Ignorable=\"x14ac\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\"><dimension ref=\"' + dimension + '\"/><sheetViews><sheetView tabSelected=\"1\" workbookViewId=\"0\">' + freezePane + '</sheetView></sheetViews><sheetFormatPr defaultRowHeight=\"15\" x14ac:dyDescent=\"0.25\"/>' + cols + sheetData + '<pageMargins left=\"0.7\" right=\"0.7\" top=\"0.75\" bottom=\"0.75\" header=\"0.3\" footer=\"0.3\"/>' + tableParts + '</worksheet>';\n\n        return `${ExcelStrings.XML_STRING}\n<worksheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" mc:Ignorable=\"x14ac\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\">\n${sheetOutlineProp}\n<dimension ref=\"${dimension}\"/>\n<sheetViews><sheetView tabSelected=\"1\" workbookViewId=\"0\">${freezePane}</sheetView></sheetViews>\n<sheetFormatPr defaultRowHeight=\"15\" ${sOutlineLevel} x14ac:dyDescent=\"0.25\"/>\n${cols}\n${sheetData}\n<pageMargins left=\"0.7\" right=\"0.7\" top=\"0.75\" bottom=\"0.75\" header=\"0.3\" footer=\"0.3\"/>\n${tableParts}</worksheet>`;\n\n    }\n\n    public static getSharedStringXML(count: number, uniqueCount: number, table: string): string {\n        return ExcelStrings.XML_STRING + '<sst xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" count=\"' + count + '\" uniqueCount=\"' + uniqueCount + '\">' + table + '</sst>';\n    }\n\n    public static getContentTypesXML(hasSharedStrings: boolean, hasTable: boolean): string {\n        let contentTypes = ExcelStrings.XML_STRING +\n        `<Types xmlns=\"http://schemas.openxmlformats.org/package/2006/content-types\\\">\n            <Default Extension=\"rels\" ContentType=\"application/vnd.openxmlformats-package.relationships+xml\"/>\n            <Default Extension=\"xml\" ContentType=\"application/xml\"/>\n            <Override PartName=\"/xl/workbook.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml\"/>\n            <Override PartName=\"/xl/worksheets/sheet1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml\"/>\n            <Override PartName=\"/xl/theme/theme1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.theme+xml\"/>\n            <Override PartName=\"/xl/styles.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml\"/>\n            <Override PartName=\"/docProps/core.xml\" ContentType=\"application/vnd.openxmlformats-package.core-properties+xml\"/>\n            <Override PartName=\"/docProps/app.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.extended-properties+xml\"/>`;\n\n        contentTypes += hasSharedStrings ?\n        `\t<Override PartName=\"/xl/sharedStrings.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml\"/>` : '';\n\n        contentTypes += hasTable ?\n            `<Override PartName=\"/xl/tables/table1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml\"/>` : '';\n        contentTypes += `</Types>`;\n\n        return contentTypes;\n    }\n\n    public static getTablesXML(dimension: string, tableColumns: string, sort: string): string {\n        return `${ExcelStrings.XML_STRING}<table xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" id=\"1\" name=\"Table1\" displayName=\"Table1\" ref=\"${dimension}\" totalsRowShown=\"0\">\n    <autoFilter ref=\"${dimension}\"/>${sort}${tableColumns}<tableStyleInfo name=\"TableStyleMedium2\" showFirstColumn=\"0\" showLastColumn=\"0\" showRowStripes=\"1\" showColumnStripes=\"0\"/>\n</table>`;\n    }\n    /* tslint:enable max-line-length */\n\n    public static getExcelColumn(index: number): string {\n        // Returns the excel column name for given 0-based index\n        // For example 27 should return \"AB\"\n        let returnString = '';\n        while (index >= 0) {\n            const char = index % 26;\n            returnString = String.fromCharCode(65 + char) + returnString;\n            index = Math.floor(index / 26) - 1;\n        }\n        return returnString;\n    }\n}\n","import { IPositionStrategy } from './position/IPositionStrategy';\n\nimport { IScrollStrategy } from './scroll';\nimport { AnimationReferenceMetadata, AnimationPlayer } from '@angular/animations';\nimport { ComponentRef, ElementRef, NgZone } from '@angular/core';\nimport { IgxOverlayOutletDirective } from '../../directives/toggle/toggle.directive';\nimport { CancelableEventArgs, CancelableBrowserEventArgs, cloneValue, IBaseEventArgs } from '../../core/utils';\n\nexport enum HorizontalAlignment {\n    Left = -1,\n    Center = -0.5,\n    Right = 0\n}\n\nexport enum VerticalAlignment {\n    Top = -1,\n    Middle = -0.5,\n    Bottom = 0\n}\n\nexport class Point {\n    constructor(public x: number, public y: number) { }\n}\n\n/** @hidden */\nexport interface OutOfViewPort {\n    /** Out of view port at Top or Left */\n    back: number;\n    /** Out of view port at Bottom or Right */\n    forward: number;\n}\n\nexport interface PositionSettings {\n    /** Attaching target for the component to show */\n    target?: Point | HTMLElement;\n    /** Direction in which the component should show */\n    horizontalDirection?: HorizontalAlignment;\n    /** Direction in which the component should show */\n    verticalDirection?: VerticalAlignment;\n    /** Target's starting point */\n    horizontalStartPoint?: HorizontalAlignment;\n    /** Target's starting point */\n    verticalStartPoint?: VerticalAlignment;\n    /** Animation applied while overlay opens */\n    openAnimation?: AnimationReferenceMetadata;\n    /** Animation applied while overlay closes */\n    closeAnimation?: AnimationReferenceMetadata;\n    /** The size up to which element may shrink when shown in elastic position strategy */\n    minSize?: Size;\n}\n\nexport interface OverlaySettings {\n    /** Position strategy to use with this settings */\n    positionStrategy?: IPositionStrategy;\n    /** Scroll strategy to use with this settings */\n    scrollStrategy?: IScrollStrategy;\n    /** Set if the overlay should be in modal mode */\n    modal?: boolean;\n    /** Set if the overlay should closed on outside click */\n    closeOnOutsideClick?: boolean;\n    /** Set the outlet container to attach the overlay to */\n    outlet?: IgxOverlayOutletDirective | ElementRef;\n    /**\n     * @hidden @internal\n     * Exclude the position strategy target for outside clicks\n     */\n    excludePositionTarget?: boolean;\n}\n\nexport interface OverlayEventArgs extends IBaseEventArgs {\n    /** Id of the overlay generated with `attach()` method */\n    id: string;\n    /** Available when `Type<T>` is provided to the `attach()` method and allows access to the created Component instance */\n    componentRef?: ComponentRef<{}>;\n}\n\nexport interface OverlayCancelableEventArgs extends OverlayEventArgs, CancelableEventArgs {\n}\n\nexport interface OverlayClosingEventArgs extends OverlayEventArgs, CancelableBrowserEventArgs {\n}\n\nexport interface OverlayAnimationEventArgs extends IBaseEventArgs {\n    /** Id of the overlay generated with `attach()` method */\n    id: string;\n    /** Animation player that will play the animation */\n    animationPlayer: AnimationPlayer;\n    /** Type of animation to be played. It should be either 'open' or 'close' */\n    animationType: 'open' | 'close';\n}\n\nexport interface Size {\n    /** Gets or sets the horizontal component of Size */\n    width: number;\n\n    /** Gets or sets the vertical component of Size */\n    height: number;\n}\n\n/** @hidden */\nexport interface OverlayInfo {\n    id?: string;\n    elementRef?: ElementRef;\n    componentRef?: ComponentRef<{}>;\n    settings?: OverlaySettings;\n    initialSize?: Size;\n    hook?: HTMLElement;\n    openAnimationPlayer?: AnimationPlayer;\n    closeAnimationPlayer?: AnimationPlayer;\n    openAnimationInnerPlayer?: any;\n    closeAnimationInnerPlayer?: any;\n    ngZone: NgZone;\n    transformX?: number;\n    transformY?: number;\n}\n\n/** @hidden */\nexport interface ConnectedFit {\n    contentElementRect?: ClientRect;\n    targetRect?: ClientRect;\n    viewPortRect?: ClientRect;\n    fitHorizontal?: OutOfViewPort;\n    fitVertical?: OutOfViewPort;\n    left?: number;\n    right?: number;\n    top?: number;\n    bottom?: number;\n    horizontalOffset?: number;\n    verticalOffset?: number;\n}\n\n/** @hidden */\nexport class Util {\n    /**\n     * @hidden\n     * Calculates the rectangle of target for provided overlay settings. Defaults to 0,0,0,0,0,0 rectangle\n     * if no target is provided\n     * @param settings Overlay settings for which to calculate target rectangle\n     */\n    static getTargetRect(settings: PositionSettings): ClientRect {\n        let targetRect: ClientRect = {\n            bottom: 0,\n            height: 0,\n            left: 0,\n            right: 0,\n            top: 0,\n            width: 0\n        };\n\n        if (settings.target instanceof HTMLElement) {\n            targetRect = (settings.target as HTMLElement).getBoundingClientRect();\n        } else if (settings.target instanceof Point) {\n            const targetPoint = settings.target as Point;\n            targetRect = {\n                bottom: targetPoint.y,\n                height: 0,\n                left: targetPoint.x,\n                right: targetPoint.x,\n                top: targetPoint.y,\n                width: 0\n            };\n        }\n\n        return targetRect;\n    }\n\n    /** @hidden @internal */\n    static getViewportRect(document: Document): ClientRect {\n        const width = document.documentElement.clientWidth;\n        const height = document.documentElement.clientHeight;\n        const scrollPosition = Util.getViewportScrollPosition(document);\n\n        return {\n            top: scrollPosition.y,\n            left: scrollPosition.x,\n            right: scrollPosition.x + width,\n            bottom: scrollPosition.y + height,\n            width: width,\n            height: height,\n        };\n    }\n\n    /** @hidden @internal */\n    static getViewportScrollPosition(document: Document): Point {\n        const documentElement = document.documentElement;\n        const documentRect = documentElement.getBoundingClientRect();\n\n        const horizontalScrollPosition =\n            -documentRect.left || document.body.scrollLeft || window.scrollX || documentElement.scrollLeft || 0;\n        const verticalScrollPosition = -documentRect.top || document.body.scrollTop || window.scrollY || documentElement.scrollTop || 0;\n\n        return new Point(horizontalScrollPosition, verticalScrollPosition);\n    }\n\n    /** @hidden @internal*/\n    static cloneInstance(object) {\n        const clonedObj = Object.assign(Object.create(Object.getPrototypeOf(object)), object);\n        clonedObj.settings = cloneValue(clonedObj.settings);\n        return clonedObj;\n    }\n}\n","import { IExcelFile } from './excel-interfaces';\nimport { ExcelStrings } from './excel-strings';\nimport { WorksheetData } from './worksheet-data';\n\nimport * as JSZip from 'jszip';\n\n/**\n * @hidden\n */\nexport class RootRelsFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        folder.file('.rels', ExcelStrings.getRels());\n    }\n}\n\n/**\n * @hidden\n */\nexport class AppFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        folder.file('app.xml', ExcelStrings.getApp());\n    }\n}\n\n/**\n * @hidden\n */\nexport class CoreFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        folder.file('core.xml', ExcelStrings.getCore());\n    }\n}\n\n/**\n * @hidden\n */\nexport class WorkbookRelsFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        const hasSharedStrings = worksheetData.isEmpty === false;\n        folder.file('workbook.xml.rels', ExcelStrings.getWorkbookRels(hasSharedStrings));\n    }\n}\n\n/**\n * @hidden\n */\nexport class ThemeFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        folder.file('theme1.xml', ExcelStrings.getTheme());\n    }\n}\n\n/**\n * @hidden\n */\nexport class WorksheetFile implements IExcelFile {\n    private static MIN_WIDTH = 8.34;\n\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        const sheetData = [];\n        const cols = [];\n        let dimension: string;\n        const dictionary = worksheetData.dataDictionary;\n        let freezePane = '';\n        let maxOutlineLevel = 0;\n\n        if (worksheetData.isEmpty) {\n            sheetData.push('<sheetData/>');\n            dimension = 'A1';\n        } else {\n            sheetData.push('<sheetData>');\n            const height =  worksheetData.options.rowHeight;\n            const rowHeight = height ? ' ht=\"' + height + '\" customHeight=\"1\"' : '';\n\n            sheetData.push(`<row r=\"1\"${rowHeight}>`);\n            for (let i = 0; i < worksheetData.columnCount; i++) {\n                const column = ExcelStrings.getExcelColumn(i) + 1;\n                const value = dictionary.saveValue(worksheetData.keys[i], i, true);\n                sheetData.push(`<c r=\"${column}\" t=\"s\"><v>${value}</v></c>`);\n            }\n            sheetData.push('</row>');\n\n            for (let i = 1; i < worksheetData.rowCount; i++) {\n                if (!worksheetData.isTreeGridData) {\n                    sheetData.push(`<row r=\"${(i + 1)}\"${rowHeight}>`);\n                } else {\n                    const rowData = worksheetData.data[i - 1].originalRowData;\n                    const sCollapsed = (!rowData.expanded) ? '' : (rowData.expanded === true) ? '' : ` collapsed=\"1\"`;\n                    const sHidden = (rowData.parent && this.hasCollapsedParent(rowData)) ? ` hidden=\"1\"` : '';\n                    const rowOutlineLevel = rowData.level ? rowData.level : 0;\n                    const sOutlineLevel = rowOutlineLevel > 0 ? ` outlineLevel=\"${rowOutlineLevel}\"` : '';\n                    maxOutlineLevel = maxOutlineLevel < rowOutlineLevel ? rowOutlineLevel : maxOutlineLevel;\n\n                    sheetData.push(`<row r=\"${(i + 1)}\"${rowHeight}${sOutlineLevel}${sCollapsed}${sHidden}>`);\n                }\n                for (let j = 0; j < worksheetData.columnCount; j++) {\n                    const cellData = WorksheetFile.getCellData(worksheetData, i, j);\n                    sheetData.push(cellData);\n                }\n                sheetData.push('</row>');\n            }\n            sheetData.push('</sheetData>');\n            dimension = 'A1:' + ExcelStrings.getExcelColumn(worksheetData.columnCount - 1) + worksheetData.rowCount;\n\n            cols.push('<cols>');\n\n            for (let i = 0; i < worksheetData.columnCount; i++) {\n                const width = dictionary.columnWidths[i];\n                // Use the width provided in the options if it exists\n                const widthInTwips = worksheetData.options.columnWidth ?\n                                    worksheetData.options.columnWidth :\n                                    Math.max(((width / 96) * 14.4), WorksheetFile.MIN_WIDTH);\n\n                cols.push(`<col min=\"${(i + 1)}\" max=\"${(i + 1)}\" width=\"${widthInTwips}\" customWidth=\"1\"/>`);\n            }\n\n            cols.push('</cols>');\n\n            if (worksheetData.indexOfLastPinnedColumn !== -1 &&\n                !worksheetData.options.ignorePinning &&\n                !worksheetData.options.ignoreColumnsOrder) {\n                const frozenColumnCount = worksheetData.indexOfLastPinnedColumn + 1;\n                const firstCell = ExcelStrings.getExcelColumn(frozenColumnCount) + '1';\n                freezePane = `<pane xSplit=\"${frozenColumnCount}\" topLeftCell=\"${firstCell}\" activePane=\"topRight\" state=\"frozen\"/>`;\n            }\n        }\n        const hasTable = !worksheetData.isEmpty && worksheetData.options.exportAsTable;\n\n        folder.file('sheet1.xml',\n                    ExcelStrings.getSheetXML(dimension, freezePane, cols.join(''), sheetData.join(''), hasTable,\n                    worksheetData.isTreeGridData, maxOutlineLevel));\n    }\n\n    private hasCollapsedParent(rowData) {\n        let result = !rowData.parent.expanded;\n        while (rowData.parent) {\n            result = result || !rowData.parent.expanded;\n            rowData = rowData.parent;\n        }\n\n        return result;\n    }\n    /* tslint:disable member-ordering */\n    private static getCellData(worksheetData: WorksheetData, row: number, column: number): string {\n        const dictionary = worksheetData.dataDictionary;\n        const columnName = ExcelStrings.getExcelColumn(column) + (row + 1);\n        const columnHeader = worksheetData.keys[column];\n\n        const rowData = worksheetData.data[row - 1].rowData;\n\n        const cellValue = worksheetData.isSpecialData ? rowData : rowData[columnHeader];\n\n        if (cellValue === undefined || cellValue === null) {\n            return `<c r=\"${columnName}\" s=\"1\"/>`;\n        } else {\n            const savedValue = dictionary.saveValue(cellValue, column, false);\n            const isSavedAsString = savedValue !== -1;\n\n            const value = isSavedAsString ? savedValue : cellValue;\n            const type = isSavedAsString ? ` t=\"s\"` : '';\n            const format = isSavedAsString ? '' : ` s=\"1\"`;\n\n            return `<c r=\"${columnName}\"${type}${format}><v>${value}</v></c>`;\n        }\n    }\n    /* tslint:enable member-ordering */\n}\n\n/**\n * @hidden\n */\nexport class StyleFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        folder.file('styles.xml', ExcelStrings.getStyles(worksheetData.dataDictionary && worksheetData.dataDictionary.hasNonStringValues));\n    }\n}\n\n/**\n * @hidden\n */\nexport class WorkbookFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        folder.file('workbook.xml', ExcelStrings.getWorkbook());\n    }\n}\n\n/**\n * @hidden\n */\nexport class ContentTypesFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        folder.file('[Content_Types].xml', ExcelStrings.getContentTypesXML(!worksheetData.isEmpty, worksheetData.options.exportAsTable));\n    }\n}\n\n/**\n * @hidden\n */\nexport class SharedStringsFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        const dict = worksheetData.dataDictionary;\n        const sortedValues = dict.getKeys();\n        const sharedStrings = new Array<string>(sortedValues.length);\n\n        for (const value of sortedValues) {\n            sharedStrings[dict.getSanitizedValue(value)] = '<si><t>' + value + '</t></si>';\n        }\n\n        folder.file('sharedStrings.xml', ExcelStrings.getSharedStringXML(\n                        dict.stringsCount,\n                        sortedValues.length,\n                        sharedStrings.join(''))\n                    );\n    }\n}\n\n/**\n * @hidden\n */\nexport class TablesFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        const columnCount = worksheetData.columnCount;\n        const lastColumn = ExcelStrings.getExcelColumn(columnCount - 1) + worksheetData.rowCount;\n        const dimension = 'A1:' + lastColumn;\n        const values = worksheetData.keys;\n        let sortString = '';\n\n        let tableColumns = '<tableColumns count=\"' + columnCount + '\">';\n        for (let i = 0; i < columnCount; i++) {\n            const value =  values[i];\n            tableColumns += '<tableColumn id=\"' + (i + 1) + '\" name=\"' + value + '\"/>';\n        }\n\n        tableColumns += '</tableColumns>';\n\n        if (worksheetData.sort) {\n            const sortingExpression = worksheetData.sort;\n            const sc = ExcelStrings.getExcelColumn(values.indexOf(sortingExpression.fieldName));\n            const dir = sortingExpression.dir - 1;\n            sortString = `<sortState ref=\"A2:${lastColumn}\"><sortCondition descending=\"${dir}\" ref=\"${sc}1:${sc}15\"/></sortState>`;\n        }\n\n        folder.file('table1.xml', ExcelStrings.getTablesXML(dimension, tableColumns, sortString));\n    }\n}\n\n/**\n * @hidden\n */\nexport class WorksheetRelsFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        folder.file('sheet1.xml.rels', ExcelStrings.getWorksheetRels());\n    }\n}\n","import {\n    ExcelFileTypes,\n    ExcelFolderTypes\n} from './excel-enums';\n\nimport { IExcelFolder } from './excel-interfaces';\nimport { WorksheetData } from './worksheet-data';\n\n/** @hidden */\nexport class RootExcelFolder implements IExcelFolder {\n    public get folderName() {\n        return  '';\n    }\n\n    childFiles(data: WorksheetData) {\n        return [ExcelFileTypes.ContentTypesFile];\n    }\n\n    childFolders(data: WorksheetData) {\n        return [\n            ExcelFolderTypes.RootRelsExcelFolder,\n            ExcelFolderTypes.DocPropsExcelFolder,\n            ExcelFolderTypes.XLExcelFolder\n        ];\n    }\n}\n\n/** @hidden */\nexport class RootRelsExcelFolder implements IExcelFolder {\n    public get folderName() {\n        return  '_rels';\n    }\n\n    childFiles(data: WorksheetData) {\n        return [ExcelFileTypes.RootRelsFile];\n    }\n\n    childFolders(data: WorksheetData) {\n        return [];\n    }\n}\n\n/** @hidden */\nexport class DocPropsExcelFolder implements IExcelFolder {\n    public get folderName() {\n        return  'docProps';\n    }\n\n    childFiles(data: WorksheetData) {\n        return [\n            ExcelFileTypes.AppFile,\n            ExcelFileTypes.CoreFile\n        ];\n    }\n\n    childFolders(data: WorksheetData) {\n        return [];\n    }\n}\n\n/** @hidden */\nexport class XLExcelFolder implements IExcelFolder {\n    public get folderName() {\n        return  'xl';\n    }\n\n    childFiles(data: WorksheetData) {\n        const retVal = [\n            ExcelFileTypes.StyleFile,\n            ExcelFileTypes.WorkbookFile\n        ];\n\n        if (!data.isEmpty) {\n            retVal.push(ExcelFileTypes.SharedStringsFile);\n        }\n\n        return retVal;\n    }\n\n    childFolders(data: WorksheetData) {\n        const retVal = [\n            ExcelFolderTypes.XLRelsExcelFolder,\n            ExcelFolderTypes.ThemeExcelFolder,\n            ExcelFolderTypes.WorksheetsExcelFolder\n        ];\n\n        if (!data.isEmpty && data.options.exportAsTable) {\n            retVal.push(ExcelFolderTypes.TablesExcelFolder);\n        }\n\n        return retVal;\n    }\n}\n\n/** @hidden */\nexport class XLRelsExcelFolder implements IExcelFolder {\n    public get folderName() {\n        return  '_rels';\n    }\n\n    childFiles(data: WorksheetData) {\n        return [ExcelFileTypes.WorkbookRelsFile];\n    }\n\n    childFolders(data: WorksheetData) {\n        return [];\n    }\n}\n\n/** @hidden */\nexport class ThemeExcelFolder implements IExcelFolder {\n    public get folderName() {\n        return  'theme';\n    }\n\n    childFiles(data: WorksheetData) {\n        return [ExcelFileTypes.ThemeFile];\n    }\n\n    childFolders(data: WorksheetData) {\n        return [];\n    }\n}\n\n/** @hidden */\nexport class WorksheetsExcelFolder implements IExcelFolder {\n    public get folderName() {\n        return  'worksheets';\n    }\n\n    childFiles(data: WorksheetData) {\n        return [ExcelFileTypes.WorksheetFile];\n    }\n\n    childFolders(data: WorksheetData) {\n        return data.isEmpty || !data.options.exportAsTable ? [] : [ExcelFolderTypes.WorksheetsRelsExcelFolder];\n    }\n}\n\n/** @hidden */\nexport class TablesExcelFolder implements IExcelFolder {\n    public get folderName() {\n        return 'tables';\n    }\n\n    childFiles(data: WorksheetData) {\n        return [ExcelFileTypes.TablesFile];\n    }\n\n    childFolders(data: WorksheetData) {\n        return [];\n    }\n}\n\n/** @hidden */\nexport class WorksheetsRelsExcelFolder implements IExcelFolder {\n    public get folderName() {\n        return '_rels';\n    }\n\n    childFiles(data: WorksheetData) {\n        return [ExcelFileTypes.WorksheetRelsFile];\n    }\n\n    childFolders(data: WorksheetData) {\n        return [];\n    }\n}\n","import {\n    ExcelFileTypes,\n    ExcelFolderTypes\n} from './excel-enums';\n\nimport {\n    AppFile,\n    ContentTypesFile,\n    CoreFile,\n    RootRelsFile,\n    SharedStringsFile,\n    StyleFile,\n    TablesFile,\n    ThemeFile,\n    WorkbookFile,\n    WorkbookRelsFile,\n    WorksheetFile,\n    WorksheetRelsFile\n} from './excel-files';\n\nimport {\n    DocPropsExcelFolder,\n    RootExcelFolder,\n    RootRelsExcelFolder,\n    TablesExcelFolder,\n    ThemeExcelFolder,\n    WorksheetsExcelFolder,\n    WorksheetsRelsExcelFolder,\n    XLExcelFolder,\n    XLRelsExcelFolder\n} from './excel-folders';\n\nimport {\n    IExcelFile,\n    IExcelFolder\n} from './excel-interfaces';\n\n/** @hidden */\nexport class ExcelElementsFactory {\n\n    public static getExcelFolder(type: ExcelFolderTypes): IExcelFolder {\n        switch (type) {\n            case ExcelFolderTypes.RootExcelFolder:\n                return new RootExcelFolder();\n            case ExcelFolderTypes.RootRelsExcelFolder:\n                return new RootRelsExcelFolder();\n            case ExcelFolderTypes.DocPropsExcelFolder:\n                return new DocPropsExcelFolder();\n            case ExcelFolderTypes.XLExcelFolder:\n                return new XLExcelFolder();\n            case ExcelFolderTypes.XLRelsExcelFolder:\n                return new XLRelsExcelFolder();\n            case ExcelFolderTypes.ThemeExcelFolder:\n                return new ThemeExcelFolder();\n            case ExcelFolderTypes.WorksheetsExcelFolder:\n                return  new WorksheetsExcelFolder();\n            case ExcelFolderTypes.WorksheetsRelsExcelFolder:\n                return new WorksheetsRelsExcelFolder();\n            case ExcelFolderTypes.TablesExcelFolder:\n                return new TablesExcelFolder();\n            default:\n                throw new Error('Unknown excel folder type!');\n        }\n    }\n\n    public static getExcelFile(type: ExcelFileTypes): IExcelFile {\n        switch (type) {\n            case ExcelFileTypes.RootRelsFile:\n                return  new RootRelsFile();\n            case ExcelFileTypes.AppFile:\n                return  new AppFile();\n            case ExcelFileTypes.CoreFile:\n                return new CoreFile();\n            case ExcelFileTypes.WorkbookRelsFile:\n                return new WorkbookRelsFile();\n            case ExcelFileTypes.ThemeFile:\n                return new ThemeFile();\n            case ExcelFileTypes.WorksheetFile:\n                return new WorksheetFile();\n            case ExcelFileTypes.StyleFile:\n                return new StyleFile();\n            case ExcelFileTypes.WorkbookFile:\n                return new WorkbookFile();\n            case ExcelFileTypes.ContentTypesFile:\n                return new ContentTypesFile();\n            case ExcelFileTypes.SharedStringsFile:\n                return new SharedStringsFile();\n            case ExcelFileTypes.WorksheetRelsFile:\n                return new WorksheetRelsFile();\n            case ExcelFileTypes.TablesFile:\n                return new TablesFile();\n            default:\n                throw Error('Unknown excel file type!');\n        }\n    }\n}\n","import { ExportUtilities } from '../exporter-common/export-utilities';\n\n/** @hidden */\nexport class WorksheetDataDictionary {\n    private static DEFAULT_FONT = '11pt Calibri';\n    private static TEXT_PADDING = 5;\n\n    private _dictionary: any;\n    private _widthsDictionary: any;\n\n    private _sortedKeysByValue: string[];\n    private _sortedKeysByValueAreValid: boolean;\n\n    private _keys: string[];\n    private _keysAreValid: boolean;\n\n    private _counter: number;\n    private _calculateColumnWidth: boolean;\n    private _columnWidths: number[];\n    private _context: any;\n\n    private _columnTypeInfo: boolean[];\n    public hasNonStringValues = false;\n\n    public stringsCount: number;\n\n    constructor(columnCount: number, columnWidth: number) {\n        this._dictionary = {};\n        this._widthsDictionary = {};\n        this._counter = 0;\n        this.dirtyKeyCollections();\n\n        this._calculateColumnWidth = !columnWidth;\n        this._columnWidths = new Array<number>(columnCount);\n        this._columnTypeInfo = new Array<boolean>(columnCount);\n\n        if (!this._calculateColumnWidth) {\n            this._columnWidths.fill(columnWidth);\n        }\n\n        this.stringsCount = 0;\n    }\n\n    public get columnWidths() {\n        return this._columnWidths;\n    }\n\n    public saveValue(value: any, column: number, isHeader: boolean): number {\n        if (this._columnTypeInfo[column] === undefined && isHeader === false) {\n            this._columnTypeInfo[column] = typeof value === 'string' ||\n                                            typeof value === 'boolean' ||\n                                            value instanceof Date;\n        }\n\n        let sanitizedValue = '';\n        const isSavedAsString = this._columnTypeInfo[column] || isHeader;\n\n        if (isSavedAsString) {\n            sanitizedValue = this.sanitizeValue(value);\n\n            if (this._dictionary[sanitizedValue] === undefined) {\n                this._dictionary[sanitizedValue] = this._counter++;\n                this.dirtyKeyCollections();\n            }\n\n            this.stringsCount ++;\n        } else {\n            this.hasNonStringValues = true;\n        }\n\n        if (this._calculateColumnWidth) {\n            const width = this.getTextWidth(value);\n            const maxWidth = Math.max(this._columnWidths[column] || 0, width);\n            this._columnWidths[column] = maxWidth;\n        }\n\n        return isSavedAsString ? this.getSanitizedValue(sanitizedValue) : -1;\n    }\n\n    public getValue(value: string): number {\n        return this.getSanitizedValue(this.sanitizeValue(value));\n    }\n\n    public getSanitizedValue(sanitizedValue: string): number {\n        return this._dictionary[sanitizedValue];\n    }\n\n    public getKeys(): string[] {\n        if (!this._keysAreValid) {\n            this._keys = Object.keys(this._dictionary);\n            this._keysAreValid = true;\n        }\n\n        return this._keys;\n    }\n\n    private getTextWidth(value: any): number {\n        if (this._widthsDictionary[value] === undefined) {\n            const context = this.getContext();\n            const metrics = context.measureText(value);\n            this._widthsDictionary[value] = metrics.width + WorksheetDataDictionary.TEXT_PADDING;\n        }\n\n        return this._widthsDictionary[value];\n    }\n\n    private getContext(): any {\n        if (!this._context) {\n            const canvas = document.createElement('canvas');\n            this._context = canvas.getContext('2d');\n            this._context.font = WorksheetDataDictionary.DEFAULT_FONT;\n        }\n\n        return this._context;\n    }\n\n    private sanitizeValue(value: any): string {\n        if (ExportUtilities.hasValue(value) === false) {\n            return '';\n        } else {\n            const stringValue = String(value);\n            return stringValue.replace(/&/g, '&amp;')\n                            .replace(/</g, '&lt;')\n                            .replace(/>/g, '&gt;')\n                            .replace(/\"/g, '&quot;')\n                            .replace(/'/g, '&apos;');\n        }\n    }\n\n    private dirtyKeyCollections(): void {\n        this._keysAreValid = false;\n    }\n}\n","import { ExportUtilities } from '../exporter-common/export-utilities';\nimport { IgxExcelExporterOptions } from './excel-exporter-options';\nimport { WorksheetDataDictionary } from './worksheet-data-dictionary';\n\n/** @hidden */\nexport class WorksheetData {\n    private _columnCount: number;\n    private _rowCount: number;\n    private _dataDictionary: WorksheetDataDictionary;\n    private _keys: string[];\n    private _isSpecialData: boolean;\n\n    constructor(private _data: any[], public options: IgxExcelExporterOptions, public indexOfLastPinnedColumn,\n                public sort: any, public isTreeGridData = false) {\n        this.initializeData();\n    }\n\n    public get data() {\n        return this._data;\n    }\n\n    public get columnCount(): number {\n        return this._columnCount;\n    }\n\n    public get rowCount(): number {\n        return this._rowCount;\n    }\n\n    public get isEmpty() {\n        return !this.rowCount || !this._columnCount;\n    }\n\n    public get keys(): string[] {\n        return this._keys;\n    }\n\n    public get isSpecialData(): boolean {\n        return this._isSpecialData;\n    }\n\n    public get dataDictionary() {\n        return this._dataDictionary;\n    }\n\n    private initializeData() {\n        if (!this._data || this._data.length === 0) {\n            return;\n        }\n\n        const actualData = this._data.map((item) => item.rowData);\n\n        this._keys = ExportUtilities.getKeysFromData(actualData);\n        if (this._keys.length === 0) {\n            return;\n        }\n\n        this._isSpecialData = ExportUtilities.isSpecialData(actualData);\n\n        this._columnCount = this._keys.length;\n        this._rowCount = this._data.length + 1;\n\n        this._dataDictionary = new WorksheetDataDictionary(this._columnCount, this.options.columnWidth);\n    }\n}\n","import * as JSZip from 'jszip';\n\nimport { EventEmitter, Injectable, Output } from '@angular/core';\nimport { ExcelElementsFactory } from './excel-elements-factory';\nimport { ExcelFolderTypes } from './excel-enums';\nimport { IgxExcelExporterOptions } from './excel-exporter-options';\nimport { IExcelFolder } from './excel-interfaces';\nimport { IgxBaseExporter } from '../exporter-common/base-export-service';\nimport { ExportUtilities } from '../exporter-common/export-utilities';\nimport { WorksheetData } from './worksheet-data';\nimport { IBaseEventArgs } from '../../core/utils';\n\nexport interface IExcelExportEndedEventArgs extends IBaseEventArgs {\n    xlsx: JSZip;\n}\n\n/**\n * **Ignite UI for Angular Excel Exporter Service** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/exporter_excel.html)\n *\n * The Ignite UI for Angular Excel Exporter service can export data in Microsoft Excel format from both raw data\n * (array) or from an `IgxGrid`.\n *\n * Example:\n * ```typescript\n * public localData = [\n *   { Name: \"Eric Ridley\", Age: \"26\" },\n *   { Name: \"Alanis Brook\", Age: \"22\" },\n *   { Name: \"Jonathan Morris\", Age: \"23\" }\n * ];\n *\n * constructor(private excelExportService: IgxExcelExporterService) {\n * }\n *\n * this.excelExportService.exportData(this.localData, new IgxExcelExporterOptions(\"FileName\"));\n * ```\n */\n@Injectable()\nexport class IgxExcelExporterService extends IgxBaseExporter {\n\n    private static ZIP_OPTIONS = { compression: 'DEFLATE', type: 'base64' } as JSZip.JSZipGeneratorOptions<'base64'>;\n    private _xlsx: JSZip;\n\n    /**\n     * This event is emitted when the export process finishes.\n     * ```typescript\n     * this.exporterService.onExportEnded.subscribe((args: IExcelExportEndedEventArgs) => {\n     * // put event handler code here\n     * });\n     * ```\n     * @memberof IgxExcelExporterService\n     */\n    @Output()\n    public onExportEnded = new EventEmitter<IExcelExportEndedEventArgs>();\n\n    private static populateFolder(folder: IExcelFolder, zip: JSZip, worksheetData: WorksheetData): any {\n        for (const childFolder of folder.childFolders(worksheetData)) {\n            const folderIntance = ExcelElementsFactory.getExcelFolder(childFolder);\n            const zipFolder = zip.folder(folderIntance.folderName);\n            IgxExcelExporterService.populateFolder(folderIntance, zipFolder, worksheetData);\n        }\n\n        for (const childFile of folder.childFiles(worksheetData)) {\n            const fileInstance = ExcelElementsFactory.getExcelFile(childFile);\n            fileInstance.writeElement(zip, worksheetData);\n        }\n    }\n\n    protected exportDataImplementation(data: any[], options: IgxExcelExporterOptions): void {\n        if (this._isTreeGrid) {\n            let maxLevel = 0;\n            data.forEach((r) => {\n                maxLevel = Math.max(maxLevel, r.originalRowData.level);\n            });\n            if (maxLevel > 7) {\n                throw Error('Can create an outline of up to eight levels!');\n            }\n        }\n\n        const worksheetData = new WorksheetData(data, options, this._indexOfLastPinnedColumn, this._sort, this._isTreeGrid);\n        this._xlsx = new JSZip();\n\n        const rootFolder = ExcelElementsFactory.getExcelFolder(ExcelFolderTypes.RootExcelFolder);\n        IgxExcelExporterService.populateFolder(rootFolder, this._xlsx, worksheetData);\n\n        this._xlsx.generateAsync(IgxExcelExporterService.ZIP_OPTIONS).then((result) => {\n            this.saveFile(result, options.fileName);\n\n            this.onExportEnded.emit({ xlsx: this._xlsx });\n        });\n    }\n\n    private saveFile(data: string, fileName: string): void {\n        const blob = new Blob([ExportUtilities.stringToArrayBuffer(atob(data))], {\n            type: ''\n        });\n\n        ExportUtilities.saveBlobToFile(blob, fileName);\n    }\n}\n","import { IgxExporterOptionsBase } from '../exporter-common/exporter-options-base';\n\n/**\n * Objects of this class are used to configure the Excel exporting process.\n */\nexport class IgxExcelExporterOptions extends IgxExporterOptionsBase {\n    private _columnWidth: number;\n    private _rowHeight: number;\n\n    /**\n     * Specifies if column pinning should be ignored. If ignoreColumnsOrder is set to true,\n     * this option will always be considered as set to true.\n     * ```typescript\n     * let ignorePinning = this.exportOptions.ignorePinning;\n     * this.exportOptions.ignorePinning = true;\n     * ```\n     * @memberof IgxExcelExporterOptions\n     */\n    public ignorePinning = false;\n\n    /**\n     * Specifies whether the exported data should be formatted as Excel table. (True by default)\n     * ```typescript\n     * let exportAsTable = this.exportOptions.exportAsTable;\n     * this.exportOptions.exportAsTable = false;\n     * ```\n     * @memberof IgxExcelExporterOptions\n     */\n    public exportAsTable = true;\n\n    constructor(fileName: string) {\n        super(fileName, '.xlsx');\n    }\n\n    /**\n     * Gets the width of the columns in the exported excel file.\n     * ```typescript\n     * let width = this.exportOptions.columnWidth;\n     * ```\n     * @memberof IgxExcelExporterOptions\n     */\n    public get columnWidth(): number {\n        return this._columnWidth;\n    }\n\n    /**\n     * Sets the width of the columns in the exported excel file. If left unspecified or 0,\n     * the width of the largest string in the column will be used.\n     * ```typescript\n     * this.exportOptions.columnWidth = 55;\n     * ```\n     * @memberof IgxExcelExporterOptions\n     */\n    public set columnWidth(value: number) {\n        if (value < 0) {\n            throw Error('Invalid value for column width!');\n        }\n\n        this._columnWidth = value;\n    }\n\n    /**\n     * Gets the height of the rows in the exported excel file.\n     * ```typescript\n     * let height = this.exportOptions.rowHeight;\n     * ```\n     * @memberof IgxExcelExporterOptions\n     */\n    public get rowHeight(): number {\n        return this._rowHeight;\n    }\n\n    /**\n     * Sets the height of the rows in the exported excel file. If left unspecified or 0,\n     * the default height of the excel rows will be used.\n     * ```typescript\n     * this.exportOptions.rowHeight = 25;\n     * ```\n     * @memberof IgxExcelExporterOptions\n     */\n    public set rowHeight(value: number) {\n        if (value < 0) {\n            throw Error('Invalid value for row height!');\n        }\n\n        this._rowHeight = value;\n    }\n}\n","import { IPositionStrategy } from './IPositionStrategy';\nimport { PositionSettings, HorizontalAlignment, VerticalAlignment, Size, Util, OverlaySettings } from './../utilities';\nimport { fadeIn, fadeOut } from '../../../animations/main';\n\n/**\n * Positions the element based on the directions passed in trough PositionSettings.\n * These are Top/Middle/Bottom for verticalDirection and Left/Center/Right for horizontalDirection\n */\nexport class GlobalPositionStrategy implements IPositionStrategy {\n    protected _defaultSettings: PositionSettings = {\n        horizontalDirection: HorizontalAlignment.Center,\n        verticalDirection: VerticalAlignment.Middle,\n        horizontalStartPoint: HorizontalAlignment.Center,\n        verticalStartPoint: VerticalAlignment.Middle,\n        openAnimation: fadeIn,\n        closeAnimation: fadeOut,\n        minSize: { width: 0, height: 0 }\n    };\n\n    /** @inheritdoc */\n    public settings: PositionSettings;\n\n    constructor(settings?: PositionSettings) {\n        this.settings = Object.assign({}, this._defaultSettings, settings);\n    }\n\n    /** @inheritdoc */\n    position(contentElement: HTMLElement, size?: Size, document?: Document, initialCall?: boolean): void {\n        contentElement.classList.add('igx-overlay__content--relative');\n        contentElement.parentElement.classList.add('igx-overlay__wrapper--flex');\n        this.setPosition(contentElement, this.settings);\n    }\n\n    protected setPosition(contentElement: HTMLElement, settings: PositionSettings) {\n        switch (this.settings.horizontalDirection) {\n            case HorizontalAlignment.Left:\n                contentElement.parentElement.style.justifyContent = 'flex-start';\n                break;\n            case HorizontalAlignment.Center:\n                contentElement.parentElement.style.justifyContent = 'center';\n                break;\n            case HorizontalAlignment.Right:\n                contentElement.parentElement.style.justifyContent = 'flex-end';\n                break;\n            default:\n                break;\n        }\n\n        switch (this.settings.verticalDirection) {\n            case VerticalAlignment.Top:\n                contentElement.parentElement.style.alignItems = 'flex-start';\n                break;\n            case VerticalAlignment.Middle:\n                contentElement.parentElement.style.alignItems = 'center';\n                break;\n            case VerticalAlignment.Bottom:\n                contentElement.parentElement.style.alignItems = 'flex-end';\n                break;\n            default:\n                break;\n        }\n    }\n\n    /** @inheritdoc */\n    clone(): IPositionStrategy {\n        return Util.cloneInstance(this);\n    }\n}\n\n","import { IScrollStrategy } from './IScrollStrategy';\nimport { IgxOverlayService } from '../overlay';\n\nexport abstract class ScrollStrategy implements IScrollStrategy {\n    constructor(scrollContainer?: HTMLElement) { }\n    /** @inheritdoc */\n    abstract initialize(document: Document, overlayService: IgxOverlayService, id: string);\n\n    /** @inheritdoc */\n    abstract attach(): void;\n\n    /** @inheritdoc */\n    abstract detach(): void;\n}\n","import { IgxOverlayService } from '../overlay';\nimport { ScrollStrategy } from './scroll-strategy';\n\n/**\n * Empty scroll strategy. Does nothing.\n */\nexport class NoOpScrollStrategy extends ScrollStrategy {\n    constructor(scrollContainer?: HTMLElement) {\n        super(scrollContainer);\n    }\n    /** @inheritdoc */\n    public initialize(document: Document, overlayService: IgxOverlayService, id: string) { }\n\n    /** @inheritdoc */\n    attach(): void { }\n\n    /** @inheritdoc */\n    detach(): void { }\n}\n","import { isDevMode } from '@angular/core';\n\n/**\n * @hidden\n */\nexport function DeprecateMethod(message: string): MethodDecorator {\n    let isMessageShown = false;\n\n    return function (target: any, key: string, descriptor: PropertyDescriptor) {\n        if (descriptor && descriptor.value) {\n            const originalMethod = descriptor.value;\n\n            descriptor.value = function () {\n                const targetName = typeof target === 'function' ? target.name : target.constructor.name;\n                isMessageShown = showMessage(`${targetName}.${key}: ${message}`, isMessageShown);\n\n                return originalMethod.call(this, arguments);\n            };\n\n            return descriptor;\n        }\n    };\n}\n\n/**\n * @hidden\n */\nexport function DeprecateProperty(message: string): PropertyDecorator {\n    return function(target: any, key: string) {\n        let isMessageShown = false;\n        const messageToDisplay = `${target.constructor.name}.${key}: ${message}`;\n\n        // if the target already has the property defined\n        const originalDescriptor = Object.getOwnPropertyDescriptor(target, key);\n        if (originalDescriptor) {\n            let getter, setter;\n            getter = originalDescriptor.get;\n            setter = originalDescriptor.set;\n\n            if (getter) {\n                originalDescriptor.get = function() {\n                    isMessageShown = showMessage(messageToDisplay, isMessageShown);\n                    return getter.call(this);\n                };\n            }\n\n            if (setter) {\n                originalDescriptor.set = function (value) {\n                    isMessageShown = showMessage(messageToDisplay, isMessageShown);\n                    setter.call(this, value);\n                };\n            }\n\n            return originalDescriptor;\n        }\n\n        // the target doesn't contain a descriptor for that property, so create one\n        // use backing field to set/get the value of the property to ensure there won't be infinite recursive calls\n        const newKey = generateUniqueKey(target, key);\n        Object.defineProperty(target, key, {\n            configurable: true,\n            enumerable: true,\n            set: function(value) {\n                isMessageShown = showMessage(messageToDisplay, isMessageShown);\n                this[newKey] = value;\n            },\n            get: function() {\n                isMessageShown = showMessage(messageToDisplay, isMessageShown);\n                return this[newKey];\n            }\n        });\n    };\n}\n\n/**\n * @hidden\n */\nfunction generateUniqueKey(target: any, key: string): string {\n    let newKey = '_' + key;\n    while (target.hasOwnProperty(newKey)) {\n        newKey = '_' + newKey;\n    }\n\n    return newKey;\n}\n\n/**\n * @hidden\n */\nexport function showMessage(message: string, isMessageShown: boolean): boolean {\n    if (!isMessageShown && isDevMode()) {\n        console.warn(message);\n    }\n\n    return true;\n}\n","import { DOCUMENT } from '@angular/common';\nimport { GlobalPositionStrategy } from './position/global-position-strategy';\nimport { NoOpScrollStrategy } from './scroll/NoOpScrollStrategy';\nimport {\n    OverlaySettings,\n    OverlayEventArgs,\n    OverlayInfo,\n    OverlayAnimationEventArgs,\n    OverlayCancelableEventArgs,\n    OverlayClosingEventArgs\n} from './utilities';\n\nimport {\n    ApplicationRef,\n    ComponentFactory,\n    ComponentFactoryResolver,\n    ComponentRef,\n    ElementRef,\n    EventEmitter,\n    Inject,\n    Injectable,\n    Injector,\n    Type,\n    OnDestroy,\n    NgModuleRef,\n    NgZone\n} from '@angular/core';\nimport { AnimationBuilder, AnimationReferenceMetadata, AnimationMetadataType, AnimationAnimateRefMetadata } from '@angular/animations';\nimport { fromEvent, Subject } from 'rxjs';\nimport { filter, takeUntil } from 'rxjs/operators';\nimport { IAnimationParams } from '../../animations/main';\nimport { showMessage } from '../../core/deprecateDecorators';\n\nlet warningShown = false;\n\n/**\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/overlay_main.html)\n * The overlay service allows users to show components on overlay div above all other elements in the page.\n */\n@Injectable({ providedIn: 'root' })\nexport class IgxOverlayService implements OnDestroy {\n    private _componentId = 0;\n    private _overlayInfos: OverlayInfo[] = [];\n    private _overlayElement: HTMLElement;\n    private _document: Document;\n    private destroy$ = new Subject<boolean>();\n\n    private _defaultSettings: OverlaySettings = {\n        positionStrategy: new GlobalPositionStrategy(),\n        scrollStrategy: new NoOpScrollStrategy(),\n        modal: true,\n        closeOnOutsideClick: true\n    };\n\n    /**\n     * Emitted before the component is opened.\n     * ```typescript\n     * onOpening(event: OverlayCancelableEventArgs){\n     *     const onOpening = event;\n     * }\n     * ```\n     */\n    public onOpening = new EventEmitter<OverlayCancelableEventArgs>();\n\n    /**\n     * Emitted after the component is appended to the overlay, and before animations are started.\n     * ```typescript\n     * onAppended(event: OverlayEventArgs){\n     *     const onAppended = event;\n     * }\n     * ```\n     */\n    public onAppended = new EventEmitter<OverlayEventArgs>();\n\n    /**\n     * Emitted after the component is opened and all animations are finished.\n     * ```typescript\n     * onOpened(event: OverlayEventArgs){\n     *     const onOpened = event;\n     * }\n     * ```\n     */\n    public onOpened = new EventEmitter<OverlayEventArgs>();\n\n    /**\n     * Emitted before the component is closed.\n     * ```typescript\n     * onClosing(event: OverlayCancelableEventArgs){\n     *     const onClosing = event;\n     * }\n     * ```\n     */\n    public onClosing = new EventEmitter<OverlayClosingEventArgs>();\n\n    /**\n     * Emitted after the component is closed and all animations are finished.\n     * ```typescript\n     * onClosed(event: OverlayEventArgs){\n     *     const onClosed = event;\n     * }\n     * ```\n     */\n    public onClosed = new EventEmitter<OverlayEventArgs>();\n\n    /**\n     * Emitted before animation is started\n     * ```typescript\n     * onAnimation(event: OverlayAnimationEventArgs){\n     *     const onAnimation = event;\n     * }\n     * ```\n     */\n    public onAnimation = new EventEmitter<OverlayAnimationEventArgs>();\n\n    constructor(\n        private _factoryResolver: ComponentFactoryResolver,\n        private _appRef: ApplicationRef,\n        private _injector: Injector,\n        private builder: AnimationBuilder,\n        @Inject(DOCUMENT) private document: any,\n        private _zone: NgZone) {\n        this._document = <Document>this.document;\n    }\n\n    /**\n     * Generates Id. Provide this Id when call `show(id, settings?)` method\n     * @param component ElementRef to show in overlay\n     * @param settings Display settings for the overlay, such as positioning and scroll/close behavior.\n     * @returns Id of the created overlay. Valid until `onClosed` is emitted.\n     */\n    attach(element: ElementRef, settings?: OverlaySettings): string;\n    /**\n     * Generates Id. Provide this Id when call `show(id, settings?)` method\n     * @param component Component Type to show in overlay\n     * @param settings Display settings for the overlay, such as positioning and scroll/close behavior.\n     * @param moduleRef Optional reference to an object containing Injector and ComponentFactoryResolver\n     * that can resolve the component's factory\n     * @returns Id of the created overlay. Valid until `onClosed` is emitted.\n     */\n    attach(component: Type<any>, settings?: OverlaySettings,\n        moduleRef?: Pick<NgModuleRef<any>, 'injector' | 'componentFactoryResolver'>): string;\n    attach(component: ElementRef | Type<any>, settings?: OverlaySettings,\n        moduleRef?: Pick<NgModuleRef<any>, 'injector' | 'componentFactoryResolver'>): string {\n        let info: OverlayInfo;\n        info = this.getOverlayInfo(component, moduleRef);\n\n        //  if there is no info most probably wrong type component was provided and we just go out\n        if (!info) {\n            return null;\n        }\n\n        info.id = (this._componentId++).toString();\n        settings = Object.assign({}, this._defaultSettings, settings);\n        info.settings = settings;\n        this._overlayInfos.push(info);\n        return info.id;\n    }\n\n    /**\n     * Shows the overlay for provided id.\n     * @param id Id to show overlay for\n     * @param settings Display settings for the overlay, such as positioning and scroll/close behavior.\n     */\n    show(id: string, settings?: OverlaySettings): string;\n    /**\n     * Shows the provided component.\n     * @param component ElementRef or Component Type to show in overlay\n     * @param settings Display settings for the overlay, such as positioning and scroll/close behavior.\n     * @returns Id of the created overlay. Valid until `onClosed` is emitted.\n     * ```typescript\n     * this.overlay.show(element, settings);\n     * ```\n     * @deprecated Use `attach(component)` to obtain an Id. Then `show(id, settings?)` with provided Id.\n     */\n    // tslint:disable-next-line:unified-signatures\n    show(component: ElementRef | Type<any>, settings?: OverlaySettings): string;\n    show(compOrId: string | ElementRef | Type<any>, settings?: OverlaySettings): string {\n        let info: OverlayInfo;\n        let id: string;\n        if (typeof compOrId === 'string') {\n            id = compOrId;\n            info = this.getOverlayById(compOrId);\n            if (!info) {\n                console.warn('igxOverlay.show was called with wrong id: ' + compOrId);\n                return null;\n            }\n        } else {\n            warningShown = showMessage(\n                '`show(component, settings?)` overload is deprecated. Use `attach(component)` to obtain an Id.' +\n                'Then `show(id, settings?)` with provided Id.',\n                warningShown);\n            id = (this._componentId++).toString();\n            info = this.getOverlayInfo(compOrId);\n\n            //  if there is no info most probably wrong type component was provided and we just go out\n            if (!info) {\n                return;\n            }\n\n            info.id = id;\n        }\n\n        settings = Object.assign({}, this._defaultSettings, info.settings, settings);\n        info.settings = settings;\n\n        this._show(info);\n        return id;\n    }\n\n    /**\n     * Hides the component with the ID provided as a parameter.\n     * ```typescript\n     * this.overlay.hide(id);\n     * ```\n     */\n    hide(id: string) {\n        this._hide(id);\n    }\n\n    /**\n     * Hides all the components and the overlay.\n     * ```typescript\n     * this.overlay.hideAll();\n     * ```\n     */\n    hideAll() {\n        // since overlays are removed on animation done, que all hides\n        for (let i = this._overlayInfos.length; i--;) {\n            this.hide(this._overlayInfos[i].id);\n        }\n    }\n\n    /**\n     * Repositions the component with ID provided as a parameter.\n     * ```typescript\n     * this.overlay.reposition(id);\n     * ```\n     */\n    reposition(id: string) {\n        const overlayInfo = this.getOverlayById(id);\n        if (!overlayInfo || !overlayInfo.settings) {\n            console.error('Wrong id provided in overlay.reposition method. Id: ' + id);\n            return;\n        }\n\n        const contentElement = overlayInfo.elementRef.nativeElement.parentElement;\n        const contentElementRect = contentElement.getBoundingClientRect();\n        overlayInfo.settings.positionStrategy.position(\n            contentElement,\n            {\n                width: contentElementRect.width,\n                height: contentElementRect.height\n            },\n            this._document,\n            false);\n    }\n\n    /**\n     * Offsets the content along the corresponding axis by the provided amount\n     * ```typescript\n     * this.overlay.setOffset(id, deltaX, deltaY);\n     * ```\n     */\n    setOffset(id: string, deltaX: number, deltaY: number) {\n        const info: OverlayInfo = this.getOverlayById(id);\n\n        if (!info) {\n           return;\n        }\n\n        info.transformX += deltaX;\n        info.transformY += deltaY;\n\n        const transformX = info.transformX;\n        const transformY = info.transformY;\n\n        const translate = `translate(${transformX}px, ${transformY}px)`;\n        info.elementRef.nativeElement.parentElement.style.transform = translate;\n    }\n\n    private _show(info: OverlayInfo) {\n        const eventArgs: OverlayCancelableEventArgs = { id: info.id, componentRef: info.componentRef, cancel: false };\n        this.onOpening.emit(eventArgs);\n        if (eventArgs.cancel) {\n            if (info.componentRef) {\n                this._appRef.detachView(info.componentRef.hostView);\n                info.componentRef.destroy();\n            }\n\n            return;\n        }\n\n        //  if there is no close animation player, or there is one but it is not started yet we are in clear\n        //  opening. Otherwise, if there is close animation player playing animation now we should not setup\n        //  overlay this is already done\n        if (!info.closeAnimationPlayer || (info.closeAnimationPlayer && !info.closeAnimationPlayer.hasStarted())) {\n            const elementRect = info.elementRef.nativeElement.getBoundingClientRect();\n            info.initialSize = { width: elementRect.width, height: elementRect.height };\n            info.hook = this.placeElementHook(info.elementRef.nativeElement);\n\n            this.moveElementToOverlay(info);\n            if (info.componentRef) {\n                info.componentRef.changeDetectorRef.detectChanges();\n            }\n\n            this.onAppended.emit({ id: info.id, componentRef: info.componentRef });\n\n            this.updateSize(info);\n            if (this._overlayInfos.indexOf(info) === -1) {\n                this._overlayInfos.push(info);\n            }\n\n            info.settings.positionStrategy.position(\n                info.elementRef.nativeElement.parentElement,\n                { width: info.initialSize.width, height: info.initialSize.height },\n                document,\n                true);\n            info.settings.scrollStrategy.initialize(this._document, this, info.id);\n            info.settings.scrollStrategy.attach();\n        }\n\n        this.addOutsideClickListener(info);\n        this.addResizeHandler(info.id);\n\n        if (info.settings.modal) {\n            this.setupModalWrapper(info);\n        }\n\n        if (info.settings.positionStrategy.settings.openAnimation) {\n            this.playOpenAnimation(info);\n        } else {\n            //  to eliminate flickering show the element just before onOpened fire\n            info.elementRef.nativeElement.parentElement.style.visibility = '';\n            this.onOpened.emit({ id: info.id, componentRef: info.componentRef });\n        }\n    }\n\n    private _hide(id: string, event?: Event) {\n        const info: OverlayInfo = this.getOverlayById(id);\n\n        if (!info) {\n            console.warn('igxOverlay.hide was called with wrong id: ' + id);\n            return;\n        }\n\n        const eventArgs = { id, componentRef: info.componentRef, cancel: false, event };\n        this.onClosing.emit(eventArgs);\n        if (eventArgs.cancel) {\n            return;\n        }\n\n        //  TODO: synchronize where these are added/attached and where removed/detached\n        info.settings.scrollStrategy.detach();\n        this.removeOutsideClickListener(info);\n        this.removeResizeHandler(info.id);\n\n        const child: HTMLElement = info.elementRef.nativeElement;\n        if (info.settings.modal) {\n            const parent = child.parentNode.parentNode as HTMLElement;\n            this.applyAnimationParams(parent, info.settings.positionStrategy.settings.closeAnimation);\n            parent.classList.remove('igx-overlay__wrapper--modal');\n            parent.classList.add('igx-overlay__wrapper');\n        }\n\n        if (info.settings.positionStrategy.settings.closeAnimation) {\n            this.playCloseAnimation(info);\n        } else {\n            this.onCloseDone(info);\n        }\n    }\n\n    private getOverlayInfo(component: any, moduleRef?: Pick<NgModuleRef<any>, 'injector' | 'componentFactoryResolver'>): OverlayInfo {\n        const info: OverlayInfo = { ngZone: this._zone, transformX: 0, transformY: 0 };\n        if (component instanceof ElementRef) {\n            info.elementRef = <ElementRef>component;\n        } else {\n            let dynamicFactory: ComponentFactory<{}>;\n            const factoryResolver = moduleRef ? moduleRef.componentFactoryResolver : this._factoryResolver;\n            try {\n                dynamicFactory = factoryResolver.resolveComponentFactory(component);\n            } catch (error) {\n                console.error(error);\n                return null;\n            }\n\n            const injector = moduleRef ? moduleRef.injector : this._injector;\n            const dynamicComponent: ComponentRef<{}> = dynamicFactory.create(injector);\n            this._appRef.attachView(dynamicComponent.hostView);\n\n            // If the element is newly created from a Component, it is wrapped in 'ng-component' tag - we do not want that.\n            const element = dynamicComponent.location.nativeElement;\n            info.elementRef = <ElementRef>{ nativeElement: element };\n            info.componentRef = dynamicComponent;\n        }\n\n        return info;\n    }\n\n    private placeElementHook(element: HTMLElement): HTMLElement {\n        if (!element.parentElement) {\n            return null;\n        }\n\n        const hook = this._document.createElement('div');\n        element.parentElement.insertBefore(hook, element);\n        return hook;\n    }\n\n    private moveElementToOverlay(info: OverlayInfo) {\n        const wrapperElement = this.getWrapperElement();\n        const contentElement = this.getContentElement(wrapperElement, info.settings.modal);\n        this.getOverlayElement(info).appendChild(wrapperElement);\n        contentElement.appendChild(info.elementRef.nativeElement);\n    }\n\n    private getWrapperElement(): HTMLElement {\n        const wrapper: HTMLElement = this._document.createElement('div');\n        wrapper.classList.add('igx-overlay__wrapper');\n        return wrapper;\n    }\n\n    private getContentElement(wrapperElement: HTMLElement, modal: boolean): HTMLElement {\n        const content: HTMLElement = this._document.createElement('div');\n        if (modal) {\n            content.classList.add('igx-overlay__content--modal');\n            content.addEventListener('click', (ev: Event) => {\n                ev.stopPropagation();\n            });\n        } else {\n            content.classList.add('igx-overlay__content');\n        }\n\n        content.addEventListener('scroll', (ev: Event) => {\n            ev.stopPropagation();\n        });\n\n        //  hide element to eliminate flickering. Show the element exactly before animation starts\n        content.style.visibility = 'hidden';\n\n        wrapperElement.appendChild(content);\n        return content;\n    }\n\n    private getOverlayElement(info: OverlayInfo): HTMLElement {\n        if (info.settings.outlet) {\n            return info.settings.outlet.nativeElement;\n        }\n        if (!this._overlayElement) {\n            this._overlayElement = this._document.createElement('div');\n            this._overlayElement.classList.add('igx-overlay');\n            this._document.body.appendChild(this._overlayElement);\n        }\n\n        return this._overlayElement;\n    }\n\n    private updateSize(info: OverlayInfo) {\n        if (info.componentRef) {\n            //  if we are positioning component this is first time it gets visible\n            //  and we can finally get its size\n            info.initialSize = info.elementRef.nativeElement.getBoundingClientRect();\n        }\n\n        // set content div width only if element to show has width\n        if (info.initialSize.width !== 0) {\n            info.elementRef.nativeElement.parentElement.style.width = info.initialSize.width + 'px';\n        }\n    }\n\n    private setupModalWrapper(info: OverlayInfo) {\n        const wrapperElement = info.elementRef.nativeElement.parentElement.parentElement;\n        fromEvent(wrapperElement, 'keydown').pipe(\n            filter((ev: KeyboardEvent) => ev.key === 'Escape' || ev.key === 'Esc'),\n            takeUntil(this.destroy$)\n        ).subscribe(() => this.hide(info.id));\n        wrapperElement.classList.remove('igx-overlay__wrapper');\n        this.applyAnimationParams(wrapperElement, info.settings.positionStrategy.settings.openAnimation);\n        wrapperElement.classList.add('igx-overlay__wrapper--modal');\n    }\n\n    private onCloseDone(info: OverlayInfo) {\n        this.cleanUp(info);\n        this.onClosed.emit({ id: info.id, componentRef: info.componentRef });\n    }\n\n    private cleanUp(info: OverlayInfo) {\n        const child: HTMLElement = info.elementRef.nativeElement;\n        const outlet = this.getOverlayElement(info);\n        if (!outlet.contains(child)) {\n            console.warn('Component with id:' + info.id + ' is already removed!');\n            return;\n        }\n\n        outlet.removeChild(child.parentNode.parentNode);\n        if (info.componentRef) {\n            this._appRef.detachView(info.componentRef.hostView);\n            info.componentRef.destroy();\n        }\n\n        if (info.hook) {\n            info.hook.parentElement.insertBefore(info.elementRef.nativeElement, info.hook);\n            info.hook.parentElement.removeChild(info.hook);\n        }\n\n        const index = this._overlayInfos.indexOf(info);\n        this._overlayInfos.splice(index, 1);\n\n        // this._overlayElement.parentElement check just for tests that manually delete the element\n        if (this._overlayInfos.length === 0 && this._overlayElement && this._overlayElement.parentElement) {\n            this._overlayElement.parentElement.removeChild(this._overlayElement);\n            this._overlayElement = null;\n        }\n    }\n\n    private playOpenAnimation(info: OverlayInfo) {\n        if (!info.openAnimationPlayer) {\n            const animationBuilder = this.builder.build(info.settings.positionStrategy.settings.openAnimation);\n            info.openAnimationPlayer = animationBuilder.create(info.elementRef.nativeElement);\n\n            //  AnimationPlayer.getPosition returns always 0. To workaround this we are getting inner WebAnimationPlayer\n            //  and then getting the positions from it.\n            //  This is logged in Angular here - https://github.com/angular/angular/issues/18891\n            //  As soon as this is resolved we can remove this hack\n            const innerRenderer = (<any>info.openAnimationPlayer)._renderer;\n            info.openAnimationInnerPlayer = innerRenderer.engine.players[innerRenderer.engine.players.length - 1];\n            info.openAnimationPlayer.onDone(() => {\n                this.onOpened.emit({ id: info.id, componentRef: info.componentRef });\n                if (info.openAnimationPlayer) {\n                    info.openAnimationPlayer.reset();\n                    info.openAnimationPlayer = null;\n                }\n\n                if (info.closeAnimationPlayer && info.closeAnimationPlayer.hasStarted()) {\n                    info.closeAnimationPlayer.reset();\n                }\n            });\n        }\n\n        //  if there is opening animation already started do nothing\n        if (info.openAnimationPlayer.hasStarted()) {\n            return;\n        }\n\n        //  if there is closing animation already started start open animation from where close one has reached\n        //  and remove close animation\n        if (info.closeAnimationPlayer && info.closeAnimationPlayer.hasStarted()) {\n            //  getPosition() returns what part of the animation is passed, e.g. 0.5 if half the animation\n            //  is done, 0.75 if 3/4 of the animation is done. As we need to start next animation from where\n            //  the previous has finished we need the amount up to 1, therefore we are subtracting what\n            //  getPosition() returns from one\n            const position = 1 - info.closeAnimationInnerPlayer.getPosition();\n            info.closeAnimationPlayer.reset();\n            info.closeAnimationPlayer = null;\n            info.openAnimationPlayer.init();\n            info.openAnimationPlayer.setPosition(position);\n        }\n\n        this.onAnimation.emit({ id: info.id, animationPlayer: info.openAnimationPlayer, animationType: 'open' });\n\n        //  to eliminate flickering show the element just before animation start\n        info.elementRef.nativeElement.parentElement.style.visibility = '';\n        info.openAnimationPlayer.play();\n    }\n\n    private playCloseAnimation(info: OverlayInfo) {\n        if (!info.closeAnimationPlayer) {\n            const animationBuilder = this.builder.build(info.settings.positionStrategy.settings.closeAnimation);\n            info.closeAnimationPlayer = animationBuilder.create(info.elementRef.nativeElement);\n\n            //  AnimationPlayer.getPosition returns always 0. To workaround this we are getting inner WebAnimationPlayer\n            //  and then getting the positions from it.\n            //  This is logged in Angular here - https://github.com/angular/angular/issues/18891\n            //  As soon as this is resolved we can remove this hack\n            const innerRenderer = (<any>info.closeAnimationPlayer)._renderer;\n            info.closeAnimationInnerPlayer = innerRenderer.engine.players[innerRenderer.engine.players.length - 1];\n\n            info.closeAnimationPlayer.onDone(() => {\n                if (info.closeAnimationPlayer) {\n                    info.closeAnimationPlayer.reset();\n                    info.closeAnimationPlayer = null;\n                }\n\n                if (info.openAnimationPlayer && info.openAnimationPlayer.hasStarted()) {\n                    info.openAnimationPlayer.reset();\n                }\n                this.onCloseDone(info);\n            });\n        }\n\n        //  if there is closing animation already started do nothing\n        if (info.closeAnimationPlayer.hasStarted()) {\n            return;\n        }\n\n        //  if there is opening animation already started start close animation from where open one has reached\n        //  and remove open animation\n        if (info.openAnimationPlayer && info.openAnimationPlayer.hasStarted()) {\n            //  getPosition() returns what part of the animation is passed, e.g. 0.5 if half the animation\n            //  is done, 0.75 if 3/4 of the animation is done. As we need to start next animation from where\n            //  the previous has finished we need the amount up to 1, therefore we are subtracting what\n            //  getPosition() returns from one\n            const position = 1 - info.openAnimationInnerPlayer.getPosition();\n            info.openAnimationPlayer.reset();\n            info.openAnimationPlayer = null;\n            info.closeAnimationPlayer.init();\n            info.closeAnimationPlayer.setPosition(position);\n        }\n\n        this.onAnimation.emit({ id: info.id, animationPlayer: info.closeAnimationPlayer, animationType: 'close' });\n        info.closeAnimationPlayer.play();\n    }\n\n    //  TODO: check if applyAnimationParams will work with complex animations\n    private applyAnimationParams(wrapperElement: HTMLElement, animationOptions: AnimationReferenceMetadata) {\n        if (!animationOptions) {\n            wrapperElement.style.transitionDuration = '0ms';\n            return;\n        }\n        if (animationOptions.type === AnimationMetadataType.AnimateRef) {\n            animationOptions = (animationOptions as AnimationAnimateRefMetadata).animation;\n        }\n        if (!animationOptions.options || !animationOptions.options.params) {\n            return;\n        }\n        const params = animationOptions.options.params as IAnimationParams;\n        if (params.duration) {\n            wrapperElement.style.transitionDuration = params.duration;\n        }\n        if (params.easing) {\n            wrapperElement.style.transitionTimingFunction = params.easing;\n        }\n    }\n\n    /** @hidden @internal */\n    public getOverlayById(id: string): OverlayInfo {\n        if (!id) {\n            return null;\n        }\n\n        const info = this._overlayInfos.find(e => e.id === id);\n        return info;\n    }\n\n    private documentClicked = (ev: MouseEvent) => {\n        //  if we get to modal overlay just return - we should not close anything under it\n        //  if we get to non-modal overlay do the next:\n        //   1. Check it has close on outside click. If not go on to next overlay;\n        //   2. If true check if click is on the element. If it is on the element we have closed\n        //  already all previous non-modal with close on outside click elements, so we return. If\n        //  not close the overlay and check next\n        for (let i = this._overlayInfos.length; i--;) {\n            const info = this._overlayInfos[i];\n            if (info.settings.modal) {\n                return;\n            }\n            if (info.settings.closeOnOutsideClick) {\n                const target = ev.target as any;\n                //  if the click is on the element do not close this overlay\n                if (!info.elementRef.nativeElement.contains(target)) {\n                    // if we should exclude position target check if the click is over it. If so do not close overlay\n                    const positionTarget = info.settings.positionStrategy.settings.target as HTMLElement;\n                    let clickOnPositionTarget = false;\n                    if (positionTarget) {\n                        clickOnPositionTarget = positionTarget.contains(target);\n                    }\n\n                    if (!(info.settings.excludePositionTarget && clickOnPositionTarget)) {\n                        //  if the click is outside click, but close animation has started do nothing\n                        if (!(info.closeAnimationPlayer && info.closeAnimationPlayer.hasStarted())) {\n                            this._hide(info.id, ev);\n                        }\n                    }\n                } else {\n                    //  TODO: should we return here, or continue with next overlays\n                    return;\n                }\n            }\n        }\n    }\n\n    private addOutsideClickListener(info: OverlayInfo) {\n        if (info.settings.closeOnOutsideClick) {\n            if (info.settings.modal) {\n                fromEvent(info.elementRef.nativeElement.parentElement.parentElement, 'click')\n                    .pipe(takeUntil(this.destroy$))\n                    .subscribe((e: Event) => this._hide(info.id, e));\n            } else if (\n                //  if all overlays minus closing overlays equals one add the handler\n                this._overlayInfos.filter(x => x.settings.closeOnOutsideClick && !x.settings.modal).length -\n                this._overlayInfos.filter(x => x.settings.closeOnOutsideClick && !x.settings.modal &&\n                    x.closeAnimationPlayer &&\n                    x.closeAnimationPlayer.hasStarted()).length === 1) {\n                this._document.addEventListener('click', this.documentClicked, true);\n            }\n        }\n    }\n\n    private removeOutsideClickListener(info: OverlayInfo) {\n        if (info.settings.modal === false) {\n            let shouldRemoveClickEventListener = true;\n            this._overlayInfos.forEach(o => {\n                if (o.settings.modal === false && o.id !== info.id) {\n                    shouldRemoveClickEventListener = false;\n                }\n            });\n\n            if (shouldRemoveClickEventListener) {\n                this._document.removeEventListener('click', this.documentClicked, true);\n            }\n        }\n    }\n\n    private addResizeHandler(id: string) {\n        const closingOverlaysCount =\n            this._overlayInfos\n                .filter(o => o.closeAnimationPlayer && o.closeAnimationPlayer.hasStarted())\n                .length;\n        if (this._overlayInfos.length - closingOverlaysCount === 1) {\n            this._document.defaultView.addEventListener('resize', this.repositionAll);\n        }\n    }\n\n    private removeResizeHandler(id: string) {\n        const closingOverlaysCount =\n            this._overlayInfos\n                .filter(o => o.closeAnimationPlayer && o.closeAnimationPlayer.hasStarted())\n                .length;\n        if (this._overlayInfos.length - closingOverlaysCount === 1) {\n            this._document.defaultView.removeEventListener('resize', this.repositionAll);\n        }\n    }\n\n    /** @hidden */\n    public repositionAll = () => {\n        for (let i = this._overlayInfos.length; i--;) {\n            this.reposition(this._overlayInfos[i].id);\n        }\n    }\n\n    /**\n     *@hidden\n     */\n    public ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n}\n","import { CancelableEventArgs, CancelableBrowserEventArgs, IBaseEventArgs } from '../core/utils';\nimport { IgxDropDownItemBaseDirective } from './drop-down-item.base';\nimport { IToggleView } from '../core/navigation/IToggleView';\nimport { EventEmitter, InjectionToken } from '@angular/core';\nimport { DisplayDensityBase } from '../core/density';\n\n/** @hidden */\nexport enum Navigate {\n    Up = -1,\n    Down = 1\n}\n\n/** Key actions that have designated handlers in IgxDropDownComponent */\nexport enum DropDownActionKey {\n    ESCAPE = 'escape',\n    ENTER = 'enter',\n    SPACE = 'space'\n}\n\n/**\n * Interface that encapsulates onSelection event arguments - old selection, new selection and cancel selection.\n * @export\n */\nexport interface ISelectionEventArgs extends CancelableEventArgs, IBaseEventArgs {\n    oldSelection: IgxDropDownItemBaseDirective;\n    newSelection: IgxDropDownItemBaseDirective;\n}\n\n/**\n * Interface for an instance of IgxDropDownNavigationDirective\n * @export\n */\nexport interface IDropDownNavigationDirective {\n    target: any;\n    handleKeyDown(event: KeyboardEvent): void;\n    onArrowDownKeyDown(event?: KeyboardEvent): void;\n    onArrowUpKeyDown(event?: KeyboardEvent): void;\n    onEndKeyDown(event?: KeyboardEvent): void;\n    onHomeKeyDown(event?: KeyboardEvent): void;\n}\n\nexport const IGX_DROPDOWN_BASE = new InjectionToken<IDropDownBase>('IgxDropDownBaseToken');\n\n/**\n * @hidden\n */\nexport interface IDropDownList extends DisplayDensityBase {\n    onSelection: EventEmitter<ISelectionEventArgs>;\n    width: string;\n    height: string;\n    id: string;\n    maxHeight: string;\n    collapsed: boolean;\n    items: IgxDropDownItemBaseDirective[];\n    headers: IgxDropDownItemBaseDirective[];\n    focusedItem: IgxDropDownItemBaseDirective;\n    navigateFirst(): void;\n    navigateLast(): void;\n    navigateNext(): void;\n    navigatePrev(): void;\n    navigateItem(newIndex: number, direction?: Navigate): void;\n    onItemActionKey(key: DropDownActionKey, event?: Event): void;\n}\n\n/**\n * @hidden\n */\nexport interface IDropDownBase extends IDropDownList, IToggleView {\n    selectedItem: any;\n    onOpening: EventEmitter<CancelableEventArgs>;\n    onOpened: EventEmitter<void>;\n    onClosing: EventEmitter<CancelableBrowserEventArgs>;\n    onClosed: EventEmitter<void>;\n    allowItemsFocus?: boolean;\n    setSelectedItem(index: number): void;\n    selectItem(item: IgxDropDownItemBaseDirective, event?: Event): void;\n}\n\n","import { PositionSettings, Size } from '../utilities';\nimport { GlobalPositionStrategy } from './global-position-strategy';\n\n/**\n * Positions the element inside the containing outlet based on the directions passed in trough PositionSettings.\n * These are Top/Middle/Bottom for verticalDirection and Left/Center/Right for horizontalDirection\n */\nexport class ContainerPositionStrategy extends GlobalPositionStrategy {\n    constructor(settings?: PositionSettings) {\n        super(settings);\n    }\n\n    /** @inheritdoc */\n    position(contentElement: HTMLElement, size?: Size, document?: Document, initialCall?: boolean): void {\n        contentElement.classList.add('igx-overlay__content--relative');\n        contentElement.parentElement.classList.add('igx-overlay__wrapper--flex-container');\n        this.setPosition(contentElement, this.settings);\n    }\n}\n\n","import { IPositionStrategy } from './IPositionStrategy';\nimport {\n  HorizontalAlignment,\n  Point,\n  PositionSettings,\n  Size,\n  Util,\n  VerticalAlignment\n} from './../utilities';\nimport { scaleInVerTop, scaleOutVerTop } from '../../../animations/main';\nimport { ConnectedFit } from '../utilities';\n\n/**\n * Positions the element based on the directions and start point passed in trough PositionSettings.\n * It is possible to either pass a start point or an HTMLElement as a positioning base.\n */\nexport class ConnectedPositioningStrategy implements IPositionStrategy {\n  private _defaultSettings: PositionSettings = {\n    // default Point(0, 0) in getPointFromPositionsSettings\n    target: null,\n    horizontalDirection: HorizontalAlignment.Right,\n    verticalDirection: VerticalAlignment.Bottom,\n    horizontalStartPoint: HorizontalAlignment.Left,\n    verticalStartPoint: VerticalAlignment.Bottom,\n    openAnimation: scaleInVerTop,\n    closeAnimation: scaleOutVerTop,\n    minSize: { width: 0, height: 0 }\n  };\n\n  /** @inheritdoc */\n  public settings: PositionSettings;\n\n  constructor(settings?: PositionSettings) {\n    this.settings = Object.assign({}, this._defaultSettings, settings);\n  }\n\n  /**\n   * Obtains the ClientRect objects for the required elements - target and element to position\n   * @returns target and element ClientRect objects\n   */\n  protected calculateElementRectangles(contentElement): { targetRect: ClientRect, elementRect: ClientRect } {\n      return {\n          targetRect: Util.getTargetRect(this.settings),\n          elementRect: contentElement.getBoundingClientRect() as ClientRect\n      };\n  }\n\n  /** @inheritdoc */\n  position(contentElement: HTMLElement, size: Size, document?: Document, initialCall?: boolean): void {\n    const rects =  this.calculateElementRectangles(contentElement);\n    this.setStyle(contentElement, rects.targetRect, rects.elementRect, {});\n  }\n\n  /**\n   * @inheritdoc\n   * Creates clone of this position strategy\n   * @returns clone of this position strategy\n   */\n  clone(): IPositionStrategy {\n    return Util.cloneInstance(this);\n  }\n\n  /**\n   * Sets element's style which effectively positions provided element according\n   * to provided position settings\n   * @param element Element to position\n   * @param targetRect Bounding rectangle of strategy target\n   * @param elementRect Bounding rectangle of the element\n   */\n  protected setStyle(element: HTMLElement, targetRect: ClientRect, elementRect: ClientRect, connectedFit: ConnectedFit) {\n      const horizontalOffset = connectedFit.horizontalOffset ? connectedFit.horizontalOffset : 0;\n      const verticalOffset = connectedFit.verticalOffset ? connectedFit.verticalOffset : 0;\n    const startPoint: Point = {\n      x: targetRect.right + targetRect.width * this.settings.horizontalStartPoint + horizontalOffset,\n      y: targetRect.bottom + targetRect.height * this.settings.verticalStartPoint + verticalOffset\n    };\n    const wrapperRect: ClientRect = element.parentElement.getBoundingClientRect();\n\n    //  clean up styles - if auto position strategy is chosen we may pass here several times\n    element.style.right = '';\n    element.style.left = '';\n    element.style.bottom = '';\n    element.style.top = '';\n\n    switch (this.settings.horizontalDirection) {\n      case HorizontalAlignment.Left:\n        element.style.right = `${Math.round(wrapperRect.right - startPoint.x)}px`;\n        break;\n      case HorizontalAlignment.Center:\n        element.style.left = `${Math.round(startPoint.x - wrapperRect.left - elementRect.width / 2)}px`;\n        break;\n      case HorizontalAlignment.Right:\n        element.style.left = `${Math.round(startPoint.x - wrapperRect.left)}px`;\n        break;\n    }\n\n    switch (this.settings.verticalDirection) {\n      case VerticalAlignment.Top:\n        element.style.bottom = `${Math.round(wrapperRect.bottom - startPoint.y)}px`;\n        break;\n      case VerticalAlignment.Middle:\n        element.style.top = `${Math.round(startPoint.y - wrapperRect.top - elementRect.height / 2)}px`;\n        break;\n      case VerticalAlignment.Bottom:\n        element.style.top = `${Math.round(startPoint.y - wrapperRect.top)}px`;\n        break;\n    }\n  }\n}\n","import { ConnectedPositioningStrategy } from './connected-positioning-strategy';\nimport { HorizontalAlignment, VerticalAlignment, PositionSettings, Size, Util, ConnectedFit, OutOfViewPort } from '../utilities';\n\nexport abstract class BaseFitPositionStrategy extends ConnectedPositioningStrategy {\n    protected _initialSize: Size;\n    protected _initialSettings: PositionSettings;\n\n    /** @inheritdoc */\n    position(contentElement: HTMLElement, size: Size, document?: Document, initialCall?: boolean): void {\n        const rects = super.calculateElementRectangles(contentElement);\n        const connectedFit: ConnectedFit = {};\n        if (initialCall) {\n            connectedFit.targetRect = rects.targetRect;\n            connectedFit.contentElementRect = rects.elementRect;\n            this._initialSettings = this._initialSettings || Object.assign({}, this.settings);\n            this.settings = Object.assign({}, this._initialSettings);\n            connectedFit.viewPortRect = Util.getViewportRect(document);\n            this.updateViewPortFit(connectedFit);\n            if (this.shouldFitInViewPort(connectedFit)) {\n                this.fitInViewport(contentElement, connectedFit);\n            }\n        }\n        this.setStyle(contentElement, rects.targetRect, rects.elementRect, connectedFit);\n    }\n\n    /**\n     * Checks if element can fit in viewport and updates provided connectedFit\n     * with the result\n     * @param connectedFit connectedFit to update\n     */\n    protected updateViewPortFit(connectedFit: ConnectedFit) {\n        connectedFit.left = this.calculateLeft(\n            connectedFit.targetRect,\n            connectedFit.contentElementRect,\n            this.settings.horizontalStartPoint,\n            this.settings.horizontalDirection,\n            connectedFit.horizontalOffset ? connectedFit.horizontalOffset : 0);\n        connectedFit.right = connectedFit.left + connectedFit.contentElementRect.width;\n        connectedFit.fitHorizontal = {\n                back: Math.round(connectedFit.left),\n                forward: Math.round(connectedFit.viewPortRect.width - connectedFit.right)\n            };\n\n        connectedFit.top = this.calculateTop(\n            connectedFit.targetRect,\n            connectedFit.contentElementRect,\n            this.settings.verticalStartPoint,\n            this.settings.verticalDirection,\n            connectedFit.verticalOffset ? connectedFit.verticalOffset : 0);\n        connectedFit.bottom = connectedFit.top + connectedFit.contentElementRect.height;\n        connectedFit.fitVertical = {\n            back: Math.round(connectedFit.top),\n            forward: Math.round(connectedFit.viewPortRect.height - connectedFit.bottom)\n        };\n    }\n\n    /**\n     * Calculates the position of the left border of the element if it gets positioned\n     * with provided start point and direction\n     * @param targetRect Rectangle of the target where element is attached\n     * @param elementRect Rectangle of the element\n     * @param startPoint Start point of the target\n     * @param direction Direction in which to show the element\n     */\n    protected calculateLeft(\n        targetRect: ClientRect, elementRect: ClientRect, startPoint: HorizontalAlignment, direction: HorizontalAlignment, offset?: number):\n        number {\n        return targetRect.right + targetRect.width * startPoint + elementRect.width * direction + offset;\n    }\n\n    /**\n     * Calculates the position of the top border of the element if it gets positioned\n     * with provided position settings related to the target\n     * @param targetRect Rectangle of the target where element is attached\n     * @param elementRect Rectangle of the element\n     * @param startPoint Start point of the target\n     * @param direction Direction in which to show the element\n     */\n    protected calculateTop(\n        targetRect: ClientRect, elementRect: ClientRect, startPoint: VerticalAlignment, direction: VerticalAlignment, offset?: number):\n        number {\n        return targetRect.bottom + targetRect.height * startPoint + elementRect.height * direction + offset;\n    }\n\n    /**\n     * Returns whether the element should fit in viewport\n     * @param connectedFit connectedFit object containing all necessary parameters\n     */\n    protected shouldFitInViewPort(connectedFit: ConnectedFit) {\n        return connectedFit.fitHorizontal.back < 0 || connectedFit.fitHorizontal.forward < 0 ||\n            connectedFit.fitVertical.back < 0 || connectedFit.fitVertical.forward < 0;\n    }\n\n    /**\n     * Fits the element into viewport according to the position settings\n     * @param element element to fit in viewport\n     * @param connectedFit connectedFit object containing all necessary parameters\n     */\n    protected abstract fitInViewport(\n        element: HTMLElement,\n        connectedFit: ConnectedFit);\n}\n","import { VerticalAlignment, HorizontalAlignment, ConnectedFit } from './../utilities';\nimport { BaseFitPositionStrategy } from './base-fit-position-strategy';\n\n/**\n * Positions the element as in **Connected** positioning strategy and re-positions the element in\n * the view port (calculating a different start point) in case the element is partially getting out of view\n */\nexport class AutoPositionStrategy extends BaseFitPositionStrategy {\n\n    /** @inheritdoc */\n    protected fitInViewport(element: HTMLElement, connectedFit: ConnectedFit) {\n        const transformString: string[] = [];\n        if (connectedFit.fitHorizontal.back < 0 || connectedFit.fitHorizontal.forward < 0) {\n            if (this.canFlipHorizontal(connectedFit)) {\n                this.flipHorizontal();\n            } else {\n                const horizontalPush = this.horizontalPush(connectedFit);\n                transformString.push(`translateX(${horizontalPush}px)`);\n            }\n        }\n\n        if (connectedFit.fitVertical.back < 0 || connectedFit.fitVertical.forward < 0) {\n            if (this.canFlipVertical(connectedFit)) {\n                this.flipVertical();\n            } else {\n                const verticalPush = this.verticalPush(connectedFit);\n                transformString.push(`translateY(${verticalPush}px)`);\n            }\n        }\n\n        element.style.transform = transformString.join(' ').trim();\n    }\n\n    /**\n     * Checks if element can be flipped without get off the viewport\n     * @param connectedFit connectedFit object containing all necessary parameters\n     * @returns true if element can be flipped and stain in viewport\n     */\n    private canFlipHorizontal(connectedFit: ConnectedFit): boolean {\n        //  HorizontalAlignment can be Left = -1; Center = -0.5 or Right = 0.\n        //  To virtually flip direction and start point (both are HorizontalAlignment) we can do this:\n        //  flippedAlignment = (-1) * (HorizontalAlignment + 1)\n        //  this way:\n        //  (-1) * (Left + 1) = 0 = Right\n        //  (-1) * (Center + 1) = -0.5 = Center\n        //  (-1) * (Right + 1) = -1 = Left\n        const flippedStartPoint = (-1) * (this.settings.horizontalStartPoint + 1);\n        const flippedDirection = (-1) * (this.settings.horizontalDirection + 1);\n\n        const leftBorder = this.calculateLeft(\n            connectedFit.targetRect, connectedFit.contentElementRect, flippedStartPoint, flippedDirection, 0);\n        const rightBorder = leftBorder + connectedFit.contentElementRect.width;\n        return 0 < leftBorder && rightBorder < connectedFit.viewPortRect.width;\n    }\n\n    /**\n     * Checks if element can be flipped without get off the viewport\n     * @param connectedFit connectedFit object containing all necessary parameters\n     * @returns true if element can be flipped and stain in viewport\n     */\n    private canFlipVertical(connectedFit: ConnectedFit): boolean {\n        const flippedStartPoint = (-1) * (this.settings.verticalStartPoint + 1);\n        const flippedDirection = (-1) * (this.settings.verticalDirection + 1);\n\n        const topBorder = this.calculateTop(\n            connectedFit.targetRect, connectedFit.contentElementRect, flippedStartPoint, flippedDirection, 0);\n        const bottomBorder = topBorder + connectedFit.contentElementRect.height;\n        return 0 < topBorder && bottomBorder < connectedFit.viewPortRect.height;\n    }\n\n    /**\n     * Flips direction and start point of the position settings\n     */\n    private flipHorizontal() {\n        switch (this.settings.horizontalDirection) {\n            case HorizontalAlignment.Left:\n                this.settings.horizontalDirection = HorizontalAlignment.Right;\n                break;\n            case HorizontalAlignment.Right:\n                this.settings.horizontalDirection = HorizontalAlignment.Left;\n                break;\n        }\n        switch (this.settings.horizontalStartPoint) {\n            case HorizontalAlignment.Left:\n                this.settings.horizontalStartPoint = HorizontalAlignment.Right;\n                break;\n            case HorizontalAlignment.Right:\n                this.settings.horizontalStartPoint = HorizontalAlignment.Left;\n                break;\n        }\n    }\n\n    /**\n     * Flips direction and start point of the position settings\n     */\n    private flipVertical() {\n        switch (this.settings.verticalDirection) {\n            case VerticalAlignment.Top:\n                this.settings.verticalDirection = VerticalAlignment.Bottom;\n                break;\n            case VerticalAlignment.Bottom:\n                this.settings.verticalDirection = VerticalAlignment.Top;\n                break;\n        }\n        switch (this.settings.verticalStartPoint) {\n            case VerticalAlignment.Top:\n                this.settings.verticalStartPoint = VerticalAlignment.Bottom;\n                break;\n            case VerticalAlignment.Bottom:\n                this.settings.verticalStartPoint = VerticalAlignment.Top;\n                break;\n        }\n    }\n\n    /**\n     * Calculates necessary horizontal push according to provided connectedFit\n     * @param connectedFit connectedFit object containing all necessary parameters\n     * @returns amount of necessary translation which will push the element into viewport\n     */\n    private horizontalPush(connectedFit: ConnectedFit): number {\n        const leftExtend = connectedFit.left;\n        const rightExtend = connectedFit.right - connectedFit.viewPortRect.right;\n        //  if leftExtend < 0 overlay goes beyond left end of the screen. We should push it back with exactly\n        //  as much as it is beyond the screen.\n        //  if rightExtend > 0 overlay goes beyond right end of the screen. We should push it back with the\n        //  extend but with amount not bigger than what left between left border of screen and left border of\n        //  overlay, e.g. leftExtend\n        if (leftExtend < 0) {\n            return Math.abs(leftExtend);\n        } else if (rightExtend > 0) {\n            return - Math.min(rightExtend, leftExtend);\n        } else {\n            return 0;\n        }\n    }\n\n    /**\n     * Calculates necessary vertical push according to provided connectedFit\n     * @param connectedFit connectedFit object containing all necessary parameters\n     * @returns amount of necessary translation which will push the element into viewport\n     */\n    private verticalPush(connectedFit: ConnectedFit): number {\n        const topExtend = connectedFit.top;\n        const bottomExtend = connectedFit.bottom - connectedFit.viewPortRect.bottom;\n        if (topExtend < 0) {\n            return Math.abs(topExtend);\n        } else if (bottomExtend > 0) {\n            return - Math.min(bottomExtend, topExtend);\n        } else {\n            return 0;\n        }\n    }\n}\n","import { BaseFitPositionStrategy } from './base-fit-position-strategy';\nimport { HorizontalAlignment, VerticalAlignment, ConnectedFit } from '../utilities';\n\n/**\n * Positions the element as in **Connected** positioning strategy and resize the element\n * to fit in the view port in case the element is partially getting out of view\n */\nexport class ElasticPositionStrategy extends BaseFitPositionStrategy {\n    /** @inheritdoc */\n    protected fitInViewport(element: HTMLElement, connectedFit: ConnectedFit) {\n        element.classList.add('igx-overlay__content--elastic');\n        const transformString: string[] = [];\n        if (connectedFit.fitHorizontal.back < 0 || connectedFit.fitHorizontal.forward < 0) {\n            const maxReduction = Math.max(0, connectedFit.contentElementRect.width - this.settings.minSize.width);\n            const leftExtend = Math.max(0, -connectedFit.fitHorizontal.back);\n            const rightExtend = Math.max(0, -connectedFit.fitHorizontal.forward);\n            const reduction = Math.min(maxReduction, leftExtend + rightExtend);\n            element.style.width = `${connectedFit.contentElementRect.width - reduction}px`;\n\n            //  if direction is center and element goes off the screen in left direction we should push the\n            //  element to the right. Prevents left still going out of view when normally positioned\n            if (this.settings.horizontalDirection === HorizontalAlignment.Center) {\n                //  the amount of translation depends on whether element goes off the screen to the left,\n                //  to the right or in both directions, as well as how much it goes of the screen and finally\n                //  on the minSize. The translation should be proportional between left and right extend\n                //  taken from the reduction\n                const translation = leftExtend * reduction / (leftExtend + rightExtend);\n                if (translation > 0) {\n                    transformString.push(`translateX(${translation}px)`);\n                }\n            }\n        }\n\n        if (connectedFit.fitVertical.back < 0 || connectedFit.fitVertical.forward < 0) {\n            const maxReduction = Math.max(0, connectedFit.contentElementRect.height - this.settings.minSize.height);\n            const topExtend = Math.max(0, -connectedFit.fitVertical.back);\n            const bottomExtend = Math.max(0, -connectedFit.fitVertical.forward);\n            const reduction = Math.min(maxReduction, topExtend + bottomExtend);\n            element.style.height = `${connectedFit.contentElementRect.height - reduction}px`;\n\n            //  if direction is middle and element goes off the screen in top direction we should push the\n            //  element to the bottom. Prevents top still going out of view when normally positioned\n            if (this.settings.verticalDirection === VerticalAlignment.Middle) {\n                //  the amount of translation depends on whether element goes off the screen to the top,\n                //  to the bottom or in both directions, as well as how much it goes of the screen and finally\n                //  on the minSize. The translation should be proportional between top and bottom extend\n                //  taken from the reduction\n                const translation = topExtend * reduction / (topExtend + bottomExtend);\n                if (translation > 0) {\n                    transformString.push(`translateY(${translation}px)`);\n                }\n            }\n        }\n        element.style.transform = transformString.join(' ').trim();\n    }\n}\n","import { IgxOverlayService } from '../overlay';\nimport { ScrollStrategy } from './scroll-strategy';\nimport { NgZone } from '@angular/core';\n\n/**\n * On scroll reposition the overlay content.\n */\nexport class AbsoluteScrollStrategy extends ScrollStrategy {\n    private _initialized = false;\n    private _document: Document;\n    private _overlayService: IgxOverlayService;\n    private _id: string;\n    private _scrollContainer: HTMLElement;\n    private _zone: NgZone;\n\n    constructor(scrollContainer?: HTMLElement) {\n        super(scrollContainer);\n        this._scrollContainer = scrollContainer;\n    }\n\n    /** @inheritdoc */\n    public initialize(document: Document, overlayService: IgxOverlayService, id: string) {\n        if (this._initialized) {\n            return;\n        }\n        this._overlayService = overlayService;\n        this._id = id;\n        this._document = document;\n        this._zone = overlayService.getOverlayById(id).ngZone;\n        this._initialized = true;\n    }\n\n    /** @inheritdoc */\n    public attach(): void {\n        if (this._zone) {\n            this._zone.runOutsideAngular(() => {\n                this.addScrollEventListener();\n            });\n        } else {\n            this.addScrollEventListener();\n        }\n    }\n\n    /** @inheritdoc */\n    public detach(): void {\n        if (this._scrollContainer) {\n            this._scrollContainer.removeEventListener('scroll', this.onScroll, true);\n        } else {\n            this._document.removeEventListener('scroll', this.onScroll, true);\n        }\n\n        this._initialized = false;\n    }\n\n    private addScrollEventListener() {\n        if (this._scrollContainer) {\n            this._scrollContainer.addEventListener('scroll', this.onScroll, true);\n        } else {\n            this._document.addEventListener('scroll', this.onScroll, true);\n        }\n    }\n\n    private onScroll = (e: Event) => {\n        const overlayInfo = this._overlayService.getOverlayById(this._id);\n        if (!overlayInfo) {\n            return;\n        }\n        if (!overlayInfo.elementRef.nativeElement.contains(e.target)) {\n            this._overlayService.reposition(this._id);\n        }\n    }\n}\n","import { IgxOverlayService } from '../overlay';\nimport { ScrollStrategy } from './scroll-strategy';\n\n/**\n * Prevents scrolling while the overlay content is shown.\n */\nexport class BlockScrollStrategy extends ScrollStrategy {\n    private _initialized = false;\n    private _document: Document;\n    private _initialScrollTop: number;\n    private _initialScrollLeft: number;\n    private _sourceElement: Element;\n\n    constructor(scrollContainer?: HTMLElement) {\n        super(scrollContainer);\n    }\n\n    /** @inheritdoc */\n    public initialize(document: Document, overlayService: IgxOverlayService, id: string) {\n        if (this._initialized) {\n            return;\n        }\n\n        this._document = document;\n        this._initialized = true;\n    }\n\n    /** @inheritdoc */\n    public attach(): void {\n        this._document.addEventListener('scroll', this.onScroll, true);\n    }\n\n    /** @inheritdoc */\n    public detach(): void {\n        this._document.removeEventListener('scroll', this.onScroll, true);\n        this._sourceElement = null;\n        this._initialScrollTop = 0;\n        this._initialScrollLeft = 0;\n        this._initialized = false;\n    }\n\n    private onScroll = (ev: Event) => {\n        ev.preventDefault();\n        if (!this._sourceElement || this._sourceElement !== ev.target) {\n            this._sourceElement = ev.target as Element;\n            this._initialScrollTop = this._sourceElement.scrollTop;\n            this._initialScrollLeft = this._sourceElement.scrollLeft;\n        }\n\n        this._sourceElement.scrollTop = this._initialScrollTop;\n        this._sourceElement.scrollLeft = this._initialScrollLeft;\n    }\n}\n","import { IgxOverlayService } from '../overlay';\nimport { ScrollStrategy } from './scroll-strategy';\n\n/**\n * Uses a tolerance and closes the shown component upon scrolling if the tolerance is exceeded\n */\nexport class CloseScrollStrategy extends ScrollStrategy {\n    private _document: Document;\n    private _overlayService: IgxOverlayService;\n    private _id: string;\n    private initialScrollTop: number;\n    private initialScrollLeft: number;\n    private cumulativeScrollTop: number;\n    private cumulativeScrollLeft: number;\n    private _threshold: number;\n    private _initialized = false;\n    private _sourceElement: Element;\n    private _scrollContainer: HTMLElement;\n\n    constructor(scrollContainer?: HTMLElement) {\n        super(scrollContainer);\n        this._scrollContainer = scrollContainer;\n        this._threshold = 10;\n        this.cumulativeScrollTop = 0;\n        this.cumulativeScrollLeft = 0;\n    }\n\n    /** @inheritdoc */\n    public initialize(document: Document, overlayService: IgxOverlayService, id: string) {\n        if (this._initialized) {\n            return;\n        }\n        this._overlayService = overlayService;\n        this._id = id;\n        this._document = document;\n        this._initialized = true;\n    }\n\n    /** @inheritdoc */\n    public attach(): void {\n        if (this._scrollContainer) {\n            this._scrollContainer.addEventListener('scroll', this.onScroll);\n            this._sourceElement = this._scrollContainer;\n        } else {\n            this._document.addEventListener('scroll', this.onScroll);\n            if (document.documentElement.scrollHeight > document.documentElement.clientHeight) {\n                this._sourceElement = document.documentElement as Element;\n            } else if (document.body.scrollHeight > document.body.clientHeight) {\n                this._sourceElement = document.body as Element;\n            }\n        }\n\n        if (!this._sourceElement) {\n            return;\n        }\n\n        this.cumulativeScrollTop = 0;\n        this.cumulativeScrollLeft = 0;\n        this.initialScrollTop = this._sourceElement.scrollTop;\n        this.initialScrollLeft = this._sourceElement.scrollLeft;\n    }\n\n    /** @inheritdoc */\n    public detach(): void {\n        // TODO: check why event listener removes only on first call and remains on each next!!!\n        if (this._scrollContainer) {\n            this._scrollContainer.removeEventListener('scroll', this.onScroll);\n        } else {\n            this._document.removeEventListener('scroll', this.onScroll);\n        }\n        this._sourceElement = null;\n        this.cumulativeScrollTop = 0;\n        this.cumulativeScrollLeft = 0;\n        this.initialScrollTop = 0;\n        this.initialScrollLeft = 0;\n        this._initialized = false;\n    }\n\n    private onScroll = (ev: Event) => {\n        if (!this._sourceElement) {\n            return;\n        }\n\n        this.cumulativeScrollTop += this._sourceElement.scrollTop;\n        this.cumulativeScrollLeft += this._sourceElement.scrollLeft;\n\n        if (Math.abs(this.cumulativeScrollTop - this.initialScrollTop) > this._threshold ||\n            Math.abs(this.cumulativeScrollLeft - this.initialScrollLeft) > this._threshold) {\n            this._document.removeEventListener('scroll', this.onScroll, true);\n            this._overlayService.hide(this._id);\n        }\n    }\n}\n","import { TransactionService, Transaction, State } from './transaction';\nimport { EventEmitter, Injectable } from '@angular/core';\nimport { isObject, mergeObjects, cloneValue } from '../../core/utils';\n\n@Injectable()\nexport class IgxBaseTransactionService<T extends Transaction, S extends State> implements TransactionService<T, S> {\n    protected _isPending = false;\n    protected _pendingTransactions: T[] = [];\n    protected _pendingStates: Map<any, S> = new Map();\n\n    /**\n     * @inheritdoc\n     */\n    public get canRedo(): boolean {\n        return false;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public get canUndo(): boolean {\n        return false;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public get enabled(): boolean {\n        return this._isPending;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public onStateUpdate = new EventEmitter<void>();\n\n    /**\n     * @inheritdoc\n     */\n    public add(transaction: T, recordRef?: any): void {\n        if (this._isPending) {\n            this.updateState(this._pendingStates, transaction, recordRef);\n            this._pendingTransactions.push(transaction);\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    getTransactionLog(id?: any): T[] { return []; }\n\n    /**\n     * @inheritdoc\n     */\n    undo(): void { }\n\n    /**\n     * @inheritdoc\n     */\n    redo(): void { }\n\n    /**\n     * @inheritdoc\n     */\n    getAggregatedChanges(mergeChanges: boolean): T[] {\n        const result: T[] = [];\n        this._pendingStates.forEach((state: S, key: any) => {\n            const value = mergeChanges ? this.getAggregatedValue(key, mergeChanges) : state.value;\n            result.push({ id: key, newValue: value, type: state.type } as T);\n        });\n        return result;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public getState(id: any): S {\n        return this._pendingStates.get(id);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public getAggregatedValue(id: any, mergeChanges: boolean): any {\n        const state = this._pendingStates.get(id);\n        if (!state) {\n            return null;\n        }\n        if (mergeChanges) {\n            return this.updateValue(state);\n        }\n        return state.value;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    commit(data: any[], id?: any): void { }\n\n    /**\n     * @inheritdoc\n     */\n    clear(id?: any): void {\n        this._pendingStates.clear();\n        this._pendingTransactions = [];\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public startPending(): void {\n        this._isPending = true;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public endPending(commit: boolean): void {\n        this._isPending = false;\n        this._pendingStates.clear();\n        this._pendingTransactions = [];\n    }\n\n\n    /**\n     * Updates the provided states collection according to passed transaction and recordRef\n     * @param states States collection to apply the update to\n     * @param transaction Transaction to apply to the current state\n     * @param recordRef Reference to the value of the record in data source, if any, where transaction should be applied\n     */\n    protected updateState(states: Map<any, S>, transaction: T, recordRef?: any): void {\n        let state = states.get(transaction.id);\n        if (state) {\n            if (isObject(state.value)) {\n                mergeObjects(state.value, transaction.newValue);\n            } else {\n                state.value = transaction.newValue;\n            }\n        } else {\n            state = { value: cloneValue(transaction.newValue), recordRef: recordRef, type: transaction.type } as S;\n            states.set(transaction.id, state);\n        }\n    }\n\n    /**\n     * Updates the recordRef of the provided state with all the changes in the state. Accepts primitive and object value types\n     * @param state State to update value for\n     * @returns updated value including all the changes in provided state\n     */\n    protected updateValue(state: S) {\n        return this.mergeValues(state.recordRef, state.value);\n    }\n\n    /**\n     * Merges second values in first value and the result in empty object. If values are primitive type\n     * returns second value if exists, or first value.\n     * @param first Value to merge into\n     * @param second Value to merge\n     */\n    protected mergeValues<U>(first: U, second: U): U {\n        let result: U;\n        if (isObject(first) || isObject(second)) {\n            result = mergeObjects(mergeObjects({}, first), second);\n        } else {\n            result = second ? second : first;\n        }\n        return result;\n    }\n}\n","import { Transaction, State, TransactionType } from './transaction';\nimport { IgxBaseTransactionService } from './base-transaction';\nimport { EventEmitter, Injectable } from '@angular/core';\nimport { isObject, mergeObjects, cloneValue } from '../../core/utils';\n\n@Injectable()\nexport class IgxTransactionService<T extends Transaction, S extends State> extends IgxBaseTransactionService<T, S> {\n    protected _transactions: T[] = [];\n    protected _redoStack: { transaction: T, recordRef: any }[][] = [];\n    protected _undoStack: { transaction: T, recordRef: any }[][] = [];\n    protected _states: Map<any, S> = new Map();\n\n    /**\n     * @inheritdoc\n     */\n    get canUndo(): boolean {\n        return this._undoStack.length > 0;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    get canRedo(): boolean {\n        return this._redoStack.length > 0;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public onStateUpdate = new EventEmitter<void>();\n\n    /**\n     * @inheritdoc\n     */\n    public add(transaction: T, recordRef?: any): void {\n        const states = this._isPending ? this._pendingStates : this._states;\n        this.verifyAddedTransaction(states, transaction, recordRef);\n        this.addTransaction(transaction, states, recordRef);\n    }\n\n    protected addTransaction(transaction: T, states: Map<any, S>, recordRef?: any) {\n        this.updateState(states, transaction, recordRef);\n\n        const transactions = this._isPending ? this._pendingTransactions : this._transactions;\n        transactions.push(transaction);\n\n        if (!this._isPending) {\n            this._undoStack.push([{ transaction, recordRef }]);\n            this._redoStack = [];\n            this.onStateUpdate.emit();\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public getTransactionLog(id?: any): T[] {\n        if (id !== undefined) {\n            return this._transactions.filter(t => t.id === id);\n        }\n        return [...this._transactions];\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public getAggregatedChanges(mergeChanges: boolean): T[] {\n        const result: T[] = [];\n        this._states.forEach((state: S, key: any) => {\n            const value = mergeChanges ? this.mergeValues(state.recordRef, state.value) : state.value;\n            result.push({ id: key, newValue: value, type: state.type } as T);\n        });\n        return result;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public getState(id: any, pending: boolean = false): S {\n        return pending ? this._pendingStates.get(id) : this._states.get(id);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public get enabled(): boolean {\n        return true;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public getAggregatedValue(id: any, mergeChanges: boolean): any {\n        const state = this._states.get(id);\n        const pendingState = super.getState(id);\n\n        //  if there is no state and there is no pending state return null\n        if (!state && !pendingState) {\n            return null;\n        }\n\n        const pendingChange = super.getAggregatedValue(id, false);\n        const change = state && state.value;\n        let aggregatedValue = this.mergeValues(change, pendingChange);\n        if (mergeChanges) {\n            const originalValue = state ? state.recordRef : pendingState.recordRef;\n            aggregatedValue = this.mergeValues(originalValue, aggregatedValue);\n        }\n        return aggregatedValue;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public endPending(commit: boolean): void {\n        this._isPending = false;\n        if (commit) {\n            const actions: { transaction: T, recordRef: any }[] = [];\n            // don't use addTransaction due to custom undo handling\n            for (const transaction of this._pendingTransactions) {\n                const pendingState = this._pendingStates.get(transaction.id);\n                this._transactions.push(transaction);\n                this.updateState(this._states, transaction, pendingState.recordRef);\n                actions.push({ transaction, recordRef: pendingState.recordRef });\n            }\n\n            this._undoStack.push(actions);\n            this._redoStack = [];\n\n            this.onStateUpdate.emit();\n        }\n        super.endPending(commit);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public commit(data: any[], id?: any): void {\n        if (id !== undefined) {\n            const state = this.getState(id);\n            if (state) {\n                this.updateRecord(data, state);\n            }\n        } else {\n            this._states.forEach((s: S) => {\n                this.updateRecord(data, s);\n            });\n        }\n        this.clear(id);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public clear(id?: any): void {\n        if (id !== undefined) {\n            this._transactions = this._transactions.filter(t => t.id !== id);\n            this._states.delete(id);\n            //  Undo stack is an array of actions. Each action is array of transaction like objects\n            //  We are going trough all the actions. For each action we are filtering out transactions\n            //  with provided id. Finally if any action ends up as empty array we are removing it from\n            //  undo stack\n            this._undoStack = this._undoStack.map(a => a.filter(t => t.transaction.id !== id)).filter(a => a.length > 0);\n        } else {\n            this._transactions = [];\n            this._states.clear();\n            this._undoStack = [];\n        }\n        this._redoStack = [];\n        this.onStateUpdate.emit();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public undo(): void {\n        if (this._undoStack.length <= 0) {\n            return;\n        }\n\n        const lastActions: { transaction: T, recordRef: any }[] = this._undoStack.pop();\n        this._transactions.splice(this._transactions.length - lastActions.length);\n        this._redoStack.push(lastActions);\n\n        this._states.clear();\n        for (const currentActions of this._undoStack) {\n            for (const transaction of currentActions) {\n                this.updateState(this._states, transaction.transaction, transaction.recordRef);\n            }\n        }\n\n        this.onStateUpdate.emit();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public redo(): void {\n        if (this._redoStack.length > 0) {\n            let actions: { transaction: T, recordRef: any, useInUndo?: boolean }[];\n            actions = this._redoStack.pop();\n            for (const action of actions) {\n                this.updateState(this._states, action.transaction, action.recordRef);\n                this._transactions.push(action.transaction);\n            }\n\n            this._undoStack.push(actions);\n            this.onStateUpdate.emit();\n        }\n    }\n\n    /**\n     * Verifies if the passed transaction is correct. If not throws an exception.\n     * @param transaction Transaction to be verified\n     */\n    protected verifyAddedTransaction(states: Map<any, S>, transaction: T, recordRef?: any): void {\n        const state = states.get(transaction.id);\n        switch (transaction.type) {\n            case TransactionType.ADD:\n                if (state) {\n                    //  cannot add same item twice\n                    throw new Error(`Cannot add this transaction. Transaction with id: ${transaction.id} has been already added.`);\n                }\n                break;\n            case TransactionType.DELETE:\n            case TransactionType.UPDATE:\n                if (state && state.type === TransactionType.DELETE) {\n                    //  cannot delete or update deleted items\n                    throw new Error(`Cannot add this transaction. Transaction with id: ${transaction.id} has been already deleted.`);\n                }\n                if (!state && !recordRef && !this._isPending) {\n                    //  cannot initially add transaction or delete item with no recordRef\n                    throw new Error(`Cannot add this transaction. This is first transaction of type ${transaction.type} ` +\n                        `for id ${transaction.id}. For first transaction of this type recordRef is mandatory.`);\n                }\n                break;\n        }\n    }\n\n    /**\n     * Updates the provided states collection according to passed transaction and recordRef\n     * @param states States collection to apply the update to\n     * @param transaction Transaction to apply to the current state\n     * @param recordRef Reference to the value of the record in data source, if any, where transaction should be applied\n     */\n    protected updateState(states: Map<any, S>, transaction: T, recordRef?: any): void {\n        let state = states.get(transaction.id);\n        //  if TransactionType is ADD simply add transaction to states;\n        //  if TransactionType is DELETE:\n        //    - if there is state with this id of type ADD remove it from the states;\n        //    - if there is state with this id of type UPDATE change its type to DELETE;\n        //    - if there is no state with this id add transaction to states;\n        //  if TransactionType is UPDATE:\n        //    - if there is state with this id of type ADD merge new value and state recordRef into state new value\n        //    - if there is state with this id of type UPDATE merge new value into state new value\n        //    - if there is state with this id and state type is DELETE change its type to UPDATE\n        //    - if there is no state with this id add transaction to states;\n        if (state) {\n            switch (transaction.type) {\n                case TransactionType.DELETE:\n                    if (state.type === TransactionType.ADD) {\n                        states.delete(transaction.id);\n                    } else if (state.type === TransactionType.UPDATE) {\n                        state.value = transaction.newValue;\n                        state.type = TransactionType.DELETE;\n                    }\n                    break;\n                case TransactionType.UPDATE:\n                    if (isObject(state.value)) {\n                        if (state.type === TransactionType.ADD) {\n                            state.value = this.mergeValues(state.value, transaction.newValue);\n                        }\n                        if (state.type === TransactionType.UPDATE) {\n                            mergeObjects(state.value, transaction.newValue);\n                        }\n                    } else {\n                        state.value = transaction.newValue;\n                    }\n            }\n        } else {\n            state = { value: cloneValue(transaction.newValue), recordRef: recordRef, type: transaction.type } as S;\n            states.set(transaction.id, state);\n        }\n\n        //  should not clean pending state. This will happen automatically on endPending call\n        if (!this._isPending) {\n            this.cleanState(transaction.id, states);\n        }\n    }\n\n    /**\n     * Compares the state with recordRef and clears all duplicated values. If any state ends as\n     * empty object removes it from states.\n     * @param state State to clean\n     */\n    protected cleanState(id: any, states: Map<any, S>): void {\n        const state = states.get(id);\n        //  do nothing if\n        //  there is no state, or\n        //  there is no state value (e.g. DELETED transaction), or\n        //  there is no recordRef (e.g. ADDED transaction)\n        if (state && state.value && state.recordRef) {\n            //  if state's value is object compare each key with the ones in recordRef\n            //  if values in any key are the same delete it from state's value\n            //  if state's value is not object, simply compare with recordRef and remove\n            //  the state if they are equal\n            if (isObject(state.recordRef)) {\n                for (const key of Object.keys(state.value)) {\n                    if (JSON.stringify(state.recordRef[key]) === JSON.stringify(state.value[key])) {\n                        delete state.value[key];\n                    }\n                }\n\n                //  if state's value is empty remove the state from the states, only if state is not DELETE type\n                if (state.type !== TransactionType.DELETE && Object.keys(state.value).length === 0) {\n                    states.delete(id);\n                }\n            } else {\n                if (state.recordRef === state.value) {\n                    states.delete(id);\n                }\n            }\n        }\n    }\n\n    /**\n     * Updates state related record in the provided data\n     * @param data Data source to update\n     * @param state State to update data from\n     */\n    protected updateRecord(data: any[], state: S) {\n        const index = data.findIndex(i => JSON.stringify(i) === JSON.stringify(state.recordRef || {}));\n        switch (state.type) {\n            case TransactionType.ADD:\n                data.push(state.value);\n                break;\n            case TransactionType.DELETE:\n                if (0 <= index && index < data.length) {\n                    data.splice(index, 1);\n                }\n                break;\n            case TransactionType.UPDATE:\n                if (0 <= index && index < data.length) {\n                    data[index] = this.updateValue(state);\n                }\n                break;\n        }\n    }\n}\n","import { HierarchicalTransaction, HierarchicalState, TransactionType } from './transaction';\nimport { Injectable } from '@angular/core';\nimport { IgxTransactionService } from './igx-transaction';\nimport { DataUtil } from '../../data-operations/data-util';\nimport { cloneValue } from '../../core/utils';\n\n/** @experimental @hidden */\n@Injectable()\nexport class IgxHierarchicalTransactionService<T extends HierarchicalTransaction, S extends HierarchicalState>\n    extends IgxTransactionService<T, S> {\n\n    public getAggregatedChanges(mergeChanges: boolean): T[] {\n        const result: T[] = [];\n        this._states.forEach((state: S, key: any) => {\n            const value = mergeChanges ? this.mergeValues(state.recordRef, state.value) : cloneValue(state.value);\n            this.clearArraysFromObject(value);\n            result.push({ id: key, path: state.path, newValue: value, type: state.type } as T);\n        });\n        return result;\n    }\n\n    protected updateState(states: Map<any, S>, transaction: T, recordRef?: any): void {\n        super.updateState(states, transaction, recordRef);\n\n        //  if transaction has no path, e.g. flat data source, get out\n        if (!transaction.path) {\n            return;\n        }\n\n        const currentState = states.get(transaction.id);\n        if (currentState) {\n            currentState.path = transaction.path;\n        }\n\n        //  if transaction has path, Hierarchical data source, and it is DELETE\n        //  type transaction for all child rows remove ADD states and update\n        //  transaction type and value of UPDATE states\n        if (transaction.type === TransactionType.DELETE) {\n            states.forEach((v: S, k: any) => {\n                if (v.path && v.path.indexOf(transaction.id) !== -1) {\n                    switch (v.type) {\n                        case TransactionType.ADD:\n                            states.delete(k);\n                            break;\n                        case TransactionType.UPDATE:\n                            states.get(k).type = TransactionType.DELETE;\n                            states.get(k).value = null;\n                    }\n                }\n            });\n        }\n    }\n\n    /**\n     * Applies all transactions over the provided data\n     * @param data Data source to update\n     * @param primaryKey Primary key of the hierarchical data\n     * @param childDataKey Kye of child data collection\n     * @param id Optional record id to commit transactions for\n     */\n    public commit(data: any[], primaryKey?: any, childDataKey?: any, id?: any): void {\n        if (childDataKey !== undefined) {\n            let transactions = this.getAggregatedChanges(true);\n            if (id !== undefined) {\n                transactions = transactions.filter(t => t.id === id);\n            }\n            DataUtil.mergeHierarchicalTransactions(data, transactions, childDataKey, primaryKey, true);\n        } else {\n            super.commit(data, id);\n        }\n        this.clear(id);\n    }\n\n    //  TODO: remove this method. Force cloning to strip child arrays when needed instead\n    private clearArraysFromObject(obj: {}) {\n        if (obj) {\n            for (const prop of Object.keys(obj)) {\n                if (Array.isArray(obj[prop])) {\n                    delete obj[prop];\n                }\n            }\n        }\n    }\n}\n\n","import {\n    ChangeDetectorRef,\n    Directive,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    HostListener,\n    Input,\n    NgModule,\n    OnDestroy,\n    OnInit,\n    Optional,\n    Output,\n    Inject\n} from '@angular/core';\nimport { IgxNavigationService, IToggleView } from '../../core/navigation';\nimport { IgxOverlayService } from '../../services/overlay/overlay';\nimport { OverlaySettings, OverlayEventArgs, ConnectedPositioningStrategy, AbsoluteScrollStrategy, IPositionStrategy } from '../../services';\nimport { filter, takeUntil } from 'rxjs/operators';\nimport { Subscription, Subject, MonoTypeOperatorFunction } from 'rxjs';\nimport { OverlayClosingEventArgs } from '../../services/overlay/utilities';\nimport { CancelableEventArgs, CancelableBrowserEventArgs, IBaseEventArgs } from '../../core/utils';\n\n@Directive({\n    exportAs: 'toggle',\n    selector: '[igxToggle]'\n})\nexport class IgxToggleDirective implements IToggleView, OnInit, OnDestroy {\n    protected _overlayId: string;\n    private destroy$ = new Subject<boolean>();\n    private _overlaySubFilter: [MonoTypeOperatorFunction<OverlayEventArgs>, MonoTypeOperatorFunction<OverlayEventArgs>] = [\n        filter(x => x.id === this._overlayId),\n        takeUntil(this.destroy$)\n    ];\n    private _overlayOpenedSub: Subscription;\n    private _overlayClosingSub: Subscription;\n    private _overlayClosedSub: Subscription;\n    private _overlayAppendedSub: Subscription;\n\n    /**\n     * Emits an event after the toggle container is opened.\n     *\n     * ```typescript\n     * onToggleOpened(event) {\n     *    alert(\"Toggle opened!\");\n     * }\n     * ```\n     *\n     * ```html\n     * <div\n     *   igxToggle\n     *   (onOpened)='onToggleOpened($event)'>\n     * </div>\n     * ```\n     */\n    @Output()\n    public onOpened = new EventEmitter();\n\n    /**\n     * Emits an event before the toggle container is opened.\n     *\n     * ```typescript\n     * onToggleOpening(event) {\n     *  alert(\"Toggle opening!\");\n     * }\n     * ```\n     *\n     * ```html\n     * <div\n     *   igxToggle\n     *   (onOpening)='onToggleOpening($event)'>\n     * </div>\n     * ```\n     */\n    @Output()\n    public onOpening = new EventEmitter<CancelableEventArgs & IBaseEventArgs>();\n\n    /**\n     * Emits an event after the toggle container is closed.\n     *\n     * ```typescript\n     * onToggleClosed(event) {\n     *  alert(\"Toggle closed!\");\n     * }\n     * ```\n     *\n     * ```html\n     * <div\n     *   igxToggle\n     *   (onClosed)='onToggleClosed($event)'>\n     * </div>\n     * ```\n     */\n    @Output()\n    public onClosed = new EventEmitter();\n\n    /**\n     * Emits an event before the toggle container is closed.\n     *\n     * ```typescript\n     * onToggleClosing(event) {\n     *  alert(\"Toggle closing!\");\n     * }\n     * ```\n     *\n     * ```html\n     * <div\n     *  igxToggle\n     *  (onClosing)='onToggleClosing($event)'>\n     * </div>\n     * ```\n     */\n    @Output()\n    public onClosing = new EventEmitter<CancelableBrowserEventArgs & IBaseEventArgs>();\n\n    private _collapsed = true;\n    /**\n     * @hidden\n     */\n    public get collapsed(): boolean {\n        return this._collapsed;\n    }\n\n    /**\n     * Identifier which is registered into `IgxNavigationService`\n     *\n     * ```typescript\n     * let myToggleId = this.toggle.id;\n     * ```\n     */\n    @Input()\n    public id: string;\n\n    /**\n     * @hidden\n     */\n    public get element(): HTMLElement {\n        return this.elementRef.nativeElement;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-toggle--hidden')\n    @HostBinding('attr.aria-hidden')\n    public get hiddenClass() {\n        return this.collapsed;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-toggle')\n    public get defaultClass() {\n        return !this.collapsed;\n    }\n\n    /**\n     * @hidden\n     */\n    constructor(\n        private elementRef: ElementRef,\n        private cdr: ChangeDetectorRef,\n        @Inject(IgxOverlayService) protected overlayService: IgxOverlayService,\n        @Optional() private navigationService: IgxNavigationService) {\n    }\n\n    /**\n     * Emits an event after the toggle element is appended to the overlay container.\n     *\n     * ```typescript\n     * onAppended() {\n     *  alert(\"Content appended!\");\n     * }\n     * ```\n     *\n     * ```html\n     * <div\n     *   igxToggle\n     *   (onAppended)='onToggleAppended()'>\n     * </div>\n     * ```\n     */\n    @Output()\n    public onAppended = new EventEmitter();\n\n    /**\n     * Opens the toggle.\n     *\n     * ```typescript\n     * this.myToggle.open();\n     * ```\n     */\n    public open(overlaySettings?: OverlaySettings) {\n        //  if there is open animation do nothing\n        //  if toggle is not collapsed and there is no close animation do nothing\n        const info = this.overlayService.getOverlayById(this._overlayId);\n        const hasOpenAnimation = info ? info.openAnimationPlayer : false;\n        const hasCloseAnimation = info ? info.closeAnimationPlayer : false;\n        if (hasOpenAnimation || !(this._collapsed || hasCloseAnimation)) {\n            return;\n        }\n\n        if (!info) {\n            this._overlayId = this.overlayService.attach(this.elementRef, overlaySettings);\n        }\n\n        this._collapsed = false;\n        this.cdr.detectChanges();\n\n        const openEventArgs: CancelableEventArgs = { cancel: false };\n        this.onOpening.emit(openEventArgs);\n        if (openEventArgs.cancel) {\n            this._collapsed = true;\n            this.cdr.detectChanges();\n            return;\n        }\n\n        this.unsubscribe();\n\n        this._overlayAppendedSub = this.overlayService.onAppended.pipe(...this._overlaySubFilter).subscribe(() => {\n            this.onAppended.emit();\n        });\n\n        this._overlayOpenedSub = this.overlayService.onOpened.pipe(...this._overlaySubFilter).subscribe(() => {\n            this.onOpened.emit();\n        });\n\n        this._overlayClosingSub = this.overlayService\n        .onClosing\n        .pipe(...this._overlaySubFilter)\n        .subscribe((e: OverlayClosingEventArgs) => {\n            const eventArgs: CancelableBrowserEventArgs = { cancel: false, event: e.event };\n            this.onClosing.emit(eventArgs);\n            e.cancel = eventArgs.cancel;\n\n            //  in case event is not canceled this will close the toggle and we need to unsubscribe.\n            //  Otherwise if for some reason, e.g. close on outside click, close() gets called before\n            //  onClosed was fired we will end with calling onClosing more than once\n            if (!e.cancel) {\n                this.clearSubscription(this._overlayClosingSub);\n            }\n        });\n\n        this._overlayClosedSub = this.overlayService.onClosed\n        .pipe(...this._overlaySubFilter)\n        .subscribe(this.overlayClosed);\n\n        this.overlayService.show(this._overlayId, overlaySettings);\n    }\n\n    /**\n     * Closes the toggle.\n     *\n     * ```typescript\n     * this.myToggle.close();\n     * ```\n     */\n    public close() {\n        //  if toggle is collapsed do nothing\n        //  if there is close animation do nothing, toggle will close anyway\n        const info = this.overlayService.getOverlayById(this._overlayId);\n        const hasCloseAnimation = info ? info.closeAnimationPlayer : false;\n        if (this._collapsed || hasCloseAnimation) {\n            return;\n        }\n\n        this.overlayService.hide(this._overlayId);\n    }\n\n    /**\n     * Opens or closes the toggle, depending on its current state.\n     *\n     * ```typescript\n     * this.myToggle.toggle();\n     * ```\n     */\n    public toggle(overlaySettings?: OverlaySettings) {\n        //  if toggle is collapsed call open\n        //  if there is close animation call open\n        if (this.collapsed || this.isClosing) {\n            this.open(overlaySettings);\n        } else {\n            this.close();\n        }\n    }\n\n    /** @hidden @internal */\n    public get isClosing() {\n        const info = this.overlayService.getOverlayById(this._overlayId);\n        return info ? info.closeAnimationPlayer : false;\n    }\n\n    /**\n     * Repositions the toggle.\n     * ```typescript\n     * this.myToggle.reposition();\n     * ```\n     */\n    public reposition() {\n        this.overlayService.reposition(this._overlayId);\n    }\n\n    /**\n     * Offsets the content along the corresponding axis by the provided amount\n     */\n    setOffset(deltaX: number, deltaY: number) {\n        this.overlayService.setOffset(this._overlayId, deltaX, deltaY);\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        if (this.navigationService && this.id) {\n            this.navigationService.add(this.id, this);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        if (this.navigationService && this.id) {\n            this.navigationService.remove(this.id);\n        }\n        if (!this.collapsed && this._overlayId) {\n            this.overlayService.hide(this._overlayId);\n        }\n        this.unsubscribe();\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    private overlayClosed = () => {\n        this._collapsed = true;\n        this.cdr.detectChanges();\n        delete this._overlayId;\n        this.unsubscribe();\n        this.onClosed.emit();\n    }\n\n    private unsubscribe() {\n        this.clearSubscription(this._overlayOpenedSub);\n        this.clearSubscription(this._overlayClosingSub);\n        this.clearSubscription(this._overlayClosedSub);\n        this.clearSubscription(this._overlayAppendedSub);\n    }\n\n    private clearSubscription(subscription: Subscription) {\n        if (subscription && !subscription.closed) {\n            subscription.unsubscribe();\n        }\n    }\n}\n\n@Directive({\n    exportAs: 'toggle-action',\n    selector: '[igxToggleAction]'\n})\nexport class IgxToggleActionDirective implements OnInit {\n    protected _overlayDefaults: OverlaySettings;\n\n    /**\n     * Provide settings that control the toggle overlay positioning, interaction and scroll behavior.\n     * ```typescript\n     * const settings: OverlaySettings = {\n     *      closeOnOutsideClick: false,\n     *      modal: false\n     *  }\n     * ```\n     * ---\n     * ```html\n     * <!--set-->\n     * <div igxToggleAction [overlaySettings]=\"settings\"></div>\n     * ```\n     */\n    @Input()\n    public overlaySettings: OverlaySettings;\n\n    /**\n     * Determines where the toggle element overlay should be attached.\n     *\n     * ```html\n     * <!--set-->\n     * <div igxToggleAction [igxToggleOutlet]=\"outlet\"></div>\n     * ```\n     * Where `outlet` in an instance of `IgxOverlayOutletDirective` or an `ElementRef`\n     */\n    @Input('igxToggleOutlet')\n    public outlet: IgxOverlayOutletDirective | ElementRef;\n\n    /**\n     * @hidden\n     */\n    @Input('igxToggleAction')\n    set target(target: any) {\n        if (target !== null && target !== '') {\n            this._target = target;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    get target(): any {\n        if (typeof this._target === 'string') {\n            return this.navigationService.get(this._target);\n        }\n        return this._target;\n    }\n\n    protected _target: IToggleView | string;\n\n    constructor(private element: ElementRef, @Optional() private navigationService: IgxNavigationService) { }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        this._overlayDefaults = {\n            positionStrategy: new ConnectedPositioningStrategy({ target: this.element.nativeElement }),\n            scrollStrategy: new AbsoluteScrollStrategy(),\n            closeOnOutsideClick: true,\n            modal: false,\n            excludePositionTarget: true\n        };\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('click')\n    public onClick() {\n        if (this.outlet) {\n            this._overlayDefaults.outlet = this.outlet;\n        }\n\n        const clonedSettings = Object.assign({}, this._overlayDefaults, this.overlaySettings);\n        this.updateOverlaySettings(clonedSettings);\n        this.target.toggle(clonedSettings);\n    }\n\n    /**\n     * Updates provided overlay settings\n     * @param settings settings to update\n     * @returns returns updated copy of provided overlay settings\n     */\n    protected updateOverlaySettings(settings: OverlaySettings): OverlaySettings {\n        if (settings && settings.positionStrategy) {\n            const positionStrategyClone: IPositionStrategy = settings.positionStrategy.clone();\n            positionStrategyClone.settings.target = this.element.nativeElement;\n            settings.positionStrategy = positionStrategyClone;\n        }\n\n        return settings;\n    }\n}\n\n/**\n * Mark an element as an igxOverlay outlet container.\n * Directive instance is exported as `overlay-outlet` to be assigned to templates variables:\n * ```html\n * <div igxOverlayOutlet #outlet=\"overlay-outlet\"></div>\n * ```\n */\n@Directive({\n    exportAs: 'overlay-outlet',\n    selector: '[igxOverlayOutlet]'\n})\nexport class IgxOverlayOutletDirective {\n    constructor(public element: ElementRef) { }\n\n    /** @hidden */\n    public get nativeElement() {\n        return this.element.nativeElement;\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxToggleDirective, IgxToggleActionDirective, IgxOverlayOutletDirective],\n    exports: [IgxToggleDirective, IgxToggleActionDirective, IgxOverlayOutletDirective],\n    providers: [IgxNavigationService]\n})\nexport class IgxToggleModule { }\n","import { InjectionToken, Input, Output, EventEmitter, DoCheck, OnInit, Directive, NgModule, Optional, Inject } from '@angular/core';\nimport { IBaseEventArgs } from './utils';\n\n\n/**\n * Defines the posible values of the components' display density.\n */\nexport enum DisplayDensity {\n    comfortable = 'comfortable',\n    cosy = 'cosy',\n    compact = 'compact'\n}\n\n/**\n * Describes the object used to configure the DisplayDensity in Angular DI.\n */\nexport interface IDisplayDensityOptions {\n    displayDensity: DisplayDensity;\n}\n\nexport interface IDensityChangedEventArgs extends IBaseEventArgs {\n    oldDensity: DisplayDensity;\n    newDensity: DisplayDensity;\n}\n\n/**\n * Defines the DisplayDensity DI token.\n */\nexport const DisplayDensityToken = new InjectionToken<IDisplayDensityOptions>('DisplayDensity');\n\n/**\n * Base class containing all logic required for implementing DisplayDensity.\n */\n@Directive({\n    selector: '[igxDisplayDensityBase]'\n})\n// tslint:disable-next-line: directive-class-suffix\nexport class DisplayDensityBase implements DoCheck, OnInit {\n    protected _displayDensity: DisplayDensity;\n\n     /**\n     * @hidden\n     */\n    public initialDensity: DisplayDensity;\n\n    /**\n     * Returns the theme of the component.\n     * The default theme is `comfortable`.\n     * Available options are `comfortable`, `cosy`, `compact`.\n     * ```typescript\n     * let componentTheme = this.component.displayDensity;\n     * ```\n     */\n    @Input()\n    public get displayDensity(): DisplayDensity | string {\n        return this._displayDensity ||\n            ((this.displayDensityOptions && this.displayDensityOptions.displayDensity) || DisplayDensity.comfortable);\n    }\n\n    /**\n     * Sets the theme of the component.\n     */\n    public set displayDensity(val: DisplayDensity | string) {\n        const currentDisplayDensity = this._displayDensity;\n        this._displayDensity = val as DisplayDensity;\n\n        if (currentDisplayDensity !== this._displayDensity) {\n            const densityChangedArgs: IDensityChangedEventArgs = {\n                oldDensity: currentDisplayDensity,\n                newDensity: this._displayDensity\n            };\n\n            this.onDensityChanged.emit(densityChangedArgs);\n        }\n    }\n\n    @Output()\n    public onDensityChanged = new EventEmitter<IDensityChangedEventArgs>();\n\n    protected oldDisplayDensityOptions: IDisplayDensityOptions = { displayDensity: DisplayDensity.comfortable };\n\n\n    constructor(@Optional() @Inject(DisplayDensityToken) protected displayDensityOptions: IDisplayDensityOptions) {\n        Object.assign(this.oldDisplayDensityOptions, displayDensityOptions);\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit(): void {\n        this.initialDensity = this._displayDensity;\n    }\n\n    public ngDoCheck() {\n        if (!this._displayDensity && this.displayDensityOptions &&\n                this.oldDisplayDensityOptions.displayDensity !== this.displayDensityOptions.displayDensity) {\n            const densityChangedArgs: IDensityChangedEventArgs = {\n                oldDensity: this.oldDisplayDensityOptions.displayDensity,\n                newDensity: this.displayDensityOptions.displayDensity\n            };\n\n            this.onDensityChanged.emit(densityChangedArgs);\n            this.oldDisplayDensityOptions = Object.assign(this.oldDisplayDensityOptions, this.displayDensityOptions);\n        }\n    }\n\n    /**\n     * Given a style class of a component/element returns the modified version of it based\n     * on the current display density.\n     */\n    protected getComponentDensityClass(baseStyleClass: string): string {\n        switch (this.displayDensity) {\n            case DisplayDensity.cosy:\n                return `${baseStyleClass}--${DisplayDensity.cosy}`;\n            case DisplayDensity.compact:\n                return `${baseStyleClass}--${DisplayDensity.compact}`;\n            default:\n                return baseStyleClass;\n        }\n    }\n}\n\n@NgModule({\n    declarations: [\n        DisplayDensityBase\n    ],\n    exports: [\n        DisplayDensityBase\n    ]\n})\nexport class IgxDisplayDensityModule {}\n","import { Injectable } from '@angular/core';\n\n/** @hidden */\n@Injectable({\n    providedIn: 'root',\n})\nexport class IgxSelectionAPIService {\n    /**\n     * If primaryKey is defined, then multiple selection is based on the primaryKey, and it is array of numbers, strings, etc.\n     * If the primaryKey is omitted, then selection is based on the item data\n     */\n    protected selection: Map<string,  Set<any>> = new Map<string, Set<any>>();\n\n    /**\n     * Get current component selection.\n     * @param componentID ID of the component.\n     */\n    public get(componentID: string): Set<any> {\n        return this.selection.get(componentID);\n    }\n\n    /**\n     * Set new component selection.\n     * @param componentID ID of the component.\n     * @param newSelection The new component selection to be set.\n     */\n    public set(componentID: string, newSelection: Set<any>) {\n        if (!componentID) {\n            throw Error('Invalid value for component id!');\n        }\n        this.selection.set(componentID, newSelection);\n    }\n\n    /**\n     * Clears selection for component.\n     * @param componentID ID of the component.\n     */\n    public clear(componentID: string) {\n        this.selection.set(componentID, this.get_empty());\n    }\n\n    /**\n     * Get current component selection length.\n     * @param componentID ID of the component.\n     */\n    public size(componentID: string): number {\n        const sel = this.get(componentID);\n        return sel ? sel.size : 0;\n    }\n\n    /**\n     * Creates new selection that consist of the new item added to the current component selection.\n     * The returned collection is new Set,\n     * therefore if you want to update component selection you need to call in addition the set_selection() method\n     * or instead use the select_item() one.\n     * @param componentID ID of the component, which we add new item to.\n     * @param itemID ID of the item to add to component selection.\n     * @param sel Used internally only by the selection (add_items method) to accumulate selection for multiple items.\n     *\n     * @returns Selection after the new item is added.\n     */\n    public add_item(componentID: string, itemID, sel?: Set<any>): Set<any> {\n        if (!sel) {\n            sel = new Set(this.get(componentID));\n        }\n        if (sel === undefined) {\n            sel = this.get_empty();\n        }\n        if (!itemID && itemID !== 0) {\n            throw Error('Invalid value for item id!');\n        }\n        sel.add(itemID);\n        return sel;\n    }\n\n    /**\n     * Creates new selection that consist of the new items added to the current component selection.\n     * The returned collection is new Set,\n     * therefore if you want to update component selection you need to call in addition the set_selection() method\n     * or instead use the select_items() one.\n     * @param componentID ID of the component, which we add new items to.\n     * @param itemIDs Array of IDs of the items to add to component selection.\n     * @param clearSelection If true it will clear previous selection.\n     *\n     * @returns Selection after the new items are added.\n     */\n    public add_items(componentID: string, itemIDs: any[], clearSelection?: boolean): Set<any> {\n        let selection: Set<any>;\n        if (clearSelection) {\n            selection = this.get_empty();\n        } else if (itemIDs && itemIDs.length === 0) {\n            selection = new Set(this.get(componentID));\n        }\n        itemIDs.forEach((item) => selection = this.add_item(componentID, item, selection));\n        return selection;\n    }\n\n    /**\n     * Add item to the current component selection.\n     * @param componentID ID of the component, which we add new item to.\n     * @param itemID ID of the item to add to component selection.\n     * @param sel Used internally only by the selection (select_items method) to accumulate selection for multiple items.\n     */\n    public select_item(componentID: string, itemID, sel?: Set<any>) {\n        this.set(componentID, this.add_item(componentID, itemID, sel));\n    }\n\n    /**\n     * Add items to the current component selection.\n     * @param componentID ID of the component, which we add new items to.\n     * @param itemIDs Array of IDs of the items to add to component selection.\n     * @param clearSelection If true it will clear previous selection.\n     */\n    public select_items(componentID: string, itemID: any[], clearSelection?: boolean) {\n        this.set(componentID, this.add_items(componentID, itemID, clearSelection));\n    }\n\n    /**\n     * Creates new selection that consist of the new items excluded from the current component selection.\n     * The returned collection is new Set,\n     * therefore if you want to update component selection you need to call in addition the set_selection() method\n     * or instead use the deselect_item() one.\n     * @param componentID ID of the component, which we remove items from.\n     * @param itemID ID of the item to remove from component selection.\n     * @param sel Used internally only by the selection (delete_items method) to accumulate deselected items.\n     *\n     * @returns Selection after the item is removed.\n     */\n    public delete_item(componentID: string, itemID, sel?: Set<any>) {\n        if (!sel) {\n            sel = new Set(this.get(componentID));\n        }\n        if (sel === undefined) {\n            return;\n        }\n        sel.delete(itemID);\n        return sel;\n    }\n\n    /**\n     * Creates new selection that consist of the new items removed to the current component selection.\n     * The returned collection is new Set,\n     * therefore if you want to update component selection you need to call in addition the set_selection() method\n     * or instead use the deselect_items() one.\n     * @param componentID ID of the component, which we remove items from.\n     * @param itemID ID of the items to remove from component selection.\n     *\n     * @returns Selection after the items are removed.\n     */\n    public delete_items(componentID: string, itemIDs: any[]): Set<any> {\n        let selection: Set<any>;\n        itemIDs.forEach((deselectedItem) => selection = this.delete_item(componentID, deselectedItem, selection));\n        return selection;\n    }\n\n    /**\n     * Remove item from the current component selection.\n     * @param componentID ID of the component, which we remove item from.\n     * @param itemID ID of the item to remove from component selection.\n     * @param sel Used internally only by the selection (deselect_items method) to accumulate selection for multiple items.\n     */\n    public deselect_item(componentID: string, itemID, sel?: Set<any>) {\n        this.set(componentID, this.delete_item(componentID, itemID, sel));\n    }\n\n    /**\n     * Remove items to the current component selection.\n     * @param componentID ID of the component, which we add new items to.\n     * @param itemIDs Array of IDs of the items to add to component selection.\n     */\n    public deselect_items(componentID: string, itemID: any[], clearSelection?: boolean) {\n        this.set(componentID, this.delete_items(componentID, itemID));\n    }\n\n    /**\n     * Check if the item is selected in the component selection.\n     * @param componentID ID of the component.\n     * @param itemID ID of the item to search.\n     *\n     * @returns If item is selected.\n     */\n    public is_item_selected(componentID: string, itemID): boolean {\n        const sel = this.get(componentID);\n        if (!sel) {\n            return false;\n        }\n        return sel.has(itemID);\n    }\n\n    /**\n     * Get first element in the selection.\n     * This is correct when we have only one item in the collection (for single selection purposes)\n     * and the method returns that item.\n     * @param componentID ID of the component.\n     *\n     * @returns First element in the set.\n     */\n    public first_item(componentID: string) {\n        const sel = this.get(componentID);\n        if (sel && sel.size > 0) {\n            return sel.values().next().value;\n       }\n    }\n\n    /**\n     * Returns whether all items are selected.\n     * @param componentID ID of the component.\n     * @param dataCount: number Number of items in the data.\n     *\n     * @returns If all items are selected.\n     */\n    public are_all_selected(componentID: string, dataCount: number): boolean {\n        return dataCount > 0 && dataCount === this.size(componentID);\n    }\n\n    /**\n     * Returns whether any of the items is selected.\n     * @param componentID ID of the component.\n     * @param data Entire data array.\n     *\n     * @returns If there is any item selected.\n     */\n    public are_none_selected(componentID: string): boolean {\n        return this.size(componentID) === 0;\n    }\n\n    /**\n     * Get all primary key values from a data array. If there isn't a primary key defined that the entire data is returned instead.\n     * @param data Entire data array.\n     * @param primaryKey Data primary key.\n     *\n     * @returns Array of identifiers, either primary key values or the entire data array.\n     */\n    public get_all_ids(data, primaryKey?) {\n        // If primaryKey is 0, this should still map to the property\n        return primaryKey !== undefined && primaryKey !== null ? data.map((x) => x[primaryKey]) : data;\n    }\n\n    /**\n     * Returns empty selection collection.\n     * @returns empty set.\n    */\n    public get_empty() {\n        return new Set();\n    }\n}\n","import { Component, Input, HostBinding } from '@angular/core';\n\nlet NEXT_ID = 0;\n/**\n * The `<igx-drop-down-item>` is a container intended for row items in\n * a `<igx-drop-down>` container.\n */\n@Component({\n    selector: 'igx-drop-down-item-group',\n    template: `\n        <label id=\"{{labelId}}\">{{ label }}</label>\n        <ng-content select=\"igx-drop-down-item\"></ng-content>\n    `\n})\nexport class IgxDropDownGroupComponent {\n    private _id = NEXT_ID++;\n\n    /**\n     * @hidden @internal\n     */\n    public get labelId(): string {\n        return `igx-item-group-label-${this._id}`;\n    }\n\n    @HostBinding(`attr.aria-labelledby`)\n    public get labelledBy(): string {\n        return this.labelId;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.role')\n    public role = 'group';\n\n    /** @hidden @internal */\n    @HostBinding('class.igx-drop-down__group')\n    public groupClass = true;\n    /**\n     * Sets/gets if the item group is disabled\n     *\n     * ```typescript\n     * const myDropDownGroup: IgxDropDownGroupComponent = this.dropdownGroup;\n     * // get\n     * ...\n     * const groupState: boolean = myDropDownGroup.disabled;\n     * ...\n     * //set\n     * ...\n     * myDropDownGroup,disabled = false;\n     * ...\n     * ```\n     *\n     * ```html\n     * <igx-drop-down-item-group [label]=\"'My Items'\" [disabled]=\"true\">\n     *     <igx-drop-down-item *ngFor=\"let item of items[index]\" [value]=\"item.value\">\n     *         {{ item.text }}\n     *     </igx-drop-down-item>\n     * </igx-drop-down-item-group>\n     * ```\n     *\n     * **NOTE:** All items inside of a disabled drop down group will be treated as disabled\n     */\n    @Input()\n    @HostBinding(`attr.aria-disabled`)\n    @HostBinding('class.igx-drop-down__group--disabled')\n    public disabled = false;\n\n    /**\n     * Sets/gets the label of the item group\n     *\n     * ```typescript\n     * const myDropDownGroup: IgxDropDownGroupComponent = this.dropdownGroup;\n     * // get\n     * ...\n     * const myLabel: string = myDropDownGroup.label;\n     * ...\n     * // set\n     * ...\n     * myDropDownGroup.label = 'My New Label';\n     * ...\n     * ```\n     *\n     * ```html\n     * <igx-drop-down-item-group [label]=\"'My new Label'\">\n     *      ...\n     * </igx-drop-down-item-group>\n     * ```\n    */\n    @Input()\n    public label: string;\n}\n","import { IDropDownBase, IGX_DROPDOWN_BASE } from './drop-down.common';\nimport { Directive, Input, HostBinding, HostListener, ElementRef, Optional, Inject, DoCheck, Output, EventEmitter } from '@angular/core';\nimport { IgxSelectionAPIService } from '../core/selection';\nimport { DeprecateProperty, showMessage } from '../core/deprecateDecorators';\nimport { IgxDropDownGroupComponent } from './drop-down-group.component';\n\nlet NEXT_ID = 0;\nlet warningShown = false;\n\n/**\n * An abstract class defining a drop-down item:\n * With properties / styles for selection, highlight, height\n * Bindable property for passing data (`value: any`)\n * Parent component (has to be used under a parent with type `IDropDownBase`)\n * Method for handling click on Host()\n */\n@Directive({\n    selector: '[igxDropDownItemBase]'\n})\nexport class IgxDropDownItemBaseDirective implements DoCheck {\n    /**\n     * @hidden\n     */\n    protected _focused = false;\n    protected _selected = false;\n    protected _index = null;\n    protected _disabled = false;\n    protected get hasIndex(): boolean {\n        return this._index !== null && this._index !== undefined;\n    }\n\n    /**\n     * Sets/gets the `id` of the item.\n     * ```html\n     * <igx-drop-down-item [id] = 'igx-drop-down-item-0'></igx-drop-down-item>\n     * ```\n     * ```typescript\n     * let itemId =  this.item.id;\n     * ```\n     * @memberof IgxSelectItemComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-drop-down-item-${NEXT_ID++}`;\n\n    /**\n     * @hidden @internal\n     */\n    public get itemID() {\n        return this;\n    }\n\n    /**\n     * The data index of the dropdown item.\n     *\n     * ```typescript\n     * // get the data index of the selected dropdown item\n     * let selectedItemIndex = this.dropdown.selectedItem.index\n     * ```\n     */\n    @Input()\n    public get index(): number {\n        if (this._index === null) {\n            warningShown = showMessage(\n                'IgxDropDownItemBaseDirective: Automatic index is deprecated.' +\n                'Bind in the template instead using `<igx-drop-down-item [index]=\"i\"` instead.`',\n                warningShown);\n            return this.itemIndex;\n        }\n        return this._index;\n    }\n\n    public set index(value) {\n        this._index = value;\n    }\n\n    /**\n     * Gets/sets the value of the item if the item is databound\n     *\n     * ```typescript\n     * // usage in IgxDropDownItemComponent\n     * // get\n     * let mySelectedItemValue = this.dropdown.selectedItem.value;\n     *\n     * // set\n     * let mySelectedItem = this.dropdown.selectedItem;\n     * mySelectedItem.value = { id: 123, name: 'Example Name' }\n     *\n     * // usage in IgxComboItemComponent\n     * // get\n     * let myComboItemValue = this.combo.items[0].value;\n     * ```\n     */\n    @Input()\n    public value: any;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class.igx-drop-down__item')\n    get itemStyle(): boolean {\n        return !this.isHeader;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class.igx-drop-down__item--cosy')\n    public get itemStyleCosy() {\n        return this.dropDown.displayDensity === 'cosy' && !this.isHeader;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class.igx-drop-down__item--compact')\n    public get itemStyleCompact() {\n        return this.dropDown.displayDensity === 'compact' && !this.isHeader;\n    }\n\n    /**\n     * Sets/Gets if the item is the currently selected one in the dropdown\n     *\n     * ```typescript\n     *  let mySelectedItem = this.dropdown.selectedItem;\n     *  let isMyItemSelected = mySelectedItem.selected; // true\n     * ```\n     *\n     * Two-way data binding\n     * ```html\n     * <igx-drop-down-item [(selected)]='model.isSelected'></igx-drop-down-item>\n     * ```\n     */\n    @Input()\n    @HostBinding('attr.aria-selected')\n    @HostBinding('class.igx-drop-down__item--selected')\n    get selected(): boolean {\n        return this._selected;\n    }\n\n    set selected(value: boolean) {\n        if (this.isHeader) {\n            return;\n        }\n        this._selected = value;\n        this.selectedChange.emit(this._selected);\n    }\n\n    /**\n     *@hidden\n     */\n    @Output()\n    public selectedChange = new EventEmitter<boolean>();\n\n    /**\n     * @hidden @internal\n     */\n    @Input()\n    @DeprecateProperty(`IgxDropDownItemBaseDirective \\`isSelected\\` property is deprecated.\\n` +\n        `Use \\`selected\\` instead.`)\n    get isSelected(): boolean {\n        return this.selected;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    set isSelected(value: boolean) {\n        this.selected = value;\n    }\n\n    /**\n     * Sets/gets if the given item is focused\n     * ```typescript\n     *  let mySelectedItem = this.dropdown.selectedItem;\n     *  let isMyItemFocused = mySelectedItem.focused;\n     * ```\n     */\n    @HostBinding('class.igx-drop-down__item--focused')\n    get focused(): boolean {\n        return this.isSelectable && this._focused;\n    }\n\n    /**\n     * ```html\n     *  <igx-drop-down-item *ngFor=\"let item of items\" focused={{!item.focused}}>\n     *      <div>\n     *          {{item.field}}\n     *      </div>\n     *  </igx-drop-down-item>\n     * ```\n     */\n    set focused(value: boolean) {\n        this._focused = value;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @DeprecateProperty(`IgxDropDownItemBaseDirective \\`isFocused\\` property is depracated.\\n` +\n        `Use \\`focused\\` instead.`)\n    get isFocused(): boolean {\n        return this.focused;\n    }\n    /**\n     * @hidden @internal\n     */\n    set isFocused(value: boolean) {\n        this.focused = value;\n    }\n\n    /**\n     * Sets/gets if the given item is header\n     * ```typescript\n     *  // get\n     *  let mySelectedItem = this.dropdown.selectedItem;\n     *  let isMyItemHeader = mySelectedItem.isHeader;\n     * ```\n     *\n     * ```html\n     *  <!--set-->\n     *  <igx-dropdown-item *ngFor=\"let item of items\">\n     *      <div *ngIf=\"items.indexOf(item) === 5; then item.isHeader = true\">\n     *          {{item.field}}\n*           </div>\n     *  </igx-drop-down-item>\n     * ```\n     */\n    @Input()\n    @HostBinding('class.igx-drop-down__header')\n    public isHeader: boolean;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class.igx-drop-down__header--cosy')\n    public get headerClassCosy() {\n        return this.isHeader && this.dropDown.displayDensity === 'cosy';\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class.igx-drop-down__header--compact')\n    public get headerClassCompact() {\n        return this.isHeader && this.dropDown.displayDensity === 'compact';\n    }\n\n    /**\n     * Sets/gets if the given item is disabled\n     *\n     * ```typescript\n     *  // get\n     *  let mySelectedItem = this.dropdown.selectedItem;\n     *  let myItemIsDisabled = mySelectedItem.disabled;\n     * ```\n     *\n     * ```html\n     *  <igx-drop-down-item *ngFor=\"let item of items\" disabled={{!item.disabled}}>\n     *      <div>\n     *          {{item.field}}\n     *      </div>\n     *  </igx-drop-down-item>\n     * ```\n     * **NOTE:** Drop-down items inside of a disabled `IgxDropDownGroup` will always count as disabled\n     */\n    @Input()\n    @HostBinding('attr.aria-disabled')\n    @HostBinding('class.igx-drop-down__item--disabled')\n    public get disabled(): boolean {\n        return this.group ? this.group.disabled || this._disabled : this._disabled;\n    }\n\n    public set disabled(value: boolean) {\n        this._disabled = value;\n    }\n\n    /**\n     * Gets/sets the `role` attribute of the item. Default is 'option'.\n     *\n     * ```html\n     *  <igx-drop-down-item [role]=\"customRole\"></igx-drop-down-item>\n     * ```\n     */\n    @Input()\n    @HostBinding('attr.role')\n    public role = 'option';\n\n    /**\n     * Gets item index\n     * @hidden @internal\n     */\n    public get itemIndex(): number {\n        return this.dropDown.items.indexOf(this);\n    }\n\n    /**\n     * Gets item element height\n     * @hidden @internal\n     */\n    public get elementHeight(): number {\n        return this.elementRef.nativeElement.clientHeight;\n    }\n\n    /**\n     * Get item html element\n     * @hidden @internal\n     */\n    public get element(): ElementRef {\n        return this.elementRef;\n    }\n\n    constructor(\n        @Inject(IGX_DROPDOWN_BASE) protected dropDown: IDropDownBase,\n        protected elementRef: ElementRef,\n        @Optional() protected group: IgxDropDownGroupComponent,\n        @Optional() @Inject(IgxSelectionAPIService) protected selection?: IgxSelectionAPIService\n    ) { }\n\n    ngDoCheck(): void {\n        if (this._selected) {\n            const dropDownSelectedItem = this.dropDown.selectedItem;\n            if (!dropDownSelectedItem) {\n                this.dropDown.selectItem(this);\n            } else if (this.hasIndex\n                ? this._index !== dropDownSelectedItem.index || this.value !== dropDownSelectedItem.value :\n                this !== dropDownSelectedItem) {\n                this.dropDown.selectItem(this);\n            }\n        }\n    }\n\n    /** Returns true if the items is not a header or disabled  */\n    protected get isSelectable(): boolean {\n        return  !(this.disabled || this.isHeader);\n    }\n\n    /** If `allowItemsFocus` is enabled, keep the browser focus on the active item */\n    protected ensureItemFocus() {\n        if (this.dropDown.allowItemsFocus) {\n            const focusedItem = this.dropDown.items.find((item) => item.focused);\n            if (!focusedItem) { return; }\n            focusedItem.element.nativeElement.focus({ preventScroll: true });\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('click', ['$event'])\n    clicked(event): void {\n    }\n}\n","import {\n    Component,\n    HostBinding\n} from '@angular/core';\nimport { IgxDropDownItemBaseDirective } from './drop-down-item.base';\n\n/**\n * The `<igx-drop-down-item>` is a container intended for row items in\n * a `<igx-drop-down>` container.\n */\n@Component({\n    selector: 'igx-drop-down-item',\n    templateUrl: 'drop-down-item.component.html'\n})\nexport class IgxDropDownItemComponent extends IgxDropDownItemBaseDirective {\n    /**\n     * @inheritdoc\n     */\n    get focused(): boolean {\n        let focusedState = this._focused;\n        if (this.hasIndex) {\n            const focusedItem = this.selection.first_item(`${this.dropDown.id}-active`);\n            const focusedIndex = focusedItem ? focusedItem.index : -1;\n            focusedState = this._index === focusedIndex;\n        }\n        return this.isSelectable && focusedState;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    set focused(value: boolean) {\n        this._focused = value;\n    }\n    /**\n     * @inheritdoc\n     */\n    get selected(): boolean {\n        if (this.hasIndex) {\n            const item = this.selection.first_item(`${this.dropDown.id}`);\n            return item ? item.index === this._index && item.value === this.value : false;\n        }\n        return this._selected;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    set selected(value: boolean) {\n        if (this.isHeader) {\n            return;\n        }\n        this._selected = value;\n        this.selectedChange.emit(this._selected);\n    }\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.tabindex')\n    get setTabIndex() {\n        const shouldSetTabIndex = this.dropDown.allowItemsFocus && this.isSelectable;\n        if (shouldSetTabIndex) {\n            return 0;\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    clicked(event): void {\n        if (!this.isSelectable) {\n            this.ensureItemFocus();\n            return;\n        }\n        if (this.selection) {\n            this.dropDown.selectItem(this, event);\n        }\n    }\n}\n","import {\n    Input, HostBinding, ElementRef, QueryList, Output, EventEmitter, ChangeDetectorRef, Optional, Inject, Directive\n} from '@angular/core';\n\nimport { Navigate, ISelectionEventArgs } from './drop-down.common';\nimport { IDropDownList } from './drop-down.common';\nimport { DropDownActionKey } from './drop-down.common';\nimport { IgxDropDownItemBaseDirective } from './drop-down-item.base';\nimport { DisplayDensityBase, DisplayDensityToken, IDisplayDensityOptions } from '../core/density';\n\nlet NEXT_ID = 0;\n\n/**\n * An abstract class, defining a drop-down component, with:\n * Properties for display styles and classes\n * A collection items of type `IgxDropDownItemBaseDirective`\n * Properties and methods for navigating (highlighting/focusing) items from the collection\n * Properties and methods for selecting items from the collection\n */\n@Directive({\n    selector: '[igxDropDownBase]'\n})\nexport class IgxDropDownBaseDirective extends DisplayDensityBase implements IDropDownList {\n    protected _width;\n    protected _height;\n    protected _focusedItem: any = null;\n    protected _id = `igx-drop-down-${NEXT_ID++}`;\n\n    /**\n     * @hidden @internal\n     * Get dropdown's html element of its scroll container\n     */\n    public get scrollContainer(): HTMLElement {\n        return this.element;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public children: QueryList<IgxDropDownItemBaseDirective>;\n\n    /**\n     * Emitted when item selection is changing, before the selection completes\n     *\n     * ```html\n     * <igx-drop-down (onSelection)='handleSelection()'></igx-drop-down>\n     * ```\n     */\n    @Output()\n    public onSelection = new EventEmitter<ISelectionEventArgs>();\n\n    /**\n     *  Gets/Sets the width of the drop down\n     *\n     * ```typescript\n     * // get\n     * let myDropDownCurrentWidth = this.dropdown.width;\n     * ```\n     * ```html\n     * <!--set-->\n     * <igx-drop-down [width]='160px'></igx-drop-down>\n     * ```\n     */\n    @Input()\n    public width: string;\n\n    /**\n     * Gets/Sets the height of the drop down\n     *\n     * ```typescript\n     * // get\n     * let myDropDownCurrentHeight = this.dropdown.height;\n     * ```\n     * ```html\n     * <!--set-->\n     * <igx-drop-down [height]='400px'></igx-drop-down>\n     * ```\n     */\n    @Input()\n    public height: string;\n\n    /**\n     * Gets/Sets the drop down's id\n     *\n     * ```typescript\n     * // get\n     * let myDropDownCurrentId = this.dropdown.id;\n     * ```\n     * ```html\n     * <!--set-->\n     * <igx-drop-down [id]='newDropDownId'></igx-drop-down>\n     * ```\n     */\n    @Input()\n    public id: string;\n\n    /**\n     * Gets/Sets the drop down's container max height.\n     *\n     * ```typescript\n     * // get\n     * let maxHeight = this.dropdown.maxHeight;\n     * ```\n     * ```html\n     * <!--set-->\n     * <igx-drop-down [maxHeight]='200px'></igx-drop-down>\n     * ```\n     */\n    @Input()\n    @HostBinding('style.maxHeight')\n    public maxHeight = null;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class.igx-drop-down')\n    public cssClass = true;\n\n    /**\n     * Get all non-header items\n     *\n     * ```typescript\n     * let myDropDownItems = this.dropdown.items;\n     * ```\n     */\n    public get items(): IgxDropDownItemBaseDirective[] {\n        const items: IgxDropDownItemBaseDirective[] = [];\n        if (this.children !== undefined) {\n            for (const child of this.children.toArray()) {\n                if (!child.isHeader) {\n                    items.push(child);\n                }\n            }\n        }\n\n        return items;\n    }\n\n    /**\n     * Get all header items\n     *\n     * ```typescript\n     * let myDropDownHeaderItems = this.dropdown.headers;\n     * ```\n     */\n    public get headers(): IgxDropDownItemBaseDirective[] {\n        const headers: IgxDropDownItemBaseDirective[] = [];\n        if (this.children !== undefined) {\n            for (const child of this.children.toArray()) {\n                if (child.isHeader) {\n                    headers.push(child);\n                }\n            }\n        }\n\n        return headers;\n    }\n\n    /**\n     * Get dropdown html element\n     *\n     * ```typescript\n     * let myDropDownElement = this.dropdown.element;\n     * ```\n     */\n    public get element() {\n        return this.elementRef.nativeElement;\n    }\n\n    /**\n     * Gets if the dropdown is collapsed\n     */\n    public collapsed: boolean;\n\n    constructor(\n        protected elementRef: ElementRef,\n        protected cdr: ChangeDetectorRef,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n            super(_displayDensityOptions);\n        }\n\n    /** Keydown Handler */\n    public onItemActionKey(key: DropDownActionKey, event?: Event) {\n        switch (key) {\n            case DropDownActionKey.ENTER:\n            case DropDownActionKey.SPACE:\n                this.selectItem(this.focusedItem, event);\n                break;\n            case DropDownActionKey.ESCAPE:\n        }\n    }\n\n    /**\n     * Emits onSelection with the target item & event\n     * @hidden @internal\n     * @param newSelection the item selected\n     * @param event the event that triggered the call\n     */\n    public selectItem(newSelection?: IgxDropDownItemBaseDirective, event?: Event) {\n        this.onSelection.emit({\n            newSelection,\n            oldSelection: null,\n            cancel: false\n        });\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get focusedItem(): IgxDropDownItemBaseDirective {\n        return this._focusedItem;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public set focusedItem(item: IgxDropDownItemBaseDirective) {\n        this._focusedItem = item;\n    }\n\n    protected navigate(direction: Navigate, currentIndex?: number) {\n        let index = -1;\n        if (this._focusedItem) {\n            index = currentIndex ? currentIndex : this.focusedItem.itemIndex;\n        }\n        const newIndex = this.getNearestSiblingFocusableItemIndex(index, direction);\n        this.navigateItem(newIndex);\n    }\n\n    protected getNearestSiblingFocusableItemIndex(startIndex: number, direction: Navigate): number {\n        let index = startIndex;\n        const items = this.items;\n        while (items[index + direction] && items[index + direction].disabled) {\n            index += direction;\n        }\n\n        index += direction;\n        if (index >= 0 && index < items.length) {\n            return index;\n        } else {\n            return -1;\n        }\n    }\n\n    /**\n     * Navigates to the item on the specified index\n     * @param newIndex number - the index of the item in the `items` collection\n     */\n    public navigateItem(newIndex: number) {\n        if (newIndex !== -1) {\n            const oldItem = this._focusedItem;\n            const newItem = this.items[newIndex];\n            if (oldItem) {\n                oldItem.focused = false;\n            }\n            this.focusedItem = newItem;\n            this.scrollToHiddenItem(newItem);\n            this.focusedItem.focused = true;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public navigateFirst() {\n        this.navigate(Navigate.Down, -1);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public navigateLast() {\n        this.navigate(Navigate.Up, this.items.length);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public navigateNext() {\n        this.navigate(Navigate.Down);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public navigatePrev() {\n        this.navigate(Navigate.Up);\n    }\n\n    protected scrollToHiddenItem(newItem: IgxDropDownItemBaseDirective) {\n        const elementRect = newItem.element.nativeElement.getBoundingClientRect();\n        const parentRect = this.scrollContainer.getBoundingClientRect();\n        if (parentRect.top > elementRect.top) {\n            this.scrollContainer.scrollTop -= (parentRect.top - elementRect.top);\n        }\n\n        if (parentRect.bottom < elementRect.bottom) {\n            this.scrollContainer.scrollTop += (elementRect.bottom - parentRect.bottom);\n        }\n    }\n}\n","import {\n    ChangeDetectorRef,\n    Component,\n    HostBinding,\n    ViewChild,\n    ViewContainerRef\n} from '@angular/core';\n\n@Component({\n    selector: 'igx-display-container',\n    template: `\n        <ng-template\n            #display_container\n            igxScrollInertia\n            [IgxScrollInertiaScrollContainer]=\"scrollContainer\"\n            [IgxScrollInertiaDirection]=\"scrollDirection\">\n        </ng-template>\n    `\n})\nexport class DisplayContainerComponent {\n    @ViewChild('display_container', { read: ViewContainerRef, static: true })\n    public _vcr;\n\n    public scrollDirection: string;\n\n    @HostBinding('class')\n    public cssClass = 'igx-display-container';\n\n    @HostBinding('class.igx-display-container--inactive')\n    public notVirtual = true;\n\n    public scrollContainer;\n\n    constructor(public cdr: ChangeDetectorRef, public _viewContainer: ViewContainerRef) { }\n}\n","import {\n    EventEmitter,\n    Output,\n    HostListener,\n    ElementRef,\n    ChangeDetectorRef,\n    OnDestroy,\n    Directive,\n    AfterViewInit\n} from '@angular/core';\n\n@Directive({\n    selector: '[igxVirtualHelperBase]'\n})\nexport class VirtualHelperBaseDirective implements OnDestroy, AfterViewInit {\n    public scrollAmount = 0;\n\n    public _size = 0;\n\n    public destroyed;\n\n    private _afterViewInit = false;\n\n    ngAfterViewInit() {\n        this._afterViewInit = true;\n    }\n\n    @HostListener('scroll', ['$event'])\n    onScroll(event) {\n        this.scrollAmount = event.target.scrollTop || event.target.scrollLeft;\n    }\n    constructor(public elementRef: ElementRef, public cdr: ChangeDetectorRef) { }\n\n    get nativeElement() {\n        return this.elementRef.nativeElement;\n    }\n\n    public ngOnDestroy() {\n        this.destroyed = true;\n    }\n\n    public set size(value) {\n        if (this.destroyed) {\n            return;\n        }\n        this._size = value;\n        if (this._afterViewInit) {\n            this.cdr.detectChanges();\n        }\n    }\n\n    public get size() {\n        return this._size;\n    }\n}\n","import { Component, ElementRef, HostBinding, Input, ViewChild, ViewContainerRef, ChangeDetectorRef } from '@angular/core';\nimport { VirtualHelperBaseDirective } from './base.helper.component';\n\n/**\n * @hidden\n */\n@Component({\n    selector: 'igx-horizontal-virtual-helper',\n    template: '<div #horizontal_container class=\"igx-vhelper__placeholder-content\" [style.width.px]=\"size\"></div>'\n})\nexport class HVirtualHelperComponent extends VirtualHelperBaseDirective {\n    @ViewChild('horizontal_container', { read: ViewContainerRef, static: true }) public _vcr;\n    @Input() public width: number;\n    @HostBinding('class')\n    public cssClasses = 'igx-vhelper--horizontal';\n\n    constructor(public elementRef: ElementRef, public cdr: ChangeDetectorRef) {\n        super(elementRef, cdr);\n     }\n}\n","import { Component, ElementRef, HostBinding, Input, ViewChild, ViewContainerRef, ChangeDetectorRef, OnDestroy } from '@angular/core';\nimport { VirtualHelperBaseDirective } from './base.helper.component';\n\n@Component({\n    selector: 'igx-virtual-helper',\n    template: '<div #container class=\"igx-vhelper__placeholder-content\" [style.height.px]=\"size\"></div>'\n})\nexport class VirtualHelperComponent extends VirtualHelperBaseDirective implements OnDestroy  {\n    @HostBinding('scrollTop')\n    public scrollTop;\n\n    @ViewChild('container', { read: ViewContainerRef, static: true }) public _vcr;\n    @Input() public itemsLength: number;\n\n\n    @HostBinding('class')\n    public cssClasses = 'igx-vhelper--vertical';\n\n    constructor(public elementRef: ElementRef, public cdr: ChangeDetectorRef) {\n        super(elementRef, cdr);\n    }\n\n}\n","import { Directive, Input, ElementRef, NgZone, OnInit, NgModule, OnDestroy } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n/**\n * @hidden\n */\n@Directive({ selector: '[igxScrollInertia]' })\nexport class IgxScrollInertiaDirective implements OnInit, OnDestroy {\n\n    constructor(private element: ElementRef, private _zone: NgZone) {\n\n    }\n\n    @Input()\n    public IgxScrollInertiaDirection: string;\n\n    @Input()\n    public IgxScrollInertiaScrollContainer: any;\n\n    @Input()\n    public wheelStep = 50;\n\n    @Input()\n    public inertiaStep = 1.5;\n\n    @Input()\n    public swipeToleranceX = 20;\n\n    @Input()\n    public inertiaDeltaY = 3;\n\n    @Input()\n    public inertiaDeltaX = 2;\n\n    @Input()\n    public inertiaDuration = 0.5;\n\n    private _touchInertiaAnimID;\n    private _startX;\n    private _startY;\n    private _touchStartX;\n    private _touchStartY;\n    private _lastTouchEnd;\n    private _lastTouchX;\n    private _lastTouchY;\n    private _savedSpeedsX = [];\n    private _savedSpeedsY;\n    private _totalMovedX;\n    private _offsetRecorded;\n    private _offsetDirection;\n    private _touchPrevented;\n    private _lastMovedX;\n    private _lastMovedY;\n    private _gestureObject;\n    private setPointerCaptureFName = typeof Element.prototype['msSetPointerCapture'] === 'function' ?\n    'msSetPointerCapture' :\n    'setPointerCapture';\n    private releasePointerCaptureFName = typeof Element.prototype['msReleasePointerCapture'] === 'function' ?\n    'msReleasePointerCapture' :\n    'releasePointerCapture';\n    private _pointer;\n    private _nextX;\n    private _nextY;\n    private parentElement;\n\n    ngOnInit(): void {\n        this._zone.runOutsideAngular(() => {\n            this.parentElement = this.element.nativeElement.parentElement || this.element.nativeElement.parentNode;\n            const targetElem = this.parentElement;\n            targetElem.addEventListener('wheel',\n                    (evt) => { this.onWheel(evt); });\n            targetElem.addEventListener('touchstart',\n                    (evt) => { this.onTouchStart(evt); });\n            targetElem.addEventListener('touchmove',\n                    (evt) => { this.onTouchMove(evt); });\n            targetElem.addEventListener('touchend',\n                    (evt) => { this.onTouchEnd(evt); });\n            targetElem.addEventListener('pointerdown',\n                    (evt) => { this.onPointerDown(evt); });\n            targetElem.addEventListener('pointerup',\n                     (evt) => { this.onPointerUp(evt); });\n            targetElem.addEventListener('MSGestureStart',\n                    (evt) => { this.onMSGestureStart(evt); });\n            targetElem.addEventListener('MSGestureChange',\n                    (evt) => { this.onMSGestureChange(evt); });\n        });\n    }\n\n     /**\n     * @hidden\n     * Function that is called when scrolling with the mouse wheel or using touchpad\n     */\n    protected onWheel(evt) {\n        // if no scrollbar return\n        if (!this.IgxScrollInertiaScrollContainer) {\n            return;\n        }\n        let scrollDeltaX;\n        let scrollDeltaY;\n        const scrollStep = this.wheelStep;\n        const minWheelStep = 1 / this.wheelStep;\n\n        this._startX = this.IgxScrollInertiaScrollContainer.scrollLeft;\n        this._startY = this.IgxScrollInertiaScrollContainer.scrollTop;\n\n        if (evt.wheelDeltaX) {\n            /* Option supported on Chrome, Safari, Opera.\n            /* 120 is default for mousewheel on these browsers. Other values are for trackpads */\n            scrollDeltaX = -evt.wheelDeltaX / 120;\n\n            if (-minWheelStep < scrollDeltaX && scrollDeltaX < minWheelStep) {\n                scrollDeltaX = Math.sign(scrollDeltaX) * minWheelStep;\n            }\n        } else if (evt.deltaX) {\n            /* For other browsers that don't provide wheelDelta, use the deltaY to determine direction and pass default values. */\n            scrollDeltaX = this.calcAxisCoords(evt.deltaX, -1, 1);\n        }\n\n        /** Get delta for the Y axis*/\n        if (evt.wheelDeltaY) {\n            /* Option supported on Chrome, Safari, Opera.\n            /* 120 is default for mousewheel on these browsers. Other values are for trackpads */\n            scrollDeltaY = -evt.wheelDeltaY / 120;\n\n            if (-minWheelStep < scrollDeltaY && scrollDeltaY < minWheelStep) {\n                scrollDeltaY = Math.sign(scrollDeltaY) * minWheelStep;\n            }\n        } else if (evt.deltaY) {\n            /* For other browsers that don't provide wheelDelta, use the deltaY to determine direction and pass default values. */\n            scrollDeltaY = this.calcAxisCoords(evt.deltaY, -1, 1);\n        }\n        if (scrollDeltaX && this.IgxScrollInertiaDirection === 'horizontal') {\n            this._scrollToX(\n                this._startX + scrollDeltaX * scrollStep\n            );\n            const curScrollLeft = this.IgxScrollInertiaScrollContainer.scrollLeft;\n            const maxScrollLeft = parseInt(this.IgxScrollInertiaScrollContainer.children[0].style.width, 10);\n            if (0 < curScrollLeft && curScrollLeft < maxScrollLeft) {\n                // Prevent navigating through pages when scrolling on Mac\n                evt.preventDefault();\n            }\n        } else if (scrollDeltaY && this.IgxScrollInertiaDirection === 'vertical') {\n            this._scrollToY(\n                this._startY + scrollDeltaY * scrollStep\n            );\n            this.preventParentScroll(evt, true);\n        }\n    }\n\n    /**\n     * @hidden\n     * When there is still room to scroll up/down prevent the parent elements from scrolling too.\n     */\n    protected preventParentScroll(evt, preventDefault) {\n        const curScrollTop = this.IgxScrollInertiaScrollContainer.scrollTop;\n        const maxScrollTop = this.IgxScrollInertiaScrollContainer.children[0].scrollHeight -\n            this.IgxScrollInertiaScrollContainer.offsetHeight;\n        if (0 < curScrollTop && curScrollTop < maxScrollTop) {\n            if (preventDefault) {\n                 evt.preventDefault();\n            }\n            if (evt.stopPropagation) {\n                evt.stopPropagation();\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     * Function that is called the first moment we start interacting with the content on a touch device\n     */\n    protected onTouchStart(event) {\n        if (typeof MSGesture === 'function' || !this.IgxScrollInertiaScrollContainer) {\n            return false;\n        }\n\n        // stops any current ongoing inertia\n        cancelAnimationFrame(this._touchInertiaAnimID);\n\n        const touch = event.touches[ 0 ];\n\n        this._startX = this.IgxScrollInertiaScrollContainer.scrollLeft;\n\n        this._startY = this.IgxScrollInertiaScrollContainer.scrollTop;\n\n        this._touchStartX = touch.pageX;\n        this._touchStartY = touch.pageY;\n\n        this._lastTouchEnd = new Date().getTime();\n        this._lastTouchX = touch.pageX;\n        this._lastTouchY = touch.pageY;\n        this._savedSpeedsX = [];\n        this._savedSpeedsY = [];\n\n        // Vars regarding swipe offset\n        this._totalMovedX = 0;\n        this._offsetRecorded = false;\n        this._offsetDirection = 0;\n\n        this._touchPrevented = false;\n        if (this.IgxScrollInertiaDirection === 'vertical') {\n            this.preventParentScroll(event, false);\n        }\n    }\n\n    /**\n     * @hidden\n     * Function that is called when we need to scroll the content based on touch interactions\n     */\n    protected onTouchMove(event) {\n        if (typeof MSGesture === 'function') {\n            this._touchPrevented = false;\n            return false;\n        }\n        if (!this.IgxScrollInertiaScrollContainer) {\n            return;\n        }\n\n        const touch = event.touches[ 0 ];\n        const destX = this._startX + (this._touchStartX - touch.pageX) * Math.sign(this.inertiaStep);\n        const destY = this._startY + (this._touchStartY - touch.pageY) * Math.sign(this.inertiaStep);\n\n        /* Handle complex touchmoves when swipe stops but the toch doesn't end and then a swipe is initiated again */\n        /* **********************************************************/\n\n\n        const timeFromLastTouch = (new Date().getTime()) - this._lastTouchEnd;\n        if (timeFromLastTouch !== 0 && timeFromLastTouch < 100) {\n            const speedX = (this._lastTouchX - touch.pageX) / timeFromLastTouch;\n            const speedY = (this._lastTouchY - touch.pageY) / timeFromLastTouch;\n\n            // Save the last 5 speeds between two touchmoves on X axis\n            if (this._savedSpeedsX.length < 5) {\n                this._savedSpeedsX.push(speedX);\n            } else {\n                this._savedSpeedsX.shift();\n                this._savedSpeedsX.push(speedX);\n            }\n\n            // Save the last 5 speeds between two touchmoves on Y axis\n            if (this._savedSpeedsY.length < 5) {\n                this._savedSpeedsY.push(speedY);\n            } else {\n                this._savedSpeedsY.shift();\n                this._savedSpeedsY.push(speedY);\n            }\n        }\n        this._lastTouchEnd = new Date().getTime();\n        this._lastMovedX = this._lastTouchX - touch.pageX;\n        this._lastMovedY = this._lastTouchY - touch.pageY;\n        this._lastTouchX = touch.pageX;\n        this._lastTouchY = touch.pageY;\n\n        this._totalMovedX += this._lastMovedX;\n\n        let scrolledXY; // Object: {x, y}\n        /*\tDo not scroll using touch untill out of the swipeToleranceX bounds */\n        if (Math.abs(this._totalMovedX) < this.swipeToleranceX && !this._offsetRecorded) {\n            scrolledXY = this._scrollTo(this._startX, destY);\n        } else {\n            /*\tRecord the direction the first time we are out of the swipeToleranceX bounds.\n\t\t\t*\tThat way we know which direction we apply the offset so it doesn't hickup when moving out of the swipeToleranceX bounds */\n            if (!this._offsetRecorded) {\n                this._offsetDirection = Math.sign(destX - this._startX);\n                this._offsetRecorded = true;\n            }\n\n            /*\tScroll with offset ammout of swipeToleranceX in the direction we have exited the bounds and\n            don't change it after that ever until touchend and again touchstart */\n            scrolledXY = this._scrollTo(destX - this._offsetDirection * this.swipeToleranceX,\n                destY);\n        }\n\n        if (scrolledXY.x === 0 && scrolledXY.y === 0) {\n            this._touchPrevented = true;\n        }\n\n        // On Safari preventing the touchmove would prevent default page scroll behaviour even if there is the element doesn't have overflow\n        if (this.IgxScrollInertiaDirection === 'vertical') {\n            this.preventParentScroll(event, true);\n        }\n    }\n\n    protected onTouchEnd(event) {\n        if (typeof MSGesture === 'function') {\n            return;\n        }\n        let speedX = 0;\n        let speedY = 0;\n\n        // savedSpeedsX and savedSpeedsY have same length\n        for (let i = 0; i < this._savedSpeedsX.length; i++) {\n            speedX += this._savedSpeedsX[ i ];\n            speedY += this._savedSpeedsY[ i ];\n        }\n        speedX = this._savedSpeedsX.length ? speedX / this._savedSpeedsX.length : 0;\n        speedY = this._savedSpeedsX.length ? speedY / this._savedSpeedsY.length : 0;\n\n         // Use the lastMovedX and lastMovedY to determine if the swipe stops without lifting the finger so we don't start inertia\n        if ((Math.abs(speedX) > 0.1 || Math.abs(speedY) > 0.1) &&\n                        (Math.abs(this._lastMovedX) > 2 || Math.abs(this._lastMovedY) > 2)) {\n                    this._inertiaInit(speedX, speedY);\n        }\n        if (this.IgxScrollInertiaDirection === 'vertical') {\n            this.preventParentScroll(event, false);\n        }\n    }\n\n    /**\n     * @hidden\n     * Function that is called when we need to detect touch starting on a touch device on IE/Edge\n     */\n    protected onPointerDown(event) {\n        if (!event || (event.pointerType !== 2 && event.pointerType !== 'touch') ||\n            typeof MSGesture !== 'function') {\n            return true;\n        }\n        if (!this.IgxScrollInertiaScrollContainer) {\n            return;\n        }\n        // setPointerCaptureFName is the name of the function that is supported\n        event.target[this.setPointerCaptureFName](this._pointer = event.pointerId);\n\n        // create gestureObject only one time to prevent overlapping during intertia\n        if (!this._gestureObject) {\n            this._gestureObject = new MSGesture();\n            this._gestureObject.target = this.parentElement;\n        }\n        this._gestureObject.addPointer(this._pointer);\n    }\n\n    /**\n     * @hidden\n     * Function that is called when we need to detect touch ending on a touch device on IE/Edge\n     */\n    protected onPointerUp(event) {\n        if (!this._pointer) {\n            return true;\n        }\n        if (!this.IgxScrollInertiaScrollContainer) {\n            return;\n        }\n        /* releasePointerCaptureFName is the name of the function that is supported */\n        event.target[ this.releasePointerCaptureFName ](this._pointer);\n\n        delete this._pointer;\n    }\n\n    /**\n     * @hidden\n     *  Function that is called when a gesture begins on IE/Edge\n     */\n    protected onMSGestureStart(event) {\n        if (!this.IgxScrollInertiaScrollContainer) {\n            return;\n        }\n        this._startX = this.IgxScrollInertiaScrollContainer.scrollLeft;\n        this._startY = this.IgxScrollInertiaScrollContainer.scrollTop;\n\n\n        this._touchStartX = event.screenX;\n        this._touchStartY = event.screenY;\n\n        // Vars regarding swipe offset\n        this._totalMovedX = 0;\n        this._offsetRecorded = false;\n        this._offsetDirection = 0;\n        return false;\n    }\n\n    /**\n     * @hidden\n     * Function that is called when a we need to scroll based on the gesture performed on IE/Edge\n     */\n    protected onMSGestureChange(event) {\n        if (!this.IgxScrollInertiaScrollContainer) {\n            return;\n        }\n        const touchPos = event,\n            destX = this._startX + this._touchStartX - touchPos.screenX,\n            destY = this._startY + this._touchStartY - touchPos.screenY;\n        /* Logic regarding x tolerance to prevent accidental horizontal scrolling when scrolling vertically */\n        this._totalMovedX = this._touchStartX - touchPos.screenX;\n        if (Math.abs(this._totalMovedX) < this.swipeToleranceX && !this._offsetRecorded) {\n            /* Do not scroll horizontally yet while in the tolerance range */\n            this._scrollToY(destY);\n        } else {\n            if (!this._offsetRecorded) {\n                this._offsetDirection = Math.sign(destX - this._startX);\n                this._offsetRecorded = true;\n            }\n            /* Once the tolerance is exceeded it can be scrolled horizontally */\n            this._scrollTo(destX - this._offsetDirection * this.swipeToleranceX, destY);\n        }\n\n        return false;\n    }\n\n    private calcAxisCoords(target, min, max) {\n        if (target === undefined || target < min) {\n            target = min;\n        } else if (target > max) {\n            target = max;\n        }\n\n        return target;\n    }\n\n    private _scrollTo(destX, destY) {\n        const curPosX = this.IgxScrollInertiaScrollContainer.scrollLeft;\n        const curPosY = this.IgxScrollInertiaScrollContainer.scrollTop;\n\n         // TODO Trigger scrolling event?\n        const scrolledX = this._scrollToX(destX);\n        const scrolledY = this._scrollToY(destY);\n\n        return { x: scrolledX, y: scrolledY };\n    }\n    private _scrollToX(dest) {\n        this.IgxScrollInertiaScrollContainer.scrollLeft = dest;\n    }\n    private _scrollToY(dest) {\n        this.IgxScrollInertiaScrollContainer.scrollTop = dest;\n    }\n\n   protected _inertiaInit(speedX, speedY) {\n    const stepModifer = this.inertiaStep,\n        inertiaDuration = this.inertiaDuration;\n    let x = 0;\n    this._nextX = this.IgxScrollInertiaScrollContainer.scrollLeft;\n    this._nextY = this.IgxScrollInertiaScrollContainer.scrollTop;\n\n    // Sets timeout until executing next movement iteration of the inertia\n    const inertiaStep = () => {\n        if (x > 6) {\n            cancelAnimationFrame(this._touchInertiaAnimID);\n            return;\n        }\n\n        if (Math.abs(speedX) > Math.abs(speedY)) {\n            x += 0.05 / (1 * inertiaDuration);\n        } else {\n            x += 0.05 / (1 * inertiaDuration);\n        }\n\n        if (x <= 1) {\n            // We use constant quation to determine the offset without speed falloff befor x reaches 1\n            if (Math.abs(speedY) <= Math.abs(speedX) * this.inertiaDeltaY) {\n                this._nextX += 1 * speedX * 15 * stepModifer;\n            }\n            if (Math.abs(speedY) >= Math.abs(speedX) * this.inertiaDeltaX) {\n                this._nextY += 1 * speedY * 15 * stepModifer;\n            }\n        } else {\n            // We use the quation \"y = 2 / (x + 0.55) - 0.3\" to determine the offset\n            if (Math.abs(speedY) <= Math.abs(speedX) * this.inertiaDeltaY) {\n                this._nextX += Math.abs(2 / (x + 0.55) - 0.3) * speedX * 15 * stepModifer;\n            }\n            if (Math.abs(speedY) >= Math.abs(speedX) * this.inertiaDeltaX) {\n                this._nextY += Math.abs(2 / (x + 0.55) - 0.3) * speedY * 15 * stepModifer;\n            }\n        }\n\n        // If we have mixed environment we use the default behaviour. i.e. touchscreen + mouse\n        this._scrollTo(this._nextX, this._nextY);\n\n        this._touchInertiaAnimID = requestAnimationFrame(inertiaStep);\n    };\n\n    // Start inertia and continue it recursively\n    this._touchInertiaAnimID = requestAnimationFrame(inertiaStep);\n   }\n\n    ngOnDestroy() {\n        this._zone.runOutsideAngular(() => {\n            const targetElem = this.parentElement;\n            targetElem.removeEventListener('wheel',\n                (evt) => { this.onWheel(evt); });\n            targetElem.removeEventListener('touchstart',\n                (evt) => { this.onTouchStart(evt); });\n            targetElem.removeEventListener('touchmove',\n                (evt) => { this.onTouchMove(evt); });\n            targetElem.removeEventListener('touchend',\n                (evt) => { this.onTouchEnd(evt); });\n            targetElem.removeEventListener('pointerdown',\n                (evt) => { this.onPointerDown(evt); });\n            targetElem.removeEventListener('pointerup',\n                (evt) => { this.onPointerUp(evt); });\n            targetElem.removeEventListener('MSGestureStart',\n                (evt) => { this.onMSGestureStart(evt); });\n            targetElem.removeEventListener('MSGestureChange',\n                (evt) => { this.onMSGestureChange(evt); });\n        });\n    }\n\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxScrollInertiaDirective],\n    exports: [IgxScrollInertiaDirective],\n    imports: [CommonModule]\n})\n\nexport class IgxScrollInertiaModule {\n}\n\n","import { Injectable, Component } from '@angular/core';\nimport { IgxGridForOfDirective } from './for_of.directive';\nimport { VirtualHelperBaseDirective } from './base.helper.component';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class IgxForOfSyncService {\n\n    private _master: Map<string, IgxGridForOfDirective<any>> = new Map<string, IgxGridForOfDirective<any>>();\n\n    /**\n     * @hidden\n     */\n    public isMaster(directive: IgxGridForOfDirective<any>): boolean {\n        return this._master.get(directive.igxForScrollOrientation) === directive;\n    }\n\n    /**\n     * @hidden\n     */\n    public setMaster(directive: IgxGridForOfDirective<any>, forced = false) {\n        const orientation = directive.igxForScrollOrientation;\n        if (orientation && (forced || !this._master.has(orientation))) {\n            this._master.set(orientation, directive);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public resetMaster() {\n        this._master.clear();\n    }\n\n    /**\n     * @hidden\n     */\n    public sizesCache(dir: string): number[] {\n        return this._master.get(dir).sizesCache;\n    }\n\n    /**\n     * @hidden\n     */\n    public chunkSize(dir: string): number {\n        return this._master.get(dir).state.chunkSize;\n    }\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class IgxForOfScrollSyncService {\n    private _masterScroll: Map<string, VirtualHelperBaseDirective> = new Map<string, any>();\n    public setScrollMaster(dir: string, scroll: VirtualHelperBaseDirective) {\n        this._masterScroll.set(dir, scroll);\n    }\n\n    public getScrollMaster(dir: string) {\n        return this._masterScroll.get(dir);\n    }\n}\n","import { CommonModule, NgForOfContext } from '@angular/common';\nimport {\n    ChangeDetectorRef,\n    ComponentFactory,\n    ComponentFactoryResolver,\n    ComponentRef,\n    Directive,\n    DoCheck,\n    EmbeddedViewRef,\n    EventEmitter,\n    Input,\n    IterableChanges,\n    IterableDiffer,\n    IterableDiffers,\n    NgModule,\n    NgZone,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Output,\n    SimpleChanges,\n    TemplateRef,\n    TrackByFunction,\n    ViewContainerRef,\n    ViewRef,\n    AfterViewInit\n} from '@angular/core';\n\nimport { DisplayContainerComponent } from './display.container';\nimport { HVirtualHelperComponent } from './horizontal.virtual.helper.component';\nimport { VirtualHelperComponent } from './virtual.helper.component';\nimport { IgxScrollInertiaModule } from './../scroll-inertia/scroll_inertia.directive';\nimport { IgxForOfSyncService, IgxForOfScrollSyncService } from './for_of.sync.service';\nimport { Subject } from 'rxjs';\nimport { takeUntil, filter, throttleTime, first } from 'rxjs/operators';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport { IBaseEventArgs } from '../../core/utils';\nimport { VirtualHelperBaseDirective } from './base.helper.component';\n\n/**\n *  @publicApi\n */\nexport class IgxForOfContext<T> {\n    constructor(\n       public $implicit: T,\n       public index: number,\n       public count: number\n    ) {}\n\n    /**\n     * A function that returns whether the element is the first or not\n     */\n    get first(): boolean { return this.index === 0; }\n\n    /**\n     * A function that returns whether the element is the last or not\n     */\n    get last(): boolean { return this.index === this.count - 1; }\n\n    /**\n     * A function that returns whether the element is even or not\n     */\n    get even(): boolean { return this.index % 2 === 0; }\n\n    /**\n     * A function that returns whether the element is odd or not\n     */\n    get odd(): boolean { return !this.even; }\n\n}\n\n@Directive({ selector: '[igxFor][igxForOf]' })\nexport class IgxForOfDirective<T> implements OnInit, OnChanges, DoCheck, OnDestroy, AfterViewInit {\n\n    /**\n     * An @Input property that sets the data to be rendered.\n     * ```html\n     * <ng-template igxFor let-item [igxForOf]=\"data\" [igxForScrollOrientation]=\"'horizontal'\"></ng-template>\n     * ```\n     */\n    @Input()\n    public igxForOf: any[];\n\n    /**\n     * An @Input property that sets the property name from which to read the size in the data object.\n     */\n    @Input()\n    public igxForSizePropName;\n\n    /**\n     * An @Input property that specifies the scroll orientation.\n     * Scroll orientation can be \"vertical\" or \"horizontal\".\n     * ```html\n     * <ng-template igxFor let-item [igxForOf]=\"data\" [igxForScrollOrientation]=\"'horizontal'\"></ng-template>\n     * ```\n     */\n    @Input()\n    public igxForScrollOrientation = 'vertical';\n\n    /**\n     * Optionally pass the parent `igxFor` instance to create a virtual template scrolling both horizontally and vertically.\n     * ```html\n     * <ng-template #scrollContainer igxFor let-rowData [igxForOf]=\"data\"\n     *       [igxForScrollOrientation]=\"'vertical'\"\n     *       [igxForContainerSize]=\"'500px'\"\n     *       [igxForItemSize]=\"'50px'\"\n     *       let-rowIndex=\"index\">\n     *       <div [style.display]=\"'flex'\" [style.height]=\"'50px'\">\n     *           <ng-template #childContainer igxFor let-item [igxForOf]=\"data\"\n     *               [igxForScrollOrientation]=\"'horizontal'\"\n     *               [igxForScrollContainer]=\"parentVirtDir\"\n     *               [igxForContainerSize]=\"'500px'\">\n     *                   <div [style.min-width]=\"'50px'\">{{rowIndex}} : {{item.text}}</div>\n     *           </ng-template>\n     *       </div>\n     * </ng-template>\n     * ```\n     */\n    @Input()\n    public igxForScrollContainer: any;\n\n    /**\n     * An @Input property that sets the px-affixed size of the container along the axis of scrolling.\n     * For \"horizontal\" orientation this value is the width of the container and for \"vertical\" is the height.\n     * ```html\n     * <ng-template igxFor let-item [igxForOf]=\"data\" [igxForContainerSize]=\"'500px'\"\n     *      [igxForScrollOrientation]=\"'horizontal'\">\n     * </ng-template>\n     * ```\n     */\n    @Input()\n    public igxForContainerSize: any;\n\n    /**\n     * An @Input property that sets the px-affixed size of the item along the axis of scrolling.\n     * For \"horizontal\" orientation this value is the width of the column and for \"vertical\" is the height or the row.\n     * ```html\n     * <ng-template igxFor let-item [igxForOf]=\"data\" [igxForScrollOrientation]=\"'horizontal'\" [igxForItemSize]=\"'50px'\"></ng-template>\n     * ```\n     */\n    @Input()\n    public igxForItemSize: any;\n\n    /**\n     * The total count of the virtual data items, when using remote service.\n     * Similar to the property totalItemCount, but this will allow setting the data count into the template.\n     * ```html\n     * <ng-template igxFor let-item [igxForOf]=\"data | async\" [igxForTotalItemCount]=\"count | async\"\n     *  [igxForContainerSize]=\"'500px'\" [igxForItemSize]=\"'50px'\"></ng-template>\n     * ```\n     */\n    @Input()\n    get igxForTotalItemCount(): number {\n        return this.totalItemCount;\n    }\n    set igxForTotalItemCount(value: number) {\n        this.totalItemCount = value;\n    }\n    /**\n     * @hidden\n     */\n    public dc: ComponentRef<DisplayContainerComponent>;\n\n    /**\n     * The current state of the directive. It contains `startIndex` and `chunkSize`.\n     * state.startIndex - The index of the item at which the current visible chunk begins.\n     * state.chunkSize - The number of items the current visible chunk holds.\n     * These options can be used when implementing remote virtualization as they provide the necessary state information.\n     * ```typescript\n     * const gridState = this.parentVirtDir.state;\n     * ```\n     */\n    public state: IForOfState = {\n        startIndex: 0,\n        chunkSize: 0\n    };\n    /**\n     * The total count of the virtual data items, when using remote service.\n     * ```typescript\n     * this.parentVirtDir.totalItemCount = data.Count;\n     * ```\n     */\n    public totalItemCount: number = null;\n\n    /**\n     * An event that is emitted after a new chunk has been loaded.\n     * ```html\n     * <ng-template igxFor [igxForOf]=\"data\" [igxForScrollOrientation]=\"'horizontal'\" (onChunkLoad)=\"chunkLoad($event)\"></ng-template>\n     * ```\n     * ```typescript\n     * chunkLoad(e){\n     * alert(\"chunk loaded!\");\n     * }\n     * ```\n     */\n    @Output()\n    public onChunkLoad = new EventEmitter<IForOfState>();\n\n    /**\n     * @hidden @internal\n     * An event that is emitted when scrollbar visibility has changed.\n     */\n    @Output()\n    public onScrollbarVisibilityChanged = new EventEmitter<any>();\n\n    /**\n     * An event that is emitted after the rendered content size of the igxForOf has been changed.\n    */\n    @Output()\n    public onContentSizeChange = new EventEmitter<any>();\n\n    /**\n     * An event that is emitted after data has been changed.\n     * ```html\n     * <ng-template igxFor [igxForOf]=\"data\" [igxForScrollOrientation]=\"'horizontal'\" (onDataChanged)=\"dataChanged($event)\"></ng-template>\n     * ```\n     * ```typescript\n     * dataChanged(e){\n     * alert(\"data changed!\");\n     * }\n     * ```\n     */\n    @Output()\n    public onDataChanged = new EventEmitter<any>();\n\n    @Output()\n    public onBeforeViewDestroyed = new EventEmitter<EmbeddedViewRef<any>>();\n\n    /**\n     * An event that is emitted on chunk loading to emit the current state information - startIndex, endIndex, totalCount.\n     * Can be used for implementing remote load on demand for the igxFor data.\n     * ```html\n     * <ng-template igxFor [igxForOf]=\"data\" [igxForScrollOrientation]=\"'horizontal'\" (onChunkPreload)=\"chunkPreload($event)\"></ng-template>\n     * ```\n     * ```typescript\n     * chunkPreload(e){\n     * alert(\"chunk is loading!\");\n     * }\n     * ```\n     */\n    @Output()\n    public onChunkPreload = new EventEmitter<IForOfState>();\n    protected func;\n    protected _sizesCache: number[] = [];\n    protected scrollComponent: VirtualHelperBaseDirective;\n    protected _differ: IterableDiffer<T> | null = null;\n    protected _trackByFn: TrackByFunction<T>;\n    protected heightCache = [];\n    private _adjustToIndex;\n    private MAX_PERF_SCROLL_DIFF = 4;\n\n\n    public get displayContainer(): HTMLElement | undefined {\n        return this.dc.instance._viewContainer.element.nativeElement;\n    }\n\n    public get virtualHelper() {\n        return this.scrollComponent.nativeElement;\n    }\n\n    protected get sizesCache(): number[] {\n        return this._sizesCache;\n    }\n    protected set sizesCache(value: number[]) {\n        this._sizesCache = value;\n    }\n\n    private get _isScrolledToBottom() {\n        if (!this.getScroll()) {\n            return true;\n        }\n        const scrollHeight = this.getScroll().scrollHeight;\n        // Use === and not >= because `scrollTop + container size` can't be bigger than `scrollHeight`, unless something isn't updated.\n        // Also use Math.round because Chrome has some inconsistencies and `scrollTop + container` can be float when zooming the page.\n        return Math.round(this.getScroll().scrollTop + this.igxForContainerSize) === scrollHeight;\n    }\n\n    private get _isAtBottomIndex() {\n        return this.igxForOf && this.state.startIndex + this.state.chunkSize > this.igxForOf.length;\n    }\n\n    // Start properties related to virtual height handling due to browser limitation\n    /** Maximum height for an element of the browser. */\n    private _maxHeight;\n\n    /** Height that is being virtualized. */\n    protected _virtHeight = 0;\n\n    /**\n     * Ratio for height that's being virtualizaed and the one visible\n     * If _virtHeightRatio = 1, the visible height and the virtualized are the same, also _maxHeight > _virtHeight.\n     */\n    private _virtHeightRatio = 1;\n\n    /** Internal track for scroll top that is being virtualized */\n    protected _virtScrollTop = 0;\n\n    /** If the next onScroll event is triggered due to internal setting of scrollTop */\n    protected _bScrollInternal = false;\n    // End properties related to virtual height handling\n\n    protected _embeddedViews: Array<EmbeddedViewRef<any>> = [];\n\n    protected contentResizeNotify = new Subject();\n    protected contentObserver: ResizeObserver;\n\n    /**\n     * @hidden\n     */\n    protected destroy$ = new Subject<any>();\n\n    constructor(\n        private _viewContainer: ViewContainerRef,\n        protected _template: TemplateRef<NgForOfContext<T>>,\n        protected _differs: IterableDiffers,\n        private resolver: ComponentFactoryResolver,\n        public cdr: ChangeDetectorRef,\n        protected _zone: NgZone,\n        protected syncScrollService: IgxForOfScrollSyncService) { }\n\n    /**\n     * @hidden\n     */\n    protected get isRemote(): boolean {\n        return this.totalItemCount !== null;\n    }\n\n    /**\n     *\n     * Gets/Sets the scroll position.\n     * ```typescript\n     * const position = directive.scrollPosition;\n     * directive.scrollPosition = value;\n     * ```\n     */\n    public get scrollPosition(): number {\n        return this.scrollComponent.scrollAmount;\n    }\n    public set scrollPosition(val: number) {\n        if (val === this.scrollComponent.scrollAmount) {\n            return;\n        }\n        if (this.igxForScrollOrientation === 'horizontal' && this.scrollComponent) {\n            this.scrollComponent.nativeElement.scrollLeft = val;\n        } else if (this.scrollComponent) {\n            this.scrollComponent.nativeElement.scrollTop = val;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected removeScrollEventListeners() {\n        if (this.igxForScrollOrientation === 'horizontal') {\n            this._zone.runOutsideAngular(() =>\n                this.scrollComponent.nativeElement.removeEventListener('scroll', this.func)\n            );\n        } else {\n            this._zone.runOutsideAngular(() =>\n                this.scrollComponent.nativeElement.removeEventListener('scroll', this.verticalScrollHandler)\n            );\n        }\n    }\n\n    public verticalScrollHandler(event) {\n        this.onScroll(event);\n    }\n\n    public isScrollable() {\n        return this.scrollComponent.size > parseInt(this.igxForContainerSize, 10);\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit(): void {\n        let totalSize = 0;\n        const vc = this.igxForScrollContainer ? this.igxForScrollContainer._viewContainer : this._viewContainer;\n        this.igxForSizePropName = this.igxForSizePropName || 'width';\n\n        const dcFactory: ComponentFactory<DisplayContainerComponent> = this.resolver.resolveComponentFactory(DisplayContainerComponent);\n        this.dc = this._viewContainer.createComponent(dcFactory, 0);\n        this.dc.instance.scrollDirection = this.igxForScrollOrientation;\n        if (typeof MSGesture === 'function') {\n            // On Edge and IE when scrolling on touch the page scroll instead of the grid.\n            this.dc.instance._viewContainer.element.nativeElement.style.touchAction = 'none';\n        }\n        if (this.igxForOf && this.igxForOf.length) {\n            totalSize = this.initSizesCache(this.igxForOf);\n            this.scrollComponent = this.syncScrollService.getScrollMaster(this.igxForScrollOrientation);\n            this.state.chunkSize = this._calculateChunkSize();\n            this.dc.instance.notVirtual = !(this.igxForContainerSize && this.state.chunkSize < this.igxForOf.length);\n            if (this.scrollComponent && !this.scrollComponent.destroyed) {\n                this.state.startIndex = Math.min(this.getIndexAt(this.scrollPosition, this.sizesCache, 0),\n                    this.igxForOf.length - this.state.chunkSize);\n            }\n            for (let i = this.state.startIndex; i < this.state.startIndex + this.state.chunkSize &&\n                    this.igxForOf[i] !== undefined; i++) {\n                const input = this.igxForOf[i];\n                const embeddedView = this.dc.instance._vcr.createEmbeddedView(\n                    this._template,\n                    new IgxForOfContext<T>(input, this.getContextIndex(input), this.igxForOf.length)\n                );\n                this._embeddedViews.push(embeddedView);\n            }\n        }\n\n        if (this.igxForScrollOrientation === 'vertical') {\n            this.dc.instance._viewContainer.element.nativeElement.style.top = '0px';\n            const factory: ComponentFactory<VirtualHelperComponent> = this.resolver.resolveComponentFactory(VirtualHelperComponent);\n            this.scrollComponent = vc.createComponent(factory).instance;\n            this._maxHeight = this._calcMaxBrowserHeight();\n            this.scrollComponent.size = this.igxForOf ? this._calcHeight() : 0;\n            this.syncScrollService.setScrollMaster(this.igxForScrollOrientation, this.scrollComponent);\n            this._zone.runOutsideAngular(() => {\n                this.verticalScrollHandler = this.verticalScrollHandler.bind(this);\n                this.scrollComponent.nativeElement.addEventListener('scroll', this.verticalScrollHandler);\n                this.dc.instance.scrollContainer = this.scrollComponent.nativeElement;\n            });\n            const destructor = takeUntil<any>(this.destroy$);\n            this.contentResizeNotify.pipe(destructor,\n            filter(() => this.igxForContainerSize && this.igxForOf && this.igxForOf.length > 0),\n            throttleTime(40, undefined, {leading: true, trailing: true}))\n            .subscribe(() => {\n                this._zone.runTask(() => {\n                    this.updateSizes();\n                });\n            });\n        }\n\n        if (this.igxForScrollOrientation === 'horizontal') {\n            this.func = (evt) => { this.onHScroll(evt); };\n            this.scrollComponent = this.syncScrollService.getScrollMaster(this.igxForScrollOrientation);\n            if (!this.scrollComponent) {\n                const hvFactory: ComponentFactory<HVirtualHelperComponent> =\n                    this.resolver.resolveComponentFactory(HVirtualHelperComponent);\n                this.scrollComponent = vc.createComponent(hvFactory).instance;\n                this.scrollComponent.size = totalSize;\n                this.syncScrollService.setScrollMaster(this.igxForScrollOrientation, this.scrollComponent);\n                this._zone.runOutsideAngular(() => {\n                    this.scrollComponent.nativeElement.addEventListener('scroll', this.func);\n                    this.dc.instance.scrollContainer = this.scrollComponent.nativeElement;\n                });\n            } else {\n                this._zone.runOutsideAngular(() => {\n                    this.scrollComponent.nativeElement.addEventListener('scroll', this.func);\n                    this.dc.instance.scrollContainer = this.scrollComponent.nativeElement;\n                });\n            }\n            this._updateHScrollOffset();\n        }\n    }\n\n    ngAfterViewInit(): void {\n        if (this.igxForScrollOrientation === 'vertical') {\n            this._zone.runOutsideAngular(() => {\n                this.contentObserver = new ResizeObserver(() => this.contentResizeNotify.next());\n                this.contentObserver.observe(this.dc.instance._viewContainer.element.nativeElement);\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this.removeScrollEventListeners();\n        this.destroy$.next(true);\n        this.destroy$.complete();\n        if (this.contentObserver) {\n            this.contentObserver.disconnect();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnChanges(changes: SimpleChanges): void {\n        const forOf = 'igxForOf';\n        if (forOf in changes) {\n            const value = changes[forOf].currentValue;\n            if (!this._differ && value) {\n                try {\n                    this._differ = this._differs.find(value).create(this.igxForTrackBy);\n                } catch (e) {\n                    throw new Error(\n                        `Cannot find a differ supporting object \"${value}\" of type \"${getTypeNameForDebugging(value)}\".\n                     NgFor only supports binding to Iterables such as Arrays.`);\n                }\n            }\n        }\n        const defaultItemSize = 'igxForItemSize';\n        if (defaultItemSize in changes && !changes[defaultItemSize].firstChange &&\n            this.igxForScrollOrientation === 'vertical' && this.igxForOf) {\n            // handle default item size changed.\n            this.initSizesCache(this.igxForOf);\n            this._applyChanges();\n        }\n        const containerSize = 'igxForContainerSize';\n        if (containerSize in changes && !changes[containerSize].firstChange && this.igxForOf) {\n            this._recalcOnContainerChange(changes);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngDoCheck(): void {\n        if (this._differ) {\n            const changes = this._differ.diff(this.igxForOf);\n            if (changes) {\n                //  re-init cache.\n                if (!this.igxForOf) {\n                    this.igxForOf = [];\n                }\n                this._updateSizeCache();\n                this._zone.run(() => {\n                    this._applyChanges();\n                    this.cdr.markForCheck();\n                    this._updateScrollOffset();\n                    this.onDataChanged.emit();\n                });\n            }\n        }\n    }\n\n    /**\n     * Shifts the scroll thumb position.\n     * ```typescript\n     * this.parentVirtDir.addScrollTop(5);\n     * ```\n     * @param addTop negative value to scroll up and positive to scroll down;\n     */\n    public addScrollTop(addTop: number): boolean {\n        if (addTop === 0 && this.igxForScrollOrientation === 'horizontal') {\n            return false;\n        }\n        const originalVirtScrollTop = this._virtScrollTop;\n        const containerSize = parseInt(this.igxForContainerSize, 10);\n        const maxVirtScrollTop = this._virtHeight - containerSize;\n\n        this._bScrollInternal = true;\n        this._virtScrollTop += addTop;\n        this._virtScrollTop = this._virtScrollTop > 0 ?\n            (this._virtScrollTop < maxVirtScrollTop ? this._virtScrollTop : maxVirtScrollTop) :\n            0;\n\n        this.scrollPosition += addTop / this._virtHeightRatio;\n        if (Math.abs(addTop / this._virtHeightRatio) < 1) {\n            // Actual scroll delta that was added is smaller than 1 and onScroll handler doesn't trigger when scrolling < 1px\n            const scrollOffset = this.fixedUpdateAllElements(this._virtScrollTop);\n            // scrollOffset = scrollOffset !== parseInt(this.igxForItemSize, 10) ? scrollOffset : 0;\n            this.dc.instance._viewContainer.element.nativeElement.style.top = -(scrollOffset) + 'px';\n        }\n\n        const maxRealScrollTop = this.scrollComponent.nativeElement.scrollHeight - containerSize;\n        if ((this._virtScrollTop > 0 && this.scrollPosition === 0) ||\n            (this._virtScrollTop < maxVirtScrollTop && this.scrollPosition === maxRealScrollTop)) {\n            // Actual scroll position is at the top or bottom, but virtual one is not at the top or bottom (there's more to scroll)\n            // Recalculate actual scroll position based on the virtual scroll.\n            this.scrollPosition = this._virtScrollTop / this._virtHeightRatio;\n        } else if (this._virtScrollTop === 0 && this.scrollPosition > 0) {\n            // Actual scroll position is not at the top, but virtual scroll is. Just update the actual scroll\n            this.scrollPosition = 0;\n        } else if (this._virtScrollTop === maxVirtScrollTop && this.scrollPosition < maxRealScrollTop) {\n            // Actual scroll position is not at the bottom, but virtual scroll is. Just update the acual scroll\n            this.scrollPosition = maxRealScrollTop;\n        }\n        return this._virtScrollTop !== originalVirtScrollTop;\n    }\n\n    /**\n     * Scrolls to the specified index.\n     * ```typescript\n     * this.parentVirtDir.scrollTo(5);\n     * ```\n     * @param index\n     */\n    public scrollTo(index) {\n        if (index < 0 || index > (this.isRemote ? this.totalItemCount : this.igxForOf.length) - 1) {\n            return;\n        }\n        const containerSize = parseInt(this.igxForContainerSize, 10);\n        const isPrevItem = index < this.state.startIndex || this.scrollPosition > this.sizesCache[index];\n        let nextScroll = isPrevItem ? this.sizesCache[index] : this.sizesCache[index + 1] - containerSize;\n        if (nextScroll < 0) {\n            return;\n        }\n        if (this.igxForScrollOrientation === 'horizontal') {\n            this.scrollPosition = nextScroll;\n        } else {\n            const maxVirtScrollTop = this._virtHeight - containerSize;\n            if (nextScroll > maxVirtScrollTop) {\n                nextScroll = maxVirtScrollTop;\n            }\n            this._bScrollInternal = true;\n            this._virtScrollTop = nextScroll;\n            this.scrollPosition = this._virtScrollTop / this._virtHeightRatio;\n            this._adjustToIndex = !isPrevItem ? index : null;\n        }\n    }\n\n    /**\n     * Scrolls by one item into the appropriate next direction.\n     * For \"horizontal\" orientation that will be the right column and for \"vertical\" that is the lower row.\n     * ```typescript\n     * this.parentVirtDir.scrollNext();\n     * ```\n     */\n    public scrollNext() {\n        const scr = Math.ceil(this.scrollPosition);\n        const endIndex = this.getIndexAt(\n            scr + parseInt(this.igxForContainerSize, 10),\n            this.sizesCache,\n            0\n        );\n        this.scrollTo(endIndex);\n    }\n\n    /**\n     * Scrolls by one item into the appropriate previous direction.\n     * For \"horizontal\" orientation that will be the left column and for \"vertical\" that is the upper row.\n     * ```typescript\n     * this.parentVirtDir.scrollPrev();\n     * ```\n     */\n    public scrollPrev() {\n        this.scrollTo(this.state.startIndex - 1);\n    }\n\n    /**\n     * Scrolls by one page into the appropriate next direction.\n     * For \"horizontal\" orientation that will be one view to the right and for \"vertical\" that is one view to the bottom.\n     * ```typescript\n     * this.parentVirtDir.scrollNextPage();\n     * ```\n     */\n    public scrollNextPage() {\n        if (this.igxForScrollOrientation === 'horizontal') {\n            this.scrollPosition += parseInt(this.igxForContainerSize, 10);\n        } else {\n            this.addScrollTop(parseInt(this.igxForContainerSize, 10));\n        }\n    }\n\n    /**\n     * Scrolls by one page into the appropriate previous direction.\n     * For \"horizontal\" orientation that will be one view to the left and for \"vertical\" that is one view to the top.\n     * ```typescript\n     * this.parentVirtDir.scrollPrevPage();\n     * ```\n     */\n    public scrollPrevPage() {\n        if (this.igxForScrollOrientation === 'horizontal') {\n            this.scrollPosition -= parseInt(this.igxForContainerSize, 10);\n        } else {\n            const containerSize = (parseInt(this.igxForContainerSize, 10));\n            this.addScrollTop(-containerSize);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public getColumnScrollLeft(colIndex) {\n        return this.sizesCache[colIndex];\n    }\n\n    /**\n     * Returns the total number of items that are fully visible.\n     * ```typescript\n     * this.parentVirtDir.getItemCountInView();\n     * ```\n     */\n    public getItemCountInView() {\n        let startIndex = this.getIndexAt(\n            this.scrollPosition,\n            this.sizesCache,\n            0\n        );\n        if (this.scrollPosition - this.sizesCache[startIndex] > 0) {\n            // fisrt item is not fully in view\n            startIndex++;\n        }\n        const endIndex = this.getIndexAt(\n            this.scrollPosition + parseInt(this.igxForContainerSize, 10),\n            this.sizesCache,\n            0\n        );\n        return endIndex - startIndex;\n    }\n\n    /**\n     * Returns a reference to the scrollbar DOM element.\n     * This is either a vertical or horizontal scrollbar depending on the specified igxForScrollOrientation.\n     * ```typescript\n     * dir.getScroll();\n     * ```\n     */\n    public getScroll() {\n        return this.scrollComponent.nativeElement;\n    }\n    /**\n     * Returns the size of the element at the specified index.\n     * ```typescript\n     * this.parentVirtDir.getSizeAt(1);\n     * ```\n     */\n    public getSizeAt(index: number) {\n        return this.sizesCache[index + 1] - this.sizesCache[index];\n    }\n\n    /**\n     * Returns the scroll offset of the element at the specified index.\n     * ```typescript\n     * this.parentVirtDir.getScrollForIndex(1);\n     * ```\n     */\n    public getScrollForIndex(index: number, bottom?: boolean) {\n        const containerSize = parseInt(this.igxForContainerSize, 10);\n        const scroll = bottom ? Math.max(0, this.sizesCache[index + 1] - containerSize) : this.sizesCache[index];\n        return scroll;\n    }\n\n    /**\n     * @hidden\n     * Function that is called when scrolling vertically\n     */\n    protected onScroll(event) {\n        /* in certain situations this may be called when no scrollbar is visible */\n        if (!parseInt(this.scrollComponent.nativeElement.style.height, 10)) {\n            return;\n        }\n        if (!this._bScrollInternal) {\n            this._calcVirtualScrollTop(event.target.scrollTop);\n        } else {\n            this._bScrollInternal = false;\n        }\n        const prevStartIndex = this.state.startIndex;\n        const scrollOffset = this.fixedUpdateAllElements(this._virtScrollTop);\n\n        this.dc.instance._viewContainer.element.nativeElement.style.top = -(scrollOffset) + 'px';\n\n        this.dc.changeDetectorRef.detectChanges();\n        if (prevStartIndex !== this.state.startIndex) {\n            this.onChunkLoad.emit(this.state);\n        }\n    }\n\n    protected updateSizes() {\n        this.recalcUpdateSizes();\n        this._applyChanges();\n        this._updateScrollOffset();\n        this.onContentSizeChange.emit();\n    }\n\n    /**\n     * @hidden\n     * Function that recaculates and updates cache sizes.\n     */\n    public recalcUpdateSizes() {\n        const dimension = this.igxForScrollOrientation === 'horizontal' ?\n            this.igxForSizePropName : 'height';\n        const diffs = [];\n        let totalDiff = 0;\n        const l = this._embeddedViews.length;\n        const rNodes = this._embeddedViews.map(view =>\n            view.rootNodes.find(node => node.nodeType === Node.ELEMENT_NODE) || view.rootNodes[0].nextElementSibling);\n        for (let i = 0; i < l; i++) {\n            const rNode = rNodes[i];\n            if (rNode) {\n                const h = rNode.offsetHeight || parseInt(this.igxForItemSize, 10);\n                const index = this.state.startIndex + i;\n                if (!this.isRemote && !this.igxForOf[index]) {\n                    continue;\n                }\n                const oldVal = dimension === 'height' ? this.heightCache[index] : this.igxForOf[index][dimension];\n                const newVal = dimension === 'height' ? h : rNode.clientWidth;\n                if (dimension === 'height') {\n                    this.heightCache[index] = newVal;\n                } else {\n                    this.igxForOf[index][dimension] = newVal;\n                }\n                const currDiff = newVal - oldVal;\n                diffs.push(currDiff);\n                totalDiff += currDiff;\n                this.sizesCache[index + 1] += totalDiff;\n            }\n        }\n        // update cache\n        if (Math.abs(totalDiff) > 0) {\n            for (let j = this.state.startIndex + this.state.chunkSize + 1; j < this.sizesCache.length; j++) {\n                this.sizesCache[j] += totalDiff;\n            }\n\n            // update scrBar heights/widths\n            if (this.igxForScrollOrientation === 'horizontal') {\n                const totalWidth = parseInt(this.scrollComponent.nativeElement.children[0].style.width, 10) + totalDiff;\n                this.scrollComponent.nativeElement.children[0].style.width = totalWidth + 'px';\n            }\n            const reducer = (acc, val) => acc + val;\n            if (this.igxForScrollOrientation === 'vertical') {\n                const scrToBottom = this._isScrolledToBottom && !this.dc.instance.notVirtual;\n                const hSum = this.heightCache.reduce(reducer);\n                if (hSum > this._maxHeight) {\n                    this._virtHeightRatio = hSum / this._maxHeight;\n                }\n                this.scrollComponent.size = Math.min(this.scrollComponent.size + totalDiff, this._maxHeight);\n                this._virtHeight = hSum;\n                if (!this.scrollComponent.destroyed) {\n                    this.scrollComponent.cdr.detectChanges();\n                }\n                if (scrToBottom && !this._isAtBottomIndex) {\n                    const containerSize = parseInt(this.igxForContainerSize, 10);\n                    const maxVirtScrollTop = this._virtHeight - containerSize;\n                    this._bScrollInternal = true;\n                    this._virtScrollTop = maxVirtScrollTop;\n                    this.scrollPosition = maxVirtScrollTop;\n                    return;\n                }\n                if (this._adjustToIndex) {\n                    // in case scrolled to specific index where after scroll heights are changed\n                    // need to adjust the offsets so that item is last in view.\n                    const updatesToIndex = this._adjustToIndex - this.state.startIndex + 1;\n                    const sumDiffs = diffs.slice(0, updatesToIndex).reduce(reducer);\n                    const currOffset = parseInt(this.dc.instance._viewContainer.element.nativeElement.style.top, 10);\n                    this.dc.instance._viewContainer.element.nativeElement.style.top = (currOffset - sumDiffs) + 'px';\n                    this._adjustToIndex = null;\n                }\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected fixedUpdateAllElements(inScrollTop: number): number {\n        const count = this.isRemote ? this.totalItemCount : this.igxForOf.length;\n        let newStart = this.getIndexAt(\n            inScrollTop,\n            this.sizesCache,\n            0\n        );\n        if (newStart + this.state.chunkSize > count) {\n            newStart = count - this.state.chunkSize;\n        }\n        const prevStart = this.state.startIndex;\n        const diff = newStart - this.state.startIndex;\n        this.state.startIndex = newStart;\n        if (diff) {\n            this.onChunkPreload.emit(this.state);\n            if (!this.isRemote) {\n                /*recalculate and apply page size.*/\n                if (diff > 0 && diff <= this.MAX_PERF_SCROLL_DIFF) {\n                    this.moveApplyScrollNext(prevStart);\n                } else if (diff < 0 && Math.abs(diff) <= this.MAX_PERF_SCROLL_DIFF) {\n                    this.moveApplyScrollPrev(prevStart);\n                } else {\n                    this.fixedApplyScroll();\n                }\n            }\n        }\n        return inScrollTop - this.sizesCache[this.state.startIndex];\n    }\n\n    /**\n     * @hidden\n     * The function applies an optimized state change for scrolling down/right employing context change with view rearrangement\n     */\n    protected moveApplyScrollNext(prevIndex: number): void {\n        const start = prevIndex + this.state.chunkSize;\n        for (let i = start; i < start + this.state.startIndex - prevIndex && this.igxForOf[i] !== undefined; i++) {\n            const input = this.igxForOf[i];\n            const embView = this._embeddedViews.shift();\n            const cntx = embView.context;\n            cntx.$implicit = input;\n            cntx.index = this.getContextIndex(input);\n            cntx.count = this.igxForOf.length;\n            const view: ViewRef = this.dc.instance._vcr.detach(0);\n            this.dc.instance._vcr.insert(view);\n            this._embeddedViews.push(embView);\n        }\n    }\n\n    /**\n     * @hidden\n     * The function applies an optimized state change for scrolling up/left employing context change with view rearrangement\n     */\n    protected moveApplyScrollPrev(prevIndex: number): void {\n        for (let i = prevIndex - 1; i >= this.state.startIndex && this.igxForOf[i] !== undefined; i--) {\n            const input = this.igxForOf[i];\n            const embView = this._embeddedViews.pop();\n            const cntx = embView.context;\n            cntx.$implicit = input;\n            cntx.index = this.getContextIndex(input);\n            const view: ViewRef = this.dc.instance._vcr.detach(this.dc.instance._vcr.length - 1);\n            this.dc.instance._vcr.insert(view, 0);\n            this._embeddedViews.unshift(embView);\n        }\n    }\n\n    /**\n     * @hidden\n    */\n    protected getContextIndex(input) {\n        return this.isRemote ? this.state.startIndex + this.igxForOf.indexOf(input) : this.igxForOf.indexOf(input);\n    }\n\n    /**\n     * @hidden\n     * The function applies an optimized state change through context change for each view\n     */\n    protected fixedApplyScroll(): void {\n        let j = 0;\n        const endIndex = this.state.startIndex + this.state.chunkSize;\n        for (let i = this.state.startIndex; i < endIndex && this.igxForOf[i] !== undefined; i++) {\n            const input = this.igxForOf[i];\n            const embView = this._embeddedViews[j++];\n            const cntx = (embView as EmbeddedViewRef<any>).context;\n            cntx.$implicit = input;\n            cntx.index = this.getContextIndex(input);\n            cntx.count = this.igxForOf.length;\n        }\n    }\n\n    /**\n     * @hidden\n     * Function that is called when scrolling horizontally\n     */\n    protected onHScroll(event) {\n        /* in certain situations this may be called when no scrollbar is visible */\n        if (!parseInt(this.scrollComponent.nativeElement.children[0].style.width, 10)) {\n            return;\n        }\n        const prevStartIndex = this.state.startIndex;\n        // Updating horizontal chunks\n        const scrollOffset = this.fixedUpdateAllElements(event.target.scrollLeft);\n        this.dc.instance._viewContainer.element.nativeElement.style.left = -scrollOffset + 'px';\n\n        this.dc.changeDetectorRef.detectChanges();\n        if (prevStartIndex !== this.state.startIndex) {\n            this.onChunkLoad.emit(this.state);\n        }\n    }\n\n    /**\n     * Gets the function used to track changes in the items collection.\n     * By default the object references are compared. However this can be optimized if you have unique identifier\n     * value that can be used for the comparison instead of the object ref or if you have some other property values\n     * in the item object that should be tracked for changes.\n     * This option is similar to ngForTrackBy.\n     * ```typescript\n     * const trackFunc = this.parentVirtDir.igxForTrackBy;\n     * ```\n     */\n    @Input()\n    get igxForTrackBy(): TrackByFunction<T> { return this._trackByFn; }\n\n    /**\n     * Sets the function used to track changes in the items collection.\n     * This function can be set in scenarios where you want to optimize or\n     * customize the tracking of changes for the items in the collection.\n     * The igxForTrackBy function takes the index and the current item as arguments and needs to return the unique identifier for this item.\n     * ```typescript\n     * this.parentVirtDir.igxForTrackBy = (index, item) => {\n     *      return item.id + item.width;\n     * };\n     * ```\n     */\n    set igxForTrackBy(fn: TrackByFunction<T>) { this._trackByFn = fn; }\n\n    /**\n     * @hidden\n     */\n    protected _applyChanges() {\n        const prevChunkSize = this.state.chunkSize;\n        this.applyChunkSizeChange();\n        this._recalcScrollBarSize();\n        if (this.igxForOf && this.igxForOf.length && this.dc) {\n            const embeddedViewCopy = Object.assign([], this._embeddedViews);\n            let startIndex = this.state.startIndex;\n            let endIndex = this.state.chunkSize + this.state.startIndex;\n            if (this.isRemote) {\n                startIndex = 0;\n                endIndex = this.igxForOf.length;\n            }\n            for (let i = startIndex; i < endIndex && this.igxForOf[i] !== undefined; i++) {\n                const input = this.igxForOf[i];\n                const embView = embeddedViewCopy.shift();\n                const cntx = (embView as EmbeddedViewRef<any>).context;\n                cntx.$implicit = input;\n                cntx.index = this.getContextIndex(input);\n                cntx.count = this.igxForOf.length;\n            }\n            if (prevChunkSize !== this.state.chunkSize) {\n                this.onChunkLoad.emit(this.state);\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected _calcMaxBrowserHeight(): number {\n        const div = document.createElement('div');\n        const style = div.style;\n        style.position = 'absolute';\n        style.top = '9999999999999999px';\n        document.body.appendChild(div);\n        const size = Math.abs(div.getBoundingClientRect()['top']);\n        document.body.removeChild(div);\n        return size;\n    }\n\n    /**\n     * @hidden\n     * Recalculates the chunkSize based on current startIndex and returns the new size.\n     * This should be called after this.state.startIndex is updated, not before.\n     */\n    protected _calculateChunkSize(): number {\n        let chunkSize = 0;\n        if (this.igxForContainerSize !== null && this.igxForContainerSize !== undefined) {\n            if (!this.sizesCache) {\n                this.initSizesCache(this.igxForOf);\n            }\n            chunkSize = this._calcMaxChunkSize();\n            if (this.igxForOf && chunkSize > this.igxForOf.length) {\n                chunkSize = this.igxForOf.length;\n            }\n        } else {\n            if (this.igxForOf) {\n                chunkSize = this.igxForOf.length;\n            }\n        }\n        return chunkSize;\n    }\n\n    /**\n     * @hidden\n     */\n    protected getElement(viewref, nodeName) {\n        const elem = viewref.element.nativeElement.parentNode.getElementsByTagName(nodeName);\n        return elem.length > 0 ? elem[0] : null;\n    }\n\n    /**\n     * @hidden\n     */\n    protected initSizesCache(items: any[]): number {\n        let totalSize = 0;\n        let size = 0;\n        const dimension = this.igxForScrollOrientation === 'horizontal' ?\n            this.igxForSizePropName : 'height';\n        let i = 0;\n        this.sizesCache = [];\n        this.heightCache = [];\n        this.sizesCache.push(0);\n        const count = this.isRemote ? this.totalItemCount : items.length;\n        for (i; i < count; i++) {\n            if (dimension === 'height') {\n                // cols[i][dimension] = parseInt(this.igxForItemSize, 10) || 0;\n                size = parseInt(this.igxForItemSize, 10) || 0;\n                this.heightCache.push(size);\n            } else {\n                size = this._getItemSize(items[i], dimension);\n            }\n            totalSize += size;\n            this.sizesCache.push(totalSize);\n        }\n        return totalSize;\n    }\n\n    protected _updateSizeCache() {\n        if (this.igxForScrollOrientation === 'horizontal') {\n            this.initSizesCache(this.igxForOf);\n            return;\n        }\n        const oldHeight = this.heightCache.length > 0 ? this.heightCache.reduce((acc, val) => acc + val) : 0;\n        const newHeight = this.initSizesCache(this.igxForOf);\n\n        const diff = oldHeight - newHeight;\n\n        // if data has been changed while container is scrolled\n        // should update scroll top/left according to change so that same startIndex is in view\n        if (Math.abs(diff) > 0 && this.scrollPosition > 0) {\n            this.recalcUpdateSizes();\n            const offset = parseInt(this.dc.instance._viewContainer.element.nativeElement.style.top, 10);\n            this.scrollPosition = this.sizesCache[this.state.startIndex] - offset;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected _calcMaxChunkSize(): number {\n        let i = 0;\n        let length = 0;\n        let maxLength = 0;\n        const arr = [];\n        let sum = 0;\n        const availableSize = parseInt(this.igxForContainerSize, 10);\n        if (!availableSize) {\n            return 0;\n        }\n        const dimension = this.igxForScrollOrientation === 'horizontal' ?\n            this.igxForSizePropName : 'height';\n        const reducer = (accumulator, currentItem) => accumulator + this._getItemSize(currentItem, dimension);\n        for (i; i < this.igxForOf.length; i++) {\n            let item = this.igxForOf[i];\n            if (dimension === 'height') {\n                item = { value: this.igxForOf[i], height: this.heightCache[i] };\n            }\n            const size = dimension === 'height' ?\n                this.heightCache[i] :\n                this._getItemSize(item, dimension);\n            sum = arr.reduce(reducer, size);\n            if (sum < availableSize) {\n                arr.push(item);\n                length = arr.length;\n                if (i === this.igxForOf.length - 1) {\n                    // reached end without exceeding\n                    // include prev items until size is filled or first item is reached.\n                    let curItem = dimension === 'height' ? arr[0].value : arr[0];\n                    let prevIndex = this.igxForOf.indexOf(curItem) - 1;\n                    while (prevIndex >= 0 && sum <= availableSize) {\n                        curItem = dimension === 'height' ? arr[0].value : arr[0];\n                        prevIndex = this.igxForOf.indexOf(curItem) - 1;\n                        const prevItem = this.igxForOf[prevIndex];\n                        const prevSize = dimension === 'height' ?\n                            this.heightCache[prevIndex] :\n                            parseInt(prevItem[dimension], 10);\n                        sum = arr.reduce(reducer, prevSize);\n                        arr.unshift(prevItem);\n                        length = arr.length;\n                    }\n                }\n            } else {\n                arr.push(item);\n                length = arr.length + 1;\n                arr.shift();\n            }\n            if (length > maxLength) {\n                maxLength = length;\n            }\n        }\n        return maxLength;\n    }\n\n    /**\n     * @hidden\n     */\n    protected getIndexAt(left, set, index) {\n        let start = 0;\n        let end = set.length - 1;\n        if (left === 0) {\n            return 0;\n        }\n        while (start <= end) {\n            const midIdx = Math.floor((start + end) / 2);\n            const midLeft = set[midIdx];\n            const cmp = left - midLeft;\n            if (cmp > 0) {\n                start = midIdx + 1;\n            } else if (cmp < 0) {\n                end = midIdx - 1;\n            } else {\n                return midIdx;\n            }\n        }\n        return end;\n    }\n\n    protected _recalcScrollBarSize() {\n        const count = this.isRemote ? this.totalItemCount : (this.igxForOf ? this.igxForOf.length : 0);\n        this.dc.instance.notVirtual = !(this.igxForContainerSize && this.dc && this.state.chunkSize < count);\n        const scrollable = this.isScrollable();\n        if (this.igxForScrollOrientation === 'horizontal') {\n            const totalWidth = this.igxForContainerSize ? this.initSizesCache(this.igxForOf) : 0;\n            this.scrollComponent.nativeElement.style.width = this.igxForContainerSize + 'px';\n            this.scrollComponent.size = totalWidth;\n            if (totalWidth <= parseInt(this.igxForContainerSize, 10)) {\n                this.scrollPosition = 0;\n                // Need to reset the scrollAmount value here, because horizontalScrollBar is hidden, therefore\n                // onScroll event handler for VirtualHelperBaseDirective will not be called\n                this.scrollComponent.scrollAmount = 0;\n            }\n        }\n        if (this.igxForScrollOrientation === 'vertical') {\n            this.scrollComponent.nativeElement.style.height = parseInt(this.igxForContainerSize, 10) + 'px';\n            this.scrollComponent.size = this._calcHeight();\n            if ( this.scrollComponent.size <= parseInt(this.igxForContainerSize, 10)) {\n                this.scrollPosition = 0;\n                // Need to reset the scrollAmount value here, because verticalScrollBar is hidden, therefore\n                // onScroll event handler for VirtualHelperBaseDirective will not be called\n                this.scrollComponent.scrollAmount = 0;\n            }\n        }\n        if (scrollable !== this.isScrollable()) {\n            // scrollbar visibility has changed\n            this.onScrollbarVisibilityChanged.emit();\n        }\n    }\n\n    protected _calcHeight(): number {\n        let height;\n        if (this.heightCache) {\n            height = this.heightCache.reduce((acc, val) => acc + val, 0);\n        } else {\n            height = this.initSizesCache(this.igxForOf);\n        }\n        this._virtHeight = height;\n        if (height > this._maxHeight) {\n            this._virtHeightRatio = height / this._maxHeight;\n            height = this._maxHeight;\n        }\n        return height;\n    }\n\n    protected _recalcOnContainerChange(changes: SimpleChanges) {\n        this.dc.instance._viewContainer.element.nativeElement.style.top = '0px';\n        this.dc.instance._viewContainer.element.nativeElement.style.left = '0px';\n        const prevChunkSize = this.state.chunkSize;\n        this.applyChunkSizeChange();\n        this._recalcScrollBarSize();\n        if (prevChunkSize !== this.state.chunkSize) {\n            this.onChunkLoad.emit(this.state);\n        }\n        if (this.sizesCache && this.igxForScrollOrientation === 'horizontal') {\n            // Updating horizontal chunks and offsets based on the new scrollLeft\n            const scrollOffset = this.fixedUpdateAllElements(this.scrollPosition);\n            this.dc.instance._viewContainer.element.nativeElement.style.left = -scrollOffset + 'px';\n        }\n    }\n\n    /**\n     * @hidden\n     * Removes an elemenet from the embedded views and updates chunkSize.\n     */\n    protected removeLastElem() {\n        const oldElem = this._embeddedViews.pop();\n        this.onBeforeViewDestroyed.emit(oldElem);\n        // also detach from ViewContainerRef to make absolutely sure this is removed from the view container.\n        this.dc.instance._vcr.detach(this.dc.instance._vcr.length - 1);\n        oldElem.destroy();\n\n        this.state.chunkSize--;\n    }\n\n    /**\n     * @hidden\n     * If there exists an element that we can create embedded view for creates it, appends it and updates chunkSize\n     */\n    protected addLastElem() {\n        let elemIndex = this.state.startIndex + this.state.chunkSize;\n        if (!this.isRemote && !this.igxForOf) {\n            return;\n        }\n\n        if (elemIndex >= this.igxForOf.length) {\n            elemIndex = this.igxForOf.length - this.state.chunkSize;\n        }\n        const input = this.igxForOf[elemIndex];\n        const embeddedView = this.dc.instance._vcr.createEmbeddedView(\n            this._template,\n            new IgxForOfContext<T>(input, this.getContextIndex(input), this.igxForOf.length)\n        );\n\n        this._embeddedViews.push(embeddedView);\n        this.state.chunkSize++;\n\n        this._zone.run(() => {\n            this.cdr.markForCheck();\n        });\n    }\n\n    /**\n     * Recalculates chunkSize and adds/removes elements if need due to the change.\n     * this.state.chunkSize is updated in @addLastElem() or @removeLastElem()\n     */\n    protected applyChunkSizeChange() {\n        const chunkSize = this.isRemote ? (this.igxForOf ? this.igxForOf.length : 0) : this._calculateChunkSize();\n        if (chunkSize > this.state.chunkSize) {\n            const diff = chunkSize - this.state.chunkSize;\n            for (let i = 0; i < diff; i++) {\n                this.addLastElem();\n            }\n        } else if (chunkSize < this.state.chunkSize) {\n            const diff = this.state.chunkSize - chunkSize;\n            for (let i = 0; i < diff; i++) {\n                this.removeLastElem();\n            }\n        }\n    }\n\n    protected _updateScrollOffset() {\n        if (this.igxForScrollOrientation === 'horizontal') {\n            this._updateHScrollOffset();\n        } else {\n            this._updateVScrollOffset();\n        }\n    }\n    private _updateVScrollOffset() {\n        let scrollOffset = 0;\n        let currentScrollTop = this.scrollPosition;\n        if (this._virtHeightRatio !== 1) {\n            this._calcVirtualScrollTop(this.scrollPosition);\n            currentScrollTop = this._virtScrollTop;\n        }\n        const vScroll =  this.scrollComponent.nativeElement;\n        scrollOffset = vScroll && this.scrollComponent.size ?\n        currentScrollTop - this.sizesCache[this.state.startIndex] : 0;\n        this.dc.instance._viewContainer.element.nativeElement.style.top = -(scrollOffset) + 'px';\n    }\n\n    protected _calcVirtualScrollTop(scrollTop: number) {\n        const containerSize = parseInt(this.igxForContainerSize, 10);\n        const maxRealScrollTop = this.scrollComponent.size - containerSize;\n        const realPercentScrolled = maxRealScrollTop !== 0 ?  scrollTop / maxRealScrollTop : 0;\n        const maxVirtScrollTop = this._virtHeight - containerSize;\n        this._virtScrollTop = realPercentScrolled * maxVirtScrollTop;\n    }\n\n    private _updateHScrollOffset() {\n        let scrollOffset = 0;\n        scrollOffset =  this.scrollComponent.nativeElement &&\n            this.scrollComponent.size ?\n            this.scrollPosition - this.sizesCache[this.state.startIndex] : 0;\n        this.dc.instance._viewContainer.element.nativeElement.style.left = -scrollOffset + 'px';\n    }\n\n    private _getItemSize(item, dimension: string): number {\n        const dim = item[dimension];\n        return typeof dim === 'number' ? dim : parseInt(this.igxForItemSize, 10) || 0;\n    }\n}\n\nexport function getTypeNameForDebugging(type: any): string {\n    const name = 'name';\n    return type[name] || typeof type;\n}\n\nexport interface IForOfState extends IBaseEventArgs {\n    startIndex?: number;\n    chunkSize?: number;\n}\n\nexport interface IForOfDataChangingEventArgs extends IBaseEventArgs {\n    containerSize: number;\n}\n\n@Directive({\n    selector: '[igxGridFor][igxGridForOf]'\n})\nexport class IgxGridForOfDirective<T> extends IgxForOfDirective<T> implements OnInit, OnChanges, DoCheck {\n\n    constructor(\n        _viewContainer: ViewContainerRef,\n        _template: TemplateRef<NgForOfContext<T>>,\n        _differs: IterableDiffers,\n        resolver: ComponentFactoryResolver,\n        cdr: ChangeDetectorRef,\n        _zone: NgZone,\n        protected syncScrollService: IgxForOfScrollSyncService,\n        protected syncService: IgxForOfSyncService) {\n        super(_viewContainer, _template, _differs, resolver, cdr, _zone, syncScrollService);\n    }\n\n    @Input()\n    set igxGridForOf(value) {\n        this.igxForOf = value;\n    }\n\n    get igxGridForOf() {\n        return this.igxForOf;\n    }\n\n    /**\n     * @hidden @internal\n     * An event that is emitted after data has been changed but before the view is refreshed\n     */\n    @Output()\n    public onDataChanging = new EventEmitter<IForOfDataChangingEventArgs>();\n\n    ngOnInit() {\n        this.syncService.setMaster(this);\n        super.ngOnInit();\n        this.removeScrollEventListeners();\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        const forOf = 'igxGridForOf';\n        this.syncService.setMaster(this);\n        if (forOf in changes) {\n            const value = changes[forOf].currentValue;\n            if (!this._differ && value) {\n                try {\n                    this._differ = this._differs.find(value).create(this.igxForTrackBy);\n                } catch (e) {\n                    throw new Error(\n                        `Cannot find a differ supporting object \"${value}\" of type \"${getTypeNameForDebugging(value)}\".\n                     NgFor only supports binding to Iterables such as Arrays.`);\n                }\n            }\n        }\n        const defaultItemSize = 'igxForItemSize';\n        if (defaultItemSize in changes && !changes[defaultItemSize].firstChange &&\n             this.igxForScrollOrientation === 'vertical' && this.igxForOf) {\n            // handle default item size changed.\n            this.initSizesCache(this.igxForOf);\n        }\n        const containerSize = 'igxForContainerSize';\n        if (containerSize in changes && !changes[containerSize].firstChange && this.igxForOf) {\n            this._recalcOnContainerChange(changes);\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get sizesCache(): number[] {\n        if (this.syncService.isMaster(this)) {\n            return this._sizesCache;\n        }\n        return this.syncService.sizesCache(this.igxForScrollOrientation);\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public set sizesCache(value: number[]) {\n        this._sizesCache = value;\n    }\n\n    protected get itemsDimension() {\n        return this.igxForScrollOrientation === 'horizontal' ? this.igxForSizePropName : 'height';\n    }\n\n    protected getItemSize(item) {\n        let size = 0;\n        const dimension = this.igxForScrollOrientation === 'horizontal' ?\n            this.igxForSizePropName : 'height';\n        if (dimension === 'height') {\n            size = parseInt(this.igxForItemSize, 10) || 0;\n            if (item && item.summaries) {\n                size = item.max;\n            } else if (item && item.groups && item.height) {\n                size = item.height;\n            }\n        } else {\n            size = parseInt(item[dimension], 10) || 0;\n        }\n        return size;\n    }\n\n    protected initSizesCache(items: any[]): number {\n        if (!this.syncService.isMaster(this)) {\n            const masterSizesCache = this.syncService.sizesCache(this.igxForScrollOrientation);\n            return masterSizesCache[masterSizesCache.length - 1];\n        }\n        let totalSize = 0;\n        let size = 0;\n        let i = 0;\n        this.sizesCache = [];\n        this.heightCache = [];\n        this.sizesCache.push(0);\n        const count = this.isRemote ? this.totalItemCount : items.length;\n        for (i; i < count; i++) {\n            size = this.getItemSize(items[i]);\n            if (this.itemsDimension === 'height') {\n                this.heightCache.push(size);\n            }\n            totalSize += size;\n            this.sizesCache.push(totalSize);\n        }\n        return totalSize;\n    }\n\n    protected _updateSizeCache(changes: IterableChanges<T> = null) {\n        if (this.igxForScrollOrientation === 'horizontal') {\n            this.initSizesCache(this.igxForOf);\n            return;\n        }\n\n        const oldHeight = this.heightCache.length > 0 ? this.heightCache.reduce((acc, val) => acc + val) : 0;\n        let newHeight = oldHeight;\n        if (changes && !this.isRemote) {\n            newHeight = this.handleCacheChanges(changes);\n        } else {\n            newHeight = this.initSizesCache(this.igxForOf);\n        }\n\n        const diff = oldHeight - newHeight;\n\n        // if data has been changed while container is scrolled\n        // should update scroll top/left according to change so that same startIndex is in view\n        if (Math.abs(diff) > 0) {\n            // TODO: This code can be removed. However tests need to be rewritten in a way that they wait for ResizeObserved to complete.\n            // So leaving as is for the moment.\n            requestAnimationFrame(() => {\n                this.recalcUpdateSizes();\n                const offset = parseInt(this.dc.instance._viewContainer.element.nativeElement.style.top, 10);\n                if (this.scrollPosition !== 0) {\n                    this.scrollPosition = this.sizesCache[this.state.startIndex] - offset;\n                } else {\n                    this._updateScrollOffset();\n                }\n            });\n        }\n    }\n\n    protected handleCacheChanges(changes: IterableChanges<T>) {\n        const identityChanges = [];\n        const newHeightCache = [];\n        const newSizesCache = [];\n        newSizesCache.push(0);\n        let newHeight = 0;\n\n        // When there are more than one removed items the changes are not reliable so those with identity change should be default size.\n        let numRemovedItems = 0;\n        changes.forEachRemovedItem(() => numRemovedItems++);\n\n        // Get the identity changes to determine later if those that have changed their indexes should be assigned default item size.\n        changes.forEachIdentityChange((item) => {\n            if (item.currentIndex !== item.previousIndex) {\n                // Filter out ones that have not changed their index.\n                identityChanges[item.currentIndex] = item;\n            }\n        });\n\n        // Processing each item that is passed to the igxForOf so far seem to be most reliable. We parse the updated list of items.\n        changes.forEachItem((item) => {\n            if (item.previousIndex !== null &&\n                (numRemovedItems < 2 || !identityChanges.length || identityChanges[item.currentIndex])) {\n                // Reuse cache on those who have previousIndex.\n                // When there are more than one removed items currently the changes are not readable so ones with identity change\n                // should be racalculated.\n                newHeightCache[item.currentIndex] = this.heightCache[item.previousIndex];\n            } else {\n                // Assign default item size.\n                newHeightCache[item.currentIndex] = this.getItemSize(item.item);\n            }\n            newSizesCache[item.currentIndex + 1] = newSizesCache[item.currentIndex] + newHeightCache[item.currentIndex];\n            newHeight += newHeightCache[item.currentIndex];\n        });\n        this.heightCache = newHeightCache;\n        this.sizesCache = newSizesCache;\n        return newHeight;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public assumeMaster(): void {\n        this._sizesCache = this.syncService.sizesCache(this.igxForScrollOrientation);\n        this.syncService.setMaster(this, true);\n    }\n\n    ngDoCheck() {\n        if (this._differ) {\n            const changes = this._differ.diff(this.igxForOf);\n            if (changes) {\n                const args: IForOfDataChangingEventArgs = {\n                    containerSize: this.igxForContainerSize\n                };\n                this.onDataChanging.emit(args);\n                //  re-init cache.\n                if (!this.igxForOf) {\n                    this.igxForOf = [];\n                }\n                /* we need to reset the master dir if all rows are removed\n                (e.g. because of filtering); if all columns are hidden, rows are\n                still rendered empty, so we should not reset master */\n                if (!this.igxForOf.length &&\n                    this.igxForScrollOrientation === 'vertical') {\n                    this.syncService.resetMaster();\n                }\n                this.syncService.setMaster(this);\n                this.igxForContainerSize = args.containerSize;\n                this._updateSizeCache(changes);\n                this._applyChanges();\n                this._updateScrollOffset();\n                this.onDataChanged.emit();\n            }\n        }\n    }\n\n    onScroll(event) {\n        if (!parseInt(this.scrollComponent.nativeElement.style.height, 10)) {\n            return;\n        }\n        if (!this._bScrollInternal) {\n            this._calcVirtualScrollTop(event.target.scrollTop);\n        } else {\n            this._bScrollInternal = false;\n        }\n        const scrollOffset = this.fixedUpdateAllElements(this._virtScrollTop);\n\n        this.dc.instance._viewContainer.element.nativeElement.style.top = -(scrollOffset) + 'px';\n\n        this._zone.onStable.pipe(first()).subscribe( () => {\n            this.recalcUpdateSizes();\n        });\n        this.cdr.markForCheck();\n    }\n\n    onHScroll(scrollAmount) {\n        /* in certain situations this may be called when no scrollbar is visible */\n        if (!this.scrollComponent || !parseInt(this.scrollComponent.nativeElement.children[0].style.width, 10)) {\n            return;\n        }\n        // Updating horizontal chunks\n        const scrollOffset = this.fixedUpdateAllElements(scrollAmount);\n        this.dc.instance._viewContainer.element.nativeElement.style.left = -scrollOffset + 'px';\n    }\n\n    protected addLastElem() {\n        let elemIndex = this.state.startIndex + this.state.chunkSize;\n        if (!this.isRemote && !this.igxForOf) {\n            return;\n        }\n\n        if (elemIndex >= this.igxForOf.length) {\n            elemIndex = this.igxForOf.length - this.state.chunkSize;\n        }\n        const input = this.igxForOf[elemIndex];\n        const embeddedView = this.dc.instance._vcr.createEmbeddedView(\n            this._template,\n            new IgxForOfContext<T>(input, this.getContextIndex(input), this.igxForOf.length)\n        );\n\n        this._embeddedViews.push(embeddedView);\n        this.state.chunkSize++;\n    }\n\n    protected _updateViews(prevChunkSize) {\n        if (this.igxForOf && this.igxForOf.length && this.dc) {\n            const embeddedViewCopy = Object.assign([], this._embeddedViews);\n            let startIndex;\n            let endIndex;\n            if (this.isRemote) {\n                startIndex = 0;\n                endIndex = this.igxForOf.length;\n            } else {\n                startIndex = this.getIndexAt(\n                    this.scrollPosition,\n                    this.sizesCache,\n                    0\n                );\n                if (startIndex + this.state.chunkSize > this.igxForOf.length) {\n                    startIndex = this.igxForOf.length - this.state.chunkSize;\n                }\n                this.state.startIndex = startIndex;\n                endIndex = this.state.chunkSize + this.state.startIndex;\n            }\n\n            for (let i = startIndex; i < endIndex && this.igxForOf[i] !== undefined; i++) {\n                const input = this.igxForOf[i];\n                const embView = embeddedViewCopy.shift();\n                const cntx = (embView as EmbeddedViewRef<any>).context;\n                cntx.$implicit = input;\n                cntx.index = this.getContextIndex(input);\n                cntx.count = this.igxForOf.length;\n            }\n            if (prevChunkSize !== this.state.chunkSize) {\n                this.onChunkLoad.emit(this.state);\n            }\n        }\n    }\n    protected _applyChanges() {\n        const prevChunkSize = this.state.chunkSize;\n        this.applyChunkSizeChange();\n        this._recalcScrollBarSize();\n        this._updateViews(prevChunkSize);\n    }\n\n    /**\n     * @hidden\n     */\n    protected _calcMaxChunkSize(): number {\n        if (this.syncService.isMaster(this)) {\n            return super._calcMaxChunkSize();\n        }\n        return this.syncService.chunkSize(this.igxForScrollOrientation);\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxForOfDirective, IgxGridForOfDirective, DisplayContainerComponent, VirtualHelperComponent,\n         HVirtualHelperComponent, VirtualHelperBaseDirective],\n    entryComponents: [DisplayContainerComponent, VirtualHelperComponent, HVirtualHelperComponent],\n    exports: [IgxForOfDirective, IgxGridForOfDirective],\n    imports: [IgxScrollInertiaModule, CommonModule]\n})\n\nexport class IgxForOfModule {\n}\n","import { Directive, ElementRef, HostBinding, Input, OnInit } from '@angular/core';\n\nenum IgxHintPosition {\n    START,\n    END\n}\n\n@Directive({\n    selector: 'igx-hint,[igxHint]'\n})\nexport class IgxHintDirective implements OnInit {\n    private _position: IgxHintPosition = IgxHintPosition.START;\n    /**\n     * Sets/gets whether the hint position is at the start.\n     * Default value is `false`.\n     * ```typescript\n     * @ViewChild('hint', {read: IgxHintDirective})\n     * public igxHint: IgxHintDirective;\n     * this.igxHint.isPositionStart = true;\n     * ```\n     * ```typescript\n     * let isHintPositionStart = this.igxHint.isPositionStart;\n     * ```\n     * @memberof IgxHintDirective\n     */\n    @HostBinding('class.igx-input-group__hint-item--start')\n    public isPositionStart = false;\n    /**\n     * Sets/gets whether the hint position is at the end.\n     * Default value is `false`.\n     * ```typescript\n     * @ViewChild('hint', {read: IgxHintDirective})\n     * public igxHint: IgxHintDirective;\n     * this.igxHint.isPositionEnd = true;\n     * ```\n     * ```typescript\n     * let isHintPositionEnd = this.igxHint.isPositionEnd;\n     * ```\n     * @memberof IgxHintDirective\n     */\n    @HostBinding('class.igx-input-group__hint-item--end')\n    public isPositionEnd = false;\n\n    constructor(private _element: ElementRef) {\n    }\n    /**\n     * Sets the position of the hint.\n     * ```html\n     * <igx-input-group>\n     *  <input igxInput type=\"text\"/>\n     *  <igx-hint #hint [position]=\"'start'\">IgxHint displayed at the start</igx-hint>\n     * </igx-input-group>\n     * ```\n     * @memberof IgxHintDirective\n     */\n    @Input('position')\n    set position(value: string) {\n        const position: IgxHintPosition = (IgxHintPosition as any)[value.toUpperCase()];\n        if (position !== undefined) {\n            this._position = position;\n            this._applyPosition(this._position);\n        }\n    }\n    /**\n     * Gets the position of the hint.\n     * ```typescript\n     * @ViewChild('hint', {read: IgxHintDirective})\n     * public igxHint: IgxHintDirective;\n     * let hintPosition =  this.igxHint.position;\n     * ```\n     * @memberof IgxHintDirective\n     */\n    get position() {\n        return this._position.toString();\n    }\n    /**\n     *@hidden\n     */\n    ngOnInit() {\n        this._applyPosition(this._position);\n    }\n\n    private _applyPosition(position: IgxHintPosition) {\n        this.isPositionStart = this.isPositionEnd = false;\n        switch (position) {\n            case IgxHintPosition.START:\n                this.isPositionStart = true;\n                break;\n            case IgxHintPosition.END:\n                this.isPositionEnd = true;\n                break;\n            default: break;\n        }\n    }\n}\n","import {\n    ChangeDetectorRef,\n    Component,\n    ContentChildren,\n    ElementRef,\n    forwardRef,\n    QueryList,\n    OnChanges,\n    Input,\n    OnDestroy,\n    ViewChild,\n    ContentChild,\n    AfterViewInit,\n    Output,\n    EventEmitter,\n    Optional,\n    Inject,\n    SimpleChanges\n} from '@angular/core';\nimport { IgxToggleDirective } from '../directives/toggle/toggle.directive';\nimport { IgxDropDownItemComponent } from './drop-down-item.component';\nimport { IgxDropDownBaseDirective } from './drop-down.base';\nimport { DropDownActionKey, Navigate } from './drop-down.common';\nimport { IGX_DROPDOWN_BASE, IDropDownBase } from './drop-down.common';\nimport { ISelectionEventArgs } from './drop-down.common';\nimport { CancelableEventArgs, CancelableBrowserEventArgs, isIE, IBaseEventArgs } from '../core/utils';\nimport { IgxSelectionAPIService } from '../core/selection';\nimport { Subject } from 'rxjs';\nimport { IgxDropDownItemBaseDirective } from './drop-down-item.base';\nimport { OverlaySettings } from '../services';\nimport { IgxForOfDirective } from '../directives/for-of/for_of.directive';\nimport { take } from 'rxjs/operators';\nimport { DisplayDensityToken, IDisplayDensityOptions } from '../core/density';\n\n/**\n * **Ignite UI for Angular DropDown** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/drop_down.html)\n *\n * The Ignite UI for Angular Drop Down displays a scrollable list of items which may be visually grouped and\n * supports selection of a single item. Clicking or tapping an item selects it and closes the Drop Down\n *\n * Example:\n * ```html\n * <igx-drop-down>\n *   <igx-drop-down-item *ngFor=\"let item of items\" disabled={{item.disabled}} isHeader={{item.header}}>\n *     {{ item.value }}\n *   </igx-drop-down-item>\n * </igx-drop-down>\n * ```\n */\n@Component({\n    selector: 'igx-drop-down',\n    templateUrl: './drop-down.component.html',\n    providers: [{ provide: IGX_DROPDOWN_BASE, useExisting: IgxDropDownComponent }]\n})\nexport class IgxDropDownComponent extends IgxDropDownBaseDirective implements IDropDownBase, OnChanges, AfterViewInit, OnDestroy {\n    protected destroy$ = new Subject<boolean>();\n    protected _scrollPosition: number;\n\n    @ContentChild(IgxForOfDirective, { read: IgxForOfDirective })\n    protected virtDir: IgxForOfDirective<any>;\n\n    @ViewChild(IgxToggleDirective, { static: true })\n    protected toggleDirective: IgxToggleDirective;\n\n    @ViewChild('scrollContainer', { static: true })\n    protected scrollContainerRef: ElementRef;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChildren(forwardRef(() => IgxDropDownItemComponent), { descendants: true })\n    public children: QueryList<IgxDropDownItemBaseDirective>;\n\n    /**\n     * Emitted before the dropdown is opened\n     *\n     * ```html\n     * <igx-drop-down (onOpening)='handleOpening()'></igx-drop-down>\n     * ```\n     */\n    @Output()\n    public onOpening = new EventEmitter<CancelableEventArgs & IBaseEventArgs>();\n\n    /**\n     * Emitted after the dropdown is opened\n     *\n     * ```html\n     * <igx-drop-down (onOpened)='handleOpened()'></igx-drop-down>\n     * ```\n     */\n    @Output()\n    public onOpened = new EventEmitter<void>();\n\n    /**\n     * Emitted before the dropdown is closed\n     *\n     * ```html\n     * <igx-drop-down (onClosing)='handleClosing()'></igx-drop-down>\n     * ```\n     */\n    @Output()\n    public onClosing = new EventEmitter<CancelableBrowserEventArgs & IBaseEventArgs>();\n\n    /**\n     * Emitted after the dropdown is closed\n     *\n     * ```html\n     * <igx-drop-down (onClosed)='handleClosed()'></igx-drop-down>\n     * ```\n     */\n    @Output()\n    public onClosed = new EventEmitter<void>();\n\n    /**\n     * Gets/sets whether items take focus. Disabled by default.\n     * When enabled, drop down items gain tab index and are focused when active -\n     * this includes activating the selected item when opening the drop down and moving with keyboard navigation.\n     *\n     * Note: Keep that focus shift in mind when using the igxDropDownItemNavigation directive\n     * and ensure it's placed either on each focusable item or a common ancestor to allow it to handle keyboard events.\n     *\n     * ```typescript\n     * // get\n     * let dropDownAllowsItemFocus = this.dropdown.allowItemsFocus;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-drop-down [allowItemsFocus]='true'></igx-drop-down>\n     * ```\n     */\n    @Input()\n    public allowItemsFocus = false;\n\n    /**\n     * @hidden @internal\n     */\n    public get focusedItem(): IgxDropDownItemBaseDirective {\n        if (this.virtDir) {\n            return this._focusedItem && this._focusedItem.index !== -1 ?\n                (this.children.find(e => e.index === this._focusedItem.index) || null) :\n                null;\n        }\n        return this._focusedItem;\n    }\n\n    public set focusedItem(value: IgxDropDownItemBaseDirective) {\n        if (!value) {\n            this.selection.clear(`${this.id}-active`);\n            this._focusedItem = null;\n            return;\n        }\n        this._focusedItem = value;\n        if (this.virtDir) {\n            this._focusedItem = {\n                value: value.value,\n                index: value.index\n            } as IgxDropDownItemBaseDirective;\n        }\n        this.selection.set(`${this.id}-active`, new Set([this._focusedItem]));\n    }\n\n    @Input()\n    get id(): string {\n        return this._id;\n    }\n    set id(value: string) {\n        this.selection.set(value, this.selection.get(this.id));\n        this.selection.clear(this.id);\n        this.selection.set(value, this.selection.get(`${this.id}-active`));\n        this.selection.clear(`${this.id}-active`);\n        this._id = value;\n    }\n\n    /** Id of the internal listbox of the drop down */\n    public get listId() {\n        return this.id + '-list';\n    }\n\n    /**\n     * Get currently selected item\n     *\n     * ```typescript\n     * let currentItem = this.dropdown.selectedItem;\n     * ```\n     */\n    public get selectedItem(): IgxDropDownItemBaseDirective {\n        const selectedItem = this.selection.first_item(this.id);\n        if (selectedItem) {\n            return selectedItem;\n        }\n        return null;\n    }\n\n    /**\n     * Gets if the dropdown is collapsed\n     *\n     * ```typescript\n     * let isCollapsed = this.dropdown.collapsed;\n     * ```\n     */\n    public get collapsed(): boolean {\n        return this.toggleDirective.collapsed;\n    }\n\n    /** @hidden @internal */\n    public get scrollContainer(): HTMLElement {\n        return this.scrollContainerRef.nativeElement;\n    }\n\n    protected get collectionLength() {\n        if (this.virtDir) {\n            return this.virtDir.totalItemCount || this.virtDir.igxForOf.length;\n        }\n    }\n\n    constructor(\n        protected elementRef: ElementRef,\n        protected cdr: ChangeDetectorRef,\n        protected selection: IgxSelectionAPIService,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n        super(elementRef, cdr, _displayDensityOptions);\n    }\n\n    /**\n     * Opens the dropdown\n     *\n     * ```typescript\n     * this.dropdown.open();\n     * ```\n     */\n    public open(overlaySettings?: OverlaySettings) {\n        this.toggleDirective.open(overlaySettings);\n        this.updateScrollPosition();\n    }\n\n    /**\n     * Closes the dropdown\n     *\n     * ```typescript\n     * this.dropdown.close();\n     * ```\n     */\n    public close() {\n        this.toggleDirective.close();\n    }\n\n    /**\n     * Toggles the dropdown\n     *\n     * ```typescript\n     * this.dropdown.toggle();\n     * ```\n     */\n    public toggle(overlaySettings?: OverlaySettings) {\n        if (this.collapsed || this.toggleDirective.isClosing) {\n            this.open(overlaySettings);\n        } else {\n            this.close();\n        }\n    }\n\n    /**\n     * Select an item by index\n     * @param index of the item to select; If the drop down uses *igxFor, pass the index in data\n     */\n    public setSelectedItem(index: number) {\n        if (index < 0 || index >= this.items.length) {\n            return;\n        }\n        let newSelection: IgxDropDownItemBaseDirective;\n        if (this.virtDir) {\n            newSelection = {\n                value: this.virtDir.igxForOf[index],\n                index\n            } as IgxDropDownItemBaseDirective;\n        } else {\n            newSelection = this.items[index];\n        }\n        this.selectItem(newSelection);\n    }\n\n    /**\n     * Navigates to the item on the specified index\n     * If the data in the drop-down is virtualized, pass the index of the item in the virtualized data.\n     * @param newIndex number\n     */\n    public navigateItem(index: number) {\n        if (this.virtDir) {\n            if (index === -1 || index >= this.collectionLength) {\n                return;\n            }\n            const direction = index > (this.focusedItem ? this.focusedItem.index : -1) ? Navigate.Down : Navigate.Up;\n            const subRequired = this.isIndexOutOfBounds(index, direction);\n            this.focusedItem = {\n                value: this.virtDir.igxForOf[index],\n                index: index\n            } as IgxDropDownItemBaseDirective;\n            if (subRequired) {\n                this.virtDir.scrollTo(index);\n            }\n            if (subRequired) {\n                this.virtDir.onChunkLoad.pipe(take(1)).subscribe(() => {\n                    this.skipHeader(direction);\n                });\n            } else {\n                this.skipHeader(direction);\n            }\n        } else {\n            super.navigateItem(index);\n        }\n        if (this.allowItemsFocus && this.focusedItem) {\n            this.focusedItem.element.nativeElement.focus();\n            this.cdr.markForCheck();\n        }\n    }\n\n    private isIndexOutOfBounds(index: number, direction: Navigate) {\n        const virtState = this.virtDir.state;\n        const currentPosition = this.virtDir.getScroll().scrollTop;\n        const itemPosition = this.virtDir.getScrollForIndex(index, direction === Navigate.Down);\n        const indexOutOfChunk = index < virtState.startIndex || index > virtState.chunkSize + virtState.startIndex;\n        const scrollNeeded = direction === Navigate.Down ? currentPosition < itemPosition : currentPosition > itemPosition;\n        const subRequired = indexOutOfChunk || scrollNeeded;\n        return subRequired;\n    }\n\n    protected skipHeader(direction: Navigate) {\n        if (!this.focusedItem) {\n            return;\n        }\n        if (this.focusedItem.isHeader || this.focusedItem.disabled) {\n            if (direction === Navigate.Up) {\n                this.navigatePrev();\n            } else {\n                this.navigateNext();\n            }\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    updateScrollPosition() {\n        if (!this.virtDir) {\n            return;\n        }\n        if (!this.selectedItem) {\n            this.virtDir.scrollTo(0);\n            return;\n        }\n        let targetScroll = this.virtDir.getScrollForIndex(this.selectedItem.index);\n        const itemsInView = this.virtDir.igxForContainerSize / this.virtDir.igxForItemSize;\n        targetScroll -= (itemsInView / 2 - 1) * this.virtDir.igxForItemSize;\n        this.virtDir.getScroll().scrollTop = targetScroll;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onToggleOpening(e: CancelableEventArgs) {\n        this.onOpening.emit(e);\n        if (e.cancel) {\n            return;\n        }\n\n        if (this.virtDir) {\n            this.virtDir.scrollPosition = this._scrollPosition;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onToggleContentAppended() {\n        if (!this.virtDir && this.selectedItem) {\n           this.scrollToItem(this.selectedItem);\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onToggleOpened() {\n        if (this.selectedItem) {\n            this.focusedItem = this.selectedItem;\n            this._focusedItem.focused = true;\n        } else if (this.allowItemsFocus) {\n            this.navigateFirst();\n        }\n        this.onOpened.emit();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onToggleClosing(e: CancelableBrowserEventArgs) {\n        this.onClosing.emit(e);\n        if (this.virtDir) {\n            this._scrollPosition = this.virtDir.scrollPosition;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onToggleClosed() {\n        if (this._focusedItem) {\n            this._focusedItem.focused = false;\n        }\n        this.onClosed.emit();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngOnDestroy() {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n        this.selection.clear(this.id);\n        this.selection.clear(`${this.id}-active`);\n    }\n\n    protected scrollToItem(item: IgxDropDownItemBaseDirective) {\n        const itemPosition = this.calculateScrollPosition(item);\n\n        //  in IE11 setting sctrollTop is somehow slow and forces dropdown\n        //  to appear on screen before animation start. As a result dropdown\n        //  flickers badly. This is why we set scrollTop just a little later\n        //  allowing animation to start and prevent dropdown flickering\n        if (isIE()) {\n            setTimeout(() => {\n                this.scrollContainer.scrollTop = (itemPosition);\n            }, 1);\n        } else {\n            this.scrollContainer.scrollTop = (itemPosition);\n        }\n    }\n\n    /** @hidden @internal */\n    public calculateScrollPosition(item: IgxDropDownItemBaseDirective): number {\n        if (!item) {\n            return 0;\n        }\n\n        const elementRect = item.element.nativeElement.getBoundingClientRect();\n        const parentRect = this.scrollContainer.getBoundingClientRect();\n        const scrollDelta = parentRect.top - elementRect.top;\n        let scrollPosition = this.scrollContainer.scrollTop - scrollDelta;\n\n        const dropDownHeight = this.scrollContainer.clientHeight;\n        scrollPosition -= dropDownHeight / 2;\n        scrollPosition += item.elementHeight / 2;\n\n        return Math.floor(scrollPosition);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    // temp workaround until fix --> https://github.com/angular/angular/issues/34992\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes.id) {\n            this.toggleDirective.id = changes.id.currentValue;\n        }\n    }\n\n    ngAfterViewInit() {\n        if (this.virtDir) {\n            this.virtDir.igxForItemSize = 28;\n        }\n    }\n\n    /** Keydown Handler */\n    public onItemActionKey(key: DropDownActionKey, event?: Event) {\n        super.onItemActionKey(key, event);\n        this.close();\n    }\n\n    /**\n     * Virtual scroll implementation\n     * @hidden @internal\n     */\n    public navigateFirst() {\n        if (this.virtDir) {\n            this.navigateItem(0);\n        } else {\n            super.navigateFirst();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public navigateLast() {\n        if (this.virtDir) {\n            this.navigateItem(this.virtDir.totalItemCount ? this.virtDir.totalItemCount - 1 : this.virtDir.igxForOf.length - 1);\n        } else {\n            super.navigateLast();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public navigateNext() {\n        if (this.virtDir) {\n            this.navigateItem(this._focusedItem ? this._focusedItem.index + 1 : 0);\n        } else {\n            super.navigateNext();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public navigatePrev() {\n        if (this.virtDir) {\n            this.navigateItem(this._focusedItem ? this._focusedItem.index - 1 : 0);\n        } else {\n            super.navigatePrev();\n        }\n    }\n\n    /**\n     * Handles the `onSelection` emit and the drop down toggle when selection changes\n     * @hidden\n     * @internal\n     * @param newSelection\n     * @param event\n     */\n    public selectItem(newSelection?: IgxDropDownItemBaseDirective, event?: Event) {\n        const oldSelection = this.selectedItem;\n        if (!newSelection) {\n            newSelection = this.focusedItem;\n        }\n        if (newSelection === null) {\n            return;\n        }\n        if (newSelection instanceof IgxDropDownItemBaseDirective && newSelection.isHeader) {\n            return;\n        }\n        if (this.virtDir) {\n            newSelection = {\n                value: newSelection.value,\n                index: newSelection.index\n            } as IgxDropDownItemBaseDirective;\n        }\n        const args: ISelectionEventArgs = { oldSelection, newSelection, cancel: false };\n        this.onSelection.emit(args);\n\n        if (!args.cancel) {\n            if (this.isSelectionValid(args.newSelection)) {\n                this.selection.set(this.id, new Set([args.newSelection]));\n                if (!this.virtDir) {\n                    if (oldSelection) {\n                        oldSelection.selected = false;\n                    }\n                    if (args.newSelection) {\n                        args.newSelection.selected = true;\n                    }\n                }\n                if (event) {\n                    this.toggleDirective.close();\n                }\n            } else {\n                throw new Error('Please provide a valid drop-down item for the selection!');\n            }\n        }\n    }\n\n    /**\n     * Clears the selection of the dropdown\n     * ```typescript\n     * this.dropdown.clearSelection();\n     * ```\n     */\n    public clearSelection() {\n        const oldSelection = this.selectedItem;\n        const newSelection: IgxDropDownItemBaseDirective = null;\n        const args: ISelectionEventArgs = { oldSelection, newSelection, cancel: false };\n        this.onSelection.emit(args);\n        if (this.selectedItem && !args.cancel) {\n            this.selectedItem.selected = false;\n            this.selection.clear(this.id);\n        }\n    }\n\n    /**\n     * Checks whether the selection is valid\n     * `null` - the selection should be emptied\n     * Virtual? - the selection should at least have and `index` and `value` property\n     * Non-virtual? - the selection should be a valid drop-down item and **not** be a header\n     */\n    protected isSelectionValid(selection: any): boolean {\n        return selection === null\n        || (this.virtDir && selection.hasOwnProperty('value') && selection.hasOwnProperty('index'))\n        || (selection instanceof IgxDropDownItemComponent && !selection.isHeader);\n    }\n}\n\n","import { Directive, Optional, Self, Input, HostListener, Inject } from '@angular/core';\nimport { IGX_DROPDOWN_BASE } from './drop-down.common';\nimport { IDropDownNavigationDirective } from './drop-down.common';\nimport { IgxDropDownBaseDirective } from './drop-down.base';\nimport { DropDownActionKey } from './drop-down.common';\n\n/**\n * Navigation Directive that handles keyboard events on its host and controls a targeted IgxDropDownBaseDirective component\n */\n@Directive({\n    selector: '[igxDropDownItemNavigation]'\n})\nexport class IgxDropDownItemNavigationDirective implements IDropDownNavigationDirective {\n\n    protected _target: IgxDropDownBaseDirective = null;\n\n    constructor(@Self() @Optional() @Inject(IGX_DROPDOWN_BASE) public dropdown: IgxDropDownBaseDirective) { }\n\n    /**\n     * Gets the target of the navigation directive;\n     *\n     * ```typescript\n     * // Get\n     * export class MyComponent {\n     *  ...\n     *  @ContentChild(IgxDropDownNavigationDirective)\n     *  navDirective: IgxDropDownNavigationDirective = null\n     *  ...\n     *  const navTarget: IgxDropDownBaseDirective = navDirective.navTarget\n     * }\n     * ```\n     */\n    get target(): IgxDropDownBaseDirective {\n        return this._target;\n    }\n\n    /**\n     * Sets the target of the navigation directive;\n     * If no valid target is passed, it falls back to the drop down context\n     *\n     * ```html\n     * <!-- Set -->\n     * <input [igxDropDownItemNavigation]=\"dropdown\" />\n     * ...\n     * <igx-drop-down #dropdown>\n     * ...\n     * </igx-drop-down>\n     * ```\n     */\n    @Input('igxDropDownItemNavigation')\n    set target(target: IgxDropDownBaseDirective) {\n        this._target = target ? target : this.dropdown;\n    }\n\n    /**\n     * Captures keydown events and calls the appropriate handlers on the target component\n     */\n    @HostListener('keydown', ['$event'])\n    handleKeyDown(event: KeyboardEvent) {\n        if (event) {\n            const key = event.key.toLowerCase();\n            if (!this.target.collapsed) { // If dropdown is opened\n                const navKeys = ['esc', 'escape', 'enter', 'space', 'spacebar', ' ',\n            'arrowup', 'up', 'arrowdown', 'down', 'home', 'end'];\n                if (navKeys.indexOf(key) === -1) { // If key has appropriate function in DD\n                    return;\n                }\n                event.preventDefault();\n                event.stopPropagation();\n            } else { // If dropdown is closed, do nothing\n                return;\n            }\n            switch (key) {\n                case 'esc':\n                case 'escape':\n                    this.target.onItemActionKey(DropDownActionKey.ESCAPE, event);\n                    break;\n                case 'enter':\n                    this.target.onItemActionKey(DropDownActionKey.ENTER, event);\n                    break;\n                case 'space':\n                case 'spacebar':\n                case ' ':\n                    this.target.onItemActionKey(DropDownActionKey.SPACE, event);\n                    break;\n                case 'arrowup':\n                case 'up':\n                    this.onArrowUpKeyDown();\n                    break;\n                case 'arrowdown':\n                case 'down':\n                    this.onArrowDownKeyDown();\n                    break;\n                case 'home':\n                    this.onHomeKeyDown();\n                    break;\n                case 'end':\n                    this.onEndKeyDown();\n                    break;\n                default:\n                    return;\n            }\n        }\n    }\n\n    /**\n     * Navigates to previous item\n     */\n    onArrowDownKeyDown() {\n        this.target.navigateNext();\n    }\n\n    /**\n     * Navigates to previous item\n     */\n    onArrowUpKeyDown() {\n        this.target.navigatePrev();\n    }\n\n    /**\n     * Navigates to target's last item\n     */\n    onEndKeyDown() {\n        this.target.navigateLast();\n    }\n\n    /**\n     * Navigates to target's first item\n     */\n    onHomeKeyDown() {\n        this.target.navigateFirst();\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { IgxDropDownComponent } from './drop-down.component';\nimport { IgxDropDownItemComponent } from './drop-down-item.component';\nimport { IgxDropDownItemNavigationDirective } from './drop-down-navigation.directive';\nimport { CommonModule } from '@angular/common';\nimport { IgxToggleModule } from '../directives/toggle/toggle.directive';\nimport { IgxSelectionAPIService } from '../core/selection';\nimport { IgxDropDownGroupComponent } from './drop-down-group.component';\nimport { IgxDropDownBaseDirective } from './drop-down.base';\nimport { IgxDropDownItemBaseDirective } from './drop-down-item.base';\n\nexport * from './drop-down.component';\nexport * from './drop-down-item.component';\nexport { ISelectionEventArgs, IDropDownNavigationDirective,  } from './drop-down.common';\nexport * from './drop-down-navigation.directive';\nexport * from './drop-down.base';\nexport * from './drop-down-item.base';\nexport * from './drop-down-group.component';\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxDropDownBaseDirective,\n        IgxDropDownComponent,\n        IgxDropDownItemBaseDirective,\n        IgxDropDownItemComponent,\n        IgxDropDownGroupComponent,\n        IgxDropDownItemNavigationDirective\n    ],\n    exports: [\n        IgxDropDownComponent,\n        IgxDropDownItemComponent,\n        IgxDropDownGroupComponent,\n        IgxDropDownItemNavigationDirective\n    ],\n    imports: [\n        CommonModule,\n        IgxToggleModule\n    ]\n})\nexport class IgxDropDownModule { }\n","import {\n    AfterViewInit,\n    ChangeDetectorRef,\n    Directive,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Inject,\n    Input,\n    OnDestroy,\n    Optional,\n    Self\n} from '@angular/core';\nimport { AbstractControl, FormControlName, NgControl, NgModel } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { IgxInputGroupBase } from '../../input-group/input-group.common';\n\nconst nativeValidationAttributes = ['required', 'pattern', 'minlength', 'maxlength', 'min', 'max', 'step'];\n\nexport enum IgxInputState {\n    INITIAL,\n    VALID,\n    INVALID\n}\n\n/**\n * The `igxInput` directive creates single- or multiline text elements, covering common scenarios when dealing with form inputs.\n *\n * @igxModule IgxInputGroupModule\n *\n * @igxParent Data Entry & Display\n *\n * @igxTheme igx-input-group-theme\n *\n * @igxKeywords input, input group, form, field, validation\n *\n * @igxGroup presentation\n *\n * @example\n * ```html\n * <input-group>\n *  <label for=\"address\">Address</label>\n *  <input igxInput name=\"address\" type=\"text\" [(ngModel)]=\"customer.address\">\n * </input-group>\n * ```\n */\n@Directive({\n    selector: '[igxInput]',\n    exportAs: 'igxInput'\n})\nexport class IgxInputDirective implements AfterViewInit, OnDestroy {\n    private _valid = IgxInputState.INITIAL;\n    private _statusChanges$: Subscription;\n\n    constructor(\n        public inputGroup: IgxInputGroupBase,\n        @Optional() @Self() @Inject(NgModel) protected ngModel: NgModel,\n        @Optional() @Self() @Inject(FormControlName) protected formControl: FormControlName,\n        protected element: ElementRef,\n        protected cdr: ChangeDetectorRef) { }\n\n    private get ngControl(): NgControl {\n        return this.ngModel ? this.ngModel : this.formControl;\n    }\n    /**\n     * Sets the `value` property.\n     *\n     * @example\n     * ```html\n     * <input-group>\n     *  <input igxInput #igxInput [value]=\"'IgxInput Value'\">\n     * </input-group>\n     * ```\n     */\n    @Input('value')\n    set value(value: any) {\n        this.nativeElement.value = value;\n        this.checkValidity();\n    }\n    /**\n     * Gets the `value` propery.\n     *\n     * @example\n     * ```typescript\n     * @ViewChild('igxInput', {read: IgxInputDirective})\n     *  public igxInput: IgxInputDirective;\n     * let inputValue = this.igxInput.value;\n     * ```\n     */\n    get value() {\n        return this.nativeElement.value;\n    }\n    /**\n     * Sets the `disabled` property.\n     *\n     * @example\n     * ```html\n     * <input-group>\n     *  <input igxInput #igxInput [disabled]=\"true\">\n     * </input-group>\n     * ```\n     */\n    @Input()\n    public set disabled(value: boolean) {\n        this.nativeElement.disabled = value;\n        this.inputGroup.disabled = value;\n    }\n    /**\n     * Gets the `disabled` property\n     *\n     * @example\n     * ```typescript\n     * @ViewChild('igxInput', {read: IgxInputDirective})\n     *  public igxInput: IgxInputDirective;\n     * let isDisabled = this.igxInput.disabled;\n     * ```\n     */\n    public get disabled() {\n        return this.nativeElement.hasAttribute('disabled');\n    }\n\n    /**\n     * Sets the `required` property.\n     *\n     * @example\n     * ```html\n     * <input-group>\n     *  <input igxInput #igxInput [required]=\"true\">\n     * </input-group>\n     * ```\n     */\n    @Input()\n    public set required(value: boolean) {\n        if (typeof value === 'boolean') {\n            this.nativeElement.required = this.inputGroup.isRequired = value;\n\n            if (value && !this.nativeElement.checkValidity()) {\n                this._valid = IgxInputState.INVALID;\n            } else {\n                this._valid = IgxInputState.INITIAL;\n            }\n        }\n    }\n\n    /**\n     * Gets whether the igxInput is required.\n     *\n     * @example\n     * ```typescript\n     * let isRequired = this.igxInput.required;\n     * ```\n     */\n    public get required() {\n        return this.nativeElement.hasAttribute('required');\n    }\n\n    /**\n     * Sets/gets whether the `\"igx-input-group__input\"` class is added to the host element.\n     * Default value is `false`.\n     *\n     * @example\n     * ```typescript\n     * this.igxInput.isInput = true;\n     * ```\n     *\n     * @example\n     * ```typescript\n     * let isCLassAdded = this.igxInput.isInput;\n     * ```\n     */\n    @HostBinding('class.igx-input-group__input')\n    public isInput = false;\n    /**\n     * Sets/gets whether the `\"class.igx-input-group__textarea\"` class is added to the host element.\n     * Default value is `false`.\n     *\n     * @example\n     * ```typescript\n     * this.igxInput.isTextArea = true;\n     * ```\n     *\n     * @example\n     * ```typescript\n     * let isCLassAdded = this.igxInput.isTextArea;\n     * ```\n     */\n    @HostBinding('class.igx-input-group__textarea')\n    public isTextArea = false;\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('focus', ['$event'])\n    public onFocus(event) {\n        this.inputGroup.isFocused = true;\n    }\n    /**\n     * @param event The event to invoke the handler\n     *\n     * @hidden\n     * @internal\n     */\n    @HostListener('blur', ['$event'])\n    public onBlur(event) {\n        this.inputGroup.isFocused = false;\n        this._valid = IgxInputState.INITIAL;\n        if (this.ngControl) {\n            if (!this.ngControl.valid) {\n                this._valid = IgxInputState.INVALID;\n            }\n        } else if (this._hasValidators() && !this.nativeElement.checkValidity()) {\n            this._valid = IgxInputState.INVALID;\n        }\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('input')\n    public onInput() {\n        this.checkValidity();\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public ngAfterViewInit() {\n        this.inputGroup.hasPlaceholder = this.nativeElement.hasAttribute('placeholder');\n        this.inputGroup.disabled = this.inputGroup.disabled || this.nativeElement.hasAttribute('disabled');\n        this.inputGroup.isRequired = this.nativeElement.hasAttribute('required');\n\n        // Make sure we do not invalidate the input on init\n        if (!this.ngControl) {\n            this._valid = IgxInputState.INITIAL;\n        }\n        // Also check the control's validators for required\n        if (!this.inputGroup.isRequired && this.ngControl && this.ngControl.control.validator) {\n            const validation = this.ngControl.control.validator({} as AbstractControl);\n            this.inputGroup.isRequired = validation && validation.required;\n        }\n\n\n        const elTag = this.nativeElement.tagName.toLowerCase();\n        if (elTag === 'textarea') {\n            this.isTextArea = true;\n        } else {\n            this.isInput = true;\n        }\n\n        if (this.ngControl) {\n            this._statusChanges$ = this.ngControl.statusChanges.subscribe(this.onStatusChanged.bind(this));\n        }\n\n        this.cdr.detectChanges();\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public ngOnDestroy() {\n        if (this._statusChanges$) {\n            this._statusChanges$.unsubscribe();\n        }\n    }\n    /**\n     * Sets a focus on the igxInput.\n     *\n     * @example\n     * ```typescript\n     * this.igxInput.focus();\n     * ```\n     */\n    public focus() {\n        this.nativeElement.focus();\n    }\n    /**\n     * Gets the `nativeElement` of the igxInput.\n     *\n     * @example\n     * ```typescript\n     * let igxInputNativeElement = this.igxInput.nativeElement;\n     * ```\n     */\n    public get nativeElement() {\n        return this.element.nativeElement;\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    protected onStatusChanged() {\n        // Enable/Disable control based on ngControl #7086\n        if (this.disabled !== this.ngControl.disabled) {\n            this.disabled = this.ngControl.disabled;\n        }\n        if (this.ngControl.control.validator || this.ngControl.control.asyncValidator) {\n            if (this.ngControl.control.touched || this.ngControl.control.dirty) {\n                //  TODO: check the logic when control is touched or dirty\n                if (this.inputGroup.isFocused) {\n                    // the user is still typing in the control\n                    this._valid = this.ngControl.valid ? IgxInputState.VALID : IgxInputState.INVALID;\n                } else {\n                    // the user had touched the control previously but now the value is changing due to changes in the form\n                    this._valid = this.ngControl.valid ? IgxInputState.INITIAL : IgxInputState.INVALID;\n                }\n            } else {\n                //  if control is untouched and pristine its state is initial. This is when user did not interact\n                //  with the input or when form/control is reset\n                this._valid = IgxInputState.INITIAL;\n            }\n        }\n    }\n    /**\n     * Gets whether the igxInput has a placeholder.\n     *\n     * @example\n     * ```typescript\n     * let hasPlaceholder = this.igxInput.hasPlaceholder;\n     * ```\n     */\n    public get hasPlaceholder() {\n        return this.nativeElement.hasAttribute('placeholder');\n    }\n    /**\n     * Gets the placeholder element of the igxInput.\n     *\n     * @example\n     * ```typescript\n     * let igxInputPlaceholder = this.igxInput.placeholder;\n     * ```\n     */\n    public get placeholder() {\n        return this.nativeElement.placeholder;\n    }\n\n    /**\n     * @returns An indicator of whether the input has validator attributes or not\n     *\n     * @hidden\n     * @internal\n     */\n    private _hasValidators(): boolean {\n        for (const nativeValidationAttribute of nativeValidationAttributes) {\n            if (this.nativeElement.hasAttribute(nativeValidationAttribute)) {\n                return true;\n            }\n        }\n\n        return !!this.ngControl && (!!this.ngControl.control.validator || !!this.ngControl.control.asyncValidator);\n    }\n\n    /**\n     * Gets whether the igxInput is focused.\n     *\n     * @example\n     * ```typescript\n     * let isFocused = this.igxInput.focused;\n     * ```\n     */\n    public get focused() {\n        return this.inputGroup.isFocused;\n    }\n    /**\n     * Gets the state of the igxInput.\n     *\n     * @example\n     * ```typescript\n     * let igxInputState = this.igxInput.valid;\n     * ```\n     */\n    public get valid(): IgxInputState {\n        return this._valid;\n    }\n\n    /**\n     * Gets whether the igxInput is valid.\n     *\n     * @example\n     * ```typescript\n     * let valid = this.igxInput.isValid;\n     * ```\n     */\n    public get isValid(): boolean {\n        return this.valid !== IgxInputState.INVALID;\n    }\n\n    /**\n     * Sets the state of the igxInput.\n     *\n     * @example\n     * ```typescript\n     * this.igxInput.valid = IgxInputState.INVALID;\n     * ```\n     */\n    public set valid(value: IgxInputState) {\n        this._valid = value;\n    }\n\n    /**\n     * A function to assign a validity property of an input.\n     *\n     * @hidden\n     * @internal\n     */\n    private checkValidity() {\n        if (!this.ngControl && this._hasValidators()) {\n            this._valid = this.nativeElement.checkValidity() ? IgxInputState.VALID : IgxInputState.INVALID;\n        }\n    }\n}\n","/** @hidden */\nexport abstract class IgxInputGroupBase {\n    disabled: boolean;\n    isFocused: boolean;\n    isRequired: boolean;\n    hasPlaceholder: boolean;\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    Component,\n    ContentChild,\n    ContentChildren,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Input,\n    NgModule,\n    QueryList,\n    Inject,\n    Optional\n} from '@angular/core';\nimport { IgxHintDirective } from '../directives/hint/hint.directive';\nimport { IgxInputDirective, IgxInputState } from '../directives/input/input.directive';\nimport { IgxLabelDirective } from '../directives/label/label.directive';\nimport { IgxPrefixDirective, IgxPrefixModule} from '../directives/prefix/prefix.directive';\nimport { IgxSuffixDirective, IgxSuffixModule } from '../directives/suffix/suffix.directive';\nimport { DisplayDensity, IDisplayDensityOptions, DisplayDensityToken, DisplayDensityBase } from '../core/displayDensity';\nimport { IgxInputGroupBase } from './input-group.common';\n\nlet NEXT_ID = 0;\n\nenum IgxInputGroupType {\n    LINE,\n    BOX,\n    BORDER,\n    FLUENT,\n    BOOTSTRAP,\n    SEARCH,\n    FLUENT_SEARCH,\n}\n\n@Component({\n    selector: 'igx-input-group',\n    templateUrl: 'input-group.component.html',\n    providers: [{ provide: IgxInputGroupBase, useExisting: IgxInputGroupComponent }]\n})\nexport class IgxInputGroupComponent extends DisplayDensityBase implements IgxInputGroupBase {\n    private _type = IgxInputGroupType.LINE;\n    private _filled = false;\n    private _supressInputAutofocus = false;\n\n    /**\n     * An ElementRef property of the `IgxInputGroupComponent`.\n     */\n    public element: ElementRef;\n\n    /**\n     * An @Input property that sets the value of `id` attribute. If not provided it will be automatically generated.\n     * ```html\n     * <igx-input-group [id]=\"'igx-input-group-55'\"></igx-input-group>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-input-group-${NEXT_ID++}`;\n\n    /**\n     * Property that enables/disables the autogenerated class of the `IgxInputGroupComponent`.\n     * By default applied the class is applied.\n     *```typescript\n     *@ViewChild(\"MyInputGroup\")\n     *public inputGroup: IgxInputGroupComponent;\n     *ngAfterViewInit(){\n     *this.inputGroup.defaultClass = false;\n     *```\n     *}\n     */\n    @HostBinding('class.igx-input-group')\n    public defaultClass = true;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-input-group--placeholder')\n    public hasPlaceholder = false;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-input-group--required')\n    public isRequired = false;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-input-group--focused')\n    public isFocused = false;\n\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-input-group--box')\n    public isBox = false;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-input-group--border')\n    public isBorder = false;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-input-group--search')\n    public isSearch = false;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-input-group--fluent-search')\n    public isFluentSearch = false;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-input-group--fluent')\n    public isFluent = false;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-input-group--bootstrap')\n    public isBootstrap = false;\n\n    /**\n     * An @Input property that disables the `IgxInputGroupComponent`.\n     * ```html\n     * <igx-input-group [disabled]=\"'true'\"></igx-input-group>\n     * ```\n     */\n    @HostBinding('class.igx-input-group--disabled')\n    @Input()\n    public disabled = false;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-input-group--valid')\n    public get validClass(): boolean {\n        return this.input.valid === IgxInputState.VALID;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-input-group--invalid')\n    public get invalidClass(): boolean {\n        return this.input.valid === IgxInputState.INVALID;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-input-group--warning')\n    public hasWarning = false;\n\n    /**\n     * @hidden\n     */\n    @ContentChildren(IgxHintDirective, { read: IgxHintDirective })\n    protected hints: QueryList<IgxHintDirective>;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxInputDirective, { read: IgxInputDirective, static: true })\n    protected input: IgxInputDirective;\n\n    /**\n     *@hidden\n     */\n    @HostListener('click', ['$event'])\n    public onClick(event) {\n        if (!this._supressInputAutofocus) {\n            this.input.focus();\n        }\n    }\n\n    /**\n     * An @Input property that sets how the input will be styled.\n     * The allowed values are `line`, `box`, `border`, `fluent`, `search` and `fluentSearch`. The default is `line`.\n     * ```html\n     *<igx-input-group [type]=\"'search'\">\n     * ```\n     */\n    @Input('type')\n    set type(value: string) {\n        const type: IgxInputGroupType = (IgxInputGroupType as any)[value.toUpperCase()];\n        if (type !== undefined) {\n            this.isBox = this.isBootstrap = this.isFluent = this.isFluentSearch = this.isBorder = this.isSearch = false;\n            switch (type) {\n                case IgxInputGroupType.BOX:\n                    this.isBox = true;\n                    break;\n                case IgxInputGroupType.BORDER:\n                    this.isBorder = true;\n                    break;\n                case IgxInputGroupType.FLUENT:\n                    this.isFluent = true;\n                    break;\n                case IgxInputGroupType.FLUENT_SEARCH:\n                    this.isFluentSearch = true;\n                    break;\n                case IgxInputGroupType.SEARCH:\n                    this.isSearch = true;\n                    break;\n                case IgxInputGroupType.BOOTSTRAP:\n                    this.isBootstrap = true;\n                    break;\n                default: break;\n            }\n\n            this._type = type;\n        }\n    }\n\n    /**\n     * Returns whether the input element of the input group will be automatically focused on click.\n     * ```typescript\n     * let supressInputAutofocus = this.inputGroup.supressInputAutofocus;\n     * ```\n     */\n    @Input()\n    public get supressInputAutofocus(): boolean {\n        return this._supressInputAutofocus;\n    }\n\n    /**\n     * Sets whether the input element of the input group will be automatically focused on click.\n     * ```html\n     * <igx-input-group [supressInputAutofocus]=\"true\"></igx-input-group>\n     * ```\n     */\n    public set supressInputAutofocus(value: boolean) {\n        this._supressInputAutofocus = value;\n    }\n\n    /**\n     *@hidden\n     */\n    @HostBinding('class.igx-input-group--filled')\n    get isFilled() {\n        return this._filled || (this.input && this.input.value);\n    }\n\n    /**\n     *@hidden\n     */\n    @HostBinding('class.igx-input-group--cosy')\n    get isDisplayDensityCosy() {\n        return this.displayDensity === DisplayDensity.cosy;\n    }\n\n    /**\n     *@hidden\n     */\n    @HostBinding('class.igx-input-group--comfortable')\n    get isDisplayDensityComfortable() {\n        return this.displayDensity === DisplayDensity.comfortable;\n    }\n\n    /**\n     *@hidden\n     */\n    @HostBinding('class.igx-input-group--compact')\n    get isDisplayDensityCompact() {\n        return this.displayDensity === DisplayDensity.compact;\n    }\n\n    /**\n     * Returns the type of the `IgxInputGroupComponent`. How the input is styled.\n     * Values are `line` - 0, `box` - 1, `border` - 2,  `fluent` - 3 `fluentSearch` - 4 and `search` - 5. The default is `line`.\n     * ```typescript\n     *@ViewChild(\"MyInputGroup\")\n     *public inputGroup: IgxInputGroupComponent;\n     *ngAfterViewInit(){\n     *    let inputType = this.inputGroup.type;\n     *}\n     * ```\n     */\n    get type() {\n        return this._type.toString();\n    }\n\n    constructor(private _element: ElementRef,\n        @Optional() @Inject(DisplayDensityToken) private _displayDensityOptions: IDisplayDensityOptions) {\n        super(_displayDensityOptions);\n        this.element = _element;\n    }\n\n    /**\n     * Returns whether the `IgxInputGroupComponent` has hints.\n     * ```typescript\n     *@ViewChild(\"MyInputGroup\")\n     *public inputGroup: IgxInputGroupComponent;\n     *ngAfterViewInit(){\n     *    let inputHints = this.inputGroup.hasHints;\n     *}\n     * ```\n     */\n    get hasHints() {\n        return this.hints.length > 0;\n    }\n\n    /**\n     * Returns whether the `IgxInputGroupComponent` has border.\n     * ```typescript\n     *@ViewChild(\"MyInputGroup\")\n     *public inputGroup: IgxInputGroupComponent;\n     *ngAfterViewInit(){\n     *    let inputBroder = this.inputGroup.hasBorder;\n     *}\n     * ```\n     */\n    get hasBorder() {\n        return this._type === IgxInputGroupType.LINE ||\n            this._type === IgxInputGroupType.BOX;\n    }\n\n    /**\n     * Returns whether the `IgxInputGroupComponent` type is line.\n     * ```typescript\n     *@ViewChild(\"MyInputGroup1\")\n     *public inputGroup: IgxInputGroupComponent;\n     *ngAfterViewInit(){\n     *    let isTypeLine = this.inputGroup.isTypeLine;\n     *}\n     * ```\n     */\n    public get isTypeLine(): boolean {\n        return  this._type === IgxInputGroupType.LINE;\n    }\n\n    /**\n     * Returns whether the `IgxInputGroupComponent` type is box.\n     * ```typescript\n     *@ViewChild(\"MyInputGroup1\")\n     *public inputGroup: IgxInputGroupComponent;\n     *ngAfterViewInit(){\n     *    let isTypeBox = this.inputGroup.isTypeBox;\n     *}\n     *```\n     */\n    get isTypeBox() {\n        return this._type === IgxInputGroupType.BOX;\n    }\n\n    /**\n     * Returns whether the `IgxInputGroupComponent` type is border.\n     * ```typescript\n     *@ViewChild(\"MyInputGroup1\")\n     *public inputGroup: IgxInputGroupComponent;\n     *ngAfterViewInit(){\n     *    let isTypeBorder = this.inputGroup.isTypeBorder;\n     *}\n     * ```\n     */\n    get isTypeBorder() {\n        return this._type === IgxInputGroupType.BORDER;\n    }\n\n    /**\n     * Returns whether the `IgxInputGroupComponent` type is Fluent.\n     * ```typescript\n     *@ViewChild(\"MyInputGroup1\")\n     *public inputGroup: IgxInputGroupComponent;\n     *ngAfterViewInit(){\n     *    let isTypeFluent = this.inputGroup.isTypeFluent;\n     *}\n     * ```\n     */\n    get isTypeFluent() {\n        return this._type === IgxInputGroupType.FLUENT;\n    }\n\n    /**\n     * Returns whether the `IgxInputGroupComponent` type is Bootstrap.\n     * ```typescript\n     *@ViewChild(\"MyInputGroup1\")\n     *public inputGroup: IgxInputGroupComponent;\n     *ngAfterViewInit(){\n     *    let isTypeBootstrap = this.inputGroup.isTypeBootstrap;\n     *}\n     * ```\n     */\n    get isTypeBootstrap() {\n        return this._type === IgxInputGroupType.BOOTSTRAP;\n    }\n\n    get isNotMaterial() {\n        return this._type === IgxInputGroupType.FLUENT || this._type === IgxInputGroupType.BOOTSTRAP;\n    }\n\n    /**\n     * Returns whether the `IgxInputGroupComponent` type is search.\n     * ```typescript\n     *@ViewChild(\"MyInputGroup1\")\n     *public inputGroup: IgxInputGroupComponent;\n     *ngAfterViewInit(){\n     *    let isTypeSearch = this.inputGroup.isTypeSearch;\n     *}\n     * ```\n     */\n    get isTypeSearch() {\n        return  this._type === IgxInputGroupType.SEARCH;\n    }\n\n    /**\n     * Returns whether the `IgxInputGroupComponent` type is fluentSearch.\n     * ```typescript\n     *@ViewChild(\"MyInputGroup1\")\n     *public inputGroup: IgxInputGroupComponent;\n     *ngAfterViewInit(){\n     *    let isTypeFluentSearch = this.inputGroup.isTypeFluentSearch;\n     *}\n     * ```\n     */\n    get isTypeFluentSearch() {\n        return  this._type === IgxInputGroupType.FLUENT_SEARCH;\n    }\n\n    get filled() {\n        return this._filled;\n    }\n\n    set filled(val) {\n        this._filled = val;\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxInputGroupComponent,\n        IgxHintDirective,\n        IgxInputDirective,\n        IgxLabelDirective\n    ],\n    exports: [\n        IgxInputGroupComponent,\n        IgxHintDirective,\n        IgxInputDirective,\n        IgxLabelDirective,\n        IgxPrefixModule,\n        IgxSuffixModule\n    ],\n    imports: [\n        CommonModule,\n        IgxPrefixModule,\n        IgxSuffixModule\n    ]\n})\nexport class IgxInputGroupModule { }\n","import { Directive, HostBinding, Input } from '@angular/core';\n\nlet NEXT_ID = 0;\n\n@Directive({\n    selector: '[igxLabel]'\n})\nexport class IgxLabelDirective {\n    @HostBinding('class.igx-input-group__label')\n    public defaultClass = true;\n\n/**\n * @hidden\n */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-label-${NEXT_ID++}`;\n}\n","import { NgModule, Directive } from '@angular/core';\n\n/**\n * @hidden\n */\n@Directive({\n    selector: 'igx-prefix,[igxPrefix]'\n})\nexport class IgxPrefixDirective { }\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxPrefixDirective],\n    exports: [IgxPrefixDirective]\n})\nexport class IgxPrefixModule { }\n","import { NgModule, Directive } from '@angular/core';\n\n/**\n * @hidden\n */\n@Directive({\n    selector: 'igx-suffix,[igxSuffix]'\n})\nexport class IgxSuffixDirective { }\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxSuffixDirective],\n    exports: [IgxSuffixDirective]\n})\nexport class IgxSuffixModule { }\n","import { Directive, HostBinding, NgModule, Input } from '@angular/core';\n\nexport enum IgxDividerType {\n    SOLID = 'solid',\n    DASHED = 'dashed'\n}\n\nlet NEXT_ID = 0;\n\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-divider'\n})\nexport class IgxDividerDirective {\n    /**\n     * Sets/gets the `id` of the divider.\n     * If not set, `id` will have value `\"igx-divider-0\"`;\n     * ```html\n     * <igx-divider id=\"my-divider\"></igx-divider>\n     * ```\n     * ```typescript\n     * let dividerId =  this.divider.id;\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-divider-${NEXT_ID++}`;\n\n\n    /**\n     * An @Input property that sets the value of the `inset` attribute.\n     * If not provided it will be set to `'0'`.\n     * ```html\n     * <igx-divider inset=\"16px\"></igx-divider>\n     * ```\n     */\n    @Input('inset')\n    private _inset = '0';\n\n    /**\n     * An @Input property that sets the value of `role` attribute.\n     * If not the default value of `separator` will be used.\n     */\n    @HostBinding('attr.role')\n    @Input()\n    public role = 'separator';\n\n    /**\n     * Sets the type of the divider. The default value\n     * is `default`. The divider can also be `dashed`;\n     * ```html\n     * <igx-divider type=\"dashed\"></igx-divider>\n     * ```\n     */\n    @HostBinding('class.igx-divider')\n    @Input()\n    public type: IgxDividerType | string = IgxDividerType.SOLID;\n\n    @HostBinding('class.igx-divider--dashed')\n    get isDashed() {\n        return this.type === IgxDividerType.DASHED;\n    }\n\n    /**\n     * An @Input that sets the `middle` attribute of the divider.\n     * If set to `true` and an `inset` value has been provided,\n     * the divider will start shrinking from both ends.\n     * ```html\n     * <igx-divider [middle]=\"true\"></igx-divider>\n     * ```\n     */\n    @HostBinding('class.igx-divider--inset')\n    @Input()\n    public middle = false;\n\n    /**\n     * A getter that returns `true` if the type of the divider is `default`;\n     * ```typescript\n     * const isDefault = this.divider.isDefault;\n     * ```\n     */\n    get isSolid() {\n        return this.type === IgxDividerType.SOLID;\n    }\n\n    /**\n     * An @Input that sets the vertical attribute of the divider.\n     * ```html\n     * <igx-divider [vertical]=\"true\"></igx-divider>\n     * ```\n     */\n    @HostBinding('class.igx-divider--vertical')\n    @Input()\n    public vertical = false;\n\n    /**\n     * Sets the inset of the divider from the side(s).\n     * If the divider attribute `middle` is set to `true`,\n     * it will inset the divider on both sides.\n     * ```typescript\n     * this.divider.inset = '32px';\n     * ```\n     */\n    @HostBinding('style.margin')\n    set inset(value: string) {\n        this._inset = value;\n    }\n\n    /**\n     * Gets the current divider inset in terms of\n     * margin representation as applied to the divider.\n     * ```typescript\n     * const inset = this.divider.inset;\n     * ```\n     */\n    get inset() {\n        const baseMargin = '0';\n\n        if (this.middle) {\n            if (this.vertical) {\n                return `${this._inset} ${baseMargin}`;\n            }\n            return `${baseMargin} ${this._inset}`;\n        } else {\n            if (this.vertical) {\n                return `${this._inset} ${baseMargin} 0 ${baseMargin}`;\n            }\n            return `${baseMargin} 0 ${baseMargin} ${this._inset}`;\n        }\n    }\n}\n\n@NgModule({\n    declarations: [IgxDividerDirective],\n    exports: [IgxDividerDirective]\n})\nexport class IgxDividerModule { }\n","import {\n    Directive, Input, Self, Optional, Inject, HostBinding, Output, EventEmitter,\n    NgModule, ElementRef, HostListener, ChangeDetectorRef, OnDestroy } from '@angular/core';\nimport { NgModel, FormControlName } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { Subject } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { CancelableEventArgs, IBaseEventArgs } from '../../core/utils';\nimport { OverlaySettings, AbsoluteScrollStrategy, IScrollStrategy, IPositionStrategy, AutoPositionStrategy } from '../../services/index';\nimport { IgxDropDownModule, IgxDropDownComponent, ISelectionEventArgs, IgxDropDownItemNavigationDirective } from '../../drop-down/index';\nimport { IgxInputGroupComponent } from '../../input-group/index';\nimport { IgxOverlayOutletDirective } from '../toggle/toggle.directive';\n\n/**\n * Interface that encapsulates onItemSelection event arguments - new value and cancel selection.\n * @export\n */\nexport interface AutocompleteItemSelectionEventArgs extends CancelableEventArgs, IBaseEventArgs {\n    /**\n     * New value selected from the drop down\n     */\n    value: string;\n}\n\nexport interface AutocompleteOverlaySettings {\n    /** Position strategy to use with this settings */\n    positionStrategy?: IPositionStrategy;\n    /** Scroll strategy to use with this settings */\n    scrollStrategy?: IScrollStrategy;\n    /** Set the outlet container to attach the overlay to */\n    outlet?: IgxOverlayOutletDirective | ElementRef;\n}\n\n/**\n * **Ignite UI for Angular Autocomplete** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/autocomplete.html)\n *\n * The igxAutocomplete directive provides a way to enhance a text input\n * by showing a drop down of suggested options, provided by the developer.\n *\n * Example:\n * ```html\n * <input type=\"text\" [igxAutocomplete]=\"townsPanel\" />\n * <igx-drop-down #townsPanel>\n *     <igx-drop-down-item *ngFor=\"let town of towns | startsWith:townSelected\" [value]=\"town\">\n *         {{town}}\n *     </igx-drop-down-item>\n * </igx-drop-down>\n * ```\n */\n@Directive({\n    selector: '[igxAutocomplete]'\n})\nexport class IgxAutocompleteDirective extends IgxDropDownItemNavigationDirective implements OnDestroy {\n\n    constructor(@Self() @Optional() @Inject(NgModel) protected ngModel: NgModel,\n                @Self() @Optional() @Inject(FormControlName) protected formControl: FormControlName,\n                @Optional() protected group: IgxInputGroupComponent,\n                protected elementRef: ElementRef,\n                protected cdr: ChangeDetectorRef) {\n        super(null);\n    }\n\n    private defaultSettings: OverlaySettings = {\n        modal: false,\n        scrollStrategy: new AbsoluteScrollStrategy(),\n        positionStrategy: new AutoPositionStrategy({ target: this.parentElement }),\n        excludePositionTarget: true\n    };\n\n    protected id: string;\n    protected dropDownOpened$ = new Subject<boolean>();\n    protected get model() {\n        return this.ngModel || this.formControl;\n    }\n\n    /** @hidden @internal */\n    get nativeElement(): HTMLInputElement {\n        return this.elementRef.nativeElement;\n    }\n\n    /** @hidden @internal */\n    get parentElement(): HTMLElement {\n        return this.group ? this.group.element.nativeElement : this.nativeElement;\n    }\n\n    private get settings(): OverlaySettings {\n        const settings = Object.assign({}, this.defaultSettings, this.autocompleteSettings);\n        if (!settings.positionStrategy.settings.target) {\n            const positionStrategyClone: IPositionStrategy = settings.positionStrategy.clone();\n            positionStrategyClone.settings.target = this.parentElement;\n            settings.positionStrategy = positionStrategyClone;\n        }\n        return settings;\n    }\n\n    /**\n     * Sets the target of the autocomplete directive\n     *\n     * ```html\n     * <!-- Set -->\n     * <input [igxAutocomplete]=\"dropdown\" />\n     * ...\n     * <igx-drop-down #dropdown>\n     * ...\n     * </igx-drop-down>\n     * ```\n     */\n    @Input('igxAutocomplete')\n    public target: IgxDropDownComponent;\n\n    /**\n     * Enables/disables autocomplete component\n     *\n     * ```typescript\n     * // get\n     * let disabled = this.autocomplete.disabled;\n     * ```\n     * ```html\n     * <!--set-->\n     * <input type=\"text\" [igxAutocomplete]=\"townsPanel\" [igxAutocompleteDisabled]=\"disabled\"/>\n     * ```\n     * ```typescript\n     * // set\n     * public disabled = true;\n     * ```\n     */\n    @Input('igxAutocompleteDisabled')\n    public disabled = false;\n\n    /**\n     * Provide overlay settings for the autocomplete drop down\n     *\n     * ```typescript\n     * // get\n     * let settings = this.autocomplete.autocompleteSettings;\n     * ```\n     * ```html\n     * <!--set-->\n     * <input type=\"text\" [igxAutocomplete]=\"townsPanel\" [igxAutocompleteSettings]=\"settings\"/>\n     * ```\n     * ```typescript\n     * // set\n     * this.settings = {\n     *  positionStrategy: new ConnectedPositioningStrategy({\n     *      closeAnimation: null,\n     *      openAnimation: null\n     *  })\n     * };\n     * ```\n     */\n    @Input('igxAutocompleteSettings')\n    autocompleteSettings: AutocompleteOverlaySettings;\n\n    /**\n     * Emitted after item from the drop down is selected\n     *\n     * ```html\n     * <input igxInput [igxAutocomplete]=\"townsPanel\" (onItemSelected)='itemSelected($event)' />\n     * ```\n     */\n    @Output()\n    onItemSelected = new EventEmitter<AutocompleteItemSelectionEventArgs>();\n\n    /** @hidden @internal */\n    @HostBinding('attr.autocomplete')\n    public autofill = 'off';\n\n    /** @hidden  @internal */\n    @HostBinding('attr.role')\n    public role = 'combobox';\n\n    /** @hidden  @internal */\n    @HostBinding('attr.aria-expanded')\n    public get ariaExpanded() {\n        return !this.collapsed;\n    }\n\n    /** @hidden  @internal */\n    @HostBinding('attr.aria-haspopup')\n    public get hasPopUp() {\n        return 'listbox';\n    }\n\n    /** @hidden  @internal */\n    @HostBinding('attr.aria-owns')\n    public get ariaOwns() {\n        return this.target.listId;\n    }\n\n    /** @hidden  @internal */\n    @HostBinding('attr.aria-activedescendant')\n    public get ariaActiveDescendant() {\n        return !this.target.collapsed && this.target.focusedItem ? this.target.focusedItem.id : null;\n    }\n\n    /** @hidden  @internal */\n    @HostBinding('attr.aria-autocomplete')\n    public get ariaAutocomplete() {\n        return 'list';\n    }\n\n    /** @hidden  @internal */\n    @HostListener('input')\n    onInput() {\n        this.open();\n    }\n\n    /** @hidden  @internal */\n    @HostListener('keydown.ArrowDown', ['$event'])\n    @HostListener('keydown.Alt.ArrowDown', ['$event'])\n    @HostListener('keydown.ArrowUp', ['$event'])\n    @HostListener('keydown.Alt.ArrowUp', ['$event'])\n    onArrowDown(event: Event) {\n        event.preventDefault();\n        this.open();\n    }\n\n    /** @hidden  @internal */\n    @HostListener('keydown.Tab')\n    @HostListener('keydown.Shift.Tab')\n    onTab() {\n        this.close();\n    }\n\n    /** @hidden  @internal */\n    handleKeyDown(event) {\n        if (!this.collapsed) {\n            switch (event.key.toLowerCase()) {\n                case 'space':\n                case 'spacebar':\n                case ' ':\n                case 'home':\n                case 'end':\n                    return;\n                default:\n                    super.handleKeyDown(event);\n            }\n        }\n    }\n\n    /** @hidden  @internal */\n    onArrowDownKeyDown() {\n        super.onArrowDownKeyDown();\n    }\n\n    /** @hidden  @internal */\n    onArrowUpKeyDown() {\n        super.onArrowUpKeyDown();\n    }\n\n    /** @hidden  @internal */\n    onEndKeyDown() {\n        super.onEndKeyDown();\n    }\n\n    /** @hidden  @internal */\n    onHomeKeyDown() {\n        super.onHomeKeyDown();\n    }\n\n    /**\n     * Closes autocomplete drop down\n     */\n    public close() {\n        if (this.collapsed) {\n            return;\n        }\n        this.target.close();\n        this.dropDownOpened$.next();\n    }\n\n    /**\n     * Opens autocomplete drop down\n     */\n    public open() {\n        if (this.disabled || !this.collapsed) {\n            return;\n        }\n        // If no drop-down width is set, the drop-down will be as wide as the autocomplete input;\n        this.target.width = this.target.width || (this.parentElement.clientWidth + 'px');\n        this.target.open(this.settings);\n        this.target.onSelection.pipe(takeUntil(this.dropDownOpened$)).subscribe(this.select);\n        this.target.onOpened.pipe(first()).subscribe(this.highlightFirstItem);\n        this.target.children.changes.pipe(takeUntil(this.dropDownOpened$)).subscribe(this.highlightFirstItem);\n    }\n\n    private get collapsed(): boolean {\n        return this.target ? this.target.collapsed : true;\n    }\n\n    private select = (value: ISelectionEventArgs) => {\n        if (!value.newSelection) {\n            return;\n        }\n        value.cancel = true; // Disable selection in the drop down, because in autocomplete we do not save selection.\n        const newValue = value.newSelection.value;\n        const args: AutocompleteItemSelectionEventArgs = { value: newValue, cancel: false };\n        this.onItemSelected.emit(args);\n        if (args.cancel) {\n            return;\n        }\n        this.close();\n        this.nativeElement.focus();\n\n        // Update model after the input is re-focused, in order to have proper valid styling.\n        // Otherwise when item is selected using mouse (and input is blurred), then valid style will be removed.\n        this.model ? this.model.control.setValue(newValue) : this.nativeElement.value = newValue;\n    }\n\n    private highlightFirstItem = () => {\n        if (this.target.focusedItem) {\n            this.target.focusedItem.focused = false;\n            this.target.focusedItem = null;\n        }\n        this.target.navigateFirst();\n        this.cdr.detectChanges();\n    }\n\n    /** @hidden */\n    public ngOnDestroy() {\n        this.dropDownOpened$.complete();\n    }\n}\n\n/** @hidden */\n@NgModule({\n    imports: [IgxDropDownModule, CommonModule],\n    declarations: [IgxAutocompleteDirective],\n    exports: [IgxAutocompleteDirective]\n})\nexport class IgxAutocompleteModule { }\n","import {\n    Directive,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    Input,\n    Output,\n    NgModule,\n    Renderer2,\n    HostListener,\n    Optional,\n    Inject\n} from '@angular/core';\nimport { DisplayDensityBase, DisplayDensityToken, IDisplayDensityOptions, DisplayDensity } from '../../core/density';\n\n/**\n * The Button directive provides the Ignite UI Button functionality to every component that's intended to be used as a button.\n *\n * @igxModule IgxButtonModule\n *\n * @igxParent Data Entry & Display\n *\n * @igxTheme igx-button-theme\n *\n * @igxKeywords button, span, div, click\n *\n * @remarks\n * The Ignite UI Button directive is intended to be used by any button, span or div and turn it into a fully functional button.\n *\n * @example\n * ```html\n * <button igxButton=\"outlined\">A Button</button>\n * ```\n */\n@Directive({\n    selector: '[igxButton]'\n})\nexport class IgxButtonDirective extends DisplayDensityBase {\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _type: string;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _defaultType = 'flat';\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _cssClassPrefix = 'igx-button';\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _color: string;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _label: string;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _backgroundColor: string;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _disabled: boolean;\n\n    constructor(public element: ElementRef, private _renderer: Renderer2,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n        super(_displayDensityOptions);\n    }\n\n    /**\n     * Returns the underlying DOM element.\n     */\n    public get nativeElement() {\n        return this.element.nativeElement;\n    }\n\n    /**\n     * Called when the button is clicked.\n     */\n    @Output()\n    public buttonClick = new EventEmitter<any>();\n\n    /**\n     * Sets/gets the `role` attribute.\n     *\n     * @example\n     * ```typescript\n     * this.button.role = 'navbutton';\n     * let buttonRole = this.button.role;\n     * ```\n     */\n    @HostBinding('attr.role')\n    public role = 'button';\n\n    /**\n     * Sets the type of the button.\n     *\n     * @example\n     * ```html\n     * <button igxButton=\"icon\"></button>\n     * ```\n     */\n    @Input('igxButton')\n    set type(value: string) {\n        const newValue = value ? value : this._defaultType;\n        if (this._type !== newValue) {\n            this._renderer.removeClass(this.nativeElement, `${this._cssClassPrefix}--${this._type}`);\n            this._type = newValue;\n            this._renderer.addClass(this.nativeElement, `${this._cssClassPrefix}--${this._type}`);\n        }\n    }\n\n    /**\n     * Sets the button text color.\n     *\n     * @example\n     * ```html\n     * <button igxButton=\"gradient\" igxButtonColor=\"blue\"></button>\n     * ```\n     */\n    @Input('igxButtonColor') set color(value: string) {\n        this._color = value || this.nativeElement.style.color;\n        this._renderer.setStyle(this.nativeElement, 'color', this._color);\n    }\n\n    /**\n     * Sets the background color of the button.\n     *\n     * @example\n     *  ```html\n     * <button igxButton=\"raised\" igxButtonBackground=\"red\"></button>\n     * ```\n     */\n    @Input('igxButtonBackground') set background(value: string) {\n        this._backgroundColor = value || this._backgroundColor;\n        this._renderer.setStyle(this.nativeElement, 'background', this._backgroundColor);\n    }\n\n    /**\n     * Sets the `aria-label` attribute.\n     *\n     * @example\n     *  ```html\n     * <button igxButton= \"flat\" igxLabel=\"Label\"></button>\n     * ```\n     */\n    @Input('igxLabel') set label(value: string) {\n        this._label = value || this._label;\n        this._renderer.setAttribute(this.nativeElement, `aria-label`, this._label);\n    }\n\n    /**\n     * Enables/disables the button.\n     *\n     * @example\n     * ```html\n     * <button igxButton= \"fab\" [disabled]=\"true\"></button>\n     * ```\n     */\n    @Input() set disabled(val) {\n        val = !!val;\n        this._disabled = val;\n        if (val) {\n            this._renderer.addClass(this.nativeElement, `${this._cssClassPrefix}--disabled`);\n        } else {\n            this._renderer.removeClass(this.nativeElement, `${this._cssClassPrefix}--disabled`);\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-button--cosy')\n    public get cssClassCosy(): boolean {\n        return (this._type === 'flat' || this._type === 'raised' || this._type === 'outlined') &&\n            this.displayDensity === DisplayDensity.cosy;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-button--compact')\n    public get cssClassCompact(): boolean {\n        return (this._type === 'flat' || this._type === 'raised' || this._type === 'outlined') &&\n            this.displayDensity === DisplayDensity.compact;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-button--fab-cosy')\n    public get cssClassCosyFab(): boolean {\n        return this._type === 'fab' && this.displayDensity === DisplayDensity.cosy;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-button--fab-compact')\n    public get cssClassCompactFab(): boolean {\n        return this._type === 'fab' && this.displayDensity === DisplayDensity.compact;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('attr.disabled')\n    public get disabledAttribute() {\n        return this._disabled ? this._disabled : null;\n    }\n\n    /**\n     * Gets or sets whether the button is selected.\n     * Mainly used in the IgxButtonGroup component and it will have no effect if set separately.\n     *\n     * @example\n     * ```html\n     * <button igxButton=\"flat\" [selected]=\"button.selected\"></button>\n     * ```\n     */\n    @Input() public selected = false;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('click', ['$event'])\n    public onClick(ev) {\n        this.buttonClick.emit(ev);\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxButtonDirective],\n    exports: [IgxButtonDirective]\n})\nexport class IgxButtonModule { }\n","import {\n    Directive,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    HostListener,\n    Input,\n    NgModule,\n    NgZone,\n    OnDestroy,\n    OnInit,\n    Output,\n    Renderer2,\n    ChangeDetectorRef,\n    ViewContainerRef,\n    AfterContentInit,\n    TemplateRef,\n    ContentChildren,\n    QueryList\n} from '@angular/core';\nimport { animationFrameScheduler, fromEvent, interval, Subject } from 'rxjs';\nimport { takeUntil, throttle } from 'rxjs/operators';\nimport { IgxDragHandleDirective } from './drag-handle.directive';\nimport { DeprecateProperty } from '../../core/deprecateDecorators';\nimport { IBaseEventArgs } from '../../core/utils';\nimport { IDropStrategy, IgxDefaultDropStrategy } from './drag-drop.strategy';\n\nexport enum RestrictDrag {\n    VERTICALLY,\n    HORIZONTALLY,\n    NONE\n}\n\nexport interface IgxDragCustomEventDetails {\n    startX: number;\n    startY: number;\n    pageX: number;\n    pageY: number;\n    owner: IgxDragDirective;\n    originalEvent: any;\n}\n\nexport interface IDropBaseEventArgs extends IBaseEventArgs {\n        /**\n     * Reference to the original event that caused the draggable element to enter the igxDrop element.\n     * Can be PointerEvent, TouchEvent or MouseEvent.\n     */\n    originalEvent: any;\n    /** The owner igxDrop directive that triggered this event. */\n    owner: IgxDropDirective;\n    /** The igxDrag directive instanced on an element that entered the area of the igxDrop element */\n    drag: IgxDragDirective;\n    /** The data contained for the draggable element in igxDrag directive. */\n    dragData: any;\n    /** The initial position of the pointer on X axis when the dragged element began moving */\n    startX: number;\n    /** The initial position of the pointer on Y axis when the dragged element began moving */\n    startY: number;\n    /**\n     * The current position of the pointer on X axis when the event was triggered.\n     * Note: The browser might trigger the event with some delay and pointer would be already inside the igxDrop.\n     */\n    pageX: number;\n    /**\n     * The current position of the pointer on Y axis when the event was triggered.\n     * Note: The browser might trigger the event with some delay and pointer would be already inside the igxDrop.\n     */\n    pageY: number;\n    /**\n     * The current position of the pointer on X axis relative to the container that initializes the igxDrop.\n     * Note: The browser might trigger the event with some delay and pointer would be already inside the igxDrop.\n     */\n    offsetX: number;\n    /**\n     * The current position of the pointer on Y axis relative to the container that initializes the igxDrop.\n     * Note: The browser might trigger the event with some delay and pointer would be already inside the igxDrop.\n     */\n    offsetY: number;\n}\n\nexport interface IDropDroppedEventArgs extends IDropBaseEventArgs {\n    /** Specifies if the default drop logic related to the event should be canceled. */\n    cancel: boolean;\n}\n\nexport interface IDragBaseEventArgs extends IBaseEventArgs {\n    /**\n     * Reference to the original event that caused the interaction with the element.\n     * Can be PointerEvent, TouchEvent or MouseEvent.\n     */\n    originalEvent: PointerEvent | MouseEvent | TouchEvent;\n    /** The owner igxDrag directive that triggered this event. */\n    owner: IgxDragDirective;\n    /** The initial position of the pointer on X axis when the dragged element began moving */\n    startX: number;\n    /** The initial position of the pointer on Y axis when the dragged element began moving */\n    startY: number;\n    /**\n     * The current position of the pointer on X axis when the event was triggered.\n     * Note: The browser might trigger the event with some delay and pointer would be already inside the igxDrop.\n     */\n    pageX: number;\n        /**\n     * The current position of the pointer on Y axis when the event was triggered.\n     * Note: The browser might trigger the event with some delay and pointer would be already inside the igxDrop.\n     */\n    pageY: number;\n}\n\nexport interface IDragStartEventArgs extends IDragBaseEventArgs {\n    /** Set if the the dragging should be canceled. */\n    cancel: boolean;\n}\n\nexport interface IDragMoveEventArgs extends IDragStartEventArgs {\n    /** The new pageX position of the pointer that the igxDrag will use. It can be overridden to limit dragged element X movement. */\n    nextPageX: number;\n    /** The new pageX position of the pointer that the igxDrag will use. It can be overridden to limit dragged element Y movement. */\n    nextPageY: number;\n}\n\n\nexport interface IDragGhostBaseEventArgs extends IBaseEventArgs {\n    /** The owner igxDrag directive that triggered this event. */\n    owner: IgxDragDirective;\n    /** Instance to the ghost element that is created when dragging starts. */\n    ghostElement: any;\n    /** Set if the ghost creation/destruction should be canceled. */\n    cancel: boolean;\n}\n\nexport interface IDragCustomTransitionArgs {\n    duration?: number;\n    timingFunction?: string;\n    delay?: number;\n}\n\nexport class IgxDragLocation {\n    public pageX: number;\n    public pageY: number;\n\n    constructor(private _pageX, private _pageY) {\n        this.pageX = parseFloat(_pageX);\n        this.pageY = parseFloat(_pageY);\n    }\n}\n\n@Directive({\n    exportAs: 'drag',\n    selector: '[igxDrag]'\n})\nexport class IgxDragDirective implements AfterContentInit, OnDestroy {\n\n    protected ghostContext: any = null;\n\n    /**\n     * - Save data inside the `igxDrag` directive. This can be set when instancing `igxDrag` on an element.\n     * ```html\n     * <div [igxDrag]=\"{ source: myElement }\"></div>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input('igxDrag')\n    public data: any;\n\n    /**\n     * An @Input property that indicates when the drag should start.\n     * By default the drag starts after the draggable element is moved by 5px.\n     * ```html\n     * <div igxDrag [dragTolerance]=\"100\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input()\n    public dragTolerance = 5;\n\n    /**\n     * An @Input property that provide a way for igxDrag and igxDrop to be linked through channels.\n     * It accepts single value or an array of values and evaluates then using strict equality.\n     * ```html\n     * <div igxDrag [dragChannel]=\"'odd'\">\n     *         <span>95</span>\n     * </div>\n     * <div igxDrop [dropChannel]=\"['odd', 'irrational']\">\n     *         <span>Numbers drop area!</span>\n     * </div>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input()\n    public dragChannel: number | string | number[] | string[];\n\n    /**\n     * An @Input property that specifies if the base element should not be moved and a ghost element should be rendered that represents it.\n     * By default it is set to `true`.\n     * If it is set to `false` when dragging the base element is moved instead and no ghost elements are rendered.\n     * ```html\n     * <div igxDrag [ghost]=\"false\">\n     *      <span>Drag Me!</span>\n     * </div>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input()\n    public ghost = true;\n\n    /**\n     * Sets a custom class that will be added to the `ghostElement` element.\n     * ```html\n     * <div igxDrag [ghostClass]=\"'ghostElement'\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input()\n    public ghostClass = '';\n\n    /**\n     * @deprecated Please use custom base styling instead.\n     * An @Input property that hides the draggable element.\n     * By default it's set to false.\n     * ```html\n     * <div igxDrag [dragTolerance]=\"100\" [hideBaseOnDrag]=\"'true'\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @DeprecateProperty(`'hideBaseOnDrag' @Input property is deprecated and will be removed in future major versions.\n        Alternatives to it are using the new no ghost dragging and custom base styling.`)\n    @Input()\n    public hideBaseOnDrag = false;\n\n    /**\n     * @deprecated Please use provided transition functions in future.\n     * An @Input property that enables/disables the draggable element animation\n     * when the element is released.\n     * By default it's set to false.\n     * ```html\n     * <div igxDrag [animateOnRelease]=\"'true'\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @DeprecateProperty(`'animateOnRelease' @Input property is deprecated and will be removed in future major versions.\n        Please use 'transitionToOrigin' or 'transitionTo' methods instead.`)\n    @Input()\n    public animateOnRelease = false;\n\n    /**\n     * An @Input property that specifies a template for the ghost element created when dragging starts and `ghost` is true.\n     * By default a clone of the base element the igxDrag is instanced is created.\n     * ```html\n     * <div igxDrag [ghostTemplate]=\"customGhost\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * <ng-template #customGhost>\n     *      <div class=\"customGhostStyle\">\n     *          <span>I am being dragged!</span>\n     *      </div>\n     * </ng-template>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input()\n    public ghostTemplate: TemplateRef<any>;\n\n    /**\n     * An @Input property that sets the element to which the dragged element will be appended.\n     * By default it's set to null and the dragged element is appended to the body.\n     * ```html\n     * <div #hostDiv></div>\n     * <div igxDrag [ghostHost]=\"hostDiv\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input()\n    public ghostHost;\n\n    /**\n     * An @Input property that specifies the offset of the dragged element relative to the mouse in pixels.\n     * By default it's taking the relative position to the mouse when the drag started and keeps it the same.\n     * ```html\n     * <div #hostDiv></div>\n     * <div igxDrag [ghostOffsetX]=\"0\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input()\n    public set ghostOffsetX(value) {\n        this._offsetX = parseInt(value, 10);\n    }\n\n    public get ghostOffsetX() {\n        return this._offsetX !== undefined ? this._offsetX : this._defaultOffsetX;\n    }\n\n    /**\n     * An @Input property that specifies the offset of the dragged element relative to the mouse in pixels.\n     * By default it's taking the relative position to the mouse when the drag started and keeps it the same.\n     * ```html\n     * <div #hostDiv></div>\n     * <div igxDrag [ghostOffsetY]=\"0\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input()\n    public set ghostOffsetY(value) {\n        this._offsetY = parseInt(value, 10);\n    }\n\n    public get ghostOffsetY() {\n        return this._offsetY !== undefined ? this._offsetY : this._defaultOffsetY ;\n    }\n\n    /**\n     * Event triggered when the draggable element drag starts.\n     * ```html\n     * <div igxDrag (dragStart)=\"onDragStart()\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * ```typescript\n     * public onDragStart(){\n     *      alert(\"The drag has stared!\");\n     * }\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Output()\n    public dragStart = new EventEmitter<IDragStartEventArgs>();\n\n    /**\n     * Event triggered when the draggable element has been moved.\n     * ```html\n     * <div igxDrag  (dragMove)=\"onDragMove()\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * ```typescript\n     * public onDragMove(){\n     *      alert(\"The element has moved!\");\n     * }\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Output()\n    public dragMove = new EventEmitter<IDragMoveEventArgs>();\n\n    /**\n     * Event triggered when the draggable element is released.\n     * ```html\n     * <div igxDrag (dragEnd)=\"onDragEnd()\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * ```typescript\n     * public onDragEnd(){\n     *      alert(\"The drag has ended!\");\n     * }\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Output()\n    public dragEnd = new EventEmitter<IDragBaseEventArgs>();\n\n    /**\n     * Event triggered when the draggable element is clicked.\n     * ```html\n     * <div igxDrag (dragClick)=\"onDragClick()\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * ```typescript\n     * public onDragClick(){\n     *      alert(\"The element has been clicked!\");\n     * }\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Output()\n    public dragClick = new EventEmitter<IDragBaseEventArgs>();\n\n    /**\n     * Event triggered when the drag ghost element is created.\n     * ```html\n     * <div igxDrag (ghostCreate)=\"ghostCreated()\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * ```typescript\n     * public ghostCreated(){\n     *      alert(\"The ghost has been created!\");\n     * }\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Output()\n    public ghostCreate = new EventEmitter<IDragGhostBaseEventArgs>();\n\n    /**\n     * Event triggered when the drag ghost element is created.\n     * ```html\n     * <div igxDrag (ghostDestroy)=\"ghostDestroyed()\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * ```typescript\n     * public ghostDestroyed(){\n     *      alert(\"The ghost has been destroyed!\");\n     * }\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Output()\n    public ghostDestroy = new EventEmitter<IDragGhostBaseEventArgs>();\n\n    /**\n     * Event triggered after the draggable element is released and after its animation has finished.\n     * ```html\n     * <div igxDrag (transitioned)=\"onMoveEnd()\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * ```typescript\n     * public onMoveEnd(){\n     *      alert(\"The move has ended!\");\n     * }\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Output()\n    public transitioned = new EventEmitter<IDragBaseEventArgs>();\n\n    /**\n     * @hidden\n     */\n    @ContentChildren(IgxDragHandleDirective)\n    public dragHandles: QueryList<IgxDragHandleDirective>;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.visibility')\n    public _visibility = 'visible';\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-drag')\n    public baseClass = true;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-drag--select-disabled')\n    public selectDisabled = false;\n\n    /**\n     * @deprecated Please use native angular ways of hiding it using custom to the base element styling for future versions.\n     * Sets the visibility of the draggable element.\n     * ```typescript\n     * @ViewChild(\"myDrag\" ,{read: IgxDragDirective})\n     * public myDrag: IgxDragDirective;\n     * ngAfterViewInit(){\n     *     this.myDrag.visible = false;\n     * }\n     * ```\n     */\n    @DeprecateProperty(`'visible' @Input property is deprecated and will be removed in future major versions.\n        Please use native angular ways of hiding the base element using styling.`)\n    public set visible(bVisible) {\n        this._visibility = bVisible ? 'visible' : 'hidden';\n        this.cdr.detectChanges();\n    }\n\n    /**\n     * Returns the visibility state of the draggable element.\n     * ```typescript\n     * @ViewChild(\"myDrag\" ,{read: IgxDragDirective})\n     * public myDrag: IgxDragDirective;\n     * ngAfterViewInit(){\n     *     let dragVisibility = this.myDrag.visible;\n     * }\n     * ```\n     */\n    public get visible() {\n        return this._visibility === 'visible';\n    }\n\n    /**\n     * Gets the current location of the element relative to the page.\n     */\n    public get location(): IgxDragLocation {\n        return new IgxDragLocation(this.pageX, this.pageY);\n    }\n\n    /**\n     * Gets the original location of the element before dragging started.\n     */\n    public get originLocation(): IgxDragLocation {\n        return new IgxDragLocation(this.baseOriginLeft, this.baseOriginTop);\n    }\n\n    /**\n     * @hidden\n     */\n    public get pointerEventsEnabled() {\n        return typeof PointerEvent !== 'undefined';\n    }\n\n    /**\n     * @hidden\n     */\n    public get touchEventsEnabled() {\n        return 'ontouchstart' in window;\n    }\n\n    /**\n     * @hidden\n     */\n    public get pageX() {\n        if (this.ghost && this.ghostElement) {\n            return this.ghostLeft;\n        }\n        return this.baseLeft;\n    }\n\n    /**\n     * @hidden\n     */\n    public get pageY() {\n        if (this.ghost && this.ghostElement) {\n            return this.ghostTop;\n        }\n        return this.baseTop;\n    }\n\n    protected get baseLeft(): number {\n        return this.element.nativeElement.getBoundingClientRect().left;\n    }\n\n    protected get baseTop(): number {\n        return this.element.nativeElement.getBoundingClientRect().top;\n    }\n\n    protected get baseOriginLeft(): number {\n        return this.baseLeft - this.getTransformX(this.element.nativeElement);\n    }\n\n    protected get baseOriginTop(): number {\n        return this.baseTop - this.getTransformY(this.element.nativeElement);\n    }\n\n    protected set ghostLeft(pageX: number) {\n        if (this.ghostElement) {\n            // We need to take into account marginLeft, since top style does not include margin, but pageX includes the margin.\n            const ghostMarginLeft = parseInt(document.defaultView.getComputedStyle(this.ghostElement)['margin-left'], 10);\n            // If ghost host is defined it needs to be taken into account.\n            this.ghostElement.style.left = (pageX - ghostMarginLeft - this._ghostHostX) + 'px';\n        }\n    }\n\n    protected get ghostLeft() {\n        return parseInt(this.ghostElement.style.left, 10) + this._ghostHostX;\n    }\n\n    protected set ghostTop(pageY: number) {\n        if (this.ghostElement) {\n            // We need to take into account marginTop, since top style does not include margin, but pageY includes the margin.\n            const ghostMarginTop = parseInt(document.defaultView.getComputedStyle(this.ghostElement)['margin-top'], 10);\n            // If ghost host is defined it needs to be taken into account.\n            this.ghostElement.style.top = (pageY - ghostMarginTop - this._ghostHostY) + 'px';\n        }\n    }\n\n    protected get ghostTop() {\n        return parseInt(this.ghostElement.style.top, 10) + this._ghostHostY;\n    }\n\n    /**\n     * @hidden\n     */\n    public defaultReturnDuration = '0.5s';\n\n    /**\n     * @hidden\n     */\n    public ghostElement;\n\n    /**\n     * @hidden\n     */\n    public animInProgress = false;\n\n    protected _startX = 0;\n    protected _startY = 0;\n    protected _lastX = 0;\n    protected _lastY = 0;\n    protected _dragStarted = false;\n\n    /** Drag ghost related properties */\n    protected _defaultOffsetX;\n    protected _defaultOffsetY;\n    protected _offsetX;\n    protected _offsetY;\n    protected _ghostStartX;\n    protected _ghostStartY;\n    protected _ghostHostX = 0;\n    protected _ghostHostY = 0;\n\n    protected _pointerDownId = null;\n    protected _clicked = false;\n    protected _lastDropArea = null;\n\n    protected _destroy = new Subject<boolean>();\n    protected _removeOnDestroy = true;\n\n    constructor(\n        public cdr: ChangeDetectorRef,\n        public element: ElementRef,\n        public viewContainer: ViewContainerRef,\n        public zone: NgZone,\n        public renderer: Renderer2\n    ) {\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterContentInit() {\n        if (!this.dragHandles || !this.dragHandles.length ) {\n            // Set user select none to the whole draggable element if no drag handles are defined.\n            this.selectDisabled = true;\n        }\n\n        // Bind events\n        this.zone.runOutsideAngular(() => {\n            const targetElements = this.dragHandles && this.dragHandles.length ?\n                this.dragHandles.map((item) => item.element.nativeElement) : [this.element.nativeElement];\n            targetElements.forEach((element) => {\n                if (this.pointerEventsEnabled) {\n                    fromEvent(element, 'pointerdown').pipe(takeUntil(this._destroy))\n                    .subscribe((res) => this.onPointerDown(res));\n\n                    fromEvent(element, 'pointermove').pipe(\n                        throttle(() => interval(0, animationFrameScheduler)),\n                        takeUntil(this._destroy)\n                    ).subscribe((res) => this.onPointerMove(res));\n\n                    fromEvent(element, 'pointerup').pipe(takeUntil(this._destroy))\n                        .subscribe((res) => this.onPointerUp(res));\n\n                    if (!this.ghost) {\n                        // Do not bind `lostpointercapture` to the target, because we will bind it on the ghost later.\n                        fromEvent(element, 'lostpointercapture').pipe(takeUntil(this._destroy))\n                        .subscribe((res) => this.onPointerLost(res));\n                    }\n                } else if (this.touchEventsEnabled) {\n                    fromEvent(element, 'touchstart').pipe(takeUntil(this._destroy))\n                    .subscribe((res) => this.onPointerDown(res));\n                } else {\n                    // We don't have pointer events and touch events. Use then mouse events.\n                    fromEvent(element, 'mousedown').pipe(takeUntil(this._destroy))\n                    .subscribe((res) => this.onPointerDown(res));\n                }\n            });\n\n            // We should bind to document events only once when there are no pointer events.\n            if (!this.pointerEventsEnabled && this.touchEventsEnabled) {\n                fromEvent(document.defaultView, 'touchmove').pipe(\n                    throttle(() => interval(0, animationFrameScheduler)),\n                    takeUntil(this._destroy)\n                ).subscribe((res) => this.onPointerMove(res));\n\n                fromEvent(document.defaultView, 'touchend').pipe(takeUntil(this._destroy))\n                    .subscribe((res) => this.onPointerUp(res));\n            } else if (!this.pointerEventsEnabled) {\n                fromEvent(document.defaultView, 'mousemove').pipe(\n                    throttle(() => interval(0, animationFrameScheduler)),\n                    takeUntil(this._destroy)\n                ).subscribe((res) => this.onPointerMove(res));\n\n                fromEvent(document.defaultView, 'mouseup').pipe(takeUntil(this._destroy))\n                    .subscribe((res) => this.onPointerUp(res));\n            }\n\n            this.element.nativeElement.addEventListener('transitionend', (args) => {\n                this.onTransitionEnd(args);\n            });\n        });\n\n        // Set transition duration to 0s. This also helps with setting `visibility: hidden` to the base to not lag.\n        this.element.nativeElement.style.transitionDuration = '0.0s';\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this._destroy.next(true);\n        this._destroy.complete();\n\n        if (this.ghost && this.ghostElement && this._removeOnDestroy) {\n            this.ghostElement.parentNode.removeChild(this.ghostElement);\n            this.ghostElement = null;\n        }\n    }\n\n    /**\n     * Sets desired location of the base element or ghost element if rended relative to the document.\n     * @param newLocation New location that should be applied. It is advised to get new location using getBoundingClientRects() + scroll.\n     */\n    public setLocation(newLocation: IgxDragLocation) {\n        // We do not subtract marginLeft and marginTop here because here we calculate deltas.\n        if (this.ghost && this.ghostElement) {\n            const offsetHostX = this.ghostHost ? this.ghostHostOffsetLeft(this.ghostHost) : 0;\n            const offsetHostY = this.ghostHost ? this.ghostHostOffsetTop(this.ghostHost) : 0;\n            this.ghostLeft = newLocation.pageX - offsetHostX + this.getWindowScrollLeft();\n            this.ghostTop = newLocation.pageY - offsetHostY + this.getWindowScrollTop();\n        } else if (!this.ghost) {\n            const deltaX = newLocation.pageX - this.pageX;\n            const deltaY = newLocation.pageY - this.pageY;\n            const transformX = this.getTransformX(this.element.nativeElement);\n            const transformY = this.getTransformY(this.element.nativeElement);\n            this.setTransformXY(transformX + deltaX, transformY + deltaY);\n        }\n\n        this._startX = this.baseLeft;\n        this._startY = this.baseTop;\n    }\n\n    /**\n     * Animates the base or ghost element depending on the `ghost` input to its initial location.\n     * If `ghost` is true but there is not ghost rendered, it will be created and animated.\n     * If the base element has changed its DOM position its initial location will be changed accordingly.\n     * @param customAnimArgs Custom transition properties that will be applied when performing the transition.\n     * @param startLocation Start location from where the transition should start.\n     */\n    public transitionToOrigin(customAnimArgs?: IDragCustomTransitionArgs, startLocation?: IgxDragLocation) {\n        if ((!!startLocation && startLocation.pageX === this.baseOriginLeft && startLocation.pageY === this.baseOriginLeft) ||\n            (!startLocation && this.ghost && !this.ghostElement)) {\n            return;\n        }\n\n        if (!!startLocation && startLocation.pageX !== this.pageX && startLocation.pageY !== this.pageY) {\n            if (this.ghost && !this.ghostElement) {\n                this._startX = startLocation.pageX;\n                this._startY = startLocation.pageY;\n                this._ghostStartX = this._startX;\n                this._ghostStartY = this._startY;\n                this.createGhost(this._startX, this._startY);\n            }\n\n            this.setLocation(startLocation);\n        }\n\n        this.animInProgress = true;\n        // Use setTimeout because we need to be sure that the element is positioned first correctly if there is start location.\n        setTimeout(() => {\n            if (this.ghost) {\n                this.ghostElement.style.transitionProperty = 'top, left';\n                this.ghostElement.style.transitionDuration =\n                    customAnimArgs && customAnimArgs.duration ? customAnimArgs.duration + 's' : this.defaultReturnDuration ;\n                this.ghostElement.style.transitionTimingFunction =\n                    customAnimArgs && customAnimArgs.timingFunction ? customAnimArgs.timingFunction : '';\n                this.ghostElement.style.transitionDelay = customAnimArgs && customAnimArgs.delay ? customAnimArgs.delay + 's' : '';\n                this.setLocation(new IgxDragLocation(this.baseLeft, this.baseTop));\n            } else if (!this.ghost) {\n                this.element.nativeElement.style.transitionProperty = 'transform';\n                this.element.nativeElement.style.transitionDuration =\n                    customAnimArgs && customAnimArgs.duration ? customAnimArgs.duration + 's' : this.defaultReturnDuration ;\n                this.element.nativeElement.style.transitionTimingFunction =\n                    customAnimArgs && customAnimArgs.timingFunction ? customAnimArgs.timingFunction : '';\n                this.element.nativeElement.style.transitionDelay = customAnimArgs && customAnimArgs.delay ? customAnimArgs.delay + 's' : '';\n                this._startX = this.baseLeft;\n                this._startY = this.baseTop;\n                this.setTransformXY(0, 0);\n            }\n        }, 0);\n    }\n\n    /**\n     * Animates the base or ghost element to a specific target location or other element using transition.\n     * If `ghost` is true but there is not ghost rendered, it will be created and animated.\n     * It is recommended to use 'getBoundingClientRects() + pageScroll' when determining desired location.\n     * @param target Target that the base or ghost will transition to. It can be either location in the page or another HTML element.\n     * @param customAnimArgs Custom transition properties that will be applied when performing the transition.\n     * @param startLocation Start location from where the transition should start.\n     */\n    public transitionTo(target: IgxDragLocation | ElementRef, customAnimArgs?: IDragCustomTransitionArgs, startLocation?: IgxDragLocation) {\n        if (!!startLocation && this.ghost && !this.ghostElement) {\n            this._startX = startLocation.pageX;\n            this._startY = startLocation.pageY;\n            this._ghostStartX = this._startX;\n            this._ghostStartY = this._startY;\n        } else if (!!startLocation && (!this.ghost || this.ghostElement)) {\n            this.setLocation(startLocation);\n        } else if (this.ghost && !this.ghostElement) {\n            this._startX = this.baseLeft;\n            this._startY = this.baseTop;\n            this._ghostStartX = this._startX + this.getWindowScrollLeft();\n            this._ghostStartY = this._startY + this.getWindowScrollTop();\n        }\n\n        if (this.ghost && !this.ghostElement) {\n            this.createGhost(this._startX, this._startY);\n        }\n\n        this.animInProgress = true;\n        // Use setTimeout because we need to be sure that the element is positioned first correctly if there is start location.\n        setTimeout(() => {\n            const movedElem = this.ghost ? this.ghostElement : this.element.nativeElement;\n            movedElem.style.transitionProperty = this.ghost && this.ghostElement ? 'left, top' : 'transform';\n            movedElem.style.transitionDuration =\n                customAnimArgs && customAnimArgs.duration ? customAnimArgs.duration + 's' : this.defaultReturnDuration ;\n            movedElem.style.transitionTimingFunction =\n                customAnimArgs && customAnimArgs.timingFunction ? customAnimArgs.timingFunction : '';\n            movedElem.style.transitionDelay = customAnimArgs && customAnimArgs.delay ? customAnimArgs.delay + 's' : '';\n\n            if (target instanceof IgxDragLocation) {\n                this.setLocation(new IgxDragLocation (target.pageX, target.pageY));\n            } else {\n                const targetRects = target.nativeElement.getBoundingClientRect();\n                this.setLocation(new IgxDragLocation(\n                    targetRects.left -  this.getWindowScrollLeft(),\n                    targetRects.top - this.getWindowScrollTop()\n                ));\n            }\n        }, 0);\n    }\n\n    /**\n     * @hidden\n     * Method bound to the PointerDown event of the base element igxDrag is initialized.\n     * @param event PointerDown event captured\n     */\n    public onPointerDown(event) {\n        this._clicked = true;\n        this._pointerDownId = event.pointerId;\n\n        // Set pointer capture so we detect pointermove even if mouse is out of bounds until ghostElement is created.\n        const handleFound = this.dragHandles.find(handle => handle.element.nativeElement === event.currentTarget);\n        const targetElement = handleFound ? handleFound.element.nativeElement : this.element.nativeElement;\n        if (this.pointerEventsEnabled) {\n            targetElement.setPointerCapture(this._pointerDownId);\n        } else {\n            targetElement.focus();\n            event.preventDefault();\n        }\n\n        if (this.pointerEventsEnabled || !this.touchEventsEnabled) {\n            // Check first for pointer events or non touch, because we can have pointer events and touch events at once.\n            this._startX = event.pageX;\n            this._startY = event.pageY;\n        } else if (this.touchEventsEnabled) {\n            this._startX = event.touches[0].pageX;\n            this._startY = event.touches[0].pageY;\n        }\n\n        this._defaultOffsetX = this.baseLeft - this._startX + this.getWindowScrollLeft();\n        this._defaultOffsetY = this.baseTop - this._startY + this.getWindowScrollTop();\n        this._ghostStartX = this._startX + this.ghostOffsetX;\n        this._ghostStartY = this._startY + this.ghostOffsetY;\n        this._lastX = this._startX;\n        this._lastY = this._startY;\n    }\n\n    /**\n     * @hidden\n     * Perform drag move logic when dragging and dispatching events if there is igxDrop under the pointer.\n     * This method is bound at first at the base element.\n     * If dragging starts and after the ghostElement is rendered the pointerId is reassigned it. Then this method is bound to it.\n     * @param event PointerMove event captured\n     */\n    public onPointerMove(event) {\n        if (this._clicked) {\n            let pageX, pageY;\n            if (this.pointerEventsEnabled || !this.touchEventsEnabled) {\n                // Check first for pointer events or non touch, because we can have pointer events and touch events at once.\n                pageX = event.pageX;\n                pageY = event.pageY;\n            } else if (this.touchEventsEnabled) {\n                pageX = event.touches[0].pageX;\n                pageY = event.touches[0].pageY;\n\n                // Prevent scrolling on touch while dragging\n                event.preventDefault();\n            }\n\n            const totalMovedX = pageX - this._startX;\n            const totalMovedY = pageY - this._startY;\n            if (!this._dragStarted &&\n                (Math.abs(totalMovedX) > this.dragTolerance || Math.abs(totalMovedY) > this.dragTolerance)) {\n                const dragStartArgs: IDragStartEventArgs = {\n                    originalEvent: event,\n                    owner: this,\n                    startX: pageX - totalMovedX,\n                    startY: pageY - totalMovedY,\n                    pageX: pageX,\n                    pageY: pageY,\n                    cancel: false\n                };\n                this.zone.run(() => {\n                    this.dragStart.emit(dragStartArgs);\n                });\n\n                if (!dragStartArgs.cancel) {\n                    this._dragStarted = true;\n                    if (this.ghost) {\n                        // We moved enough so ghostElement can be rendered and actual dragging to start.\n                        // When creating it will take into account any offset set by the user by default.\n                        this.createGhost(pageX, pageY);\n                    } else if (this._offsetX !== undefined || this._offsetY !== undefined) {\n                        // There is no need for ghost, but we will need to position initially the base element to reflect any offset.\n                        const transformX = (this._offsetX !== undefined ? this._offsetX - this._defaultOffsetX : 0) +\n                            this.getTransformX(this.element.nativeElement);\n                        const transformY = (this._offsetY !== undefined ? this._offsetY - this._defaultOffsetY : 0) +\n                            this.getTransformY(this.element.nativeElement);\n                        this.setTransformXY(transformX, transformY);\n                    }\n                } else {\n                    return;\n                }\n            } else if (!this._dragStarted) {\n                return;\n            }\n\n            const moveArgs: IDragMoveEventArgs = {\n                originalEvent: event,\n                owner: this,\n                startX: this._startX,\n                startY: this._startY,\n                pageX: this._lastX,\n                pageY: this._lastY,\n                nextPageX: pageX,\n                nextPageY: pageY,\n                cancel: false\n            };\n            this.dragMove.emit(moveArgs);\n\n            const setPageX = moveArgs.nextPageX;\n            const setPageY = moveArgs.nextPageY;\n            const updatedMovedX = setPageX - this._startX;\n            const updatedMovedY = setPageY - this._startY;\n\n            if (!moveArgs.cancel) {\n                if (this.ghost) {\n                    this.ghostLeft = this._ghostStartX + updatedMovedX;\n                    this.ghostTop = this._ghostStartY + updatedMovedY;\n                } else {\n                    const lastMovedX = setPageX - this._lastX;\n                    const lastMovedY = setPageY - this._lastY;\n                    const translateX = this.getTransformX(this.element.nativeElement) + lastMovedX;\n                    const translateY = this.getTransformY(this.element.nativeElement) + lastMovedY;\n                    this.setTransformXY(translateX, translateY);\n                }\n                this.dispatchDragEvents(pageX, pageY, event);\n            }\n\n            this._lastX = setPageX;\n            this._lastY = setPageY;\n        }\n    }\n\n    /**\n     * @hidden\n     * Perform drag end logic when releasing the ghostElement and dispatching drop event if igxDrop is under the pointer.\n     * This method is bound at first at the base element.\n     * If dragging starts and after the ghostElement is rendered the pointerId is reassigned to it. Then this method is bound to it.\n     * @param event PointerUp event captured\n     */\n    public onPointerUp(event) {\n        if (!this._clicked) {\n            return;\n        }\n\n        let pageX, pageY;\n        if (this.pointerEventsEnabled || !this.touchEventsEnabled) {\n            // Check first for pointer events or non touch, because we can have pointer events and touch events at once.\n            pageX = event.pageX;\n            pageY = event.pageY;\n        } else if (this.touchEventsEnabled) {\n            pageX = event.touches[0].pageX;\n            pageY = event.touches[0].pageY;\n\n            // Prevent scrolling on touch while dragging\n            event.preventDefault();\n        }\n\n        const eventArgs: IDragBaseEventArgs = {\n            originalEvent: event,\n            owner: this,\n            startX: this._startX,\n            startY: this._startY,\n            pageX: pageX,\n            pageY: pageY\n        };\n        this._pointerDownId = null;\n        this._clicked = false;\n        if (this._dragStarted) {\n            if (this._lastDropArea && this._lastDropArea !== this.element.nativeElement ) {\n                this.dispatchDropEvent(event.pageX, event.pageY, event);\n            } else if (this.animateOnRelease) {\n                this.transitionToOrigin();\n            }\n\n            this.zone.run(() => {\n                this.dragEnd.emit(eventArgs);\n            });\n\n            if (!this.animInProgress) {\n                this.onTransitionEnd(null);\n            }\n        } else {\n            // Trigger our own click event because when there is no ghost, native click cannot be prevented when dragging.\n            this.zone.run(() => {\n                this.dragClick.emit(eventArgs);\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     * Execute this method whe the pointer capture has been lost.\n     * This means that during dragging the user has performed other action like right clicking and then clicking somewhere else.\n     * This method will ensure that the drag state is being reset in this case as if the user released the dragged element.\n     * @param event Event captured\n     */\n    public onPointerLost(event) {\n        if (!this._clicked) {\n            return;\n        }\n\n        const eventArgs = {\n            originalEvent: event,\n            owner: this,\n            startX: this._startX,\n            startY: this._startY,\n            pageX: event.pageX,\n            pageY: event.pageY\n        };\n        this._pointerDownId = null;\n        this._clicked = false;\n        if (this._dragStarted) {\n            this.zone.run(() => {\n                this.dragEnd.emit(eventArgs);\n            });\n            if (this.animateOnRelease) {\n                this.transitionToOrigin();\n            } else if (!this.animInProgress) {\n                this.onTransitionEnd(null);\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     * Create ghost element - if a Node object is provided it creates a clone of that node,\n     * otherwise it clones the host element.\n     * Bind all needed events.\n     * @param pageX Latest pointer position on the X axis relative to the page.\n     * @param pageY Latest pointer position on the Y axis relative to the page.\n     * @param node The Node object to be cloned.\n     */\n    protected createGhost(pageX, pageY, node: any = null) {\n        if (!this.ghost) {\n            return;\n        }\n\n        let dynamicGhostRef;\n        if (this.ghostTemplate) {\n            dynamicGhostRef = this.viewContainer.createEmbeddedView(this.ghostTemplate, this.ghostContext);\n            this.ghostElement = dynamicGhostRef.rootNodes[0];\n        } else {\n            this.ghostElement = node ? node.cloneNode(true) : this.element.nativeElement.cloneNode(true);\n        }\n\n        const totalMovedX = pageX - this._startX;\n        const totalMovedY = pageY - this._startY;\n        this._ghostHostX = this.ghostHost ? this.ghostHostOffsetLeft(this.ghostHost) : 0;\n        this._ghostHostY = this.ghostHost ? this.ghostHostOffsetTop(this.ghostHost) : 0;\n\n        this.ghostElement.style.transitionDuration = '0.0s';\n        this.ghostElement.style.position = 'absolute';\n\n\n        if (this.ghostClass) {\n            this.renderer.addClass(this.ghostElement, this.ghostClass);\n        }\n\n        const createEventArgs = {\n            owner: this,\n            ghostElement: this.ghostElement,\n            cancel: false\n        };\n        this.ghostCreate.emit(createEventArgs);\n        if (createEventArgs.cancel) {\n            this.ghostElement = null;\n            if (this.ghostTemplate && dynamicGhostRef) {\n                dynamicGhostRef.destroy();\n            }\n            return;\n        }\n\n        if (this.ghostHost) {\n            this.ghostHost.appendChild(this.ghostElement);\n        } else {\n            document.body.appendChild(this.ghostElement);\n        }\n\n        const ghostMarginLeft = parseInt(document.defaultView.getComputedStyle(this.ghostElement)['margin-left'], 10);\n        const ghostMarginTop = parseInt(document.defaultView.getComputedStyle(this.ghostElement)['margin-top'], 10);\n        this.ghostElement.style.left = (this._ghostStartX - ghostMarginLeft + totalMovedX - this._ghostHostX) + 'px';\n        this.ghostElement.style.top = (this._ghostStartY - ghostMarginTop + totalMovedY - this._ghostHostX) + 'px';\n\n        if (this.pointerEventsEnabled) {\n            // The ghostElement takes control for moving and dragging after it has been rendered.\n            if (this._pointerDownId !== null) {\n                this.ghostElement.setPointerCapture(this._pointerDownId);\n            }\n            this.ghostElement.addEventListener('pointermove', (args) => {\n                this.onPointerMove(args);\n            });\n            this.ghostElement.addEventListener('pointerup', (args) => {\n                this.onPointerUp(args);\n            });\n            this.ghostElement.addEventListener('lostpointercapture', (args) => {\n                this.onPointerLost(args);\n            });\n        }\n\n        // Transition animation when the ghostElement is released and it returns to it's original position.\n        this.ghostElement.addEventListener('transitionend', (args) => {\n            this.onTransitionEnd(args);\n        });\n\n        // Hide the base after the ghostElement is created, because otherwise the ghostElement will be not visible.\n        if (this.hideBaseOnDrag) {\n            this.visible = false;\n        }\n\n        this.cdr.detectChanges();\n    }\n\n    /**\n     * @hidden\n     * Dispatch custom igxDragEnter/igxDragLeave events based on current pointer position and if drop area is under.\n     */\n    protected dispatchDragEvents(pageX: number, pageY: number, originalEvent) {\n        let topDropArea;\n        const customEventArgs: IgxDragCustomEventDetails = {\n            startX: this._startX,\n            startY: this._startY,\n            pageX: pageX,\n            pageY: pageY,\n            owner: this,\n            originalEvent: originalEvent\n        };\n\n        const elementsFromPoint = this.getElementsAtPoint(pageX, pageY);\n        for (let i = 0; i < elementsFromPoint.length; i++) {\n            if (elementsFromPoint[i].getAttribute('droppable') === 'true' &&\n                elementsFromPoint[i] !== this.ghostElement && elementsFromPoint[i] !== this.element.nativeElement) {\n                topDropArea = elementsFromPoint[i];\n                break;\n            }\n        }\n\n        if (topDropArea &&\n            (!this._lastDropArea || (this._lastDropArea && this._lastDropArea !== topDropArea))) {\n                if (this._lastDropArea) {\n                    this.dispatchEvent(this._lastDropArea, 'igxDragLeave', customEventArgs);\n                }\n\n                this._lastDropArea = topDropArea;\n                this.dispatchEvent(this._lastDropArea, 'igxDragEnter', customEventArgs);\n            } else if (!topDropArea && this._lastDropArea) {\n                this.dispatchEvent(this._lastDropArea, 'igxDragLeave', customEventArgs);\n                this._lastDropArea = null;\n                return;\n            }\n\n        if (topDropArea) {\n            this.dispatchEvent(topDropArea, 'igxDragOver', customEventArgs);\n        }\n    }\n\n    /**\n     * @hidden\n     * Dispatch custom igxDrop event based on current pointer position if there is last recorder drop area under the pointer.\n     * Last recorder drop area is updated in @dispatchDragEvents method.\n     */\n    protected dispatchDropEvent(pageX: number, pageY: number, originalEvent) {\n        const eventArgs: IgxDragCustomEventDetails = {\n            startX: this._startX,\n            startY: this._startY,\n            pageX: pageX,\n            pageY: pageY,\n            owner: this,\n            originalEvent: originalEvent\n        };\n\n        this.dispatchEvent(this._lastDropArea, 'igxDrop', eventArgs);\n        this.dispatchEvent(this._lastDropArea, 'igxDragLeave', eventArgs);\n        this._lastDropArea = null;\n    }\n\n    /**\n     * @hidden\n     */\n    public onTransitionEnd(event) {\n        if ((!this._dragStarted && !this.animInProgress) || this._clicked) {\n            // Return if no dragging started and there is no animation in progress.\n            return ;\n        }\n\n        if (this.ghost && this.ghostElement) {\n            this._ghostStartX = this.baseLeft + this.getWindowScrollLeft();\n            this._ghostStartY = this.baseTop + this.getWindowScrollTop();\n\n            const ghostDestroyArgs: IDragGhostBaseEventArgs = {\n                owner: this,\n                ghostElement: this.ghostElement,\n                cancel: false\n            };\n            this.ghostDestroy.emit(ghostDestroyArgs);\n            if (ghostDestroyArgs.cancel) {\n                return;\n            }\n\n            if (this.hideBaseOnDrag) {\n                this.visible = true;\n            }\n            this.ghostElement.parentNode.removeChild(this.ghostElement);\n            this.ghostElement = null;\n        } else if (!this.ghost) {\n            this.element.nativeElement.style.transitionProperty = '';\n            this.element.nativeElement.style.transitionDuration = '0.0s';\n            this.element.nativeElement.style.transitionTimingFunction = '';\n            this.element.nativeElement.style.transitionDelay = '';\n        }\n        this.animInProgress = false;\n        this._dragStarted = false;\n\n        // Execute transitioned after everything is reset so if the user sets new location on the base now it would work as expected.\n        this.zone.run(() => {\n            this.transitioned.emit({\n                originalEvent: event,\n                owner: this,\n                startX: this._startX,\n                startY: this._startY,\n                pageX: this._startX,\n                pageY: this._startY\n            });\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    protected getElementsAtPoint(pageX: number, pageY: number) {\n        // correct the coordinates with the current scroll position, because\n        // document.elementsFromPoint consider position within the current viewport\n        // window.pageXOffset == window.scrollX; // always true\n        // using window.pageXOffset for IE9 compatibility\n        const viewPortX = pageX - window.pageXOffset;\n        const viewPortY = pageY - window.pageYOffset;\n        if (document['msElementsFromPoint']) {\n            // Edge and IE special snowflakes\n            const elements = document['msElementsFromPoint'](viewPortX, viewPortY);\n            return elements === null ? [] : elements;\n        } else {\n            // Other browsers like Chrome, Firefox, Opera\n            return document.elementsFromPoint(viewPortX, viewPortY);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected dispatchEvent(target, eventName: string, eventArgs: IgxDragCustomEventDetails) {\n        // This way is IE11 compatible.\n        const dragLeaveEvent = document.createEvent('CustomEvent');\n        dragLeaveEvent.initCustomEvent(eventName, false, false, eventArgs);\n        target.dispatchEvent(dragLeaveEvent);\n        // Otherwise can be used `target.dispatchEvent(new CustomEvent(eventName, eventArgs));`\n    }\n\n    protected getTransformX(elem) {\n        let posX = 0;\n        if (elem.style.transform) {\n            const matrix = elem.style.transform;\n            const values = matrix ? matrix.match(/-?[\\d\\.]+/g) : undefined;\n            posX = values ? Number(values[ 1 ]) : 0;\n        }\n\n        return posX;\n    }\n\n    protected getTransformY(elem) {\n        let posY = 0;\n        if (elem.style.transform) {\n            const matrix = elem.style.transform;\n            const values = matrix ? matrix.match(/-?[\\d\\.]+/g) : undefined;\n            posY = values ? Number(values[ 2 ]) : 0;\n        }\n\n        return posY;\n    }\n\n    /** Method setting transformation to the base draggable element. */\n    protected setTransformXY(x: number, y: number) {\n        this.element.nativeElement.style.transform = 'translate3d(' + x + 'px, ' + y + 'px, 0px)';\n    }\n\n    protected getWindowScrollTop() {\n        return window.scrollY ? window.scrollY : (window.pageYOffset ? window.pageYOffset : 0);\n    }\n\n    protected getWindowScrollLeft() {\n        return window.scrollX ? window.scrollX : (window.pageXOffset ? window.pageXOffset : 0);\n    }\n\n    protected ghostHostOffsetLeft(ghostHost: any) {\n        const ghostPosition = document.defaultView.getComputedStyle(ghostHost).getPropertyValue('position');\n        if (ghostPosition === 'static' && ghostHost.offsetParent && ghostHost.offsetParent === document.body) {\n            return 0;\n        } else if (ghostPosition === 'static' && ghostHost.offsetParent) {\n            return ghostHost.offsetParent.getBoundingClientRect().left - this.getWindowScrollLeft();\n        }\n        return ghostHost.getBoundingClientRect().left - this.getWindowScrollLeft();\n    }\n\n    protected ghostHostOffsetTop(ghostHost: any) {\n        const ghostPosition = document.defaultView.getComputedStyle(ghostHost).getPropertyValue('position');\n        if (ghostPosition === 'static' && ghostHost.offsetParent && ghostHost.offsetParent === document.body) {\n            return 0;\n        } else if (ghostPosition === 'static' && ghostHost.offsetParent) {\n            return ghostHost.offsetParent.getBoundingClientRect().top - this.getWindowScrollTop();\n        }\n        return ghostHost.getBoundingClientRect().top - this.getWindowScrollTop();\n    }\n}\n\n@Directive({\n    exportAs: 'drop',\n    selector: '[igxDrop]'\n})\nexport class IgxDropDirective implements OnInit, OnDestroy {\n\n    /**\n     * - Save data inside the `igxDrop` directive. This can be set when instancing `igxDrop` on an element.\n     * ```html\n     * <div [igxDrop]=\"{ source: myElement }\"></div>\n     * ```\n     * @memberof IgxDropDirective\n     */\n    @Input('igxDrop')\n    public data: any;\n\n    /**\n     * An @Input property that provide a way for igxDrag and igxDrop to be linked through channels.\n     * It accepts single value or an array of values and evaluates then using strict equality.\n     * ```html\n     * <div igxDrag [dragChannel]=\"'odd'\">\n     *         <span>95</span>\n     * </div>\n     * <div igxDrop [dropChannel]=\"['odd', 'irrational']\">\n     *         <span>Numbers drop area!</span>\n     * </div>\n     * ```\n     * @memberof IgxDropDirective\n     */\n    @Input()\n    public dropChannel: number | string | number[] | string[];\n\n    /**\n     * An @Input property that specifies a drop strategy type that will be executed when an `IgxDrag` element is released inside\n     *  the current drop area. The provided strategies are:\n     *  - IgxDefaultDropStrategy - This is the default base strategy and it doesn't perform any actions.\n     *  - IgxAppendDropStrategy - Appends the dropped element to last position as a direct child to the `igxDrop`.\n     *  - IgxPrependDropStrategy - Prepends the dropped element to first position as a direct child to the `igxDrop`.\n     *  - IgxInsertDropStrategy - If the dropped element is released above a child element of the `igxDrop`, it will be inserted\n     *      at that position. Otherwise the dropped element will be appended if released outside any child of the `igxDrop`.\n     * ```html\n     * <div igxDrag>\n     *      <span>DragMe</span>\n     * </div>\n     * <div igxDrop [dropStrategy]=\"myDropStrategy\">\n     *         <span>Numbers drop area!</span>\n     * </div>\n     * ```\n     * ```typescript\n     * import { IgxAppendDropStrategy } from 'igniteui-angular';\n     *\n     * export class App {\n     *      public myDropStrategy = IgxAppendDropStrategy;\n     * }\n     * ```\n     * @memberof IgxDropDirective\n     */\n    @Input()\n    public set dropStrategy(classRef: any) {\n        this._dropStrategy = new classRef(this._renderer);\n    }\n\n    public get dropStrategy() {\n        return this._dropStrategy;\n    }\n\n    /** Event triggered when dragged element enters the area of the element.\n     * ```html\n     * <div class=\"cageArea\" igxDrop (enter)=\"dragEnter()\" (igxDragEnter)=\"onDragCageEnter()\" (igxDragLeave)=\"onDragCageLeave()\">\n     * </div>\n     * ```\n     * ```typescript\n     * public dragEnter(){\n     *     alert(\"A draggable element has entered the chip area!\");\n     * }\n     * ```\n     * @memberof IgxDropDirective\n     */\n    @Output()\n    public enter = new EventEmitter<IDropBaseEventArgs>();\n\n        /** Event triggered when dragged element enters the area of the element.\n     * ```html\n     * <div class=\"cageArea\" igxDrop (enter)=\"dragEnter()\" (igxDragEnter)=\"onDragCageEnter()\" (igxDragLeave)=\"onDragCageLeave()\">\n     * </div>\n     * ```\n     * ```typescript\n     * public dragEnter(){\n     *     alert(\"A draggable element has entered the chip area!\");\n     * }\n     * ```\n     * @memberof IgxDropDirective\n     */\n    @Output()\n    public over = new EventEmitter<IDropBaseEventArgs>();\n\n    /** Event triggered when dragged element leaves the area of the element.\n     * ```html\n     * <div class=\"cageArea\" igxDrop (leave)=\"dragLeave()\" (igxDragEnter)=\"onDragCageEnter()\" (igxDragLeave)=\"onDragCageLeave()\">\n     * </div>\n     * ```\n     * ```typescript\n     * public dragLeave(){\n     *     alert(\"A draggable element has left the chip area!\");\n     * }\n     * ```\n     * @memberof IgxDropDirective\n     */\n    @Output()\n    public leave = new EventEmitter<IDropBaseEventArgs>();\n\n    /** Event triggered when dragged element is dropped in the area of the element.\n     * Since the `igxDrop` has default logic that appends the dropped element as a child, it can be canceled here.\n     * To cancel the default logic the `cancel` property of the event needs to be set to true.\n     * ```html\n     * <div class=\"cageArea\" igxDrop (dropped)=\"dragDrop()\" (igxDragEnter)=\"onDragCageEnter()\" (igxDragLeave)=\"onDragCageLeave()\">\n     * </div>\n     * ```\n     * ```typescript\n     * public dragDrop(){\n     *     alert(\"A draggable element has been dropped in the chip area!\");\n     * }\n     * ```\n     * @memberof IgxDropDirective\n     */\n    @Output()\n    public dropped = new EventEmitter<IDropDroppedEventArgs>();\n\n    /**\n     * @hidden\n     */\n    @HostBinding('attr.droppable')\n    public droppable = true;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.dragOver')\n    public dragover = false;\n\n    /**\n     * @hidden\n     */\n    protected _destroy = new Subject<boolean>();\n    protected _dropStrategy: IDropStrategy;\n\n    constructor(public element: ElementRef, private _renderer: Renderer2, private _zone: NgZone) {\n        this._dropStrategy = new IgxDefaultDropStrategy();\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        this._zone.runOutsideAngular(() => {\n            fromEvent(this.element.nativeElement, 'igxDragEnter').pipe(takeUntil(this._destroy))\n                .subscribe((res) => this.onDragEnter(res as CustomEvent<IgxDragCustomEventDetails>));\n\n            fromEvent(this.element.nativeElement, 'igxDragLeave').pipe(takeUntil(this._destroy)).subscribe((res) => this.onDragLeave(res));\n            fromEvent(this.element.nativeElement, 'igxDragOver').pipe(takeUntil(this._destroy)).subscribe((res) => this.onDragOver(res));\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this._destroy.next(true);\n        this._destroy.complete();\n    }\n\n    /**\n     * @hidden\n     */\n    public onDragOver(event) {\n        const elementPosX = this.element.nativeElement.getBoundingClientRect().left + this.getWindowScrollLeft();\n        const elementPosY = this.element.nativeElement.getBoundingClientRect().top + this.getWindowScrollTop();\n        const offsetX = event.detail.pageX - elementPosX;\n        const offsetY = event.detail.pageY - elementPosY;\n        const eventArgs: IDropBaseEventArgs = {\n            originalEvent: event.detail.originalEvent,\n            owner: this,\n            drag: event.detail.owner,\n            dragData: event.detail.owner.data,\n            startX: event.detail.startX,\n            startY: event.detail.startY,\n            pageX: event.detail.pageX,\n            pageY: event.detail.pageY,\n            offsetX: offsetX,\n            offsetY: offsetY\n        };\n\n        this.over.emit(eventArgs);\n     }\n\n    /**\n     * @hidden\n     */\n    public onDragEnter(event: CustomEvent<IgxDragCustomEventDetails>) {\n        if (!this.isDragLinked(event.detail.owner)) {\n            return;\n        }\n\n        this.dragover = true;\n        const elementPosX = this.element.nativeElement.getBoundingClientRect().left + this.getWindowScrollLeft();\n        const elementPosY = this.element.nativeElement.getBoundingClientRect().top + this.getWindowScrollTop();\n        const offsetX = event.detail.pageX - elementPosX;\n        const offsetY = event.detail.pageY - elementPosY;\n        const eventArgs: IDropBaseEventArgs = {\n            originalEvent: event.detail.originalEvent,\n            owner: this,\n            drag: event.detail.owner,\n            dragData: event.detail.owner.data,\n            startX: event.detail.startX,\n            startY: event.detail.startY,\n            pageX: event.detail.pageX,\n            pageY: event.detail.pageY,\n            offsetX: offsetX,\n            offsetY: offsetY\n        };\n        this._zone.run(() => {\n            this.enter.emit(eventArgs);\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public onDragLeave(event) {\n        if (!this.isDragLinked(event.detail.owner)) {\n            return;\n        }\n\n        this.dragover = false;\n        const elementPosX = this.element.nativeElement.getBoundingClientRect().left + this.getWindowScrollLeft();\n        const elementPosY = this.element.nativeElement.getBoundingClientRect().top + this.getWindowScrollTop();\n        const offsetX = event.detail.pageX - elementPosX;\n        const offsetY = event.detail.pageY - elementPosY;\n        const eventArgs: IDropBaseEventArgs = {\n            originalEvent: event.detail.originalEvent,\n            owner: this,\n            drag: event.detail.owner,\n            dragData: event.detail.owner.data,\n            startX: event.detail.startX,\n            startY: event.detail.startY,\n            pageX: event.detail.pageX,\n            pageY: event.detail.pageY,\n            offsetX: offsetX,\n            offsetY: offsetY\n        };\n        this._zone.run(() => {\n            this.leave.emit(eventArgs);\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('igxDrop', ['$event'])\n    public onDragDrop(event) {\n        if (!this.isDragLinked(event.detail.owner)) {\n            return;\n        }\n\n        const elementPosX = this.element.nativeElement.getBoundingClientRect().left + this.getWindowScrollLeft();\n        const elementPosY = this.element.nativeElement.getBoundingClientRect().top + this.getWindowScrollTop();\n        const offsetX = event.detail.pageX - elementPosX;\n        const offsetY = event.detail.pageY - elementPosY;\n        const args: IDropDroppedEventArgs = {\n            owner: this,\n            originalEvent: event.detail.originalEvent,\n            drag: event.detail.owner,\n            dragData: event.detail.owner.data,\n            startX: event.detail.startX,\n            startY: event.detail.startY,\n            pageX: event.detail.pageX,\n            pageY: event.detail.pageY,\n            offsetX: offsetX,\n            offsetY: offsetY,\n            cancel: false\n        };\n        this._zone.run(() => {\n            this.dropped.emit(args);\n        });\n\n        if (this._dropStrategy && !args.cancel) {\n            const elementsAtPoint = event.detail.owner.getElementsAtPoint(event.detail.pageX, event.detail.pageY);\n            const insertIndex = this.getInsertIndexAt(event.detail.owner, elementsAtPoint);\n            this._dropStrategy.dropAction(event.detail.owner, this, insertIndex);\n        }\n    }\n\n    protected getWindowScrollTop() {\n        return window.scrollY ? window.scrollY : (window.pageYOffset ? window.pageYOffset : 0);\n    }\n\n    protected getWindowScrollLeft() {\n        return window.scrollX ? window.scrollX : (window.pageXOffset ? window.pageXOffset : 0);\n    }\n\n    protected isDragLinked(drag: IgxDragDirective): boolean {\n        const dragLinkArray = drag.dragChannel instanceof Array;\n        const dropLinkArray = this.dropChannel instanceof Array;\n\n        if (!dragLinkArray && !dropLinkArray) {\n            return this.dropChannel === drag.dragChannel;\n        } else if (!dragLinkArray && dropLinkArray) {\n            const dropLinks = <Array<any>>this.dropChannel;\n            for (let i = 0; i < dropLinks.length; i ++) {\n                if (dropLinks[i] === drag.dragChannel) {\n                    return true;\n                }\n            }\n        } else if (dragLinkArray && !dropLinkArray) {\n            const dragLinks = <Array<any>>drag.dragChannel;\n            for (let i = 0; i < dragLinks.length; i ++) {\n                if (dragLinks[i] === this.dropChannel) {\n                    return true;\n                }\n            }\n        } else {\n            const dragLinks = <Array<any>>drag.dragChannel;\n            const dropLinks = <Array<any>>this.dropChannel;\n            for (let i = 0; i < dragLinks.length; i ++) {\n                for (let j = 0; j < dropLinks.length; j ++) {\n                    if (dragLinks[i] === dropLinks[j]) {\n                        return true;\n                    }\n                }\n            }\n        }\n\n        return false;\n    }\n\n    protected getInsertIndexAt(draggedDir: IgxDragDirective, elementsAtPoint: any[]): number {\n        let insertIndex = -1;\n        const dropChildren = Array.prototype.slice.call(this.element.nativeElement.children);\n        if (!dropChildren.length) {\n            return insertIndex;\n        }\n\n        let i = 0;\n        let childUnder = null;\n        while (!childUnder && i < elementsAtPoint.length) {\n            if (elementsAtPoint[i].parentElement === this.element.nativeElement) {\n                childUnder = elementsAtPoint[i];\n            }\n            i++;\n        }\n\n        const draggedElemIndex = dropChildren.indexOf(draggedDir.element.nativeElement);\n        insertIndex = dropChildren.indexOf(childUnder);\n        if (draggedElemIndex !== -1 && draggedElemIndex < insertIndex) {\n            insertIndex++;\n        }\n\n        return insertIndex;\n    }\n}\n\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxDragDirective, IgxDropDirective, IgxDragHandleDirective],\n    exports: [IgxDragDirective, IgxDropDirective, IgxDragHandleDirective]\n})\nexport class IgxDragDropModule { }\n","import { Renderer2 } from '@angular/core';\nimport { IgxDragDirective, IgxDropDirective } from './drag-drop.directive';\n\n\nexport interface IDropStrategy {\n    dropAction: (drag: IgxDragDirective, drop: IgxDropDirective, atIndex: number) => void;\n}\n\n// @dynamic\nexport class IgxDefaultDropStrategy implements IDropStrategy {\n\n    dropAction(drag: IgxDragDirective, drop: IgxDropDirective, atIndex: number) { }\n}\n\n// @dynamic\nexport class IgxAppendDropStrategy implements IDropStrategy {\n\n    constructor(private _renderer: Renderer2) { }\n\n    dropAction(drag: IgxDragDirective, drop: IgxDropDirective, atIndex: number) {\n        const dragElement = drag.element.nativeElement;\n        const dropAreaElement = drop.element.nativeElement;\n        this._renderer.removeChild(dragElement.parentNode, dragElement);\n        this._renderer.appendChild(dropAreaElement, dragElement);\n    }\n}\n\n// @dynamic\nexport class IgxPrependDropStrategy implements IDropStrategy {\n\n    constructor(private _renderer: Renderer2) { }\n\n    dropAction(drag: IgxDragDirective, drop: IgxDropDirective, atIndex: number) {\n        const dragElement = drag.element.nativeElement;\n        const dropAreaElement = drop.element.nativeElement;\n        this._renderer.removeChild(dragElement.parentNode, dragElement);\n        if (dropAreaElement.children.length) {\n            this._renderer.insertBefore(dropAreaElement, dragElement, dropAreaElement.children[0]);\n        } else {\n            this._renderer.appendChild(dropAreaElement, dragElement);\n        }\n    }\n}\n\n// @dynamic\nexport class IgxInsertDropStrategy implements IDropStrategy {\n\n    constructor(private _renderer: Renderer2) { }\n\n    dropAction(drag: IgxDragDirective, drop: IgxDropDirective, atIndex: number) {\n        if (drag.element.nativeElement.parentElement === drop.element.nativeElement && atIndex === -1) {\n            return;\n        }\n\n        const dragElement = drag.element.nativeElement;\n        const dropAreaElement = drop.element.nativeElement;\n        this._renderer.removeChild(dragElement.parentNode, dragElement);\n        if (atIndex !== -1 && dropAreaElement.children.length > atIndex) {\n            this._renderer.insertBefore(dropAreaElement, dragElement, dropAreaElement.children[atIndex]);\n        } else {\n            this._renderer.appendChild(dropAreaElement, dragElement);\n        }\n    }\n}\n","import { Directive, ElementRef, HostBinding } from '@angular/core';\n\n@Directive({\n    selector: '[igxDragHandle]'\n})\nexport class IgxDragHandleDirective {\n\n    @HostBinding('class.igx-drag__handle')\n    public baseClass = true;\n\n    constructor(public element: ElementRef<any>) {}\n}\n","import {\n    Component,\n    EventEmitter,\n    HostBinding,\n    Input,\n    Output,\n    ViewChild,\n    ElementRef\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { isIE, IBaseEventArgs } from '../core/utils';\nimport { EditorProvider } from '../core/edit-provider';\n\nexport interface IChangeRadioEventArgs extends IBaseEventArgs {\n    value: any;\n    radio: IgxRadioComponent;\n}\n\nexport enum RadioLabelPosition {\n    BEFORE = 'before',\n    AFTER = 'after'\n}\n\nlet nextId = 0;\nconst noop = () => { };\n/**\n * **Ignite UI for Angular Radio Button** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/radio_button.html)\n *\n * The Ignite UI Radio Button allows the user to select a single option from an available set of options that are listed side by side.\n *\n * Example:\n * ```html\n * <igx-radio>\n *   Simple radio button\n * </igx-radio>\n * ```\n */\n@Component({\n    providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: IgxRadioComponent, multi: true }],\n    selector: 'igx-radio',\n    templateUrl: 'radio.component.html'\n})\n\nexport class IgxRadioComponent implements ControlValueAccessor, EditorProvider {\n    /**\n     * Returns reference to native radio element.\n     * ```typescript\n     * let radioElement =  this.radio.nativeRadio;\n     * ```\n     * @memberof IgxSwitchComponent\n     */\n    @ViewChild('radio', { static: true }) public nativeRadio: ElementRef;\n    /**\n     * Returns reference to native label element.\n     * ```typescript\n     * let labelElement =  this.radio.nativeLabel;\n     * ```\n     * @memberof IgxSwitchComponent\n     */\n    @ViewChild('nativeLabel', { static: true }) public nativeLabel;\n    /**\n     * Returns reference to the label placeholder element.\n     * ```typescript\n     * let labelPlaceholder =  this.radio.placeholderLabel;\n     * ```\n     * @memberof IgxSwitchComponent\n     */\n    @ViewChild('placeholderLabel', { static: true }) public placeholderLabel;\n\n    /**\n     * Sets/gets the `id` of the radio component.\n     * If not set, the `id` of the first radio component will be `\"igx-radio-0\"`.\n     * ```html\n     * <igx-radio id = \"my-first-radio\"></igx-radio>\n     * ```\n     * ```typescript\n     * let radioId =  this.radio.id;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @HostBinding('attr.id')\n    @Input() public id = `igx-radio-${nextId++}`;\n    /**\n     * Sets/gets the id of the `label` element in the radio component.\n     * If not set, the id of the `label` in the first radio component will be `\"igx-radio-0-label\"`.\n     * ```html\n     * <igx-radio labelId = \"Label1\"></igx-radio>\n     * ```\n     * ```typescript\n     * let labelId =  this.radio.labelId;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @Input() public labelId = `${this.id}-label`;\n    /**\n     * Sets/gets the position of the `label` in the radio component.\n     * If not set, `labelPosition` will have value `\"after\"`.\n     * ```html\n     * <igx-radio labelPosition = \"before\"></igx-radio>\n     * ```\n     * ```typescript\n     * let labelPosition =  this.radio.labelPosition;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @Input() public labelPosition: RadioLabelPosition | string = 'after';\n    /**\n     * Sets/gets the `value` attribute.\n     * ```html\n     * <igx-radio [value] = \"'radioButtonValue'\"></igx-radio>\n     * ```\n     * ```typescript\n     * let value =  this.radio.value;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @Input() public value: any;\n    /**\n     * Sets/gets the `name` attribute of the radio component.\n     * ```html\n     * <igx-radio name = \"Radio1\"></igx-radio>\n     *  ```\n     * ```typescript\n     * let name =  this.radio.name;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @Input() public name: string;\n    /**\n     * Sets the value of the `tabindex` attribute.\n     * ```html\n     * <igx-radio [tabindex] = \"1\"></igx-radio>\n     * ```\n     * ```typescript\n     * let tabIndex =  this.radio.tabindex;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @Input() public tabindex: number = null;\n    /**\n     * Enables/disables the ripple effect on the radio button..\n     * If not set, the `disableRipple` will have value `false`.\n     * ```html\n     * <igx-radio [disableRipple] = \"true\"></igx-radio>\n     * ```\n     * ```typescript\n     * let isDisabledRipple =  this.radio.disableRipple;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @Input() public disableRipple = false;\n    /**\n     * Sets/gets whether the radio button is required.\n     * If not set, `required` will have value `false`.\n     * ```html\n     * <igx-radio [required] = \"true\"></igx-radio>\n     * ```\n     * ```typescript\n     * let isRequired =  this.radio.required;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @Input() public required = false;\n    /**\n     * Sets/gets the `aria-labelledby` attribute of the radio component.\n     * If not set, the `aria-labelledby` will be equal to the value of `labelId` attribute.\n     * ```html\n     * <igx-radio aria-labelledby = \"Radio1\"></igx-radio>\n     * ```\n     * ```typescript\n     * let ariaLabelledBy = this.radio.ariaLabelledBy;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @Input('aria-labelledby')\n    public ariaLabelledBy = this.labelId;\n    /**\n     * Sets/gets the `aria-label` attribute of the radio component.\n     * ```html\n     * <igx-radio aria-label = \"Radio1\"></igx-radio>\n     * ```\n     * ```typescript\n     * let ariaLabel =  this.radio.ariaLabel;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @Input('aria-label')\n    public ariaLabel: string | null = null;\n    /**\n     * An event that is emitted after the radio `value` is changed.\n     * Provides references to the `IgxRadioComponent` and the `value` property as event arguments.\n     * @memberof IgxRadioComponent\n     */\n    @Output()\n    readonly change: EventEmitter<IChangeRadioEventArgs> = new EventEmitter<IChangeRadioEventArgs>();\n    /**\n     * Returns the class of the radio component.\n     * ```typescript\n     * let radioClass = this.radio.cssClass;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @HostBinding('class.igx-radio')\n    public cssClass = 'igx-radio';\n    /**\n     * Sets/gets  the `checked` attribute.\n     * Default value is `false`.\n     * ```html\n     * <igx-radio [checked] = \"true\"></igx-radio>\n     * ```\n     * ```typescript\n     * let isChecked =  this.radio.checked;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @HostBinding('class.igx-radio--checked')\n    @Input() public checked = false;\n    /**\n     * Sets/gets  the `disabled` attribute.\n     * Default value is `false`.\n     * ```html\n     * <igx-radio [disabled] = \"true\"></igx-radio>\n     * ```\n     * ```typescript\n     * let isDisabled =  this.radio.disabled;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @HostBinding('class.igx-radio--disabled')\n    @Input() public disabled = false;\n    /**\n     * Sets/gets whether the radio component is on focus.\n     * Default value is `false`.\n     * ```typescript\n     * this.radio.focus = true;\n     * ```\n     * ```typescript\n     * let isFocused =  this.radio.focused;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @HostBinding('class.igx-radio--focused')\n    public focused = false;\n    /**\n     *@hidden\n     */\n    public inputId = `${this.id}-input`;\n    /**\n     *@hidden\n     */\n    protected _value: any = null;\n\n    constructor() { }\n    /**\n     *@hidden\n     */\n    private _onTouchedCallback: () => void = noop;\n    /**\n     *@hidden\n     */\n    private _onChangeCallback: (_: any) => void = noop;\n    /**\n     *@hidden\n     */\n    public _onRadioChange(event) {\n        event.stopPropagation();\n    }\n    /**\n     *@hidden\n     */\n    public _onRadioClick(event) {\n        event.stopPropagation();\n        this.select();\n\n        if (isIE()) {\n            this.nativeRadio.nativeElement.blur();\n        }\n    }\n    /**\n     *@hidden\n     */\n    public _onLabelClick() {\n        this.select();\n    }\n    /**\n     * Selects the current radio button.\n     * ```typescript\n     * this.radio.select();\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    public select() {\n        if (this.disabled) {\n            return;\n        }\n\n        this.checked = true;\n        this.focused = false;\n        this.change.emit({ value: this.value, radio: this });\n        this._onChangeCallback(this.value);\n    }\n    /**\n     * Checks whether the provided value is consistent to the current radio button.\n     * If it is, the checked attribute will have value `true`;\n     * ```typescript\n     * this.radio.writeValue('radioButtonValue');\n     * ```\n     */\n    public writeValue(value: any) {\n        this._value = value;\n        this.checked = (this._value === this.value);\n    }\n    /** @hidden */\n    getEditElement() {\n        return this.nativeRadio.nativeElement;\n    }\n    /**\n     *@hidden\n     */\n    public get labelClass(): string {\n        switch (this.labelPosition) {\n            case RadioLabelPosition.BEFORE:\n                return `${this.cssClass}__label--before`;\n            case RadioLabelPosition.AFTER:\n            default:\n                return `${this.cssClass}__label`;\n        }\n    }\n    /**\n     *@hidden\n     */\n    public onFocus() {\n        this.focused = true;\n    }\n    /**\n     *@hidden\n     */\n    public onBlur() {\n        this.focused = false;\n        this._onTouchedCallback();\n    }\n    /**\n     *@hidden\n     */\n    public registerOnChange(fn: (_: any) => void) { this._onChangeCallback = fn; }\n    /**\n     *@hidden\n     */\n    public registerOnTouched(fn: () => void) { this._onTouchedCallback = fn; }\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    Directive,\n    ElementRef,\n    EventEmitter,\n    Input,\n    NgModule,\n    OnChanges,\n    Output,\n    Pipe,\n    PipeTransform,\n    Renderer2,\n    SimpleChanges\n} from '@angular/core';\n\nexport class IgxFilterOptions {\n    // Input text value that will be used as a filtering pattern (matching condition is based on it)\n    public inputValue = '';\n\n    // Item property, which value should be used for filtering\n    public key: string;\n\n    // Represent items of the list. It should be used to handle decalaratevely defined widgets\n    public items: any[];\n\n    // Function - get value to be tested from the item\n    // item - single item of the list to be filtered\n    // key - property name of item, which value should be tested\n    // Default behavior - returns \"key\"- named property value of item if key si provided,\n    // otherwise textContent of the item's html element\n    public get_value(item: any, key: string): string {\n        let result = '';\n\n        if (key && item[key]) {\n            result = item[key].toString();\n        } else if (item.element) {\n            if (item.element.nativeElement) {\n                result = item.element.nativeElement.textContent.trim();\n            // Check if element doesn't return the DOM element directly\n            } else if (item.element.textContent) {\n                result = item.element.textContent.trim();\n            }\n        }\n\n        return result;\n    }\n\n    // Function - formats the original text before matching process\n    // Default behavior - returns text to lower case\n    public formatter(valueToTest: string): string {\n        return valueToTest.toLowerCase();\n    }\n\n    // Function - determines whether the item met the condition\n    // valueToTest - text value that should be tested\n    // inputValue - text value from input that condition is based on\n    // Default behavior - \"contains\"\n    public matchFn(valueToTest: string, inputValue: string): boolean {\n        return valueToTest.indexOf(inputValue && inputValue.toLowerCase() || '') > -1;\n    }\n\n    // Function - executed after matching test for every matched item\n    // Default behavior - shows the item\n    public metConditionFn(item: any) {\n        if (item.hasOwnProperty('hidden')) {\n            item.hidden = false;\n        }\n    }\n\n    // Function - executed for every NOT matched item after matching test\n    // Default behavior - hides the item\n    public overdueConditionFn(item: any) {\n        if (item.hasOwnProperty('hidden')) {\n            item.hidden = true;\n        }\n    }\n}\n\n\n@Directive({\n    selector: '[igxFilter]'\n})\nexport class IgxFilterDirective implements OnChanges {\n    @Output() public filtering = new EventEmitter(false); // synchronous event emitter\n    @Output() public filtered = new EventEmitter();\n\n    @Input('igxFilter') public filterOptions: IgxFilterOptions;\n\n    constructor(private element: ElementRef, renderer: Renderer2) {\n    }\n\n    public ngOnChanges(changes: SimpleChanges) {\n        // Detect only changes of input value\n        if (changes.filterOptions &&\n            changes.filterOptions.currentValue &&\n            changes.filterOptions.currentValue.inputValue !== undefined &&\n            changes.filterOptions.previousValue &&\n            changes.filterOptions.currentValue.inputValue !== changes.filterOptions.previousValue.inputValue) {\n            this.filter();\n        }\n    }\n\n    private filter() {\n        if (!this.filterOptions.items) {\n            return;\n        }\n\n        const args = { cancel: false, items: this.filterOptions.items };\n        this.filtering.emit(args);\n\n        if (args.cancel) {\n            return;\n        }\n\n        const pipe = new IgxFilterPipe();\n\n        const filtered = pipe.transform(this.filterOptions.items, this.filterOptions);\n        this.filtered.emit({ filteredItems: filtered });\n    }\n}\n\n@Pipe({\n    name: 'igxFilter',\n    pure: false\n})\n\nexport class IgxFilterPipe implements PipeTransform {\n    public transform(items: any[],\n                     // options - initial settings of filter functionality\n                     options: IgxFilterOptions) {\n\n        let result = [];\n\n        if (!items || !items.length || !options) {\n            return;\n        }\n\n        if (options.items) {\n            items = options.items;\n        }\n\n        result = items.filter((item: any) => {\n            const match = options.matchFn(options.formatter(options.get_value(item, options.key)), options.inputValue);\n\n            if (match) {\n                if (options.metConditionFn) {\n                    options.metConditionFn(item);\n                }\n            } else {\n                if (options.overdueConditionFn) {\n                    options.overdueConditionFn(item);\n                }\n            }\n\n            return match;\n        });\n\n        return result;\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxFilterDirective, IgxFilterPipe],\n    exports: [IgxFilterDirective, IgxFilterPipe],\n    imports: [CommonModule]\n})\nexport class IgxFilterModule {\n}\n","import { Directive, ElementRef, Input, NgModule, Optional, Inject, Self } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { EditorProvider } from '../../core/edit-provider';\n\n@Directive({\n    exportAs: 'igxFocus',\n    selector: '[igxFocus]'\n})\nexport class IgxFocusDirective {\n\n    private focusState = true;\n    /**\n     * Returns the state of the igxFocus.\n     * ```typescript\n     * @ViewChild('focusContainer', {read: IgxFocusDirective})\n     * public igxFocus: IgxFocusDirective;\n     * let isFocusOn = this.igxFocus.focused;\n     * ```\n     * @memberof IgxFocusDirective\n     */\n    @Input('igxFocus')\n    get focused(): boolean {\n        return this.focusState;\n    }\n    /**\n     * Sets the state of the igxFocus.\n     * ```html\n     * <igx-input-group >\n     *  <input #focusContainer igxInput [igxFocus]=\"true\"/>\n     * </igx-input-group>\n     * ```\n     * @memberof IgxFocusDirective\n     */\n    set focused(val: boolean) {\n        this.focusState = val;\n        this.trigger();\n    }\n    /**\n     * Gets the native element of the igxFocus.\n     * ```typescript\n     * @ViewChild('focusContainer', {read: IgxFocusDirective})\n     * public igxFocus: IgxFocusDirective;\n     * let igxFocusNativeElement = this.igxFocus.nativeElement;\n     * ```\n     * @memberof IgxFocusDirective\n     */\n    get nativeElement() {\n        if (this.comp && this.comp[0] && this.comp[0].getEditElement) {\n            return (this.comp[0] as EditorProvider).getEditElement();\n        }\n        return this.element.nativeElement;\n    }\n\n    constructor(private element: ElementRef, @Inject(NG_VALUE_ACCESSOR) @Self() @Optional() private comp?: any[]) { }\n    /**\n     * Triggers the igxFocus state.\n     * ```typescript\n     * @ViewChild('focusContainer', {read: IgxFocusDirective})\n     * public igxFocus: IgxFocusDirective;\n     * this.igxFocus.trigger();\n     * ```\n     * @memberof IgxFocusDirective\n     */\n    trigger() {\n        if (this.focusState) {\n            requestAnimationFrame(() => this.nativeElement.focus());\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxFocusDirective],\n    exports: [IgxFocusDirective]\n})\nexport class IgxFocusModule { }\n","import { Directive, HostBinding, Input, NgModule } from '@angular/core';\n\n@Directive({\n    selector: '[igxLayout]'\n})\nexport class IgxLayoutDirective {\n    /**\n     * Sets the default flow direction of the container's children.\n     *\n     * Defaults to `rows`.\n     *\n     * ```html\n     *  <div\n     *   igxLayout\n     *   igxLayoutDir=\"row\">\n     *    <div igxFlex>1</div>\n     *    <div igxFlex>2</div>\n     *    <div igxFlex>3</div>\n     *  </div>\n     * ```\n     */\n    @Input('igxLayoutDir') public dir = 'row';\n\n    /**\n     * Defines the direction flex children are placed in the flex container.\n     *\n     * When set to `true`, the `rows` direction goes right to left and `columns` goes bottom to top.\n     *\n     * ```html\n     * <div\n     *   igxLayout\n     *   igxLayoutReverse=\"true\">\n     *    <div igxFlex>1</div>\n     *    <div igxFlex>2</div>\n     *    <div igxFlex>3</div>\n     * </div>\n     * ```\n     */\n    @Input('igxLayoutReverse') public reverse = false;\n\n    /**\n     * By default the immediate children will all try to fit onto one line.\n     *\n     * The default value `nowrap` sets this behavior.\n     *\n     * Other accepted values are `wrap` and `wrap-reverse`.\n     *\n     * ```html\n     * <div\n     *   igxLayout\n     *   igxLayoutDir=\"row\"\n     *   igxLayoutWrap=\"wrap\">\n     *    <div igxFlex igxFlexGrow=\"0\">1</div>\n     *    <div igxFlex igxFlexGrow=\"0\">2</div>\n     *    <div igxFlex igxFlexGrow=\"0\">3</div>\n     * </div>\n     * ```\n     */\n    @Input('igxLayoutWrap') public wrap = 'nowrap';\n\n    /**\n     * Defines the alignment along the main axis.\n     *\n     * Defaults to `flex-start` which packs the children toward the start line.\n     *\n     * Other possible values are `flex-end`, `center`, `space-between`, `space-around`.\n     *\n     * ```html\n     * <div\n     *   igxLayout\n     *   igxLayoutDir=\"column\"\n     *   igxLayoutJustify=\"space-between\">\n     *    <div>1</div>\n     *    <div>2</div>\n     *    <div>3</div>\n     * </div>\n     * ```\n     */\n    @Input('igxLayoutJustify') public justify = 'flex-start';\n\n    /**\n     * Defines the default behavior for how children are laid out along the corss axis of the current line.\n     *\n     * Defaults to `flex-start`.\n     *\n     * Other possible values are `flex-end`, `center`, `baseline`, and `stretch`.\n     *\n     * ```html\n     * <div\n     *   igxLayout\n     *   igxLayoutDir=\"column\"\n     *   igxLayoutItemAlign=\"start\">\n     *    <div igxFlex igxFlexGrow=\"0\">1</div>\n     *    <div igxFlex igxFlexGrow=\"0\">2</div>\n     *    <div igxFlex igxFlexGrow=\"0\">3</div>\n     * </div>\n     * ```\n     */\n    @Input('igxLayoutItemAlign') public itemAlign = 'stretch';\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.display') public display = 'flex';\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.flex-wrap') get flexwrap() { return this.wrap; }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.justify-content') get justifycontent() { return this.justify; }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.align-items') get align() { return this.itemAlign; }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.flex-direction')\n    get direction() {\n        if (this.reverse) {\n            return (this.dir === 'row') ? 'row-reverse' : 'column-reverse';\n        }\n        return (this.dir === 'row') ? 'row' : 'column';\n    }\n}\n\n@Directive({\n    selector: '[igxFlex]'\n})\nexport class IgxFlexDirective {\n\n    /**\n     * Applies the `grow` attribute to an element that uses the directive.\n     *\n     * Default value is `1`.\n     *\n     * ```html\n     * <div>\n     *    <div igxFlex igxFlexGrow=\"0\">Content1</div>\n     *    <div igxFlex igxFlexGrow=\"1\">Content2</div>\n     *    <div igxFlex igxFlexGrow=\"0\">Content3</div>\n     * </div>\n     * ```\n     */\n    @Input('igxFlexGrow') public grow = 1;\n\n    /**\n     * Applies the `shrink` attribute to an element that uses the directive.\n     *\n     * Default value is `1`.\n     *\n     * ```html\n     * <div>\n     *    <div igxFlex igxFlexShrink=\"1\">Content1</div>\n     *    <div igxFlex igxFlexShrink=\"0\">Content2</div>\n     *    <div igxFlex igxFlexShrink=\"1\">Content3</div>\n     * </div>\n     * ```\n     */\n    @Input('igxFlexShrink') public shrink = 1;\n\n    /**\n     * Applies the directive to an element.\n     *\n     * Possible values include `igxFlexGrow`, `igxFlexShrink`, `igxFlexOrder`, `igxFlexBasis`.\n     *\n     * ```html\n     * <div igxFlex>Content</div>\n     * ```\n     */\n    @Input('igxFlex') public flex = '';\n\n    /**\n     * Applies the `order` attribute to an element that uses the directive.\n     *\n     * Default value is `0`.\n     *\n     * ```html\n     * <div>\n     *    <div igxFlex igxFlexOrder=\"1\">Content1</div>\n     *    <div igxFlex igxFlexOrder=\"0\">Content2</div>\n     *    <div igxFlex igxFlexOrder=\"2\">Content3</div>\n     * </div>\n     * ```\n     */\n    @Input('igxFlexOrder') public order = 0;\n\n    /**\n     * Applies the `flex-basis` attribute to an element that uses the directive.\n     *\n     * Default value is `auto`.\n     *\n     * Other possible values include `content`, `max-content`, `min-content`, `fit-content`.\n     *\n     * ```html\n     * <div igxFlex igxFlexBasis=\"fit-content\">Content</div>\n     * ```\n     */\n    @Input('igxFlexBasis') public basis = 'auto';\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.flex')\n    get style() {\n        if (this.flex) {\n            return `${this.flex}`;\n        }\n        return `${this.grow} ${this.shrink} ${this.basis}`;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.order')\n    get itemorder() {\n        return this.order || 0;\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxFlexDirective, IgxLayoutDirective],\n    exports: [IgxFlexDirective, IgxLayoutDirective]\n})\nexport class IgxLayoutModule { }\n","/**\n * @hidden\n */\nexport const MASK_FLAGS = [ 'C', '&', 'a', 'A', '?', 'L', '9', '0', '#' ];\n\n/**\n * @hidden\n */\nexport const KEYS = {\n    Ctrl : 17,\n    Z : 90,\n    Y : 89,\n    X : 88,\n    BACKSPACE : 8,\n    DELETE : 46\n  };\n\n\n/**\n * @hidden\n */\nexport class MaskHelper {\n    private _cursor;\n    public get cursor() {\n        return this._cursor;\n    }\n    public data: boolean;\n\n    public parseValueByMask(value, maskOptions, cursor): string {\n        let inputValue: string = value;\n        const mask: string = maskOptions.format;\n        const literals: Map<number, string> = this.getMaskLiterals(mask);\n        const literalKeys: number[] = Array.from(literals.keys());\n        const nonLiteralIndeces: number[] = this.getNonLiteralIndeces(mask, literalKeys);\n\n        if (inputValue.length < mask.length) { // BACKSPACE, DELETE\n            if (inputValue === '' && cursor === -1) {\n                this._cursor = 0;\n                return this.parseValueByMaskOnInit(value, maskOptions);\n            } // workaround for IE 'x' button\n\n            if (nonLiteralIndeces.indexOf(cursor + 1) !== -1) {\n                inputValue = this.insertCharAt(inputValue, cursor + 1, maskOptions.promptChar);\n                this._cursor = cursor + 1;\n            } else {\n                inputValue = this.insertCharAt(inputValue, cursor + 1, mask[cursor + 1]);\n                this._cursor = cursor + 1;\n                for (let i = this._cursor; i < 0; i--) {\n                    if (literalKeys.indexOf(this._cursor) !== -1) {\n                        this._cursor--;\n                    } else {\n                        break;\n                    }\n                }\n            }\n        } else {\n            const char = inputValue[cursor];\n            let isCharValid = this.validateCharOnPostion(char, cursor, mask);\n            if (nonLiteralIndeces.indexOf(cursor) !== -1) {\n                inputValue = this.replaceCharAt(inputValue, cursor, '');\n                if (isCharValid) {\n                    inputValue = this.replaceCharAt(inputValue, cursor, char);\n                    this._cursor = cursor + 1;\n                } else {\n                    this._cursor = cursor;\n                }\n            } else {\n                inputValue = this.replaceCharAt(inputValue, cursor, '');\n                this._cursor = ++cursor;\n                for (let i = cursor; i < mask.length; i++) {\n                    if (literalKeys.indexOf(this._cursor) !== -1) {\n                        this._cursor = ++cursor;\n                    } else {\n                        isCharValid = this.validateCharOnPostion(char, cursor, mask);\n                        if (isCharValid) {\n                            inputValue = this.replaceCharAt(inputValue, cursor, char);\n                            this._cursor = ++cursor;\n                            break;\n                        } else {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n\n        return inputValue;\n    }\n\n    public parseMask(maskOptions): string {\n        let outputVal = '';\n        const mask: string = maskOptions.format;\n        const literals: Map<number, string> = this.getMaskLiterals(mask);\n\n        for (const maskSym of mask) {\n            outputVal += maskOptions.promptChar;\n        }\n\n        literals.forEach((val: string, key: number) => {\n            outputVal = this.replaceCharAt(outputVal, key, val);\n        });\n\n        return outputVal;\n    }\n\n    public parseValueByMaskOnInit(inputVal, maskOptions): string {\n        let outputVal = '';\n        let value = '';\n        const mask: string = maskOptions.format;\n        const literals: Map<number, string> = this.getMaskLiterals(mask);\n        const literalKeys: number[] = Array.from(literals.keys());\n        const nonLiteralIndeces: number[] = this.getNonLiteralIndeces(mask, literalKeys);\n        const literalValues: string[] = Array.from(literals.values());\n\n        if (inputVal != null) {\n            value = inputVal.toString();\n        }\n\n        for (const maskSym of mask) {\n            outputVal += maskOptions.promptChar;\n        }\n\n        literals.forEach((val: string, key: number) => {\n            outputVal = this.replaceCharAt(outputVal, key, val);\n        });\n\n        if (!value) {\n            return outputVal;\n        }\n\n        const nonLiteralValues: string[] = this.getNonLiteralValues(value, literalValues);\n\n        for (let i = 0; i < nonLiteralValues.length; i++) {\n            const char = nonLiteralValues[i];\n            const isCharValid = this.validateCharOnPostion(char, nonLiteralIndeces[i], mask);\n\n            if (!isCharValid && char !== maskOptions.promptChar) {\n                nonLiteralValues[i] = maskOptions.promptChar;\n            }\n        }\n\n        if (nonLiteralValues.length > nonLiteralIndeces.length) {\n            nonLiteralValues.splice(nonLiteralIndeces.length);\n        }\n\n        let pos = 0;\n        for (const nonLiteralValue of nonLiteralValues) {\n            const char = nonLiteralValue;\n            outputVal = this.replaceCharAt(outputVal, nonLiteralIndeces[pos++], char);\n        }\n\n        return outputVal;\n    }\n\n    public restoreValueFromMask(value, maskOptions): string {\n        let outputVal = '';\n        const mask: string = maskOptions.format;\n        const literals: Map<number, string> = this.getMaskLiterals(mask);\n        const literalValues: string[] = Array.from(literals.values());\n\n        for (const val of value) {\n            if (literalValues.indexOf(val) === -1) {\n                if (val !== maskOptions.promptChar) {\n                    outputVal += val;\n                }\n            }\n        }\n\n        return outputVal;\n    }\n\n    public parseValueByMaskUponSelection(value, maskOptions, cursor, selection): string {\n        let isCharValid: boolean;\n        let inputValue: string = value;\n        const char: string = inputValue[cursor];\n        const mask: string = maskOptions.format;\n        const literals: Map<number, string> = this.getMaskLiterals(mask);\n        const literalKeys: number[] = Array.from(literals.keys());\n        const nonLiteralIndeces: number[] = this.getNonLiteralIndeces(mask, literalKeys);\n\n        if (!this.data) {\n            this._cursor = cursor < 0 ? ++cursor : cursor;\n            if (nonLiteralIndeces.indexOf(this._cursor) !== -1) {\n                isCharValid = this.validateCharOnPostion(char, this._cursor, mask);\n                inputValue = isCharValid ? this.replaceCharAt(inputValue, this._cursor++, char) :\n                    inputValue = this.replaceCharAt(inputValue, this._cursor++, maskOptions.promptChar);\n                selection--;\n                if (selection > 0) {\n                    for (let i = 0; i < selection; i++) {\n                        cursor++;\n                        inputValue = nonLiteralIndeces.indexOf(cursor) !== -1 ?\n                            this.insertCharAt(inputValue, cursor, maskOptions.promptChar) :\n                            this.insertCharAt(inputValue, cursor, mask[cursor]);\n                    }\n                }\n            } else {\n                inputValue = this.replaceCharAt(inputValue, this._cursor, mask[this._cursor]);\n                this._cursor++;\n                selection--;\n                let isMarked = false;\n                if (selection > 0) {\n                    cursor = this._cursor;\n                    for (let i = 0; i < selection; i++) {\n                        if (nonLiteralIndeces.indexOf(cursor) !== -1) {\n                            isCharValid = this.validateCharOnPostion(char, cursor, mask);\n                            if (isCharValid && !isMarked) {\n                                inputValue = this.insertCharAt(inputValue, cursor, char);\n                                cursor++;\n                                this._cursor++;\n                                isMarked = true;\n                            } else {\n                                inputValue = this.insertCharAt(inputValue, cursor, maskOptions.promptChar);\n                                cursor++;\n                            }\n                        } else {\n                            inputValue = this.insertCharAt(inputValue, cursor, mask[cursor]);\n                            if (cursor === this._cursor) {\n                                this._cursor++;\n                            }\n                            cursor++;\n                        }\n                    }\n                }\n            }\n        } else {\n            if (inputValue === '' && cursor === -1) {\n                this._cursor = 0;\n                return this.parseValueByMaskOnInit(value, maskOptions);\n            } // workaround for IE 'x' button\n\n            if (this._cursor < 0) {\n                this._cursor++;\n                cursor++;\n            }\n            cursor++;\n            this._cursor = cursor;\n            for (let i = 0; i < selection; i++) {\n                if (nonLiteralIndeces.indexOf(cursor) !== -1) {\n                    inputValue = this.insertCharAt(inputValue, cursor, maskOptions.promptChar);\n                    cursor++;\n                } else {\n                    inputValue = this.insertCharAt(inputValue, cursor, mask[cursor]);\n                    cursor++;\n                }\n            }\n        }\n\n        return inputValue;\n    }\n\n    public parseValueByMaskUponCopyPaste(value, maskOptions, cursor, clipboardData, selection): string {\n        let inputValue: string = value;\n        const mask: string = maskOptions.format;\n        const literals: Map<number, string> = this.getMaskLiterals(mask);\n        const literalKeys: number[] = Array.from(literals.keys());\n        const nonLiteralIndeces: number[] = this.getNonLiteralIndeces(mask, literalKeys);\n\n        const selectionEnd = cursor + selection;\n\n        this._cursor = cursor;\n        for (const clipboardSym of clipboardData) {\n            const char = clipboardSym;\n\n            if (this._cursor > mask.length) {\n                return inputValue;\n            }\n\n            if (nonLiteralIndeces.indexOf(this._cursor) !== -1) {\n                const isCharValid = this.validateCharOnPostion(char, this._cursor, mask);\n                if (isCharValid) {\n                    inputValue = this.replaceCharAt(inputValue, this._cursor++, char);\n                }\n            } else {\n                for (let i = cursor; i < mask.length; i++) {\n                    if (literalKeys.indexOf(this._cursor) !== -1) {\n                        this._cursor++;\n                    } else {\n                        const isCharValid = this.validateCharOnPostion(char, this._cursor, mask);\n                        if (isCharValid) {\n                            inputValue = this.replaceCharAt(inputValue, this._cursor++, char);\n                        }\n                        break;\n                    }\n                }\n            }\n\n            selection--;\n        }\n\n        if (selection > 0) {\n            for (let i = this._cursor; i < selectionEnd; i++) {\n                if (literalKeys.indexOf(this._cursor) !== -1) {\n                    this._cursor++;\n                } else {\n                    inputValue = this.replaceCharAt(inputValue, this._cursor++, maskOptions.promptChar);\n                }\n            }\n        }\n\n        return inputValue;\n    }\n\n    private validateCharOnPostion(inputChar: string, position: number, mask: string): boolean {\n        let regex: RegExp;\n        let isValid: boolean;\n        const letterOrDigitRegEx = '[\\\\d\\\\u00C0-\\\\u1FFF\\\\u2C00-\\\\uD7FFa-zA-Z]';\n        const letterDigitOrSpaceRegEx = '[\\\\d\\\\u00C0-\\\\u1FFF\\\\u2C00-\\\\uD7FFa-zA-Z\\\\u0020]';\n        const letterRegEx = '[\\\\u00C0-\\\\u1FFF\\\\u2C00-\\\\uD7FFa-zA-Z]';\n        const letteSpaceRegEx = '[\\\\u00C0-\\\\u1FFF\\\\u2C00-\\\\uD7FFa-zA-Z\\\\u0020]';\n        const digitRegEx = '[\\\\d]';\n        const digitSpaceRegEx = '[\\\\d\\\\u0020]';\n        const digitSpecialRegEx = '[\\\\d-\\\\+]';\n\n        switch (mask.charAt(position)) {\n            case 'C':\n                isValid = inputChar !== '';\n                break;\n            case '&':\n                regex = new RegExp('[\\\\u0020]');\n                isValid = !regex.test(inputChar);\n                break;\n            case 'a':\n                regex = new RegExp(letterDigitOrSpaceRegEx);\n                isValid = regex.test(inputChar);\n                break;\n            case 'A':\n                regex = new RegExp(letterOrDigitRegEx);\n                isValid = regex.test(inputChar);\n                break;\n            case '?':\n                regex = new RegExp(letteSpaceRegEx);\n                isValid = regex.test(inputChar);\n                break;\n            case 'L':\n                regex = new RegExp(letterRegEx);\n                isValid = regex.test(inputChar);\n                break;\n            case '0':\n                regex = new RegExp(digitRegEx);\n                isValid = regex.test(inputChar);\n                break;\n            case '9':\n                regex = new RegExp(digitSpaceRegEx);\n                isValid = regex.test(inputChar);\n                break;\n            case '#':\n                regex = new RegExp(digitSpecialRegEx);\n                isValid = regex.test(inputChar);\n                break;\n            default: {\n                isValid = null;\n            }\n        }\n\n        return isValid;\n    }\n    private replaceCharAt(strValue: string, index: number, char: string): string {\n        if (strValue !== undefined) {\n            return strValue.substring(0, index) + char + strValue.substring(index + 1);\n        }\n    }\n    private insertCharAt(strValue: string, index: number, char: string): string {\n        if (strValue !== undefined) {\n            return strValue.substring(0, index) + char + strValue.substring(index);\n        }\n    }\n    private getMaskLiterals(mask: string): Map<number, string> {\n        const literals = new Map<number, string>();\n\n        for (let i = 0; i < mask.length; i++) {\n            const char = mask.charAt(i);\n            if (MASK_FLAGS.indexOf(char) === -1) {\n                literals.set(i, char);\n            }\n        }\n\n        return literals;\n    }\n    private getNonLiteralIndeces(mask: string, literalKeys: number[]): number[] {\n        const nonLiteralsIndeces: number[] = new Array();\n\n        for (let i = 0; i < mask.length; i++) {\n            if (literalKeys.indexOf(i) === -1) {\n                nonLiteralsIndeces.push(i);\n            }\n        }\n\n        return nonLiteralsIndeces;\n    }\n    private getNonLiteralValues(value: string, literalValues: string[]): string[] {\n        const nonLiteralValues: string[] = new Array();\n\n        for (const val of value) {\n            if (literalValues.indexOf(val) === -1) {\n                nonLiteralValues.push(val);\n            }\n        }\n\n        return nonLiteralValues;\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    Directive,\n    ElementRef,\n    EventEmitter,\n    HostListener,\n    Input,\n    NgModule,\n    OnInit,\n    Output,\n    PipeTransform\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { KEYS, MaskHelper } from './mask-helper';\nimport { isIE, IBaseEventArgs } from '../../core/utils';\n\nconst noop = () => { };\n\n@Directive({\n    providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: IgxMaskDirective, multi: true }],\n    selector: '[igxMask]'\n})\nexport class IgxMaskDirective implements OnInit, ControlValueAccessor {\n    /**\n     * Sets the input mask.\n     * ```html\n     * <input [igxMask] = \"'00/00/0000'\">\n     * ```\n     * @memberof IgxMaskDirective\n     */\n    @Input('igxMask')\n    public mask: string;\n\n    /**\n     * Sets the character representing a fillable spot in the input mask.\n     * Default value is \"'_'\".\n     * ```html\n     * <input [promptChar] = \"'/'\">\n     * ```\n     * @memberof IgxMaskDirective\n     */\n    @Input()\n    public promptChar: string;\n\n    /**\n     * Specifies if the bound value includes the formatting symbols.\n     * ```html\n     * <input [includeLiterals] = \"true\">\n     * ```\n     * @memberof IgxMaskDirective\n     */\n    @Input()\n    public includeLiterals: boolean;\n\n    /**\n     * Specifies a placeholder.\n     * ```html\n     * <input placeholder = \"enter text...\">\n     * ```\n     * @memberof IgxMaskDirective\n     */\n    @Input()\n    public set placeholder(val: string) {\n        this._placeholder = val;\n        this.nativeElement.setAttribute('placeholder', this._placeholder);\n    }\n\n    public get placeholder(): string {\n        return this._placeholder;\n    }\n\n    /**\n     * Specifies a pipe to be used on blur.\n     * ```html\n     * <input [displayValuePipe] = \"displayFormatPipe\">\n     * ```\n     * @memberof IgxMaskDirective\n     */\n    @Input()\n    public displayValuePipe: PipeTransform;\n\n    /**\n     * Specifies a pipe to be used on focus.\n     * ```html\n     * <input [focusedValuePipe] = \"inputFormatPipe\">\n     * ```\n     * @memberof IgxMaskDirective\n     */\n    @Input()\n    public focusedValuePipe: PipeTransform;\n\n    /**\n     *@hidden\n     */\n    @Input()\n    private dataValue: string;\n\n    /**\n     * Emits an event each time the value changes.\n     * Provides `rawValue: string` and `formattedValue: string` as event arguments.\n     * ```html\n     * <input (onValueChange) = \"onValueChange(rawValue: string, formattedValue: string)\">\n     * ```\n     */\n    @Output()\n    public onValueChange = new EventEmitter<IMaskEventArgs>();\n\n    /**\n     *@hidden\n     */\n    private get value() {\n        return this.nativeElement.value;\n    }\n\n    /**\n     *@hidden\n     */\n    private set value(val) {\n        this.nativeElement.value = val;\n    }\n\n    /**\n     *@hidden\n     */\n    private get nativeElement() {\n        return this.elementRef.nativeElement;\n    }\n\n    /**\n     *@hidden\n     */\n    private get selectionStart() {\n        return this.nativeElement.selectionStart;\n    }\n\n    /**\n     *@hidden\n     */\n    private get selectionEnd() {\n        return this.nativeElement.selectionEnd;\n    }\n\n    /**\n     *@hidden\n     */\n    private _ctrlDown: boolean;\n\n    /**\n     *@hidden\n     */\n    private _paste: boolean;\n\n    /**\n     *@hidden\n     */\n    private _selection: number;\n\n    /**\n     *@hidden\n     */\n    private _placeholder: string;\n\n    /**\n     *@hidden\n     */\n    private _maskOptions = {\n        format: '',\n        promptChar: ''\n    };\n\n    /**\n     *@hidden\n     */\n    private _key;\n\n    /**\n     *@hidden\n     */\n    private _cursorOnPaste;\n\n    /**\n     *@hidden\n     */\n    private _valOnPaste;\n\n    private _stopPropagation: boolean;\n\n    /**\n     *@hidden\n     */\n    private maskHelper: MaskHelper;\n\n    /**\n     *@hidden\n     */\n    private _onTouchedCallback: () => void = noop;\n\n    /**\n     *@hidden\n     */\n    private _onChangeCallback: (_: any) => void = noop;\n\n    constructor(private elementRef: ElementRef) {\n        this.maskHelper = new MaskHelper();\n    }\n\n    /**\n     *@hidden\n     */\n    public ngOnInit(): void {\n        if (this.promptChar && this.promptChar.length > 1) {\n            this._maskOptions.promptChar = this.promptChar = this.promptChar.substring(0, 1);\n        }\n\n        this._maskOptions.format = this.mask ? this.mask : 'CCCCCCCCCC';\n        this._maskOptions.promptChar = this.promptChar ? this.promptChar : '_';\n        this.nativeElement.setAttribute('placeholder', this.placeholder ? this.placeholder : this._maskOptions.format);\n    }\n\n    /**\n     *@hidden\n     */\n    @HostListener('keydown', ['$event'])\n    public onKeydown(event): void {\n        const key = event.keyCode || event.charCode;\n\n        if (isIE() && this._stopPropagation) {\n            this._stopPropagation = false;\n        }\n\n        if (key === KEYS.Ctrl) {\n            this._ctrlDown = true;\n        }\n\n        if ((this._ctrlDown && key === KEYS.Z) || (this._ctrlDown && key === KEYS.Y)) {\n            event.preventDefault();\n        }\n\n        this._key = key;\n        this._selection = Math.abs(this.selectionEnd - this.selectionStart);\n    }\n\n    /**\n     *@hidden\n     */\n    @HostListener('keyup', ['$event'])\n    public onKeyup(event): void {\n        const key = event.keyCode || event.charCode;\n\n        if (key === KEYS.Ctrl) {\n            this._ctrlDown = false;\n        }\n    }\n\n    /**\n     *@hidden\n     */\n    @HostListener('paste', ['$event'])\n    public onPaste(event): void {\n        this._paste = true;\n\n        this._valOnPaste = this.value;\n        this._cursorOnPaste = this.getCursorPosition();\n    }\n\n    /**\n     *@hidden\n     */\n    @HostListener('input', ['$event'])\n    public onInputChanged(event): void {\n        if (isIE() && this._stopPropagation) {\n            this._stopPropagation = false;\n            return;\n        }\n\n        if (this._paste) {\n            this._paste = false;\n\n            const clipboardData = this.value.substring(this._cursorOnPaste, this.getCursorPosition());\n            this.value = this.maskHelper.parseValueByMaskUponCopyPaste(\n                this._valOnPaste, this._maskOptions, this._cursorOnPaste, clipboardData, this._selection);\n\n            this.setCursorPosition(this.maskHelper.cursor);\n        } else {\n            const currentCursorPos = this.getCursorPosition();\n\n            this.maskHelper.data = (this._key === KEYS.BACKSPACE) || (this._key === KEYS.DELETE);\n\n            this.value = this._selection && this._selection !== 0 ?\n                this.maskHelper.parseValueByMaskUponSelection(this.value, this._maskOptions, currentCursorPos - 1, this._selection) :\n                this.maskHelper.parseValueByMask(this.value, this._maskOptions, currentCursorPos - 1);\n\n            this.setCursorPosition(this.maskHelper.cursor);\n        }\n\n        const rawVal = this.maskHelper.restoreValueFromMask(this.value, this._maskOptions);\n\n        this.dataValue = this.includeLiterals ? this.value : rawVal;\n        this._onChangeCallback(this.dataValue);\n\n        this.onValueChange.emit({ rawValue: rawVal, formattedValue: this.value });\n    }\n\n    /**\n     *@hidden\n     */\n    @HostListener('focus', ['$event.target.value'])\n    public onFocus(value) {\n        if (this.focusedValuePipe) {\n            if (isIE()) {\n                this._stopPropagation = true;\n            }\n            this.value = this.focusedValuePipe.transform(value);\n        } else {\n            this.value = this.maskHelper.parseValueByMaskOnInit(this.value, this._maskOptions);\n        }\n    }\n\n    /**\n     *@hidden\n     */\n    @HostListener('blur', ['$event.target.value'])\n    public onBlur(value) {\n        if (this.displayValuePipe) {\n            this.value = this.displayValuePipe.transform(value);\n        } else if (value === this.maskHelper.parseMask(this._maskOptions)) {\n            this.value = '';\n        }\n    }\n\n    /**\n     *@hidden\n     */\n    private getCursorPosition(): number {\n        return this.nativeElement.selectionStart;\n    }\n\n    /**\n     *@hidden\n     */\n    private setCursorPosition(start: number, end: number = start): void {\n        this.nativeElement.setSelectionRange(start, end);\n    }\n\n    /**\n     *@hidden\n     */\n    public writeValue(value) {\n        if (this.promptChar && this.promptChar.length > 1) {\n            this._maskOptions.promptChar = this.promptChar.substring(0, 1);\n        }\n\n        this.value = value ? this.maskHelper.parseValueByMaskOnInit(value, this._maskOptions) : '';\n        if (this.displayValuePipe) {\n            this.value = this.displayValuePipe.transform(this.value);\n        }\n\n        this.dataValue = this.includeLiterals ? this.value : value;\n        this._onChangeCallback(this.dataValue);\n\n        this.onValueChange.emit({ rawValue: value, formattedValue: this.value });\n    }\n\n    /**\n     *@hidden\n     */\n    public registerOnChange(fn: (_: any) => void) { this._onChangeCallback = fn; }\n\n    /**\n     *@hidden\n     */\n    public registerOnTouched(fn: () => void) { this._onTouchedCallback = fn; }\n}\n\n/**\n * The IgxMaskModule provides the {@link IgxMaskDirective} inside your application.\n */\nexport interface IMaskEventArgs extends IBaseEventArgs {\n    rawValue: string;\n    formattedValue: string;\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxMaskDirective],\n    exports: [IgxMaskDirective],\n    imports: [CommonModule]\n})\nexport class IgxMaskModule { }\n","import { CommonModule } from '@angular/common';\nimport {\n    AfterViewInit,\n    Component,\n    ElementRef,\n    HostBinding,\n    Input,\n    NgModule,\n    OnInit,\n    TemplateRef,\n    ViewChild\n} from '@angular/core';\nimport { IgxIconModule } from '../icon/index';\n\nlet NEXT_ID = 0;\n\nexport enum IgxAvatarSize {\n    SMALL = 'small',\n    MEDIUM = 'medium',\n    LARGE = 'large'\n}\n\nexport enum IgxAvatarType {\n    INITIALS = 'initials',\n    IMAGE = 'image',\n    ICON = 'icon',\n    CUSTOM = 'custom',\n}\n\n/**\n * **Ignite UI for Angular Avatar** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/avatar.html)\n *\n * The Ignite UI Avatar provides an easy way to add an avatar icon to your application.  This icon can be an\n * image, someone's initials or a material icon from the google material icon set.\n *\n * Example:\n * ```html\n * <igx-avatar initials=\"MS\" roundShape=\"true\" size=\"large\">\n * </igx-avatar>\n * ```\n */\n@Component({\n    selector: 'igx-avatar',\n    templateUrl: 'avatar.component.html'\n})\nexport class IgxAvatarComponent implements OnInit, AfterViewInit {\n\n    /**\n     * This is a reference to the avatar `image` element in the DOM.\n     *\n     * ```typescript\n     *  let image =  this.avatar.image;\n     * ```\n     * @memberof IgxAvatarComponent\n     */\n    @ViewChild('image')\n    public image: ElementRef;\n\n    /**\n     *@hidden\n     */\n    @ViewChild('defaultTemplate', { read: TemplateRef, static: true })\n    protected defaultTemplate: TemplateRef<any>;\n\n    /**\n     *@hidden\n     */\n    @ViewChild('imageTemplate', { read: TemplateRef, static: true })\n    protected imageTemplate: TemplateRef<any>;\n\n    /**\n     *@hidden\n     */\n    @ViewChild('initialsTemplate', { read: TemplateRef, static: true })\n    protected initialsTemplate: TemplateRef<any>;\n\n    /**\n     *@hidden\n     */\n    @ViewChild('iconTemplate', { read: TemplateRef, static: true })\n    protected iconTemplate: TemplateRef<any>;\n\n    /**\n     * Returns the `aria-label` of the avatar.\n     *\n     * ```typescript\n     * let ariaLabel = this.avatar.ariaLabel;\n     * ```\n     *\n     */\n    @HostBinding('attr.aria-label')\n    public ariaLabel = 'avatar';\n\n    /**\n     * Returns the `role` attribute of the avatar.\n     *\n     * ```typescript\n     * let avatarRole = this.avatar.role;\n     * ```\n     *\n     * @memberof IgxAvatarComponent\n     */\n    @HostBinding('attr.role')\n    public role = 'img';\n\n    /**\n     * Returns the class of the avatar.\n     *\n     * ```typescript\n     * let avatarCLass =  this.avatar.cssClass;\n     * ```\n     *\n     * @memberof IgxAvatarComponent\n     */\n    @HostBinding('class.igx-avatar')\n    public cssClass = 'igx-avatar';\n\n    /**\n     * Returns the type of the avatar.\n     * The avatar can be:\n     * - `\"initials type avatar\"`\n     * - `\"icon type avatar\"`\n     * - `\"image type avatar\"`.\n     * - `\"custom type avatar\"`.\n     *\n     * ```typescript\n     * let avatarDescription = this.avatar.roleDescription;\n     * ```\n     *\n     * @memberof IgxAvatarComponent\n     */\n    @HostBinding('attr.aria-roledescription')\n    public roleDescription: string;\n\n    /**\n     * @hidden\n     */\n    private _size: string | IgxAvatarSize = IgxAvatarSize.SMALL;\n\n    /**\n     * Sets the `id` of the avatar. If not set, the first avatar component will have `id` = `\"igx-avatar-0\"`.\n     *\n     * ```html\n     * <igx-avatar id=\"my-first-avatar\"></igx-avatar>\n     * ```\n     *\n     * @memberof IgxAvatarComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-avatar-${NEXT_ID++}`;\n\n    /**\n     * Sets a round shape to the avatar if `roundShape` is `\"true\"`.\n     * By default the shape of the avatar is a square.\n     *\n     * ```html\n     * <igx-avatar roundShape = \"true\" ></igx-avatar>\n     * ```\n     *\n     * @memberof IgxAvatarComponent\n     */\n\n    @HostBinding('class.igx-avatar--rounded')\n    @Input()\n    public roundShape = false;\n\n    /**\n     * Sets the avatar's `initials`/`icon` color.\n     *\n     *```html\n     *<igx-avatar color=\"blue\"></igx-avatar>\n     *```\n     *\n     * @memberof IgxAvatarComponent\n     */\n\n    @HostBinding('style.color')\n    @Input()\n    public color: string;\n\n    /**\n     * Sets the background color of the avatar.\n     *\n     * ```html\n     * <igx-avatar bgColor=\"yellow\"></igx-avatar>\n     * ```\n     *\n     * @memberof IgxAvatarComponent\n     */\n\n    @HostBinding('style.background')\n    @Input()\n    public bgColor: string;\n\n    /**\n     * Sets `initials` to the avatar.\n     *\n     * ```html\n     * <igx-avatar initials=\"MN\"></igx-avatar>\n     * ```\n     *\n     * @memberof IgxAvatarComponent\n     */\n    @Input()\n    public initials: string;\n\n    /**\n     * Sets an `icon` to the avatar. All icons from the material icon set are supported.\n     *\n     * ```html\n     * <igx-avatar icon=\"phone\"></igx-avatar>\n     * ```\n     *\n     * @memberof IgxAvatarComponent\n     */\n    @Input()\n    public icon: string;\n\n    /**\n     * Sets the `image` source of the avatar.\n     *\n     * ```html\n     * <igx-avatar src=\"images/picture.jpg\"></igx-avatar>\n     * ```\n     *\n     * @memberof IgxAvatarComponent\n     */\n    @Input()\n    public src: string;\n\n    /**\n     * Returns the `size` of the avatar.\n     *\n     * ```typescript\n     *let avatarSize =  this.avatar.size;\n     * ```\n     *\n     * @memberof IgxAvatarComponent\n     */\n    @Input()\n    public get size(): string | IgxAvatarSize {\n        return this._size;\n    }\n\n    /**\n     * Sets the `size`  of the avatar.\n     * By default the `size` is `\"small\"`. It can be set to `\"medium\"` or `\"large\"`.\n     *\n     * ```\n     * <igx-avatar size=\"large\"></igx-avatar>\n     * ```\n     *\n     * @memberof IgxAvatarComponent\n     */\n    public set size(value: string | IgxAvatarSize) {\n        switch (value) {\n            case 'small':\n            case 'medium':\n            case 'large':\n                this._size = value;\n                break;\n            default:\n                this._size = 'small';\n        }\n    }\n\n    /**\n     * Returns the type of the avatar.\n     *\n     * ```typescript\n     * let avatarType = this.avatar.type;\n     * ```\n     *\n     * @memberof IgxAvatarComponent\n     */\n    get type(): IgxAvatarType {\n        if (this.src) {\n            return IgxAvatarType.IMAGE;\n        }\n\n        if (this.icon) {\n            return IgxAvatarType.ICON;\n        }\n\n        if (this.initials) {\n            return IgxAvatarType.INITIALS;\n        }\n\n        return IgxAvatarType.CUSTOM;\n    }\n\n    /**\n     * Returns the template of the avatar.\n     *\n     * ```typescript\n     * let template = this.avatar.template;\n     * ```\n     *\n     * @memberof IgxAvatarComponent\n     */\n    get template(): TemplateRef<any> {\n        switch (this.type) {\n            case IgxAvatarType.IMAGE:\n                return this.imageTemplate;\n            case IgxAvatarType.INITIALS:\n                return this.initialsTemplate;\n            case IgxAvatarType.ICON:\n                return this.iconTemplate;\n            default:\n                return this.defaultTemplate;\n        }\n    }\n\n    constructor(public elementRef: ElementRef) { }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        this.roleDescription = this.getRole();\n    }\n\n    /**\n     *@hidden\n     */\n    public ngAfterViewInit() {\n        if (this.type !== IgxAvatarType.CUSTOM) {\n            this.elementRef.nativeElement.classList.add(`igx-avatar--${this.type}`);\n        }\n\n        this.elementRef.nativeElement.classList.add(`igx-avatar--${this._size}`);\n    }\n\n    /**\n     * @hidden\n     */\n    private getRole(): string {\n        switch (this.type) {\n            case IgxAvatarType.IMAGE:\n                return 'image avatar';\n            case IgxAvatarType.ICON:\n                return 'icon avatar';\n            case IgxAvatarType.INITIALS:\n                return 'initials avatar';\n            default:\n                return 'custom avatar';\n        }\n    }\n\n    /**\n     * Returns the url of the `image`.\n     *\n     * ```typescript\n     * let imageSourceUrl = this.avatar.getSrcUrl();\n     * ```\n     *\n     * @memberof IgxAvatarComponent\n     */\n    public getSrcUrl() {\n        return `url(${this.src})`;\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxAvatarComponent],\n    exports: [IgxAvatarComponent],\n    imports: [CommonModule, IgxIconModule]\n})\nexport class IgxAvatarModule { }\n","import { Directive, ElementRef, HostListener, Input, NgModule, NgZone, Renderer2 } from '@angular/core';\nimport { AnimationBuilder, style, animate } from '@angular/animations';\n\n@Directive({\n    selector: '[igxRipple]'\n})\nexport class IgxRippleDirective {\n    /**\n     * Sets/gets the ripple target.\n     * ```html\n     * <div  #rippleContainer class=\"div-1\" igxRipple [igxRippleTarget] = \"'.div-1'\"></div>\n     * ```\n     * ```typescript\n     * @ViewChild('rippleContainer', {read: IgxRippleDirective})\n     * public ripple: IgxRippleDirective;\n     * let rippleTarget = this.ripple.rippleTarget;\n     * ```\n     * Can set the ripple to activate on a child element inside the parent where igxRipple is defined.\n     * ```html\n     * <div #rippleContainer [igxRippleTarget] = \"'#child\"'>\n     *  <button id=\"child\">Click</button>\n     * </div>\n     * ```\n     * @memberof IgxRippleDirective\n     */\n    @Input('igxRippleTarget')\n    public rippleTarget = '';\n    /**\n     * Sets/gets the ripple color.\n     * ```html\n     * <button #rippleContainer [igxRipple] = \"'red'\" ></button>\n     * ```\n     * ```typescript\n     * @ViewChild('rippleContainer', {read: IgxRippleDirective})\n     * public ripple: IgxRippleDirective;\n     * let rippleColor = this.ripple.rippleColor;\n     * ```\n     * @memberof IgxRippleDirective\n     */\n    @Input('igxRipple')\n    public rippleColor: string;\n    /**\n     * Sets/gets the ripple duration(in milliseconds).\n     * Default value is `600`.\n     * ```html\n     * <button #rippleContainer igxRipple [igxRippleDuration] = \"800\"></button>\n     * ```\n     * ```typescript\n     * @ViewChild('rippleContainer', {read: IgxRippleDirective})\n     * public ripple: IgxRippleDirective;\n     * let rippleDuration = this.ripple.rippleDuration;\n     * ```\n     * @memberof IgxRippleDirective\n     */\n    @Input('igxRippleDuration')\n    public rippleDuration = 600;\n    /**\n     * Enables/disables the ripple to be centered.\n     * ```html\n     * <button #rippleContainer igxRipple [igxRippleCentered] = \"true\"></button>\n     * ```\n     * @memberof IgxRippleDirective\n     */\n    @Input('igxRippleCentered') set centered(value: boolean) {\n        this._centered = value || this.centered;\n    }\n    /**\n     * Sets/gets whether the ripple is disabled.\n     * Default value is `false`.\n     * ```html\n     * <button #rippleContainer igxRipple [igxRippleDisabled] = \"true\"></button>\n     * ```\n     * ```typescript\n     * @ViewChild('rippleContainer', {read: IgxRippleDirective})\n     * public ripple: IgxRippleDirective;\n     * let isRippleDisabled = this.ripple.rippleDisabled;\n     * ```\n     * @memberof IgxRippleDirective\n     */\n    @Input('igxRippleDisabled')\n    public rippleDisabled = false;\n\n    protected get nativeElement(): HTMLElement {\n        return this.elementRef.nativeElement;\n    }\n\n    private rippleElementClass = 'igx-ripple__inner';\n    private rippleHostClass = 'igx-ripple';\n    private _centered = false;\n    private animationQueue = [];\n\n    constructor(\n        protected builder: AnimationBuilder,\n        protected elementRef: ElementRef,\n        protected renderer: Renderer2,\n        private zone: NgZone) { }\n    /**\n     *@hidden\n     */\n    @HostListener('mousedown', ['$event'])\n    public onMouseDown(event) {\n        this.zone.runOutsideAngular(() => this._ripple(event));\n    }\n\n    private setStyles(rippleElement: HTMLElement, styleParams: any) {\n        this.renderer.addClass(rippleElement, this.rippleElementClass);\n        this.renderer.setStyle(rippleElement, 'width', `${styleParams.radius}px`);\n        this.renderer.setStyle(rippleElement, 'height', `${styleParams.radius}px`);\n        this.renderer.setStyle(rippleElement, 'top', `${styleParams.top}px`);\n        this.renderer.setStyle(rippleElement, 'left', `${styleParams.left}px`);\n        if (this.rippleColor) {\n            this.renderer.setStyle(rippleElement, 'background', this.rippleColor);\n        }\n    }\n\n    private _ripple(event) {\n        if (this.rippleDisabled) {\n            return;\n        }\n\n        const target = (this.rippleTarget ? this.nativeElement.querySelector(this.rippleTarget) || this.nativeElement : this.nativeElement);\n\n        const rectBounds = target.getBoundingClientRect();\n        const radius = Math.max(rectBounds.width, rectBounds.height);\n        let left = event.clientX - rectBounds.left - radius / 2;\n        let top = event.clientY - rectBounds.top - radius / 2;\n\n        if (this._centered) {\n            left = top = 0;\n        }\n\n        const dimensions = {\n            radius,\n            top,\n            left\n        };\n\n        const rippleElement = this.renderer.createElement('span');\n\n        this.setStyles(rippleElement, dimensions);\n        this.renderer.addClass(target, this.rippleHostClass);\n        this.renderer.appendChild(target, rippleElement);\n\n        const animation = this.builder.build([\n            style({ opacity: 0.5, transform: 'scale(.3)' }),\n            animate(this.rippleDuration, style({ opacity: 0, transform: 'scale(2)' }))\n        ]).create(rippleElement);\n\n        this.animationQueue.push(animation);\n\n        animation.onDone(() => {\n            this.animationQueue.splice(this.animationQueue.indexOf(animation), 1);\n            target.removeChild(rippleElement);\n            if (this.animationQueue.length < 1) {\n                this.renderer.removeClass(target, this.rippleHostClass);\n            }\n        });\n\n        animation.play();\n\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxRippleDirective],\n    exports: [IgxRippleDirective]\n})\nexport class IgxRippleModule { }\n","import {\n    Directive,\n    NgModule,\n    Input,\n    QueryList,\n    Output,\n    EventEmitter,\n    AfterContentInit,\n    ContentChildren,\n    OnDestroy,\n    HostBinding\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IgxRadioComponent, RadioLabelPosition, IChangeRadioEventArgs } from '../../radio/radio.component';\nimport { IgxRippleModule } from '../ripple/ripple.directive';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\n\nconst noop = () => { };\nlet nextId = 0;\n\n/**\n * Radio group directive renders set of radio buttons.\n *\n * @igxModule IgxRadioModule\n *\n * @igxTheme igx-radio-theme\n *\n * @igxKeywords radiogroup, radio, button, input\n *\n * @igxGroup Data Entry & Display\n *\n * @remarks\n * The Ignite UI Radio Group allows the user to select a single option from an available set of options that are listed side by side.\n *\n * @example:\n * ```html\n * <igx-radio-group name=\"radioGroup\">\n *   <igx-radio *ngFor=\"let item of ['Foo', 'Bar', 'Baz']\" value=\"{{item}}\">\n *      {{item}}\n *   </igx-radio>\n * </igx-radio-group>\n * ```\n */\n@Directive({\n    exportAs: 'igxRadioGroup',\n    selector: 'igx-radio-group, [igxRadioGroup]',\n    providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: IgxRadioGroupDirective, multi: true }]\n})\nexport class IgxRadioGroupDirective implements AfterContentInit, ControlValueAccessor, OnDestroy {\n    /**\n     * Returns reference to the child radio buttons.\n     *\n     * @example\n     * ```typescript\n     * let radioButtons =  this.radioGroup.radioButtons;\n     * ```\n     */\n    @ContentChildren(IgxRadioComponent, { descendants: true }) public radioButtons: QueryList<IgxRadioComponent>;\n\n    /**\n     * Sets/gets the `value` attribute.\n     *\n     * @example\n     * ```html\n     * <igx-radio-group [value] = \"'radioButtonValue'\"></igx-radio-group>\n     * ```\n     */\n    @Input()\n    get value(): any { return this._value; }\n    set value(newValue: any) {\n        if (this._value !== newValue) {\n            this._value = newValue;\n            this._selectRadioButton();\n        }\n    }\n\n    /**\n     * Sets/gets the `name` attribute of the radio group component. All child radio buttons inherits this name.\n     *\n     * @example\n     * ```html\n     * <igx-radio-group name = \"Radio1\"></igx-radio-group>\n     *  ```\n     */\n    @Input()\n    get name(): string { return this._name; }\n    set name(newValue: string) {\n        if (this._name !== newValue) {\n            this._name = newValue;\n            this._setRadioButtonNames();\n        }\n    }\n\n    /**\n     * Sets/gets whether the radio group is required.\n     *\n     * @remarks\n     * If not set, `required` will have value `false`.\n     *\n     * @example\n     * ```html\n     * <igx-radio-group [required] = \"true\"></igx-radio-group>\n     * ```\n     */\n    @Input()\n    get required(): boolean { return this._required; }\n    set required(newValue: boolean) {\n        if (this._required !== newValue) {\n            this._required = newValue;\n            this._setRadioButtonsRequired();\n        }\n    }\n\n    /**\n     * An @Input property that allows you to disable the radio group. By default it's false.\n     *\n     * @example\n     *  ```html\n     * <igx-radio-group [disabled]=\"true\"></igx-radio-group>\n     * ```\n     */\n    @Input()\n    get disabled(): boolean { return this._disabled; }\n    set disabled(newValue: boolean) {\n        if (this._disabled !== newValue) {\n            this._disabled = newValue;\n            this._disableRadioButtons();\n        }\n    }\n\n    /**\n     * Sets/gets the position of the `label` in the child radio buttons.\n     *\n     * @remarks\n     * If not set, `labelPosition` will have value `\"after\"`.\n     *\n     * @example\n     * ```html\n     * <igx-radio-group labelPosition = \"before\"></igx-radio-group>\n     * ```\n     */\n    @Input()\n    get labelPosition(): RadioLabelPosition | string { return this._labelPosition; }\n    set labelPosition(newValue: RadioLabelPosition | string) {\n        if (this._labelPosition !== newValue) {\n            this._labelPosition = newValue === RadioLabelPosition.BEFORE ? RadioLabelPosition.BEFORE : RadioLabelPosition.AFTER;\n            this._setRadioButtonLabelPosition();\n        }\n    }\n\n    /**\n     * Sets/gets the selected child radio button.\n     *\n     * @example\n     * ```typescript\n     * let selectedButton = this.radioGroup.selected;\n     * this.radioGroup.selected = selectedButton;\n     * ```\n     */\n    @Input()\n    get selected() { return this._selected; }\n    set selected(selected: IgxRadioComponent | null) {\n        if (this._selected !== selected) {\n            this._selected = selected;\n            this.value = selected ? selected.value : null;\n        }\n    }\n\n    /**\n     * An event that is emitted after the radio group `value` is changed.\n     *\n     * @remarks\n     * Provides references to the selected `IgxRadioComponent` and the `value` property as event arguments.\n     *\n     * @example\n     * ```html\n     * <igx-radio-group (change)=\"handler($event)\"></igx-radio-group>\n     * ```\n     */\n    @Output()\n    readonly change: EventEmitter<IChangeRadioEventArgs> = new EventEmitter<IChangeRadioEventArgs>();\n\n    /**\n     * The css class applied to the component.\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-radio-group')\n    public cssClass = 'igx-radio-group';\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _onChangeCallback: (_: any) => void = noop;\n    /**\n     * @hidden\n     * @internal\n     */\n    private _name = `igx-radio-group-${nextId++}`;\n    /**\n     * @hidden\n     * @internal\n     */\n    private _value: any = null;\n    /**\n     * @hidden\n     * @internal\n     */\n    private _selected: IgxRadioComponent | null = null;\n    /**\n     * @hidden\n     * @internal\n     */\n    private _isInitialized = false;\n    /**\n     * @hidden\n     * @internal\n     */\n    private _labelPosition: RadioLabelPosition | string = 'after';\n    /**\n     * @hidden\n     * @internal\n     */\n    private _disabled = false;\n    /**\n     * @hidden\n     * @internal\n     */\n    private _required = false;\n    /**\n     * @hidden\n     * @internal\n     */\n    private destroy$ = new Subject<boolean>();\n\n    ngAfterContentInit() {\n        // The initial value can possibly be set by NgModel and it is possible that\n        // the OnInit of the NgModel occurs after the OnInit of this class.\n        this._isInitialized = true;\n\n        setTimeout(() => { this._initRadioButtons(); });\n    }\n\n    /**\n     * Sets the \"checked\" property value on the radio input element.\n     *\n     * @remarks\n     * Checks whether the provided value is consistent to the current radio button.\n     * If it is, the checked attribute will have value `true` and selected property will contain the selected `IgxRadioComponent`.\n     *\n     * @example\n     * ```typescript\n     * this.radioGroup.writeValue('radioButtonValue');\n     * ```\n     */\n    public writeValue(value: any) {\n        this.value = value;\n    }\n\n    /**\n     * Registers a function called when the control value changes.\n     *\n     * @hidden\n     * @internal\n     */\n    public registerOnChange(fn: (_: any) => void) { this._onChangeCallback = fn; }\n\n    /**\n     * Registers a function called when the control is touched.\n     *\n     * @hidden\n     * @internal\n     */\n    public registerOnTouched(fn: () => void) {\n        if (this.radioButtons) {\n            this.radioButtons.forEach((button) => {\n                button.registerOnTouched(fn);\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _initRadioButtons() {\n        if (this.radioButtons) {\n            const props = { name: this._name, labelPosition: this._labelPosition, disabled: this._disabled, required: this._required };\n            this.radioButtons.forEach((button) => {\n                Object.assign(button, props);\n\n                if (button.value === this._value) {\n                    button.checked = true;\n                    this._selected = button;\n                }\n\n                button.change.pipe(takeUntil(this.destroy$)).subscribe((ev) => this._selectedRadioButtonChanged(ev));\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _selectedRadioButtonChanged(args: IChangeRadioEventArgs) {\n        if (this._selected !== args.radio) {\n            if (this._selected) {\n                this._selected.checked = false;\n            }\n            this._selected = args.radio;\n        }\n\n        this._value = args.value;\n\n        if (this._isInitialized) {\n            this.change.emit(args);\n            this._onChangeCallback(this.value);\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _setRadioButtonNames() {\n        if (this.radioButtons) {\n            this.radioButtons.forEach((button) => {\n                button.name = this._name;\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _selectRadioButton() {\n        if (this.radioButtons) {\n            this.radioButtons.forEach((button) => {\n                if (!this._value) {\n                    // no value - uncheck all radio buttons\n                    if (button.checked) {\n                        button.checked = false;\n                    }\n                } else {\n                    if (this._value === button.value) {\n                        // selected button\n                        if (this._selected !== button) {\n                            this._selected = button;\n                        }\n\n                        if (!button.checked) {\n                            button.select();\n                        }\n                    } else {\n                        // non-selected button\n                        if (button.checked) {\n                            button.checked = false;\n                        }\n                    }\n                }\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _setRadioButtonLabelPosition() {\n        if (this.radioButtons) {\n            this.radioButtons.forEach((button) => {\n                button.labelPosition = this._labelPosition;\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _disableRadioButtons() {\n        if (this.radioButtons) {\n            this.radioButtons.forEach((button) => {\n                button.disabled = this._disabled;\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _setRadioButtonsRequired() {\n        if (this.radioButtons) {\n            this.radioButtons.forEach((button) => {\n                button.required = this._required;\n            });\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxRadioGroupDirective, IgxRadioComponent],\n    exports: [IgxRadioGroupDirective, IgxRadioComponent],\n    imports: [IgxRippleModule]\n})\nexport class IgxRadioModule { }\n","import {\n    AfterViewInit,\n    Directive,\n    ElementRef,\n    EventEmitter,\n    Input,\n    NgModule,\n    OnChanges,\n    OnDestroy,\n    Renderer2,\n    SimpleChanges,\n    AfterViewChecked,\n} from '@angular/core';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { DeprecateProperty } from '../../core/deprecateDecorators';\n\ninterface ISearchInfo {\n    searchedText: string;\n    content: string;\n    matchCount: number;\n    caseSensitive: boolean;\n    exactMatch: boolean;\n}\n\n/**\n * An interface describing information for the active highlight.\n */\nexport interface IActiveHighlightInfo {\n    /**\n     * The row index of the highlight. This property is deprecated, use `row` instead.\n     */\n    rowIndex?: number;\n    /**\n     * The column index of the highlight. This property is deprecated, use `column` instead.\n     */\n    columnIndex?: number;\n    /**\n     * The page index of the highlight. This property is deprecated.\n     */\n    page?: number;\n    /**\n     * The row of the highlight.\n     */\n    row?: any;\n    /**\n     * The column of the highlight.\n     */\n    column?: any;\n    /**\n     * The index of the highlight.\n     */\n    index: number;\n}\n\n@Directive({\n    selector: '[igxTextHighlight]'\n})\nexport class IgxTextHighlightDirective implements AfterViewInit, AfterViewChecked, OnDestroy, OnChanges {\n    private static onActiveElementChanged = new EventEmitter<string>();\n    public static highlightGroupsMap = new Map<string, IActiveHighlightInfo>();\n\n    private _lastSearchInfo: ISearchInfo;\n    private _div = null;\n    private _observer: MutationObserver = null;\n    private _nodeWasRemoved = false;\n    private _forceEvaluation = false;\n    private _activeElementIndex = -1;\n    private _valueChanged: boolean;\n    private _defaultCssClass = 'igx-highlight';\n    private _defaultActiveCssClass = 'igx-highlight--active';\n\n    /**\n     * Determines the `CSS` class of the highlight elements.\n     * This allows the developer to provide custom `CSS` to customize the highlight.\n     *\n     * ```html\n     * <div\n     *   igxTextHighlight\n     *   [cssClass]=\"myClass\">\n     * </div>\n     * ```\n     */\n    @Input('cssClass')\n    public cssClass: string;\n\n    /**\n     * Determines the `CSS` class of the active highlight element.\n     * This allows the developer to provide custom `CSS` to customize the highlight.\n     *\n     * ```html\n     * <div\n     *   igxTextHighlight\n     *   [activeCssClass]=\"activeHighlightClass\">\n     * </div>\n     * ```\n     */\n    @Input('activeCssClass')\n    public activeCssClass: string;\n\n    /**\n     * @hidden\n     */\n    @Input('containerClass')\n    public containerClass: string;\n\n    /**\n     * Identifies the highlight within a unique group.\n     * This allows it to have several different highlight groups,\n     * with each of them having their own active highlight.\n     *\n     * ```html\n     * <div\n     *   igxTextHighlight\n     *   [groupName]=\"myGroupName\">\n     * </div>\n     * ```\n     */\n    @Input('groupName')\n    public groupName = '';\n\n    private _value = '';\n\n    /**\n     * The underlying value of the element that will be highlighted.\n     *\n     * ```typescript\n     * // get\n     * const elementValue = this.textHighlight.value;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <div\n     *   igxTextHighlight\n     *   [value]=\"newValue\">\n     * </div>\n     * ```\n     */\n    @Input('value')\n    public get value(): any {\n        return this._value;\n    }\n    public set value(value: any) {\n        if (value === undefined || value === null) {\n            this._value = '';\n        } else {\n            this._value = value;\n        }\n    }\n\n    /**\n     * The identifier of the row on which the directive is currently on.\n     *\n     * ```html\n     * <div\n     *   igxTextHighlight\n     *   [row]=\"0\">\n     * </div>\n     * ```\n     */\n    @Input('row')\n    public row: any;\n\n    /**\n     * The identifier of the column on which the directive is currently on.\n     *\n     * ```html\n     * <div\n     *   igxTextHighlight\n     *   [column]=\"0\">\n     * </div>\n     * ```\n     */\n    @Input('column')\n    public column: any;\n\n    @Input('page')\n    @DeprecateProperty(`IgxTextHighlightDirective 'page' input property is deprecated.`)\n    public page: number;\n\n    /**\n     * @hidden\n     */\n    public get lastSearchInfo(): ISearchInfo {\n        return this._lastSearchInfo;\n    }\n\n    /**\n     * @hidden\n     */\n    public parentElement: any;\n\n    private _container: any;\n\n    private destroy$ = new Subject<boolean>();\n\n    /**\n     * Activates the highlight at a given index.\n     * (if such index exists)\n     */\n    public static setActiveHighlight(groupName: string, highlight: IActiveHighlightInfo) {\n        IgxTextHighlightDirective.highlightGroupsMap.set(groupName, highlight);\n        IgxTextHighlightDirective.onActiveElementChanged.emit(groupName);\n    }\n\n    /**\n     * Clears any existing highlight.\n     */\n    public static clearActiveHighlight(groupName) {\n        IgxTextHighlightDirective.highlightGroupsMap.set(groupName, {\n            index: -1\n        });\n        IgxTextHighlightDirective.onActiveElementChanged.emit(groupName);\n    }\n\n    constructor(private element: ElementRef, public renderer: Renderer2) {\n        IgxTextHighlightDirective.onActiveElementChanged.pipe(takeUntil(this.destroy$)).subscribe((groupName) => {\n            if (this.groupName === groupName) {\n                if (this._activeElementIndex !== -1) {\n                    this.deactivate();\n                }\n                this.activateIfNecessary();\n            }\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    ngOnDestroy() {\n        this.clearHighlight();\n\n        if (this._observer !== null) {\n            this._observer.disconnect();\n        }\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    /**\n     * @hidden\n     */\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes.value && !changes.value.firstChange) {\n            this._valueChanged = true;\n        } else if ((changes.row !== undefined && !changes.row.firstChange) ||\n            (changes.column !== undefined && !changes.column.firstChange) ||\n            (changes.page !== undefined && !changes.page.firstChange)) {\n            if (this._activeElementIndex !== -1) {\n                this.deactivate();\n            }\n            this.activateIfNecessary();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    ngAfterViewInit() {\n        this.parentElement = this.renderer.parentNode(this.element.nativeElement);\n\n        if (IgxTextHighlightDirective.highlightGroupsMap.has(this.groupName) === false) {\n            IgxTextHighlightDirective.highlightGroupsMap.set(this.groupName, {\n                index: -1\n            });\n        }\n\n        this._lastSearchInfo = {\n            searchedText: '',\n            content: this.value,\n            matchCount: 0,\n            caseSensitive: false,\n            exactMatch: false\n        };\n\n        this._container = this.parentElement.firstElementChild;\n    }\n\n    /**\n     * @hidden\n     */\n    ngAfterViewChecked() {\n        if (this._valueChanged) {\n            this.highlight(this._lastSearchInfo.searchedText, this._lastSearchInfo.caseSensitive, this._lastSearchInfo.exactMatch);\n            this.activateIfNecessary();\n            this._valueChanged = false;\n        }\n    }\n\n    /**\n     * Clears the existing highlight and highlights the searched text.\n     * Returns how many times the element contains the searched text.\n     */\n    public highlight(text: string, caseSensitive?: boolean, exactMatch?: boolean): number {\n        const caseSensitiveResolved = caseSensitive ? true : false;\n        const exactMatchResolved = exactMatch ? true : false;\n\n        if (this.searchNeedsEvaluation(text, caseSensitiveResolved, exactMatchResolved)) {\n            this._lastSearchInfo.searchedText = text;\n            this._lastSearchInfo.caseSensitive = caseSensitiveResolved;\n            this._lastSearchInfo.exactMatch = exactMatchResolved;\n            this._lastSearchInfo.content = this.value;\n\n            if (text === '' || text === undefined || text === null) {\n                this.clearHighlight();\n            } else {\n                this.clearChildElements(true);\n                this._lastSearchInfo.matchCount = this.getHighlightedText(text, caseSensitive, exactMatch);\n            }\n        } else if (this._nodeWasRemoved) {\n            this._lastSearchInfo.searchedText = text;\n            this._lastSearchInfo.caseSensitive = caseSensitiveResolved;\n            this._lastSearchInfo.exactMatch = exactMatchResolved;\n        }\n\n        return this._lastSearchInfo.matchCount;\n    }\n\n    /**\n     * Clears any existing highlight.\n     */\n    public clearHighlight(): void {\n        this.clearChildElements(false);\n\n        this._lastSearchInfo.searchedText = '';\n        this._lastSearchInfo.matchCount = 0;\n    }\n\n    /**\n     * Activates the highlight if it is on the currently active row, column and page.\n     */\n    public activateIfNecessary(): void {\n        const group = IgxTextHighlightDirective.highlightGroupsMap.get(this.groupName);\n        const column = group.columnIndex === undefined ? group.column : group.columnIndex;\n        const row = group.rowIndex === undefined ? group.row : group.rowIndex;\n\n        if (column === this.column && row === this.row && group.page === this.page) {\n            this.activate(group.index);\n        }\n    }\n\n    /**\n     * Attaches a MutationObserver to the parentElement and watches for when the container element is removed/readded to the DOM.\n     * Should be used only when necessary as using many observers may lead to performance degradation.\n     */\n    public observe(): void {\n        if (this._observer === null) {\n            const callback = (mutationList) => {\n                mutationList.forEach((mutation) => {\n                    const removedNodes = Array.from(mutation.removedNodes);\n                    removedNodes.forEach((n) => {\n                        if (n === this._container) {\n                            this._nodeWasRemoved = true;\n                            this.clearChildElements(false);\n                        }\n                    });\n\n                    const addedNodes = Array.from(mutation.addedNodes);\n                    addedNodes.forEach((n) => {\n                        if (n === this.parentElement.firstElementChild && this._nodeWasRemoved) {\n                            this._container = this.parentElement.firstElementChild;\n                            this._nodeWasRemoved = false;\n\n                            this._forceEvaluation = true;\n                            this.highlight(this._lastSearchInfo.searchedText,\n                                this._lastSearchInfo.caseSensitive,\n                                this._lastSearchInfo.exactMatch);\n                            this._forceEvaluation = false;\n\n                            this.activateIfNecessary();\n                            this._observer.disconnect();\n                            this._observer = null;\n                        }\n                    });\n                });\n            };\n\n            this._observer = new MutationObserver(callback);\n            this._observer.observe(this.parentElement, {childList: true});\n        }\n    }\n\n    private activate(index: number) {\n        this.deactivate();\n\n        if (this._div !== null) {\n            const spans = this._div.querySelectorAll('span');\n            this._activeElementIndex = index;\n\n            if (spans.length <= index) {\n                return;\n            }\n\n            const elementToActivate = spans[index];\n            this.renderer.addClass(elementToActivate, this._defaultActiveCssClass);\n            this.renderer.addClass(elementToActivate, this.activeCssClass);\n        }\n    }\n\n    private deactivate() {\n        if (this._activeElementIndex === -1) {\n            return;\n        }\n\n        const spans = this._div.querySelectorAll('span');\n\n        if (spans.length <= this._activeElementIndex) {\n            this._activeElementIndex = -1;\n            return;\n        }\n\n        const elementToDeactivate = spans[this._activeElementIndex];\n        this.renderer.removeClass(elementToDeactivate, this._defaultActiveCssClass);\n        this.renderer.removeClass(elementToDeactivate, this.activeCssClass);\n        this._activeElementIndex = -1;\n    }\n\n    private clearChildElements(originalContentHidden: boolean): void {\n        this.renderer.setProperty(this.element.nativeElement, 'hidden', originalContentHidden);\n\n        if (this._div !== null) {\n            this.renderer.removeChild(this.parentElement, this._div);\n\n            this._div = null;\n            this._activeElementIndex = -1;\n        }\n    }\n\n    private getHighlightedText(searchText: string, caseSensitive: boolean, exactMatch: boolean) {\n        this.appendDiv();\n\n        const stringValue = String(this.value);\n        const contentStringResolved = !caseSensitive ? stringValue.toLowerCase() : stringValue;\n        const searchTextResolved = !caseSensitive ? searchText.toLowerCase() : searchText;\n\n        let matchCount = 0;\n\n        if (exactMatch) {\n            if (contentStringResolved === searchTextResolved) {\n                // tslint:disable-next-line:max-line-length\n                this.appendSpan(`<span class=\"${this._defaultCssClass} ${this.cssClass ? this.cssClass : ''}\">${stringValue}</span>`);\n                matchCount++;\n            } else {\n                this.appendText(stringValue);\n            }\n        } else {\n            let foundIndex = contentStringResolved.indexOf(searchTextResolved, 0);\n            let previousMatchEnd = 0;\n\n            while (foundIndex !== -1) {\n                const start = foundIndex;\n                const end = foundIndex + searchTextResolved.length;\n\n                this.appendText(stringValue.substring(previousMatchEnd, start));\n                // tslint:disable-next-line:max-line-length\n                this.appendSpan(`<span class=\"${this._defaultCssClass} ${this.cssClass ? this.cssClass : ''}\">${stringValue.substring(start, end)}</span>`);\n\n                previousMatchEnd = end;\n                matchCount++;\n\n                foundIndex = contentStringResolved.indexOf(searchTextResolved, end);\n            }\n\n            this.appendText(stringValue.substring(previousMatchEnd, stringValue.length));\n        }\n\n        return matchCount;\n    }\n\n    private appendText(text: string) {\n        const textElement = this.renderer.createText(text);\n        this.renderer.appendChild(this._div, textElement);\n    }\n\n    private appendSpan(outerHTML: string) {\n        const span = this.renderer.createElement('span');\n        this.renderer.appendChild(this._div, span);\n        this.renderer.setProperty(span, 'outerHTML', outerHTML);\n    }\n\n    private appendDiv() {\n        this._div = this.renderer.createElement('div');\n        if ( this.containerClass) {\n            this.renderer.addClass(this._div, this.containerClass);\n        }\n        this.renderer.appendChild(this.parentElement, this._div);\n    }\n\n    private searchNeedsEvaluation(text: string, caseSensitive: boolean, exactMatch: boolean): boolean {\n        const searchedText = this._lastSearchInfo.searchedText;\n\n        return !this._nodeWasRemoved &&\n            (searchedText === null ||\n                searchedText !== text ||\n                this._lastSearchInfo.content !== this.value ||\n                this._lastSearchInfo.caseSensitive !== caseSensitive ||\n                this._lastSearchInfo.exactMatch !== exactMatch ||\n                this._forceEvaluation);\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxTextHighlightDirective],\n    exports: [IgxTextHighlightDirective]\n})\nexport class IgxTextHighlightModule { }\n","import { Directive, ElementRef, HostListener, Input, NgModule } from '@angular/core';\n\n@Directive({\n    exportAs: 'igxTextSelection',\n    selector: '[igxTextSelection]'\n})\nexport class IgxTextSelectionDirective {\n\n    private selectionState = true;\n\n    /**\n     * Returns whether the input element is selectable through the directive.\n     *\n     * ```typescript\n     * // get\n     * @ViewChild('firstName',\n     *  {read: IgxTextSelectionDirective})\n     * public firstName: IgxTextSelectionDirective;\n     *\n     * public getFirstNameSelectionStatus() {\n     *  return this.firstName.selected;\n     * }\n     * ```\n     */\n    @Input('igxTextSelection')\n    get selected(): boolean {\n        return this.selectionState;\n    }\n\n    /**\n     *  Determines whether the input element could be selected through the directive.\n     *\n     *```html\n     * <!--set-->\n     * <input\n     *   type=\"text\"\n     *   id=\"firstName\"\n     *   [igxTextSelection]=\"true\">\n     * </input>\n     *\n     * <input\n     *   type=\"text\"\n     *   id=\"lastName\"\n     *   igxTextSelection\n     *   [selected]=\"true\">\n     * </input>\n     * ```\n     */\n    set selected(val: boolean) {\n        this.selectionState = val;\n    }\n\n    /**\n     * Returns the nativeElement of the element where the directive was applied.\n     *\n     * ```html\n     * <input\n     *   type=\"text\"\n    *    id=\"firstName\"\n     *   igxTextSelection>\n     * </input>\n     * ```\n     *\n     * ```typescript\n     * @ViewChild('firstName',\n     *  {read: IgxTextSelectionDirective})\n     * public inputElement: IgxTextSelectionDirective;\n     *\n     * public getNativeElement() {\n     *  return this.inputElement.nativeElement;\n     * }\n     * ```\n     */\n    get nativeElement() {\n        return this.element.nativeElement;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('focus')\n    onFocus() {\n        this.trigger();\n    }\n\n    constructor(private element: ElementRef) { }\n\n    /**\n     * Triggers the selection of the element if it is marked as selectable.\n     *\n     * ```html\n     * <input\n     *   type=\"text\"\n     *   id=\"firstName\"\n     *   igxTextSelection>\n     * </input>\n     * ```\n     *\n     * ```typescript\n     * @ViewChild('firstName',\n     *  {read: IgxTextSelectionDirective})\n     * public inputElement: IgxTextSelectionDirective;\n     *\n     * public triggerElementSelection() {\n     *  this.inputElement.trigger();\n     * }\n     * ```\n     */\n    trigger() {\n        if (this.selected && this.nativeElement.value.length) {\n            requestAnimationFrame(() => this.nativeElement.setSelectionRange(0, this.nativeElement.value.length));\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxTextSelectionDirective],\n    exports: [IgxTextSelectionDirective]\n})\nexport class IgxTextSelectionModule { }\n","import {\n    Directive, ElementRef, HostListener, Input, NgModule, ChangeDetectorRef, OnInit,\n    Output, EventEmitter, Optional, HostBinding, Inject\n} from '@angular/core';\nimport { useAnimation } from '@angular/animations';\nimport { scaleInCenter } from '../../animations/scale/index';\nimport { fadeOut } from '../../animations/fade/index';\nimport { IgxOverlayService } from '../../services/overlay/overlay';\nimport { HorizontalAlignment, AutoPositionStrategy, PositionSettings, OverlaySettings } from '../../services';\nimport { CommonModule } from '@angular/common';\nimport { IgxNavigationService } from '../../core/navigation';\nimport { IgxToggleDirective, IgxToggleActionDirective } from '../toggle/toggle.directive';\nimport { IBaseEventArgs } from '../../core/utils';\n\nexport interface ITooltipShowEventArgs extends IBaseEventArgs {\n    target: IgxTooltipTargetDirective;\n    tooltip: IgxTooltipDirective;\n    cancel: boolean;\n}\nexport interface ITooltipHideEventArgs extends IBaseEventArgs {\n    target: IgxTooltipTargetDirective;\n    tooltip: IgxTooltipDirective;\n    cancel: boolean;\n}\n\n/**\n * **Ignite UI for Angular Tooltip Target** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/tooltip.html)\n *\n * The Ignite UI for Angular Tooltip Target directive is used to mark an HTML element in the markup as one that has a tooltip.\n * The tooltip target is used in combination with the Ignite UI for Angular Tooltip by assigning the exported tooltip reference to the\n * target's selector property.\n *\n * Example:\n * ```html\n * <button [igxTooltipTarget]=\"tooltipRef\">Hover me</button>\n * <span #tooltipRef=\"tooltip\" igxTooltip>Hello there, I am a tooltip!</span>\n * ```\n */\n@Directive({\n    exportAs: 'tooltipTarget',\n    selector: '[igxTooltipTarget]'\n})\nexport class IgxTooltipTargetDirective extends IgxToggleActionDirective implements OnInit {\n    /**\n     * Gets/sets the amount of milliseconds that should pass before showing the tooltip.\n     *\n     * ```typescript\n     * // get\n     * let tooltipShowDelay = this.tooltipTarget.showDelay;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <button [igxTooltipTarget]=\"tooltipRef\" showDelay=\"1500\">Hover me</button>\n     * <span #tooltipRef=\"tooltip\" igxTooltip>Hello there, I am a tooltip!</span>\n     * ```\n     */\n    @Input('showDelay')\n    public showDelay = 500;\n\n    /**\n     * Gets/sets the amount of milliseconds that should pass before hiding the tooltip.\n     *\n     * ```typescript\n     * // get\n     * let tooltipHideDelay = this.tooltipTarget.hideDelay;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <button [igxTooltipTarget]=\"tooltipRef\" hideDelay=\"1500\">Hover me</button>\n     * <span #tooltipRef=\"tooltip\" igxTooltip>Hello there, I am a tooltip!</span>\n     * ```\n     */\n    @Input('hideDelay')\n    public hideDelay = 500;\n\n    /**\n     * Specifies if the tooltip should not show when hovering its target with the mouse. (defaults to false)\n     * While setting this property to 'true' will disable the user interactions that shows/hides the tooltip,\n     * the developer will still be able to show/hide the tooltip through the API.\n     *\n     * ```typescript\n     * // get\n     * let tooltipDisabledValue = this.tooltipTarget.tooltipDisabled;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <button [igxTooltipTarget]=\"tooltipRef\" [tooltipDisabled]=\"true\">Hover me</button>\n     * <span #tooltipRef=\"tooltip\" igxTooltip>Hello there, I am a tooltip!</span>\n     * ```\n     */\n    @Input('tooltipDisabled')\n    public tooltipDisabled = false;\n\n    /**\n     * @hidden\n     */\n    @Input('igxTooltipTarget')\n    set target(target: any) {\n        if (target !== null && target !== '') {\n            this._target = target;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    get target(): any {\n        if (typeof this._target === 'string') {\n            return this._navigationService.get(this._target);\n        }\n        return this._target;\n    }\n\n    /**\n     * Gets the respective native element of the directive.\n     *\n     * ```typescript\n     * let tooltipTargetElement = this.tooltipTarget.nativeElement;\n     * ```\n     */\n    public get nativeElement() {\n        return this._element.nativeElement;\n    }\n\n    /**\n     * Indicates if the tooltip that is is associated with this target is currently hidden.\n     *\n     * ```typescript\n     * let tooltipHiddenValue = this.tooltipTarget.tooltipHidden;\n     * ```\n     */\n    public get tooltipHidden(): boolean {\n        return !this.target || this.target.collapsed;\n    }\n\n    /**\n     * Emits an event when the tooltip that is associated with this target starts showing.\n     * This event is fired before the start of the countdown to showing the tooltip.\n     *\n     * ```typescript\n     * tooltipShowing(args: ITooltipShowEventArgs) {\n     *    alert(\"Tooltip started showing!\");\n     * }\n     * ```\n     *\n     * ```html\n     * <button [igxTooltipTarget]=\"tooltipRef\"\n     *         (onTooltipShow)='tooltipShowing($event)'>Hover me</button>\n     * <span #tooltipRef=\"tooltip\" igxTooltip>Hello there, I am a tooltip!</span>\n     * ```\n     */\n    @Output()\n    public onTooltipShow = new EventEmitter<ITooltipShowEventArgs>();\n\n    /**\n     * Emits an event when the tooltip that is associated with this target starts hiding.\n     * This event is fired before the start of the countdown to hiding the tooltip.\n     *\n     * ```typescript\n     * tooltipHiding(args: ITooltipHideEventArgs) {\n     *    alert(\"Tooltip started hiding!\");\n     * }\n     * ```\n     *\n     * ```html\n     * <button [igxTooltipTarget]=\"tooltipRef\"\n     *         (onTooltipHide)='tooltipHiding($event)'>Hover me</button>\n     * <span #tooltipRef=\"tooltip\" igxTooltip>Hello there, I am a tooltip!</span>\n     * ```\n     */\n    @Output()\n    public onTooltipHide = new EventEmitter<ITooltipHideEventArgs>();\n\n    constructor(private _element: ElementRef,\n        @Optional() private _navigationService: IgxNavigationService) {\n        super(_element, _navigationService);\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        super.ngOnInit();\n\n        const positionSettings: PositionSettings = {\n            target: this.nativeElement,\n            horizontalDirection: HorizontalAlignment.Center,\n            horizontalStartPoint: HorizontalAlignment.Center,\n            openAnimation: useAnimation(scaleInCenter, { params: { duration: '150ms' } }),\n            closeAnimation: useAnimation(fadeOut, { params: { duration: '75ms' } })\n        };\n\n        this._overlayDefaults.positionStrategy = new AutoPositionStrategy(positionSettings);\n        this._overlayDefaults.closeOnOutsideClick = false;\n    }\n\n    private checkOutletAndOutsideClick() {\n        if (this.outlet) {\n            this._overlayDefaults.outlet = this.outlet;\n        }\n    }\n\n    private get mergedOverlaySettings() {\n        return Object.assign({}, this._overlayDefaults, this.overlaySettings);\n    }\n\n    // Return true if the execution in onMouseEnter should be terminated after this method\n    private preMouseEnterCheck() {\n        // If tooltip is about to be opened\n        if (this.target.toBeShown) {\n            clearTimeout(this.target.timeoutId);\n            this.target.toBeShown = false;\n        }\n\n        // If Tooltip is opened or about to be hidden\n        if (!this.target.collapsed || this.target.toBeHidden) {\n            clearTimeout(this.target.timeoutId);\n\n            const hidingArgs = { target: this, tooltip: this.target, cancel: false };\n            this.onTooltipHide.emit(hidingArgs);\n\n            if (hidingArgs.cancel) {\n                return true;\n            }\n\n            //  if close animation has started finish it, or close the tooltip with no animation\n            this.target.forceClose(this.mergedOverlaySettings);\n            this.target.toBeHidden = false;\n        }\n\n        return false;\n    }\n\n    // Return true if the execution in onMouseLeave should be terminated after this method\n    private preMouseLeaveCheck(): boolean {\n        clearTimeout(this.target.timeoutId);\n\n        // If tooltip is about to be opened\n        if (this.target.toBeShown) {\n            this.target.toBeShown = false;\n            this.target.toBeHidden = false;\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('document:keydown.escape', ['$event'])\n    public onKeydownEscape(event) {\n        const hidingArgs = { target: this, tooltip: this.target, cancel: false };\n        this.onTooltipHide.emit(hidingArgs);\n\n        if (hidingArgs.cancel) {\n            return;\n        }\n\n        this.target.toBeHidden = true;\n        this.target.close();\n        this.target.toBeHidden = false;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('click')\n    public onClick() {\n        if (!this.target.collapsed) {\n            const hidingArgs = { target: this, tooltip: this.target, cancel: false };\n            this.onTooltipHide.emit(hidingArgs);\n\n            if (hidingArgs.cancel) {\n                return;\n            }\n\n            this.target.forceClose(this.mergedOverlaySettings);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('mouseenter')\n    public onMouseEnter() {\n        if (this.tooltipDisabled) {\n            return;\n        }\n\n        this.checkOutletAndOutsideClick();\n        const shouldReturn = this.preMouseEnterCheck();\n        if (shouldReturn) {\n            return;\n        }\n\n        const showingArgs = { target: this, tooltip: this.target, cancel: false };\n        this.onTooltipShow.emit(showingArgs);\n\n        if (showingArgs.cancel) {\n            return;\n        }\n\n        this.target.toBeShown = true;\n        this.target.timeoutId = setTimeout(() => {\n            this.target.open(this.mergedOverlaySettings); // Call open() of IgxTooltipDirective\n            this.target.toBeShown = false;\n        }, this.showDelay);\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('mouseleave')\n    public onMouseLeave() {\n        if (this.tooltipDisabled) {\n            return;\n        }\n\n        this.checkOutletAndOutsideClick();\n        const shouldReturn = this.preMouseLeaveCheck();\n        if (shouldReturn || this.target.collapsed) {\n            return;\n        }\n\n        const hidingArgs = { target: this, tooltip: this.target, cancel: false };\n        this.onTooltipHide.emit(hidingArgs);\n\n        if (hidingArgs.cancel) {\n            return;\n        }\n\n        this.target.toBeHidden = true;\n        this.target.timeoutId = setTimeout(() => {\n            this.target.close(); // Call close() of IgxTooltipDirective\n            this.target.toBeHidden = false;\n        }, this.hideDelay);\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('touchstart', ['$event'])\n    public onTouchStart(event) {\n        if (this.tooltipDisabled) {\n            return;\n        }\n\n        this.showTooltip();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('document:touchstart', ['$event'])\n    public onDocumentTouchStart(event) {\n        if (this.tooltipDisabled) {\n            return;\n        }\n\n        if (this.nativeElement !== event.target &&\n            !this.nativeElement.contains(event.target)\n        ) {\n            this.hideTooltip();\n        }\n    }\n\n    /**\n     * Shows the tooltip by respecting the 'showDelay' property.\n     *\n     * ```typescript\n     * this.tooltipTarget.showTooltip();\n     * ```\n     */\n    public showTooltip() {\n        clearTimeout(this.target.timeoutId);\n\n        if (!this.target.collapsed) {\n            const hidingArgs = { target: this, tooltip: this.target, cancel: false };\n            this.onTooltipHide.emit(hidingArgs);\n\n            if (hidingArgs.cancel) {\n                return;\n            }\n            //  if close animation has started finish it, or close the tooltip with no animation\n            this.target.forceClose(this.mergedOverlaySettings);\n            this.target.toBeHidden = false;\n        }\n\n        const showingArgs = { target: this, tooltip: this.target, cancel: false };\n        this.onTooltipShow.emit(showingArgs);\n\n        if (showingArgs.cancel) {\n            return;\n        }\n\n        this.target.toBeShown = true;\n        this.target.timeoutId = setTimeout(() => {\n            this.target.open(this.mergedOverlaySettings); // Call open() of IgxTooltipDirective\n            this.target.toBeShown = false;\n        }, this.showDelay);\n    }\n\n    /**\n     * Hides the tooltip by respecting the 'hideDelay' property.\n     *\n     * ```typescript\n     * this.tooltipTarget.hideTooltip();\n     * ```\n     */\n    public hideTooltip() {\n        if (this.target.collapsed && this.target.toBeShown) {\n            clearTimeout(this.target.timeoutId);\n        }\n\n        if (this.target.collapsed || this.target.toBeHidden) {\n            return;\n        }\n\n        const hidingArgs = { target: this, tooltip: this.target, cancel: false };\n        this.onTooltipHide.emit(hidingArgs);\n\n        if (hidingArgs.cancel) {\n            return;\n        }\n\n        this.target.toBeHidden = true;\n        this.target.timeoutId = setTimeout(() => {\n            this.target.close(); // Call close() of IgxTooltipDirective\n            this.target.toBeHidden = false;\n        }, this.hideDelay);\n    }\n}\n\nlet NEXT_ID = 0;\n/**\n * **Ignite UI for Angular Tooltip** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/tooltip.html)\n *\n * The Ignite UI for Angular Tooltip directive is used to mark an HTML element in the markup as one that should behave as a tooltip.\n * The tooltip is used in combination with the Ignite UI for Angular Tooltip Target by assigning the exported tooltip reference to the\n * respective target's selector property.\n *\n * Example:\n * ```html\n * <button [igxTooltipTarget]=\"tooltipRef\">Hover me</button>\n * <span #tooltipRef=\"tooltip\" igxTooltip>Hello there, I am a tooltip!</span>\n * ```\n */\n@Directive({\n    exportAs: 'tooltip',\n    selector: '[igxTooltip]'\n})\nexport class IgxTooltipDirective extends IgxToggleDirective {\n\n    /**\n     * @hidden\n     */\n    public timeoutId;\n\n    /**\n     * @hidden\n     * Returns whether close time out has started\n     */\n    public toBeHidden = false;\n\n    /**\n     * @hidden\n     * Returns whether open time out has started\n     */\n    public toBeShown = false;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-tooltip--hidden')\n    public get hiddenClass() {\n        return this.collapsed;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-tooltip--desktop')\n    public get defaultClass() {\n        return !this.collapsed;\n    }\n\n    /**\n     * Gets/sets any tooltip related data.\n     * The 'context' can be used for storing any information that is necessary\n     * to access when working with the tooltip.\n     *\n     * ```typescript\n     * // get\n     * let tooltipContext = this.tooltip.context;\n     * ```\n     *\n     * ```typescript\n     * // set\n     * this.tooltip.context = \"Tooltip's context\";\n     * ```\n     */\n    @Input('context')\n    public context;\n\n    /**\n     * Identifier for the tooltip.\n     * If this is property is not explicitly set, it will be automatically generated.\n     *\n     * ```typescript\n     * let tooltipId = this.tooltip.id;\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-tooltip-${NEXT_ID++}`;\n\n    /**\n     * Get the role attribute of the tooltip.\n     *\n     * ```typescript\n     * let tooltipRole = this.tooltip.role;\n     * ```\n     */\n    @HostBinding('attr.role')\n    public get role() {\n        return 'tooltip';\n    }\n\n    /** @hidden */\n    constructor(\n        elementRef: ElementRef,\n        cdr: ChangeDetectorRef,\n        @Inject(IgxOverlayService) overlayService: IgxOverlayService,\n        @Optional() navigationService: IgxNavigationService) {\n        // D.P. constructor duplication due to es6 compilation, might be obsolete in the future\n        super(elementRef, cdr, overlayService, navigationService);\n    }\n\n    /**\n     * If there is open animation in progress this method will finish is.\n     * If there is no open animation in progress this method will open the toggle with no animation.\n     * @param overlaySettings setting to use for opening the toggle\n     */\n    protected forceOpen(overlaySettings?: OverlaySettings) {\n        const info = this.overlayService.getOverlayById(this._overlayId);\n        const hasOpenAnimation = info ? info.openAnimationPlayer : false;\n        if (hasOpenAnimation) {\n            info.openAnimationPlayer.finish();\n            info.openAnimationPlayer.reset();\n            info.openAnimationPlayer = null;\n        } else if (this.collapsed) {\n            const animation = overlaySettings.positionStrategy.settings.openAnimation;\n            overlaySettings.positionStrategy.settings.openAnimation = null;\n            this.open(overlaySettings);\n            overlaySettings.positionStrategy.settings.openAnimation = animation;\n        }\n    }\n\n    /**\n     * If there is close animation in progress this method will finish is.\n     * If there is no close animation in progress this method will close the toggle with no animation.\n     * @param overlaySettings settings to use for closing the toggle\n     */\n    protected forceClose(overlaySettings?: OverlaySettings) {\n        const info = this.overlayService.getOverlayById(this._overlayId);\n        const hasCloseAnimation = info ? info.closeAnimationPlayer : false;\n\n        if (hasCloseAnimation) {\n            info.closeAnimationPlayer.finish();\n            info.closeAnimationPlayer.reset();\n            info.closeAnimationPlayer = null;\n        } else if (!this.collapsed) {\n            const animation = overlaySettings.positionStrategy.settings.closeAnimation;\n            overlaySettings.positionStrategy.settings.closeAnimation = null;\n            this.close();\n            overlaySettings.positionStrategy.settings.closeAnimation = animation;\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxTooltipDirective, IgxTooltipTargetDirective],\n    exports: [IgxTooltipDirective, IgxTooltipTargetDirective],\n    imports: [CommonModule],\n    providers: [IgxOverlayService]\n})\nexport class IgxTooltipModule { }\n\n","/**\n * Provides base filtering operations\n * Implementations should be Singleton\n *\n * @export\n */\nexport class IgxFilteringOperand {\n    protected static _instance: IgxFilteringOperand = null;\n    public operations: IFilteringOperation[];\n\n    public constructor() {\n        this.operations = [{\n            name: 'null',\n            isUnary: true,\n            iconName: 'is_null',\n            logic: (target: any) => {\n                return target === null;\n            }\n        }, {\n            name: 'notNull',\n            isUnary: true,\n            iconName: 'is_not_null',\n            logic: (target: any) => {\n                return target !== null;\n            }\n        }, {\n            name: 'in',\n            isUnary: false,\n            iconName: 'is_in',\n            hidden: true,\n            logic: (target: any, searchVal: Set<any>) => {\n                return this.findValueInSet(target, searchVal);\n            }\n        }];\n    }\n\n    public static instance(): IgxFilteringOperand {\n        return this._instance || (this._instance = new this());\n    }\n\n    /**\n     * @hidden\n     */\n    protected findValueInSet(target: any, searchVal: Set<any>) {\n        return searchVal.has(target);\n    }\n\n    /**\n     * Returns an array of names of the conditions which are visible in the UI\n     */\n    public conditionList(): string[] {\n        return this.operations.filter(f => !f.hidden).map((element) => element.name);\n    }\n\n    /**\n     * Returns an instance of the condition with the specified name.\n     * @param name The name of the condition.\n     */\n    public condition(name: string): IFilteringOperation {\n        return this.operations.find((element) => element.name === name);\n    }\n\n    /**\n     * Adds a new condition to the filtering operations.\n     * @param operation The filtering operation.\n     */\n    public append(operation: IFilteringOperation) {\n        this.operations.push(operation);\n    }\n}\n\n/**\n * Provides filtering operations for booleans\n *\n * @export\n */\nexport class IgxBooleanFilteringOperand extends IgxFilteringOperand {\n    protected constructor() {\n        super();\n        this.operations = [{\n            name: 'all',\n            isUnary: true,\n            iconName: 'all',\n            logic: (target: boolean) => {\n                return true;\n            }\n        }, {\n            name: 'true',\n            isUnary: true,\n            iconName: 'is_true',\n            logic: (target: boolean) => {\n                return !!(target && target !== null && target !== undefined);\n            }\n        }, {\n            name: 'false',\n            isUnary: true,\n            iconName: 'is_false',\n            logic: (target: boolean) => {\n                return !target && target !== null && target !== undefined;\n            }\n        }, {\n            name: 'empty',\n            isUnary: true,\n            iconName: 'empty',\n            logic: (target: boolean) => {\n                return target === null || target === undefined;\n            }\n        }, {\n            name: 'notEmpty',\n            isUnary: true,\n            iconName: 'not_empty',\n            logic: (target: boolean) => {\n                return target !== null && target !== undefined;\n            }\n        }].concat(this.operations);\n    }\n}\n\n/**\n * Provides filtering operations for Dates\n *\n * @export\n */\nexport class IgxDateFilteringOperand extends IgxFilteringOperand {\n    protected constructor() {\n        super();\n        this.operations = [{\n            name: 'equals',\n            isUnary: false,\n            iconName: 'equals',\n            logic: (target: Date, searchVal: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                const targetp = IgxDateFilteringOperand.getDateParts(target, 'yMd');\n                const searchp = IgxDateFilteringOperand.getDateParts(searchVal, 'yMd');\n                return targetp.year === searchp.year &&\n                    targetp.month === searchp.month &&\n                    targetp.day === searchp.day;\n            }\n        }, {\n            name: 'doesNotEqual',\n            isUnary: false,\n            iconName: 'not_equal',\n            logic: (target: Date, searchVal: Date) => {\n                if (!target) {\n                    return true;\n                }\n\n                this.validateInputData(target);\n\n                const targetp = IgxDateFilteringOperand.getDateParts(target, 'yMd');\n                const searchp = IgxDateFilteringOperand.getDateParts(searchVal, 'yMd');\n                return targetp.year !== searchp.year ||\n                    targetp.month !== searchp.month ||\n                    targetp.day !== searchp.day;\n            }\n        }, {\n            name: 'before',\n            isUnary: false,\n            iconName: 'is_before',\n            logic: (target: Date, searchVal: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                return target < searchVal;\n            }\n        }, {\n            name: 'after',\n            isUnary: false,\n            iconName: 'is_after',\n            logic: (target: Date, searchVal: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                return target > searchVal;\n            }\n        }, {\n            name: 'today',\n            isUnary: true,\n            iconName: 'today',\n            logic: (target: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                const d = IgxDateFilteringOperand.getDateParts(target, 'yMd');\n                const now = IgxDateFilteringOperand.getDateParts(new Date(), 'yMd');\n                return d.year === now.year &&\n                    d.month === now.month &&\n                    d.day === now.day;\n            }\n        }, {\n            name: 'yesterday',\n            isUnary: true,\n            iconName: 'yesterday',\n            logic: (target: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                const td = IgxDateFilteringOperand.getDateParts(target, 'yMd');\n                const y = ((d) => new Date(d.setDate(d.getDate() - 1)))(new Date());\n                const yesterday = IgxDateFilteringOperand.getDateParts(y, 'yMd');\n                return td.year === yesterday.year &&\n                    td.month === yesterday.month &&\n                    td.day === yesterday.day;\n            }\n        }, {\n            name: 'thisMonth',\n            isUnary: true,\n            iconName: 'this_month',\n            logic: (target: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                const d = IgxDateFilteringOperand.getDateParts(target, 'yM');\n                const now = IgxDateFilteringOperand.getDateParts(new Date(), 'yM');\n                return d.year === now.year &&\n                    d.month === now.month;\n            }\n        }, {\n            name: 'lastMonth',\n            isUnary: true,\n            iconName: 'last_month',\n            logic: (target: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                const d = IgxDateFilteringOperand.getDateParts(target, 'yM');\n                const now = IgxDateFilteringOperand.getDateParts(new Date(), 'yM');\n                if (!now.month) {\n                    now.month = 11;\n                    now.year -= 1;\n                } else {\n                    now.month--;\n                }\n                return d.year === now.year &&\n                    d.month === now.month;\n            }\n        }, {\n            name: 'nextMonth',\n            isUnary: true,\n            iconName: 'next_month',\n            logic: (target: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                const d = IgxDateFilteringOperand.getDateParts(target, 'yM');\n                const now = IgxDateFilteringOperand.getDateParts(new Date(), 'yM');\n                if (now.month === 11) {\n                    now.month = 0;\n                    now.year += 1;\n                } else {\n                    now.month++;\n                }\n                return d.year === now.year &&\n                    d.month === now.month;\n            }\n        }, {\n            name: 'thisYear',\n            isUnary: true,\n            iconName: 'this_year',\n            logic: (target: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                const d = IgxDateFilteringOperand.getDateParts(target, 'y');\n                const now = IgxDateFilteringOperand.getDateParts(new Date(), 'y');\n                return d.year === now.year;\n            }\n        }, {\n            name: 'lastYear',\n            isUnary: true,\n            iconName: 'last_year',\n            logic: (target: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                const d = IgxDateFilteringOperand.getDateParts(target, 'y');\n                const now = IgxDateFilteringOperand.getDateParts(new Date(), 'y');\n                return d.year === now.year - 1;\n            }\n        }, {\n            name: 'nextYear',\n            isUnary: true,\n            iconName: 'next_year',\n            logic: (target: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                const d = IgxDateFilteringOperand.getDateParts(target, 'y');\n                const now = IgxDateFilteringOperand.getDateParts(new Date(), 'y');\n                return d.year === now.year + 1;\n            }\n        }, {\n            name: 'empty',\n            isUnary: true,\n            iconName: 'empty',\n            logic: (target: Date) => {\n                return target === null || target === undefined;\n            }\n        }, {\n            name: 'notEmpty',\n            isUnary: true,\n            iconName: 'not_empty',\n            logic: (target: Date) => {\n                return target !== null && target !== undefined;\n            }\n        }].concat(this.operations);\n    }\n\n    /**\n     * Splits a Date object into parts\n     *\n     * @memberof IgxDateFilteringOperand\n     */\n    public static getDateParts(date: Date, dateFormat?: string): IDateParts {\n        const res = {\n            day: null,\n            hours: null,\n            milliseconds: null,\n            minutes: null,\n            month: null,\n            seconds: null,\n            year: null\n        };\n        if (!date || !dateFormat) {\n            return res;\n        }\n        if (dateFormat.indexOf('y') >= 0) {\n            res.year = date.getFullYear();\n        }\n        if (dateFormat.indexOf('M') >= 0) {\n            res.month = date.getMonth();\n        }\n        if (dateFormat.indexOf('d') >= 0) {\n            res.day = date.getDate();\n        }\n        if (dateFormat.indexOf('h') >= 0) {\n            res.hours = date.getHours();\n        }\n        if (dateFormat.indexOf('m') >= 0) {\n            res.minutes = date.getMinutes();\n        }\n        if (dateFormat.indexOf('s') >= 0) {\n            res.seconds = date.getSeconds();\n        }\n        if (dateFormat.indexOf('f') >= 0) {\n            res.milliseconds = date.getMilliseconds();\n        }\n        return res;\n    }\n\n    private validateInputData(target: Date) {\n        if (!(target instanceof Date)) {\n            throw new Error('Could not perform filtering on \\'date\\' column because the datasource object type is not \\'Date\\'.');\n        }\n    }\n\n    protected findValueInSet(target: any, searchVal: Set<any>) {\n        if (!target) { return false; }\n        return searchVal.has(new Date(target.getFullYear(), target.getMonth(), target.getDate()).toISOString());\n    }\n}\n\n/**\n * Provides filtering operations for numbers\n *\n * @export\n */\nexport class IgxNumberFilteringOperand extends IgxFilteringOperand {\n    protected constructor() {\n        super();\n        this.operations = [{\n            name: 'equals',\n            isUnary: false,\n            iconName: 'equals',\n            logic: (target: number, searchVal: number) => {\n                return target === searchVal;\n            }\n        }, {\n            name: 'doesNotEqual',\n            isUnary: false,\n            iconName: 'not_equal',\n            logic: (target: number, searchVal: number) => {\n                return target !== searchVal;\n            }\n        }, {\n            name: 'greaterThan',\n            isUnary: false,\n            iconName: 'greater_than',\n            logic: (target: number, searchVal: number) => {\n                return target > searchVal;\n            }\n        }, {\n            name: 'lessThan',\n            isUnary: false,\n            iconName: 'less_than',\n            logic: (target: number, searchVal: number) => {\n                return target < searchVal;\n            }\n        }, {\n            name: 'greaterThanOrEqualTo',\n            isUnary: false,\n            iconName: 'greater_than_or_equal',\n            logic: (target: number, searchVal: number) => {\n                return target >= searchVal;\n            }\n        }, {\n            name: 'lessThanOrEqualTo',\n            isUnary: false,\n            iconName: 'less_than_or_equal',\n            logic: (target: number, searchVal: number) => {\n                return target <= searchVal;\n            }\n        }, {\n            name: 'empty',\n            isUnary: true,\n            iconName: 'empty',\n            logic: (target: number) => {\n                return target === null || target === undefined || isNaN(target);\n            }\n        }, {\n            name: 'notEmpty',\n            isUnary: true,\n            iconName: 'not_empty',\n            logic: (target: number) => {\n                return target !== null && target !== undefined && !isNaN(target);\n            }\n        }].concat(this.operations);\n    }\n}\n\n/**\n * Provides filtering operations for strings\n *\n * @export\n */\nexport class IgxStringFilteringOperand extends IgxFilteringOperand {\n    protected constructor() {\n        super();\n        this.operations = [{\n            name: 'contains',\n            isUnary: false,\n            iconName: 'contains',\n            logic: (target: string, searchVal: string, ignoreCase?: boolean) => {\n                const search = IgxStringFilteringOperand.applyIgnoreCase(searchVal, ignoreCase);\n                target = IgxStringFilteringOperand.applyIgnoreCase(target, ignoreCase);\n                return target.indexOf(search) !== -1;\n            }\n        }, {\n            name: 'doesNotContain',\n            isUnary: false,\n            iconName: 'does_not_contain',\n            logic: (target: string, searchVal: string, ignoreCase?: boolean) => {\n                const search = IgxStringFilteringOperand.applyIgnoreCase(searchVal, ignoreCase);\n                target = IgxStringFilteringOperand.applyIgnoreCase(target, ignoreCase);\n                return target.indexOf(search) === -1;\n            }\n        }, {\n            name: 'startsWith',\n            isUnary: false,\n            iconName: 'starts_with',\n            logic: (target: string, searchVal: string, ignoreCase?: boolean) => {\n                const search = IgxStringFilteringOperand.applyIgnoreCase(searchVal, ignoreCase);\n                target = IgxStringFilteringOperand.applyIgnoreCase(target, ignoreCase);\n                return target.startsWith(search);\n            }\n        }, {\n            name: 'endsWith',\n            isUnary: false,\n            iconName: 'ends_with',\n            logic: (target: string, searchVal: string, ignoreCase?: boolean) => {\n                const search = IgxStringFilteringOperand.applyIgnoreCase(searchVal, ignoreCase);\n                target = IgxStringFilteringOperand.applyIgnoreCase(target, ignoreCase);\n                return target.endsWith(search);\n            }\n        }, {\n            name: 'equals',\n            isUnary: false,\n            iconName: 'equals',\n            logic: (target: string, searchVal: string, ignoreCase?: boolean) => {\n                const search = IgxStringFilteringOperand.applyIgnoreCase(searchVal, ignoreCase);\n                target = IgxStringFilteringOperand.applyIgnoreCase(target, ignoreCase);\n                return target === search;\n            }\n        }, {\n            name: 'doesNotEqual',\n            isUnary: false,\n            iconName: 'not_equal',\n            logic: (target: string, searchVal: string, ignoreCase?: boolean) => {\n                const search = IgxStringFilteringOperand.applyIgnoreCase(searchVal, ignoreCase);\n                target = IgxStringFilteringOperand.applyIgnoreCase(target, ignoreCase);\n                return target !== search;\n            }\n        }, {\n            name: 'empty',\n            isUnary: true,\n            iconName: 'empty',\n            logic: (target: string) => {\n                return target === null || target === undefined || target.length === 0;\n            }\n        }, {\n            name: 'notEmpty',\n            isUnary: true,\n            iconName: 'not_empty',\n            logic: (target: string) => {\n                return target !== null && target !== undefined && target.length > 0;\n            }\n        }].concat(this.operations);\n    }\n\n    /**\n     * Applies case sensitivity on strings if provided\n     *\n     * @memberof IgxStringFilteringOperand\n     */\n    public static applyIgnoreCase(a: string, ignoreCase: boolean): string {\n        a = a || '';\n        // bulletproof\n        return ignoreCase ? ('' + a).toLowerCase() : a;\n    }\n}\n\n/**\n * Interface describing filtering operations\n *\n * @export\n */\nexport interface IFilteringOperation {\n    name: string;\n    isUnary: boolean;\n    iconName: string;\n    hidden?: boolean;\n    logic: (value: any, searchVal?: any, ignoreCase?: boolean) => boolean;\n}\n\n/**\n * Interface describing Date object in parts\n *\n * @export\n */\nexport interface IDateParts {\n    year: number;\n    month: number;\n    day: number;\n    hours: number;\n    minutes: number;\n    seconds: number;\n    milliseconds: number;\n}\n","import { IFilteringExpressionsTree } from './filtering-expressions-tree';\nimport { FilteringStrategy, IFilteringStrategy } from './filtering-strategy';\n\nexport const filteringStateDefaults = {\n    strategy: new FilteringStrategy()\n};\n\nexport declare interface IFilteringState {\n    expressionsTree: IFilteringExpressionsTree;\n    advancedExpressionsTree?: IFilteringExpressionsTree;\n    strategy?: IFilteringStrategy;\n}\n","import { ISortingExpression } from './sorting-expression.interface';\n\n/**\n * @hidden\n */\nexport class GroupedRecords extends Array<any> {}\n\nexport interface IGroupByRecord {\n    expression: ISortingExpression;\n    level: number;\n    records: GroupedRecords;\n    value: any;\n    groupParent: IGroupByRecord;\n    groups?: IGroupByRecord[];\n    height: number;\n }\n","import { Injectable, SecurityContext, Inject } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { DOCUMENT } from '@angular/common';\n\n/**\n * **Ignite UI for Angular Icon Service** -\n *\n * The Ignite UI Icon Service makes it easy for developers to include custom SVG images and use them with IgxIconComponent.\n * In addition it could be used to associate a custom class to be applied on IgxIconComponent according to given fontSet.\n *\n * Example:\n * ```typescript\n * this.iconService.registerFontSetAlias('material', 'material-icons');\n * this.iconService.addSvgIcon('aruba', '/assets/svg/country_flags/aruba.svg', 'svg-flags');\n * ```\n */\n\n@Injectable({\n    providedIn: 'root'\n})\n\nexport class IgxIconService {\n    private _fontSet = 'material-icons';\n    private _fontSetAliases = new Map<string, string>();\n    private _svgContainer: HTMLElement;\n    private _cachedSvgIcons: Set<string> = new Set<string>();\n\n    constructor(private _sanitizer: DomSanitizer, @Inject(DOCUMENT) private _document: any) { }\n\n    /**\n     *  Returns the default font set.\n     *```typescript\n     *   const defaultFontSet = this.iconService.defaultFontSet;\n     * ```\n     */\n    get defaultFontSet(): string {\n        return this._fontSet;\n    }\n\n    /**\n     *  Sets the default font set.\n     *```typescript\n     *   this.iconService.defaultFontSet = 'svg-flags';\n     * ```\n     */\n    set defaultFontSet(className: string) {\n        this._fontSet = className;\n    }\n\n    /**\n     *  Registers a custom class to be applied to IgxIconComponent for a given fontSet.\n     *```typescript\n     *   this.iconService.registerFontSetAlias('material', 'material-icons');\n     * ```\n     */\n    public registerFontSetAlias(alias: string, className: string = alias): this {\n        this._fontSetAliases.set(alias, className);\n        return this;\n    }\n\n    /**\n     *  Returns the custom class, if any, associated to a given fontSet.\n     *```typescript\n     *   const fontSetClass = this.iconService.fontSetClassName('material');\n     * ```\n     */\n    public fontSetClassName(alias: string): string {\n        return this._fontSetAliases.get(alias) || alias;\n    }\n\n    /**\n     *  Adds an SVG image to the cache. SVG source is an url.\n     *```typescript\n     *   this.iconService.addSvgIcon('aruba', '/assets/svg/country_flags/aruba.svg', 'svg-flags');\n     * ```\n     */\n    public addSvgIcon(iconName: string, url: string, fontSet: string = '') {\n        if (iconName && url) {\n            const safeUrl = this._sanitizer.bypassSecurityTrustResourceUrl(url);\n            if (!safeUrl) {\n                throw new Error(`The provided URL could not be processed as trusted resource URL by Angular's DomSanitizer: \"${url}\".`);\n            }\n\n            const sanitizedUrl = this._sanitizer.sanitize(SecurityContext.RESOURCE_URL, safeUrl);\n            if (!sanitizedUrl) {\n                throw new Error(`The URL provided was not trusted as a resource URL: \"${url}\".`);\n            }\n\n            this.fetchSvg(iconName, url, fontSet);\n        } else {\n            throw new Error('You should provide at least `iconName` and `url` to register an svg icon.');\n        }\n    }\n\n    /**\n     *  Adds an SVG image to the cache. SVG source is its text.\n     *```typescript\n     *   this.iconService.addSvgIcon('simple', '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 200\">\n     *   <path d=\"M74 74h54v54H74\" /></svg>', 'svg-flags');\n     * ```\n     */\n    public addSvgIconFromText(iconName: string, iconText: string, fontSet: string = '') {\n        if (iconName && iconText) {\n            this.cacheSvgIcon(iconName, iconText, fontSet);\n        } else {\n            throw new Error('You should provide at least `iconName` and `iconText` to register an svg icon.');\n        }\n    }\n\n    /**\n     *  Returns whether a given SVG image is present in the cache.\n     *```typescript\n     *   const isSvgCached = this.iconService.isSvgIconCached('aruba', 'svg-flags');\n     * ```\n     */\n    public isSvgIconCached(iconName: string, fontSet: string = ''): boolean {\n        const iconKey = this.getSvgIconKey(iconName, fontSet);\n        return this._cachedSvgIcons.has(iconKey);\n    }\n\n    /**\n     *  Returns the key of a cached SVG image.\n     *```typescript\n     *   const svgIconKey = this.iconService.getSvgIconKey('aruba', 'svg-flags');\n     * ```\n     */\n    public getSvgIconKey(iconName: string, fontSet: string = '') {\n        return fontSet + '_' + iconName;\n    }\n\n    /**\n     * @hidden\n     */\n    private fetchSvg(iconName: string, url: string, fontSet: string = '') {\n        const instance = this;\n        const httpRequest = new XMLHttpRequest();\n        httpRequest.open('GET', url, true);\n        httpRequest.responseType = 'text';\n\n        // load  when the result is ready, that includes HTTP errors like 404.\n        httpRequest.onload = function (event: ProgressEvent) {\n            if (event) {\n                const request = event.target as XMLHttpRequest;\n                if (request.status === 200) {\n                    instance.cacheSvgIcon(iconName, request.responseText, fontSet);\n                } else {\n                    throw new Error(`Could not fetch SVG from url: ${url}; error: ${request.status} (${request.statusText})`);\n                }\n            } else {\n                throw new Error(`Could not fetch SVG from url: ${url};`);\n            }\n        };\n\n        // error  when the request couldnt be made, e.g.network down or invalid URL.\n        httpRequest.onerror = function (event: ProgressEvent) {\n            if (event) {\n                const request = event.target as XMLHttpRequest;\n                throw new Error(`Could not fetch SVG from url: ${url}; error status code: ${request.status} (${request.statusText})`);\n            }\n            throw new Error(`Could not fetch SVG from url: ${url};`);\n        };\n\n        httpRequest.send();\n    }\n\n    /**\n     * @hidden\n     */\n    private cacheSvgIcon(iconName: string, value: string, fontSet: string = '') {\n        if (iconName && value) {\n            this.ensureSvgContainerCreated();\n\n            const div = this._document.createElement('DIV');\n            div.innerHTML = value;\n            const svg = div.querySelector('svg') as SVGElement;\n\n            if (svg) {\n                const iconKey = this.getSvgIconKey(iconName, fontSet);\n\n                svg.setAttribute('id', iconKey);\n                svg.setAttribute('fit', '');\n                svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');\n                svg.setAttribute('focusable', 'false'); // Disable IE11 default behavior to make SVGs focusable.\n\n                if (this._cachedSvgIcons.has(iconKey)) {\n                    const oldChild = this._svgContainer.querySelector(`svg[id='${iconKey}']`);\n                    this._svgContainer.removeChild(oldChild);\n                }\n\n                this._svgContainer.appendChild(svg);\n                this._cachedSvgIcons.add(iconKey);\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    private ensureSvgContainerCreated() {\n        if (!this._svgContainer) {\n            this._svgContainer = this._document.documentElement.querySelector('.igx-svg-container');\n            if (!this._svgContainer) {\n                this._svgContainer = this._document.createElement('DIV');\n                this._svgContainer.classList.add('igx-svg-container');\n                this._document.documentElement.appendChild(this._svgContainer);\n            }\n        }\n    }\n}\n","import { Component, ElementRef, HostBinding, Input, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { IgxIconService } from './icon.service';\n\n/**\n * Icon provides a way to include material icons to markup\n *\n * @igxModule IgxIconModule\n *\n * @igxTheme igx-icon-theme\n *\n * @igxKeywords icon, picture\n *\n * @igxGroup Display\n *\n * @remarks\n *\n * The Ignite UI Icon makes it easy for developers to include material design icons directly in their markup. The icons\n * support custom colors and can be marked as active or disabled using the `isActive` property. This will change the appearance\n * of the icon.\n *\n * @example\n * ```html\n * <igx-icon color=\"#00ff00\" isActive=\"true\">home</igx-icon>\n * ```\n */\nlet NEXT_ID = 0;\n\n@Component({\n    selector: 'igx-icon',\n    templateUrl: 'icon.component.html'\n})\n\nexport class IgxIconComponent implements OnInit {\n    @ViewChild('noLigature', { read: TemplateRef, static: true })\n    private noLigature: TemplateRef<HTMLElement>;\n\n    @ViewChild('explicitLigature', { read: TemplateRef, static: true })\n    private explicitLigature: TemplateRef<HTMLElement>;\n\n    @ViewChild('svgImage', { read: TemplateRef, static: true })\n    private svgImage: TemplateRef<HTMLElement>;\n\n    /**\n     *  This allows you to change the value of `class.igx-icon`. By default it's `igx-icon`.\n     *\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-icon')\n    public cssClass = 'igx-icon';\n\n    /**\n     *  This allows you to disable the `aria-hidden` attribute. By default it's applied.\n     * @example\n     *```typescript\n     *@ViewChild(\"MyIcon\") public icon: IgxIconComponent;\n     *constructor(private cdRef:ChangeDetectorRef) {}\n     *ngAfterViewInit() {\n     *    this.icon.ariaHidden = false;\n     *    this.cdRef.detectChanges();\n     *}\n     * ```\n     */\n    @HostBinding('attr.aria-hidden')\n    public ariaHidden = true;\n\n    /**\n    *  An @Input property that sets the value of the `id` attribute.\n    * @example\n    *```html\n    *<igx-icon id=\"igx-icon-1\" fontSet=\"material\">settings</igx-icon>\n    *```\n    */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-icon-${NEXT_ID++}`;\n\n    /**\n    *  An @Input property that sets the value of the `fontSet`. By default it's \"material\".\n    * @example\n    *```html\n    *<igx-icon fontSet=\"material\">settings</igx-icon>\n    *```\n    */\n    @Input('fontSet')\n    public font: string;\n\n    /**\n    *  An @Input property that allows you to disable the `active` property. By default it's applied.\n    * @example\n    *```html\n    *<igx-icon [isActive]=\"false\">settings</igx-icon>\n    *```\n    */\n    @Input('isActive')\n    public active = true;\n\n    /**\n    *  An @Input property that allows you to change the `iconColor` of the icon.\n    * @example\n    *```html\n    *<igx-icon color=\"blue\">settings</igx-icon>\n    *```\n    */\n    @Input('color')\n    public iconColor: string;\n\n    /**\n    *  An @Input property that allows you to set the `iconName` of the icon.\n    *  @example\n    *```html\n    *<igx-icon name=\"contains\" fontSet=\"filter-icons\"></igx-icon>\n    *```\n    */\n    @Input('name')\n    public iconName: string;\n\n    /**\n     * An ElementRef property of the `igx-icon` component.\n     */\n    public el: ElementRef;\n\n    constructor(private _el: ElementRef, private iconService: IgxIconService) {\n        this.el = _el;\n        this.font = this.iconService.defaultFontSet;\n        this.iconService.registerFontSetAlias('material', 'material-icons');\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    ngOnInit() {\n        this.updateIconClass();\n    }\n\n    /**\n     *  An accessor that returns the value of the font property.\n     * @example\n     *```typescript\n     *@ViewChild(\"MyIcon\")\n     *public icon: IgxIconComponent;\n     *ngAfterViewInit() {\n     *    let iconFont = this.icon.getFontSet;\n     * }\n     * ```\n     */\n    get getFontSet(): string {\n        return this.font;\n    }\n\n    /**\n     *  An accessor that returns the value of the active property.\n     * @example\n     *```typescript\n     *@ViewChild(\"MyIcon\")\n     *public icon: IgxIconComponent;\n     *ngAfterViewInit() {\n     *    let iconActive = this.icon.getActive;\n     * }\n     * ```\n     */\n    get getActive(): boolean {\n        return this.active;\n    }\n\n    /**\n     *  An accessor that returns inactive property.\n     * @example\n     *```typescript\n     *@ViewChild(\"MyIcon\")\n     *public icon: IgxIconComponent;\n     *ngAfterViewInit() {\n     *    let iconActive = this.icon.getInactive;\n     * }\n     * ```\n     */\n    @HostBinding('class.igx-icon--inactive')\n    get getInactive(): boolean {\n        return !this.active;\n    }\n\n    /**\n     *  An accessor that returns the opposite value of the `iconColor` property.\n     * @example\n     *```typescript\n     *@ViewChild(\"MyIcon\")\n     *public icon: IgxIconComponent;\n     *ngAfterViewInit() {\n     *    let iconColor = this.icon.getIconColor;\n     * }\n     * ```\n     */\n    @HostBinding('style.color')\n    get getIconColor(): string {\n        return this.iconColor;\n    }\n\n    /**\n     *  An accessor that returns the value of the iconName property.\n     * @example\n     *```typescript\n     *@ViewChild(\"MyIcon\")\n     *public icon: IgxIconComponent;\n     *ngAfterViewInit() {\n     *    let iconName = this.icon.getIconName;\n     * }\n     * ```\n     */\n    get getIconName(): string {\n        return this.iconName;\n    }\n\n    /**\n     *  An accessor that returns the key of the SVG image.\n     *  The key consists of the fontSet and the iconName separated by underscore.\n     * @example\n     *```typescript\n     *@ViewChild(\"MyIcon\")\n     *public icon: IgxIconComponent;\n     *ngAfterViewInit() {\n     *    let svgKey = this.icon.getSvgKey;\n     * }\n     * ```\n     */\n    get getSvgKey(): string {\n        if (this.iconService.isSvgIconCached(this.iconName, this.font)) {\n            return '#' + this.iconService.getSvgIconKey(this.iconName, this.font);\n        }\n\n        return null;\n    }\n\n    /**\n     *   An accessor that returns a TemplateRef to explicit, svg or no ligature.\n     * @example\n     *```typescript\n     *@ViewChild(\"MyIcon\")\n     *public icon: IgxIconComponent;\n     *ngAfterViewInit() {\n     *    let iconTemplate = this.icon.template;\n     * }\n     * ```\n     */\n    get template(): TemplateRef<HTMLElement> {\n        if (this.iconName) {\n            if (this.iconService.isSvgIconCached(this.iconName, this.font)) {\n                return this.svgImage;\n            }\n\n            return this.noLigature;\n        }\n\n        return this.explicitLigature;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private updateIconClass() {\n        const className = this.iconService.fontSetClassName(this.font);\n        this.el.nativeElement.classList.add(className);\n\n        if (this.iconName && !this.iconService.isSvgIconCached(this.iconName, this.font)) {\n            this.el.nativeElement.classList.add(this.iconName);\n        }\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { IgxIconComponent } from './icon.component';\nimport { DeprecateMethod } from '../core/deprecateDecorators';\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxIconComponent],\n    exports: [IgxIconComponent],\n    imports: [CommonModule]\n})\nexport class IgxIconModule { }\n\nexport * from './icon.component';\nexport * from './icon.service';\n","import { CommonModule } from '@angular/common';\nimport { Component, HostBinding, Input, NgModule } from '@angular/core';\nimport { IgxIconModule } from '../icon/index';\n\nlet NEXT_ID = 0;\n\n/**\n * Determines the igxBadge type\n */\nexport enum IgxBadgeType {\n    PRIMARY = 'primary',\n    INFO = 'info',\n    SUCCESS = 'success',\n    WARNING = 'warning',\n    ERROR = 'error'\n}\n/**\n * Badge provides visual notifications used to decorate avatars, menus, etc.\n *\n * @igxModule IgxBadgeModule\n *\n * @igxTheme igx-badge-theme\n *\n * @igxKeywords badge, icon, notification\n *\n * @igxGroup Data Entry & Display\n *\n * @remarks\n * The Ignite UI Badge is used to decorate avatars, navigation menus, or other components in the\n * application when visual notification is needed. They are usually designed as icons with a predefined\n * style to communicate information, success, warnings, or errors.\n *\n * @example\n * ```html\n * <igx-avatar>\n *   <igx-badge icon=\"check\" type=\"success\"></igx-badge>\n * </igx-avatar>\n */\n@Component({\n    selector: 'igx-badge',\n    templateUrl: 'badge.component.html'\n})\nexport class IgxBadgeComponent {\n\n    /**\n    * Sets/gets the `id` of the badge.\n    *\n    * @remarks\n    * If not set, the `id` will have value `\"igx-badge-0\"`.\n    *\n    * @example\n    * ```html\n    * <igx-badge id=\"igx-badge-2\"></igx-badge>\n    * ```\n    */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-badge-${NEXT_ID++}`;\n\n    /**\n    * Sets/gets the type of the badge.\n    *\n    * @remarks\n    * Allowed values are `primary`, `info`, `success`, `warning`, `error`.\n    * Providing an invalid value won't display a badge.\n    *\n    * @example\n    * ```html\n    * <igx-badge type=\"success\"></igx-badge>\n    * ```\n    */\n    @Input()\n    public type: string | IgxBadgeType = IgxBadgeType.PRIMARY;\n\n    /**\n    * Sets/gets the value to be displayed inside the badge.\n    *\n    * @remarks\n    * If an `icon` property is already set the `icon` will be displayed.\n    * If neither a `value` nor an `icon` is set the content of the badge will be empty.\n    *\n    * @example\n    * ```html\n    * <igx-badge value=\"11\"></igx-badge>\n    * ```\n    */\n    @Input()\n    public value = '';\n\n    /**\n     * Sets/gets an icon for the badge from the material icons set.\n     *\n     * @remarks\n     * Has priority over the `value` property.\n     * If neither a `value` nor an `icon` is set the content of the badge will be empty.\n     * Providing an invalid value won't display anything.\n     *\n     * @example\n     * ```html\n     * <igx-badge icon=\"check\"></igx-badge>\n     * ```\n     */\n    @Input()\n    public icon: string;\n\n    /**\n     * Sets/gets the role attribute value.\n     *\n     * @example\n     * ```typescript\n     * @ViewChild(\"MyBadge\", { read: IgxBadgeComponent })\n     * public badge: IgxBadgeComponent;\n     *\n     * badge.role = 'status';\n     * ```\n     */\n    @HostBinding('attr.role')\n    public role = 'status';\n\n    /**\n     * Sets/gets the the css class to use on the badge.\n     *\n     * @example\n     * ```typescript\n     * @ViewChild(\"MyBadge\", { read: IgxBadgeComponent })\n     * public badge: IgxBadgeComponent;\n     *\n     * badge.cssClass = 'my-badge-class';\n     * ```\n     */\n    @HostBinding('class.igx-badge')\n    public cssClass = 'igx-badge';\n\n    /**\n     * Sets/gets the aria-label attribute value.\n     *\n     * @example\n     * ```typescript\n     * @ViewChild(\"MyBadge\", { read: IgxBadgeComponent })\n     * public badge: IgxBadgeComponent;\n     *\n     * badge.label = 'badge';\n     * ```\n     */\n    @HostBinding('attr.aria-label')\n    public label = 'badge';\n\n    /**\n     * Defines a human-readable, accessor, author-localized description for\n     * the `type` and the `icon` or `value` of the element.\n     * @hidden\n     * @internal\n     */\n    get roleDescription() {\n        let message: string;\n\n        // tslint:disable-next-line:prefer-conditional-expression\n        if (this.icon) {\n            message = this.type + ' type badge with icon type ' + this.icon;\n        } else if (this.value) {\n            message = this.type + ' badge type with value ' + this.value;\n        } else {\n            message = this.type + ' badge type without value';\n        }\n\n        return message;\n    }\n\n    /**\n     * Method which makes the name of the class more descriptive.\n     * This helps the styling of the badges.\n     * @hidden\n     * @internal\n     */\n    public setClasses() {\n        let classes = {};\n\n        switch (IgxBadgeType[this.type.toUpperCase()]) {\n            case IgxBadgeType.INFO:\n                classes = {\n                    [`${this.cssClass}__circle--info`]: true\n                };\n                break;\n            case IgxBadgeType.SUCCESS:\n                classes = {\n                    [`${this.cssClass}__circle--success`]: true\n                };\n                break;\n            case IgxBadgeType.WARNING:\n                classes = {\n                    [`${this.cssClass}__circle--warning`]: true\n                };\n                break;\n            case IgxBadgeType.ERROR:\n                classes = {\n                    [`${this.cssClass}__circle--error`]: true\n                };\n                break;\n            default:\n                classes = {\n                    [`${this.cssClass}__circle--default`]: true\n                };\n        }\n\n        return classes;\n    }\n\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxBadgeComponent],\n    exports: [IgxBadgeComponent],\n    imports: [CommonModule, IgxIconModule]\n})\nexport class IgxBadgeModule { }\n","import {\n    Component,\n    ChangeDetectorRef,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Input,\n    Host,\n    EventEmitter,\n    Output,\n    ContentChild,\n    Inject\n} from '@angular/core';\nimport { IgxExpansionPanelIconDirective } from './expansion-panel.directives';\nimport { IExpansionPanelEventArgs, IGX_EXPANSION_PANEL_COMPONENT, IgxExpansionPanelBase } from './expansion-panel.common';\n\n/**\n * @hidden\n */\nexport enum ICON_POSITION {\n    LEFT = 'left',\n    NONE = 'none',\n    RIGHT = 'right'\n}\n\n\n@Component({\n    selector: 'igx-expansion-panel-header',\n    templateUrl: 'expansion-panel-header.component.html'\n})\nexport class IgxExpansionPanelHeaderComponent {\n     // properties section\n    private _iconTemplate = false;\n    /**\n     * Sets/gets the `id` of the expansion panel header.\n     * ```typescript\n     * let panelHeaderId =  this.panel.header.id;\n     * ```\n     * @memberof IgxExpansionPanelComponent\n     */\n    public id = '';\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxExpansionPanelIconDirective)\n    public set iconTemplate(val: any) {\n        this._iconTemplate = <boolean>val;\n    }\n\n    /**\n     * @hidden\n     */\n    public get iconTemplate(): any {\n        return this._iconTemplate;\n    }\n\n    /**\n     * Gets/sets the `aria-level` attribute of the header\n     * Get\n     * ```typescript\n     *  const currentAriaLevel = this.panel.header.lv;\n     * ```\n     * Set\n     * ```typescript\n     *  this.panel.header.lv = '5';\n     * ```\n     * ```html\n     *  <igx-expansion-panel-header [lv]=\"myCustomLevel\"></igx-expansion-panel-header>\n     * ```\n     */\n    @HostBinding('attr.aria-level')\n    @Input()\n    public lv = '3';\n\n    /**\n     * Gets/sets the `role` attribute of the header\n     * Get\n     * ```typescript\n     *  const currentRole = this.panel.header.role;\n     * ```\n     * Set\n     * ```typescript\n     *  this.panel.header.role = '5';\n     * ```\n     * ```html\n     *  <igx-expansion-panel-header [role]=\"'custom'\"></igx-expansion-panel-header>\n     * ```\n     */\n    @HostBinding('attr.role')\n    @Input()\n    public role = 'heading';\n\n    /**\n     * @hidden\n     */\n    public get controls (): string {\n        return this.panel.id;\n    }\n\n    /**\n     * Gets/sets the position of the expansion-panel-header expand/collapse icon\n     * Accepts `left`, `right` or `none`\n     * ```typescript\n     *  const currentIconPosition = this.panel.header.iconPosition;\n     * ```\n     * Set\n     * ```typescript\n     *  this.panel.header.iconPosition = 'left';\n     * ```\n     * ```html\n     *  <igx-expansion-panel-header [iconPosition]=\"'right'\"></igx-expansion-panel-header>\n     * ```\n     */\n    @Input()\n    public iconPosition: ICON_POSITION = ICON_POSITION.LEFT;\n\n    /**\n     * Emitted whenever a user interacts with the header host\n     * ```typescript\n     *  handleInteraction(event: IExpansionPanelEventArgs) {\n     *  ...\n     * }\n     * ```\n     * ```html\n     *  <igx-expansion-panel-header (onInteraction)=\"handleInteraction($event)\">\n     *      ...\n     *  </igx-expansion-panel-header>\n     * ```\n     */\n    @Output()\n    public onInteraction = new EventEmitter<IExpansionPanelEventArgs>();\n\n    /**\n     * @hidden\n     */\n     @HostBinding('class.igx-expansion-panel__header')\n     public cssClass = 'igx-expansion-panel__header';\n\n     /**\n     * @hidden\n     */\n     @HostBinding('class.igx-expansion-panel__header--expanded')\n     public get isExpanded () {\n            return !this.panel.collapsed;\n         }\n\n    /**\n     * Gets/sets the whether the header is disabled\n     * When disabled, the header will not handle user events and will stop their propagation\n     *\n     * ```typescript\n     *  const isDisabled = this.panel.header.disabled;\n     * ```\n     * Set\n     * ```typescript\n     *  this.panel.header.disabled = true;\n     * ```\n     * ```html\n     *  <igx-expansion-panel-header [disabled]=\"true\">\n     *     ...\n     *  </igx-expansion-panel-header>\n     * ```\n     */\n    @Input()\n    @HostBinding('class.igx-expansion-panel--disabled')\n    public disabled = false;\n\n    constructor(@Host() @Inject(IGX_EXPANSION_PANEL_COMPONENT) public panel: IgxExpansionPanelBase, public cdr: ChangeDetectorRef,\n     public elementRef: ElementRef) {\n         this.id = `${this.panel.id}-header`;\n     }\n\n     /**\n     * @hidden\n     */\n     @HostListener('keydown.Enter', ['$event'])\n     @HostListener('keydown.Space', ['$event'])\n     @HostListener('keydown.Spacebar', ['$event'])\n     @HostListener('click', ['$event'])\n     public onAction(evt?: Event) {\n         if (this.disabled) {\n            evt.stopPropagation();\n            return;\n         }\n         this.onInteraction.emit({ event: evt, panel: this.panel });\n         this.panel.toggle(evt);\n         evt.preventDefault();\n     }\n\n    /** @hidden @internal */\n    @HostListener('keydown.Alt.ArrowDown', ['$event'])\n    public openPanel(event: KeyboardEvent) {\n        if (event.altKey) {\n            this.panel.expand(event);\n            this.onInteraction.emit({ event: event, panel: this.panel });\n        }\n     }\n\n     /** @hidden @internal */\n     @HostListener('keydown.Alt.ArrowUp', ['$event'])\n     public closePanel(event: KeyboardEvent) {\n        if (event.altKey) {\n            this.panel.collapse(event);\n            this.onInteraction.emit({ event: event, panel: this.panel });\n        }\n     }\n\n     /**\n     * @hidden\n     */\n     public get iconPositionClass(): string {\n        switch (this.iconPosition) {\n            case (ICON_POSITION.LEFT):\n                return `igx-expansion-panel__header-icon--start`;\n            case (ICON_POSITION.RIGHT):\n                return `igx-expansion-panel__header-icon--end`;\n            case (ICON_POSITION.NONE):\n                return `igx-expansion-panel__header-icon--none`;\n            default:\n                return '';\n        }\n     }\n}\n","import { EventEmitter, InjectionToken } from '@angular/core';\nimport { AnimationReferenceMetadata } from '@angular/animations';\nimport { IBaseEventArgs } from '../core/utils';\n\nexport interface IgxExpansionPanelBase {\n    id: string;\n    cssClass: string;\n    /** @hidden @internal */\n    headerId: string;\n    collapsed: boolean;\n    animationSettings: { openAnimation: AnimationReferenceMetadata, closeAnimation: AnimationReferenceMetadata };\n    onCollapsed: EventEmitter<any>;\n    onExpanded: EventEmitter<any>;\n    collapse(evt?: Event);\n    expand(evt?: Event);\n    toggle(evt?: Event);\n}\n\n/** @hidden */\nexport const IGX_EXPANSION_PANEL_COMPONENT = new InjectionToken<IgxExpansionPanelBase>('IgxExpansionPanelToken');\n\nexport interface IExpansionPanelEventArgs extends IBaseEventArgs {\n    event: Event;\n    panel: IgxExpansionPanelBase;\n}\n","import { Component, HostBinding, ElementRef, Input, ChangeDetectorRef, Inject } from '@angular/core';\nimport { IgxExpansionPanelBase, IGX_EXPANSION_PANEL_COMPONENT } from './expansion-panel.common';\n\n@Component({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-expansion-panel-body',\n    template: `<ng-content></ng-content>`\n})\nexport class IgxExpansionPanelBodyComponent {\n    private _labelledBy = '';\n    private _label = '';\n    constructor(\n        @Inject(IGX_EXPANSION_PANEL_COMPONENT) public panel: IgxExpansionPanelBase,\n        public element: ElementRef, public cdr: ChangeDetectorRef) {\n    }\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-expansion-panel__body')\n    public cssClass = `igx-expansion-panel__body`;\n\n    /**\n     * Gets the `aria-label` attribute of the panel body\n     * Defaults to the panel id with '-region' in the end;\n     * Get\n     * ```typescript\n     *  const currentLabel = this.panel.body.label;\n     * ```\n     */\n    @Input()\n    @HostBinding('attr.aria-label')\n    public get label(): string {\n        return this._label || this.panel.id + '-region';\n    }\n    /**\n     * Sets the `aria-label` attribute of the panel body\n     * ```typescript\n     *  this.panel.body.label = 'my-custom-label';\n     * ```\n     * ```html\n     *  <igx-expansion-panel-body [label]=\"'my-custom-label'\"></igx-expansion-panel-body>\n     * ```\n     */\n    public set label(val: string) {\n        this._label = val;\n    }\n\n    /**\n     * Gets the `aria-labelledby` attribute of the panel body\n     * Defaults to the panel header id;\n     * Get\n     * ```typescript\n     *  const currentLabel = this.panel.body.labelledBy;\n     * ```\n     */\n    @Input()\n    @HostBinding('attr.aria-labelledby')\n    public get labelledBy(): string {\n        return this._labelledBy;\n    }\n    /**\n     * Sets the `aria-labelledby` attribute of the panel body\n     * ```typescript\n     *  this.panel.body.labelledBy = 'my-custom-id';\n     * ```\n     * ```html\n     *  <igx-expansion-panel-body [labelledBy]=\"'my-custom-id'\"></igx-expansion-panel-body>\n     * ```\n     */\n    public set labelledBy(val: string) {\n        this._labelledBy = val;\n    }\n\n    /**\n     * Gets/sets the `role` attribute of the panel body\n     * Default is 'region';\n     * Get\n     * ```typescript\n     *  const currentRole = this.panel.body.role;\n     * ```\n     * Set\n     * ```typescript\n     *  this.panel.body.role = 'content';\n     * ```\n     * ```html\n     *  <igx-expansion-panel-body [role]=\"'custom'\"></igx-expansion-panel-body>\n     * ```\n     */\n    @Input()\n    @HostBinding('attr.role')\n    public role = 'region';\n}\n","import { Directive, HostBinding } from '@angular/core';\n\n/**\n * @hidden\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-expansion-panel-title'\n})\nexport class IgxExpansionPanelTitleDirective {\n    @HostBinding('class.igx-expansion-panel__header-title')\n    public cssClass = `igx-expansion-panel__header-title`;\n}\n\n/**\n * @hidden\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-expansion-panel-description'\n})\nexport class IgxExpansionPanelDescriptionDirective {\n    @HostBinding('class.igx-expansion-panel__header-description')\n    public cssClass = `igx-expansion-panel__header-description`;\n}\n\n/**\n * @hidden\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-expansion-panel-icon'\n})\nexport class IgxExpansionPanelIconDirective {\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    AfterContentInit,\n    AfterViewInit,\n    Component,\n    ContentChildren,\n    ChangeDetectorRef,\n    EventEmitter,\n    HostBinding,\n    Inject,\n    Input,\n    NgModule,\n    Output,\n    Optional,\n    QueryList,\n    Renderer2,\n    ViewChildren,\n    OnDestroy\n} from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { IgxButtonDirective, IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxIconModule } from '../icon/index';\nimport { takeUntil } from 'rxjs/operators';\nimport { DisplayDensityBase, DisplayDensityToken, IDisplayDensityOptions } from '../core/density';\nimport { IBaseEventArgs } from '../core/utils';\n\nexport enum ButtonGroupAlignment { horizontal, vertical }\nlet NEXT_ID = 0;\n\n/**\n * **Ignite UI for Angular Button Group** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/buttongroup.html)\n *\n * The Ignite UI Button Group displays a group of buttons either vertically or horizontally.  The group supports\n * single, multiple and toggle selection.\n *\n * Example:\n * ```html\n * <igx-buttongroup multiSelection=\"true\" [values]=\"fontOptions\">\n * </igx-buttongroup>\n * ```\n * The `fontOptions` value shown above is defined as:\n * ```typescript\n * this.fontOptions = [\n *   { icon: 'format_bold', selected: false },\n *   { icon: 'format_italic', selected: false },\n *   { icon: 'format_underlined', selected: false }];\n * ```\n */\n@Component({\n    selector: 'igx-buttongroup',\n    templateUrl: 'buttongroup-content.component.html'\n})\n\nexport class IgxButtonGroupComponent extends DisplayDensityBase implements AfterContentInit, AfterViewInit, OnDestroy {\n\n    private _disabled = false;\n    protected buttonClickNotifier$ = new Subject<boolean>();\n    protected queryListNotifier$ = new Subject<boolean>();\n\n    @ViewChildren(IgxButtonDirective) private viewButtons: QueryList<IgxButtonDirective>;\n    @ContentChildren(IgxButtonDirective) private templateButtons: QueryList<IgxButtonDirective>;\n\n    /**\n     * A collection containing all buttons inside the button group.\n     */\n    public get buttons(): IgxButtonDirective[] {\n        return [...this.viewButtons.toArray(), ...this.templateButtons.toArray()];\n    }\n\n    /**\n     * An @Input property that sets the value of the `id` attribute. If not set it will be automatically generated.\n     * ```html\n     *  <igx-buttongroup [id]=\"'igx-dialog-56'\" [multiSelection]=\"!multi\" [values]=\"alignOptions\">\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-buttongroup-${NEXT_ID++}`;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.zIndex')\n    public zIndex = 0;\n\n    /**\n     * Allows you to set a style using the `itemContentCssClass` input.\n     * The value should be the CSS class name that will be applied to the button group.\n     *```typescript\n     *public style1 = \"styleClass\";\n     * //..\n     *```\n     * ```html\n     *<igx-buttongroup [itemContentCssClass]=\"style1\" [multiSelection]=\"!multi\" [values]=\"alignOptions\">\n     *```\n     */\n    @Input() set itemContentCssClass(value: string) {\n        this._itemContentCssClass = value || this._itemContentCssClass;\n    }\n\n    /**\n     * Returns the CSS class of the item content of the `IgxButtonGroup`.\n     *```typescript\n     *@ViewChild(\"MyChild\")\n     *public buttonG: IgxButtonGroupComponent;\n     *ngAfterViewInit(){\n     *   let buttonSelect = this.buttonG.itemContentCssClass;\n     *}\n     *```\n     */\n    get itemContentCssClass(): string {\n        return this._itemContentCssClass;\n    }\n\n    /**\n     * An @Input property that enables selecting multiple buttons. By default, multi-selection is false.\n     * ```html\n     * <igx-buttongroup [multiSelection]=\"false\" [alignment]=\"alignment\"></igx-buttongroup>\n     * ```\n     */\n    @Input() public multiSelection = false;\n    /**\n     * An @Input property that allows setting the buttons in the button group.\n     * ```typescript\n     *  public ngOnInit() {\n     *      this.cities = [\n     *        new Button({\n     *          label: \"Sofia\"\n     *      }),\n     *        new Button({\n     *          label: \"London\"\n     *      }),\n     *        new Button({\n     *          label: \"New York\",\n     *          selected: true\n     *      }),\n     *        new Button({\n     *          label: \"Tokyo\"\n     *      })\n     *  ];\n     *  }\n     *  //..\n     * ```\n     * ```html\n     *  <igx-buttongroup [multiSelection]=\"false\" [values]=\"cities\"></igx-buttongroup>\n     * ```\n     */\n    @Input() public values: any;\n    /**\n     * An @Input property that allows you to disable the `igx-buttongroup` component. By default it's false.\n     * ```html\n     * <igx-buttongroup [disabled]=\"true\" [multiSelection]=\"multi\" [values]=\"fontOptions\"></igx-buttongroup>\n     * ```\n     */\n    @Input()\n    public get disabled(): boolean {\n        return this._disabled;\n    }\n    public set disabled(value: boolean) {\n        if (this._disabled !== value) {\n            this._disabled = value;\n\n            if (this.viewButtons && this.templateButtons) {\n                this.buttons.forEach((b) => b.disabled = this._disabled);\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public selectedIndexes: number[] = [];\n\n    /**\n     * Allows you to set the button group alignment.\n     * Available options are `ButtonGroupAlignment.horizontal` (default) and `ButtonGroupAlignment.vertical`.\n     * ```typescript\n     *public alignment = ButtonGroupAlignment.vertical;\n     * //..\n     * ```\n     * ```html\n     *<igx-buttongroup [multiSelection]=\"false\" [values]=\"cities\" [alignment]=\"alignment\"></igx-buttongroup>\n     * ```\n     */\n    @Input() set alignment(value: ButtonGroupAlignment) {\n        this._isVertical = value === ButtonGroupAlignment.vertical;\n    }\n    /**\n     * Returns the alignment of the `igx-buttongroup`.\n     *```typescript\n     *@ViewChild(\"MyChild\")\n     *public buttonG: IgxButtonGroupComponent;\n     *ngAfterViewInit(){\n     *    let buttonAlignment = this.buttonG.alignment;\n     *}\n     *```\n     */\n    get alignment(): ButtonGroupAlignment {\n        return this._isVertical ? ButtonGroupAlignment.vertical : ButtonGroupAlignment.horizontal;\n    }\n\n    /**\n     * An @Ouput property that emits an event when a button is selected.\n     *```typescript\n     *@ViewChild(\"toast\")\n     *private toast: IgxToastComponent;\n     *public onSelect(buttongroup){\n     *    this.toast.show()\n     *}\n     * //...\n     *```\n     *```html\n     * <igx-buttongroup #MyChild [multiSelection]=\"!multi\" (onSelect)=\"onSelect($event)\"></igx-buttongroup>\n     *<igx-toast #toast message=\"You have made a selection!\"></igx-toast>\n     *```\n     */\n    @Output() public onSelect = new EventEmitter<IButtonGroupEventArgs>();\n\n    /**\n     * An @Ouput property that emits an event when a button is deselected.\n     *```typescript\n     *@ViewChild(\"toast\")\n     *private toast: IgxToastComponent;\n     *public onUnselect(buttongroup){\n     *    this.toast.show()\n     *}\n     * //...\n     *```\n     *```html\n     * igx-buttongroup #MyChild [multiSelection]=\"multi\" (onUnselect)=\"onUnselect($event)\"></igx-buttongroup>\n     *<igx-toast #toast message=\"You have deselected a button!\"></igx-toast>\n     *```\n     */\n    @Output() public onUnselect = new EventEmitter<IButtonGroupEventArgs>();\n\n    /**\n     * Returns true if the `igx-buttongroup` alignment is vertical.\n     * Note that in order for the accessor to work correctly the property should be set explicitly.\n     * ```html\n     * <igx-buttongroup #MyChild [alignment]=\"alignment\" [values]=\"alignOptions\">\n     * ```\n     * ```typescript\n     * //...\n     *@ViewChild(\"MyChild\")\n     *private buttonG: IgxButtonGroupComponent;\n     *ngAfterViewInit(){\n     *    let orientation = this.buttonG.isVertical;\n     *}\n     *```\n     */\n    public get isVertical(): boolean {\n        return this._isVertical;\n    }\n    private _isVertical: boolean;\n    private _itemContentCssClass: string;\n\n    constructor(private _cdr: ChangeDetectorRef, private _renderer: Renderer2,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n        super(_displayDensityOptions);\n    }\n\n    /**\n     * Gets the selected button/buttons.\n     *```typescript\n     *@ViewChild(\"MyChild\")\n     *private buttonG: IgxButtonGroupComponent;\n     *ngAfterViewInit(){\n     *    let selectedButton = this.buttonG.selectedButtons;\n     *}\n     *```\n     */\n    get selectedButtons(): IgxButtonDirective[] {\n        return this.buttons.filter((b, i) => {\n            return this.selectedIndexes.indexOf(i) !== -1;\n        });\n\n    }\n\n    /**\n     * Selects a button by its index.\n     *```typescript\n     *@ViewChild(\"MyChild\")\n     *private buttonG: IgxButtonGroupComponent;\n     *ngAfterViewInit(){\n     *    this.buttonG.selectButton(2);\n     *    this.cdr.detectChanges();\n     *}\n     *```\n     * @memberOf {@link IgxButtonGroupComponent}\n     */\n    public selectButton(index: number) {\n        if (index >= this.buttons.length || index < 0) {\n            return;\n        }\n\n        const button = this.buttons[index];\n        const buttonElement = button.nativeElement;\n\n        this.selectedIndexes.push(index);\n        button.selected = true;\n\n        this._renderer.setAttribute(buttonElement, 'aria-pressed', 'true');\n        this._renderer.addClass(buttonElement, 'igx-button-group__item--selected');\n\n        this.onSelect.emit({ button: button, index: index });\n\n        const indexInViewButtons = this.viewButtons.toArray().indexOf(button);\n        if (indexInViewButtons !== -1) {\n            this.values[indexInViewButtons].selected = true;\n        }\n\n        // deselect other buttons if multiSelection is not enabled\n        if (!this.multiSelection && this.selectedIndexes.length > 1) {\n            this.buttons.forEach((b, i) => {\n                if (i !== index && this.selectedIndexes.indexOf(i) !== -1) {\n                    this.deselectButton(i);\n                }\n            });\n        }\n    }\n\n    /**\n     * Deselects a button by its index.\n     * ```typescript\n     *@ViewChild(\"MyChild\")\n     *private buttonG: IgxButtonGroupComponent;\n     *ngAfterViewInit(){\n     *    this.buttonG.deselectButton(2);\n     *    this.cdr.detectChanges();\n     *}\n     * ```\n     * @memberOf {@link IgxButtonGroupComponent}\n     */\n    public deselectButton(index: number) {\n        if (index >= this.buttons.length || index < 0) {\n            return;\n        }\n\n        const button = this.buttons[index];\n        const buttonElement = button.nativeElement;\n\n        this.selectedIndexes.splice(this.selectedIndexes.indexOf(index), 1);\n        button.selected = false;\n\n        this._renderer.setAttribute(buttonElement, 'aria-pressed', 'false');\n        this._renderer.removeClass(buttonElement, 'igx-button-group__item--selected');\n\n        this.onUnselect.emit({ button: button, index: index });\n\n        const indexInViewButtons = this.viewButtons.toArray().indexOf(button);\n        if (indexInViewButtons !== -1) {\n            this.values[indexInViewButtons].selected = false;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterContentInit() {\n        this.templateButtons.forEach((button) => {\n            if (!button.initialDensity) {\n                button.displayDensity = this.displayDensity;\n            }\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterViewInit() {\n        const initButtons = () => {\n            // Cancel any existing buttonClick subscriptions\n            this.buttonClickNotifier$.next();\n\n            this.selectedIndexes.splice(0, this.selectedIndexes.length);\n\n            // initial configuration\n            this.buttons.forEach((button, index) => {\n                const buttonElement = button.nativeElement;\n\n                if (this.disabled) {\n                    button.disabled = true;\n                }\n\n                if (button.selected) {\n                    this.selectButton(index);\n                }\n\n                button.buttonClick.pipe(takeUntil(this.buttonClickNotifier$)).subscribe((ev) => this._clickHandler(ev, index));\n                this._renderer.addClass(buttonElement, 'igx-button-group__item');\n            });\n        };\n\n        this.viewButtons.changes.pipe(takeUntil(this.queryListNotifier$)).subscribe(() => initButtons());\n        this.templateButtons.changes.pipe(takeUntil(this.queryListNotifier$)).subscribe(() => initButtons());\n        initButtons();\n\n        this._cdr.detectChanges();\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this.buttonClickNotifier$.next();\n        this.buttonClickNotifier$.complete();\n\n        this.queryListNotifier$.next();\n        this.queryListNotifier$.complete();\n    }\n\n    /**\n     *@hidden\n     */\n    public _clickHandler(event, i) {\n        if (this.selectedIndexes.indexOf(i) !== -1) {\n            this.deselectButton(i);\n        } else {\n            this.selectButton(i);\n        }\n    }\n}\n\nexport interface IButtonGroupEventArgs extends IBaseEventArgs {\n    button: IgxButtonDirective;\n    index: number;\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxButtonGroupComponent],\n    exports: [IgxButtonGroupComponent],\n    imports: [IgxButtonModule, CommonModule, IgxRippleModule, IgxIconModule]\n})\n\nexport class IgxButtonGroupModule {\n}\n","import {\n    Component,\n    ChangeDetectorRef,\n    EventEmitter,\n    HostBinding,\n    Input,\n    Output,\n    ContentChild,\n    AfterContentInit\n} from '@angular/core';\nimport { AnimationBuilder, AnimationReferenceMetadata, useAnimation } from '@angular/animations';\nimport { growVerOut, growVerIn } from '../animations/main';\nimport { IgxExpansionPanelBodyComponent } from './expansion-panel-body.component';\nimport { IgxExpansionPanelHeaderComponent } from './expansion-panel-header.component';\nimport { IGX_EXPANSION_PANEL_COMPONENT, IgxExpansionPanelBase, IExpansionPanelEventArgs } from './expansion-panel.common';\n\nlet NEXT_ID = 0;\n\nexport interface AnimationSettings {\n    openAnimation: AnimationReferenceMetadata;\n    closeAnimation: AnimationReferenceMetadata;\n}\n@Component({\n    selector: 'igx-expansion-panel',\n    templateUrl: 'expansion-panel.component.html',\n    providers: [{ provide: IGX_EXPANSION_PANEL_COMPONENT, useExisting: IgxExpansionPanelComponent }]\n})\nexport class IgxExpansionPanelComponent implements IgxExpansionPanelBase, AfterContentInit {\n    private _collapsed = true;\n    /**\n     * Sets/gets the animation settings of the expansion panel component\n     * Open and Close animation should be passed\n     *\n     * Get\n     * ```typescript\n     *  const currentAnimations = this.panel.animationSettings;\n     * ```\n     * Set\n     * ```typescript\n     *  import { slideInLeft, slideOutRight } from 'igniteui-angular';\n     *  ...\n     *  this.panel.animationsSettings = {\n     *      openAnimation: slideInLeft,\n     *      closeAnimation: slideOutRight\n     * };\n     * ```\n     * or via template\n     * ```typescript\n     *  import { slideInLeft, slideOutRight } from 'igniteui-angular';\n     *  ...\n     *  myCustomAnimationObject = {\n     *      openAnimation: slideInLeft,\n     *      closeAnimation: slideOutRight\n     * };\n     * ```html\n     *  <igx-expansion-panel [animationSettings]='myCustomAnimationObject'>\n     *  ...\n     *  </igx-expansion-panel>\n     * ```\n     */\n    @Input()\n    public animationSettings: AnimationSettings = {\n        openAnimation: growVerIn,\n        closeAnimation: growVerOut\n    };\n\n    /**\n     * Sets/gets the `id` of the expansion panel component.\n     * If not set, `id` will have value `\"igx-expansion-panel-0\"`;\n     * ```html\n     * <igx-expansion-panel id = \"my-first-expansion-panel\"></igx-expansion-panel>\n     * ```\n     * ```typescript\n     * let panelId =  this.panel.id;\n     * ```\n     * @memberof IgxExpansionPanelComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-expansion-panel-${NEXT_ID++}`;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-expansion-panel')\n    public cssClass = 'igx-expansion-panel';\n\n    /**\n     * Gets/sets whether the component is collapsed (its content is hidden)\n     * Get\n     * ```typescript\n     *  const myPanelState: boolean = this.panel.collapsed;\n     * ```\n     * Set\n     * ```html\n     *  this.panel.collapsed = true;\n     * ```\n     *\n     * Two-way data binding:\n     * ```html\n     * <igx-expansion-panel [(collapsed)]=\"model.isCollapsed\"></igx-expansion-panel>\n     * ```\n     */\n    @Input()\n    public get collapsed(): boolean {\n        return this._collapsed;\n    }\n    public set collapsed(value) {\n        this._collapsed = value;\n        this.collapsedChange.emit(this._collapsed);\n    }\n\n    /**\n     *@hidden\n     */\n    @Output()\n    public collapsedChange = new EventEmitter<boolean>();\n\n    /**\n     * Emitted when the expansion panel finishes collapsing\n     * ```typescript\n     *  handleCollapsed(event: {\n     *  panel: IgxExpansionPanelComponent,\n     *  event: Event\n     * })\n     * ```\n     * ```html\n     *  <igx-expansion-panel (onCollapsed)=\"handleCollapsed($event)\">\n     *      ...\n     *  </igx-expansion-panel>\n     * ```\n     */\n    @Output()\n    public onCollapsed = new EventEmitter<IExpansionPanelEventArgs>();\n\n    /**\n     * Emitted when the expansion panel finishes expanding\n     * ```typescript\n     *  handleExpanded(event: {\n     *  panel: IgxExpansionPanelComponent,\n     *  event: Event\n     * })\n     * ```\n     * ```html\n     *  <igx-expansion-panel (onExpanded)=\"handleExpanded($event)\">\n     *      ...\n     *  </igx-expansion-panel>\n     * ```\n     */\n    @Output()\n    public onExpanded = new EventEmitter<IExpansionPanelEventArgs>();\n\n    /**\n     * @hidden\n     */\n    public get headerId() {\n        return this.header ? `${this.id}-header` : '';\n    }\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxExpansionPanelBodyComponent, { read: IgxExpansionPanelBodyComponent })\n    public body: IgxExpansionPanelBodyComponent;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxExpansionPanelHeaderComponent, { read: IgxExpansionPanelHeaderComponent })\n    public header: IgxExpansionPanelHeaderComponent;\n\n    constructor(private cdr: ChangeDetectorRef, private builder: AnimationBuilder) { }\n\n    /** @hidden */\n    ngAfterContentInit(): void {\n        if (this.body && this.header) {\n            // schedule at end of turn:\n            Promise.resolve().then(() => {\n                this.body.labelledBy = this.body.labelledBy || this.headerId;\n                this.body.label = this.body.label || this.id + '-region';\n            });\n        }\n    }\n\n    private playOpenAnimation(cb: () => void) {\n        if (!this.body) { // if not body element is passed, there is nothing to animate\n            return;\n        }\n        const animation = useAnimation(this.animationSettings.openAnimation);\n        const animationBuilder = this.builder.build(animation);\n        const openAnimationPlayer = animationBuilder.create(this.body.element.nativeElement);\n\n        openAnimationPlayer.onDone(() => {\n            cb();\n            openAnimationPlayer.reset();\n        });\n\n        openAnimationPlayer.play();\n    }\n\n    private playCloseAnimation(cb: () => void) {\n        if (!this.body) { // if not body element is passed, there is nothing to animate\n            return;\n        }\n        const animation = useAnimation(this.animationSettings.closeAnimation);\n        const animationBuilder = this.builder.build(animation);\n        const closeAnimationPlayer = animationBuilder.create(this.body.element.nativeElement);\n        closeAnimationPlayer.onDone(() => {\n            cb();\n            closeAnimationPlayer.reset();\n        });\n\n        closeAnimationPlayer.play();\n    }\n\n    /**\n     * Collapses the panel\n     *\n     * ```html\n     *  <igx-expansion-panel #myPanel>\n     *      ...\n     *  </igx-expansion-panel>\n     *  <button (click)=\"myPanel.collapse($event)\">Collpase Panel</button>\n     * ```\n     */\n    collapse(evt?: Event) {\n        if (this.collapsed) { // If expansion panel is already collapsed, do nothing\n            return;\n        }\n        this.playCloseAnimation(\n            () => {\n                this.onCollapsed.emit({ event: evt, panel: this });\n                this.collapsed = true;\n            }\n        );\n    }\n\n    /**\n     * Expands the panel\n     *\n     * ```html\n     *  <igx-expansion-panel #myPanel>\n     *      ...\n     *  </igx-expansion-panel>\n     *  <button (click)=\"myPanel.expand($event)\">Expand Panel</button>\n     * ```\n     */\n    expand(evt?: Event) {\n        if (!this.collapsed) { // If the panel is already opened, do nothing\n            return;\n        }\n        this.collapsed = false;\n        this.cdr.detectChanges();\n        this.playOpenAnimation(\n            () => {\n                this.onExpanded.emit({ event: evt, panel: this });\n            }\n        );\n    }\n\n    /**\n     * Toggles the panel\n     *\n     * ```html\n     *  <igx-expansion-panel #myPanel>\n     *      ...\n     *  </igx-expansion-panel>\n     *  <button (click)=\"myPanel.toggle($event)\">Expand Panel</button>\n     * ```\n     */\n    toggle(evt?: Event) {\n        if (this.collapsed) {\n            this.open(evt);\n        } else {\n            this.close(evt);\n        }\n    }\n\n    open(evt?: Event) {\n        this.expand(evt);\n    }\n    close(evt?: Event) {\n        this.collapse(evt);\n    }\n\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxAvatarModule } from '../avatar/avatar.component';\nimport { IgxIconModule } from '../icon/index';\nimport { IgxExpansionPanelComponent } from './expansion-panel.component';\nimport { IgxExpansionPanelHeaderComponent } from './expansion-panel-header.component';\nimport { IgxExpansionPanelBodyComponent } from './expansion-panel-body.component';\nimport { IgxExpansionPanelDescriptionDirective, IgxExpansionPanelTitleDirective,\n  IgxExpansionPanelIconDirective } from './expansion-panel.directives';\n\n/**\n * @hidden\n */\n@NgModule({\n  declarations: [\n    IgxExpansionPanelComponent,\n    IgxExpansionPanelHeaderComponent,\n    IgxExpansionPanelBodyComponent,\n    IgxExpansionPanelDescriptionDirective,\n    IgxExpansionPanelTitleDirective,\n    IgxExpansionPanelIconDirective\n  ],\n  entryComponents: [\n  ],\n  exports: [\n    IgxExpansionPanelComponent,\n    IgxExpansionPanelHeaderComponent,\n    IgxExpansionPanelBodyComponent,\n    IgxExpansionPanelDescriptionDirective,\n    IgxExpansionPanelTitleDirective,\n      IgxExpansionPanelIconDirective\n  ],\n  imports: [\n    CommonModule,\n    IgxRippleModule,\n    IgxIconModule,\n    IgxButtonModule,\n    IgxAvatarModule\n  ]\n})\nexport class IgxExpansionPanelModule {\n}\n","import { Directive } from '@angular/core';\n\n// tslint:disable:directive-selector\n@Directive({\n    selector: 'igx-banner-actions'\n})\nexport class IgxBannerActionsDirective {\n}\n","import { Component, NgModule, EventEmitter, Output, Input, ViewChild, ElementRef,\n    ContentChild, HostBinding } from '@angular/core';\nimport { IgxExpansionPanelModule } from '../expansion-panel/expansion-panel.module';\nimport { AnimationSettings } from '../expansion-panel/expansion-panel.component';\nimport { IgxExpansionPanelComponent } from '../expansion-panel';\nimport { IgxIconModule, IgxIconComponent } from '../icon/index';\nimport { IToggleView } from '../core/navigation';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxBannerActionsDirective } from './banner.directives';\nimport { CommonModule } from '@angular/common';\nimport { CancelableEventArgs, IBaseEventArgs } from '../core/utils';\n\nexport interface BannerEventArgs extends IBaseEventArgs {\n    banner: IgxBannerComponent;\n    event?: Event;\n}\n\nexport interface BannerCancelEventArgs extends BannerEventArgs, CancelableEventArgs {\n}\n/**\n * **Ignite UI for Angular Banner** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/banner.html)\n *\n * The Ignite UI Banner provides a highly templateable and easy to use banner that can be shown in your application.\n *\n * Usage:\n *\n * ```html\n * <igx-banner #banner>\n *   Our privacy settings have changed.\n *  <igx-banner-actions>\n *      <button igxButton=\"raised\">Read More</button>\n *      <button igxButton=\"raised\">Accept and Continue</button>\n *  </igx-banner-actions>\n * </igx-banner>\n * ```\n */\n@Component({\n    selector: 'igx-banner',\n    templateUrl: 'banner.component.html'\n})\nexport class IgxBannerComponent implements IToggleView {\n    private _bannerEvent: BannerEventArgs;\n    private _animationSettings: AnimationSettings;\n\n    @ViewChild('expansionPanel', { static: true })\n    private _expansionPanel: IgxExpansionPanelComponent;\n\n    @ContentChild(IgxBannerActionsDirective)\n    private _bannerActionTemplate: IgxBannerActionsDirective;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxIconComponent)\n    public bannerIcon: IgxIconComponent;\n\n    /**\n     * Fires after the banner shows up\n     * ```typescript\n     * public handleOpened(event) {\n     *  ...\n     * }\n     * ```\n     * ```html\n     * <igx-banner (onOpened)=\"handleOpened($event)\"></igx-banner>\n     * ```\n     */\n    @Output()\n    public onOpened = new EventEmitter<BannerEventArgs>();\n\n    /**\n     * Fires before the banner shows up\n     * ```typescript\n     * public handleOpening(event) {\n     *  ...\n     * }\n     * ```\n     * ```html\n     * <igx-banner (onOpening)=\"handleOpening($event)\"></igx-banner>\n     * ```\n     */\n    @Output()\n    public onOpening = new EventEmitter<BannerCancelEventArgs>();\n\n    /**\n     * Fires after the banner hides\n     * ```typescript\n     * public handleClosed(event) {\n     *  ...\n     * }\n     * ```\n     * ```html\n     * <igx-banner (onClosed)=\"handleClosed($event)\"></igx-banner>\n     * ```\n     */\n    @Output()\n    public onClosed = new EventEmitter<BannerEventArgs>();\n\n    /**\n     * Fires before the banner hides\n     * ```typescript\n     * public handleClosing(event) {\n     *  ...\n     * }\n     * ```\n     * ```html\n     * <igx-banner (onClosing)=\"handleClosing($event)\"></igx-banner>\n     * ```\n     */\n    @Output()\n    public onClosing = new EventEmitter<BannerCancelEventArgs>();\n\n    /** @hidden */\n    public get useDefaultTemplate(): boolean {\n        return !this._bannerActionTemplate;\n    }\n\n    /**\n     * Get the animation settings used by the banner open/close methods\n     * ```typescript\n     * let currentAnimations: AnimationSettings = banner.animationSettings\n     * ```\n     */\n    @Input()\n    public get animationSettings(): AnimationSettings {\n        return this._animationSettings ? this._animationSettings : this._expansionPanel.animationSettings;\n    }\n\n    /**\n     * Set the animation settings used by the banner open/close methods\n     * ```typescript\n     * import { slideInLeft, slideOutRight } from 'igniteui-angular';\n     * ...\n     * banner.animationSettings: AnimationSettings = { openAnimation: slideInLeft, closeAnimation: slideOutRight };\n     * ```\n     */\n    public set animationSettings(settings: AnimationSettings) {\n        this._animationSettings = settings;\n    }\n    /**\n     * Gets whether banner is collapsed\n     *\n     * ```typescript\n     * const isCollapsed: boolean = banner.collapsed;\n     * ```\n     */\n    public get collapsed() {\n        return this._expansionPanel.collapsed;\n    }\n\n    /**\n     * Returns the native element of the banner component\n     * ```typescript\n     *  const myBannerElement: HTMLElement = banner.element;\n     * ```\n     */\n    public get element() {\n        return this.elementRef.nativeElement;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.display')\n    public get displayStyle(): string {\n        return this.collapsed ? '' : 'block';\n    }\n\n    constructor(public elementRef: ElementRef) { }\n\n    /**\n     * Opens the banner\n     *\n     * ```typescript\n     *  myBanner.open();\n     * ```\n     *\n     * ```html\n     * <igx-banner #banner>\n     * ...\n     * </igx-banner>\n     * <button (click)=\"banner.open()\">Open Banner</button>\n     * ```\n     */\n    public open(event?: Event) {\n        this._bannerEvent = { banner: this, event};\n        const openingArgs = {\n            banner: this,\n            event,\n            cancel: false\n        };\n        this.onOpening.emit(openingArgs);\n        if (openingArgs.cancel) {\n            return;\n        }\n        this._expansionPanel.open(event);\n    }\n\n    /**\n     * Closes the banner\n     *\n     * ```typescript\n     *  myBanner.close();\n     * ```\n     *\n     * ```html\n     * <igx-banner #banner>\n     * ...\n     * </igx-banner>\n     * <button (click)=\"banner.close()\">Close Banner</button>\n     * ```\n     */\n    public close(event?: Event) {\n        this._bannerEvent = { banner: this, event};\n        const closingArgs = {\n            banner: this,\n            event,\n            cancel: false\n        };\n        this.onClosing.emit(closingArgs);\n        if (closingArgs.cancel) {\n            return;\n        }\n        this._expansionPanel.close(event);\n    }\n\n    /**\n     * Toggles the banner\n     *\n     * ```typescript\n     *  myBanner.toggle();\n     * ```\n     *\n     * ```html\n     * <igx-banner #banner>\n     * ...\n     * </igx-banner>\n     * <button (click)=\"banner.toggle()\">Toggle Banner</button>\n     * ```\n     */\n    toggle(event?: Event) {\n        if (this.collapsed) {\n            this.open(event);\n        } else {\n            this.close(event);\n        }\n    }\n\n    /** @hidden */\n    public onExpansionPanelOpen() {\n        this.onOpened.emit(this._bannerEvent);\n    }\n\n    /** @hidden */\n    public onExpansionPanelClose() {\n        this.onClosed.emit(this._bannerEvent);\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxBannerComponent, IgxBannerActionsDirective],\n    exports: [IgxBannerComponent, IgxBannerActionsDirective],\n    imports: [CommonModule, IgxExpansionPanelModule, IgxIconModule, IgxButtonModule, IgxRippleModule]\n})\nexport class IgxBannerModule { }\n","export interface DateRangeDescriptor {\n    type: DateRangeType;\n    dateRange?: Date[];\n}\n\nexport enum DateRangeType {\n    After,\n    Before,\n    Between,\n    Specific,\n    Weekdays,\n    Weekends\n}\n","import { DateRangeDescriptor, DateRangeType } from '../core/dates';\n\n/**\n * @hidden\n */\nenum TimeDeltaInterval {\n    Month = 'month',\n    Year = 'year'\n}\n\nconst MDAYS = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nconst FEBRUARY = 1;\n\nexport function range(start = 0, stop, step = 1) {\n    const res = [];\n    const cur = (stop === undefined) ? 0 : start;\n    const max = (stop === undefined) ? start : stop;\n    for (let i = cur; step < 0 ? i > max : i < max; i += step) {\n        res.push(i);\n    }\n    return res;\n}\n\n/**\n * Returns true for leap years, false for non-leap years.\n *\n * @export\n * @param year\n * @returns\n */\nexport function isLeap(year: number): boolean {\n    return (year % 4 === 0) && ((year % 100 !== 0) || (year % 400 === 0));\n}\n\nexport function weekDay(year: number, month: number, day: number): number {\n    return new Date(year, month, day).getDay();\n}\n\n/**\n * Return weekday and number of days for year, month.\n *\n * @export\n * @param year\n * @param month\n * @returns\n */\nexport function monthRange(year: number, month: number): number[] {\n    if ((month < 0) || (month > 11)) {\n        throw new Error('Invalid month specified');\n    }\n    const day = weekDay(year, month, 1);\n    let nDays = MDAYS[month];\n    if ((month === FEBRUARY) && (isLeap(year))) {\n        nDays++;\n    }\n    return [day, nDays];\n}\n\nexport function isDateInRanges(date: Date, ranges: DateRangeDescriptor[]): boolean {\n    date = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n    const dateInMs = date.getTime();\n\n    if (!ranges) {\n        return false;\n    }\n\n    for (const descriptor of ranges) {\n        const dRanges = descriptor.dateRange ? descriptor.dateRange.map(\n            r => new Date(r.getFullYear(), r.getMonth(), r.getDate())) : undefined;\n        switch (descriptor.type) {\n            case (DateRangeType.After):\n                if (dateInMs > dRanges[0].getTime()) {\n                    return true;\n                }\n\n                break;\n            case (DateRangeType.Before):\n                if (dateInMs < dRanges[0].getTime()) {\n                    return true;\n                }\n\n                break;\n            case (DateRangeType.Between):\n                const dRange = dRanges.map(d => d.getTime());\n                const min = Math.min(dRange[0], dRange[1]);\n                const max = Math.max(dRange[0], dRange[1]);\n                if (dateInMs >= min && dateInMs <= max) {\n                    return true;\n                }\n\n                break;\n            case (DateRangeType.Specific):\n                const datesInMs = dRanges.map(d => d.getTime());\n                for (const specificDateInMs of datesInMs) {\n                    if (dateInMs === specificDateInMs) {\n                        return true;\n                    }\n                }\n\n                break;\n            case (DateRangeType.Weekdays):\n                const day = date.getDay();\n                if (day % 6 !== 0) {\n                    return true;\n                }\n\n                break;\n            case (DateRangeType.Weekends):\n                const weekday = date.getDay();\n                if (weekday % 6 === 0) {\n                    return true;\n                }\n\n                break;\n            default:\n                return false;\n        }\n    }\n\n    return false;\n}\n\nexport interface ICalendarDate {\n    date: Date;\n    isCurrentMonth: boolean;\n    isPrevMonth: boolean;\n    isNextMonth: boolean;\n}\n\nexport interface IFormattedParts {\n    value: string;\n    literal?: string;\n    combined: string;\n}\n\nexport interface IFormattingOptions {\n    day?: string;\n    month?: string;\n    weekday?: string;\n    year?: string;\n}\n\n\nexport interface IFormattingViews {\n    day?: boolean;\n    month?: boolean;\n    year?: boolean;\n}\n\nexport enum WEEKDAYS {\n    SUNDAY = 0,\n    MONDAY = 1,\n    TUESDAY = 2,\n    WEDNESDAY = 3,\n    THURSDAY = 4,\n    FRIDAY = 5,\n    SATURDAY = 6\n}\n\nexport class Calendar {\n\n    private _firstWeekDay: number | WEEKDAYS;\n\n    constructor(firstWeekDay: number | WEEKDAYS = WEEKDAYS.SUNDAY) {\n        this._firstWeekDay = firstWeekDay;\n    }\n\n    public get firstWeekDay(): number {\n        return this._firstWeekDay % 7;\n    }\n\n    public set firstWeekDay(value: number) {\n        this._firstWeekDay = value;\n    }\n\n    /**\n     * Returns an array of weekdays for one week starting\n     * with the currently set `firstWeekDay`\n     *\n     * this.firstWeekDay = 0 (Sunday) --> [0, 1, 2, 3, 4, 5, 6]\n     * this.firstWeekDay = 1 (Monday) --> [1, 2, 3, 4, 5, 6, 0]\n     *\n     * @returns\n     *\n     * @memberof Calendar\n     */\n    public weekdays(): number[] {\n        const res = [];\n        for (const i of range(this.firstWeekDay, this.firstWeekDay + 7)) {\n            res.push(i % 7);\n        }\n        return res;\n    }\n\n    /**\n     * Returns the date values for one month. It will always iterate throught\n     * complete weeks, so it will contain dates outside the specified month.\n     *\n     * @param year\n     * @param month\n     * @param boolean\n     * @returns\n     *\n     * @memberof Calendar\n     */\n    public monthdates(year: number, month: number, extraWeek: boolean = false): ICalendarDate[] {\n        let date = new Date(year, month, 1);\n        let days = (date.getDay() - this.firstWeekDay) % 7;\n        if (days < 0) {\n            days = 7 - Math.abs(days);\n        }\n        date = this.timedelta(date, 'day', -days);\n        const res = [];\n        let value: ICalendarDate;\n\n        while (true) {\n\n            value = this.generateICalendarDate(date, year, month);\n            res.push(value);\n\n            date = this.timedelta(date, 'day', 1);\n\n            if ((date.getMonth() !== month) && (date.getDay() === this.firstWeekDay)) {\n                if (extraWeek && res.length <= 35) {\n                    for (const _ of range(0, 7)) {\n                        value = this.generateICalendarDate(date, year, month);\n                        res.push(value);\n                        date = this.timedelta(date, 'day', 1);\n                    }\n                }\n                break;\n            }\n        }\n        return res;\n    }\n\n    /**\n     * Returns a matrix (array of arrays) representing a month's calendar.\n     * Each row represents a full week; week entries are ICalendarDate objects.\n     *\n     * @param year\n     * @param month\n     * @returns\n     *\n     * @memberof Calendar\n     */\n    public monthdatescalendar(year: number, month: number, extraWeek: boolean = false): ICalendarDate[][] {\n        const dates = this.monthdates(year, month, extraWeek);\n        const res = [];\n        for (const i of range(0, dates.length, 7)) {\n            res.push(dates.slice(i, i + 7));\n        }\n        return res;\n    }\n\n    public timedelta(date: Date, interval: string, units: number): Date {\n        const ret = new Date(date);\n\n        const checkRollover = () => {\n            if (ret.getDate() !== date.getDate()) {\n                ret.setDate(0);\n            }\n        };\n\n        switch (interval.toLowerCase()) {\n            case 'year':\n                ret.setFullYear(ret.getFullYear() + units);\n                checkRollover();\n                break;\n            case 'quarter':\n                ret.setMonth(ret.getMonth() + 3 * units);\n                checkRollover();\n                break;\n            case 'month':\n                ret.setMonth(ret.getMonth() + units);\n                checkRollover();\n                break;\n            case 'week':\n                ret.setDate(ret.getDate() + 7 * units);\n                break;\n            case 'day':\n                ret.setDate(ret.getDate() + units);\n                break;\n            case 'hour':\n                ret.setTime(ret.getTime() + units * 3600000);\n                break;\n            case 'minute':\n                ret.setTime(ret.getTime() + units * 60000);\n                break;\n            case 'second':\n                ret.setTime(ret.getTime() + units * 1000);\n                break;\n            default:\n                throw new Error('Invalid interval specifier');\n        }\n        return ret;\n    }\n\n    public formatToParts(date: Date, locale: string, options: any, parts: string[]) {\n        const formatter = new Intl.DateTimeFormat(locale, options);\n        const result = {\n            date,\n            full: formatter.format(date)\n        };\n\n        if ((formatter as any).formatToParts) {\n            const formattedParts = (formatter as any).formatToParts(date);\n\n            const toType = (partType: string) => {\n                const index = formattedParts.findIndex(({ type }) => type === partType);\n                const o: IFormattedParts = { value: '', literal: '', combined: '' };\n\n                if (partType === 'era' && index > -1) {\n                    o.value = formattedParts[index].value;\n                    return o;\n                } else if (partType === 'era' && index === -1) {\n                    return o;\n                }\n\n                o.value = formattedParts[index].value;\n                o.literal = formattedParts[index + 1] ? formattedParts[index + 1].value : '';\n                o.combined = [o.value, o.literal].join('');\n                return o;\n            };\n\n            for (const each of parts) {\n                result[each] = toType(each);\n            }\n        } else {\n            for (const each of parts) {\n                result[each] = { value: '', literal: '', combined: '' };\n            }\n        }\n        return result;\n    }\n\n    public getFirstViewDate(date: Date, interval: string, activeViewIdx: number) {\n        return this.timedelta(date, interval, -activeViewIdx);\n    }\n\n    public getNextMonth(date: Date) {\n        return this.timedelta(date, TimeDeltaInterval.Month, 1);\n    }\n\n    public getPrevMonth(date: Date) {\n        return this.timedelta(date, TimeDeltaInterval.Month, -1);\n    }\n\n    public getNextYear(date: Date) {\n        return this.timedelta(date, TimeDeltaInterval.Year, 1);\n    }\n\n    public getPrevYear(date: Date) {\n        return this.timedelta(date, TimeDeltaInterval.Year, -1);\n    }\n\n    private generateICalendarDate(date: Date, year: number, month: number): ICalendarDate {\n        return {\n            date,\n            isCurrentMonth: date.getFullYear() === year && date.getMonth() === month,\n            isNextMonth: this.isNextMonth(date, year, month),\n            isPrevMonth: this.isPreviousMonth(date, year, month)\n        };\n    }\n\n    private isPreviousMonth(date: Date, year: number, month: number): boolean {\n        if (date.getFullYear() === year) {\n            return date.getMonth() < month;\n        }\n        return date.getFullYear() < year;\n    }\n\n    private isNextMonth(date: Date, year: number, month: number): boolean {\n        if (date.getFullYear() === year) {\n            return date.getMonth() > month;\n        }\n\n        return date.getFullYear() > year;\n    }\n}\n","import { Input, Output, EventEmitter, Directive } from '@angular/core';\nimport { WEEKDAYS, Calendar, isDateInRanges, IFormattingOptions, IFormattingViews } from './calendar';\nimport { ControlValueAccessor } from '@angular/forms';\nimport { DateRangeDescriptor } from '../core/dates';\nimport { Subject } from 'rxjs';\nimport { isDate } from '../core/utils';\n\n/**\n * Sets the selction type - single, multi or range.\n */\nexport enum CalendarSelection {\n    SINGLE = 'single',\n    MULTI = 'multi',\n    RANGE = 'range'\n}\n\nexport enum ScrollMonth {\n    PREV = 'prev',\n    NEXT = 'next',\n    NONE = 'none'\n}\n\n/** @hidden @internal */\n@Directive({\n    selector: '[igxCalendarBase]'\n})\nexport class IgxCalendarBaseDirective implements ControlValueAccessor {\n    /**\n     * Gets the start day of the week.\n     * Can return a numeric or an enum representation of the week day.\n     * Defaults to `Sunday` / `0`.\n     */\n    @Input()\n    public get weekStart(): WEEKDAYS | number {\n        return this.calendarModel.firstWeekDay;\n    }\n\n    /**\n     * Sets the start day of the week.\n     * Can be assigned to a numeric value or to `WEEKDAYS` enum value.\n     */\n    public set weekStart(value: WEEKDAYS | number) {\n        this.calendarModel.firstWeekDay = value;\n    }\n\n    /**\n     * Gets the `locale` of the calendar.\n     * Default value is `\"en\"`.\n     */\n    @Input()\n    public get locale(): string {\n        return this._locale;\n    }\n\n    /**\n     * Sets the `locale` of the calendar.\n     * Expects a valid BCP 47 language tag.\n     * Default value is `\"en\"`.\n     */\n    public set locale(value: string) {\n        this._locale = value;\n        this.initFormatters();\n    }\n\n    /**\n     * Gets the date format options of the days view.\n     */\n    @Input()\n    public get formatOptions(): IFormattingOptions {\n        return this._formatOptions;\n    }\n\n    /**\n     * Sets the date format options of the days view.\n     * Default is { day: 'numeric', month: 'short', weekday: 'short', year: 'numeric' }\n     */\n    public set formatOptions(formatOptions: IFormattingOptions) {\n        this._formatOptions = Object.assign(this._formatOptions, formatOptions);\n        this.initFormatters();\n    }\n\n    /**\n     * Gets whether the `day`, `month` and `year` should be rendered\n     * according to the locale and formatOptions, if any.\n     */\n    @Input()\n    public get formatViews(): IFormattingViews {\n        return this._formatViews;\n    }\n\n    /**\n     * Gets whether the `day`, `month` and `year` should be rendered\n     * according to the locale and formatOptions, if any.\n     */\n    public set formatViews(formatViews: IFormattingViews) {\n        this._formatViews = Object.assign(this._formatViews, formatViews);\n    }\n\n    /**\n     *\n     * Gets the selection type.\n     * Default value is `\"single\"`.\n     * Changing the type of selection resets the currently\n     * selected values if any.\n     */\n    @Input()\n    public get selection(): string {\n        return this._selection;\n    }\n\n    /**\n     * Sets the selection.\n     */\n    public set selection(value: string) {\n        switch (value) {\n            case CalendarSelection.SINGLE:\n                this.selectedDates = null;\n                break;\n            case CalendarSelection.MULTI:\n            case CalendarSelection.RANGE:\n                this.selectedDates = [];\n                break;\n            default:\n                throw new Error('Invalid selection value');\n        }\n        this._onChangeCallback(this.selectedDates);\n        this.rangeStarted = false;\n        this._selection = value;\n    }\n\n    /**\n     * Gets the selected date(s).\n     *\n     * When selection is set to `single`, it returns\n     * a single `Date` object.\n     * Otherwise it is an array of `Date` objects.\n     */\n    @Input()\n    public get value(): Date | Date[] {\n        return this.selectedDates;\n    }\n\n    /**\n     * Sets the selected date(s).\n     *\n     * When selection is set to `single`, it accepts\n     * a single `Date` object.\n     * Otherwise it is an array of `Date` objects.\n     */\n    public set value(value: Date | Date[]) {\n        if (!value || !!value && (value as Date[]).length === 0) {\n            return;\n        }\n\n        this.selectDate(value);\n    }\n\n    /**\n     * Gets the date that is presented.\n     * By default it is the current date.\n     */\n    @Input()\n    public get viewDate(): Date {\n        return this._viewDate;\n    }\n\n    /**\n     * Sets the date that will be presented in the default view when the component renders.\n     */\n    public set viewDate(value: Date) {\n        this._viewDate = this.getDateOnly(value);\n    }\n\n    /**\n     * Gets the disabled dates descriptors.\n     */\n    @Input()\n    public get disabledDates(): DateRangeDescriptor[] {\n        return this._disabledDates;\n    }\n\n    /**\n     * Sets the disabled dates' descriptors.\n     * ```typescript\n     *@ViewChild(\"MyCalendar\")\n     *public calendar: IgxCalendarComponent;\n     *ngOnInit(){\n     *    this.calendar.disabledDates = [\n     *     {type: DateRangeType.Between, dateRange: [new Date(\"2020-1-1\"), new Date(\"2020-1-15\")]},\n     *     {type: DateRangeType.Weekends}];\n     *}\n     *```\n     */\n    public set disabledDates(value: DateRangeDescriptor[]) {\n        this._disabledDates = value;\n    }\n\n    /**\n     * Gets the special dates descriptors.\n     */\n    @Input()\n    public get specialDates(): DateRangeDescriptor[] {\n        return this._specialDates;\n    }\n\n    /**\n     * Sets the special dates' descriptors.\n     * ```typescript\n     *@ViewChild(\"MyCalendar\")\n     *public calendar: IgxCalendarComponent;\n     *ngOnInit(){\n     *    this.calendar.specialDates = [\n     *     {type: DateRangeType.Between, dateRange: [new Date(\"2020-1-1\"), new Date(\"2020-1-15\")]},\n     *     {type: DateRangeType.Weekends}];\n     *}\n     *```\n     */\n    public set specialDates(value: DateRangeDescriptor[]) {\n        this._specialDates = value;\n    }\n\n    /**\n     * Sets/gets whether the outside dates (dates that are out of the current month) will be hidden.\n     * Default value is `false`.\n     * ```html\n     * <igx-calendar [hideOutsideDays] = \"true\"></igx-calendar>\n     * ```\n     * ```typescript\n     * let hideOutsideDays = this.calendar.hideOutsideDays;\n     * ```\n     */\n\n    @Input()\n    public hideOutsideDays = false;\n\n    /**\n     * Emits an event when a date is selected.\n     * Provides reference the `selectedDates` property.\n     */\n    @Output()\n    public onSelection = new EventEmitter<Date | Date[]>();\n\n    /**\n     *@hidden\n     */\n    private _selection: CalendarSelection | string = CalendarSelection.SINGLE;\n\n    /**\n     *@hidden\n     */\n    public rangeStarted = false;\n\n    /**\n    *@hidden\n    */\n    private _locale = 'en';\n\n    /**\n     *@hidden\n     */\n    private _viewDate: Date;\n\n    /**\n     *@hidden\n     */\n    private _disabledDates: DateRangeDescriptor[] = null;\n\n    /**\n     *@hidden\n     */\n    private _specialDates: DateRangeDescriptor[] = null;\n\n    /**\n     *@hidden\n     */\n    private _formatOptions: IFormattingOptions = {\n        day: 'numeric',\n        month: 'short',\n        weekday: 'short',\n        year: 'numeric'\n    };\n\n    /**\n     *@hidden\n     */\n    private _formatViews: IFormattingViews = {\n        day: false,\n        month: true,\n        year: false\n    };\n\n    /**\n     *@hidden\n     */\n    protected formatterWeekday;\n\n    /**\n     *@hidden\n     */\n    protected formatterDay;\n\n    /**\n     *@hidden\n     */\n    protected formatterMonth;\n\n    /**\n     *@hidden\n     */\n    protected formatterYear;\n\n    /**\n     *@hidden\n     */\n    protected formatterMonthday;\n\n    /**\n     *@hidden\n     */\n    protected calendarModel: Calendar;\n\n    /**\n     * @hidden\n     */\n    public monthScrollDirection = ScrollMonth.NONE;\n\n    /**\n     *@hidden\n     */\n    public scrollMonth$ = new Subject();\n\n    /**\n     *@hidden\n     */\n    public stopMonthScroll$ = new Subject<boolean>();\n\n    /**\n     *@hidden\n     */\n    public startMonthScroll$ = new Subject();\n\n    /**\n     *@hidden\n     */\n    public selectedDates;\n\n    /**\n     *@hidden\n     */\n    protected _onTouchedCallback: () => void = () => { };\n    /**\n     *@hidden\n     */\n    protected _onChangeCallback: (_: Date) => void = () => { };\n\n    /**\n     * @hidden\n     */\n    constructor() {\n        this.calendarModel = new Calendar();\n\n        this.viewDate = this.viewDate ? this.viewDate : new Date();\n\n        this.calendarModel.firstWeekDay = this.weekStart;\n        this.initFormatters();\n    }\n\n    /**\n     *@hidden\n     */\n    private getDateOnlyInMs(date: Date) {\n        return this.getDateOnly(date).getTime();\n    }\n\n    /**\n     *@hidden\n     */\n    private generateDateRange(start: Date, end: Date): Date[] {\n        const result = [];\n        start = this.getDateOnly(start);\n        end = this.getDateOnly(end);\n        while (start.getTime() !== end.getTime()) {\n            start = this.calendarModel.timedelta(start, 'day', 1);\n            result.push(start);\n        }\n\n        return result;\n    }\n\n    /**\n     * Performs a single selection.\n     * @hidden\n     */\n    private selectSingle(value: Date) {\n        this.selectedDates = this.getDateOnly(value);\n        this._onChangeCallback(this.selectedDates);\n    }\n\n    /**\n     * Performs a multiple selection\n     * @hidden\n     */\n    private selectMultiple(value: Date | Date[]) {\n        if (Array.isArray(value)) {\n            const newDates = value.map(v => this.getDateOnly(v).getTime());\n            const selDates = this.selectedDates.map(v => this.getDateOnly(v).getTime());\n\n            if (JSON.stringify(newDates) === JSON.stringify(selDates)) {\n                return;\n            }\n\n            this.selectedDates = Array.from(new Set([...newDates, ...selDates])).map(v => new Date(v));\n        } else {\n            const valueDateOnly = this.getDateOnly(value);\n            const newSelection = [];\n            if (this.selectedDates.every((date: Date) => date.getTime() !== valueDateOnly.getTime())) {\n                newSelection.push(valueDateOnly);\n            } else {\n                this.selectedDates = this.selectedDates.filter(\n                    (date: Date) => date.getTime() !== valueDateOnly.getTime()\n                );\n            }\n\n            if (newSelection.length > 0) {\n                this.selectedDates = this.selectedDates.concat(newSelection);\n            }\n        }\n        this.selectedDates = this.selectedDates.filter(d => !this.isDateDisabled(d));\n        this.selectedDates.sort((a: Date, b: Date) => a.valueOf() - b.valueOf());\n        this._onChangeCallback(this.selectedDates);\n    }\n\n    /**\n     *@hidden\n     */\n    private selectRange(value: Date | Date[], excludeDisabledDates: boolean = false) {\n        let start: Date;\n        let end: Date;\n\n        if (Array.isArray(value)) {\n            // this.rangeStarted = false;\n            value.sort((a: Date, b: Date) => a.valueOf() - b.valueOf());\n            start = this.getDateOnly(value[0]);\n            end = this.getDateOnly(value[value.length - 1]);\n            this.selectedDates = [start, ...this.generateDateRange(start, end)];\n        } else {\n            if (!this.rangeStarted) {\n                this.rangeStarted = true;\n                this.selectedDates = [value];\n            } else {\n                this.rangeStarted = false;\n\n                if (this.selectedDates[0].getTime() === value.getTime()) {\n                    this.selectedDates = [];\n                    this._onChangeCallback(this.selectedDates);\n                    return;\n                }\n\n                this.selectedDates.push(value);\n                this.selectedDates.sort((a: Date, b: Date) => a.valueOf() - b.valueOf());\n\n                start = this.selectedDates.shift();\n                end = this.selectedDates.pop();\n                this.selectedDates = [start, ...this.generateDateRange(start, end)];\n            }\n        }\n\n        if (excludeDisabledDates) {\n            this.selectedDates = this.selectedDates.filter(d => !this.isDateDisabled(d));\n        }\n\n        this._onChangeCallback(this.selectedDates);\n    }\n\n    /**\n     * Performs a single deselection.\n     * @hidden\n     */\n    private deselectSingle(value: Date) {\n        if (this.selectedDates !== null &&\n            this.getDateOnlyInMs(value as Date) === this.getDateOnlyInMs(this.selectedDates)) {\n            this.selectedDates = null;\n            this._onChangeCallback(this.selectedDates);\n        }\n    }\n\n    /**\n     * Performs a multiple deselection.\n     * @hidden\n     */\n    private deselectMultiple(value: Date[]) {\n        value = value.filter(v => v !== null);\n        const selectedDatesCount = this.selectedDates.length;\n        const datesInMsToDeselect: Set<number> = new Set<number>(\n            value.map(v => this.getDateOnlyInMs(v)));\n\n        for (let i = this.selectedDates.length - 1; i >= 0; i--) {\n            if (datesInMsToDeselect.has(this.getDateOnlyInMs(this.selectedDates[i]))) {\n                this.selectedDates.splice(i, 1);\n            }\n        }\n\n        if (this.selectedDates.length !== selectedDatesCount) {\n            this._onChangeCallback(this.selectedDates);\n        }\n    }\n\n    /**\n     * Performs deselection of a single value, when selection is multi\n     * Usually performed by the selectMultiple method, but leads to bug when multiple months are in view\n     * @hidden\n     */\n    public deselectMultipleInMonth(value: Date) {\n        const valueDateOnly = this.getDateOnly(value);\n        this.selectedDates = this.selectedDates.filter(\n            (date: Date) => date.getTime() !== valueDateOnly.getTime()\n        );\n    }\n\n    /**\n     * Performs a range deselection.\n     * @hidden\n     */\n    private deselectRange(value: Date[]) {\n        value = value.filter(v => v !== null);\n        if (value.length < 1) {\n            return;\n        }\n\n        value.sort((a: Date, b: Date) => a.valueOf() - b.valueOf());\n        const valueStart = this.getDateOnlyInMs(value[0]);\n        const valueEnd = this.getDateOnlyInMs(value[value.length - 1]);\n\n        this.selectedDates.sort((a: Date, b: Date) => a.valueOf() - b.valueOf());\n        const selectedDatesStart = this.getDateOnlyInMs(this.selectedDates[0]);\n        const selectedDatesEnd = this.getDateOnlyInMs(this.selectedDates[this.selectedDates.length - 1]);\n\n        if (!(valueEnd < selectedDatesStart) && !(valueStart > selectedDatesEnd)) {\n            this.selectedDates = [];\n            this.rangeStarted = false;\n            this._onChangeCallback(this.selectedDates);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected initFormatters() {\n        this.formatterDay = new Intl.DateTimeFormat(this._locale, { day: this._formatOptions.day });\n        this.formatterWeekday = new Intl.DateTimeFormat(this._locale, { weekday: this._formatOptions.weekday });\n        this.formatterMonth = new Intl.DateTimeFormat(this._locale, { month: this._formatOptions.month });\n        this.formatterYear = new Intl.DateTimeFormat(this._locale, { year: this._formatOptions.year });\n        this.formatterMonthday = new Intl.DateTimeFormat(this._locale, { month: this._formatOptions.month, day: this._formatOptions.day });\n    }\n\n    /**\n     *@hidden\n     */\n    protected getDateOnly(date: Date) {\n        return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n    }\n\n    /**\n     * @hidden\n     */\n    public registerOnChange(fn: (v: Date) => void) {\n        this._onChangeCallback = fn;\n    }\n\n    /**\n     * @hidden\n     */\n    public registerOnTouched(fn: () => void) {\n        this._onTouchedCallback = fn;\n    }\n\n    /**\n     * @hidden\n     */\n    public writeValue(value: Date | Date[]) {\n        this.selectDate(value as Date);\n    }\n\n    /**\n     * Checks whether a date is disabled.\n     * @hidden\n     */\n    public isDateDisabled(date: Date) {\n        if (this.disabledDates === null) {\n            return false;\n        }\n\n        return isDateInRanges(date, this.disabledDates);\n    }\n\n    /**\n     * Selects date(s) (based on the selection type).\n     */\n    public selectDate(value: Date | Date[]) {\n        if (value === null || value === undefined || (Array.isArray(value) && value.length === 0)) {\n            return;\n        }\n\n        switch (this.selection) {\n            case CalendarSelection.SINGLE:\n                if (isDate(value) && !this.isDateDisabled(value as Date)) {\n                    this.selectSingle(value as Date);\n                }\n                break;\n            case CalendarSelection.MULTI:\n                this.selectMultiple(value);\n                break;\n            case CalendarSelection.RANGE:\n                this.selectRange(value, true);\n                break;\n        }\n    }\n\n    /**\n     * Deselects date(s) (based on the selection type).\n     */\n    public deselectDate(value?: Date | Date[]) {\n        if (!this.selectedDates || this.selectedDates.length === 0) {\n            return;\n        }\n\n        if (value === null || value === undefined) {\n            this.selectedDates = this.selection === CalendarSelection.SINGLE ? null : [];\n            this.rangeStarted = false;\n            this._onChangeCallback(this.selectedDates);\n            return;\n        }\n\n        switch (this.selection) {\n            case CalendarSelection.SINGLE:\n                this.deselectSingle(value as Date);\n                break;\n            case CalendarSelection.MULTI:\n                this.deselectMultiple(value as Date[]);\n                break;\n            case CalendarSelection.RANGE:\n                this.deselectRange(value as Date[]);\n                break;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public selectDateFromClient(value: Date) {\n        switch (this.selection) {\n            case CalendarSelection.SINGLE:\n            case CalendarSelection.MULTI:\n                this.selectDate(value);\n                break;\n            case CalendarSelection.RANGE:\n                this.selectRange(value, true);\n                break;\n        }\n    }\n}\n","/**\n * This file contains all the directives used by the @link IgxCalendarComponent.\n * Except for the directives which are used for templating the calendar itself\n * you should generally not use them directly.\n * @preferred\n */\nimport {\n    Directive,\n    EventEmitter,\n    HostBinding,\n    HostListener,\n    Input,\n    Output,\n    TemplateRef,\n    ElementRef,\n    AfterViewInit,\n    OnDestroy,\n    NgZone\n} from '@angular/core';\nimport { fromEvent, Subject, interval } from 'rxjs';\nimport { takeUntil, debounce, tap } from 'rxjs/operators';\nimport { KEYS } from '../core/utils';\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxCalendarYear]'\n})\nexport class IgxCalendarYearDirective {\n\n    @Input('igxCalendarYear')\n    public value: Date;\n\n    @Input()\n    public date: Date;\n\n    @Output()\n    public onYearSelection = new EventEmitter<Date>();\n\n    @HostBinding('class.igx-calendar__year')\n    public get defaultCSS(): boolean {\n        return !this.isCurrentYear;\n    }\n\n    @HostBinding('class.igx-calendar__year--current')\n    public get currentCSS(): boolean {\n        return this.isCurrentYear;\n    }\n\n    public get isCurrentYear(): boolean {\n        return this.date.getFullYear() === this.value.getFullYear();\n    }\n\n    @HostListener('click')\n    public onClick() {\n        this.onYearSelection.emit(this.value);\n    }\n}\n\n@Directive({\n    selector: '[igxCalendarMonth]'\n})\nexport class IgxCalendarMonthDirective {\n\n    @Input('igxCalendarMonth')\n    public value: Date;\n\n    @Input()\n    public date: Date;\n\n    @Input()\n    public index;\n\n    @Output()\n    public onMonthSelection = new EventEmitter<Date>();\n\n    @HostBinding('attr.tabindex')\n    public tabindex = 0;\n\n    @HostBinding('class.igx-calendar__month')\n    public get defaultCSS(): boolean {\n        return !this.isCurrentMonth;\n    }\n\n    @HostBinding('class.igx-calendar__month--current')\n    public get currentCSS(): boolean {\n        return this.isCurrentMonth;\n    }\n\n    public get isCurrentMonth(): boolean {\n        return this.date.getMonth() === this.value.getMonth();\n    }\n\n    public get nativeElement() {\n        return this.elementRef.nativeElement;\n    }\n\n    constructor(public elementRef: ElementRef) {}\n\n    @HostListener('click')\n    public onClick() {\n        const date = new Date(this.value.getFullYear(), this.value.getMonth(), this.date.getDate());\n        this.onMonthSelection.emit(date);\n    }\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxCalendarHeader]'\n})\nexport class IgxCalendarHeaderTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) {}\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxCalendarSubheader]'\n})\nexport class IgxCalendarSubheaderTemplateDirective {\n    constructor(public template: TemplateRef<any>) {}\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxCalendarScrollMonth]'\n})\nexport class IgxCalendarScrollMonthDirective implements AfterViewInit, OnDestroy {\n\n    /**\n     * A callback function to be invoked when month increment/decrement starts.\n     * @hidden\n     */\n    @Input()\n    public startScroll: (keydown?: boolean) => {};\n\n    /**\n     * A callback function to be invoked when month increment/decrement stops.\n     * @hidden\n     */\n    @Input()\n    public stopScroll: (event: any) => {};\n\n    /**\n     * @hidden\n     */\n    private destroy$ = new Subject<boolean>();\n\n    constructor(private element: ElementRef, private zone: NgZone) { }\n\n    /**\n     * @hidden\n     */\n    public ngAfterViewInit() {\n\n        fromEvent(this.element.nativeElement, 'keyup').pipe(\n            debounce(() => interval(100)),\n            takeUntil(this.destroy$)\n        ).subscribe((event: KeyboardEvent) => {\n            this.stopScroll(event);\n        });\n\n        this.zone.runOutsideAngular(() => {\n            fromEvent(this.element.nativeElement, 'keydown').pipe(\n                tap((event: KeyboardEvent) => {\n                    if (event.key === KEYS.SPACE || event.key === KEYS.SPACE_IE || event.key === KEYS.ENTER) {\n                        event.preventDefault();\n                        event.stopPropagation();\n                    }\n                }),\n                debounce(() => interval(100)),\n                takeUntil(this.destroy$)\n            ).subscribe((event: KeyboardEvent) => {\n                if (event.key === KEYS.SPACE || event.key === KEYS.SPACE_IE || event.key === KEYS.ENTER) {\n                    this.zone.run(() => this.startScroll(true));\n                }\n            });\n        });\n\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('mousedown')\n    public onMouseDown() {\n        this.startScroll();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('mouseup', ['$event'])\n    public onMouseUp(event: MouseEvent) {\n        this.stopScroll(event);\n    }\n}\n","import { IgxCalendarBaseDirective } from './calendar-base';\nimport { HostBinding, Directive, ViewChildren, ElementRef, QueryList } from '@angular/core';\nimport { KEYS } from '../core/utils';\n\n/**\n * Sets the calender view - days, months or years.\n */\nexport enum CalendarView {\n    DEFAULT,\n    YEAR,\n    DECADE\n}\n@Directive({\n    selector: '[igxMonthPickerBase]'\n})\nexport class IgxMonthPickerBaseDirective extends IgxCalendarBaseDirective {\n\n    /**\n     * Holds month view index we are operating on.\n     */\n    protected activeViewIdx = 0;\n\n    /**\n     * The default `tabindex` attribute for the component.\n     *\n     * @hidden\n     */\n    @HostBinding('attr.tabindex')\n    public tabindex = 0;\n\n    /**\n     * @hidden\n     */\n    @ViewChildren('yearsBtn')\n    public yearsBtns: QueryList<ElementRef>;\n\n\n    /**\n     * Gets the current active view.\n     */\n    public get activeView(): CalendarView {\n        return this._activeView;\n    }\n\n    /**\n     * Sets the current active view.\n     */\n    public set activeView(val: CalendarView) {\n        this._activeView = val;\n    }\n\n    /**\n     * @hidden\n     */\n    public get isDefaultView(): boolean {\n        return this._activeView === CalendarView.DEFAULT;\n    }\n\n    /**\n     * @hidden\n     */\n    public get isDecadeView(): boolean {\n        return this._activeView === CalendarView.DECADE;\n    }\n\n    /**\n     *@hidden\n     */\n    private _activeView = CalendarView.DEFAULT;\n\n    /**\n     * @hidden\n     */\n    public changeYear(event: Date) {\n        this.viewDate = this.calendarModel.getFirstViewDate(event, 'month', this.activeViewIdx);\n        this.activeView = CalendarView.DEFAULT;\n\n        requestAnimationFrame(() => {\n            if (this.yearsBtns && this.yearsBtns.length) {\n                this.yearsBtns.find((e: ElementRef, idx: number) => idx === this.activeViewIdx).nativeElement.focus();\n            }\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public activeViewDecade(activeViewIdx = 0): void {\n        this._activeView = CalendarView.DECADE;\n        this.activeViewIdx = activeViewIdx;\n    }\n\n    /**\n     * @hidden\n     */\n    public activeViewDecadeKB(event, activeViewIdx = 0) {\n        if (event.key === KEYS.SPACE || event.key === KEYS.SPACE_IE || event.key === KEYS.ENTER) {\n            event.preventDefault();\n            this.activeViewDecade(activeViewIdx);\n        }\n    }\n\n    /**\n     * Returns the locale representation of the year in the year view if enabled,\n     * otherwise returns the default `Date.getFullYear()` value.\n     *\n     * @hidden\n     */\n    public formattedYear(value: Date): string {\n        if (this.formatViews.year) {\n            return this.formatterYear.format(value);\n        }\n        return `${value.getFullYear()}`;\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { IgxDayItemComponent } from './day-item.component';\nimport { IgxDaysViewComponent } from './days-view.component';\nimport { ScrollMonth } from '../calendar-base';\n\nenum Direction {\n    Up = 'ArrowUp',\n    Down = 'ArrowDown',\n    Left = 'ArrowLeft',\n    Right = 'ArrowRight',\n}\n\nconst ARROW = 'Arrow';\n\n/** @hidden */\n@Injectable()\nexport class IgxDaysViewNavigationService {\n    public monthView: IgxDaysViewComponent;\n    /**\n     * Implements kb navigation in all MoveDirections. nextDate and nextMonthView naming convention is used for both previous/next\n     * @hidden\n     */\n    public focusNextDate(target: HTMLElement, key: string, nextView = false) {\n        if (target.childElementCount === 0) { target = target.parentElement; }\n        if (key.indexOf('Arrow') === -1) { key = ARROW.concat(key); }\n        const monthView = this.monthView;\n        const node = monthView.dates.find((date) => date.nativeElement === target);\n        let dates = monthView.dates.toArray(),\n            day: IgxDayItemComponent, step, i, nextDate: Date;\n        const index = dates.indexOf(node);\n\n        if (!node) { return; }\n\n        // focus item in current month\n        switch (key) {\n            case Direction.Left: {\n                step = -1;\n                nextDate = this.timedelta(node.date.date, step);\n                for (i = index; i > 0; i--) {\n                    day = nextView ? dates[i] : dates[i - 1];\n                    nextDate = day.date.date;\n                    if (day.date.isPrevMonth) {\n                        break;\n                    }\n                    if (day && day.isFocusable) {\n                        day.nativeElement.focus();\n                        return;\n                    }\n                }\n                break;\n            }\n            case Direction.Right: {\n                step = 1;\n                nextDate = this.timedelta(node.date.date, step);\n                for (i = index; i < dates.length - 1; i++) {\n                    day = nextView ? dates[i] : dates[i + 1];\n                    nextDate = day.date.date;\n                    if (day.date.isNextMonth) {\n                        break;\n                    }\n                    if (day && day.isFocusable) {\n                        day.nativeElement.focus();\n                        return;\n                    }\n                }\n                break;\n            }\n            case Direction.Up: {\n                step = -7;\n                nextDate = this.timedelta(node.date.date, step);\n                for (i = index; i - 7 > -1; i -= 7) {\n                    day = nextView ? dates[i] : dates[i - 7];\n                    nextDate = day.date.date;\n                    if (day.date.isPrevMonth) {\n                        break;\n                    }\n                    if (day && day.isFocusable) {\n                        day.nativeElement.focus();\n                        return;\n                    }\n                }\n                break;\n            }\n            case Direction.Down: {\n                step = 7;\n                nextDate = this.timedelta(node.date.date, step);\n                for (i = index; i + 7 < 42; i += 7) {\n                    day = nextView ? dates[i] : dates[i + 7];\n                    nextDate = day.date.date;\n                    if (day.date.isNextMonth) {\n                        break;\n                    }\n                    if (day && day.isFocusable) {\n                        day.nativeElement.focus();\n                        return;\n                    }\n                }\n                break;\n            }\n        }\n\n        // focus item in prev/next visible month\n        const nextMonthView = step > 0 ? monthView.nextMonthView : monthView.prevMonthView;\n        if (nextMonthView) {\n            dates = nextMonthView.dates.toArray();\n            day = dates.find((item) => item.date.date.getTime() === nextDate.getTime());\n\n            if (day && day.isFocusable) {\n                day.nativeElement.focus();\n                return;\n            }\n            nextMonthView.daysNavService.focusNextDate(day.nativeElement, key);\n        }\n\n        // if iterating in the visible prev/next moths above found a day that is not focusable, ie is disabled, hidden, etc\n        // then it is needed to recalculate the next day, which is going to be part of the prev/next months\n        if (day && !day.isFocusable) {\n            day = dates[i + step];\n            if (!day) {\n                nextDate = this.timedelta(node.date.date, step + i - index);\n            }\n        }\n\n        // focus item in prev/next month, which is currently out of view\n        let dayIsNextMonth: boolean; // determine what we need to check for next date - if it belongs to prev or next month\n        if (day) { dayIsNextMonth = step > 0 ? day.date.isNextMonth : day.date.isPrevMonth; }\n        if (monthView.changeDaysView && !nextMonthView && ((day && dayIsNextMonth) || !day)) {\n            const monthAction = step > 0 ? ScrollMonth.NEXT : ScrollMonth.PREV;\n            monthView.onViewChanging.emit({monthAction: monthAction, key: key, nextDate: nextDate});\n        }\n    }\n\n    /**\n     * Focuses first focusable day in the month. Will go to next visible month, if no day in the first month is focusable\n     * @hidden\n     */\n    public focusHomeDate() {\n        let monthView = this.monthView;\n        while (!this.focusFirstDay(monthView) && monthView.nextMonthView) {\n            monthView = monthView.nextMonthView;\n        }\n    }\n\n    /**\n     * Focuses last focusable day in the month. Will go to previous visible month, if no day in the first month is focusable\n     * @hidden\n     */\n    public focusEndDate() {\n        let monthView = this.monthView;\n        while (!this.focusLastDay(monthView) && monthView.prevMonthView) {\n            monthView = monthView.prevMonthView;\n        }\n    }\n\n    private timedelta(date: Date, units: number): Date {\n        const ret = new Date(date);\n        ret.setDate(ret.getDate() + units);\n        return ret;\n    }\n\n    private focusFirstDay(monthView: IgxDaysViewComponent): boolean {\n        const dates = monthView.dates.filter(d => d.isCurrentMonth);\n        for (let i = 0; i < dates.length; i++) {\n            if (dates[i].isFocusable) {\n                dates[i].nativeElement.focus();\n                return true;\n            }\n        }\n        return false;\n    }\n\n    private focusLastDay(monthView: IgxDaysViewComponent): boolean {\n        const dates = monthView.dates.filter(d => d.isCurrentMonth);\n        for (let i = dates.length - 1; i >= 0; i--) {\n            if (dates[i].isFocusable) {\n                dates[i].nativeElement.focus();\n                return true;\n            }\n        }\n        return false;\n    }\n}\n","import {\n    Component,\n    Output,\n    EventEmitter,\n    Input,\n    HostBinding,\n    HostListener,\n    ViewChildren,\n    QueryList,\n    ElementRef\n} from '@angular/core';\nimport { Calendar } from '../calendar';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IgxCalendarMonthDirective } from '../calendar.directives';\n\nlet NEXT_ID = 0;\n\n@Component({\n    providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: IgxMonthsViewComponent, multi: true }],\n    selector: 'igx-months-view',\n    templateUrl: 'months-view.component.html'\n})\nexport class IgxMonthsViewComponent implements ControlValueAccessor {\n\n    /**\n     * Sets/gets the `id` of the months view.\n     * If not set, the `id` will have value `\"igx-months-view-0\"`.\n     * ```html\n     * <igx-months-view id=\"my-months-view\"></igx-months-view>\n     * ```\n     * ```typescript\n     * let monthsViewId =  this.monthsView.id;\n     * ```\n     * @memberof IgxMonthsViewComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-months-view-${NEXT_ID++}`;\n\n    /**\n     * Gets/sets the selected date of the months view.\n     * By default it is the current date.\n     * ```html\n     * <igx-months-view [date]=\"myDate\"></igx-months-view>\n     * ```\n     * ```typescript\n     * let date =  this.monthsView.date;\n     * ```\n     * @memberof IgxMonthsViewComponent\n     */\n    @Input()\n    public date = new Date();\n\n    /**\n     * Gets the month format option of the months view.\n     * ```typescript\n     * let monthFormat = this.monthsView.monthFormat.\n     * ```\n     */\n    @Input()\n    public get monthFormat(): string {\n        return this._monthFormat;\n    }\n\n    /**\n     * Sets the month format option of the months view.\n     * ```html\n     * <igx-months-view> [monthFormat] = \"short'\"</igx-months-view>\n     * ```\n     * @memberof IgxMonthsViewComponent\n     */\n    public set monthFormat(value: string) {\n        this._monthFormat = value;\n        this.initMonthFormatter();\n    }\n\n    /**\n     * Gets the `locale` of the months view.\n     * Default value is `\"en\"`.\n     * ```typescript\n     * let locale =  this.monthsView.locale;\n     * ```\n     * @memberof IgxMonthsViewComponent\n     */\n    @Input()\n    public get locale(): string {\n        return this._locale;\n    }\n\n    /**\n     * Sets the `locale` of the months view.\n     * Expects a valid BCP 47 language tag.\n     * Default value is `\"en\"`.\n     * ```html\n     * <igx-months-view [locale]=\"de\"></igx-months-view>\n     * ```\n     * @memberof IgxMonthsViewComponent\n     */\n    public set locale(value: string) {\n        this._locale = value;\n        this.initMonthFormatter();\n    }\n\n    /**\n     * Gets/sets whether the view should be rendered\n     * according to the locale and monthFormat, if any.\n     */\n    @Input()\n    public formatView = true;\n\n    /**\n     * Emits an event when a selection is made in the months view.\n     * Provides reference the `date` property in the `IgxMonthsViewComponent`.\n     * ```html\n     * <igx-months-view (onSelection)=\"onSelection($event)\"></igx-months-view>\n     * ```\n     * @memberof IgxMonthsViewComponent\n     */\n    @Output()\n    public onSelection = new EventEmitter<Date>();\n\n    /**\n     * The default css class applied to the component.\n     *\n     * @hidden\n     */\n    @HostBinding('class.igx-calendar')\n    public styleClass = true;\n\n    /**\n     * @hidden\n     */\n    @ViewChildren(IgxCalendarMonthDirective, { read: IgxCalendarMonthDirective })\n    public monthsRef: QueryList<IgxCalendarMonthDirective>;\n\n\n    /**\n     * The default `tabindex` attribute for the component.\n     *\n     * @hidden\n     */\n    @HostBinding('attr.tabindex')\n    public tabindex = 0;\n\n    /**\n     * Returns an array of date objects which are then used to\n     * properly render the month names.\n     *\n     * Used in the template of the component\n     *\n     * @hidden\n     */\n    get months(): Date[] {\n        let start = new Date(this.date.getFullYear(), 0, 1);\n        const result = [];\n\n        for (let i = 0; i < 12; i++) {\n            result.push(start);\n            start = this._calendarModel.timedelta(start, 'month', 1);\n        }\n\n        return result;\n    }\n\n    /**\n     *@hidden\n     */\n    private _formatterMonth: any;\n\n    /**\n     *@hidden\n     */\n    private _locale = 'en';\n\n    /**\n     *@hidden\n     */\n    private _monthFormat = 'short';\n\n    /**\n     *@hidden\n     */\n    private _calendarModel: Calendar;\n\n    /**\n     *@hidden\n     */\n    private _onTouchedCallback: () => void = () => { };\n    /**\n     *@hidden\n     */\n    private _onChangeCallback: (_: Date) => void = () => { };\n\n    constructor(public el: ElementRef) {\n        this.initMonthFormatter();\n        this._calendarModel = new Calendar();\n    }\n\n    /**\n     * Returns the locale representation of the month in the months view.\n     *\n     * @hidden\n     */\n    public formattedMonth(value: Date): string {\n        if (this.formatView) {\n            return this._formatterMonth.format(value);\n        }\n        return `${value.getMonth()}`;\n    }\n\n    /**\n     *@hidden\n     */\n    public selectMonth(event) {\n        this.onSelection.emit(event);\n\n        this.date = event;\n        this._onChangeCallback(this.date);\n    }\n\n    /**\n     * @hidden\n     */\n    public registerOnChange(fn: (v: Date) => void) {\n        this._onChangeCallback = fn;\n    }\n\n    /**\n     * @hidden\n     */\n    public registerOnTouched(fn: () => void) {\n        this._onTouchedCallback = fn;\n    }\n\n    /**\n     * @hidden\n     */\n    public writeValue(value: Date) {\n        if (value) {\n            this.date = value;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public monthTracker(index, item): string {\n        return `${item.getMonth()}}`;\n    }\n\n    /**\n     *@hidden\n     */\n    private initMonthFormatter() {\n        this._formatterMonth = new Intl.DateTimeFormat(this._locale, { month: this.monthFormat });\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowup', ['$event'])\n    public onKeydownArrowUp(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const node = this.monthsRef.find((date) => date.nativeElement === event.target);\n        if (!node) {\n            return;\n        }\n\n        const months = this.monthsRef.toArray();\n        const nodeRect = node.nativeElement.getBoundingClientRect();\n\n        for (let index = months.indexOf(node) - 1; index >= 0; index--) {\n            const nextNodeRect = months[index].nativeElement.getBoundingClientRect();\n            const tolerance = 6;\n            if (nodeRect.top !== nextNodeRect.top && (nextNodeRect.left - nodeRect.left) < tolerance) {\n                months[index].nativeElement.focus();\n                break;\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowdown', ['$event'])\n    public onKeydownArrowDown(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const node = this.monthsRef.find((date) => date.nativeElement === event.target);\n        if (!node) {\n            return;\n        }\n\n        const months = this.monthsRef.toArray();\n        const nodeRect = node.nativeElement.getBoundingClientRect();\n\n        for (let index = months.indexOf(node) + 1; index < months.length; index++) {\n            const nextNodeRect = months[index].nativeElement.getBoundingClientRect();\n            const tolerance = 6;\n            if (nextNodeRect.top !== nodeRect.top && (nodeRect.left - nextNodeRect.left) < tolerance ) {\n                months[index].nativeElement.focus();\n                break;\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowright', ['$event'])\n    public onKeydownArrowRight(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const node = this.monthsRef.find((date) => date.nativeElement === event.target);\n        if (!node) { return; }\n\n        const months = this.monthsRef.toArray();\n        if (months.indexOf(node) + 1 < months.length) {\n            const month = months[months.indexOf(node) + 1];\n\n            month.nativeElement.focus();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowleft', ['$event'])\n    public onKeydownArrowLeft(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const node = this.monthsRef.find((date) => date.nativeElement === event.target);\n        if (!node) { return; }\n\n        const months = this.monthsRef.toArray();\n        if (months.indexOf(node) - 1 >= 0) {\n            const month = months[months.indexOf(node) - 1];\n\n            month.nativeElement.focus();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.home', ['$event'])\n    public onKeydownHome(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const month = this.monthsRef.toArray()[0];\n\n        month.nativeElement.focus();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.end', ['$event'])\n    public onKeydownEnd(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const months = this.monthsRef.toArray();\n        const month = months[months.length - 1];\n\n        month.nativeElement.focus();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.enter', ['$event'])\n    public onKeydownEnter(event) {\n        const value = this.monthsRef.find((date) => date.nativeElement === event.target).value;\n        this.date = new Date(value.getFullYear(), value.getMonth(), this.date.getDate());\n\n        this.onSelection.emit(this.date);\n        this._onChangeCallback(this.date);\n    }\n}\n","import { Component, Output, EventEmitter, Input, HostBinding, HostListener, ElementRef, Injectable} from '@angular/core';\nimport { range, Calendar } from '../calendar';\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\nimport { HammerGestureConfig, HAMMER_GESTURE_CONFIG } from '@angular/platform-browser';\n\nlet NEXT_ID = 0;\n\n@Injectable()\nexport class CalendarHammerConfig extends HammerGestureConfig {\n    public overrides = {\n        pan: { direction: Hammer.DIRECTION_VERTICAL, threshold: 1 }\n    };\n}\n\n@Component({\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: IgxYearsViewComponent,\n            multi: true\n        },\n        {\n            provide: HAMMER_GESTURE_CONFIG,\n            useClass: CalendarHammerConfig\n        }\n    ],\n    selector: 'igx-years-view',\n    templateUrl: 'years-view.component.html'\n})\nexport class IgxYearsViewComponent implements ControlValueAccessor {\n\n    /**\n     * Sets/gets the `id` of the years view.\n     * If not set, the `id` will have value `\"igx-years-view-0\"`.\n     * ```html\n     * <igx-years-view id = \"my-years-view\"></igx-years-view>\n     * ```\n     * ```typescript\n     * let yearsViewId =  this.yearsView.id;\n     * ```\n     * @memberof IgxCalendarComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-years-view-${NEXT_ID++}`;\n\n    /**\n     * Gets/sets the selected date of the years view.\n     * By default it is the current date.\n     * ```html\n     * <igx-years-view [date]=\"myDate\"></igx-years-view>\n     * ```\n     * ```typescript\n     * let date =  this.yearsView.date;\n     * ```\n     * @memberof IgxYearsViewComponent\n     */\n    @Input()\n    public date = new Date();\n\n    /**\n     * Gets the year format option of the years view.\n     * ```typescript\n     * let yearFormat = this.yearsView.yearFormat.\n     * ```\n     */\n    @Input()\n    public get yearFormat(): string {\n        return this._yearFormat;\n    }\n\n    /**\n     * Sets the year format option of the years view.\n     * ```html\n     * <igx-years-view [yearFormat]=\"numeric\"></igx-years-view>\n     * ```\n     * @memberof IgxYearsViewComponent\n     */\n    public set yearFormat(value: string) {\n        this._yearFormat = value;\n        this.initYearFormatter();\n    }\n\n    /**\n     * Gets the `locale` of the years view.\n     * Default value is `\"en\"`.\n     * ```typescript\n     * let locale =  this.yearsView.locale;\n     * ```\n     * @memberof IgxYearsViewComponent\n     */\n    @Input()\n    public get locale(): string {\n        return this._locale;\n    }\n\n    /**\n     * Sets the `locale` of the years view.\n     * Expects a valid BCP 47 language tag.\n     * Default value is `\"en\"`.\n     * ```html\n     * <igx-years-view [locale]=\"de\"></igx-years-view>\n     * ```\n     * @memberof IgxYearsViewComponent\n     */\n    public set locale(value: string) {\n        this._locale = value;\n        this.initYearFormatter();\n    }\n\n    /**\n     * Gets/sets whether the view should be rendered\n     * according to the locale and yearFormat, if any.\n     */\n    @Input()\n    public formatView: boolean;\n\n    /**\n     * Emits an event when a selection is made in the years view.\n     * Provides reference the `date` property in the `IgxYearsViewComponent`.\n     * ```html\n     * <igx-years-view (onSelection)=\"onSelection($event)\"></igx-years-view>\n     * ```\n     * @memberof IgxYearsViewComponent\n     */\n    @Output()\n    public onSelection = new EventEmitter<Date>();\n\n    /**\n     * The default css class applied to the component.\n     *\n     * @hidden\n     */\n    @HostBinding('class.igx-calendar')\n    public styleClass = true;\n\n    /**\n     * The default `tabindex` attribute for the component.\n     *\n     * @hidden\n     */\n    @HostBinding('attr.tabindex')\n    public tabindex = 0;\n\n    /**\n     * Returns an array of date objects which are then used to properly\n     * render the years.\n     *\n     * Used in the template of the component.\n     *\n     * @hidden\n     */\n    get decade(): number[] {\n        const result = [];\n        const start = this.date.getFullYear() - 3;\n        const end = this.date.getFullYear() + 4;\n\n        for (const year of range(start, end)) {\n            result.push(new Date(year, this.date.getMonth(), this.date.getDate()));\n        }\n\n        return result;\n    }\n\n    /**\n     *@hidden\n     */\n    private _formatterYear: any;\n\n    /**\n     *@hidden\n     */\n    private _locale = 'en';\n\n    /**\n     *@hidden\n     */\n    private _yearFormat = 'numeric';\n\n    /**\n     *@hidden\n     */\n    private _calendarModel: Calendar;\n\n    /**\n     *@hidden\n     */\n    private _onTouchedCallback: () => void = () => { };\n    /**\n     *@hidden\n     */\n    private _onChangeCallback: (_: Date) => void = () => { };\n\n    constructor(public el: ElementRef) {\n        this.initYearFormatter();\n        this._calendarModel = new Calendar();\n    }\n\n    /**\n     * Returns the locale representation of the year in the years view.\n     *\n     * @hidden\n     */\n    public formattedYear(value: Date): string {\n        if (this.formatView) {\n            return this._formatterYear.format(value);\n        }\n        return `${value.getFullYear()}`;\n    }\n\n    /**\n     *@hidden\n     */\n    public selectYear(event) {\n        this.date = event;\n\n        this.onSelection.emit(this.date);\n        this._onChangeCallback(this.date);\n    }\n\n    /**\n     *@hidden\n     */\n    public scroll(event) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const delta = event.deltaY < 0 ? -1 : 1;\n        this.generateYearRange(delta);\n    }\n\n    /**\n     *@hidden\n     */\n    public pan(event) {\n        const delta = event.deltaY < 0 ? 1 : -1;\n        this.generateYearRange(delta);\n    }\n\n    /**\n     * @hidden\n     */\n    public registerOnChange(fn: (v: Date) => void) {\n        this._onChangeCallback = fn;\n    }\n\n    /**\n     * @hidden\n     */\n    public registerOnTouched(fn: () => void) {\n        this._onTouchedCallback = fn;\n    }\n\n    /**\n     * @hidden\n     */\n    public yearTracker(index, item): string {\n        return `${item.getFullYear()}}`;\n    }\n\n    /**\n     * @hidden\n     */\n    public writeValue(value: Date) {\n        if (value) {\n            this.date = value;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowdown', ['$event'])\n    public onKeydownArrowDown(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        this.generateYearRange(1);\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowup', ['$event'])\n    public onKeydownArrowUp(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        this.generateYearRange(-1);\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.enter')\n    public onKeydownEnter() {\n        this.onSelection.emit(this.date);\n        this._onChangeCallback(this.date);\n    }\n\n    /**\n     *@hidden\n     */\n    private initYearFormatter() {\n        this._formatterYear = new Intl.DateTimeFormat(this._locale, { year: this.yearFormat });\n    }\n\n    /**\n     *@hidden\n     */\n    private generateYearRange(delta: number) {\n        const currentYear = new Date().getFullYear();\n\n        if ((delta > 0 && this.date.getFullYear() - currentYear >= 95) ||\n            (delta < 0 && currentYear - this.date.getFullYear() >= 95)) {\n            return;\n        }\n        this.date = this._calendarModel.timedelta(this.date, 'year', delta);\n    }\n}\n","import { Component, Input, Output, EventEmitter, HostBinding, ElementRef, HostListener } from '@angular/core';\nimport { ICalendarDate, isDateInRanges } from '../calendar';\nimport { DateRangeDescriptor } from '../../core/dates';\nimport { CalendarSelection } from '../calendar-base';\n\n/**\n *@hidden\n*/\n@Component({\n    selector: 'igx-day-item',\n    templateUrl: 'day-item.component.html'\n})\nexport class IgxDayItemComponent {\n    @Input()\n    public date: ICalendarDate;\n\n    @Input()\n    public selection: string;\n\n    /**\n     * Returns boolean indicating if the day is selected\n     *\n     */\n    @Input()\n    public get selected(): any {\n        return this._selected;\n    }\n\n    /**\n     * Selects the day\n     */\n    public set selected(value: any) {\n        this._selected = value;\n    }\n\n    @Input()\n    public disabledDates: DateRangeDescriptor[];\n\n    @Input()\n    public outOfRangeDates: DateRangeDescriptor[];\n\n    @Input()\n    public specialDates: DateRangeDescriptor[];\n\n    @Input()\n    public hideOutsideDays = false;\n\n    @Input()\n    @HostBinding('class.igx-calendar__date--last')\n    public isLastInRange = false;\n\n    @Input()\n    @HostBinding('class.igx-calendar__date--first')\n    public isFirstInRange = false;\n\n    @Input()\n    public isWithinRange = false;\n\n    @Output()\n    public onDateSelection = new EventEmitter<ICalendarDate>();\n\n    public get isCurrentMonth(): boolean {\n        return this.date.isCurrentMonth;\n    }\n\n    public get isPreviousMonth(): boolean {\n        return this.date.isPrevMonth;\n    }\n\n    public get isNextMonth(): boolean {\n        return this.date.isNextMonth;\n    }\n\n    public get nativeElement() {\n        return this.elementRef.nativeElement;\n    }\n\n    @HostBinding('class.igx-calendar__date--selected')\n    public get isSelectedCSS(): boolean {\n        return (!this.isDisabled && this.selected);\n    }\n\n    @HostBinding('class.igx-calendar__date--inactive')\n    public get isInactive(): boolean {\n        return this.date.isNextMonth || this.date.isPrevMonth;\n    }\n\n    @HostBinding('class.igx-calendar__date--hidden')\n    public get isHidden(): boolean {\n        return this.hideOutsideDays && this.isInactive;\n    }\n\n    @HostBinding('class.igx-calendar__date--current')\n    public get isToday(): boolean {\n        const today = new Date(Date.now());\n        const date = this.date.date;\n        return (date.getFullYear() === today.getFullYear() &&\n            date.getMonth() === today.getMonth() &&\n            date.getDate() === today.getDate()\n        );\n    }\n\n    @HostBinding('class.igx-calendar__date--weekend')\n    public get isWeekend(): boolean {\n        const day = this.date.date.getDay();\n        return day === 0 || day === 6;\n    }\n\n    public get isDisabled(): boolean {\n        if (this.disabledDates === null) {\n            return false;\n        }\n\n        return isDateInRanges(this.date.date, this.disabledDates);\n    }\n\n    public get isOutOfRange(): boolean {\n        if (!this.outOfRangeDates) {\n            return false;\n        }\n\n        return isDateInRanges(this.date.date, this.outOfRangeDates);\n    }\n\n    public get isFocusable(): boolean {\n        return this.isCurrentMonth && !this.isHidden && !this.isDisabled && !this.isOutOfRange;\n    }\n\n    @HostBinding('class.igx-calendar__date--range')\n    public get isWithinRangeCSS(): boolean {\n        return !this.isSingleSelection && this.isWithinRange;\n    }\n\n    @HostBinding('class.igx-calendar__date--special')\n    public get isSpecial(): boolean {\n        if (this.specialDates === null) {\n            return false;\n        }\n\n        return isDateInRanges(this.date.date, this.specialDates);\n    }\n\n    @HostBinding('class.igx-calendar__date')\n    public get defaultCSS(): boolean {\n        return this.date.isCurrentMonth && !(this.isWeekend && this.selected);\n    }\n\n    @HostBinding('class.igx-calendar__date--disabled')\n    public get isDisabledCSS(): boolean {\n        return this.isHidden || this.isDisabled || this.isOutOfRange;\n    }\n\n    @HostBinding('class.igx-calendar__date--single')\n    public get isSingleSelection(): boolean {\n        return this.selection !== CalendarSelection.RANGE;\n    }\n\n    @HostBinding('attr.tabindex')\n    public get tabindex(): number {\n        return this.isDisabled || this.isHidden ? -1 : 0;\n    }\n\n    private _selected = false;\n\n    constructor(private elementRef: ElementRef) { }\n\n    @HostListener('click')\n    @HostListener('keydown.enter')\n    public onSelect() {\n        this.onDateSelection.emit(this.date);\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    Component,\n    Directive,\n    HostBinding,\n    Optional,\n    Inject,\n    Input,\n    NgModule,\n    OnInit,\n    OnChanges,\n    SimpleChanges\n} from '@angular/core';\nimport { IgxButtonModule } from '../directives/button/button.directive';\n\nlet NEXT_ID = 0;\n\n/**\n * IgxCardMedia is container for the card media section.\n * Use it to wrap images and videos.\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-card-media'\n})\nexport class IgxCardMediaDirective {\n    /** @hidden @internal */\n    @HostBinding('class.igx-card__media')\n    public cssClass = 'igx-card__media';\n\n    /**\n     * An @Input property that sets the `width` and `min-width` style property\n     * of the media container. If not provided it will be set to `auto`.\n     *\n     * @example\n     * ```html\n     * <igx-card-media width=\"300px\"></igx-card-media>\n     * ```\n     */\n    @HostBinding('style.width')\n    @HostBinding('style.min-width')\n    @Input()\n    public width = 'auto';\n\n    /**\n     * An @Input property that sets the `height` style property of the media container.\n     * If not provided it will be set to `auto`.\n     *\n     * @example\n     * ```html\n     * <igx-card-media height=\"50%\"></igx-card-media>\n     * ```\n     */\n    @HostBinding('style.height')\n    @Input()\n    public height = 'auto';\n\n    /**\n     * An @Input property that sets the `role` attribute of the media container.\n     */\n    @HostBinding('attr.role')\n    @Input()\n    public role = 'img';\n}\n\n/**\n * IgxCardHeader is container for the card header\n */\n@Component({\n    selector: 'igx-card-header',\n    templateUrl: 'card-header.component.html'\n})\nexport class IgxCardHeaderComponent {\n    /** @hidden @internal */\n    @HostBinding('class.igx-card-header')\n    public cssClass = 'igx-card-header';\n\n    /**\n     * An @Input property that sets the layout style of the header.\n     * By default the header elements(thumbnail and title/subtitle) are aligned horizontally.\n     *\n     * @example\n     * ```html\n     * <igx-card-header [vertical]=\"true\"></igx-card-header>\n     * ```\n     */\n    @HostBinding('class.igx-card-header--vertical')\n    @Input()\n    public vertical = false;\n\n    /**\n     * An @Input property that sets the value of the `role` attribute of the card header.\n     * By default the value is set to `header`.\n     *\n     * @example\n     * ```html\n     * <igx-card-header role=\"header\"></igx-card-header>\n     * ```\n     */\n    @HostBinding('attr.role')\n    public role = 'header';\n}\n\n/**\n * IgxCardThumbnail is container for the card thumbnail section.\n * Use it to wrap anything you want to be used as a thumbnail.\n */\n@Directive({\n    selector: '[igxCardThumbnail]'\n})\nexport class IgxCardThumbnailDirective { }\n\n/**\n * igxCardHeaderTitle is used to denote the header title in a card.\n * Use it to tag text nodes.\n */\n@Directive({\n    selector: '[igxCardHeaderTitle]'\n})\nexport class IgxCardHeaderTitleDirective {\n    /** @hidden @internal */\n    @HostBinding('class.igx-card-header__title')\n    public cssClass = 'igx-card__header__title';\n}\n\n/**\n * igxCardHeaderSubtitle is used to denote the header subtitle in a card.\n * Use it to tag text nodes.\n */\n@Directive({\n    selector: '[igxCardHeaderSubtitle]'\n})\nexport class IgxCardHeaderSubtitleDirective {\n    /** @hidden @internal */\n    @HostBinding('class.igx-card-header__subtitle')\n    public cssClass = 'igx-card-header__subtitle';\n}\n/**\n * IgxCardContent is container for the card content.\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-card-content'\n})\nexport class IgxCardContentDirective {\n    /** @hidden @internal */\n    @HostBinding('class.igx-card-content')\n    public cssClass = 'igx-card-content';\n}\n\n/**\n * IgxCardFooter is container for the card footer\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-card-footer'\n})\nexport class IgxCardFooterDirective {\n    /**\n     * An @Input property that sets the value of the `role` attribute of the card footer.\n     * By default the value is set to `footer`.\n     *\n     * @example\n     * ```html\n     * <igx-card-footer role=\"footer\"></igx-card-footer>\n     * ```\n     */\n    @HostBinding('attr.role')\n    @Input()\n    public role = 'footer';\n}\n\n/**\n * Card provides a way to display organized content in appealing way.\n *\n * @igxModule IgxCardModule\n *\n * @igxTheme igx-card-theme, igx-icon-theme, igx-button-theme\n *\n * @igxKeywords card, button, avatar, icon\n *\n * @igxGroup Layouts\n *\n * @remarks\n * The Ignite UI Card serves as a container that allows custom content to be organized in an appealing way. There are\n * five sections in a card that you can use to organize your content. These are header, media, content, actions, and footer.\n *\n * @example\n * ```html\n * <igx-card>\n *   <igx-card-header>\n *     <h3 igxCardHeaderTitle>{{title}}</h3>\n *     <h5 igxCardHeaderSubtitle>{{subtitle}}</h5>\n *   </igx-card-header>\n *   <igx-card-actions>\n *       <button igxButton igxRipple>Share</button>\n *       <button igxButton igxRipple>Play Album</button>\n *   </igx-card-actions>\n * </igx-card>\n * ```\n */\n\nexport enum IgxCardType {\n    ELEVATED = 'elevated',\n    OUTLINED = 'outlined'\n}\n\n@Component({\n    selector: 'igx-card',\n    templateUrl: 'card.component.html'\n})\nexport class IgxCardComponent {\n    /**\n     * Sets/gets the `id` of the card.\n     * If not set, `id` will have value `\"igx-card-0\"`;\n     *\n     * @example\n     * ```html\n     * <igx-card id = \"my-first-card\"></igx-card>\n     * ```\n     * ```typescript\n     * let cardId =  this.card.id;\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-card-${NEXT_ID++}`;\n\n    /**\n     * An @Input property that sets the value of the `role` attribute of the card.\n     * By default the value is set to `group`.\n     *\n     * @example\n     * ```html\n     * <igx-card role=\"group\"></igx-card>\n     * ```\n     */\n    @HostBinding('attr.role')\n    @Input()\n    public role = 'group';\n\n    /**\n     * An @Input property that sets the value of the `type` attribute of the card.\n     * By default the value is set to `default`. You can make the card use the\n     * outlined style by setting the value to `outlined`.\n     *\n     * @example\n     * ```html\n     * <igx-card type=\"outlined\"></igx-card>\n     * ```\n     */\n    @HostBinding('class.igx-card')\n    @Input()\n    public type: IgxCardType | string = IgxCardType.ELEVATED;\n\n    /**\n     * A getter which will return true if the card type is `outlined`.\n     */\n    @HostBinding('class.igx-card--outlined')\n    get isOutlinedCard() {\n        return this.type === IgxCardType.OUTLINED;\n    }\n\n    /**\n     * An @Input property that sets the value of the `horizontal` attribute of the card.\n     * Setting this to `true` will make the different card sections align horizontally,\n     * essentially flipping the card to the side.\n     *\n     * @example\n     * ```html\n     * <igx-card [horizontal]=\"true\"></igx-card>\n     * ```\n     */\n    @HostBinding('class.igx-card--horizontal')\n    @Input()\n    public horizontal = false;\n}\n\nexport enum IgxCardActionsLayout {\n    START = 'start',\n    JUSTIFY = 'justify',\n}\n\n/**\n * IgxCardActions is container for the card actions.\n */\n@Component({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-card-actions',\n    templateUrl: 'card-actions.component.html'\n})\nexport class IgxCardActionsComponent implements OnInit, OnChanges {\n    private isVerticalSet = false;\n\n    constructor(@Optional() @Inject(IgxCardComponent) public card: IgxCardComponent) { }\n\n    /**\n     * An @Input property that sets the layout style of the actions.\n     * By default icons and icon buttons, as well as regular buttons\n     * are split into two containers, which are then positioned on both ends\n     * of the card-actions area.\n     * You can justify the elements in those groups so they are positioned equally\n     * from one another taking up all the space available along the card actions axis.\n     *\n     * @example\n     * ```html\n     * <igx-card-actions layout=\"justify\"></igx-card-actions>\n     * ```\n     */\n    @HostBinding('class.igx-card-actions')\n    @Input()\n    public layout: IgxCardActionsLayout | string = IgxCardActionsLayout.START;\n\n    /**\n     * An @Input property that sets the vertical attribute of the actions.\n     * When set to `true` the actions will be layed out vertically.\n     */\n    @HostBinding('class.igx-card-actions--vertical')\n    @Input()\n    public vertical: boolean;\n\n    /**\n     * A getter that returns `true` when the layout has been\n     * set to `justify`.\n     */\n    @HostBinding('class.igx-card-actions--justify')\n    get isJustifyLayout() {\n        return this.layout === IgxCardActionsLayout.JUSTIFY;\n    }\n\n    /**\n     * An @Input property that sets order of the buttons the actions area.\n     * By default all icons/icon buttons are placed at the end of the action\n     * area. Any regular buttons(flat, raised) will appear before the icons/icon buttons\n     * placed in the actions area.\n     * If you want to reverse their positions so that icons appear first, use the `reverse`\n     * attribute.\n     *\n     * @example\n     * ```html\n     * <igx-card-actions [reverse]=\"true\"></igx-card-actions>\n     * ```\n     */\n    @HostBinding('class.igx-card-actions--reverse')\n    @Input()\n    public reverse = false;\n\n    ngOnChanges(changes: SimpleChanges) {\n        for (const prop in changes) {\n            if (prop === 'vertical') {\n                this.isVerticalSet = true;\n            }\n        }\n    }\n\n    ngOnInit() {\n        this.vertical = !this.isVerticalSet && this.card.horizontal;\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxCardComponent,\n        IgxCardHeaderComponent,\n        IgxCardMediaDirective,\n        IgxCardContentDirective,\n        IgxCardActionsComponent,\n        IgxCardFooterDirective,\n        IgxCardHeaderTitleDirective,\n        IgxCardHeaderSubtitleDirective,\n        IgxCardThumbnailDirective,\n    ],\n    exports: [\n        IgxCardComponent,\n        IgxCardHeaderComponent,\n        IgxCardMediaDirective,\n        IgxCardContentDirective,\n        IgxCardActionsComponent,\n        IgxCardFooterDirective,\n        IgxCardHeaderTitleDirective,\n        IgxCardHeaderSubtitleDirective,\n        IgxCardThumbnailDirective,\n    ],\n    imports: [CommonModule, IgxButtonModule]\n})\nexport class IgxCardModule { }\n","import {\n    Component,\n    Output,\n    EventEmitter,\n    Input,\n    HostListener,\n    ViewChildren,\n    QueryList,\n    HostBinding,\n    DoCheck,\n    OnInit\n} from '@angular/core';\nimport { ICalendarDate, isDateInRanges } from '../../calendar/calendar';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IgxDayItemComponent } from './day-item.component';\nimport { DateRangeDescriptor, DateRangeType } from '../../core/dates';\nimport { IgxCalendarBaseDirective, CalendarSelection } from '../calendar-base';\nimport { isEqual } from '../../core/utils';\nimport { IViewChangingEventArgs } from './days-view.interface';\nimport { IgxDaysViewNavigationService } from './daysview-navigation.service';\n\nlet NEXT_ID = 0;\n\n@Component({\n    providers: [\n        {\n            multi: true,\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: IgxDaysViewComponent\n        },\n        { provide: IgxDaysViewNavigationService, useClass: IgxDaysViewNavigationService }\n    ],\n    selector: 'igx-days-view',\n    templateUrl: 'days-view.component.html'\n})\nexport class IgxDaysViewComponent extends IgxCalendarBaseDirective implements DoCheck, OnInit {\n    /**\n     * Sets/gets the `id` of the days view.\n     * If not set, the `id` will have value `\"igx-days-view-0\"`.\n     * ```html\n     * <igx-days-view id=\"my-days-view\"></igx-days-view>\n     * ```\n     * ```typescript\n     * let daysViewId =  this.daysView.id;\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-days-view-${NEXT_ID++}`;\n\n    /**\n     * @hidden\n     */\n    @Input()\n    public changeDaysView = false;\n\n    /**\n     * @hidden\n     */\n    @Output()\n    public onDateSelection = new EventEmitter<ICalendarDate>();\n\n    /**\n     * @hidden\n     */\n    @Output()\n    public onViewChanging = new EventEmitter<IViewChangingEventArgs>();\n\n    /**\n     * @hidden\n     */\n    @ViewChildren(IgxDayItemComponent, { read: IgxDayItemComponent })\n    public dates: QueryList<IgxDayItemComponent>;\n\n    /**\n     * @hidden\n     */\n    public outOfRangeDates: DateRangeDescriptor[];\n\n    /**\n     * @hidden\n     */\n    public nextMonthView: IgxDaysViewComponent;\n\n    /**\n     * @hidden\n     */\n    public prevMonthView: IgxDaysViewComponent;\n\n    /**\n     * The default css class applied to the component.\n     *\n     * @hidden\n     */\n    @HostBinding('class.igx-calendar')\n    public styleClass = true;\n\n    /**\n     * @hidden\n     */\n    constructor(public daysNavService: IgxDaysViewNavigationService) {\n        super();\n    }\n\n    /**\n     * @hidden\n     */\n    public get getCalendarMonth(): ICalendarDate[][] {\n        return this.calendarModel.monthdatescalendar(this.viewDate.getFullYear(), this.viewDate.getMonth(), true);\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        this.daysNavService.monthView = this;\n    }\n\n    /**\n     * @hidden\n     */\n    public ngDoCheck() {\n        if (!this.changeDaysView && this.dates) {\n            this.disableOutOfRangeDates();\n        }\n    }\n\n    /**\n     * Returns the locale representation of the date in the days view.\n     *\n     * @hidden\n     */\n    public formattedDate(value: Date): string {\n        if (this.formatViews.day) {\n            return this.formatterDay.format(value);\n        }\n        return `${value.getDate()}`;\n    }\n\n    /**\n     * @hidden\n     */\n    public generateWeekHeader(): string[] {\n        const dayNames = [];\n        const rv = this.calendarModel.monthdatescalendar(this.viewDate.getFullYear(), this.viewDate.getMonth())[0];\n        for (const day of rv) {\n            dayNames.push(this.formatterWeekday.format(day.date));\n        }\n\n        return dayNames;\n    }\n\n    /**\n     * @hidden\n     */\n    public rowTracker(index, item): string {\n        return `${item[index].date.getMonth()}${item[index].date.getDate()}`;\n    }\n\n    /**\n     * @hidden\n     */\n    public dateTracker(index, item): string {\n        return `${item.date.getMonth()}--${item.date.getDate()}`;\n    }\n\n    /**\n     * @hidden\n     */\n    public isCurrentMonth(value: Date): boolean {\n        return this.viewDate.getMonth() === value.getMonth();\n    }\n\n    /**\n     * @hidden\n     */\n    public isCurrentYear(value: Date): boolean {\n        return this.viewDate.getFullYear() === value.getFullYear();\n    }\n\n    /**\n     * @hidden\n     */\n    public isSelected(date: ICalendarDate): boolean {\n        let selectedDates: Date | Date[];\n        if (this.isDateDisabled(date.date) || !this.value ||\n            (Array.isArray(this.value) && this.value.length === 0)\n            )  {\n            return false;\n        }\n\n        if (this.selection === CalendarSelection.SINGLE) {\n            selectedDates = (this.value as Date);\n            return this.getDateOnly(selectedDates).getTime() === date.date.getTime();\n        }\n\n        selectedDates = (this.value as Date[]);\n        if (this.selection === CalendarSelection.RANGE && selectedDates.length === 1) {\n            return this.getDateOnly(selectedDates[0]).getTime() === date.date.getTime();\n        }\n\n        if (this.selection === CalendarSelection.MULTI) {\n            const start = this.getDateOnly(selectedDates[0]);\n            const end = this.getDateOnly(selectedDates[selectedDates.length - 1]);\n\n            if (this.isWithinRange(date.date, false, start, end)) {\n                const currentDate = selectedDates.find(element => element.getTime() === date.date.getTime());\n                return !!currentDate;\n            } else {\n                return false;\n            }\n\n        } else {\n            return this.isWithinRange(date.date, true);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public isLastInRange(date: ICalendarDate): boolean {\n        if (this.isSingleSelection || !this.value) {\n            return false;\n        }\n\n        const dates = this.value as Date[];\n        const lastDate = dates[dates.length - 1];\n        return isEqual(lastDate, date.date);\n    }\n\n    /**\n     * @hidden\n     */\n    public isFirstInRange(date: ICalendarDate): boolean {\n        if (this.isSingleSelection || !this.value) {\n            return false;\n        }\n\n        return isEqual((this.value as Date[])[0], date.date);\n    }\n\n    /**\n     * @hidden\n     */\n    public isWithinRange(date: Date, checkForRange: boolean, min?: Date, max?: Date): boolean {\n        if (checkForRange && !(Array.isArray(this.value) && this.value.length > 1)) {\n            return false;\n        }\n\n        min = min ? min : this.value[0];\n        max = max ? max : this.value[(this.value as Date[]).length - 1];\n\n        return isDateInRanges(date,\n            [\n                {\n                    type: DateRangeType.Between,\n                    dateRange: [min, max]\n                }\n            ]\n        );\n    }\n\n    /**\n     *@hidden\n     */\n    public focusActiveDate() {\n        let date = this.dates.find((d) => d.selected);\n\n        if (!date) {\n            date = this.dates.find((d) => d.isToday);\n        }\n\n        if (date.isFocusable) {\n            date.nativeElement.focus();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public selectDay(event) {\n        this.selectDateFromClient(event.date);\n        this.onDateSelection.emit(event);\n\n        this.onSelection.emit(this.selectedDates);\n    }\n\n    /**\n     * @hidden\n     */\n    private disableOutOfRangeDates() {\n        const dateRange = [];\n        this.dates.toArray().forEach((date) => {\n            if (!date.isCurrentMonth) {\n                dateRange.push(date.date.date);\n            }\n        });\n\n        this.outOfRangeDates = [{\n            type: DateRangeType.Specific,\n            dateRange: dateRange\n        }];\n    }\n\n    /**\n     * @hidden\n     */\n    public getFirstMonthView(): IgxDaysViewComponent {\n        let monthView = this as IgxDaysViewComponent;\n        while (monthView.prevMonthView) {\n            monthView = monthView.prevMonthView;\n        }\n        return monthView;\n    }\n\n    /**\n     * @hidden\n     */\n    private getLastMonthView(): IgxDaysViewComponent {\n        let monthView = this as IgxDaysViewComponent;\n        while (monthView.nextMonthView) {\n            monthView = monthView.nextMonthView;\n        }\n        return monthView;\n    }\n\n    /**\n     * @hidden\n     */\n    private get isSingleSelection(): boolean {\n        return this.selection !== CalendarSelection.RANGE;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowleft', ['$event'])\n    @HostListener('keydown.arrowright', ['$event'])\n    @HostListener('keydown.arrowup', ['$event'])\n    @HostListener('keydown.arrowdown', ['$event'])\n    public onKeydownArrow(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.daysNavService.focusNextDate(event.target as HTMLElement, event.key);\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.home', ['$event'])\n    public onKeydownHome(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.getFirstMonthView().daysNavService.focusHomeDate();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.end', ['$event'])\n    public onKeydownEnd(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.getLastMonthView().daysNavService.focusEndDate();\n    }\n}\n","import { transition, trigger, useAnimation } from '@angular/animations';\nimport {\n    Component,\n    ContentChild,\n    forwardRef,\n    HostBinding,\n    HostListener,\n    Input,\n    ViewChild,\n    ElementRef,\n    AfterViewInit,\n    ViewChildren,\n    QueryList,\n    OnDestroy\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { fadeIn, scaleInCenter, slideInLeft, slideInRight } from '../animations/main';\nimport {\n    IgxCalendarHeaderTemplateDirective,\n    IgxCalendarSubheaderTemplateDirective\n} from './calendar.directives';\nimport { KEYS } from '../core/utils';\nimport { ICalendarDate, monthRange } from './calendar';\nimport { CalendarView, IgxMonthPickerBaseDirective } from './month-picker-base';\nimport { IgxMonthsViewComponent } from './months-view/months-view.component';\nimport { IgxYearsViewComponent } from './years-view/years-view.component';\nimport { IgxDaysViewComponent } from './days-view/days-view.component';\nimport { interval, Subscription } from 'rxjs';\nimport { takeUntil, debounce, skipLast, switchMap } from 'rxjs/operators';\nimport { ScrollMonth } from './calendar-base';\nimport { IViewChangingEventArgs } from './days-view/days-view.interface';\n\nlet NEXT_ID = 0;\n\n/**\n * Calendar provides a way to display date information.\n *\n * @igxModule IgxCalendarModule\n *\n * @igxTheme igx-calendar-theme, igx-icon-theme\n *\n * @igxKeywords calendar, datepicker, schedule, date\n *\n * @igxGroup Scheduling\n *\n * @remarks\n * The Ignite UI Calendar provides an easy way to display a calendar and allow users to select dates using single, multiple\n * or range selection.\n *\n * @example:\n * ```html\n * <igx-calendar selection=\"range\"></igx-calendar>\n * ```\n */\n@Component({\n    providers: [\n        {\n            multi: true,\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: IgxCalendarComponent\n        }\n    ],\n    animations: [\n        trigger('animateView', [\n            transition('void => 0', useAnimation(fadeIn)),\n            transition('void => *', useAnimation(scaleInCenter, {\n                params: {\n                    duration: '.2s',\n                    fromScale: .9\n                }\n            }))\n        ]),\n        trigger('animateChange', [\n            transition('* => prev', useAnimation(slideInLeft, {\n                params: {\n                    fromPosition: 'translateX(-30%)'\n                }\n            })),\n            transition('* => next', useAnimation(slideInRight, {\n                params: {\n                    fromPosition: 'translateX(30%)'\n                }\n            }))\n        ])\n    ],\n    selector: 'igx-calendar',\n    templateUrl: 'calendar.component.html'\n})\nexport class IgxCalendarComponent extends IgxMonthPickerBaseDirective implements AfterViewInit, OnDestroy {\n\n    /**\n     * Sets/gets the `id` of the calendar.\n     *\n     * @remarks\n     * If not set, the `id` will have value `\"igx-calendar-0\"`.\n     *\n     * @example\n     * ```html\n     * <igx-calendar id=\"my-first-calendar\"></igx-calendar>\n     * ```\n     * @memberof IgxCalendarComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-calendar-${NEXT_ID++}`;\n\n    /**\n     * Sets/gets whether the calendar has header.\n     * Default value is `true`.\n     *\n     * @example\n     * ```html\n     * <igx-calendar [hasHeader]=\"false\"></igx-calendar>\n     * ```\n     */\n    @Input()\n    public hasHeader = true;\n\n    /**\n     * Sets/gets whether the calendar header will be in vertical position.\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     * <igx-calendar [vertical] = \"true\"></igx-calendar>\n     * ```\n     */\n    @Input()\n    public vertical = false;\n\n    /**\n     * Sets/gets the number of month views displayed.\n     * Default value is `1`.\n     *\n     * @example\n     * ```html\n     * <igx-calendar [monthsViewNumber]=\"2\"></igx-calendar>\n     * ```\n     */\n    @Input()\n    get monthsViewNumber() {\n        return this._monthsViewNumber;\n    }\n\n    set monthsViewNumber(val: number) {\n        if (val < 1 ) {\n            return;\n        }\n\n        this._monthsViewNumber = val;\n    }\n\n    /**\n     * Apply the different states for the transitions of animateChange\n     * @hidden\n     * @internal\n     */\n    @Input()\n    public animationAction: any = '';\n\n    /**\n     * Used to apply the active date when the calendar view is changed\n     *\n     * @hidden\n     * @internal\n     */\n    public nextDate: Date;\n\n    /**\n     * Denote if the calendar view was changed with the keyboard\n     *\n     * @hidden\n     * @internal\n     */\n    public isKeydownTrigger = false;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public callback: (next) => void;\n\n    /**\n     * The default `tabindex` attribute for the component.\n     *\n     * @hidden\n     * @internal\n     */\n    @HostBinding('attr.tabindex')\n    public tabindex = 0;\n\n    /**\n     * The default aria role attribute for the component.\n     *\n     * @hidden\n     * @internal\n     */\n    @HostBinding('attr.role')\n    public role = 'grid';\n\n    /**\n     * The default aria lebelled by attribute for the component.\n     *\n     * @hidden\n     * @internal\n     */\n    @HostBinding('attr.aria-labelledby')\n    public ariaLabelledBy = 'calendar';\n\n    /**\n     * The default css class applied to the component.\n     *\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-calendar--vertical')\n    get styleVerticalClass(): boolean {\n        return this.vertical;\n    }\n\n    /**\n     * The default css class applied to the component.\n     *\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-calendar')\n    public styleClass = true;\n\n    /**\n     * ViewChild that represents the months view.\n     *\n     * @hidden\n     * @internal\n     */\n    @ViewChild('months', { read: IgxMonthsViewComponent })\n    public monthsView: IgxMonthsViewComponent;\n\n    /**\n     * Month button, that displays the months view.\n     * @hidden\n     * @internal\n     */\n    @ViewChildren('monthsBtn')\n    public monthsBtns: QueryList<ElementRef>;\n\n    /**\n     * ViewChild that represents the decade view.\n     *\n     * @hidden\n     * @internal\n     */\n    @ViewChild('decade', { read: IgxYearsViewComponent })\n    public dacadeView: IgxYearsViewComponent;\n\n    /**\n     * ViewChild that represents the days view.\n     *\n     * @hidden\n     * @internal\n     */\n    @ViewChild('days', { read: IgxDaysViewComponent })\n    public daysView: IgxDaysViewComponent;\n\n    /**\n     * ViewChildrenden representing all of the rendered days views.\n     * @hidden\n     * @internal\n     */\n    @ViewChildren('days', { read: IgxDaysViewComponent })\n    public monthViews: QueryList<IgxDaysViewComponent>;\n\n    /**\n     * Button for previous month.\n     *\n     * @hidden\n     * @internal\n     */\n    @ViewChild('prevMonthBtn')\n    public prevMonthBtn: ElementRef;\n\n    /**\n     * Button for next month.\n     *\n     * @hidden\n     * @internal\n     */\n    @ViewChild('nextMonthBtn')\n    public nextMonthBtn: ElementRef;\n\n    /**\n     * Denote if the year view is active.\n     * @hidden\n     * @internal\n     */\n    get isYearView(): boolean {\n        return this.activeView === CalendarView.YEAR;\n    }\n\n    /**\n     * Gets the header template.\n     *\n     * @example\n     * ```typescript\n     * let headerTemplate =  this.calendar.headerTeamplate;\n     * ```\n     * @memberof IgxCalendarComponent\n     */\n    get headerTemplate(): any {\n        if (this.headerTemplateDirective) {\n            return this.headerTemplateDirective.template;\n        }\n        return null;\n    }\n\n    /**\n     * Sets the header template.\n     *\n     * @example\n     * ```html\n     * <igx-calendar headerTemplateDirective = \"igxCalendarHeader\"></igx-calendar>\n     * ```\n     * @memberof IgxCalendarComponent\n     */\n    set headerTemplate(directive: any) {\n        this.headerTemplateDirective = directive;\n    }\n\n    /**\n     * Gets the subheader template.\n     *\n     * @example\n     * ```typescript\n     * let subheaderTemplate = this.calendar.subheaderTemplate;\n     * ```\n     */\n    get subheaderTemplate(): any {\n        if (this.subheaderTemplateDirective) {\n            return this.subheaderTemplateDirective.template;\n        }\n        return null;\n    }\n\n    /**\n     * Sets the subheader template.\n     *\n     * @example\n     * ```html\n     * <igx-calendar subheaderTemplate = \"igxCalendarSubheader\"></igx-calendar>\n     * ```\n     * @memberof IgxCalendarComponent\n     */\n    set subheaderTemplate(directive: any) {\n        this.subheaderTemplateDirective = directive;\n    }\n\n    /**\n     * Gets the context for the template marked with the `igxCalendarHeader` directive.\n     *\n     * @example\n     * ```typescript\n     * let headerContext =  this.calendar.headerContext;\n     * ```\n     */\n    get headerContext() {\n        const date: Date = this.headerDate;\n        return this.generateContext(date);\n    }\n\n    /**\n     * Gets the context for the template marked with either `igxCalendarSubHeaderMonth`\n     * or `igxCalendarSubHeaderYear` directive.\n     *\n     * @example\n     * ```typescript\n     * let context =  this.calendar.context;\n     * ```\n     */\n    get context() {\n        const date: Date = this.viewDate;\n        return this.generateContext(date);\n    }\n\n    /**\n     * Date displayed in header\n     *\n     * @hidden\n     * @internal\n     */\n    get headerDate(): Date {\n        return this.selectedDates ? this.selectedDates : new Date();\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChild(forwardRef(() => IgxCalendarHeaderTemplateDirective), { read: IgxCalendarHeaderTemplateDirective, static: true  })\n    private headerTemplateDirective: IgxCalendarHeaderTemplateDirective;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    // tslint:disable-next-line:max-line-length\n    @ContentChild(forwardRef(() => IgxCalendarSubheaderTemplateDirective), { read: IgxCalendarSubheaderTemplateDirective, static: true  })\n    private subheaderTemplateDirective: IgxCalendarSubheaderTemplateDirective;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _monthsViewNumber = 1;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _monthViewsChanges$: Subscription;\n\n    public ngAfterViewInit() {\n        this.setSiblingMonths(this.monthViews);\n        this._monthViewsChanges$ = this.monthViews.changes.subscribe(c => {\n            this.setSiblingMonths(c);\n        });\n\n        this.startMonthScroll$.pipe(\n            takeUntil(this.stopMonthScroll$),\n            switchMap(() => this.scrollMonth$.pipe(\n                skipLast(1),\n                debounce(() => interval(300)),\n                takeUntil(this.stopMonthScroll$)\n            ))).subscribe(() => {\n                switch (this.monthScrollDirection) {\n                    case ScrollMonth.PREV:\n                        this.previousMonth();\n                        break;\n                    case ScrollMonth.NEXT:\n                        this.nextMonth();\n                        break;\n                    case ScrollMonth.NONE:\n                    default:\n                        break;\n                }\n        });\n    }\n\n    /**\n     * Returns the locale representation of the month in the month view if enabled,\n     * otherwise returns the default `Date.getMonth()` value.\n     *\n     * @hidden\n     * @internal\n     */\n    public formattedMonth(value: Date): string {\n        if (this.formatViews.month) {\n            return this.formatterMonth.format(value);\n        }\n        return `${value.getMonth()}`;\n    }\n\n    /**\n     * Change to previous month\n     *\n     * @hidden\n     * @internal\n     */\n    public previousMonth(isKeydownTrigger = false) {\n        this.viewDate = this.calendarModel.getPrevMonth(this.viewDate);\n        this.animationAction = ScrollMonth.PREV;\n        this.isKeydownTrigger = isKeydownTrigger;\n    }\n\n    /**\n     * Change to next month\n     *\n     * @hidden\n     * @internal\n     */\n    public nextMonth(isKeydownTrigger = false) {\n        this.viewDate = this.calendarModel.getNextMonth(this.viewDate);\n        this.animationAction = ScrollMonth.NEXT;\n        this.isKeydownTrigger = isKeydownTrigger;\n    }\n\n    /**\n     * Continious navigation through the previous months\n     * @hidden\n     * @internal\n     */\n    public startPrevMonthScroll = (isKeydownTrigger = false) => {\n        this.startMonthScroll$.next();\n        this.monthScrollDirection = ScrollMonth.PREV;\n\n        this.previousMonth(isKeydownTrigger);\n    }\n\n    /**\n     * Continious navigation through the next months\n     * @hidden\n     * @internal\n     */\n    public startNextMonthScroll = (isKeydownTrigger = false) => {\n        this.startMonthScroll$.next();\n        this.monthScrollDirection = ScrollMonth.NEXT;\n\n        this.nextMonth(isKeydownTrigger);\n    }\n\n    /**\n     * Stop continuous navigation\n     * @hidden\n     * @internal\n     */\n    public stopMonthScroll = (event) => {\n        event.stopPropagation();\n\n        // generally the scrolling is built on the calendar component\n        // and all start/stop scrolling methods are called on the calendar\n        // if we change below lines to call stopMonthScroll$ on the calendar instead of on the views,\n        // strange bug is introduced --> after changing number of months, continuous scrolling on mouse click does not happen\n        this.daysView.stopMonthScroll$.next(true);\n        this.daysView.stopMonthScroll$.complete();\n\n\n        if (this.monthScrollDirection === ScrollMonth.PREV) {\n            this.prevMonthBtn.nativeElement.focus();\n        } else if (this.monthScrollDirection === ScrollMonth.NEXT) {\n            this.nextMonthBtn.nativeElement.focus();\n        }\n\n        this.monthScrollDirection = ScrollMonth.NONE;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onActiveViewDecade(args: Date, activeViewIdx: number) {\n        super.activeViewDecade(activeViewIdx);\n        requestAnimationFrame(() => {\n            if (this.dacadeView) {\n                this.dacadeView.date = args;\n                this.dacadeView.el.nativeElement.focus();\n            }\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onActiveViewDecadeKB(event, args: Date, activeViewIdx: number) {\n        super.activeViewDecadeKB(event, activeViewIdx);\n\n        requestAnimationFrame(() => {\n            if (this.dacadeView) {\n                this.dacadeView.date = args;\n                this.dacadeView.el.nativeElement.focus();\n            }\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public getFormattedDate(): { weekday: string, monthday: string } {\n\n        const date = this.headerDate;\n\n        return {\n            monthday: this.formatterMonthday.format(date),\n            weekday: this.formatterWeekday.format(date),\n        };\n    }\n\n    /**\n     * Handles invoked on date selection\n     * @hidden\n     * @internal\n     */\n    public childClicked(instance: ICalendarDate) {\n        if (instance.isPrevMonth) {\n            this.previousMonth();\n        }\n\n        if (instance.isNextMonth) {\n            this.nextMonth();\n        }\n\n        this.selectDateFromClient(instance.date);\n        if (this.selection === 'multi') {\n            this.deselectDateInMonthViews(instance.date);\n        }\n        this.onSelection.emit(this.selectedDates);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public viewChanging(args: IViewChangingEventArgs) {\n        this.animationAction = args.monthAction;\n        this.isKeydownTrigger = true;\n        this.nextDate = args.nextDate;\n        this.callback = (next) => {\n            const day = this.daysView.dates.find((item) => item.date.date.getTime() === next.getTime());\n            if (day) {\n                this.daysView.daysNavService.focusNextDate(day.nativeElement, args.key, true);\n            }\n        };\n        this.viewDate = this.nextDate;\n    }\n\n    /**\n     * @hidden\n     * @intenal\n     */\n    public changeMonth(event: Date) {\n        this.viewDate = this.calendarModel.getFirstViewDate(event, 'month', this.activeViewIdx);\n        this.activeView = CalendarView.DEFAULT;\n\n        requestAnimationFrame(() => {\n            const elem = this.monthsBtns.find((e: ElementRef, idx: number) => idx === this.activeViewIdx);\n            if (elem) { elem.nativeElement.focus(); }\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onActiveViewYear(args: Date, activeViewIdx: number, event?): void {\n        this.activeView = CalendarView.YEAR;\n        this.activeViewIdx = activeViewIdx;\n        requestAnimationFrame(() => {\n            this.monthsView.date = args;\n            this.focusMonth(event.target);\n        });\n    }\n\n    private focusMonth(target: HTMLElement) {\n        const month = this.monthsView.monthsRef.find((e) =>\n            e.index === parseInt(target.parentElement.attributes['data-month'].value, 10));\n        if (month) { month.nativeElement.focus(); }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onActiveViewYearKB(args: Date, event, activeViewIdx: number): void {\n        if (event.key === KEYS.SPACE || event.key === KEYS.SPACE_IE || event.key === KEYS.ENTER) {\n            event.preventDefault();\n            this.onActiveViewYear(args, activeViewIdx, event);\n        }\n    }\n\n    /**\n     * Deselects date(s) (based on the selection type).\n     *\n     * @example\n     *```typescript\n     * this.calendar.deselectDate(new Date(`2018-06-12`));\n     *````\n     */\n    public deselectDate(value?: Date | Date[]) {\n        super.deselectDate(value);\n\n        this.monthViews.forEach((view) => {\n            view.selectedDates = this.selectedDates;\n            view.rangeStarted = false;\n        });\n        this._onChangeCallback(this.selectedDates);\n    }\n\n    /**\n     * Helper method that does deselection for all month views when selection is \"multi\"\n     * If not called, selection in other month views stays\n     * @hidden\n     * @internal\n     */\n    private deselectDateInMonthViews(value: Date) {\n        this.monthViews.forEach(m => {\n            m.deselectMultipleInMonth(value);\n         });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public getViewDate(i: number): Date {\n        const date = this.calendarModel.timedelta(this.viewDate, 'month', i);\n        return date;\n    }\n\n    /**\n     * Getter for the context object inside the calendar templates.\n     * @hidden\n     * @internal\n     */\n    public getContext(i: number) {\n        const date = this.getViewDate(i);\n        return this.generateContext(date, i);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public animationDone(event) {\n        if (this.monthScrollDirection !== ScrollMonth.NONE) {\n            this.scrollMonth$.next();\n        }\n\n        if (this.activeView !== CalendarView.DEFAULT) {\n            return;\n        }\n\n        let monthView = this.daysView as IgxDaysViewComponent;\n        let date = monthView.dates.find((d) => d.selected);\n\n        while (!date && monthView.nextMonthView) {\n            monthView = monthView.nextMonthView;\n            date = monthView.dates.find((d) => d.selected);\n        }\n        if (date && date.isFocusable && !this.isKeydownTrigger) {\n            setTimeout(() => {\n                date.nativeElement.focus();\n            }, parseInt(slideInRight.options.params.duration, 10));\n        } else if (this.callback && (event.toState === ScrollMonth.NEXT || event.toState === ScrollMonth.PREV)) {\n            this.callback(this.nextDate);\n        }\n        this.animationAction = ScrollMonth.NONE;\n    }\n\n    /**\n     * Keyboard navigation of the calendar\n     * @hidden\n     * @internal\n     */\n    @HostListener('keydown.pagedown', ['$event'])\n    @HostListener('keydown.pageup', ['$event'])\n    public onKeydownPageDown(event: KeyboardEvent) {\n        event.preventDefault();\n\n        if (this.activeView !== CalendarView.DEFAULT) {\n            return;\n        }\n\n        const isPageDown = event.key === 'PageDown';\n        const step = isPageDown ? 1 : -1;\n        let monthView = this.daysView as IgxDaysViewComponent;\n        let activeDate;\n\n        while (!activeDate && monthView) {\n            activeDate = monthView.dates.find((date) => date.nativeElement === document.activeElement);\n            monthView = monthView.nextMonthView;\n        }\n\n        if (activeDate) {\n            this.nextDate = new Date(activeDate.date.date);\n\n            let year = this.nextDate.getFullYear();\n\n            let month = this.nextDate.getMonth() + step;\n            if (isPageDown) {\n                if (month > 11) { month = 0; year += step; }\n            } else {\n                if (month < 0) { month = 11; year += step; }\n            }\n\n            const range = monthRange(this.nextDate.getFullYear(), month);\n\n            let day = this.nextDate.getDate();\n            if (day > range[1]) { day = range[1]; }\n\n            this.nextDate.setDate(day);\n            this.nextDate.setMonth(month);\n            this.nextDate.setFullYear(year);\n\n            this.callback = (next) => {\n                monthView = this.daysView as IgxDaysViewComponent;\n                let dayItem;\n                while ((!dayItem && monthView) || (dayItem && !dayItem.isCurrentMonth)) {\n                    dayItem = monthView.dates.find((d) => d.date.date.getTime() === next.getTime());\n                    monthView = monthView.nextMonthView;\n                }\n                if (dayItem && dayItem.isFocusable) { dayItem.nativeElement.focus(); }\n            };\n        }\n\n        if (isPageDown) { this.nextMonth(true); } else {\n            this.previousMonth(true);\n        }\n    }\n\n    /**\n     * Keyboard navigation of the calendar\n     * @hidden\n     * @internal\n     */\n    @HostListener('keydown.shift.pageup', ['$event'])\n    @HostListener('keydown.shift.pagedown', ['$event'])\n    public onKeydownShiftPageUp(event: KeyboardEvent) {\n        event.preventDefault();\n\n        if (this.activeView !== CalendarView.DEFAULT) {\n            return;\n        }\n\n        const isPageDown = event.key === 'PageDown';\n        const step = isPageDown ? 1 : -1;\n        this.viewDate = this.calendarModel.timedelta(this.viewDate, 'year', step);\n\n        this.animationAction = isPageDown ? ScrollMonth.NEXT : ScrollMonth.PREV;\n        this.isKeydownTrigger = true;\n\n        let monthView = this.daysView as IgxDaysViewComponent;\n        let activeDate;\n\n        while (!activeDate && monthView) {\n            activeDate = monthView.dates.find((date) => date.nativeElement === document.activeElement);\n            monthView = monthView.nextMonthView;\n        }\n\n        if (activeDate) {\n            this.nextDate = new Date(activeDate.date.date);\n\n            const year = this.nextDate.getFullYear() + step;\n\n            const range = monthRange(year, this.nextDate.getMonth());\n\n            let day = this.nextDate.getDate();\n            if (day > range[1]) { day = range[1]; }\n\n            this.nextDate.setDate(day);\n            this.nextDate.setFullYear(year);\n\n            this.callback = (next) => {\n                monthView = this.daysView as IgxDaysViewComponent;\n                let dayItem;\n                while ((!dayItem && monthView) || (dayItem && !dayItem.isCurrentMonth)) {\n                    dayItem = monthView.dates.find((d) => d.date.date.getTime() === next.getTime());\n                    monthView = monthView.nextMonthView;\n                }\n                if (dayItem && dayItem.isFocusable) { dayItem.nativeElement.focus(); }\n            };\n        }\n    }\n\n    /**\n     * Keyboard navigation of the calendar\n     * @hidden\n     * @internal\n     */\n    @HostListener('keydown.home', ['$event'])\n    public onKeydownHome(event: KeyboardEvent) {\n        if (this.daysView) {\n            this.daysView.onKeydownHome(event);\n        }\n    }\n\n    /**\n     * Keyboard navigation of the calendar\n     * @hidden\n     * @internal\n     */\n    @HostListener('keydown.end', ['$event'])\n    public onKeydownEnd(event: KeyboardEvent) {\n        if (this.daysView) {\n            this.daysView.onKeydownEnd(event);\n        }\n    }\n\n    /**\n     * Stop continuous navigation on mouseup event\n     * @hidden\n     * @internal\n     */\n    @HostListener('document:mouseup', ['$event'])\n    public onMouseUp(event: KeyboardEvent) {\n        if (this.monthScrollDirection !== ScrollMonth.NONE) {\n            this.stopMonthScroll(event);\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public ngOnDestroy(): void {\n        if (this._monthViewsChanges$) {\n            this._monthViewsChanges$.unsubscribe();\n        }\n    }\n\n    /**\n     * Helper method building and returning the context object inside\n     * the calendar templates.\n     * @hidden\n     * @internal\n     */\n    private generateContext(value: Date, i?: number) {\n        const formatObject = {\n            index: i,\n            monthView: () => this.onActiveViewYear(value, i),\n            yearView: () => this.onActiveViewDecade(value, i),\n            ...this.calendarModel.formatToParts(value, this.locale, this.formatOptions,\n                ['era', 'year', 'month', 'day', 'weekday'])\n        };\n        return { $implicit: formatObject };\n    }\n\n    /**\n     * Helper method that sets references for prev/next months for each month in the view\n     * @hidden\n     * @internal\n     */\n    private setSiblingMonths(monthViews: QueryList<IgxDaysViewComponent>) {\n        monthViews.forEach((item, index) => {\n            const prevMonthView = this.getMonthView(index - 1);\n            const nextMonthView = this.getMonthView(index + 1);\n            item.nextMonthView = nextMonthView;\n            item.prevMonthView = prevMonthView;\n        });\n    }\n\n    /**\n     * Helper method returning previous/next day views\n     * @hidden\n     * @internal\n     */\n    private getMonthView(index: number): IgxDaysViewComponent {\n        if (index === -1 || index === this.monthViews.length ) {\n            return null;\n        } else {\n            return this.monthViews.toArray()[index];\n        }\n    }\n}\n","import {\n    Component,\n    HostListener,\n    ViewChild,\n    HostBinding,\n    Input,\n    ElementRef\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { trigger, transition, useAnimation } from '@angular/animations';\nimport { fadeIn, scaleInCenter, slideInLeft, slideInRight } from '../../animations/main';\nimport { KEYS } from '../../core/utils';\nimport { IgxMonthsViewComponent } from '../months-view/months-view.component';\nimport { IgxMonthPickerBaseDirective, CalendarView } from '../month-picker-base';\nimport { IgxYearsViewComponent } from '../years-view/years-view.component';\nimport { IgxDaysViewComponent } from '../days-view/days-view.component';\n\nlet NEXT_ID = 0;\n@Component({\n    providers: [\n        {\n            multi: true,\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: IgxMonthPickerComponent\n        }\n    ],\n    animations: [\n        trigger('animateView', [\n            transition('void => 0', useAnimation(fadeIn)),\n            transition('void => *', useAnimation(scaleInCenter, {\n                params: {\n                    duration: '.2s',\n                    fromScale: .9\n                }\n            }))\n        ]),\n        trigger('animateChange', [\n            transition('* => prev', useAnimation(slideInLeft, {\n                params: {\n                    fromPosition: 'translateX(-30%)'\n                }\n            })),\n            transition('* => next', useAnimation(slideInRight, {\n                params: {\n                    fromPosition: 'translateX(30%)'\n                }\n            }))\n        ])\n    ],\n    selector: 'igx-month-picker',\n    templateUrl: 'month-picker.component.html'\n})\nexport class IgxMonthPickerComponent extends IgxMonthPickerBaseDirective {\n    /**\n     * Sets/gets the `id` of the month picker.\n     * If not set, the `id` will have value `\"igx-month-picker-0\"`.\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-month-picker-${NEXT_ID++}`;\n\n    /**\n     * The default css class applied to the component.\n     *\n     * @hidden\n     */\n    @HostBinding('class.igx-calendar')\n    public styleClass = true;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('months', { read: IgxMonthsViewComponent })\n    public monthsView: IgxMonthsViewComponent;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('decade', { read: IgxYearsViewComponent })\n    public dacadeView: IgxYearsViewComponent;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('days', { read: IgxDaysViewComponent })\n    public daysView: IgxDaysViewComponent;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('yearsBtn')\n    public yearsBtn: ElementRef;\n\n    /**\n     * @hidden\n     */\n    public yearAction = '';\n\n    /**\n     * @hidden\n     */\n    public animationDone() {\n        this.yearAction = '';\n    }\n\n    /**\n     * @hidden\n     */\n    public activeViewDecadeKB(event) {\n        super.activeViewDecadeKB(event);\n\n        if (event.key === KEYS.RIGHT_ARROW || event.key === KEYS.RIGHT_ARROW_IE) {\n            event.preventDefault();\n            this.nextYear();\n        }\n\n        if (event.key === KEYS.LEFT_ARROW || event.key === KEYS.LEFT_ARROW_IE) {\n            event.preventDefault();\n            this.previousYear();\n        }\n\n        requestAnimationFrame(() => {\n            if (this.dacadeView) { this.dacadeView.el.nativeElement.focus(); }\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public activeViewDecade() {\n        super.activeViewDecade();\n\n        requestAnimationFrame(() => {\n            this.dacadeView.el.nativeElement.focus();\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public nextYear() {\n        this.yearAction = 'next';\n        this.viewDate = this.calendarModel.getNextYear(this.viewDate);\n\n        this.selectDate(this.viewDate);\n        this.onSelection.emit(this.selectedDates);\n    }\n\n    /**\n     * @hidden\n     */\n    public nextYearKB(event) {\n        if (event.key === KEYS.SPACE || event.key === KEYS.SPACE_IE || event.key === KEYS.ENTER) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            this.nextYear();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public previousYear() {\n        this.yearAction = 'prev';\n        this.viewDate = this.calendarModel.getPrevYear(this.viewDate);\n\n        this.selectDate(this.viewDate);\n        this.onSelection.emit(this.selectedDates);\n    }\n\n    /**\n     * @hidden\n     */\n    public previousYearKB(event) {\n        if (event.key === KEYS.SPACE || event.key === KEYS.SPACE_IE || event.key === KEYS.ENTER) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            this.previousYear();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public selectYear(event: Date) {\n        this.viewDate = new Date(event.getFullYear(), event.getMonth(), event.getDate());\n        this.activeView = CalendarView.DEFAULT;\n\n        this.selectDate(event);\n        this.onSelection.emit(this.selectedDates);\n\n        requestAnimationFrame(() => {\n            if (this.yearsBtn) { this.yearsBtn.nativeElement.focus(); }\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public selectMonth(event: Date) {\n        this.selectDate(event);\n        this.onSelection.emit(this.selectedDates);\n    }\n\n    /**\n     * Selects a date.\n     *```typescript\n     * this.monPicker.selectDate(new Date(`2018-06-12`));\n     *```\n     */\n    public selectDate(value: Date) {\n        if (!value) {\n            return new Date();\n        }\n\n        // TO DO: to be refactored after discussion on the desired behavior\n        super.selectDate(value);\n        this.viewDate = value;\n    }\n\n    /**\n     * @hidden\n     */\n    public writeValue(value: Date) {\n\n        // TO DO: to be refactored after discussion on the desired behavior\n        if (value) {\n            this.viewDate = this.selectedDates = value;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.pageup', ['$event'])\n    public onKeydownPageUp(event: KeyboardEvent) {\n        event.preventDefault();\n        this.yearAction = 'prev';\n        this.viewDate = this.calendarModel.getPrevYear(this.viewDate);\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.pagedown', ['$event'])\n    public onKeydownPageDown(event: KeyboardEvent) {\n        event.preventDefault();\n        this.yearAction = 'next';\n        this.viewDate = this.calendarModel.getNextYear(this.viewDate);\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.home', ['$event'])\n    public onKeydownHome(event: KeyboardEvent) {\n        if (this.monthsView) {\n            this.monthsView.el.nativeElement.focus();\n            this.monthsView.onKeydownHome(event);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.end', ['$event'])\n    public onKeydownEnd(event: KeyboardEvent) {\n        if (this.monthsView) {\n            this.monthsView.el.nativeElement.focus();\n            this.monthsView.onKeydownEnd(event);\n        }\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { Calendar } from './calendar';\n\n@Pipe({\n    name: 'IgxMonthViewSlots'\n})\nexport class IgxMonthViewSlotsCalendar implements PipeTransform {\n    public transform(monthViews: number) {\n        return new Array(monthViews);\n    }\n}\n\n@Pipe({\n    name: 'IgxGetViewDate'\n})\nexport class IgxGetViewDateCalendar implements PipeTransform {\n    private calendar: Calendar;\n    constructor() {\n        this.calendar = new Calendar();\n    }\n    public transform(index: number, viewDate: Date, wholeDate = true) {\n        const date = this.calendar.timedelta(viewDate, 'month', index);\n        return wholeDate ? date : date.getMonth();\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { IgxIconModule } from '../icon/index';\nimport { IgxCalendarComponent } from './calendar.component';\nimport {\n    IgxCalendarHeaderTemplateDirective,\n    IgxCalendarMonthDirective,\n    IgxCalendarSubheaderTemplateDirective,\n    IgxCalendarYearDirective,\n    IgxCalendarScrollMonthDirective\n} from './calendar.directives';\nimport { IgxMonthsViewComponent } from './months-view/months-view.component';\nimport { IgxYearsViewComponent } from './years-view/years-view.component';\nimport { IgxDaysViewComponent } from './days-view/days-view.component';\nimport { IgxDayItemComponent } from './days-view/day-item.component';\nimport { IgxMonthPickerComponent } from './month-picker/month-picker.component';\nimport { IgxCalendarBaseDirective } from './calendar-base';\nimport { IgxMonthPickerBaseDirective } from './month-picker-base';\nimport { IgxMonthViewSlotsCalendar, IgxGetViewDateCalendar } from './months-view.pipe';\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxCalendarBaseDirective,\n        IgxMonthPickerBaseDirective,\n        IgxDayItemComponent,\n        IgxDaysViewComponent,\n        IgxCalendarComponent,\n        IgxCalendarHeaderTemplateDirective,\n        IgxCalendarMonthDirective,\n        IgxCalendarYearDirective,\n        IgxCalendarSubheaderTemplateDirective,\n        IgxCalendarScrollMonthDirective,\n        IgxMonthsViewComponent,\n        IgxYearsViewComponent,\n        IgxMonthPickerComponent,\n        IgxMonthViewSlotsCalendar,\n        IgxGetViewDateCalendar\n    ],\n    exports: [\n        IgxCalendarComponent,\n        IgxDaysViewComponent,\n        IgxMonthsViewComponent,\n        IgxYearsViewComponent,\n        IgxMonthPickerComponent,\n        IgxCalendarHeaderTemplateDirective,\n        IgxCalendarMonthDirective,\n        IgxCalendarYearDirective,\n        IgxCalendarSubheaderTemplateDirective\n    ],\n    imports: [CommonModule, FormsModule, IgxIconModule]\n})\nexport class IgxCalendarModule { }\n","import { Component, OnDestroy, Input, HostBinding, Output, EventEmitter, ElementRef, ChangeDetectorRef } from '@angular/core';\nimport { Subject } from 'rxjs';\n\nexport enum Direction { NONE, NEXT, PREV }\n\n/**\n * A slide component that usually holds an image and/or a caption text.\n * IgxSlideComponent is usually a child component of an IgxCarouselComponent.\n *\n * ```\n * <igx-slide [input bindings] >\n *    <ng-content></ng-content>\n * </igx-slide>\n * ```\n *\n * @export\n */\n@Component({\n    selector: 'igx-slide',\n    templateUrl: 'slide.component.html'\n})\n\nexport class IgxSlideComponent implements OnDestroy {\n    private _active = false;\n    private _destroy$ = new Subject<boolean>();\n    /**\n     * Gets/sets the `index` of the slide inside the carousel.\n     * ```html\n     * <igx-carousel>\n     *  <igx-slide index = \"1\"></igx-slide>\n     * <igx-carousel>\n     * ```\n     * @memberOf IgxSlideComponent\n     */\n    @Input() public index: number;\n\n    /**\n     * Gets/sets the target `direction` for the slide.\n     * ```html\n     * <igx-carousel>\n     *  <igx-slide direction=\"NEXT\"></igx-slide>\n     * <igx-carousel>\n     * ```\n     * @memberOf IgxSlideComponent\n     */\n    @Input() public direction: Direction;\n\n    /**\n     * Returns the `tabIndex` of the slide component.\n     * ```typescript\n     * let tabIndex =  this.carousel.tabIndex;\n     * ```\n     * @memberof IgxSlideComponent\n     */\n    @HostBinding('attr.tabindex')\n    get tabIndex() {\n        return this.active ? 0 : null;\n    }\n\n    /**\n     * Returns the `aria-selected` of the slide.\n     *\n     * ```typescript\n     * let slide = this.slide.ariaSelected;\n     * ```\n     *\n     */\n    @HostBinding('attr.aria-selected')\n    public get ariaSelected(): boolean {\n        return this.active;\n    }\n\n    /**\n     * Returns the `aria-live` of the slide.\n     *\n     * ```typescript\n     * let slide = this.slide.ariaLive;\n     * ```\n     *\n     */\n    @HostBinding('attr.aria-selected')\n    public get ariaLive() {\n        return this.active ? 'polite' : null;\n    }\n\n    /**\n     * Returns the class of the slide component.\n     * ```typescript\n     * let class =  this.slide.cssClass;\n     * ```\n     * @memberof IgxSlideComponent\n     */\n    @HostBinding('class.igx-slide')\n    public cssClass = 'igx-slide';\n\n    /**\n     * Gets/sets the `active` state of the slide.\n     * ```html\n     * <igx-carousel>\n     *  <igx-slide [active] =\"false\"></igx-slide>\n     * <igx-carousel>\n     * ```\n     *\n     * Two-way data binding.\n     * ```html\n     * <igx-carousel>\n     *  <igx-slide [(active)] =\"model.isActive\"></igx-slide>\n     * <igx-carousel>\n     * ```\n     * @memberof IgxSlideComponent\n     */\n    @HostBinding('class.igx-slide--current')\n    @Input()\n    public get active(): boolean {\n        return this._active;\n    }\n\n    public set active(value) {\n        this._active = !!value;\n        this.activeChange.emit(this._active);\n    }\n\n    @HostBinding('class.igx-slide--previous')\n    @Input() public previous = false;\n\n    /**\n     *@hidden\n     */\n    @Output() public activeChange = new EventEmitter<boolean>();\n\n    constructor(private elementRef: ElementRef) { }\n\n    /**\n    * Returns a reference to the carousel element in the DOM.\n    * ```typescript\n    * let nativeElement =  this.slide.nativeElement;\n    * ```\n    * @memberof IgxSlideComponent\n    */\n    public get nativeElement() {\n        return this.elementRef.nativeElement;\n    }\n\n    /**\n    * @hidden\n    */\n    public get isDestroyed(): Subject<boolean> {\n    return this._destroy$;\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this._destroy$.next(true);\n        this._destroy$.complete();\n    }\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n@Directive({\n    selector: '[igxCarouselIndicator]'\n})\nexport class IgxCarouselIndicatorDirective {\n}\n\n@Directive({\n    selector: '[igxCarouselNextButton]'\n})\nexport class IgxCarouselNextButtonDirective {\n}\n\n@Directive({\n    selector: '[igxCarouselPrevButton]'\n})\nexport class IgxCarouselPrevButtonDirective {\n}\n","import { IGridResourceStrings, GridResourceStringsEN } from './grid-resources';\nimport { ITimePickerResourceStrings, TimePickerResourceStringsEN } from './time-picker-resources';\nimport { PaginatorResourceStringsEN } from './paginator-resources';\nimport { cloneValue } from '../utils';\nimport { ICarouselResourceStrings, CarouselResourceStringsEN } from './carousel-resources';\n\nexport interface IResourceStrings extends IGridResourceStrings, ITimePickerResourceStrings, ICarouselResourceStrings  {}\n\n/**\n * @hidden\n */\nexport const CurrentResourceStrings = {\n    GridResStrings: cloneValue(GridResourceStringsEN),\n    TimePickerResStrings: cloneValue(TimePickerResourceStringsEN),\n    PaginatorResStrings: cloneValue(PaginatorResourceStringsEN),\n    CarouselResStrings: cloneValue(CarouselResourceStringsEN),\n};\n\nfunction updateResourceStrings(currentStrings: IResourceStrings, newStrings: IResourceStrings ) {\n    for (const key of Object.keys(newStrings)) {\n        if (key in currentStrings) {\n            currentStrings[key] = newStrings[key];\n        }\n    }\n}\n\n/**\n * Changes the resource strings for all components in the application\n * ```\n * @param resourceStrings to be applied\n */\nexport function changei18n(resourceStrings: IResourceStrings) {\n    for (const key of Object.keys(CurrentResourceStrings)) {\n        updateResourceStrings(CurrentResourceStrings[key], resourceStrings);\n    }\n}\n\n/**\n * Returns current resource strings for all components\n */\nexport function getCurrentResourceStrings(): IResourceStrings {\n    return {\n            ...CurrentResourceStrings.GridResStrings,\n            ...CurrentResourceStrings.TimePickerResStrings\n    };\n}\n","export interface IGridResourceStrings {\n    igx_grid_groupByArea_message?: string;\n    igx_grid_emptyFilteredGrid_message?: string;\n    igx_grid_emptyGrid_message?: string;\n    igx_grid_filter?: string;\n    igx_grid_filter_row_close?: string;\n    igx_grid_filter_row_reset?: string;\n    igx_grid_filter_row_placeholder?: string;\n    igx_grid_filter_row_boolean_placeholder?: string;\n    igx_grid_filter_row_date_placeholder?: string;\n    igx_grid_filter_operator_and?: string;\n    igx_grid_complex_filter?: string;\n    igx_grid_filter_operator_or?: string;\n    igx_grid_filter_contains?: string;\n    igx_grid_filter_doesNotContain?: string;\n    igx_grid_filter_startsWith?: string;\n    igx_grid_filter_endsWith?: string;\n    igx_grid_filter_equals?: string;\n    igx_grid_filter_doesNotEqual?: string;\n    igx_grid_filter_empty?: string;\n    igx_grid_filter_notEmpty?: string;\n    igx_grid_filter_null?: string;\n    igx_grid_filter_notNull?: string;\n    igx_grid_filter_before?: string;\n    igx_grid_filter_after?: string;\n    igx_grid_filter_today?: string;\n    igx_grid_filter_yesterday?: string;\n    igx_grid_filter_thisMonth?: string;\n    igx_grid_filter_lastMonth?: string;\n    igx_grid_filter_nextMonth?: string;\n    igx_grid_filter_thisYear?: string;\n    igx_grid_filter_lastYear?: string;\n    igx_grid_filter_nextYear?: string;\n    igx_grid_filter_greaterThan?: string;\n    igx_grid_filter_lessThan?: string;\n    igx_grid_filter_greaterThanOrEqualTo?: string;\n    igx_grid_filter_lessThanOrEqualTo?: string;\n    igx_grid_filter_true?: string;\n    igx_grid_filter_false?: string;\n    igx_grid_filter_all?: string;\n    igx_grid_filter_condition_placeholder?: string;\n    igx_grid_summary_count?: string;\n    igx_grid_summary_min?: string;\n    igx_grid_summary_max?: string;\n    igx_grid_summary_sum?: string;\n    igx_grid_summary_average?: string;\n    igx_grid_summary_earliest?: string;\n    igx_grid_summary_latest?: string;\n    igx_grid_excel_filter_moving_left?: string;\n    igx_grid_excel_filter_moving_left_short?: string;\n    igx_grid_excel_filter_moving_right?: string;\n    igx_grid_excel_filter_moving_right_short?: string;\n    igx_grid_excel_filter_moving_header?: string;\n    igx_grid_excel_filter_sorting_asc?: string;\n    igx_grid_excel_filter_sorting_asc_short?: string;\n    igx_grid_excel_filter_sorting_desc?: string;\n    igx_grid_excel_filter_sorting_desc_short?: string;\n    igx_grid_excel_filter_sorting_header?: string;\n    igx_grid_excel_filter_clear?: string;\n    igx_grid_excel_custom_dialog_add?: string;\n    igx_grid_excel_custom_dialog_clear?: string;\n    igx_grid_excel_custom_dialog_header?: string;\n    igx_grid_excel_cancel?: string;\n    igx_grid_excel_apply?: string;\n    igx_grid_excel_search_placeholder?: string;\n    igx_grid_excel_select_all?: string;\n    igx_grid_excel_blanks?: string;\n    igx_grid_excel_hide?: string;\n    igx_grid_excel_show?: string;\n    igx_grid_excel_pin?: string;\n    igx_grid_excel_unpin?: string;\n    igx_grid_excel_text_filter?: string;\n    igx_grid_excel_number_filter?: string;\n    igx_grid_excel_date_filter?: string;\n    igx_grid_excel_boolean_filter?: string;\n    igx_grid_excel_custom_filter?: string;\n    igx_grid_advanced_filter_title?: string;\n    igx_grid_advanced_filter_and_group?: string;\n    igx_grid_advanced_filter_or_group?: string;\n    igx_grid_advanced_filter_end_group?: string;\n    igx_grid_advanced_filter_create_and_group?: string;\n    igx_grid_advanced_filter_create_or_group?: string;\n    igx_grid_advanced_filter_and_label?: string;\n    igx_grid_advanced_filter_or_label?: string;\n    igx_grid_advanced_filter_add_condition?: string;\n    igx_grid_advanced_filter_ungroup?: string;\n    igx_grid_advanced_filter_delete?: string;\n    igx_grid_advanced_filter_delete_filters?: string;\n    igx_grid_advanced_filter_initial_text?: string;\n    igx_grid_advanced_filter_column_placeholder?: string;\n    igx_grid_advanced_filter_value_placeholder?: string;\n}\n\nexport const GridResourceStringsEN: IGridResourceStrings = {\n    igx_grid_groupByArea_message: 'Drag a column header and drop it here to group by that column.',\n    igx_grid_emptyFilteredGrid_message: 'No records found.',\n    igx_grid_emptyGrid_message: 'Grid has no data.',\n    igx_grid_filter: 'Filter',\n    igx_grid_filter_row_close: 'Close',\n    igx_grid_filter_row_reset: 'Reset',\n    igx_grid_filter_row_placeholder: 'Add filter value',\n    igx_grid_filter_row_boolean_placeholder: 'All',\n    igx_grid_filter_row_date_placeholder: 'Pick up date',\n    igx_grid_filter_operator_and: 'And',\n    igx_grid_filter_operator_or: 'Or',\n    igx_grid_complex_filter: 'Complex Filter',\n    igx_grid_filter_contains: 'Contains',\n    igx_grid_filter_doesNotContain: 'Does Not Contain',\n    igx_grid_filter_startsWith: 'Starts With',\n    igx_grid_filter_endsWith: 'Ends With',\n    igx_grid_filter_equals: 'Equals',\n    igx_grid_filter_doesNotEqual: 'Does Not Equal',\n    igx_grid_filter_empty: 'Empty',\n    igx_grid_filter_notEmpty: 'Not Empty',\n    igx_grid_filter_null: 'Null',\n    igx_grid_filter_notNull: 'Not Null',\n    igx_grid_filter_before: 'Before',\n    igx_grid_filter_after: 'After',\n    igx_grid_filter_today: 'Today',\n    igx_grid_filter_yesterday: 'Yesterday',\n    igx_grid_filter_thisMonth: 'This Month',\n    igx_grid_filter_lastMonth: 'Last Month',\n    igx_grid_filter_nextMonth: 'Next Month',\n    igx_grid_filter_thisYear: 'This Year',\n    igx_grid_filter_lastYear: 'Last Year',\n    igx_grid_filter_nextYear: 'Next Year',\n    igx_grid_filter_greaterThan: 'Greater Than',\n    igx_grid_filter_lessThan: 'Less Than',\n    igx_grid_filter_greaterThanOrEqualTo: 'Greater Than Or Equal To',\n    igx_grid_filter_lessThanOrEqualTo: 'Less Than Or Equal To',\n    igx_grid_filter_true: 'True',\n    igx_grid_filter_false: 'False',\n    igx_grid_filter_all: 'All',\n    igx_grid_filter_condition_placeholder: 'Select filter',\n    igx_grid_summary_count: 'Count',\n    igx_grid_summary_min: 'Min',\n    igx_grid_summary_max: 'Max',\n    igx_grid_summary_sum: 'Sum',\n    igx_grid_summary_average: 'Avg',\n    igx_grid_summary_earliest: 'Earliest',\n    igx_grid_summary_latest: 'Latest',\n    igx_grid_excel_filter_moving_left: 'move left',\n    igx_grid_excel_filter_moving_left_short: 'left',\n    igx_grid_excel_filter_moving_right: 'move right',\n    igx_grid_excel_filter_moving_right_short: 'right',\n    igx_grid_excel_filter_moving_header: 'move',\n    igx_grid_excel_filter_sorting_asc: 'ascending',\n    igx_grid_excel_filter_sorting_asc_short: 'asc',\n    igx_grid_excel_filter_sorting_desc: 'descending',\n    igx_grid_excel_filter_sorting_desc_short: 'desc',\n    igx_grid_excel_filter_sorting_header: 'sort',\n    igx_grid_excel_filter_clear: 'Clear column filters',\n    igx_grid_excel_custom_dialog_add: 'add filter',\n    igx_grid_excel_custom_dialog_clear: 'Clear filter',\n    igx_grid_excel_custom_dialog_header: 'Custom auto-filter on column: ',\n    igx_grid_excel_cancel: 'cancel',\n    igx_grid_excel_apply: 'apply',\n    igx_grid_excel_search_placeholder: 'Search',\n    igx_grid_excel_select_all: 'Select All',\n    igx_grid_excel_blanks: '(Blanks)',\n    igx_grid_excel_hide: 'Hide column',\n    igx_grid_excel_show: 'Show column',\n    igx_grid_excel_pin: 'Pin column',\n    igx_grid_excel_unpin: 'Unpin column',\n    igx_grid_excel_text_filter: 'Text filter',\n    igx_grid_excel_number_filter: 'Number filter',\n    igx_grid_excel_date_filter: 'Date filter',\n    igx_grid_excel_boolean_filter: 'Boolean filter',\n    igx_grid_excel_custom_filter: 'Custom filter...',\n    igx_grid_advanced_filter_title: 'Advanced Filtering',\n    igx_grid_advanced_filter_and_group: '\"And\" Group',\n    igx_grid_advanced_filter_or_group: '\"Or\" Group',\n    igx_grid_advanced_filter_end_group: 'End Group',\n    igx_grid_advanced_filter_create_and_group: 'Create \"And\" Group',\n    igx_grid_advanced_filter_create_or_group: 'Create \"Or\" Group',\n    igx_grid_advanced_filter_and_label: 'and',\n    igx_grid_advanced_filter_or_label: 'or',\n    igx_grid_advanced_filter_add_condition: 'Condition',\n    igx_grid_advanced_filter_ungroup: 'Ungroup',\n    igx_grid_advanced_filter_delete: 'Delete',\n    igx_grid_advanced_filter_delete_filters: 'Delete filters',\n    igx_grid_advanced_filter_initial_text: 'Start with creating a group of conditions linked with \"And\" or \"Or\"',\n    igx_grid_advanced_filter_column_placeholder: 'Select column',\n    igx_grid_advanced_filter_value_placeholder: 'Value'\n};\n","export interface ITimePickerResourceStrings {\n    igx_time_picker_ok?: string;\n    igx_time_picker_cancel?: string;\n}\n\nexport const TimePickerResourceStringsEN: ITimePickerResourceStrings = {\n    igx_time_picker_ok: 'OK',\n    igx_time_picker_cancel: 'Cancel'\n};\n","export interface IPaginatorResourceStrings {\n    igx_paginator_label?: string;\n}\n\nexport const PaginatorResourceStringsEN: IPaginatorResourceStrings = {\n    igx_paginator_label: 'Items per page'\n};\n","export interface ICarouselResourceStrings {\n    igx_carousel_of?: string;\n}\n\nexport const CarouselResourceStringsEN: ICarouselResourceStrings = {\n    igx_carousel_of: 'of'\n};\n","import { CommonModule } from '@angular/common';\nimport {\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    HostListener,\n    Input,\n    NgModule,\n    OnDestroy,\n    Output,\n    ContentChildren,\n    QueryList,\n    IterableDiffer,\n    IterableDiffers,\n    AfterContentInit,\n    IterableChangeRecord,\n    TemplateRef,\n    ViewChild,\n    ContentChild,\n    Injectable\n} from '@angular/core';\nimport { IgxIconModule } from '../icon/index';\nimport { IBaseEventArgs, PlatformUtil } from '../core/utils';\nimport { Subject, merge } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { IgxCarouselIndicatorDirective, IgxCarouselNextButtonDirective, IgxCarouselPrevButtonDirective } from './carousel.directives';\nimport { useAnimation, AnimationBuilder, AnimationPlayer, AnimationReferenceMetadata } from '@angular/animations';\nimport { slideInLeft, fadeIn } from '../animations/main';\nimport { IgxSlideComponent, Direction } from './slide.component';\nimport { ICarouselResourceStrings } from '../core/i18n/carousel-resources';\nimport { CurrentResourceStrings } from '../core/i18n/resources';\nimport { HammerGestureConfig, HAMMER_GESTURE_CONFIG } from '@angular/platform-browser';\n\nlet NEXT_ID = 0;\n\nexport enum CarouselIndicatorsOrientation {\n    bottom = 'bottom',\n    top = 'top'\n}\n\nexport enum CarouselAnimationType {\n    none = 'none',\n    slide = 'slide',\n    fade = 'fade'\n}\n\nexport interface CarouselAnimationSettings {\n    enterAnimation: AnimationReferenceMetadata;\n    leaveAnimation: AnimationReferenceMetadata;\n}\n\n@Injectable()\nexport class CarouselHammerConfig extends HammerGestureConfig {\n    public overrides = {\n        pan: { direction: Hammer.DIRECTION_HORIZONTAL }\n    };\n}\n/**\n * **Ignite UI for Angular Carousel** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/carousel.html)\n *\n * The Ignite UI Carousel is used to browse or navigate through a collection of slides. Slides can contain custom\n * content such as images or cards and be used for things such as on-boarding tutorials or page-based interfaces.\n * It can be used as a separate fullscreen element or inside another component.\n *\n * Example:\n * ```html\n * <igx-carousel>\n *   <igx-slide>\n *     <h3>First Slide Header</h3>\n *     <p>First slide Content</p>\n *   <igx-slide>\n *   <igx-slide>\n *     <h3>Second Slide Header</h3>\n *     <p>Second Slide Content</p>\n * </igx-carousel>\n * ```\n */\n@Component({\n    providers: [\n        {\n            provide: HAMMER_GESTURE_CONFIG,\n            useClass: CarouselHammerConfig\n        }\n    ],\n    selector: 'igx-carousel',\n    templateUrl: 'carousel.component.html',\n    styles: [`\n    :host {\n        display: block;\n        outline-style: none;\n    }`]\n})\n\nexport class IgxCarouselComponent implements OnDestroy, AfterContentInit {\n    /**\n     * Returns the `role` attribute of the carousel.\n     * ```typescript\n     * let carouselRole =  this.carousel.role;\n     * ```\n     * @memberof IgxCarouselComponent\n     */\n    @HostBinding('attr.role') public role = 'region';\n\n    /**\n     * Sets the `id` of the carousel.\n     * If not set, the `id` of the first carousel component will be `\"igx-carousel-0\"`.\n     * ```html\n     * <igx-carousel id=\"my-first-carousel\"></igx-carousel>\n     * ```\n     * @memberof IgxCarouselComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-carousel-${NEXT_ID++}`;\n\n    /**\n     * Returns the `aria-label` of the carousel.\n     *\n     * ```typescript\n     * let carousel = this.carousel.ariaLabel;\n     * ```\n     *\n     */\n    @HostBinding('attr.aria-label')\n    public ariaLabel = 'carousel';\n\n    /**\n     * Returns the `tabIndex` of the carousel component.\n     * ```typescript\n     * let tabIndex =  this.carousel.tabIndex;\n     * ```\n     * @memberof IgxCarouselComponent\n     */\n    @HostBinding('attr.tabindex')\n    get tabIndex() {\n        return 0;\n    }\n\n    /**\n     * Returns the class of the carousel component.\n     * ```typescript\n     * let class =  this.carousel.cssClass;\n     * ```\n     * @memberof IgxCarouselComponent\n     */\n    @HostBinding('class.igx-carousel')\n    public cssClass = 'igx-carousel';\n\n    /**\n    * Gets the `touch-action` style of the `list item`.\n    * ```typescript\n    * let touchAction = this.listItem.touchAction;\n    * ```\n    */\n    @HostBinding('style.touch-action')\n    get touchAction() {\n        return this.gesturesSupport ? 'pan-y' : 'auto';\n    }\n\n    /**\n     * Sets whether the carousel should `loop` back to the first slide after reaching the last slide.\n     * Default value is `true`.\n     * ```html\n     * <igx-carousel [loop]=\"false\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Input() public loop = true;\n\n    /**\n     * Sets whether the carousel will `pause` the slide transitions on user interactions.\n     * Default value is `true`.\n     * ```html\n     *  <igx-carousel [pause]=\"false\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Input() public pause = true;\n\n    /**\n     * Returns the time `interval` in milliseconds before the slide changes.\n     * ```typescript\n     * let timeInterval = this.carousel.interval;\n     * ```\n     * @memberof IgxCarouselComponent\n     */\n    @Input()\n    get interval(): number {\n        return this._interval;\n    }\n\n    /**\n     * Sets the time `interval` in milliseconds before the slide changes.\n     * If not set, the carousel will not change `slides` automatically.\n     * ```html\n     * <igx-carousel [interval] = \"1000\"></igx-carousel>\n     * ```\n     * @memberof IgxCarouselComponent\n     */\n    set interval(value: number) {\n        this._interval = +value;\n        this.restartInterval();\n    }\n\n    /**\n     * Controls whether the carousel should render the left/right `navigation` buttons.\n     * Default value is `true`.\n     * ```html\n     * <igx-carousel [navigation] = \"false\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Input() public navigation = true;\n\n    /**\n    * Controls whether the carousel should support keyboard navigation.\n    * Default value is `true`.\n    * ```html\n    * <igx-carousel [keyboardSupport] = \"false\"></igx-carousel>\n    * ```\n    * @memberOf IgxCarouselComponent\n    */\n    @Input() public keyboardSupport = true;\n\n    /**\n  * Controls whether the carousel should support gestures.\n  * Default value is `true`.\n  * ```html\n  * <igx-carousel [gesturesSupport] = \"false\"></igx-carousel>\n  * ```\n  * @memberOf IgxCarouselComponent\n  */\n    @Input() public gesturesSupport = true;\n\n    /**\n     * Controls the maximum indexes that can be shown.\n     * Default value is `5`.\n     * ```html\n     * <igx-carousel [maximumIndicatorsCount] = \"10\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Input() public maximumIndicatorsCount = 5;\n\n    /**\n    * Gets/sets the display mode of carousel indicators. It can be top or bottom.\n    * Default value is `bottom`.\n    * ```html\n    * <igx-carousel indicatorsOrientation='top'>\n    * <igx-carousel>\n    * ```\n    * @memberOf IgxSlideComponent\n    */\n    @Input() public indicatorsOrientation: CarouselIndicatorsOrientation = CarouselIndicatorsOrientation.bottom;\n\n    /**\n   * Gets/sets the animation type of carousel.\n   * Default value is `slide`.\n   * ```html\n   * <igx-carousel animationType='none'>\n   * <igx-carousel>\n   * ```\n   * @memberOf IgxSlideComponent\n   */\n    @Input() public animationType = CarouselAnimationType.slide;\n\n    /**\n    * An accessor that sets the resource strings.\n    * By default it uses EN resources.\n    */\n    @Input()\n    set resourceStrings(value: ICarouselResourceStrings) {\n        this._resourceStrings = Object.assign({}, this._resourceStrings, value);\n    }\n\n    /**\n     * An accessor that returns the resource strings.\n    */\n    get resourceStrings(): ICarouselResourceStrings {\n        return this._resourceStrings;\n    }\n\n    @ViewChild('defaultIndicator', { read: TemplateRef, static: true })\n    private defaultIndicator: TemplateRef<any>;\n\n    @ViewChild('defaultNextButton', { read: TemplateRef, static: true })\n    private defaultNextButton: TemplateRef<any>;\n\n    @ViewChild('defaultPrevButton', { read: TemplateRef, static: true })\n    private defaultPrevButton: TemplateRef<any>;\n\n    /**\n     * The custom template, if any, that should be used when rendering carousel indicators\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.carousel.indicatorTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-carousel #carousel>\n     *      ...\n     *      <ng-template igxCarouselIndicator let-slide>\n     *         <igx-icon *ngIf=\"slide.active\"  fontSet=\"material\">brightness_7</igx-icon>\n     *         <igx-icon *ngIf=\"!slide.active\"  fontSet=\"material\">brightness_5</igx-icon>\n     *      </ng-template>\n     *  </igx-carousel>\n     * ```\n     */\n    @ContentChild(IgxCarouselIndicatorDirective, { read: TemplateRef, static: false })\n    public indicatorTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering carousel next button\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.carousel.nextButtonTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-carousel #carousel>\n     *      ...\n     *      <ng-template igxCarouselNextButton let-disabled>\n     *            <button igxButton=\"fab\" igxRipple=\"white\" [disabled]=\"disabled\">\n     *                <igx-icon fontSet=\"material\">add</igx-icon>\n     *           </button>\n     *      </ng-template>\n     *  </igx-carousel>\n     * ```\n     */\n    @ContentChild(IgxCarouselNextButtonDirective, { read: TemplateRef, static: false })\n    public nextButtonTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering carousel previous button\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.carousel.nextButtonTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-carousel #carousel>\n     *      ...\n     *      <ng-template igxCarouselPrevButton let-disabled>\n     *            <button igxButton=\"fab\" igxRipple=\"white\" [disabled]=\"disabled\">\n     *                <igx-icon fontSet=\"material\">remove</igx-icon>\n     *           </button>\n     *      </ng-template>\n     *  </igx-carousel>\n     * ```\n     */\n    @ContentChild(IgxCarouselPrevButtonDirective, { read: TemplateRef, static: false })\n    public prevButtonTemplate: TemplateRef<any> = null;\n\n    /**\n    * The collection of `slides` currently in the carousel.\n    * ```typescript\n    * let slides: QueryList<IgxSlideComponent> = this.carousel.slides;\n    * ```\n    * @memberOf IgxCarouselComponent\n    */\n    @ContentChildren(IgxSlideComponent)\n    public slides: QueryList<IgxSlideComponent>;\n\n    /**\n     * An event that is emitted after a slide transition has happened.\n     * Provides references to the `IgxCarouselComponent` and `IgxSlideComponent` as event arguments.\n     * ```html\n     * <igx-carousel (onSlideChanged)=\"onSlideChanged($event)\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Output() public onSlideChanged = new EventEmitter<ISlideEventArgs>();\n\n    /**\n     * An event that is emitted after a slide has been added to the carousel.\n     * Provides references to the `IgxCarouselComponent` and `IgxSlideComponent` as event arguments.\n     * ```html\n     * <igx-carousel (onSlideAdded)=\"onSlideAdded($event)\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Output() public onSlideAdded = new EventEmitter<ISlideEventArgs>();\n\n    /**\n     * An event that is emitted after a slide has been removed from the carousel.\n     * Provides references to the `IgxCarouselComponent` and `IgxSlideComponent` as event arguments.\n     * ```html\n     * <igx-carousel (onSlideRemoved)=\"onSlideRemoved($event)\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Output() public onSlideRemoved = new EventEmitter<ISlideEventArgs>();\n\n    /**\n     * An event that is emitted after the carousel has been paused.\n     * Provides a reference to the `IgxCarouselComponent` as an event argument.\n     * ```html\n     * <igx-carousel (onCarouselPaused)=\"onCarouselPaused($event)\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Output() public onCarouselPaused = new EventEmitter<IgxCarouselComponent>();\n\n    /**\n     * An event that is emitted after the carousel has resumed transitioning between `slides`.\n     * Provides a reference to the `IgxCarouselComponent` as an event argument.\n     * ```html\n     * <igx-carousel (onCarouselPlaying)=\"onCarouselPlaying($event)\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Output() public onCarouselPlaying = new EventEmitter<IgxCarouselComponent>();\n\n    private _interval: number;\n    private _resourceStrings = CurrentResourceStrings.CarouselResStrings;\n    private lastInterval: any;\n    private playing: boolean;\n    private stoppedByInteraction: boolean;\n    private destroyed: boolean;\n    private destroy$ = new Subject<any>();\n    private differ: IterableDiffer<IgxSlideComponent> | null = null;\n    private enterAnimationPlayer?: AnimationPlayer;\n    private leaveAnimationPlayer?: AnimationPlayer;\n    private currentSlide: IgxSlideComponent;\n    private previousSlide: IgxSlideComponent;\n    private animationDuration = 320;\n    private incomingSlide: IgxSlideComponent;\n    private animationPosition = 0;\n    private newDuration = 0;\n\n    constructor(private element: ElementRef, private iterableDiffers: IterableDiffers,\n            private builder: AnimationBuilder, private platformUtil: PlatformUtil) {\n        this.differ = this.iterableDiffers.find([]).create(null);\n    }\n\n    /** @hidden */\n    public ngAfterContentInit() {\n        this.slides.changes\n            .pipe(takeUntil(this.destroy$))\n            .subscribe((change: QueryList<IgxSlideComponent>) => { this.initSlides(change); });\n\n        this.initSlides(this.slides);\n    }\n\n    /** @hidden */\n    public ngOnDestroy() {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n        this.destroyed = true;\n        if (this.lastInterval) {\n            clearInterval(this.lastInterval);\n        }\n    }\n\n    private unsubscriber(slide: IgxSlideComponent) {\n        return merge(this.destroy$, slide.isDestroyed);\n    }\n\n    private onSlideActivated(slide: IgxSlideComponent) {\n        if (slide.active && slide !== this.currentSlide) {\n            if (slide.direction === Direction.NONE) {\n                const newIndex = slide.index;\n                slide.direction = newIndex > this.current ? Direction.NEXT : Direction.PREV;\n            }\n\n            if (this.currentSlide) {\n                const animationWasStarted = this.finishAnimations();\n                this.currentSlide.direction = slide.direction;\n                this.currentSlide.active = false;\n\n                this.previousSlide = this.currentSlide;\n                this.currentSlide = slide;\n                if (this.animationType !== CarouselAnimationType.none) {\n                    if (animationWasStarted) {\n                        requestAnimationFrame(() => {\n                            this.playAnimations();\n                        });\n                    } else {\n                        this.playAnimations();\n                    }\n                }\n            } else {\n                this.currentSlide = slide;\n            }\n            this.onSlideChanged.emit({ carousel: this, slide });\n            this.restartInterval();\n        }\n    }\n\n    private playAnimations() {\n        this.playLeaveAnimation();\n        this.playEnterAnimation();\n    }\n\n    private finishAnimations(): boolean {\n        let animationWasStarted = false;\n        if (this.previousSlide && this.previousSlide.previous) {\n            this.previousSlide.previous = false;\n        }\n        if (this.leaveAnimationPlayer) {\n            animationWasStarted = true;\n            this.leaveAnimationPlayer.finish();\n        }\n        if (this.enterAnimationPlayer) {\n            animationWasStarted = true;\n            this.enterAnimationPlayer.finish();\n        }\n        return animationWasStarted;\n    }\n\n    private getAnimation(): CarouselAnimationSettings {\n        let duration;\n        if (this.newDuration) {\n            duration = this.animationPosition ? this.animationPosition * this.newDuration : this.newDuration;\n        } else {\n            duration = this.animationPosition ? this.animationPosition * this.animationDuration : this.animationDuration;\n        }\n\n        switch (this.animationType) {\n            case CarouselAnimationType.slide:\n                const trans = this.animationPosition ? this.animationPosition * 100 : 100;\n                return {\n                    enterAnimation: useAnimation(slideInLeft,\n                        {\n                            params: {\n                                delay: '0s',\n                                duration: `${duration}ms`,\n                                endOpacity: 1,\n                                startOpacity: 1,\n                                fromPosition: `translateX(${this.currentSlide.direction === 1 ? trans : -trans}%)`,\n                                toPosition: 'translateX(0%)'\n                            }\n                        }),\n                    leaveAnimation: useAnimation(slideInLeft,\n                        {\n                            params: {\n                                delay: '0s',\n                                duration: `${duration}ms`,\n                                endOpacity: 1,\n                                startOpacity: 1,\n                                fromPosition: `translateX(0%)`,\n                                toPosition: `translateX(${this.currentSlide.direction === 1 ? -trans : trans}%)`,\n                            }\n                        })\n                };\n            case CarouselAnimationType.fade:\n                return {\n                    enterAnimation: useAnimation(fadeIn,\n                        { params: { duration: `${duration}ms`, startOpacity: `${this.animationPosition}` } }),\n                    leaveAnimation: null\n                };\n        }\n        return {\n            enterAnimation: null,\n            leaveAnimation: null\n        };\n    }\n\n    private playEnterAnimation() {\n        if (!this.getAnimation().enterAnimation) {\n            return;\n        }\n        const animationBuilder = this.builder.build(this.getAnimation().enterAnimation);\n\n        this.enterAnimationPlayer = animationBuilder.create(this.currentSlide.nativeElement);\n\n        this.enterAnimationPlayer.onDone(() => {\n            if (this.enterAnimationPlayer) {\n                this.enterAnimationPlayer.reset();\n                this.enterAnimationPlayer = null;\n            }\n            this.animationPosition = 0;\n            this.newDuration = 0;\n            this.previousSlide.previous = false;\n        });\n        this.previousSlide.previous = true;\n        this.enterAnimationPlayer.play();\n    }\n\n    private playLeaveAnimation() {\n        if (!this.getAnimation().leaveAnimation) {\n            return;\n        }\n\n        const animationBuilder = this.builder.build(this.getAnimation().leaveAnimation);\n        this.leaveAnimationPlayer = animationBuilder.create(this.previousSlide.nativeElement);\n\n        this.leaveAnimationPlayer.onDone(() => {\n            if (this.leaveAnimationPlayer) {\n                this.leaveAnimationPlayer.reset();\n                this.leaveAnimationPlayer = null;\n            }\n            this.animationPosition = 0;\n            this.newDuration = 0;\n        });\n        this.leaveAnimationPlayer.play();\n    }\n\n    private initSlides(change: QueryList<IgxSlideComponent>) {\n        const diff = this.differ.diff(change.toArray());\n        if (diff) {\n            this.slides.reduce((any, c, ind) => c.index = ind, 0); // reset slides indexes\n            diff.forEachAddedItem((record: IterableChangeRecord<IgxSlideComponent>) => {\n                const slide = record.item;\n                this.onSlideAdded.emit({ carousel: this, slide });\n                if (slide.active) {\n                    this.currentSlide = slide;\n                }\n                slide.activeChange.pipe(takeUntil(this.unsubscriber(slide))).subscribe(() => this.onSlideActivated(slide));\n            });\n\n            diff.forEachRemovedItem((record: IterableChangeRecord<IgxSlideComponent>) => {\n                const slide = record.item;\n                this.onSlideRemoved.emit({ carousel: this, slide });\n                if (slide.active) {\n                    slide.active = false;\n                    this.currentSlide = this.get(slide.index < this.total ? slide.index : this.total - 1);\n                }\n            });\n\n            this.updateSlidesSelection();\n        }\n    }\n\n    private updateSlidesSelection() {\n        requestAnimationFrame(() => {\n            if (this.currentSlide) {\n                this.currentSlide.active = true;\n                const activeSlides = this.slides.filter(slide => slide.active && slide.index !== this.currentSlide.index);\n                activeSlides.forEach(slide => { slide.active = false; });\n            } else if (this.total) {\n                this.slides.first.active = true;\n            }\n            this.play();\n        });\n    }\n\n    /** @hidden */\n    public get getIndicatorTemplate(): TemplateRef<any> {\n        if (this.indicatorTemplate) {\n            return this.indicatorTemplate;\n        }\n        return this.defaultIndicator;\n    }\n\n    /** @hidden */\n    public get getNextButtonTemplate(): TemplateRef<any> {\n        if (this.nextButtonTemplate) {\n            return this.nextButtonTemplate;\n        }\n        return this.defaultNextButton;\n    }\n\n    /** @hidden */\n    public get getPrevButtonTemplate(): TemplateRef<any> {\n        if (this.prevButtonTemplate) {\n            return this.prevButtonTemplate;\n        }\n        return this.defaultPrevButton;\n    }\n\n    /** @hidden */\n    public setAriaLabel(slide) {\n        return `Item ${slide.index + 1} of ${this.total}`;\n    }\n\n    /** @hidden */\n    public get indicatorsOrientationClass() {\n        return `igx-carousel-indicators--${this.indicatorsOrientation}`;\n    }\n\n    /** @hidden */\n    public get showIndicators(): boolean {\n        return this.total <= this.maximumIndicatorsCount && this.total > 0;\n    }\n\n    /** @hidden */\n    public get showIndicatorsLabel(): boolean {\n        return this.total > this.maximumIndicatorsCount;\n    }\n\n    /** @hidden */\n    public get getCarouselLabel() {\n        return `${this.current + 1} ${this.resourceStrings.igx_carousel_of} ${this.total}`;\n    }\n\n    /**\n     * Returns the total number of `slides` in the carousel.\n     * ```typescript\n     * let slideCount =  this.carousel.total;\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public get total(): number {\n        return this.slides.length;\n    }\n\n    /**\n     * The index of the slide being currently shown.\n     * ```typescript\n     * let currentSlideNumber =  this.carousel.current;\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public get current(): number {\n        return !this.currentSlide ? 0 : this.currentSlide.index;\n    }\n\n    private getNextIndex(): number {\n        return (this.current + 1) % this.total;\n    }\n\n    private getPrevIndex(): number {\n        return this.current - 1 < 0 ? this.total - 1 : this.current - 1;\n    }\n\n    /**\n     * Returns a boolean indicating if the carousel is playing.\n     * ```typescript\n     * let isPlaying =  this.carousel.isPlaying;\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public get isPlaying(): boolean {\n        return this.playing;\n    }\n\n    /**\n     * Returns  boolean indicating if the carousel is destroyed.\n     * ```typescript\n     * let isDestroyed =  this.carousel.isDestroyed;\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public get isDestroyed(): boolean {\n        return this.destroyed;\n    }\n    /**\n     * Returns a reference to the carousel element in the DOM.\n     * ```typescript\n     * let nativeElement =  this.carousel.nativeElement;\n     * ```\n     * @memberof IgxCarouselComponent\n     */\n    get nativeElement(): any {\n        return this.element.nativeElement;\n    }\n\n    /**\n     * Returns the slide corresponding to the provided `index` or null.\n     * ```typescript\n     * let slide1 =  this.carousel.get(1);\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public get(index: number): IgxSlideComponent {\n        return this.slides.find((slide) => slide.index === index);\n    }\n\n    /**\n     * Adds a new slide to the carousel.\n     * ```typescript\n     * this.carousel.add(newSlide);\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public add(slide: IgxSlideComponent) {\n        const newSlides = this.slides.toArray();\n        newSlides.push(slide);\n        this.slides.reset(newSlides);\n        this.slides.notifyOnChanges();\n    }\n\n    /**\n     * Removes a slide from the carousel.\n     * ```typescript\n     * this.carousel.remove(slide);\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public remove(slide: IgxSlideComponent) {\n        if (slide && slide === this.get(slide.index)) { // check if the requested slide for delete is present in the carousel\n            const newSlides = this.slides.toArray();\n            newSlides.splice(slide.index, 1);\n            this.slides.reset(newSlides);\n            this.slides.notifyOnChanges();\n        }\n    }\n\n    /**\n     * Kicks in a transition for a given slide with a given `direction`.\n     * ```typescript\n     * this.carousel.select(this.carousel.get(2), Direction.NEXT);\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public select(slide: IgxSlideComponent, direction: Direction = Direction.NONE) {\n        if (slide && slide !== this.currentSlide) {\n            slide.direction = direction;\n            slide.active = true;\n        }\n    }\n\n    /**\n     * Transitions to the next slide in the carousel.\n     * ```typescript\n     * this.carousel.next();\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public next() {\n        const index = this.getNextIndex();\n\n        if (index === 0 && !this.loop) {\n            this.stop();\n            return;\n        }\n        return this.select(this.get(index), Direction.NEXT);\n    }\n\n    /**\n     * Transitions to the previous slide in the carousel.\n     * ```typescript\n     * this.carousel.prev();\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public prev() {\n        const index = this.getPrevIndex();\n\n        if (!this.loop && index === this.total - 1) {\n            this.stop();\n            return;\n        }\n        return this.select(this.get(index), Direction.PREV);\n    }\n\n    /**\n     * Resumes playing of the carousel if in paused state.\n     * No operation otherwise.\n     * ```typescript\n     * this.carousel.play();\n     * }\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public play() {\n        if (!this.playing) {\n            this.playing = true;\n            this.onCarouselPlaying.emit(this);\n            this.restartInterval();\n            this.stoppedByInteraction = false;\n        }\n    }\n\n    /**\n     * Stops slide transitions if the `pause` option is set to `true`.\n     * No operation otherwise.\n     * ```typescript\n     *  this.carousel.stop();\n     * }\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public stop() {\n        if (this.pause) {\n            this.playing = false;\n            this.onCarouselPaused.emit(this);\n            this.resetInterval();\n        }\n    }\n\n    private resetInterval() {\n        if (this.lastInterval) {\n            clearInterval(this.lastInterval);\n            this.lastInterval = null;\n        }\n    }\n\n    private restartInterval() {\n        this.resetInterval();\n\n        if (!isNaN(this.interval) && this.interval > 0 && this.platformUtil.isBrowser) {\n            this.lastInterval = setInterval(() => {\n                const tick = +this.interval;\n                if (this.playing && this.total && !isNaN(tick) && tick > 0) {\n                    this.next();\n                } else {\n                    this.stop();\n                }\n            }, this.interval);\n        }\n    }\n\n    /** @hidden */\n    public get nextButtonDisabled() {\n        return !this.loop && this.current === (this.total - 1);\n    }\n\n    /** @hidden */\n    public get prevButtonDisabled() {\n        return !this.loop && this.current === 0;\n    }\n\n    /** @hidden */\n    @HostListener('keydown.arrowright', ['$event'])\n    public onKeydownArrowRight(event) {\n        if (this.keyboardSupport) {\n            event.preventDefault();\n            this.next();\n            requestAnimationFrame(() => this.nativeElement.focus());\n        }\n    }\n\n    /** @hidden */\n    @HostListener('keydown.arrowleft', ['$event'])\n    public onKeydownArrowLeft(event) {\n        if (this.keyboardSupport) {\n            event.preventDefault();\n            this.prev();\n            requestAnimationFrame(() => this.nativeElement.focus());\n        }\n    }\n\n    /** @hidden */\n    @HostListener('tap', ['$event'])\n    public onTap(event) {\n        // play pause only when tap on slide\n        if (event.target && event.target.classList.contains('igx-slide')) {\n            if (this.isPlaying) {\n                if (this.pause) {\n                    this.stoppedByInteraction = true;\n                }\n                this.stop();\n            } else if (this.stoppedByInteraction) {\n                this.play();\n            }\n        }\n    }\n\n    /** @hidden */\n    @HostListener('keydown.home', ['$event'])\n    public onKeydownHome(event) {\n        if (this.keyboardSupport && this.slides.length > 0) {\n            event.preventDefault();\n            this.slides.first.active = true;\n            requestAnimationFrame(() => this.nativeElement.focus());\n        }\n    }\n\n    /** @hidden */\n    @HostListener('keydown.end', ['$event'])\n    public onKeydownEnd(event) {\n        if (this.keyboardSupport && this.slides.length > 0) {\n            event.preventDefault();\n            this.slides.last.active = true;\n            requestAnimationFrame(() => this.nativeElement.focus());\n        }\n    }\n\n    /** @hidden */\n    @HostListener('mouseenter')\n    public onMouseEnter() {\n        if (this.pause && this.isPlaying) {\n            this.stoppedByInteraction = true;\n        }\n        this.stop();\n    }\n\n    /** @hidden */\n    @HostListener('mouseleave')\n    public onMouseLeave() {\n        if (this.stoppedByInteraction) {\n            this.play();\n        }\n    }\n\n    /** @hidden */\n    @HostListener('panleft', ['$event'])\n    public onPanLeft(event) {\n        this.pan(event);\n    }\n\n    /** @hidden */\n    @HostListener('panright', ['$event'])\n    public onPanRight(event) {\n        this.pan(event);\n    }\n\n    private resetSlideStyles(slide: IgxSlideComponent) {\n        slide.nativeElement.style.transform = '';\n        slide.nativeElement.style.opacity = '';\n    }\n\n    private pan(event) {\n        const slideWidth = this.currentSlide.nativeElement.offsetWidth;\n        const panOffset = (slideWidth / 1000);\n        const deltaX = event.deltaX;\n        const index = deltaX < 0 ? this.getNextIndex() : this.getPrevIndex();\n        const offset = deltaX < 0 ? slideWidth + deltaX : -slideWidth + deltaX;\n\n        if (!this.gesturesSupport || event.isFinal || Math.abs(deltaX) + panOffset >= slideWidth) {\n            return;\n        }\n\n        if (!this.loop && ((this.current === 0 && deltaX > 0) || (this.current === this.total - 1 && deltaX < 0))) {\n            this.incomingSlide = null;\n            return;\n        }\n\n        event.preventDefault();\n        if (this.isPlaying) {\n            this.stoppedByInteraction = true;\n            this.stop();\n        }\n        this.finishAnimations();\n\n        if (this.incomingSlide) {\n            if (index !== this.incomingSlide.index) {\n                this.resetSlideStyles(this.incomingSlide);\n                this.incomingSlide.previous = false;\n                this.incomingSlide = this.get(index);\n            }\n        } else {\n            this.incomingSlide = this.get(index);\n        }\n        this.incomingSlide.previous = true;\n\n        if (this.animationType === CarouselAnimationType.fade) {\n            this.currentSlide.nativeElement.style.opacity = `${Math.abs(offset) / slideWidth}`;\n        } else {\n            this.currentSlide.nativeElement.style.transform = `translateX(${deltaX}px)`;\n            this.incomingSlide.nativeElement.style.transform = `translateX(${offset}px)`;\n        }\n    }\n\n    /**\n    * @hidden\n    */\n    @HostListener('panend', ['$event'])\n    public onPanEnd(event) {\n        if (!this.gesturesSupport) {\n            return;\n        }\n        event.preventDefault();\n\n        const slideWidth = this.currentSlide.nativeElement.offsetWidth;\n        const panOffset = (slideWidth / 1000);\n        const deltaX = Math.abs(event.deltaX) + panOffset < slideWidth ? Math.abs(event.deltaX) : slideWidth - panOffset;\n        const velocity = Math.abs(event.velocity);\n        this.resetSlideStyles(this.currentSlide);\n        if (this.incomingSlide) {\n            this.resetSlideStyles(this.incomingSlide);\n            if (slideWidth / 2 < deltaX || velocity > 1) {\n                this.incomingSlide.direction = event.deltaX < 0 ? Direction.NEXT : Direction.PREV;\n                this.incomingSlide.previous = false;\n\n                this.animationPosition = this.animationType === CarouselAnimationType.fade ?\n                    deltaX / slideWidth : (slideWidth - deltaX) / slideWidth;\n\n                if (velocity > 1) {\n                    this.newDuration = this.animationDuration / velocity;\n                }\n                this.incomingSlide.active = true;\n            } else {\n                this.currentSlide.direction = event.deltaX > 0 ? Direction.NEXT : Direction.PREV;\n                this.previousSlide = this.incomingSlide;\n                this.previousSlide.previous = true;\n                this.animationPosition = this.animationType === CarouselAnimationType.fade ?\n                    Math.abs((slideWidth - deltaX) / slideWidth) : deltaX / slideWidth;\n                this.playAnimations();\n            }\n        }\n\n        if (this.stoppedByInteraction) {\n            this.play();\n        }\n    }\n}\n\nexport interface ISlideEventArgs extends IBaseEventArgs {\n    carousel: IgxCarouselComponent;\n    slide: IgxSlideComponent;\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxCarouselComponent,\n        IgxSlideComponent,\n        IgxCarouselIndicatorDirective,\n        IgxCarouselNextButtonDirective,\n        IgxCarouselPrevButtonDirective\n    ],\n    exports: [\n        IgxCarouselComponent,\n        IgxSlideComponent,\n        IgxCarouselIndicatorDirective,\n        IgxCarouselNextButtonDirective,\n        IgxCarouselPrevButtonDirective\n    ],\n    imports: [CommonModule, IgxIconModule]\n})\nexport class IgxCarouselModule {\n}\n","import {\n    Component,\n    Directive,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    Input,\n    NgModule,\n    Output,\n    Provider,\n    ViewChild,\n    ElementRef\n} from '@angular/core';\nimport { CheckboxRequiredValidator, ControlValueAccessor, NG_VALIDATORS, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { isIE, IBaseEventArgs } from '../core/utils';\nimport { EditorProvider } from '../core/edit-provider';\n\nexport enum LabelPosition {\n    BEFORE = 'before',\n    AFTER = 'after'\n}\n\nexport interface IChangeCheckboxEventArgs extends IBaseEventArgs {\n    checked: boolean;\n    checkbox: IgxCheckboxComponent;\n}\n\nconst noop = () => { };\nlet nextId = 0;\n/**\n * Allows users to make a binary choice for a certain condition.\n *\n * @igxModule IgxCheckboxModule\n *\n * @igxTheme igx-checkbox-theme\n *\n * @igxKeywords checkbox, label\n *\n * @igxGroup Data entry and display\n *\n * @remarks\n * The Ignite UI Checkbox is a selection control that allows users to make a binary choice for a certain condition.It behaves similarly\n * to the native browser checkbox.\n *\n * @example\n * ```html\n * <igx-checkbox checked=\"true\">\n *   simple checkbox\n * </igx-checkbox>\n * ```\n */\n@Component({\n    providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: IgxCheckboxComponent, multi: true }],\n    selector: 'igx-checkbox',\n    preserveWhitespaces: false,\n    templateUrl: 'checkbox.component.html'\n})\nexport class IgxCheckboxComponent implements ControlValueAccessor, EditorProvider {\n    /**\n     *@hidden\n     */\n    protected _value: any;\n    /**\n     * Returns reference to the native checkbox element.\n     *\n     * @example\n     * ```typescript\n     * let checkboxElement =  this.checkbox.checkboxElement;\n     * ```\n     */\n    @ViewChild('checkbox', { static: true }) public nativeCheckbox: ElementRef;\n    /**\n     * Returns reference to the native label element.\n     * ```typescript\n     *\n     * @example\n     * let labelElement =  this.checkbox.nativeLabel;\n     * ```\n     */\n    @ViewChild('label', { static: true }) public nativeLabel;\n    /**\n     * Returns reference to the label placeholder element.\n     * ```typescript\n     *\n     * @example\n     * let labelPlaceholder =  this.checkbox.placeholderLabel;\n     * ```\n     */\n    @ViewChild('placeholderLabel', { static: true }) public placeholderLabel;\n    /**\n     * Sets/gets the `id` of the checkbox component.\n     * If not set, the `id` of the first checkbox component will be `\"igx-checkbox-0\"`.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox id=\"my-first-checkbox\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let checkboxId =  this.checkbox.id;\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input() public id = `igx-checkbox-${nextId++}`;\n    /**\n     * Sets/gets the id of the `label` element.\n     * If not set, the id of the `label` in the first checkbox component will be `\"igx-checkbox-0-label\"`.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox labelId = \"Label1\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let labelId =  this.checkbox.labelId;\n     * ```\n     */\n    @Input() public labelId = `${this.id}-label`;\n    /**\n     * Sets/gets the `value` attribute.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox [value] = \"'CheckboxValue'\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let value =  this.checkbox.value;\n     * ```\n     */\n    @Input() public value: any;\n    /**\n     * Sets/gets the `name` attribute.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox name = \"Checkbox1\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let name =  this.checkbox.name;\n     * ```\n     */\n    @Input() public name: string;\n    /**\n     * Sets/gets the value of the `tabindex` attribute.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox [tabindex] = \"1\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let tabIndex =  this.checkbox.tabindex;\n     * ```\n     */\n    @Input() public tabindex: number = null;\n    /**\n     *  Sets/gets the position of the `label`.\n     *  If not set, the `labelPosition` will have value `\"after\"`.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox labelPosition = \"before\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let labelPosition =  this.checkbox.labelPosition;\n     * ```\n     */\n    @Input() public labelPosition: LabelPosition | string = LabelPosition.AFTER;\n    /**\n     * Enables/Disables the ripple effect.\n     * If not set, `disableRipple` will have value `false`.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox [disableRipple] = \"true\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let isRippleDisabled = this.checkbox.desableRipple;\n     * ```\n     */\n    @Input() public disableRipple = false;\n    /**\n     * Sets/gets whether the checkbox is required.\n     * If not set, `required` will have value `false`.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox [required] = \"true\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let isRequired =  this.checkbox.required;\n     * ```\n     */\n    @Input() public required = false;\n    /**\n     * Sets/gets the `aria-labelledby` attribute.\n     * If not set, the `aria-labelledby` will be equal to the value of `labelId` attribute.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox aria-labelledby = \"Checkbox1\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let ariaLabelledBy =  this.checkbox.ariaLabelledBy;\n     * ```\n     */\n    @Input('aria-labelledby')\n    public ariaLabelledBy = this.labelId;\n    /**\n     * Sets/gets the value of the `aria-label` attribute.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox aria-label = \"Checkbox1\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let ariaLabel = this.checkbox.ariaLabel;\n     * ```\n     */\n    @Input('aria-label')\n    public ariaLabel: string | null = null;\n    /**\n     * An event that is emitted after the checkbox state is changed.\n     * Provides references to the `IgxCheckboxComponent` and the `checked` property as event arguments.\n     */\n    @Output()\n    readonly change: EventEmitter<IChangeCheckboxEventArgs> = new EventEmitter<IChangeCheckboxEventArgs>();\n    /**\n     * Returns the class of the checkbox component.\n     *\n     * @example\n     * ```typescript\n     * let class =  this.checkbox.cssClass;\n     * ```\n     */\n    @HostBinding('class.igx-checkbox')\n    public cssClass = 'igx-checkbox';\n    /**\n     * Sets/gets whether the checkbox component is on focus.\n     * Default value is `false`.\n     *\n     * @example\n     * ```typescript\n     * this.checkbox.focused =  true;\n     * ```\n     * ```typescript\n     * let isFocused =  this.checkbox.focused;\n     * ```\n     */\n    @HostBinding('class.igx-checkbox--focused')\n    public focused = false;\n    /**\n     * Sets/gets the checkbox indeterminate visual state.\n     * Default value is `false`;\n     *\n     * @example\n     * ```html\n     * <igx-checkbox [indeterminate] = \"true\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let isIndeterminate = this.checkbox.indeterminate;\n     * ```\n     */\n    @HostBinding('class.igx-checkbox--indeterminate')\n    @Input() public indeterminate = false;\n    /**\n     * Sets/gets whether the checkbox is checked.\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox [checked] = \"true\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let isChecked =  this.checkbox.checked;\n     * ```\n     */\n    @HostBinding('class.igx-checkbox--checked')\n    @Input() public checked = false;\n    /**\n     * Sets/gets whether the checkbox is disabled.\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox [disabled] = \"true\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let isDisabled = this.checkbox.disabled;\n     * ```\n     */\n    @HostBinding('class.igx-checkbox--disabled')\n    @Input() public disabled = false;\n    /**\n     * Sets/gets whether the checkbox is readonly.\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox [readonly]=\"true\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let readonly = this.checkbox.readonly;\n     * ```\n     */\n    @Input() public readonly = false;\n    /**\n     * Sets/gets whether the checkbox should disable all css transitions.\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox [disableTransitions]=\"true\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let disableTransitions = this.checkbox.disableTransitions;\n     * ```\n     */\n    @HostBinding('class.igx-checkbox--plain')\n    @Input() public disableTransitions = false;\n    /** @hidden @internal */\n    public inputId = `${this.id}-input`;\n    /**\n     *@hidden\n     */\n    private _onTouchedCallback: () => void = noop;\n    /**\n     * @hidden\n     */\n    private _onChangeCallback: (_: any) => void = noop;\n    /**\n     * If `disabled` is `false`, switches the `checked` state.\n     *\n     * @example\n     * ```typescript\n     * this.checkbox.toggle();\n     * ```\n     */\n    public toggle() {\n        if (this.disabled || this.readonly) {\n            return;\n        }\n\n        this.indeterminate = false;\n        this.focused = false;\n        this.checked = !this.checked;\n\n        this.change.emit({ checked: this.checked, checkbox: this });\n        this._onChangeCallback(this.checked);\n    }\n    /** @hidden @internal */\n    public _onCheckboxChange(event) {\n        // We have to stop the original checkbox change event\n        // from bubbling up since we emit our own change event\n        event.stopPropagation();\n    }\n    /** @hidden @internal */\n    public _onCheckboxClick(event) {\n        // Since the original checkbox is hidden and the label\n        // is used for styling and to change the checked state of the checkbox,\n        // we need to prevent the checkbox click event from bubbling up\n        // as it gets triggered on label click\n        event.stopPropagation();\n\n        if (this.readonly) {\n            // readonly prevents the component from changing state (see toggle() method).\n            // However, the native checkbox can still be activated through user interaction (focus + space, label click)\n            // Prevent the native change so the input remains in sync\n            event.preventDefault();\n        }\n\n        if (isIE()) {\n            this.nativeCheckbox.nativeElement.blur();\n        }\n\n        this.toggle();\n    }\n    /** @hidden @internal */\n    public _onLabelClick(event) {\n        // We use a span element as a placeholder label\n        // in place of the native label, we need to emit\n        // the change event separately here alongside\n        // the click event emitted on click\n        this.toggle();\n    }\n    /** @hidden @internal */\n    public onFocus(event) {\n        this.focused = true;\n    }\n    /** @hidden @internal */\n    public onBlur(event) {\n        this.focused = false;\n        this._onTouchedCallback();\n    }\n    /** @hidden @internal */\n    public writeValue(value) {\n        this._value = value;\n        this.checked = !!this._value;\n    }\n    /** @hidden @internal */\n    public get labelClass(): string {\n        switch (this.labelPosition) {\n            case LabelPosition.BEFORE:\n                return `${this.cssClass}__label--before`;\n            case LabelPosition.AFTER:\n            default:\n                return `${this.cssClass}__label`;\n        }\n    }\n    /** @hidden @internal */\n    public registerOnChange(fn: (_: any) => void) { this._onChangeCallback = fn; }\n    /** @hidden @internal */\n    public registerOnTouched(fn: () => void) { this._onTouchedCallback = fn; }\n\n    /** @hidden @internal */\n    public getEditElement() {\n        return this.nativeCheckbox.nativeElement;\n    }\n}\n\nexport const IGX_CHECKBOX_REQUIRED_VALIDATOR: Provider = {\n    provide: NG_VALIDATORS,\n    useExisting: forwardRef(() => IgxCheckboxRequiredDirective),\n    multi: true\n};\n\n/* tslint:disable directive-selector */\n@Directive({\n    selector: `igx-checkbox[required][formControlName],\n    igx-checkbox[required][formControl],\n    igx-checkbox[required][ngModel]`,\n    providers: [IGX_CHECKBOX_REQUIRED_VALIDATOR]\n})\nexport class IgxCheckboxRequiredDirective extends CheckboxRequiredValidator { }\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxCheckboxComponent, IgxCheckboxRequiredDirective],\n    exports: [IgxCheckboxComponent, IgxCheckboxRequiredDirective],\n    imports: [IgxRippleModule]\n})\nexport class IgxCheckboxModule { }\n","import { ConnectedPositioningStrategy } from './../services/overlay/position/connected-positioning-strategy';\nimport { CommonModule } from '@angular/common';\nimport {\n    AfterViewInit, ChangeDetectorRef, Component, ContentChild, ElementRef, EventEmitter, HostBinding, HostListener,\n    Input, NgModule, OnInit, OnDestroy, Output, TemplateRef, ViewChild, Optional, Inject, Injector, Type\n} from '@angular/core';\nimport {\n    IgxComboItemDirective,\n    IgxComboEmptyDirective,\n    IgxComboHeaderItemDirective,\n    IgxComboHeaderDirective,\n    IgxComboFooterDirective,\n    IgxComboAddItemDirective,\n    IgxComboToggleIconDirective,\n    IgxComboClearIconDirective\n} from './combo.directives';\nimport { FormsModule, ReactiveFormsModule, ControlValueAccessor, NG_VALUE_ACCESSOR, NgControl, AbstractControl } from '@angular/forms';\nimport { IgxCheckboxModule } from '../checkbox/checkbox.component';\nimport { IgxSelectionAPIService } from '../core/selection';\nimport { cloneArray, CancelableEventArgs, CancelableBrowserEventArgs, IBaseEventArgs } from '../core/utils';\nimport { IgxStringFilteringOperand, IgxBooleanFilteringOperand } from '../data-operations/filtering-condition';\nimport { FilteringLogic } from '../data-operations/filtering-expression.interface';\nimport { IgxForOfModule, IForOfState, IgxForOfDirective } from '../directives/for-of/for_of.directive';\nimport { IgxIconModule } from '../icon/index';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxToggleModule } from '../directives/toggle/toggle.directive';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxDropDownModule } from '../drop-down/index';\nimport { IgxInputGroupModule, IgxInputGroupComponent } from '../input-group/input-group.component';\nimport { IgxComboItemComponent } from './combo-item.component';\nimport { IgxComboDropDownComponent } from './combo-dropdown.component';\nimport { IgxComboFilteringPipe, IgxComboGroupingPipe } from './combo.pipes';\nimport { OverlaySettings, AbsoluteScrollStrategy } from '../services';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { DisplayDensityBase, DisplayDensityToken, IDisplayDensityOptions } from '../core/density';\nimport { IGX_COMBO_COMPONENT, IgxComboBase } from './combo.common';\nimport { IgxComboAddItemComponent } from './combo-add-item.component';\nimport { IgxComboAPIService } from './combo.api';\nimport { EditorProvider } from '../core/edit-provider';\nimport { IgxInputState, IgxInputDirective } from '../directives/input/input.directive';\n\n/**\n * @hidden\n */\nenum DataTypes {\n    EMPTY = 'empty',\n    PRIMITIVE = 'primitive',\n    COMPLEX = 'complex',\n    PRIMARYKEY = 'valueKey'\n}\n\n/**\n * @hidden\n */\nconst ItemHeights = {\n    'comfortable': 40,\n    'cosy': 32,\n    'compact': 28,\n};\n\n/**\n * @hidden\n * The default number of items that should be in the combo's\n * drop-down list if no `[itemsMaxHeight]` is specified\n */\nconst itemsInContainer = 10;\n\nexport enum IgxComboState {\n    /**\n     * Combo with initial state.\n     */\n    INITIAL = IgxInputState.INITIAL,\n    /**\n     * Combo with valid state.\n     */\n    VALID = IgxInputState.VALID,\n    /**\n     * Combo with invalid state.\n     */\n    INVALID = IgxInputState.INVALID\n}\n\n/** Event emitted when an igx-combo's selection is changing */\nexport interface IComboSelectionChangeEventArgs extends CancelableEventArgs, IBaseEventArgs {\n    /** An array containing the values that are currently selected */\n    oldSelection: any[];\n    /** An array containing the values that will be selected after this event */\n    newSelection: any[];\n    /** An array containing the values that will be added to the selection (if any) */\n    added: any[];\n    /** An array containing the values that will be removed from the selection (if any) */\n    removed: any[];\n    /** The text that will be displayed in the combo text box */\n    displayText: string;\n    /** The user interaction that triggered the selection change */\n    event?: Event;\n}\n\nexport interface IComboItemAdditionEvent extends IBaseEventArgs {\n    oldCollection: any[];\n    addedItem: any;\n    newCollection: any[];\n}\n\n/**\n * When called with sets A & B, returns A - B (as array);\n * @hidden\n */\nfunction diffInSets(set1: Set<any>, set2: Set<any>): any[] {\n    const results = [];\n    set1.forEach(entry => {\n        if (!set2.has(entry)) {\n            results.push(entry);\n        }\n    });\n    return results;\n}\n\nlet NEXT_ID = 0;\nconst noop = () => { };\n\n@Component({\n    selector: 'igx-combo',\n    templateUrl: 'combo.component.html',\n    providers: [\n        IgxComboAPIService,\n        { provide: IGX_COMBO_COMPONENT, useExisting: IgxComboComponent },\n        { provide: NG_VALUE_ACCESSOR, useExisting: IgxComboComponent, multi: true }\n    ]\n})\nexport class IgxComboComponent extends DisplayDensityBase implements IgxComboBase, AfterViewInit, ControlValueAccessor, OnInit,\n    OnDestroy, EditorProvider {\n    /**\n     * @hidden @internal\n     */\n    public customValueFlag = true;\n    /**\n     * @hidden @internal\n     */\n    public defaultFallbackGroup = 'Other';\n    protected stringFilters = IgxStringFilteringOperand;\n    protected booleanFilters = IgxBooleanFilteringOperand;\n    protected _groupKey = '';\n    protected _displayKey: string;\n    protected _prevInputValue = '';\n    private _dataType = '';\n    private ngControl: NgControl = null;\n    private destroy$ = new Subject<any>();\n    private _data = [];\n    private _filteredData = [];\n    private _itemHeight = null;\n    private _itemsMaxHeight = null;\n    private _remoteSelection = {};\n    private _onChangeCallback: (_: any) => void = noop;\n    private _onTouchedCallback: () => void = noop;\n    private _overlaySettings: OverlaySettings = {\n        scrollStrategy: new AbsoluteScrollStrategy(),\n        positionStrategy: new ConnectedPositioningStrategy(),\n        modal: false,\n        closeOnOutsideClick: true,\n        excludePositionTarget: true\n    };\n    private _value = '';\n    private _valid = IgxComboState.INITIAL;\n    constructor(\n        protected elementRef: ElementRef,\n        protected cdr: ChangeDetectorRef,\n        protected selection: IgxSelectionAPIService,\n        protected comboAPI: IgxComboAPIService,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions,\n        @Optional() private _injector: Injector) {\n        super(_displayDensityOptions);\n        this.comboAPI.register(this);\n    }\n\n    @ViewChild(IgxForOfDirective, { read: IgxForOfDirective, static: true })\n    protected virtDir: IgxForOfDirective<any>;\n\n    /**\n     * Set custom overlay settings that control how the combo's list of items is displayed.\n     * Set:\n     * ```html\n     * <igx-combo [overlaySettings] = \"customOverlaySettings\"></igx-combo>\n     * ```\n     *\n     * ```typescript\n     *  const customSettings = { positionStrategy: { settings: { target: myTarget } } };\n     *  combo.overlaySettings = customSettings;\n     * ```\n     * Get any custom overlay settings used by the combo:\n     * ```typescript\n     *  const comboOverlaySettings: OverlaySettings = myCombo.overlaySettings;\n     * ```\n     */\n\n    @Input()\n    public overlaySettings: OverlaySettings = null;\n\n    /** @hidden @internal */\n    @ViewChild('inputGroup', { read: IgxInputGroupComponent, static: true }) public inputGroup: IgxInputGroupComponent;\n\n    /** @hidden @internal */\n    @ViewChild('comboInput', { read: IgxInputDirective, static: true }) public comboInput: IgxInputDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild(IgxComboDropDownComponent, { read: IgxComboDropDownComponent, static: true })\n    public dropdown: IgxComboDropDownComponent;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('searchInput')\n    public searchInput: ElementRef<HTMLInputElement> = null;\n\n    /**\n     * @hidden @internal\n     */\n    get displaySearchInput(): boolean {\n        return this.filterable || this.allowCustomValues;\n    }\n\n    /**\n     * The custom template, if any, that should be used when rendering ITEMS in the combo list\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.combo.itemTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-combo #combo>\n     *      ...\n     *      <ng-template igxComboItem>\n     *          <div class=\"custom-item\" let-item let-key=\"valueKey\">\n     *              <div class=\"custom-item__name\">{{ item[key] }}</div>\n     *              <div class=\"custom-item__cost\">{{ item.cost }}</div>\n     *          </div>\n     *      </ng-template>\n     *  </igx-combo>\n     * ```\n     */\n    @ContentChild(IgxComboItemDirective, { read: TemplateRef })\n    public itemTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering the HEADER for the combo items list\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.combo.headerTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-combo #combo>\n     *      ...\n     *      <ng-template igxComboHeader>\n     *          <div class=\"combo__header\">\n     *              This is a custom header\n     *          </div>\n     *      </ng-template>\n     *  </igx-combo>\n     * ```\n     */\n    @ContentChild(IgxComboHeaderDirective, { read: TemplateRef })\n    public headerTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering the FOOTER for the combo items list\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.combo.footerTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-combo #combo>\n     *      ...\n     *      <ng-template igxComboFooter>\n     *          <div class=\"combo__footer\">\n     *              This is a custom footer\n     *          </div>\n     *      </ng-template>\n     *  </igx-combo>\n     * ```\n     */\n    @ContentChild(IgxComboFooterDirective, { read: TemplateRef })\n    public footerTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering HEADER ITEMS for groups in the combo list\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.combo.headerItemTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-combo #combo>\n     *      ...\n     *      <ng-template igxComboHeaderItem let-item let-key=\"groupKey\">\n     *          <div class=\"custom-item--group\">Group header for {{ item[key] }}</div>\n     *      </ng-template>\n     *  </igx-combo>\n     * ```\n     */\n    @ContentChild(IgxComboHeaderItemDirective, { read: TemplateRef })\n    public headerItemTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering the ADD BUTTON in the combo drop down\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.combo.addItemTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-combo #combo>\n     *      ...\n     *      <ng-template igxComboAddItem>\n     *          <button class=\"combo__add-button\">\n     *              Click to add item\n     *          </button>\n     *      </ng-template>\n     *  </igx-combo>\n     * ```\n     */\n    @ContentChild(IgxComboAddItemDirective, { read: TemplateRef })\n    public addItemTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering the ADD BUTTON in the combo drop down\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.combo.emptyTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-combo #combo>\n     *      ...\n     *      <ng-template igxComboEmpty>\n     *          <div class=\"combo--empty\">\n     *              There are no items to display\n     *          </div>\n     *      </ng-template>\n     *  </igx-combo>\n     * ```\n     */\n    @ContentChild(IgxComboEmptyDirective, { read: TemplateRef })\n    public emptyTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering the combo TOGGLE(open/close) button\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.combo.toggleIconTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-combo #combo>\n     *      ...\n     *      <ng-template igxComboToggleIcon let-collapsed>\n     *          <igx-icon>{{ collapsed ? 'remove_circle' : 'remove_circle_outline'}}</igx-icon>\n     *      </ng-template>\n     *  </igx-combo>\n     * ```\n     */\n    @ContentChild(IgxComboToggleIconDirective, { read: TemplateRef })\n    public toggleIconTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering the combo CLEAR button\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.combo.clearIconTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-combo #combo>\n     *      ...\n     *      <ng-template igxComboClearIcon>\n     *          <igx-icon>clear</igx-icon>\n     *      </ng-template>\n     *  </igx-combo>\n     * ```\n     */\n    @ContentChild(IgxComboClearIconDirective, { read: TemplateRef })\n    public clearIconTemplate: TemplateRef<any> = null;\n\n    @ViewChild('primitive', { read: TemplateRef, static: true })\n    protected primitiveTemplate: TemplateRef<any>;\n\n    @ViewChild('complex', { read: TemplateRef, static: true })\n    protected complexTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild(IgxForOfDirective, { static: true })\n    public virtualScrollContainer: IgxForOfDirective<any>;\n\n    @ViewChild('dropdownItemContainer', { static: true })\n    protected dropdownContainer: ElementRef = null;\n\n    /**\n     * Emitted when item selection is changing, before the selection completes\n     *\n     * ```html\n     * <igx-combo (onSelectionChange)='handleSelection()'></igx-combo>\n     * ```\n     */\n    @Output()\n    public onSelectionChange = new EventEmitter<IComboSelectionChangeEventArgs>();\n\n    /**\n     * Emitted before the dropdown is opened\n     *\n     * ```html\n     * <igx-combo onOpening='handleOpening($event)'></igx-combo>\n     * ```\n     */\n    @Output()\n    public onOpening = new EventEmitter<CancelableEventArgs & IBaseEventArgs>();\n\n    /**\n     * Emitted after the dropdown is opened\n     *\n     * ```html\n     * <igx-combo (onOpened)='handleOpened()'></igx-combo>\n     * ```\n     */\n    @Output()\n    public onOpened = new EventEmitter<void>();\n\n    /**\n     * Emitted before the dropdown is closed\n     *\n     * ```html\n     * <igx-combo (onClosing)='handleClosing($event)'></igx-combo>\n     * ```\n     */\n    @Output()\n    public onClosing = new EventEmitter<CancelableBrowserEventArgs & IBaseEventArgs>();\n\n    /**\n     * Emitted after the dropdown is closed\n     *\n     * ```html\n     * <igx-combo (onClosed)='handleClosed()'></igx-combo>\n     * ```\n     */\n    @Output()\n    public onClosed = new EventEmitter<void>();\n\n    /**\n     * Emitted when an item is being added to the data collection\n     *\n     * ```html\n     * <igx-combo (onAddition)='handleAdditionEvent()'></igx-combo>\n     * ```\n     */\n    @Output()\n    public onAddition = new EventEmitter<IComboItemAdditionEvent>();\n\n    /**\n     * Emitted when the value of the search input changes (e.g. typing, pasting, clear, etc.)\n     *\n     * ```html\n     * <igx-combo (onSearchInput)='handleSearchInputEvent()'></igx-combo>\n     * ```\n     */\n    @Output()\n    public onSearchInput = new EventEmitter();\n\n    /**\n     * Emitted when new chunk of data is loaded from the virtualization\n     *\n     * ```html\n     * <igx-combo (onDataPreLoad)='handleDataPreloadEvent()'></igx-combo>\n     * ```\n     */\n    @Output()\n    public onDataPreLoad = new EventEmitter<any>();\n\n    /**\n     * Gets/gets combo id.\n     *\n     * ```typescript\n     * // get\n     * let id = this.combo.id;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [id]='combo1'></igx-combo>\n     * ```\n    */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-combo-${NEXT_ID++}`;\n\n    /**\n     * Sets the style width of the element\n     *\n     * ```typescript\n     * // get\n     * let myComboWidth = this.combo.width;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [width]='250px'></igx-combo>\n     * ```\n     */\n    @HostBinding('style.width')\n    @Input()\n    public width: string;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class.igx-combo')\n    public cssClass = 'igx-combo'; // Independent of display density, at the time being\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding(`attr.role`)\n    public role = 'combobox';\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.aria-expanded')\n    public get ariaExpanded(): boolean {\n        return !this.dropdown.collapsed;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.aria-haspopup')\n    public get hasPopUp() {\n        return 'listbox';\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.aria-owns')\n    public get ariaOwns() {\n        return this.dropdown.id;\n    }\n\n    /**\n     * Controls whether custom values can be added to the collection\n     *\n     * ```typescript\n     * // get\n     * let comboAllowsCustomValues = this.combo.allowCustomValues;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [allowCustomValues]='true'></igx-combo>\n     * ```\n     */\n    @Input()\n    public allowCustomValues = false;\n\n    /**\n     * Configures the drop down list height\n     *\n     * ```typescript\n     * // get\n     * let myComboItemsMaxHeight = this.combo.itemsMaxHeight;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [itemsMaxHeight]='320'></igx-combo>\n     * ```\n    */\n    @Input()\n    public get itemsMaxHeight(): number {\n        if (this._itemsMaxHeight === null || this._itemsMaxHeight === undefined) {\n            return this.itemHeight * itemsInContainer;\n        }\n        return this._itemsMaxHeight;\n    }\n\n    public set itemsMaxHeight(val: number) {\n        this._itemsMaxHeight = val;\n    }\n\n    /**\n     * Configures the drop down list width\n     *\n     * ```typescript\n     * // get\n     * let myComboItemsWidth = this.combo.itemsWidth;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [itemsWidth] = '\"180px\"'></igx-combo>\n     * ```\n     */\n    @Input()\n    public itemsWidth: string;\n\n    /**\n     * Configures the drop down list item height\n     *\n     * ```typescript\n     * // get\n     * let myComboItemHeight = this.combo.itemHeight;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [itemHeight]='32'></igx-combo>\n     * ```\n     */\n    @Input()\n    public get itemHeight(): number {\n        if (this._itemHeight === null || this._itemHeight === undefined) {\n            return ItemHeights[this.displayDensity];\n        }\n        return this._itemHeight;\n    }\n\n    public set itemHeight(val: number) {\n        this._itemHeight = val;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public filteringLogic = FilteringLogic.Or;\n\n    /**\n     * Defines the placeholder value for the combo value field\n     *\n     * ```typescript\n     * // get\n     * let myComboPlaceholder = this.combo.placeholder;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [placeholder]='newPlaceHolder'></igx-combo>\n     * ```\n     */\n    @Input()\n    public placeholder;\n\n    /**\n     * @hidden @internal\n     */\n    public get inputEmpty(): boolean {\n        return !this.value && !this.placeholder;\n    }\n\n    /**\n     * Defines the placeholder value for the combo dropdown search field\n     *\n     * ```typescript\n     * // get\n     * let myComboSearchPlaceholder = this.combo.searchPlaceholder;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [searchPlaceholder]='newPlaceHolder'></igx-combo>\n     * ```\n     */\n    @Input()\n    public searchPlaceholder = 'Enter a Search Term';\n\n    /**\n     * Combo data source.\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [data]='items'></igx-combo>\n     * ```\n     */\n    @Input()\n    get data(): any[] {\n        return this._data;\n    }\n    set data(val: any[]) {\n        this._data = (val) ? val : [];\n    }\n\n    /**\n     * Combo value data source property.\n     *\n     * ```typescript\n     * // get\n     * let myComboValueKey = this.combo.valueKey;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [valueKey]='myKey'></igx-combo>\n     * ```\n     */\n    @Input()\n    public valueKey: string = null;\n\n    @Input()\n    set displayKey(val: string) {\n        this._displayKey = val;\n    }\n\n    /**\n     * Combo text data source property.\n     *\n     * ```typescript\n     * // get\n     * let myComboDisplayKey = this.combo.displayKey;\n     *\n     * // set\n     * this.combo.displayKey = 'val';\n     *\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [displayKey]='myDisplayKey'></igx-combo>\n     * ```\n     */\n    get displayKey() {\n        return this._displayKey ? this._displayKey : this.valueKey;\n    }\n\n    /**\n     * The item property by which items should be grouped inside the items list. Not usable if data is not of type Object[].\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [groupKey]='newGroupKey'></igx-combo>\n     * ```\n     */\n    @Input()\n    public set groupKey(val: string) {\n        this._groupKey = val;\n    }\n\n    /**\n     * The item property by which items should be grouped inside the items list. Not usable if data is not of type Object[].\n     *\n     * ```typescript\n     * // get\n     * let currentGroupKey = this.combo.groupKey;\n     * ```\n     */\n    public get groupKey(): string {\n        return this._groupKey;\n    }\n\n    /**\n     * An @Input property that enabled/disables filtering in the list. The default is `true`.\n     * ```html\n     *<igx-combo [filterable]=\"false\">\n     * ```\n     */\n    @Input()\n    public filterable = true;\n\n    /**\n     * An @Input property that set aria-labelledby attribute\n     * ```html\n     *<igx-combo [ariaLabelledBy]=\"'label1'\">\n     * ```\n     */\n    @Input()\n    @HostBinding('attr.aria-labelledby')\n    public ariaLabelledBy: string;\n\n    /**\n     * An @Input property that enabled/disables combo. The default is `false`.\n     * ```html\n     *<igx-combo [disabled]=\"'true'\">\n     * ```\n     */\n    @Input()\n    public disabled = false;\n\n    /**\n     * An @Input property that sets how the combo will be styled.\n     * The allowed values are `line`, `box`, `border` and `search`. The default is `box`.\n     * ```html\n     *<igx-combo [type]=\"'line'\">\n     * ```\n     */\n    @Input()\n    public type = 'box';\n\n    /**\n     * Gets if control is valid, when used in a form\n     *\n     * ```typescript\n     * // get\n     * let valid = this.combo.valid;\n     * ```\n     * */\n    public get valid(): IgxComboState {\n        return this._valid;\n    }\n\n    /**\n    * Sets if control is valid, when used in a form\n    *\n    * ```typescript\n    * // set\n    * this.combo.valid = IgxComboState.INVALID;\n    * ```\n   */\n    public set valid(valid: IgxComboState) {\n        this._valid = valid;\n        this.comboInput.valid = IgxInputState[IgxComboState[valid]];\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public searchValue = '';\n\n    /**\n     * @hidden @internal\n     */\n    @HostListener('keydown.ArrowDown', ['$event'])\n    @HostListener('keydown.Alt.ArrowDown', ['$event'])\n    onArrowDown(event: Event) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.open();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    onInputClick(event: Event) {\n        event.stopPropagation();\n        event.preventDefault();\n        this.toggle();\n    }\n\n    /**\n     * Defines the current state of the virtualized data. It contains `startIndex` and `chunkSize`\n     *\n     * ```typescript\n     * // get\n     * let state = this.combo.virtualizationState;\n     * ```\n    */\n    get virtualizationState(): IForOfState {\n        return this.virtDir.state;\n    }\n    /**\n     * Sets the current state of the virtualized data.\n     *\n     * ```typescript\n     * // set\n     * this.combo.virtualizationState(state);\n     * ```\n     */\n    set virtualizationState(state: IForOfState) {\n        this.virtDir.state = state;\n    }\n\n    /**\n     * Gets total count of the virtual data items, when using remote service.\n     *\n     * ```typescript\n     * // get\n     * let count = this.combo.totalItemCount;\n     * ```\n    */\n    get totalItemCount(): number {\n        return this.virtDir.totalItemCount;\n    }\n    /**\n     * Sets total count of the virtual data items, when using remote service.\n     *\n     * ```typescript\n     * // set\n     * this.combo.totalItemCount(remoteService.count);\n     * ```\n     */\n    set totalItemCount(count: number) {\n        this.virtDir.totalItemCount = count;\n    }\n\n    /**\n     * The text displayed in the combo input\n     *\n     * ```typescript\n     * // get\n     * let comboValue = this.combo.value;\n     * ```\n     */\n    get value(): string {\n        return this._value;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get filteredData(): any[] {\n        return this.filterable ? this._filteredData : this.data;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public set filteredData(val: any[]) {\n        this._filteredData = this.groupKey ? (val || []).filter((e) => e.isHeader !== true) : val;\n        this.checkMatch();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public handleKeyUp(event: KeyboardEvent): void {\n        if (event.key === 'ArrowDown' || event.key === 'Down') {\n            this.dropdown.focusedItem = this.dropdown.items[0];\n            this.dropdownContainer.nativeElement.focus();\n        } else if (event.key === 'Escape' || event.key === 'Esc') {\n            this.toggle();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public handleKeyDown(event: KeyboardEvent) {\n        if (event.key === 'ArrowUp' || event.key === 'Up') {\n            event.preventDefault();\n            event.stopPropagation();\n            this.close();\n        }\n    }\n\n    private checkMatch(): void {\n        const displayKey = this.displayKey;\n        const matchFn = (e) => {\n            const value = displayKey ? e[displayKey] : e;\n            return value.toString().toLowerCase() === this.searchValue.trim().toLowerCase();\n        };\n        const itemMatch = this.filteredData.some(matchFn);\n        this.customValueFlag = this.allowCustomValues && !itemMatch;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public handleInputChange(event?: string) {\n        if (event !== undefined) {\n            this.onSearchInput.emit(event);\n        }\n        this.checkMatch();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get dataType(): string {\n        if (this.displayKey) {\n            return DataTypes.COMPLEX;\n        }\n        return DataTypes.PRIMITIVE;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get isRemote() {\n        return this.totalItemCount > 0 &&\n            this.valueKey &&\n            this.dataType === DataTypes.COMPLEX;\n    }\n\n    /** Contains key-value pairs of the selected valueKeys and their resp. displayKeys */\n    private registerRemoteEntries(ids: any[], add = true) {\n        if (add) {\n            const selection = this.getValueDisplayPairs(ids);\n            for (const entry of selection) {\n                this._remoteSelection[entry[this.valueKey]] = entry[this.displayKey];\n            }\n        } else {\n            for (const entry of ids) {\n                delete this._remoteSelection[entry];\n            }\n        }\n    }\n\n    /** For `id: any[]` returns a mapped `{ [combo.valueKey]: any, [combo.displayKey]: any }[]`*/\n    private getValueDisplayPairs(ids: any[]) {\n        return this.data.filter(entry => ids.indexOf(entry[this.valueKey]) > -1).map(e => {\n            return {\n                [this.valueKey]: e[this.valueKey],\n                [this.displayKey]: e[this.displayKey]\n            };\n        });\n    }\n\n    /**\n     * Returns if the specified itemID is selected\n     * @hidden\n     * @internal\n     */\n    public isItemSelected(item: any): boolean {\n        return this.selection.is_item_selected(this.id, item);\n    }\n\n    /**\n     * Triggers change detection on the combo view\n     */\n    public triggerCheck() {\n        this.cdr.detectChanges();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public isAddButtonVisible(): boolean {\n        // This should always return a boolean value. If this.searchValue was '', it returns '' instead of false;\n        return this.searchValue !== '' && this.customValueFlag;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public handleSelectAll(evt) {\n        if (evt.checked) {\n            this.selectAllItems();\n        } else {\n            this.deselectAllItems();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public addItemToCollection() {\n        if (!this.searchValue) {\n            return;\n        }\n        const newValue = this.searchValue.trim();\n        const addedItem = this.displayKey ? {\n            [this.valueKey]: newValue,\n            [this.displayKey]: newValue\n        } : newValue;\n        if (this.groupKey) {\n            Object.assign(addedItem, { [this.groupKey]: this.defaultFallbackGroup });\n        }\n        const oldCollection = this.data;\n        const newCollection = [...this.data];\n        newCollection.push(addedItem);\n        const args: IComboItemAdditionEvent = {\n            oldCollection, addedItem, newCollection\n        };\n        this.onAddition.emit(args);\n        this.data.push(addedItem);\n        // If you mutate the array, no pipe is invoked and the display isn't updated;\n        // if you replace the array, the pipe executes and the display is updated.\n        this.data = cloneArray(this.data);\n        this.selectItems(this.comboAPI.valueKey !== null ? [addedItem[this.valueKey]] : [addedItem], false);\n        this.customValueFlag = false;\n        this.searchInput.nativeElement.focus();\n        this.dropdown.focusedItem = null;\n        this.virtDir.scrollTo(0);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public focusSearchInput(opening?: boolean): void {\n        if (this.displaySearchInput && this.searchInput) {\n            this.searchInput.nativeElement.focus();\n        } else {\n            if (opening) {\n                this.dropdownContainer.nativeElement.focus();\n            } else {\n                this.comboInput.nativeElement.focus();\n                this.toggle();\n            }\n        }\n    }\n\n    protected onStatusChanged = () => {\n        if ((this.ngControl.control.touched || this.ngControl.control.dirty) &&\n            (this.ngControl.control.validator || this.ngControl.control.asyncValidator)) {\n            this.valid = this.ngControl.valid ? IgxComboState.VALID : IgxComboState.INVALID;\n        }\n        this.manageRequiredAsterisk();\n    }\n\n    protected manageRequiredAsterisk(): void {\n        if (this.ngControl && this.ngControl.control.validator) {\n            // Run the validation with empty object to check if required is enabled.\n            const error = this.ngControl.control.validator({} as AbstractControl);\n            this.inputGroup.isRequired = error && error.required;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onBlur() {\n        if (this.collapsed) {\n            this._onTouchedCallback();\n            if (this.ngControl && !this.ngControl.valid) {\n                this.valid = IgxComboState.INVALID;\n            } else {\n                this.valid = IgxComboState.INITIAL;\n            }\n        }\n    }\n\n    /** @hidden @internal */\n    public onFocus() {\n        if (this.collapsed) {\n            this._onTouchedCallback();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngOnInit() {\n        this.ngControl = this._injector.get<NgControl>(NgControl, null);\n        this._overlaySettings.positionStrategy.settings.target = this.elementRef.nativeElement;\n        this.selection.set(this.id, new Set());\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngAfterViewInit() {\n        this.filteredData = [...this.data];\n\n        if (this.ngControl) {\n            this.ngControl.statusChanges.pipe(takeUntil(this.destroy$)).subscribe(this.onStatusChanged);\n            this.manageRequiredAsterisk();\n            this.cdr.detectChanges();\n        }\n        this.virtDir.onChunkPreload.pipe(takeUntil(this.destroy$)).subscribe((e) => {\n            this.onDataPreLoad.emit(e);\n        });\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngOnDestroy() {\n        this.destroy$.next();\n        this.destroy$.complete();\n        this.comboAPI.clear();\n        this.selection.clear(this.id);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public writeValue(value: any[]): void {\n        this.selectItems(value, true);\n        this.cdr.markForCheck();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public registerOnChange(fn: any): void {\n        this._onChangeCallback = fn;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public registerOnTouched(fn: any): void {\n        this._onTouchedCallback = fn;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public setDisabledState(isDisabled: boolean): void {\n        this.disabled = isDisabled;\n    }\n\n    /**\n     * @hidden\n     */\n    public getEditElement(): HTMLElement {\n        return this.comboInput.nativeElement;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get template(): TemplateRef<any> {\n        this._dataType = this.dataType;\n        if (this.itemTemplate) {\n            return this.itemTemplate;\n        }\n        if (this._dataType === DataTypes.COMPLEX) {\n            return this.complexTemplate;\n        }\n        return this.primitiveTemplate;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get context(): any {\n        return {\n            $implicit: this\n        };\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public handleClearItems(event: Event): void {\n        this.deselectAllItems(true, event);\n        if (this.collapsed) {\n            this.getEditElement().focus();\n        } else {\n            this.focusSearchInput(true);\n        }\n        event.stopPropagation();\n    }\n\n    /**\n     * A method that opens/closes the combo.\n     *\n     *```html\n     *<button (click)=\"combo.toggle()\">Toggle Combo</button>\n     *<igx-combo #combo></igx-combo>\n     *```\n     */\n    public toggle(): void {\n        const overlaySettings = Object.assign({}, this._overlaySettings, this.overlaySettings);\n        this.dropdown.toggle(overlaySettings);\n    }\n\n    /**\n     * A method that opens the combo.\n     *\n     *```html\n     *<button (click)=\"combo.open()\">Open Combo</button>\n     *<igx-combo #combo></igx-combo>\n     *```\n     */\n    public open(): void {\n        const overlaySettings = Object.assign({}, this._overlaySettings, this.overlaySettings);\n        this.dropdown.open(overlaySettings);\n    }\n\n    /**\n     * A method that closes the combo.\n     *\n     *```html\n     *<button (click)=\"combo.close()\">Close Combo</button>\n     *<igx-combo #combo></igx-combo>\n     *```\n     */\n    public close(): void {\n        this.dropdown.close();\n    }\n\n    /**\n     * Gets drop down state.\n     *\n     * ```typescript\n     * let state = this.combo.collapsed;\n     * ```\n    */\n    public get collapsed(): boolean {\n        return this.dropdown.collapsed;\n    }\n\n    /**\n     * Get current selection state\n     * @returns Array of selected items\n     * ```typescript\n     * let selectedItems = this.combo.selectedItems();\n     * ```\n     */\n    public selectedItems() {\n        const items = Array.from(this.selection.get(this.id));\n        return items;\n    }\n\n    /**\n     * Select defined items\n     * @param newItems new items to be selected\n     * @param clearCurrentSelection if true clear previous selected items\n     * ```typescript\n     * this.combo.selectItems([\"New York\", \"New Jersey\"]);\n     * ```\n     */\n    public selectItems(newItems: Array<any>, clearCurrentSelection?: boolean, event?: Event) {\n        if (newItems) {\n            const newSelection = this.selection.add_items(this.id, newItems, clearCurrentSelection);\n            this.setSelection(newSelection, event);\n        }\n    }\n\n    /**\n     * Deselect defined items\n     * @param items items to deselected\n     * ```typescript\n     * this.combo.deselectItems([\"New York\", \"New Jersey\"]);\n     * ```\n     */\n    public deselectItems(items: Array<any>, event?: Event) {\n        if (items) {\n            const newSelection = this.selection.delete_items(this.id, items);\n            this.setSelection(newSelection, event);\n        }\n    }\n\n    /**\n     * Select all (filtered) items\n     * @param ignoreFilter if set to true, selects all items, otherwise selects only the filtered ones.\n     * ```typescript\n     * this.combo.selectAllItems();\n     * ```\n     */\n    public selectAllItems(ignoreFilter?: boolean, event?: Event) {\n        const allVisible = this.selection.get_all_ids(ignoreFilter ? this.data : this.filteredData, this.valueKey);\n        const newSelection = this.selection.add_items(this.id, allVisible);\n        this.setSelection(newSelection, event);\n    }\n\n    /**\n     * Deselect all (filtered) items\n     * @param ignoreFilter if set to true, deselects all items, otherwise deselects only the filtered ones.\n     * ```typescript\n     * this.combo.deselectAllItems();\n     * ```\n     */\n    public deselectAllItems(ignoreFilter?: boolean, event?: Event): void {\n        let newSelection = this.selection.get_empty();\n        if (this.filteredData.length !== this.data.length && !ignoreFilter) {\n            newSelection = this.selection.delete_items(this.id, this.selection.get_all_ids(this.filteredData, this.valueKey));\n        }\n        this.setSelection(newSelection, event);\n    }\n\n    /**\n     * Selects/Deselects a single item\n     * @param itemID the itemID of the specific item\n     * @param select If the item should be selected (true) or deselected (false)\n     *\n     * Without specified valueKey;\n     * ```typescript\n     * this.combo.valueKey = null;\n     * const items: { field: string, region: string}[] = data;\n     * this.combo.setSelectedItem(items[0], true);\n     * ```\n     * With specified valueKey;\n     * ```typescript\n     * this.combo.valueKey = 'field';\n     * const items: { field: string, region: string}[] = data;\n     * this.combo.setSelectedItem('Connecticut', true);\n     * ```\n     */\n    public setSelectedItem(itemID: any, select = true, event?: Event): void {\n        if (itemID === null || itemID === undefined) {\n            return;\n        }\n        if (select) {\n            this.selectItems([itemID], false, event);\n        } else {\n            this.deselectItems([itemID], event);\n        }\n    }\n\n    protected setSelection(newSelection: Set<any>, event?: Event): void {\n        const removed = diffInSets(this.selection.get(this.id), newSelection);\n        const added = diffInSets(newSelection, this.selection.get(this.id));\n        const newSelectionAsArray = Array.from(newSelection);\n        const oldSelectionAsArray = Array.from(this.selection.get(this.id) || []);\n        const displayText = this.createDisplayText(newSelectionAsArray, oldSelectionAsArray);\n        const args: IComboSelectionChangeEventArgs = {\n            newSelection: newSelectionAsArray,\n            oldSelection: oldSelectionAsArray,\n            added,\n            removed,\n            event,\n            displayText,\n            cancel: false\n        };\n        this.onSelectionChange.emit(args);\n        if (!args.cancel) {\n            this.selection.select_items(this.id, args.newSelection, true);\n            if (displayText !== args.displayText) {\n                this._value = args.displayText;\n            } else {\n                this._value = this.createDisplayText(args.newSelection, args.oldSelection);\n            }\n            this._onChangeCallback(args.newSelection);\n        }\n    }\n\n    /** Returns a string that should be populated in the combo's text box */\n    private concatDisplayText(selection: any[]): string {\n        const value = this.displayKey !== null && this.displayKey !== undefined ?\n        this.convertKeysToItems(selection).map(entry => entry[this.displayKey]).join(', ') :\n        selection.join(', ');\n        return value;\n    }\n\n    /** Constructs the combo display value\n     * If remote, caches the key displayText\n     * If not, just combine the object.displayKeys\n     */\n    private createDisplayText(newSelection: any[], oldSelection: any[]) {\n        let value = '';\n        if (this.isRemote) {\n            if (newSelection.length) {\n                const removedItems = oldSelection.filter(e => newSelection.indexOf(e) < 0);\n                const addedItems = newSelection.filter(e => oldSelection.indexOf(e) < 0);\n                this.registerRemoteEntries(addedItems);\n                this.registerRemoteEntries(removedItems, false);\n                value = Object.keys(this._remoteSelection).map(e => this._remoteSelection[e]).join(', ');\n            } else {\n                // If new selection is empty, clear all items\n                this.registerRemoteEntries(oldSelection, false);\n            }\n        } else {\n            value = this.concatDisplayText(newSelection);\n        }\n        return value;\n    }\n\n    /** if there is a valueKey - map the keys to data items, else - just return the keys */\n    private convertKeysToItems(keys: any[]) {\n        if (this.comboAPI.valueKey === null) {\n            return keys;\n        }\n        // map keys vs. filter data to retain the order of the selected items\n        return keys.map(key => this.data.find(entry => entry[this.valueKey] === key)).filter(e => e !== undefined);\n    }\n    /**\n     * Event handlers\n     * @hidden\n     * @internal\n     */\n    public handleOpening(event: CancelableEventArgs) {\n        this.onOpening.emit(event);\n        if (event.cancel) {\n            return;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public handleOpened() {\n        this.triggerCheck();\n        this.focusSearchInput(true);\n        this.onOpened.emit();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public handleClosing(event) {\n        this.onClosing.emit(event);\n        if (event.cancel) {\n            return;\n        }\n        this.searchValue = '';\n        this.comboInput.nativeElement.focus();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public handleClosed() {\n        this.onClosed.emit();\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxComboComponent, IgxComboItemComponent, IgxComboGroupingPipe,\n        IgxComboFilteringPipe, IgxComboDropDownComponent, IgxComboAddItemComponent,\n        IgxComboItemDirective,\n        IgxComboEmptyDirective,\n        IgxComboHeaderItemDirective,\n        IgxComboHeaderDirective,\n        IgxComboFooterDirective,\n        IgxComboAddItemDirective,\n        IgxComboToggleIconDirective,\n        IgxComboClearIconDirective],\n    exports: [IgxComboComponent, IgxComboItemComponent, IgxComboDropDownComponent, IgxComboAddItemComponent,\n        IgxComboItemDirective,\n        IgxComboEmptyDirective,\n        IgxComboHeaderItemDirective,\n        IgxComboHeaderDirective,\n        IgxComboFooterDirective,\n        IgxComboAddItemDirective,\n        IgxComboToggleIconDirective,\n        IgxComboClearIconDirective],\n    imports: [IgxRippleModule, CommonModule, IgxInputGroupModule, FormsModule, ReactiveFormsModule,\n        IgxForOfModule, IgxToggleModule, IgxCheckboxModule, IgxDropDownModule, IgxButtonModule, IgxIconModule]\n})\nexport class IgxComboModule { }\n","import {\n    Component,\n    ChangeDetectorRef,\n    EventEmitter,\n    ElementRef,\n    HostBinding,\n    Input,\n    Output,\n    ViewChild,\n    Renderer2,\n    TemplateRef,\n    Inject,\n    Optional\n} from '@angular/core';\nimport { IDisplayDensityOptions, DisplayDensityToken, DisplayDensityBase } from '../core/displayDensity';\nimport {\n    IgxDragDirective,\n    IDragBaseEventArgs,\n    IDragStartEventArgs,\n    IDropBaseEventArgs,\n    IDropDroppedEventArgs\n} from '../directives/drag-drop/drag-drop.directive';\nimport { IBaseEventArgs } from '../core/utils';\nimport { fromEvent } from 'rxjs';\nimport { take, filter } from 'rxjs/operators';\n\n\nexport interface IBaseChipEventArgs extends IBaseEventArgs {\n    originalEvent: IDragBaseEventArgs | IDropBaseEventArgs | KeyboardEvent | MouseEvent | TouchEvent;\n    owner: IgxChipComponent;\n}\n\nexport interface IChipClickEventArgs extends IBaseChipEventArgs {\n    cancel: boolean;\n}\n\nexport interface IChipKeyDownEventArgs extends IBaseChipEventArgs {\n    originalEvent: KeyboardEvent;\n    cancel: boolean;\n}\n\nexport interface IChipEnterDragAreaEventArgs extends IBaseChipEventArgs {\n    dragChip: IgxChipComponent;\n}\n\nexport interface IChipSelectEventArgs extends IBaseChipEventArgs {\n    cancel: boolean;\n    selected: boolean;\n}\n\nlet CHIP_ID = 0;\n\n/**\n * Chip is compact visual component that displays information in an obround.\n *\n * @igxModule IgxChipsModule\n *\n * @igxTheme igx-chip-theme\n *\n * @igxKeywords chip\n *\n * @igxGroup display\n *\n * @remarks\n * The Ignite UI Chip can be templated, deleted, and selected.\n * Multiple chips can be reordered and visually connected to each other.\n * Chips reside in a container called chips area which is responsible for managing the interactions between the chips.\n *\n * @example\n * ```html\n * <igx-chip class=\"chipStyle\" [id]=\"901\" [draggable]=\"true\" [removable]=\"true\" (onRemove)=\"chipRemoved($event)\">\n *    <igx-avatar class=\"chip-avatar-resized\" igxPrefix fontSet=\"material\" roundShape=\"true\"></igx-avatar>\n * </igx-chip>\n * ```\n */\n@Component({\n    selector: 'igx-chip',\n    templateUrl: 'chip.component.html'\n})\nexport class IgxChipComponent extends DisplayDensityBase {\n\n    /**\n     * An @Input property that sets the value of `id` attribute. If not provided it will be automatically generated.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"'igx-chip-1'\"></igx-chip>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-chip-${CHIP_ID++}`;\n\n    /**\n     * An @Input property that stores data related to the chip.\n     * @example\n     * ```html\n     * <igx-chip [data]=\"{ value: 'Country' }\"></igx-chip>\n     * ```\n     */\n    @Input()\n    public data: any;\n\n    /**\n     * An @Input property that defines if the `IgxChipComponent` can be dragged in order to change it's position.\n     * By default it is set to false.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"'igx-chip-1'\" [draggable]=\"true\"></igx-chip>\n     * ```\n     */\n    @Input()\n    public draggable = false;\n\n        /**\n     * An @Input property that enables/disables the draggable element animation when the element is released.\n     * By default it's set to true.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"'igx-chip-1'\" [draggable]=\"true\" [animateOnRelease]=\"false\"></igx-chip>\n     * ```\n     */\n    @Input()\n    public animateOnRelease = true;\n\n    /**\n     * An @Input property that enables/disables the hiding of the base element that has been dragged.\n     * By default it's set to true.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"'igx-chip-1'\" [draggable]=\"true\" [hideBaseOnDrag]=\"false\"></igx-chip>\n     * ```\n     */\n    @Input()\n    public hideBaseOnDrag = true;\n\n    /**\n     * An @Input property that defines if the `IgxChipComponent` should render remove button and throw remove events.\n     * By default it is set to false.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"'igx-chip-1'\" [draggable]=\"true\" [removable]=\"true\"></igx-chip>\n     * ```\n     */\n    @Input()\n    public removable = false;\n\n    /**\n     * An @Input property that overrides the default icon that the chip applies to the remove button.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"chip.id\" [removable]=\"true\" [removeIcon]=\"iconTemplate\"></igx-chip>\n     * <ng-template #iconTemplate><igx-icon>delete</igx-icon></ng-template>\n     * ```\n     */\n    @Input()\n    public removeIcon: TemplateRef<any>;\n\n    /**\n     * An @Input property that defines if the `IgxChipComponent` can be selected on click or through navigation,\n     * By default it is set to false.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"chip.id\" [draggable]=\"true\" [removable]=\"true\" [selectable]=\"true\"></igx-chip>\n     * ```\n     */\n    @Input()\n    public selectable = false;\n\n    /**\n     * An @Input property that overrides the default icon that the chip applies when it is selected.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"chip.id\" [selectable]=\"true\" [selectIcon]=\"iconTemplate\"></igx-chip>\n     * <ng-template #iconTemplate><igx-icon>done_outline</igx-icon></ng-template>\n     * ```\n     */\n    @Input()\n    public selectIcon: TemplateRef<any>;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @Input()\n    public class = '';\n\n    /**\n     * An @Input property that defines if the `IgxChipComponent` is disabled. When disabled it restricts user interactions\n     * like focusing on click or tab, selection on click or Space, dragging.\n     * By default it is set to false.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"chip.id\" [disabled]=\"true\"></igx-chip>\n     * ```\n     */\n    @Input()\n    public disabled = false;\n\n    /**\n     * Sets the `IgxChipComponent` selected state.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [selectable]=\"true\" [selected]=\"true\">\n     * ```\n     *\n     * Two-way data binding:\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [selectable]=\"true\" [(selected)]=\"model.isSelected\">\n     * ```\n     */\n    @Input()\n    public set selected(newValue: boolean) {\n        this.changeSelection(newValue);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @Output()\n    public selectedChange = new EventEmitter<boolean>();\n\n    /**\n     * Returns if the `IgxChipComponent` is selected.\n     * @example\n     * ```typescript\n     * @ViewChild('myChip')\n     * public chip: IgxChipComponent;\n     * selectedChip(){\n     *     let selectedChip = this.chip.selected;\n     * }\n     * ```\n     */\n    public get selected() {\n        return this._selected;\n    }\n\n    /**\n     * An @Input property that sets the `IgxChipComponent` background color.\n     * The `color` property supports string, rgb, hex.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [color]=\"'#ff0000'\"></igx-chip>\n     * ```\n     */\n    @Input()\n    public set color(newColor) {\n        this.chipArea.nativeElement.style.backgroundColor = newColor;\n    }\n\n    /**\n     * Returns the background color of the `IgxChipComponent`.\n     * @example\n     * ```typescript\n     * @ViewChild('myChip')\n     * public chip: IgxChipComponent;\n     * ngAfterViewInit(){\n     *     let chipColor = this.chip.color;\n     * }\n     * ```\n     */\n    public get color() {\n        return this.chipArea.nativeElement.style.backgroundColor;\n    }\n\n    /**\n     * Emits an event when the `IgxChipComponent` moving starts.\n     * Returns the moving `IgxChipComponent`.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [draggable]=\"true\" (onMoveStart)=\"moveStarted($event)\">\n     * ```\n     */\n    @Output()\n    public onMoveStart = new EventEmitter<IBaseChipEventArgs>();\n\n    /**\n     * Emits an event when the `IgxChipComponent` moving ends.\n     * Returns the moved `IgxChipComponent`.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [draggable]=\"true\" (onMoveEnd)=\"moveEnded($event)\">\n     * ```\n     */\n    @Output()\n    public onMoveEnd = new EventEmitter<IBaseChipEventArgs>();\n\n    /**\n     * Emits an event when the `IgxChipComponent` is removed.\n     * Returns the removed `IgxChipComponent`.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [draggable]=\"true\" (onRemove)=\"remove($event)\">\n     * ```\n     */\n    @Output()\n    public onRemove = new EventEmitter<IBaseChipEventArgs>();\n\n    /**\n     * Emits an event when the `IgxChipComponent` is clicked.\n     * Returns the clicked `IgxChipComponent`, whether the event should be canceled.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [draggable]=\"true\" (onClick)=\"chipClick($event)\">\n     * ```\n     */\n    @Output()\n    public onClick = new EventEmitter<IChipClickEventArgs>();\n\n    /**\n     * Emits event when the `IgxChipComponent` is selected/deselected.\n     * Returns the selected chip reference, whether the event should be canceled, what is the next selection state and\n     * when the event is triggered by interaction `originalEvent` is provided, otherwise `originalEvent` is `null`.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [selectable]=\"true\" (onSelection)=\"chipSelect($event)\">\n     * ```\n     */\n    @Output()\n    public onSelection = new EventEmitter<IChipSelectEventArgs>();\n\n    /**\n     * Emits event when the `IgxChipComponent` is selected/deselected and any related animations and transitions also end.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [selectable]=\"true\" (onSelectionDone)=\"chipSelectEnd($event)\">\n     * ```\n     */\n    @Output()\n    public onSelectionDone = new EventEmitter<IBaseChipEventArgs>();\n\n    /**\n     * Emits an event when the `IgxChipComponent` keyboard navigation is being used.\n     * Returns the focused/selected `IgxChipComponent`, whether the event should be canceled,\n     * if the `alt`, `shift` or `control` key is pressed and the pressed key name.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [draggable]=\"true\" (onKeyDown)=\"chipKeyDown($event)\">\n     * ```\n     */\n    @Output()\n    public onKeyDown = new EventEmitter<IChipKeyDownEventArgs>();\n\n    /**\n     * Emits an event when the `IgxChipComponent` has entered the `IgxChipsAreaComponent`.\n     * Returns the target `IgxChipComponent`, the drag `IgxChipComponent`, as  well as\n     * the original drop event arguments.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [draggable]=\"true\" (onDragEnter)=\"chipEnter($event)\">\n     * ```\n     */\n    @Output()\n    public onDragEnter = new EventEmitter<IChipEnterDragAreaEventArgs>();\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('attr.class')\n    get hostClass(): string {\n        const classes = [this.getComponentDensityClass('igx-chip')];\n        classes.push(this.disabled ? 'igx-chip--disabled' : '');\n        // The custom classes should be at the end.\n        classes.push(this.class);\n        return classes.join(' ');\n    }\n\n    /**\n     * Property that contains a reference to the `IgxDragDirective` the `IgxChipComponent` uses for dragging behavior.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"chip.id\" [draggable]=\"true\"></igx-chip>\n     * ```\n     * ```typescript\n     * onMoveStart(event: IBaseChipEventArgs){\n     *     let dragDirective = event.owner.dragDirective;\n     * }\n     * ```\n     */\n    @ViewChild('chipArea', { read: IgxDragDirective, static: true })\n    public dragDirective: IgxDragDirective;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChild('chipArea', { read: ElementRef, static: true })\n    public chipArea: ElementRef;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChild('selectContainer', { read: ElementRef, static: true })\n    public selectContainer: ElementRef;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChild('defaultRemoveIcon', { read: TemplateRef, static: true })\n    public defaultRemoveIcon: TemplateRef<any>;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChild('defaultSelectIcon', { read: TemplateRef, static: true })\n    public defaultSelectIcon: TemplateRef<any>;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get removeButtonTemplate() {\n        return this.removeIcon || this.defaultRemoveIcon;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get selectIconTemplate() {\n        return this.selectIcon || this.defaultSelectIcon;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get ghostClass(): string {\n        return this.getComponentDensityClass('igx-chip__ghost');\n    }\n\n    public get chipTabindex() {\n        return !this.disabled ? 0 : '';\n    }\n\n    protected _selected = false;\n    protected _selectedItemClass = 'igx-chip__item--selected';\n    protected _movedWhileRemoving = false;\n\n    constructor(public cdr: ChangeDetectorRef, public elementRef: ElementRef, private renderer: Renderer2,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n            super(_displayDensityOptions);\n        }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public selectClass(condition: boolean): object {\n        const SELECT_CLASS = 'igx-chip__select';\n\n        return {\n            [SELECT_CLASS]: condition,\n            [`${SELECT_CLASS}--hidden`]: !condition\n        };\n    }\n\n    protected changeSelection(newValue: boolean, srcEvent = null) {\n        const onSelectArgs: IChipSelectEventArgs = {\n            originalEvent: srcEvent,\n            owner: this,\n            selected: false,\n            cancel: false\n        };\n\n        fromEvent(this.selectContainer.nativeElement, 'transitionend')\n            .pipe(filter<TransitionEvent>(event => event.propertyName === 'width'), take(1))\n            .subscribe(event => this.onSelectTransitionDone(event));\n\n        if (newValue && !this._selected) {\n            onSelectArgs.selected = true;\n            this.onSelection.emit(onSelectArgs);\n\n            if (!onSelectArgs.cancel) {\n                this.renderer.addClass(this.chipArea.nativeElement, this._selectedItemClass);\n                this._selected = newValue;\n                this.selectedChange.emit(this._selected);\n            }\n        } else if (!newValue && this._selected) {\n            this.onSelection.emit(onSelectArgs);\n\n            if (!onSelectArgs.cancel) {\n                this.renderer.removeClass(this.chipArea.nativeElement, this._selectedItemClass);\n                this._selected = newValue;\n                this.selectedChange.emit(this._selected);\n            }\n        }\n    }\n\n    public onSelectTransitionDone(event) {\n        if (!!event.target.tagName) {\n            // Trigger onSelectionDone on when `width` property is changed and the target is valid element(not comment).\n            this.onSelectionDone.emit({\n                owner: this,\n                originalEvent: event\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onChipKeyDown(event: KeyboardEvent) {\n        const keyDownArgs: IChipKeyDownEventArgs = {\n            originalEvent: event,\n            owner: this,\n            cancel: false\n        };\n\n        this.onKeyDown.emit(keyDownArgs);\n        if (keyDownArgs.cancel) {\n            return;\n        }\n\n        if ((event.key === 'Delete' || event.key === 'Del') && this.removable) {\n            this.onRemove.emit({\n                originalEvent: event,\n                owner: this\n            });\n        }\n\n        if ((event.key === ' ' || event.key === 'Spacebar') && this.selectable && !this.disabled) {\n            this.changeSelection(!this.selected, event);\n        }\n\n        if (event.key !== 'Tab') {\n            event.preventDefault();\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onRemoveBtnKeyDown(event: KeyboardEvent) {\n        if (event.key === ' ' || event.key === 'Spacebar' || event.key === 'Enter') {\n            this.onRemove.emit({\n                originalEvent: event,\n                owner: this\n            });\n\n            event.preventDefault();\n            event.stopPropagation();\n        }\n    }\n\n    public onRemoveMouseDown(event: PointerEvent | MouseEvent) {\n        event.stopPropagation();\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onRemoveClick(event: MouseEvent | TouchEvent) {\n        this.onRemove.emit({\n            originalEvent: event,\n            owner: this\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onRemoveTouchMove() {\n        // We don't remove chip if user starting touch interacting on the remove button moves the chip\n        this._movedWhileRemoving = true;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onRemoveTouchEnd(event: TouchEvent) {\n        if (!this._movedWhileRemoving) {\n            this.onRemoveClick(event);\n        }\n        this._movedWhileRemoving = false;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    // -----------------------------\n    // Start chip igxDrag behavior\n    public onChipDragStart(event: IDragStartEventArgs) {\n        this.onMoveStart.emit({\n            originalEvent: event,\n            owner: this\n        });\n        event.cancel = !this.draggable || this.disabled;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onChipDragEnd() {\n        if (this.animateOnRelease) {\n            this.dragDirective.transitionToOrigin();\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onChipMoveEnd(event: IDragBaseEventArgs) {\n        // moveEnd is triggered after return animation has finished. This happen when we drag and release the chip.\n        this.onMoveEnd.emit({\n            originalEvent: event,\n            owner: this\n        });\n\n        if (this.selected) {\n            this.chipArea.nativeElement.focus();\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onChipDragClicked(event: IDragBaseEventArgs) {\n        const clickEventArgs: IChipClickEventArgs = {\n            originalEvent: event,\n            owner: this,\n            cancel: false\n        };\n        this.onClick.emit(clickEventArgs);\n\n        if (!clickEventArgs.cancel && this.selectable && !this.disabled) {\n            this.changeSelection(!this.selected, event);\n        }\n    }\n    // End chip igxDrag behavior\n\n    /**\n     * @hidden\n     * @internal\n     */\n    // -----------------------------\n    // Start chip igxDrop behavior\n    public onChipDragEnterHandler(event: IDropBaseEventArgs) {\n        if (this.dragDirective === event.drag || !event.drag.data || !event.drag.data.chip) {\n            return;\n        }\n\n        const eventArgs: IChipEnterDragAreaEventArgs = {\n            owner: this,\n            dragChip: event.drag.data.chip,\n            originalEvent: event\n        };\n        this.onDragEnter.emit(eventArgs);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onChipDrop(event: IDropDroppedEventArgs) {\n        // Cancel the default drop logic\n        event.cancel = true;\n    }\n    // End chip igxDrop behavior\n}\n","import {\n    Component,\n    ContentChildren,\n    ChangeDetectorRef,\n    EventEmitter,\n    HostBinding,\n    Input,\n    IterableDiffer,\n    IterableDiffers,\n    Output,\n    QueryList,\n    DoCheck,\n    AfterViewInit,\n    OnDestroy,\n    ElementRef\n} from '@angular/core';\nimport {\n    IgxChipComponent,\n    IChipSelectEventArgs,\n    IChipKeyDownEventArgs,\n    IChipEnterDragAreaEventArgs,\n    IBaseChipEventArgs\n} from './chip.component';\nimport { IDropBaseEventArgs, IDragBaseEventArgs } from '../directives/drag-drop/drag-drop.directive';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\n\nexport interface IBaseChipsAreaEventArgs {\n    originalEvent: IDragBaseEventArgs | IDropBaseEventArgs | KeyboardEvent | MouseEvent | TouchEvent;\n    owner: IgxChipsAreaComponent;\n}\n\nexport interface IChipsAreaReorderEventArgs extends IBaseChipsAreaEventArgs {\n    chipsArray: IgxChipComponent[];\n}\n\nexport interface IChipsAreaSelectEventArgs extends IBaseChipsAreaEventArgs {\n    newSelection: IgxChipComponent[];\n}\n\n/**\n * The chip area allows you to perform more complex scenarios with chips that require interaction,\n * like dragging, selection, navigation, etc.\n *\n * @igxModule IgxChipsModule\n *\n * @igxTheme igx-chip-theme\n *\n * @igxKeywords chip area, chip\n *\n * @igxGroup display\n *\n * @example\n * ```html\n * <igx-chips-area>\n *    <igx-chip *ngFor=\"let chip of chipList\" [id]=\"chip.id\">\n *        <span>{{chip.text}}</span>\n *    </igx-chip>\n * </igx-chips-area>\n * ```\n */\n@Component({\n    selector: 'igx-chips-area',\n    templateUrl: 'chips-area.component.html',\n})\nexport class IgxChipsAreaComponent implements DoCheck, AfterViewInit, OnDestroy {\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @Input()\n    public class = '';\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('attr.class')\n    get hostClass() {\n        const classes = ['igx-chip-area'];\n        classes.push(this.class);\n\n        return classes.join(' ');\n    }\n\n    /**\n     * An @Input property that sets the width of the `IgxChipsAreaComponent`.\n     * @example\n     * ```html\n     * <igx-chips-area #chipsArea [width]=\"'300'\" [height]=\"'10'\" (onReorder)=\"chipsOrderChanged($event)\"></igx-chips-area>\n     * ```\n     */\n    @HostBinding('style.width.px')\n    @Input()\n    public width: number;\n\n    /**\n     * An @Input property that sets the height of the `IgxChipsAreaComponent`.\n     * @example\n     * ```html\n     * <igx-chips-area #chipsArea [width]=\"'300'\" [height]=\"'10'\" (onReorder)=\"chipsOrderChanged($event)\"></igx-chips-area>\n     * ```\n     */\n    @HostBinding('style.height.px')\n    @Input()\n    public height: number;\n\n    /**\n     * Emits an event when `IgxChipComponent`s in the `IgxChipsAreaComponent` should be reordered.\n     * Returns an array of `IgxChipComponent`s.\n     * @example\n     * ```html\n     * <igx-chips-area #chipsArea [width]=\"'300'\" [height]=\"'10'\" (onReorder)=\"changedOrder($event)\"></igx-chips-area>\n     * ```\n     */\n    @Output()\n    public onReorder = new EventEmitter<IChipsAreaReorderEventArgs>();\n\n    /**\n     * Emits an event when an `IgxChipComponent` in the `IgxChipsAreaComponent` is selected/deselected.\n     * Fired after the chips area is initialized if there are initially selected chips as well.\n     * Returns an array of selected `IgxChipComponent`s and the `IgxChipAreaComponent`.\n     * @example\n     * ```html\n     * <igx-chips-area #chipsArea [width]=\"'300'\" [height]=\"'10'\" (onSelection)=\"selection($event)\"></igx-chips-area>\n     * ```\n     */\n    @Output()\n    public onSelection = new EventEmitter<IChipsAreaSelectEventArgs>();\n\n    /**\n     * Emits an event when an `IgxChipComponent` in the `IgxChipsAreaComponent` is moved.\n     * @example\n     * ```html\n     * <igx-chips-area #chipsArea [width]=\"'300'\" [height]=\"'10'\" (onMoveStart)=\"moveStart($event)\"></igx-chips-area>\n     * ```\n     */\n    @Output()\n    public onMoveStart = new EventEmitter<IBaseChipsAreaEventArgs>();\n\n    /**\n     * Emits an event after an `IgxChipComponent` in the `IgxChipsAreaComponent` is moved.\n     * @example\n     * ```html\n     * <igx-chips-area #chipsArea [width]=\"'300'\" [height]=\"'10'\" (onMoveEnd)=\"moveEnd($event)\"></igx-chips-area>\n     * ```\n     */\n    @Output()\n    public onMoveEnd = new EventEmitter<IBaseChipsAreaEventArgs>();\n\n    /**\n     * Holds the `IgxChipComponent` in the `IgxChipsAreaComponent`.\n     * @example\n     * ```typescript\n     * ngAfterViewInit(){\n     *    let chips = this.chipsArea.chipsList;\n     * }\n     * ```\n     */\n    @ContentChildren(IgxChipComponent, { descendants: true })\n    public chipsList: QueryList<IgxChipComponent>;\n\n    private modifiedChipsArray: IgxChipComponent[];\n    private _differ: IterableDiffer<IgxChipComponent> | null = null;\n    protected destroy$ = new Subject<boolean>();\n\n    constructor(public cdr: ChangeDetectorRef, public element: ElementRef,\n        private _iterableDiffers: IterableDiffers) {\n        this._differ = this._iterableDiffers.find([]).create(null);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public ngAfterViewInit() {\n        // If we have initially selected chips through their inputs, we need to get them, because we cannot listen to their events yet.\n        if (this.chipsList.length) {\n            const selectedChips = this.chipsList.filter((item: IgxChipComponent) => item.selected);\n            if (selectedChips.length) {\n                this.onSelection.emit({\n                    originalEvent: null,\n                    newSelection: selectedChips,\n                    owner: this\n                });\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public ngDoCheck(): void {\n        if (this.chipsList) {\n            const changes = this._differ.diff(this.chipsList.toArray());\n            if (changes) {\n                changes.forEachAddedItem((addedChip) => {\n                    addedChip.item.onMoveStart.pipe(takeUntil(this.destroy$)).subscribe((args) => {\n                        this.onChipMoveStart(args);\n                    });\n                    addedChip.item.onMoveEnd.pipe(takeUntil(this.destroy$)).subscribe((args) => {\n                        this.onChipMoveEnd(args);\n                    });\n                    addedChip.item.onDragEnter.pipe(takeUntil(this.destroy$)).subscribe((args) => {\n                        this.onChipDragEnter(args);\n                    });\n                    addedChip.item.onKeyDown.pipe(takeUntil(this.destroy$)).subscribe((args) => {\n                        this.onChipKeyDown(args);\n                    });\n                    if (addedChip.item.selectable) {\n                        addedChip.item.onSelection.pipe(takeUntil(this.destroy$)).subscribe((args) => {\n                            this.onChipSelectionChange(args);\n                        });\n                    }\n                });\n                this.modifiedChipsArray = this.chipsList.toArray();\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected onChipKeyDown(event: IChipKeyDownEventArgs) {\n        let orderChanged = false;\n        const chipsArray = this.chipsList.toArray();\n        const dragChipIndex = chipsArray.findIndex((el) => el === event.owner);\n        if (event.originalEvent.shiftKey === true) {\n            if (event.originalEvent.key === 'ArrowLeft' || event.originalEvent.key === 'Left') {\n                orderChanged = this.positionChipAtIndex(dragChipIndex, dragChipIndex - 1, false, event.originalEvent);\n                if (orderChanged) {\n                    setTimeout(() => {\n                        this.chipsList.toArray()[dragChipIndex - 1].chipArea.nativeElement.focus();\n                    });\n                }\n            } else if (event.originalEvent.key === 'ArrowRight' || event.originalEvent.key === 'Right') {\n                orderChanged = this.positionChipAtIndex(dragChipIndex, dragChipIndex + 1, true, event.originalEvent);\n            }\n        } else {\n            if ((event.originalEvent.key === 'ArrowLeft' || event.originalEvent.key === 'Left') && dragChipIndex > 0) {\n                chipsArray[dragChipIndex - 1].chipArea.nativeElement.focus();\n            } else if ((event.originalEvent.key === 'ArrowRight' || event.originalEvent.key === 'Right') &&\n                dragChipIndex < chipsArray.length - 1) {\n                chipsArray[dragChipIndex + 1].chipArea.nativeElement.focus();\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected onChipMoveStart(event: IBaseChipEventArgs) {\n        this.onMoveStart.emit({\n            originalEvent: event.originalEvent,\n            owner: this\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected onChipMoveEnd(event: IBaseChipEventArgs) {\n        this.onMoveEnd.emit({\n            originalEvent: event.originalEvent,\n            owner: this\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected onChipDragEnter(event: IChipEnterDragAreaEventArgs) {\n        const dropChipIndex = this.chipsList.toArray().findIndex((el) => el === event.owner);\n        const dragChipIndex = this.chipsList.toArray().findIndex((el) => el === event.dragChip);\n        if (dragChipIndex < dropChipIndex) {\n            // from the left to right\n            this.positionChipAtIndex(dragChipIndex, dropChipIndex, true, event.originalEvent);\n        } else {\n            // from the right to left\n            this.positionChipAtIndex(dragChipIndex, dropChipIndex, false, event.originalEvent);\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected positionChipAtIndex(chipIndex, targetIndex, shiftRestLeft, originalEvent) {\n        if (chipIndex < 0 || this.chipsList.length <= chipIndex ||\n            targetIndex < 0 || this.chipsList.length <= targetIndex) {\n            return false;\n        }\n\n        const chipsArray = this.chipsList.toArray();\n        const result: IgxChipComponent[] = [];\n        for (let i = 0; i < chipsArray.length; i++) {\n            if (shiftRestLeft) {\n                if (chipIndex <= i && i < targetIndex) {\n                    result.push(chipsArray[i + 1]);\n                } else if (i === targetIndex) {\n                    result.push(chipsArray[chipIndex]);\n                } else {\n                    result.push(chipsArray[i]);\n                }\n            } else {\n                if (targetIndex < i && i <= chipIndex) {\n                    result.push(chipsArray[i - 1]);\n                } else if (i === targetIndex) {\n                    result.push(chipsArray[chipIndex]);\n                } else {\n                    result.push(chipsArray[i]);\n                }\n            }\n        }\n        this.modifiedChipsArray = result;\n\n        const eventData: IChipsAreaReorderEventArgs = {\n            chipsArray: this.modifiedChipsArray,\n            originalEvent: originalEvent,\n            owner: this\n        };\n        this.onReorder.emit(eventData);\n        return true;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected onChipSelectionChange(event: IChipSelectEventArgs) {\n        let selectedChips = this.chipsList.filter((chip) => chip.selected);\n        if (event.selected && !selectedChips.includes(event.owner)) {\n            selectedChips.push(event.owner);\n        } else if (!event.selected && selectedChips.includes(event.owner)) {\n            selectedChips = selectedChips.filter((chip) => {\n                return chip.id !== event.owner.id;\n            });\n        }\n        this.onSelection.emit({\n            originalEvent: event.originalEvent,\n            newSelection: selectedChips,\n            owner: this\n        });\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxAvatarModule } from '../avatar/avatar.component';\nimport { IgxIconModule } from '../icon/index';\nimport { IgxChipComponent } from './chip.component';\nimport { IgxChipsAreaComponent } from './chips-area.component';\nimport { IgxDragDropModule } from '../directives/drag-drop/drag-drop.directive';\nimport { IgxPrefixModule, IgxPrefixDirective} from '../directives/prefix/prefix.directive';\nimport { IgxSuffixModule, IgxSuffixDirective } from '../directives/suffix/suffix.directive';\n\n/**\n * @hidden\n */\n@NgModule({\n  declarations: [\n    IgxChipsAreaComponent,\n    IgxChipComponent\n  ],\n  exports: [\n    IgxChipsAreaComponent,\n    IgxChipComponent,\n    IgxPrefixDirective,\n    IgxSuffixDirective\n  ],\n  imports: [\n    CommonModule,\n    IgxRippleModule,\n    IgxIconModule,\n    IgxButtonModule,\n    IgxAvatarModule,\n    IgxDragDropModule,\n    IgxPrefixModule,\n    IgxSuffixModule\n  ]\n})\nexport class IgxChipsModule { }\n","import { Directive } from '@angular/core';\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxComboHeader]'\n})\nexport class IgxComboHeaderDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxComboFooter]'\n})\nexport class IgxComboFooterDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxComboItem]'\n})\nexport class IgxComboItemDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxComboEmpty]'\n})\nexport class IgxComboEmptyDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxComboHeaderItem]'\n})\n\nexport class IgxComboHeaderItemDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxComboAddItem]'\n})\nexport class IgxComboAddItemDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxComboToggleIcon]'\n})\nexport class IgxComboToggleIconDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxComboClearIcon]'\n})\nexport class IgxComboClearIconDirective {\n}\n\n","import { IgxComboBase } from './combo.common';\nimport { Injectable } from '@angular/core';\n\n/**\n * @hidden\n */\n@Injectable()\nexport class IgxComboAPIService {\n    protected combo: IgxComboBase;\n\n    public disableTransitions = false;\n\n    public register(combo: IgxComboBase) {\n        this.combo = combo;\n    }\n\n\n    public clear(): void {\n        this.combo = null;\n    }\n\n    public get valueKey() {\n        return this.combo.valueKey !== null && this.combo.valueKey !== undefined ? this.combo.valueKey : null;\n    }\n\n    public get item_focusable(): boolean {\n        return false;\n    }\n    public get isRemote(): boolean {\n        return this.combo.isRemote;\n    }\n\n    public add_custom_item(): void {\n        if (!this.combo) {\n            return;\n        }\n        this.combo.addItemToCollection();\n    }\n\n    public get comboID(): string {\n        return this.combo.id;\n    }\n\n    public set_selected_item(itemID: any, event?: Event): void {\n        const selected = this.combo.isItemSelected(itemID);\n        if (itemID === null || itemID === undefined) {\n            return;\n        }\n        if (!selected) {\n            this.combo.selectItems([itemID], false, event);\n        } else {\n            this.combo.deselectItems([itemID], event);\n        }\n    }\n\n    public is_item_selected(itemID: any): boolean {\n        return this.combo.isItemSelected(itemID);\n    }\n}\n","import {\n    Component,\n    ElementRef,\n    HostBinding,\n    Inject,\n    Input,\n    DoCheck\n} from '@angular/core';\nimport { IgxDropDownItemComponent } from '../drop-down/drop-down-item.component';\nimport { IGX_DROPDOWN_BASE, IDropDownBase, Navigate } from '../drop-down/drop-down.common';\nimport { IgxComboAPIService } from './combo.api';\nimport { IgxSelectionAPIService } from '../core/selection';\n\n/** @hidden */\n@Component({\n    selector: 'igx-combo-item',\n    templateUrl: 'combo-item.component.html'\n})\nexport class IgxComboItemComponent extends IgxDropDownItemComponent implements DoCheck {\n\n    /**\n     * Gets the height of a list item\n     * @hidden\n     */\n    @Input()\n    @HostBinding('style.height.px')\n    public itemHeight = '';\n\n    /**\n     * @hidden\n     */\n    public get itemID() {\n        const valueKey = this.comboAPI.valueKey;\n        return valueKey !== null ? this.value[valueKey] : this.value;\n    }\n\n    /**\n     * @hidden\n     */\n    public get comboID() {\n        return this.comboAPI.comboID;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get disableTransitions() {\n        return this.comboAPI.disableTransitions;\n    }\n\n    constructor(\n        protected comboAPI: IgxComboAPIService,\n        @Inject(IGX_DROPDOWN_BASE) protected dropDown: IDropDownBase,\n        protected elementRef: ElementRef,\n        @Inject(IgxSelectionAPIService) protected selection: IgxSelectionAPIService\n    ) {\n        super(dropDown, elementRef, null, selection);\n    }\n\n    /**\n     * @hidden\n     */\n    get selected(): boolean {\n        return this.comboAPI.is_item_selected(this.itemID);\n    }\n\n    set selected(value: boolean) {\n        if (this.isHeader) {\n            return;\n        }\n        this._selected = value;\n    }\n\n    /**\n     * @hidden\n     */\n    isVisible(direction: Navigate): boolean {\n        const rect = this.element.nativeElement.getBoundingClientRect();\n        const parentDiv = this.element.nativeElement.parentElement.parentElement.getBoundingClientRect();\n        if (direction === Navigate.Down) {\n            return rect.y + rect.height <= parentDiv.y + parentDiv.height;\n        }\n        return rect.y >= parentDiv.y;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    clicked(event): void {\n        this.comboAPI.disableTransitions = false;\n        if (!this.isSelectable) { return; }\n        this.dropDown.navigateItem(this.index);\n        this.comboAPI.set_selected_item(this.itemID, event);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     * The event that is prevented is the click on the checkbox label element.\n     * That is the only visible element that a user can interact with.\n     * The click propagates to the host and the preventDefault is to stop it from\n     * switching focus to the input it's base on.\n     * The toggle happens in an internal handler in the drop-down on the next task queue cycle.\n     */\n    disableCheck(event: MouseEvent) {\n        event.preventDefault();\n    }\n\n    ngDoCheck() {\n    }\n}\n","import { ElementRef, EventEmitter, InjectionToken } from '@angular/core';\nimport { CancelableEventArgs, CancelableBrowserEventArgs } from '../core/utils';\n\nexport const IGX_COMBO_COMPONENT = new InjectionToken<IgxComboBase>('IgxComboComponentToken');\n\n/** @hidden @internal TODO: Evaluate */\nexport interface IgxComboBase {\n    id: string;\n    data: any[];\n    valueKey: string;\n    groupKey: string;\n    isRemote: boolean;\n    filteredData: any[];\n    totalItemCount: number;\n    itemsMaxHeight: number;\n    itemHeight: number;\n    searchValue: string;\n    searchInput: ElementRef<HTMLInputElement>;\n    comboInput: ElementRef<HTMLInputElement>;\n    onOpened: EventEmitter<void>;\n    onOpening: EventEmitter<CancelableEventArgs>;\n    onClosing: EventEmitter<CancelableBrowserEventArgs>;\n    onClosed: EventEmitter<void>;\n    focusSearchInput(opening?: boolean): void;\n    triggerCheck(): void;\n    addItemToCollection(): void;\n    isAddButtonVisible(): boolean;\n    handleInputChange(event?: string): void;\n    isItemSelected(itemID: any): boolean;\n    selectItems(itemIDs: any[], clearSelection?: boolean, event?: Event): void;\n    deselectItems(itemIDs: any[], event?: Event): void;\n}\n","import { IgxComboItemComponent } from './combo-item.component';\nimport { Component } from '@angular/core';\n\n/**\n * @hidden\n */\n@Component({\n    selector: 'igx-combo-add-item',\n    template: '<ng-content></ng-content>',\n    providers: [{ provide: IgxComboItemComponent, useExisting: IgxComboAddItemComponent}]\n})\nexport class IgxComboAddItemComponent extends IgxComboItemComponent {\n    get selected(): boolean {\n        return false;\n    }\n    set selected(value: boolean) {\n    }\n\n    /**\n     * @inheritdoc\n     */\n    clicked(event?) {\n        this.comboAPI.disableTransitions = false;\n        this.comboAPI.add_custom_item();\n    }\n}\n","import {\n    ChangeDetectorRef, Component, ElementRef, Inject, QueryList, OnDestroy, AfterViewInit, ContentChildren, Optional\n} from '@angular/core';\nimport { IgxComboBase, IGX_COMBO_COMPONENT } from './combo.common';\nimport { IDropDownBase, IGX_DROPDOWN_BASE } from '../drop-down/drop-down.common';\nimport { IgxDropDownComponent } from '../drop-down/drop-down.component';\nimport { DropDownActionKey } from '../drop-down/drop-down.common';\nimport { IgxComboAddItemComponent } from './combo-add-item.component';\nimport { IgxComboAPIService } from './combo.api';\nimport { IgxDropDownItemBaseDirective } from '../drop-down/drop-down-item.base';\nimport { IgxSelectionAPIService } from '../core/selection';\nimport { IgxComboItemComponent } from './combo-item.component';\nimport { DisplayDensityToken, IDisplayDensityOptions } from '../core/density';\n\n/** @hidden */\n@Component({\n    selector: 'igx-combo-drop-down',\n    templateUrl: '../drop-down/drop-down.component.html',\n    providers: [{ provide: IGX_DROPDOWN_BASE, useExisting: IgxComboDropDownComponent }]\n})\nexport class IgxComboDropDownComponent extends IgxDropDownComponent implements IDropDownBase, OnDestroy, AfterViewInit {\n    constructor(\n        protected elementRef: ElementRef,\n        protected cdr: ChangeDetectorRef,\n        protected selection: IgxSelectionAPIService,\n        @Inject(IGX_COMBO_COMPONENT) public combo: IgxComboBase,\n        protected comboAPI: IgxComboAPIService,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n        super(elementRef, cdr, selection, _displayDensityOptions);\n    }\n\n    /** @hidden @internal */\n   public get scrollContainer(): HTMLElement {\n        return this.virtDir.dc.location.nativeElement;\n    }\n\n    protected get isScrolledToLast(): boolean {\n        const scrollTop = this.virtDir.scrollPosition;\n        const scrollHeight = this.virtDir.getScroll().scrollHeight;\n        return Math.floor(scrollTop + this.virtDir.igxForContainerSize) === scrollHeight;\n    }\n\n    protected get lastVisibleIndex(): number {\n        return this.combo.totalItemCount ?\n            Math.floor(this.combo.itemsMaxHeight / this.combo.itemHeight) :\n            this.items.length - 1;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChildren(IgxComboItemComponent, { descendants: true })\n    public children: QueryList<IgxDropDownItemBaseDirective> = null;\n\n    /**\n     * @hidden @internal\n     */\n    public onFocus() {\n        this.focusedItem = this._focusedItem || this.items[0];\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onBlur(evt?) {\n        this.focusedItem = null;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onToggleOpened() {\n        this.onOpened.emit();\n    }\n\n    /**\n     * @hidden\n     */\n    public navigateFirst() {\n        this.navigateItem(this.virtDir.igxForOf.findIndex(e => !e.isHeader));\n    }\n\n    /**\n     * @hidden\n     */\n    public navigatePrev() {\n        if (this._focusedItem && this._focusedItem.index === 0 && this.virtDir.state.startIndex === 0) {\n            this.combo.focusSearchInput(false);\n        } else {\n            super.navigatePrev();\n        }\n    }\n\n\n    /**\n     * @hidden\n     */\n    public navigateNext() {\n        const lastIndex = this.combo.totalItemCount ? this.combo.totalItemCount - 1 : this.virtDir.igxForOf.length - 1;\n        if (this._focusedItem && this._focusedItem.index === lastIndex) {\n            this.focusAddItemButton();\n        } else {\n            super.navigateNext();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public selectItem(item: IgxDropDownItemBaseDirective) {\n        if (item === null || item === undefined) {\n            return;\n        }\n        this.comboAPI.set_selected_item(item.itemID);\n        this._focusedItem = item;\n    }\n\n    private focusAddItemButton() {\n        if (this.combo.isAddButtonVisible()) {\n            this.focusedItem = this.items[this.items.length - 1];\n        }\n    }\n\n    protected scrollToHiddenItem(newItem: any): void { }\n\n    protected scrollHandler = () => {\n        this.comboAPI.disableTransitions = true;\n    }\n\n    protected get sortedChildren(): IgxDropDownItemBaseDirective[] {\n        if (this.children !== undefined) {\n            return this.children.toArray()\n                .sort((a: IgxDropDownItemBaseDirective, b: IgxDropDownItemBaseDirective) => {\n                    return a.index - b.index;\n                });\n        }\n        return null;\n    }\n\n    /**\n     * Get all non-header items\n     *\n     * ```typescript\n     * let myDropDownItems = this.dropdown.items;\n     * ```\n     */\n    public get items(): IgxComboItemComponent[] {\n        const items: IgxComboItemComponent[] = [];\n        if (this.children !== undefined) {\n            const sortedChildren = this.sortedChildren as IgxComboItemComponent[];\n            for (const child of sortedChildren) {\n                if (!child.isHeader) {\n                    items.push(child);\n                }\n            }\n        }\n\n        return items;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public updateScrollPosition() {\n        this.virtDir.getScroll().scrollTop = this._scrollPosition;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onItemActionKey(key: DropDownActionKey) {\n        switch (key) {\n            case DropDownActionKey.ENTER:\n                this.handleEnter();\n                break;\n            case DropDownActionKey.SPACE:\n                this.handleSpace();\n                break;\n            case DropDownActionKey.ESCAPE:\n                this.close();\n        }\n    }\n\n    private handleEnter() {\n        if (this.isAddItemFocused()) {\n            this.combo.addItemToCollection();\n        } else {\n            this.close();\n        }\n    }\n\n    private handleSpace() {\n        if (this.isAddItemFocused()) {\n            return;\n        } else {\n            this.selectItem(this.focusedItem);\n        }\n    }\n\n    private isAddItemFocused(): boolean {\n        return this.focusedItem instanceof IgxComboAddItemComponent;\n    }\n\n    public ngAfterViewInit() {\n        this.virtDir.getScroll().addEventListener('scroll', this.scrollHandler);\n    }\n\n    /**\n     *@hidden @internal\n     */\n    public ngOnDestroy(): void {\n        this.virtDir.getScroll().removeEventListener('scroll', this.scrollHandler);\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n}\n","import { Inject, Pipe, PipeTransform} from '@angular/core';\nimport { cloneArray } from '../core/utils';\nimport { DataUtil } from '../data-operations/data-util';\nimport { SortingDirection } from '../data-operations/sorting-expression.interface';\nimport { IGX_COMBO_COMPONENT, IgxComboBase } from './combo.common';\nimport { DefaultSortingStrategy } from '../data-operations/sorting-strategy';\n\n\n/**\n * @hidden\n */\n@Pipe({\n    name: 'comboFiltering'\n})\nexport class IgxComboFilteringPipe implements PipeTransform {\n    public transform(collection: any[], searchValue: any, displayKey: any, shouldFilter: boolean) {\n        if (!collection) {\n            return [];\n        }\n        if (!searchValue || !shouldFilter) {\n            return collection;\n        } else {\n            const searchTerm = searchValue.toLowerCase().trim();\n            if (displayKey != null) {\n                return collection.filter(e => e[displayKey].toLowerCase().includes(searchTerm));\n            } else {\n                return collection.filter(e => e.toLowerCase().includes(searchTerm));\n            }\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@Pipe({\n    name: 'comboGrouping'\n})\nexport class IgxComboGroupingPipe implements PipeTransform {\n\n    constructor(@Inject(IGX_COMBO_COMPONENT) public combo: IgxComboBase) { }\n\n    public transform(collection: any[], groupKey: any, valueKey: any) {\n        this.combo.filteredData = collection;\n        if ((!groupKey && groupKey !== 0) || !collection.length) {\n            return collection;\n        }\n        const sorted = DataUtil.sort(cloneArray(collection), [{\n            fieldName: groupKey,\n            dir: SortingDirection.Asc,\n            ignoreCase: true,\n            strategy: DefaultSortingStrategy.instance()\n        }]);\n        const data = cloneArray(sorted);\n        let inserts = 0;\n        let currentHeader = null;\n        for (let i = 0; i < sorted.length; i++) {\n            let insertFlag = 0;\n            if (currentHeader !== sorted[i][groupKey]) {\n                currentHeader = sorted[i][groupKey];\n                insertFlag = 1;\n            }\n            if (insertFlag) {\n                data.splice(i + inserts, 0, {\n                    [valueKey]: currentHeader,\n                    [groupKey]: currentHeader,\n                    isHeader: true\n                });\n                inserts++;\n            }\n        }\n        return data;\n    }\n}\n","/**\n * This enumeration is used to configure whether the date/time picker has an editable input with drop down\n * or is readonly - the date/time is selected only through a dialog.\n */\nexport enum InteractionMode {\n    DropDown = 'dropdown',\n    Dialog = 'dialog'\n}\n","import { isIE } from '../core/utils';\n\n/**\n * This enum is used to keep the date validation result.\n *\n *@hidden\n */\nexport const enum DateState {\n    Valid = 'valid',\n    Invalid = 'invalid',\n}\n\n/**\n *@hidden\n */\nconst enum FormatDesc {\n    Numeric = 'numeric',\n    TwoDigits = '2-digit'\n}\n\n/**\n *@hidden\n */\nconst enum DateChars {\n    YearChar = 'y',\n    MonthChar = 'M',\n    DayChar = 'd'\n}\n\n/**\n *@hidden\n */\nconst enum DateParts {\n    Day = 'day',\n    Month = 'month',\n    Year = 'year'\n}\n\n/**\n *@hidden\n */\nexport abstract class DatePickerUtil {\n    private static readonly SHORT_DATE_MASK = 'MM/dd/yy';\n    private static readonly SEPARATOR = 'literal';\n    private static readonly NUMBER_OF_MONTHS = 12;\n    private static readonly PROMPT_CHAR = '_';\n    private static readonly DEFAULT_LOCALE = 'en';\n\n    /**\n     * This method generates date parts structure based on editor mask and locale.\n     * @param maskValue: string\n     * @param locale: string\n     * @returns array containing information about date parts - type, position, format\n     */\n    public static parseDateFormat(maskValue: string, locale: string = DatePickerUtil.DEFAULT_LOCALE): any[] {\n        let dateStruct = [];\n        if (maskValue === undefined && !isIE()) {\n            dateStruct = DatePickerUtil.getDefaultLocaleMask(locale);\n        } else {\n            const mask = (maskValue) ? maskValue : DatePickerUtil.SHORT_DATE_MASK;\n            const maskArray = Array.from(mask);\n            const monthInitPosition = mask.indexOf(DateChars.MonthChar);\n            const dayInitPosition = mask.indexOf(DateChars.DayChar);\n            const yearInitPosition = mask.indexOf(DateChars.YearChar);\n\n            if (yearInitPosition !== -1) {\n                dateStruct.push({\n                    type: DateParts.Year,\n                    initialPosition: yearInitPosition,\n                    formatType: DatePickerUtil.getYearFormatType(mask)\n                });\n            }\n\n            if (monthInitPosition !== -1) {\n                dateStruct.push({\n                    type: DateParts.Month,\n                    initialPosition: monthInitPosition,\n                    formatType: DatePickerUtil.getMonthFormatType(mask)\n                });\n            }\n\n            if (dayInitPosition !== -1) {\n                dateStruct.push({\n                    type: DateParts.Day,\n                    initialPosition: dayInitPosition,\n                    formatType: DatePickerUtil.getDayFormatType(mask)\n                });\n            }\n\n            for (let i = 0; i < maskArray.length; i++) {\n                if (!DatePickerUtil.isDateChar(maskArray[i])) {\n                    dateStruct.push({\n                        type: DatePickerUtil.SEPARATOR,\n                        initialPosition: i,\n                        value: maskArray[i]\n                    });\n                }\n            }\n\n            dateStruct.sort((a, b) => a.initialPosition - b.initialPosition);\n            DatePickerUtil.fillDatePartsPositions(dateStruct);\n        }\n        return dateStruct;\n    }\n\n    /**\n     * This method generates input mask based on date parts.\n     * @param dateStruct array\n     * @returns input mask\n     */\n    public static getInputMask(dateStruct: any[]): string {\n        const inputMask = [];\n        for (let i = 0; i < dateStruct.length; i++) {\n            if (dateStruct[i].type === DatePickerUtil.SEPARATOR) {\n                inputMask.push(dateStruct[i].value);\n            } else if (dateStruct[i].type === DateParts.Day || dateStruct[i].type === DateParts.Month) {\n                inputMask.push('00');\n            } else if (dateStruct[i].type === DateParts.Year) {\n                switch (dateStruct[i].formatType) {\n                    case FormatDesc.Numeric: {\n                        inputMask.push('0000');\n                        break;\n                    }\n                    case FormatDesc.TwoDigits: {\n                        inputMask.push('00');\n                        break;\n                    }\n                }\n            }\n        }\n        return inputMask.join('');\n    }\n\n    /**\n     * This method generates editor mask.\n     * @param dateStruct\n     * @returns editor mask\n     */\n    public static getMask(dateStruct: any[]): string {\n        const mask = [];\n        for (let i = 0; i < dateStruct.length; i++) {\n            switch (dateStruct[i].formatType) {\n                case FormatDesc.Numeric: {\n                    if (dateStruct[i].type === DateParts.Day) {\n                        mask.push('d');\n                    } else if (dateStruct[i].type === DateParts.Month) {\n                        mask.push('M');\n                    } else {\n                        mask.push('yyyy');\n                    }\n                    break;\n                }\n                case FormatDesc.TwoDigits: {\n                    if (dateStruct[i].type === DateParts.Day) {\n                        mask.push('dd');\n                    } else if (dateStruct[i].type === DateParts.Month) {\n                        mask.push('MM');\n                    } else {\n                        mask.push('yy');\n                    }\n                }\n            }\n\n            if (dateStruct[i].type === DatePickerUtil.SEPARATOR) {\n                mask.push(dateStruct[i].value);\n            }\n        }\n\n        return mask.join('');\n    }\n    /**\n     * This method parses an input string base on date parts and returns a date and its validation state.\n     * @param dateFormatParts\n     * @param prevDateValue\n     * @param inputValue\n     * @returns object containing a date and its validation state\n     */\n    public static parseDateArray(dateFormatParts: any[], prevDateValue: Date, inputValue: string): any {\n        const dayStr = DatePickerUtil.getDayValueFromInput(dateFormatParts, inputValue);\n        const monthStr = DatePickerUtil.getMonthValueFromInput(dateFormatParts, inputValue);\n        const yearStr = DatePickerUtil.getYearValueFromInput(dateFormatParts, inputValue);\n        const yearFormat = DatePickerUtil.getDateFormatPart(dateFormatParts, DateParts.Year).formatType;\n        const day = (dayStr !== '') ? parseInt(dayStr, 10) : 1;\n        const month = (monthStr !== '') ? parseInt(monthStr, 10) - 1 : 0;\n\n        let year;\n        if (yearStr === '') {\n            year = (yearFormat === FormatDesc.TwoDigits) ? '00' : '2000';\n        } else {\n            year = yearStr;\n        }\n        let yearPrefix;\n        if (prevDateValue) {\n            const originalYear = prevDateValue.getFullYear().toString();\n            if (originalYear.length === 4) {\n                yearPrefix = originalYear.substring(0, 2);\n            }\n        } else {\n            yearPrefix = '20';\n        }\n        const fullYear = (yearFormat === FormatDesc.TwoDigits) ? yearPrefix.concat(year) : year;\n\n        if ((month < 0) || (month > 11) || (month === NaN)) {\n            return { state: DateState.Invalid, value: inputValue };\n        }\n\n        if ((day < 1) || (day > DatePickerUtil.daysInMonth(fullYear, month + 1)) || (day === NaN)) {\n            return { state: DateState.Invalid, value: inputValue };\n        }\n\n        return { state: DateState.Valid, date: new Date(fullYear, month, day) };\n    }\n\n    public static maskToPromptChars(mask: string): string {\n        const result = mask.replace(/0|L/g, DatePickerUtil.PROMPT_CHAR);\n        return result;\n    }\n\n    /**\n     * This method replaces prompt chars with empty string.\n     * @param value\n     */\n    public static trimUnderlines(value: string): string {\n        const result = value.replace(/_/g, '');\n        return result;\n    }\n\n    /**\n     * This method is used for spinning date parts.\n     * @param dateFormatParts\n     * @param inputValue\n     * @param position\n     * @param delta\n     * @param isSpinLoop\n     * @return modified text input\n     */\n    public static getModifiedDateInput(dateFormatParts: any[],\n        inputValue: string,\n        position: number,\n        delta: number,\n        isSpinLoop: boolean): string {\n        const datePart = DatePickerUtil.getDatePartOnPosition(dateFormatParts, position);\n        const datePartType = datePart.type;\n        const datePartFormatType = datePart.formatType;\n        let newValue;\n\n        const datePartValue = DatePickerUtil.getDateValueFromInput(dateFormatParts, datePartType, inputValue);\n        newValue = parseInt(datePartValue, 10);\n\n        let maxValue, minValue;\n        const minMax = DatePickerUtil.getMinMaxValue(dateFormatParts, datePart, inputValue);\n        minValue = minMax.min;\n        maxValue = minMax.max;\n\n        if (isNaN(newValue)) {\n            if (minValue === 'infinite') {\n                newValue = 2000;\n            } else {\n                newValue = minValue;\n            }\n        }\n        let tempValue = newValue;\n        tempValue += delta;\n\n        // Infinite loop for full years\n        if (maxValue === 'infinite' && minValue === 'infinite') {\n            newValue = tempValue;\n        }\n\n        if (isSpinLoop) {\n            if (tempValue > maxValue) {\n                tempValue = minValue;\n            }\n            if (tempValue < minValue) {\n                tempValue = maxValue;\n            }\n            newValue = tempValue;\n        } else {\n            if (tempValue <= maxValue && tempValue >= minValue) {\n                newValue = tempValue;\n            }\n        }\n\n        const startIdx = datePart.position[0];\n        const endIdx = datePart.position[1];\n        const start = inputValue.slice(0, startIdx);\n        const end = inputValue.slice(endIdx, inputValue.length);\n        let changedPart: string;\n\n        const prefix = DatePickerUtil.getNumericFormatPrefix(datePartFormatType);\n        changedPart = (newValue < 10) ? `${prefix}${newValue}` : `${newValue}`;\n\n        return `${start}${changedPart}${end}`;\n    }\n\n    /**\n     * This method returns date input with prompt chars.\n     * @param dateFormatParts\n     * @param date\n     * @param inputValue\n     * @returns date input including prompt chars\n     */\n    public static addPromptCharsEditMode(dateFormatParts: any[], date: Date, inputValue: string): string {\n        const dateArray = Array.from(inputValue);\n        for (let i = 0; i < dateFormatParts.length; i++) {\n            if (dateFormatParts[i].formatType === FormatDesc.Numeric) {\n                if ((dateFormatParts[i].type === DateParts.Day && date.getDate() < 10)\n                    || (dateFormatParts[i].type === DateParts.Month && date.getMonth() + 1 < 10)) {\n                    dateArray.splice(dateFormatParts[i].position[0], 0, DatePickerUtil.PROMPT_CHAR);\n                    dateArray.join('');\n                }\n            }\n        }\n        return dateArray.join('');\n    }\n\n    /**\n     * This method checks if date input is done.\n     * @param dateFormatParts\n     * @param input\n     * @returns input completeness\n     */\n    public static checkForCompleteDateInput(dateFormatParts: any[], input: string): string {\n        const dayValue = DatePickerUtil.getDayValueFromInput(dateFormatParts, input);\n        const monthValue = DatePickerUtil.getMonthValueFromInput(dateFormatParts, input);\n        const yearValue = DatePickerUtil.getYearValueFromInput(dateFormatParts, input);\n        const dayStr = DatePickerUtil.getDayValueFromInput(dateFormatParts, input, false);\n        const monthStr = DatePickerUtil.getMonthValueFromInput(dateFormatParts, input, false);\n\n        if (DatePickerUtil.isFullInput(dayValue, dayStr)\n            && DatePickerUtil.isFullInput(monthValue, monthStr)\n            && DatePickerUtil.isFullYearInput(dateFormatParts, yearValue)) {\n            return 'complete';\n        } else if (dayValue === '' && monthValue === '' && yearValue === '') {\n            return 'empty';\n        } else if (dayValue === '' || monthValue === '' || yearValue === '') {\n            return 'partial';\n        }\n        return '';\n    }\n\n    private static getYearFormatType(format: string): string {\n        switch (format.match(new RegExp(DateChars.YearChar, 'g')).length) {\n            case 1: {\n                // y (2020)\n                return FormatDesc.Numeric;\n            }\n            case 4: {\n                // yyyy (2020)\n                return FormatDesc.Numeric;\n            }\n            case 2: {\n                // yy (20)\n                return FormatDesc.TwoDigits;\n            }\n        }\n    }\n\n    private static getMonthFormatType(format: string): string {\n        switch (format.match(new RegExp(DateChars.MonthChar, 'g')).length) {\n            case 1: {\n                // M (8)\n                return FormatDesc.Numeric;\n            }\n            case 2: {\n                // MM (08)\n                return FormatDesc.TwoDigits;\n            }\n        }\n    }\n\n    private static getDayFormatType(format: string): string {\n        switch (format.match(new RegExp(DateChars.DayChar, 'g')).length) {\n            case 1: {\n                // d (6)\n                return FormatDesc.Numeric;\n            }\n            case 2: {\n                // dd (06)\n                return FormatDesc.TwoDigits;\n            }\n        }\n    }\n\n    private static getDefaultLocaleMask(locale: string) {\n        const dateStruct = [];\n        const formatter = new Intl.DateTimeFormat(locale);\n        const formatToParts = formatter.formatToParts(new Date());\n        for (let i = 0; i < formatToParts.length; i++) {\n            if (formatToParts[i].type === DatePickerUtil.SEPARATOR) {\n                dateStruct.push({\n                    type: DatePickerUtil.SEPARATOR,\n                    value: formatToParts[i].value\n                });\n            } else {\n                dateStruct.push({\n                    type: formatToParts[i].type,\n                });\n            }\n        }\n        const formatterOptions = formatter.resolvedOptions();\n        for (let i = 0; i < dateStruct.length; i++) {\n            switch (dateStruct[i].type) {\n                case DateParts.Day: {\n                    dateStruct[i].formatType = formatterOptions.day;\n                    break;\n                }\n                case DateParts.Month: {\n                    dateStruct[i].formatType = formatterOptions.month;\n                    break;\n                }\n                case DateParts.Year: {\n                    dateStruct[i].formatType = formatterOptions.month;\n                    break;\n                }\n            }\n        }\n        DatePickerUtil.fillDatePartsPositions(dateStruct);\n        return dateStruct;\n    }\n\n    private static isDateChar(char: string): boolean {\n        return (char === DateChars.YearChar || char === DateChars.MonthChar || char === DateChars.DayChar);\n    }\n\n    private static getNumericFormatPrefix(formatType: string): string {\n        switch (formatType) {\n            case FormatDesc.TwoDigits: {\n                return '0';\n            }\n            case FormatDesc.Numeric: {\n                return DatePickerUtil.PROMPT_CHAR;\n            }\n        }\n    }\n\n    private static getMinMaxValue(dateFormatParts: any[], datePart, inputValue: string): any {\n        let maxValue, minValue;\n        switch (datePart.type) {\n            case DateParts.Month: {\n                minValue = 1;\n                maxValue = DatePickerUtil.NUMBER_OF_MONTHS;\n                break;\n            }\n            case DateParts.Day: {\n                minValue = 1;\n                maxValue = DatePickerUtil.daysInMonth(\n                    DatePickerUtil.getFullYearFromString(DatePickerUtil.getDateFormatPart(dateFormatParts, DateParts.Year), inputValue),\n                    parseInt(DatePickerUtil.getMonthValueFromInput(dateFormatParts, inputValue), 10));\n                break;\n            }\n            case DateParts.Year: {\n                if (datePart.formatType === FormatDesc.TwoDigits) {\n                    minValue = 0;\n                    maxValue = 99;\n                } else {\n                    // Infinite loop\n                    minValue = 'infinite';\n                    maxValue = 'infinite';\n                }\n                break;\n            }\n        }\n        return { min: minValue, max: maxValue };\n    }\n\n    private static daysInMonth(fullYear: number, month: number): number {\n        return new Date(fullYear, month, 0).getDate();\n    }\n\n    private static getDateValueFromInput(dateFormatParts: any[], type: DateParts, inputValue: string, trim: boolean = true): string {\n        const partPosition = DatePickerUtil.getDateFormatPart(dateFormatParts, type).position;\n        const result = inputValue.substring(partPosition[0], partPosition[1]);\n        return (trim) ? DatePickerUtil.trimUnderlines(result) : result;\n    }\n\n    private static getDayValueFromInput(dateFormatParts: any[], inputValue: string, trim: boolean = true): string {\n        return DatePickerUtil.getDateValueFromInput(dateFormatParts, DateParts.Day, inputValue, trim);\n    }\n\n    private static getMonthValueFromInput(dateFormatParts: any[], inputValue: string, trim: boolean = true): string {\n        return DatePickerUtil.getDateValueFromInput(dateFormatParts, DateParts.Month, inputValue, trim);\n    }\n\n    private static getYearValueFromInput(dateFormatParts: any[], inputValue: string, trim: boolean = true): string {\n        return DatePickerUtil.getDateValueFromInput(dateFormatParts, DateParts.Year, inputValue, trim);\n    }\n\n    private static getDateFormatPart(dateFormatParts: any[], type: DateParts): any {\n        const result = dateFormatParts.filter((datePart) => (datePart.type === type))[0];\n        return result;\n    }\n\n    private static isFullInput(value: any, input: string): boolean {\n        return (value !== '' && input.length === 2 && input.charAt(1) !== DatePickerUtil.PROMPT_CHAR);\n    }\n\n    private static isFullYearInput(dateFormatParts: any[], value: any): boolean {\n        switch (DatePickerUtil.getDateFormatPart(dateFormatParts, DateParts.Year).formatType) {\n            case FormatDesc.Numeric: {\n                return (value !== '' && value.length === 4);\n            }\n            case FormatDesc.TwoDigits: {\n                return (value !== '' && value.length === 2);\n            }\n            default: {\n                return false;\n            }\n        }\n    }\n\n    private static getDatePartOnPosition(dateFormatParts: any[], position: number) {\n        const result = dateFormatParts.filter((element) =>\n            element.position[0] <= position && position <= element.position[1] && element.type !== DatePickerUtil.SEPARATOR)[0];\n        return result;\n    }\n\n    private static getFullYearFromString(yearPart, inputValue): number {\n        return parseInt(inputValue.substring(yearPart.position[0], yearPart.position[1]), 10);\n    }\n\n    private static fillDatePartsPositions(dateArray: any[]): void {\n        let currentPos = 0;\n\n        for (let i = 0; i < dateArray.length; i++) {\n            // Day|Month part positions\n            if (dateArray[i].type === DateParts.Day || dateArray[i].type === DateParts.Month) {\n                // Offset 2 positions for number\n                dateArray[i].position = [currentPos, currentPos + 2];\n                currentPos += 2;\n            } else if (dateArray[i].type === DateParts.Year) {\n                // Year part positions\n                switch (dateArray[i].formatType) {\n                    case FormatDesc.Numeric: {\n                        // Offset 4 positions for full year\n                        dateArray[i].position = [currentPos, currentPos + 4];\n                        currentPos += 4;\n                        break;\n                    }\n                    case FormatDesc.TwoDigits: {\n                        // Offset 2 positions for short year\n                        dateArray[i].position = [currentPos, currentPos + 2];\n                        currentPos += 2;\n                        break;\n                    }\n                }\n            } else if (dateArray[i].type === DatePickerUtil.SEPARATOR) {\n                // Separator positions\n                dateArray[i].position = [currentPos, currentPos + 1];\n                currentPos++;\n            }\n        }\n    }\n}\n\n\n","import { PipeTransform, Pipe, Inject } from '@angular/core';\nimport { IGX_DATE_PICKER_COMPONENT, IDatePicker } from './date-picker.common';\nimport { DatePickerUtil } from './date-picker.utils';\n\n/**\n * @hidden\n */\n@Pipe({\n    name: 'displayValue'\n})\nexport class DatePickerDisplayValuePipe implements PipeTransform {\n    constructor(@Inject(IGX_DATE_PICKER_COMPONENT) private _datePicker: IDatePicker) { }\n    transform(value: any, args?: any): any {\n        if (value !== '') {\n            if (value === DatePickerUtil.maskToPromptChars(this._datePicker.inputMask)) {\n                return '';\n            }\n            this._datePicker.rawDateString = value;\n            return DatePickerUtil.trimUnderlines(value);\n        }\n        return '';\n    }\n}\n\n/**\n * @hidden\n */\n@Pipe({\n    name: 'inputValue'\n})\nexport class DatePickerInputValuePipe implements PipeTransform {\n    constructor(@Inject(IGX_DATE_PICKER_COMPONENT) private _datePicker: IDatePicker) { }\n    transform(value: any, args?: any): any {\n        if (this._datePicker.invalidDate !== '') {\n            return this._datePicker.invalidDate;\n        } else {\n            if (this._datePicker.value === null || this._datePicker.value === undefined) {\n                return DatePickerUtil.maskToPromptChars(this._datePicker.inputMask);\n            } else {\n                return DatePickerUtil.addPromptCharsEditMode(this._datePicker.dateFormatParts, this._datePicker.value, value);\n            }\n        }\n    }\n}\n","/** @hidden */\nexport const IGX_DATE_PICKER_COMPONENT = 'IgxDatePickerComponentToken';\n\n/** @hidden */\nexport interface IDatePicker {\n    value: Date;\n    mask: string;\n    inputMask: string;\n    rawDateString: string;\n    dateFormatParts: any[];\n    invalidDate: string;\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n@Directive({\n    selector: '[igxDatePickerTemplate]'\n})\n\n/**\n * IgxDatePickerTemplateDirective can be used to re-template the date-picker input-group.\n *\n * @hidden\n */\nexport class IgxDatePickerTemplateDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n\n/**\n * IgxDatePickerActionsDirective can be used to re-template the dropdown/dialog action buttons.\n */\n@Directive({\n    selector: '[igxDatePickerActions]'\n})\nexport class IgxDatePickerActionsDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n","import { Component, ViewChild, Input, Output, EventEmitter, HostListener, HostBinding } from '@angular/core';\nimport { IgxCalendarComponent } from '../calendar';\nimport { InteractionMode } from '../core/enums';\nimport { IgxDatePickerActionsDirective } from './date-picker.directives';\n\n/**\n * @hidden\n */\n@Component({\n    selector: 'igx-calendar-container',\n    styles: [':host {display: block;}'],\n    templateUrl: 'calendar-container.component.html'\n})\nexport class IgxCalendarContainerComponent {\n    @ViewChild('calendar', { static: true })\n    public calendar: IgxCalendarComponent;\n\n    @Input()\n    public mode: InteractionMode = InteractionMode.Dialog;\n\n    @Input()\n    public vertical = false;\n\n    @Input()\n    public cancelButtonLabel: string;\n\n    @Input()\n    public todayButtonLabel: string;\n\n    @Input()\n    public datePickerActions: IgxDatePickerActionsDirective;\n\n    @Output()\n    public onClose = new EventEmitter();\n\n    @Output()\n    public onTodaySelection = new EventEmitter();\n\n    @HostBinding('class.igx-date-picker')\n    public styleClass = 'igx-date-picker';\n\n    @HostBinding('class.igx-date-picker--dropdown')\n    get dropdownCSS(): boolean {\n        return this.mode === InteractionMode.DropDown;\n    }\n\n    @HostBinding('class.igx-date-picker--vertical')\n    get verticalCSS(): boolean {\n        return this.vertical && this.mode === InteractionMode.Dialog;\n    }\n\n    @HostListener('keydown.esc', ['$event'])\n    @HostListener('keydown.alt.arrowup', ['$event'])\n    public onEscape(event) {\n        event.preventDefault();\n        this.onClose.emit();\n    }\n\n    /**\n     * Returns whether the date-picker is in readonly dialog mode.\n     *\n     * @hidden\n    */\n    public get isReadonly() {\n        return this.mode === InteractionMode.Dialog;\n    }\n\n    /**\n     * Emits close event for the calendar.\n     */\n    public closeCalendar() {\n        this.onClose.emit();\n    }\n\n    /**\n    * Emits today selection event for the calendar.\n    */\n    public triggerTodaySelection() {\n        this.onTodaySelection.emit();\n    }\n}\n","import { CommonModule, formatDate } from '@angular/common';\nimport {\n    Component,\n    ContentChild,\n    EventEmitter,\n    HostBinding,\n    Input,\n    NgModule,\n    OnDestroy,\n    Output,\n    ViewChild,\n    ElementRef,\n    TemplateRef,\n    Inject,\n    ChangeDetectorRef,\n    HostListener,\n    NgModuleRef,\n    OnInit,\n    AfterViewInit,\n    Injector,\n    AfterViewChecked\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR, NgControl, AbstractControl } from '@angular/forms';\nimport {\n    IgxCalendarComponent,\n    IgxCalendarHeaderTemplateDirective,\n    IgxCalendarModule,\n    IgxCalendarSubheaderTemplateDirective,\n    WEEKDAYS,\n    isDateInRanges\n} from '../calendar/index';\nimport { IgxIconModule } from '../icon/index';\nimport { IgxInputGroupModule, IgxInputDirective, IgxInputGroupComponent, IgxInputState } from '../input-group/index';\nimport { Subject, fromEvent, animationFrameScheduler, interval, Subscription } from 'rxjs';\nimport { filter, takeUntil, throttle } from 'rxjs/operators';\nimport { IgxOverlayOutletDirective } from '../directives/toggle/toggle.directive';\nimport { IgxTextSelectionModule} from '../directives/text-selection/text-selection.directive';\nimport {\n    OverlaySettings,\n    IgxOverlayService,\n    PositionSettings,\n    AbsoluteScrollStrategy,\n    AutoPositionStrategy,\n    OverlayCancelableEventArgs\n} from '../services/index';\nimport { DateRangeDescriptor } from '../core/dates/dateRange';\nimport { EditorProvider } from '../core/edit-provider';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxMaskModule } from '../directives/mask/mask.directive';\nimport {\n    DatePickerUtil,\n    DateState\n} from './date-picker.utils';\nimport { DatePickerDisplayValuePipe, DatePickerInputValuePipe } from './date-picker.pipes';\nimport { IDatePicker } from './date-picker.common';\nimport { KEYS, CancelableBrowserEventArgs, isIE, isEqual, IBaseEventArgs } from '../core/utils';\nimport { IgxDatePickerTemplateDirective, IgxDatePickerActionsDirective } from './date-picker.directives';\nimport { IgxCalendarContainerComponent } from './calendar-container.component';\nimport { InteractionMode } from '../core/enums';\nimport { fadeIn, fadeOut } from '../animations/fade';\nimport { DeprecateProperty } from '../core/deprecateDecorators';\n\nlet NEXT_ID = 0;\n\n/**\n * This interface is used to provide information about date picker reference and its current value\n * when onDisabledDate event is fired.\n */\nexport interface IDatePickerDisabledDateEventArgs extends IBaseEventArgs {\n    datePicker: IgxDatePickerComponent;\n    currentValue: Date;\n}\n\n/**\n * This interface is used to provide information about date picker reference and its previously valid value\n * when onValidationFailed event is fired.\n */\nexport interface IDatePickerValidationFailedEventArgs extends IBaseEventArgs {\n    datePicker: IgxDatePickerComponent;\n    prevValue: Date;\n}\n\n/**\n * This interface is used to configure calendar format view options.\n */\nexport interface IFormatViews {\n    day?: boolean;\n    month?: boolean;\n    year?: boolean;\n}\n\n/**\n * This interface is used to configure calendar format options.\n */\nexport interface IFormatOptions {\n    day?: string;\n    month?: string;\n    weekday?: string;\n    year?: string;\n}\n\n/**\n * This enumeration is used to configure the date picker to operate with pre-defined format option used in Angular DatePipe.\n * 'https://angular.io/api/common/DatePipe'\n * 'shortDate': equivalent to 'M/d/yy' (6/15/15).\n * 'mediumDate': equivalent to 'MMM d, y' (Jun 15, 2015).\n * 'longDate': equivalent to 'MMMM d, y' (June 15, 2015).\n * 'fullDate': equivalent to 'EEEE, MMMM d, y' (Monday, June 15, 2015).\n */\nexport enum PredefinedFormatOptions {\n    ShortDate = 'shortDate',\n    MediumDate = 'mediumDate',\n    LongDate = 'longDate',\n    FullDate = 'fullDate'\n}\n\nconst noop = () => { };\n\n/**\n * Date Picker displays a popup calendar that lets users select a single date.\n *@igxModule IgxDatePickerModule\n *@igxTheme igx-calendar-theme, igx-icon-theme\n *@igxGroup Scheduling\n *@igxKeywords  datepicker, calendar, schedule, date\n *@example\n * ```html\n * <igx-date-picker [(ngModel)]=\"selectedDate\"></igx-date-picker>\n * ```\n */\n@Component({\n    providers:\n        [{\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: IgxDatePickerComponent,\n            multi: true\n        }],\n    // tslint:disable-next-line:component-selector\n    selector: 'igx-date-picker',\n    templateUrl: 'date-picker.component.html',\n    styles: [`\n        :host {\n            display: block;\n        }\n    `]\n})\nexport class IgxDatePickerComponent implements IDatePicker, ControlValueAccessor,\n          EditorProvider, OnInit, AfterViewInit, OnDestroy, AfterViewChecked {\n    /**\n     * Gets/Sets the `IgxDatePickerComponent` label.\n     * @remarks\n     * The default label is 'Date'.\n     * @example\n     * ```html\n     * <igx-date-picker [label]=\"Calendar\"></igx-date-picker>\n     * ```\n     */\n    @Input()\n    public label = 'Date';\n\n    /**\n     * Gets/Sets the `IgxDatePickerComponent` label visibility.\n     * @remarks\n     * By default the visibility is set to true.\n     * @example\n     * <igx-date-picker [labelVisibility]=\"false\"></igx-date-picker>\n     */\n    @Input()\n    public labelVisibility = true;\n\n    /**\n     *Gets/Sets the locales.\n     * @remarks Default locale is en.\n     * @example\n     *```html\n     *<igx-date-picker locale=\"ja-JP\" [value]=\"date\"></igx-date-picker>\n     *```\n     */\n    @Input() public locale: 'en';\n\n    /**\n     *Gets/Sets on which day the week starts.\n     @example\n     *```html\n     *<igx-date-picker [weekStart]=\"WEEKDAYS.FRIDAY\" cancelButtonLabel=\"cancel\" todayButtonLabel=\"today\"></igx-date-picker>\n     *```\n     */\n    @Input() public weekStart: WEEKDAYS | number = WEEKDAYS.SUNDAY;\n\n    /**\n     *Gets the format options of the `IgxDatePickerComponent`.\n     @example\n     *```typescript\n        let formatOptions = this.datePicker.formatOptions;\n     *```\n     */\n    @Input()\n    public get formatOptions(): IFormatOptions {\n        return this._formatOptions;\n    }\n\n    /**\n     * Gets/Sets whether the inactive dates will be hidden.\n     * @remarks\n     * Apllies to dates that are out of the current month.\n     * Default value is `false`.\n     * @example\n     * ```html\n     * <igx-date-picker [hideOutsideDays]=\"true\"></igx-date-picker>\n     * ```\n     * @example\n     * ```typescript\n     * let hideOutsideDays = this.datePicker.hideOutsideDays;\n     * ```\n     */\n    @Input()\n    public hideOutsideDays: boolean;\n\n    /**\n     * Gets/Sets the number of month views displayed.\n     * @remarks\n     * Default value is `1`.\n     * @example\n     * ```html\n     * <igx-date-picker [monthsViewNumber]=\"2\"></igx-date-picker>\n     * ```\n     * @example\n     * ```typescript\n     * let monthViewsDisplayed = this.datePicker.monthsViewNumber;\n     * ```\n     */\n    @Input()\n    public monthsViewNumber = 1;\n\n    /**\n     *Sets the format options of the `IgxDatePickerComponent`.\n     *@example\n     *```typescript\n     * this.datePicker.formatOptions = {  day: \"numeric\",  month: \"long\", weekday: \"long\", year: \"numeric\"};\n     *```\n     */\n    public set formatOptions(formatOptions: IFormatOptions) {\n        this._formatOptions = Object.assign(this._formatOptions, formatOptions);\n    }\n\n    /**\n     *Gets/Sets the date display format of the `IgxDatePickerComponent` in dropdown mode.\n     @example\n     *```typescript\n     * let format = this.datePicker.format;\n     * this.datePicker.format = 'yyyy-M-d';\n     *```\n     */\n    @Input()\n    public get format(): string {\n        return (this._format === undefined) ? PredefinedFormatOptions.ShortDate : this._format;\n    }\n    public set format(format: string) {\n        this._format = format;\n    }\n\n    /**\n     *Gets/Sets the date mask of the `IgxDatePickerComponent` when in editable dropdown mode.\n     *@example\n     *```typescript\n     *let mask = this.datePicker.mask;\n     *```\n     */\n    @Input()\n    public mask: string;\n\n    /**\n     *Gets/Sets the format views of the `IgxDatePickerComponent`.\n     *@example\n     *```typescript\n     * let formatViews = this.datePicker.formatViews;\n     *  this.datePicker.formatViews = {day:false, month: false, year:false};\n     *```\n     */\n    @Input()\n    public get formatViews(): IFormatViews {\n        return this._formatViews;\n    }\n\n    public set formatViews(formatViews: IFormatViews) {\n        this._formatViews = Object.assign(this._formatViews, formatViews);\n    }\n\n    /**\n     * Gets/Sets the disabled dates descriptors.\n     * @example\n     * ```typescript\n     * let disabledDates = this.datepicker.disabledDates;\n     * this.datePicker.disabledDates = [ {type: DateRangeType.Weekends}, ...];\n     * ```\n     */\n    @Input()\n    public get disabledDates(): DateRangeDescriptor[] {\n        return this._disabledDates;\n    }\n    public set disabledDates(value: DateRangeDescriptor[]) {\n        this._disabledDates = value;\n    }\n\n    /**\n     * Gets/Sets the special dates descriptors.\n     * @example\n     * ```typescript\n     * let specialDates = this.datepicker.specialDates;\n     * this.datePicker.specialDates = [ {type: DateRangeType.Weekends}, ... ];\n     * ```\n     */\n    @Input()\n    public get specialDates(): DateRangeDescriptor[] {\n        return this._specialDates;\n    }\n    public set specialDates(value: DateRangeDescriptor[]) {\n        this._specialDates = value;\n    }\n\n    /**\n    * Gets/Sets the modal overlay settings.\n    */\n    @Input()\n    public get modalOverlaySettings(): OverlaySettings {\n        return this._modalOverlay;\n    }\n\n    public set modalOverlaySettings(value: OverlaySettings) {\n        this._modalOverlay = value;\n    }\n\n    /**\n    * Gets/Sets the drop-down overlay settings.\n    */\n    @Input()\n    public get dropDownOverlaySettings(): OverlaySettings {\n        return this._dropDownOverlaySettings || this._defaultDropDownOverlaySettings;\n    }\n\n    public set dropDownOverlaySettings(value: OverlaySettings) {\n        this._dropDownOverlaySettings = value;\n    }\n\n    /**\n     *Gets the formatted date when `IgxDatePickerComponent` is in dialog mode.\n     *@example\n     *```typescript\n     *let selectedDate = this.datePicker.displayData;\n     *```\n     */\n    public get displayData(): string {\n        if (this.value) {\n            return this._customFormatChecker(this.formatter, this.value);\n        }\n        return '';\n    }\n\n    /**\n     @hidden @internal\n     */\n    public get transformedDate(): string {\n        if (this._value) {\n            this._transformedDate = (this._isInEditMode) ? this._getEditorDate(this._value) : this._getDisplayDate(this._value);\n            this.isEmpty = false;\n        } else {\n            this._transformedDate = (this._isInEditMode) ? DatePickerUtil.maskToPromptChars(this.inputMask) : '';\n        }\n        return this._transformedDate;\n    }\n\n    /**\n     @hidden @internal\n     */\n    public set transformedDate(value) {\n        this._transformedDate = value;\n    }\n\n    constructor(@Inject(\n        IgxOverlayService) private _overlayService: IgxOverlayService,\n        public element: ElementRef,\n        private _cdr: ChangeDetectorRef,\n        private _moduleRef: NgModuleRef<any>,\n        private _injector: Injector) { }\n\n    /**\n     * Gets the input group template.\n     * @example\n     * ```typescript\n     * let template = this.template();\n     * ```\n     */\n    get template(): TemplateRef<any> {\n        if (this.datePickerTemplateDirective) {\n            return this.datePickerTemplateDirective.template;\n        }\n        return (this.mode === InteractionMode.Dialog) ? this.readOnlyDatePickerTemplate : this.editableDatePickerTemplate;\n    }\n\n    /**\n     * Gets the context passed to the input group template.\n     */\n    get context() {\n        return {\n            disabled: this.disabled,\n            disabledDates: this.disabledDates,\n            displayData: this.displayData,\n            format: this.format,\n            isSpinLoop: this.isSpinLoop,\n            label: this.label,\n            labelVisibility: this.labelVisibility,\n            locale: this.locale,\n            mask: this.mask,\n            mode: this.mode,\n            specialDates: this.specialDates,\n            value: this.value,\n            openDialog: (target?: HTMLElement) => this.openDialog(target)\n        };\n    }\n\n    private get required(): boolean {\n        if (this._ngControl && this._ngControl.control && this._ngControl.control.validator) {\n            // Run the validation with empty object to check if required is enabled.\n            const error = this._ngControl.control.validator({} as AbstractControl);\n            return error && error.required;\n        }\n\n        return false;\n    }\n\n\n    /**\n     *Gets/Sets the selected date.\n     *@example\n     *```html\n     *<igx-date-picker [value]=\"date\"></igx-date-picker>\n     *```\n     */\n    @Input()\n    public get value(): Date {\n        return this._value;\n    }\n\n    public set value(date: Date) {\n        this._value = date;\n        this._onChangeCallback(date);\n    }\n\n    /**\n     *Gets/Sets the value of `id` attribute.\n     *@remarks If not provided it will be automatically generated.\n     *@example\n     *```html\n     *<igx-date-picker [id]=\"'igx-date-picker-3'\" cancelButtonLabel=\"cancel\" todayButtonLabel=\"today\"></igx-date-picker>\n     *```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-date-picker-${NEXT_ID++}`;\n\n    /**\n     * Gets/Sets a custom formatter function on the selected or passed date.\n     * @example\n     *```html\n     *<igx-date-picker [value]=\"date\" [formatter]=\"formatter\"></igx-date-picker>\n     *```\n     */\n    @Input()\n    public formatter: (val: Date) => string;\n\n    /**\n     *Enables/Disables the `IgxDatePickerComponent`.\n     *@example\n     *```html\n     *<igx-date-picker [disabled]=\"'true'\" cancelButtonLabel=\"cancel\" todayButtonLabel=\"today\"></igx-date-picker>\n     * ```\n     */\n    @Input()\n    public disabled: boolean;\n\n    /**\n     *Gets/Sets the orientation of the `IgxDatePickerComponent` header.\n     *@example\n     *```html\n     *<igx-date-picker [vertical]=\"'true'\" cancelButtonLabel=\"cancel\" todayButtonLabel=\"today\"></igx-date-picker>\n     *```\n     */\n    @Input()\n    public vertical = false;\n\n    /**\n     *Gets/Sets the today button's label.\n     *@example\n     *```html\n     *<igx-date-picker cancelButtonLabel=\"cancel\" todayButtonLabel=\"Tomorrow\"></igx-date-picker>\n     *```\n     */\n    @Input()\n    public todayButtonLabel: string;\n\n    /**\n     * *Gets/Sets the cancel button's label.\n     * @example\n     *```html\n     *<igx-date-picker cancelButtonLabel=\"Close\" todayButtonLabel=\"Today\"></igx-date-picker>\n     *```\n     */\n    @Input()\n    public cancelButtonLabel: string;\n\n    /**\n     *Gets/Sets the interaction mode - dialog or drop down.\n     *@example\n     *```html\n     *<igx-date-picker mode=\"dropdown\"></igx-date-picker>\n     *```\n     */\n    @Input()\n    public mode = InteractionMode.Dialog;\n\n    /**\n     *Gets/Sets whether date should spin continuously or stop when min/max is reached.\n     *@example\n     *```html\n     *<igx-date-picker [isSpinLoop]=\"false\"></igx-date-picker>\n     *```\n     */\n    @Input()\n    public isSpinLoop = true;\n\n    /**\n     * Gets/Sets the container used for the popup element.\n     * @remarks\n     *  `outlet` is an instance of `IgxOverlayOutletDirective` or an `ElementRef`.\n     *@example\n     * ```html\n     * <div igxOverlayOutlet #outlet=\"overlay-outlet\"></div>\n     * //..\n     * <igx-date-picker [outlet]=\"outlet\"></igx-date-picker>\n     * //..\n     * ```\n     */\n    @Input()\n    public outlet: IgxOverlayOutletDirective | ElementRef;\n\n    /**\n     * @deprecated Use 'onOpened' instead.\n     *An event that is emitted when the `IgxDatePickerComponent` calendar is opened.\n     *@example\n     *```typescript\n     *public open(event){\n     *    alert(\"The date-picker calendar has been opened!\");\n     *}\n     *```\n     *```html\n     *<igx-date-picker (onOpen)=\"open($event)\" cancelButtonLabel=\"cancel\" todayButtonLabel=\"today\"></igx-date-picker>\n     *```\n     */\n    @DeprecateProperty(`'onOpen' @Output property is deprecated. Use 'onOpened' instead.`)\n    @Output()\n    public get onOpen(): EventEmitter<IgxDatePickerComponent> {\n        return this._onOpen;\n    }\n\n    public set onOpen(val: EventEmitter<IgxDatePickerComponent>) {\n        this._onOpen = val;\n    }\n\n    /**\n     *Emitted when the `IgxDatePickerComponent` calendar is opened.\n    */\n    @Output()\n    public onOpened = new EventEmitter<IgxDatePickerComponent>();\n\n    /**\n     * @deprecated Use 'onClosed' instead.\n     *\"An event that is emitted when the `IgxDatePickerComponent` is closed.\n     *@example\n     *```typescript\n     *public close(event){\n     *    alert(\"The date-picker has been closed!\");\n     *}\n     *```\n     *```html\n     *<igx-date-picker (onClose)=\"close($event)\" cancelButtonLabel=\"cancel\" todayButtonLabel=\"today\"></igx-date-picker>\n     *```\n     */\n    @DeprecateProperty(`'onClose' @Output property is deprecated. Use 'onClosed' instead.`)\n    @Output()\n    public get onClose(): EventEmitter<IgxDatePickerComponent> {\n        return this._onClose;\n    }\n\n    public set onClose(val: EventEmitter<IgxDatePickerComponent>) {\n        this._onClose = val;\n    }\n\n    /**\n     *Emitted after the `IgxDatePickerComponent` is closed.\n    */\n    @Output()\n    public onClosed = new EventEmitter<IgxDatePickerComponent>();\n\n    /**\n     *Emitted when the `IgxDatePickerComponent` is being closed.\n     */\n    @Output()\n    public onClosing = new EventEmitter<CancelableBrowserEventArgs & IBaseEventArgs>();\n\n    /**\n     *Emitted when selection is made in the calendar.\n     *@example\n     *```html\n     *<igx-date-picker (onSelection)=\"selection($event)\"></igx-date-picker>\n     *```\n     */\n    @Output()\n    public onSelection = new EventEmitter<Date>();\n\n    /**\n     *Emitted when date picker value is changed.\n     *@example\n    *```html\n    *<igx-date-picker (valueChange)=\"valueChanged($event)\" mode=\"dropdown\"></igx-date-picker>\n    *```\n    */\n    @Output()\n    public valueChange = new EventEmitter<Date>();\n\n    /**\n    *Emitted when the user types/spins to a disabled date in the date-picker editor.\n    *@example\n    *```html\n    *<igx-date-picker (onDisabledDate)=\"onDisabledDate($event)\"></igx-date-picker>\n    *```\n    */\n    @Output()\n    public onDisabledDate = new EventEmitter<IDatePickerDisabledDateEventArgs>();\n\n    /**\n    *Emitted when the user types/spins invalid date in the date-picker editor.\n    *@example\n    *```html\n    *<igx-date-picker (onValidationFailed)=\"onValidationFailed($event)\"></igx-date-picker>\n    *```\n    */\n    @Output()\n    public onValidationFailed = new EventEmitter<IDatePickerValidationFailedEventArgs>();\n\n    /*\n     * @hidden\n     */\n    @ViewChild('readOnlyDatePickerTemplate', { read: TemplateRef, static: true })\n    protected readOnlyDatePickerTemplate: TemplateRef<any>;\n\n    /*\n     * @hidden\n     */\n    @ViewChild('editableDatePickerTemplate', { read: TemplateRef, static: true })\n    protected editableDatePickerTemplate: TemplateRef<any>;\n\n    /*\n     * @hidden\n     */\n    @ViewChild(IgxInputGroupComponent)\n    protected inputGroup: IgxInputGroupComponent;\n\n    @ViewChild(IgxInputDirective, { read: ElementRef })\n    private _inputElementRef: ElementRef;\n\n    @ContentChild(IgxInputDirective, { read: ElementRef })\n    protected _inputUserTemplateElementRef: ElementRef;\n\n    @ViewChild(IgxInputDirective)\n    private _inputDirective: IgxInputDirective;\n\n    @ContentChild(IgxInputDirective)\n    private _inputDirectiveUserTemplate: IgxInputDirective;\n\n    /**\n     *@hidden\n     */\n    @ContentChild(IgxDatePickerTemplateDirective, { read: IgxDatePickerTemplateDirective })\n    protected datePickerTemplateDirective: IgxDatePickerTemplateDirective;\n\n    /**\n     *@hidden\n     */\n    @ContentChild(IgxCalendarHeaderTemplateDirective, { read: IgxCalendarHeaderTemplateDirective })\n    public headerTemplate: IgxCalendarHeaderTemplateDirective;\n\n    /**\n     *@hidden\n     */\n    @ContentChild(IgxCalendarSubheaderTemplateDirective, { read: IgxCalendarSubheaderTemplateDirective })\n    public subheaderTemplate: IgxCalendarSubheaderTemplateDirective;\n\n    /**\n     *@hidden\n     */\n    @ContentChild(IgxDatePickerActionsDirective, { read: IgxDatePickerActionsDirective })\n    public datePickerActionsDirective: IgxDatePickerActionsDirective;\n\n    /**@hidden @internal*/\n    public calendar: IgxCalendarComponent;\n    /**@hidden @internal*/\n    public hasHeader = true;\n    /**@hidden @internal*/\n    public collapsed = true;\n    /**@hidden @internal*/\n    public displayValuePipe = new DatePickerDisplayValuePipe(this);\n    /**@hidden @internal*/\n    public inputValuePipe = new DatePickerInputValuePipe(this);\n    /**@hidden @internal*/\n    public dateFormatParts = [];\n    /**@hidden @internal*/\n    public rawDateString: string;\n    /**@hidden @internal*/\n    public inputMask: string;\n    /**@hidden @internal*/\n    public isEmpty = true;\n    /**@hidden @internal*/\n    public invalidDate = '';\n\n    private readonly spinDelta = 1;\n    private readonly defaultLocale = 'en';\n\n    private _formatOptions = {\n        day: 'numeric',\n        month: 'short',\n        weekday: 'short',\n        year: 'numeric'\n    };\n    private _formatViews = {\n        day: false,\n        month: true,\n        year: false\n    };\n    private _destroy$ = new Subject<boolean>();\n    private _statusChanges$: Subscription;\n    private _componentID: string;\n    private _format: string;\n    private _value: Date;\n    private _isInEditMode: boolean;\n    private _disabledDates: DateRangeDescriptor[] = null;\n    private _specialDates: DateRangeDescriptor[] = null;\n    private _modalOverlay: OverlaySettings;\n    private _dropDownOverlaySettings: OverlaySettings;\n    private _positionSettings: PositionSettings;\n    private _defaultDropDownOverlaySettings: OverlaySettings;\n    private _modalOverlaySettings: OverlaySettings;\n    private _transformedDate;\n    private _onOpen = new EventEmitter<IgxDatePickerComponent>();\n    private _onClose = new EventEmitter<IgxDatePickerComponent>();\n    private _ngControl: NgControl = null;\n\n    //#region ControlValueAccessor\n\n    private _onChangeCallback: (_: Date) => void = noop;\n\n    private _onTouchedCallback: () => void = noop;\n\n    /** @hidden @internal */\n    public writeValue(value: Date) {\n        this._value = value;\n        // TODO: do we need next call\n        this._cdr.markForCheck();\n    }\n\n    /** @hidden @internal */\n    public registerOnChange(fn: (_: Date) => void) { this._onChangeCallback = fn; }\n\n    /** @hidden @internal */\n    public registerOnTouched(fn: () => void) { this._onTouchedCallback = fn; }\n\n    /** @hidden @internal */\n    public setDisabledState(isDisabled: boolean): void { this.disabled = isDisabled; }\n\n    //#endregion\n\n    /**\n    * @hidden\n    */\n    @HostListener('keydown.spacebar', ['$event'])\n    @HostListener('keydown.space', ['$event'])\n    public onSpaceClick(event: KeyboardEvent) {\n        this.openDialog(this.getInputGroupElement());\n        event.preventDefault();\n    }\n\n\n    /** @hidden */\n    public getEditElement() {\n        const inputDirectiveElementRef = this._inputElementRef || this._inputUserTemplateElementRef;\n        return (inputDirectiveElementRef) ? inputDirectiveElementRef.nativeElement : null;\n    }\n\n    /**\n     *@hidden @internal\n     */\n    public getInputGroupElement() {\n        return this.inputGroup ? this.inputGroup.element.nativeElement : null;\n    }\n\n    /**\n     *@hidden @internal\n     */\n    public ngOnInit(): void {\n        this._positionSettings = {\n            openAnimation: fadeIn,\n            closeAnimation: fadeOut\n        };\n\n        this._defaultDropDownOverlaySettings = {\n            closeOnOutsideClick: true,\n            modal: false,\n            scrollStrategy: new AbsoluteScrollStrategy(),\n            positionStrategy: new AutoPositionStrategy(this._positionSettings),\n            outlet: this.outlet\n        };\n\n        this._modalOverlaySettings = {\n            closeOnOutsideClick: true,\n            modal: true,\n            outlet: this.outlet\n        };\n\n        this._overlayService.onOpening.pipe(\n            filter((overlay) => overlay.id === this._componentID),\n            takeUntil(this._destroy$)).subscribe((eventArgs) => {\n                this._onOpening(eventArgs);\n            });\n\n        this._overlayService.onOpened.pipe(\n            filter((overlay) => overlay.id === this._componentID),\n            takeUntil(this._destroy$)).subscribe(() => {\n                this._onOpened();\n            });\n\n        this._overlayService.onClosed.pipe(\n            filter(overlay => overlay.id === this._componentID),\n            takeUntil(this._destroy$)).subscribe(() => {\n                this._onClosed();\n            });\n\n        this._overlayService.onClosing.pipe(\n            filter(overlay => overlay.id === this._componentID),\n            takeUntil(this._destroy$)).subscribe((event) => {\n                this.onClosing.emit(event);\n                // If canceled in a user onClosing handler\n                if (event.cancel) {\n                    return;\n                }\n                // Do not focus the input if clicking outside in dropdown mode\n                const input = this.getEditElement();\n                if (input && !(event.event && this.mode === InteractionMode.DropDown)) {\n                    input.focus();\n                } else {\n                    // outside click\n                    this._updateValidityOnBlur();\n                }\n            });\n\n        if (this.mode === InteractionMode.DropDown) {\n            this.dateFormatParts = DatePickerUtil.parseDateFormat(this.mask, this.locale);\n            if (this.mask === undefined) {\n                this.mask = DatePickerUtil.getMask(this.dateFormatParts);\n            }\n            this.inputMask = DatePickerUtil.getInputMask(this.dateFormatParts);\n        }\n\n        this._ngControl = this._injector.get<NgControl>(NgControl, null);\n    }\n\n    /**\n     *@hidden @internal\n    */\n    public ngAfterViewInit() {\n        if (this.mode === InteractionMode.DropDown && this._inputElementRef) {\n            fromEvent(this._inputElementRef.nativeElement, 'keydown').pipe(\n                throttle(() => interval(0, animationFrameScheduler)),\n                takeUntil(this._destroy$)\n            ).subscribe((res) => this.onKeyDown(res));\n        }\n\n        if (this._ngControl) {\n            this._statusChanges$ = this._ngControl.statusChanges.subscribe(this.onStatusChanged.bind(this));\n        }\n    }\n\n    public ngAfterViewChecked() {\n        // if one sets mode at run time this forces initialization of new igxInputGroup\n        // As a result a new igxInputDirective is initialized too. In ngAfterViewInit of\n        // the new directive isRequired of the igxInputGroup is set again. However\n        // ngAfterViewInit of date picker is not called again and we may finish with wrong\n        // isRequired in igxInputGroup. This is why we should set it her, only when needed\n        if (this.inputGroup && this.inputGroup.isRequired !== this.required) {\n            this.inputGroup.isRequired = this.required;\n            this._cdr.detectChanges();\n        }\n    }\n\n    protected onStatusChanged() {\n        if ((this._ngControl.control.touched || this._ngControl.control.dirty) &&\n            (this._ngControl.control.validator || this._ngControl.control.asyncValidator)) {\n            if (this.inputGroup.isFocused) {\n                this._inputDirective.valid = this._ngControl.valid ? IgxInputState.VALID : IgxInputState.INVALID;\n            } else {\n                this._inputDirective.valid = this._ngControl.valid ? IgxInputState.INITIAL : IgxInputState.INVALID;\n            }\n        }\n\n        if (this.inputGroup && this.inputGroup.isRequired !== this.required) {\n            this.inputGroup.isRequired = this.required;\n        }\n    }\n\n    /**\n     *@hidden @internal\n    */\n    public ngOnDestroy(): void {\n        if (this._componentID) {\n            this._overlayService.hide(this._componentID);\n        }\n        this._destroy$.next(true);\n        this._destroy$.complete();\n    }\n\n    /**\n     *Selects today's date from calendar.\n     *@remarks\n     *Changes the input field value, @calendar.viewDate and @calendar.value.\n     *@example\n     *```typescript\n     *this.datePicker.triggerTodaySelection();\n     *```\n     */\n    public triggerTodaySelection(): void {\n        const today = new Date(Date.now());\n        this.handleSelection(today);\n    }\n\n    /**\n     * Change the calendar selection.\n     * @remarks\n     * Calling this method will emit the @calendar.onSelection event,\n     * which will fire @handleSelection method.\n     * @example\n     *```typescript\n     *this.datePicker.selectDate(this.date);\n     * ```\n     * @param date passed date that has to be set to the calendar.\n     */\n    public selectDate(date: Date): void {\n        const oldValue =  this.value;\n        this.value = date;\n\n        this.emitValueChangeEvent(oldValue, this.value );\n        this.onSelection.emit(date);\n    }\n\n    /**\n     * Deselects the calendar date.\n     * @example\n     *```typescript\n     *this.datePicker.deselectDate();\n     * ```\n     */\n    public deselectDate(): void {\n        const oldValue =  this.value;\n        this.value = null;\n        this.emitValueChangeEvent(oldValue, this.value );\n        if (this.calendar) {\n            this.calendar.deselectDate();\n        }\n    }\n\n    /**\n     * Opens the date picker drop down or dialog.\n     * @param target HTMLElement - the target element to use for positioning the drop down container according to\n     * @example\n     * ```typescript\n     * this.datePicker.openDialog(target);\n     * ```\n     */\n    public openDialog(target?: HTMLElement): void {\n        if (!this.collapsed) {\n            return;\n        }\n        switch (this.mode) {\n            case InteractionMode.Dialog: {\n                this.hasHeader = true;\n                const modalOverlay = (this.modalOverlaySettings !== undefined) ? this._modalOverlay : this._modalOverlaySettings;\n                this._componentID = this._overlayService.attach(IgxCalendarContainerComponent, modalOverlay, this._moduleRef);\n                this._overlayService.show(this._componentID);\n                break;\n            }\n            case InteractionMode.DropDown: {\n                this.hasHeader = false;\n                if (target) {\n                    this.dropDownOverlaySettings.positionStrategy.settings.target = target;\n                }\n                this._componentID = this._overlayService.attach(IgxCalendarContainerComponent,\n                    this.dropDownOverlaySettings, this._moduleRef);\n                this._overlayService.show(this._componentID);\n                break;\n            }\n        }\n    }\n\n    public mouseDown(e) {\n        // if the click is not on the input but in input group\n        // e.g. on prefix or sufix, prevent default and this way prevent blur\n        if (e.target !== this.getEditElement()) {\n            e.preventDefault();\n        }\n    }\n\n    /**\n     * Close the calendar.\n     *\n     * @hidden @internal\n     */\n    public closeCalendar(): void {\n        this._overlayService.hide(this._componentID);\n    }\n\n    /**\n     * Clear the input field, date picker value and calendar selection.\n     *\n     * @hidden @internal\n     */\n    public clear(): void {\n        this.isEmpty = true;\n        this.invalidDate = '';\n        this.deselectDate();\n        this._setCursorPosition(0);\n    }\n\n    /**\n     * Evaluates when @calendar.onSelection event was fired\n     * and update the input value.\n     *\n     * @param event selected value from calendar.\n     *\n     * @hidden @internal\n     */\n    public handleSelection(date: Date): void {\n        if (this.value) {\n            date.setHours(this.value.getHours());\n            date.setMinutes(this.value.getMinutes());\n            date.setSeconds(this.value.getSeconds());\n            date.setMilliseconds(this.value.getMilliseconds());\n        }\n        const oldValue =  this.value;\n        this.value = date;\n\n        this.emitValueChangeEvent(oldValue, this.value );\n        this.calendar.viewDate = date;\n        this.closeCalendar();\n        this.onSelection.emit(date);\n    }\n\n    /**\n    * @hidden @internal\n    */\n    public onBlur(event): void {\n        this._isInEditMode = false;\n        if (this.mode === InteractionMode.DropDown) {\n            this.calculateDate(event.target.value, event.type);\n        }\n\n        if (this.collapsed) {\n            this._updateValidityOnBlur();\n        }\n    }\n\n    /**\n    * @hidden @internal\n    */\n    public onFocus(): void {\n        this._isInEditMode = true;\n        if (this.value && this.invalidDate === '') {\n            this._transformedDate = this._getEditorDate(this.value);\n        }\n    }\n\n    /**\n    * @hidden @internal\n    */\n    public onKeyDown(event) {\n        switch (event.key) {\n            case KEYS.UP_ARROW:\n            case KEYS.UP_ARROW_IE:\n                event.preventDefault();\n                event.stopPropagation();\n                this.spinValue(event.target.value, 1, event.type);\n                break;\n            case KEYS.DOWN_ARROW:\n            case KEYS.DOWN_ARROW_IE:\n                if (event.altKey) {\n                    this.openDialog(this.getInputGroupElement());\n                } else {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    this.spinValue(event.target.value, -1, event.type);\n                }\n                break;\n            default:\n                break;\n        }\n    }\n\n    /**\n    * @hidden @internal\n    */\n    public onWheel(event) {\n        if (this._isInEditMode) {\n            event.preventDefault();\n            event.stopPropagation();\n            const sign = (event.deltaY > 0) ? -1 : 1;\n            this.spinValue(event.target.value, sign, event.type);\n        }\n    }\n\n    /**\n    * @hidden @internal\n    */\n    public onInput(event) {\n        const targetValue = event.target.value;\n        const cursorPosition = this._getCursorPosition();\n        const checkInput = DatePickerUtil.checkForCompleteDateInput(this.dateFormatParts, targetValue);\n        this._isInEditMode = true;\n\n        if (targetValue !== DatePickerUtil.maskToPromptChars(this.inputMask)) {\n            this.isEmpty = false;\n        }\n\n        // If all date parts are completed, change the date-picker value, stay in edit mode\n        if (checkInput === 'complete' && event.inputType !== 'deleteContentBackward') {\n            this._transformedDate = targetValue;\n            this.calculateDate(targetValue, event.type);\n            this._setCursorPosition(cursorPosition);\n        } else if (checkInput === 'partial') {\n            // While editing, if one date part is deleted, date-picker value is set to null, the remaining input stays intact.\n            this.deselectDate();\n            requestAnimationFrame(() => {\n                this.getEditElement().value = targetValue;\n                this._setCursorPosition(cursorPosition);\n            });\n        } else if (checkInput === 'empty') {\n            // Total clean-up as input is deleted.\n            this.isEmpty = true;\n            this.deselectDate();\n        }\n    }\n\n    private emitValueChangeEvent(oldValue: Date, newValue: Date) {\n        if (!isEqual(oldValue, newValue)) {\n            this.valueChange.emit(newValue);\n        }\n    }\n\n    private calculateDate(dateString: string, invokedByEvent: string): void {\n        if (dateString !== '') {\n            const prevDateValue = this.value;\n            const inputValue = (invokedByEvent === 'blur') ? this.rawDateString : dateString;\n            const newDateArray = DatePickerUtil.parseDateArray(this.dateFormatParts, prevDateValue, inputValue);\n\n            if (newDateArray.state === DateState.Valid) {\n                const newValue = newDateArray.date;\n                // Restore the time part if any\n                if (prevDateValue) {\n                    newValue.setHours(prevDateValue.getHours());\n                    newValue.setMinutes(prevDateValue.getMinutes());\n                    newValue.setSeconds(prevDateValue.getSeconds());\n                    newValue.setMilliseconds(prevDateValue.getMilliseconds());\n                }\n\n                if (this.disabledDates === null\n                    || (this.disabledDates !== null && !isDateInRanges(newValue, this.disabledDates))) {\n                        const oldValue =  this.value;\n                        this.value = newValue;\n\n                        this.emitValueChangeEvent(oldValue, this.value );\n                        this.invalidDate = '';\n                } else {\n                    const args: IDatePickerDisabledDateEventArgs = {\n                        datePicker: this,\n                        currentValue: newValue,\n                    };\n                    this.onDisabledDate.emit(args);\n                }\n            } else {\n                const args: IDatePickerValidationFailedEventArgs = {\n                    datePicker: this,\n                    prevValue: prevDateValue\n                };\n                this.invalidDate = dateString;\n                this.onValidationFailed.emit(args);\n            }\n        }\n    }\n\n    private spinValue(inputValue: string, sign: number, eventType: string): void {\n        this._isInEditMode = true;\n        this.isEmpty = false;\n        const cursorPosition = this._getCursorPosition();\n\n        const modifiedInputValue =\n            DatePickerUtil.getModifiedDateInput(this.dateFormatParts, inputValue, cursorPosition, this.spinDelta * sign, this.isSpinLoop);\n\n        this.getEditElement().value = modifiedInputValue;\n        this._setCursorPosition(cursorPosition);\n\n        const checkInput = DatePickerUtil.checkForCompleteDateInput(this.dateFormatParts, modifiedInputValue);\n        if (checkInput === 'complete') {\n            this._isInEditMode = true;\n            this.calculateDate(modifiedInputValue, eventType);\n            this._setCursorPosition(cursorPosition);\n        }\n    }\n\n    private _onOpening(event: OverlayCancelableEventArgs) {\n        this._initializeCalendarContainer(event.componentRef.instance as IgxCalendarContainerComponent);\n        this.collapsed = false;\n    }\n\n    private _onOpened(): void {\n        this.onOpened.emit(this);\n\n        // TODO: remove this line after deprecating 'onOpen'\n        this._onOpen.emit(this);\n\n        if (this.calendar) {\n            this._focusCalendarDate();\n        }\n    }\n\n    private _onClosed(): void {\n        this.collapsed = true;\n        this._componentID = null;\n        this.onClosed.emit(this);\n    }\n\n    private _initializeCalendarContainer(componentInstance: IgxCalendarContainerComponent) {\n        this.calendar = componentInstance.calendar;\n        const isVertical = (this.vertical && this.mode === InteractionMode.Dialog);\n        this.calendar.hasHeader = this.hasHeader;\n        this.calendar.formatOptions = this.formatOptions;\n        this.calendar.formatViews = this.formatViews;\n        this.calendar.locale = this.locale;\n        this.calendar.vertical = isVertical;\n        this.calendar.weekStart = this.weekStart;\n        this.calendar.specialDates = this.specialDates;\n        this.calendar.disabledDates = this.disabledDates;\n        this.calendar.headerTemplate = this.headerTemplate;\n        this.calendar.subheaderTemplate = this.subheaderTemplate;\n        this.calendar.hideOutsideDays = this.hideOutsideDays;\n        this.calendar.monthsViewNumber = this.monthsViewNumber;\n        this.calendar.onSelection.pipe(takeUntil(this._destroy$)).subscribe((ev: Date) => this.handleSelection(ev));\n\n        if (this.value) {\n            this.calendar.value = this.value;\n            this.calendar.viewDate = this.value;\n        }\n\n        componentInstance.mode = this.mode;\n        componentInstance.vertical = isVertical;\n        componentInstance.cancelButtonLabel = this.cancelButtonLabel;\n        componentInstance.todayButtonLabel = this.todayButtonLabel;\n        componentInstance.datePickerActions = this.datePickerActionsDirective;\n\n        componentInstance.onClose.pipe(takeUntil(this._destroy$)).subscribe(() => this.closeCalendar());\n        componentInstance.onTodaySelection.pipe(takeUntil(this._destroy$)).subscribe(() => this.triggerTodaySelection());\n    }\n\n    // Focus a date, after the calendar appearance into DOM.\n    private _focusCalendarDate(): void {\n        requestAnimationFrame(() => {\n            this.calendar.daysView.focusActiveDate();\n        });\n    }\n\n    private _setLocaleToDate(value: Date): string {\n        if (isIE()) {\n            // this is a workaround fixing the following IE11 issue:\n            // IE11 has added character code 8206 (mark for RTL) to the output of toLocaleDateString() that\n            // precedes each portion that comprises the total date... For more information read this article:\n            // tslint:disable-next-line: max-line-length\n            // https://www.csgpro.com/blog/2016/08/a-bad-date-with-internet-explorer-11-trouble-with-new-unicode-characters-in-javascript-date-strings/\n            const localeDateStrIE = new Date(value.getFullYear(), value.getMonth(), value.getDate(),\n                value.getHours(), value.getMinutes(), value.getSeconds(), value.getMilliseconds());\n            return localeDateStrIE.toLocaleDateString(this.locale);\n        }\n\n        return value.toLocaleDateString(this.locale);\n    }\n\n    private _getCursorPosition(): number {\n        return this.getEditElement().selectionStart;\n    }\n\n    private _setCursorPosition(start: number, end: number = start): void {\n        requestAnimationFrame(() => {\n            this.getEditElement().setSelectionRange(start, end);\n        });\n    }\n\n    /**\n     * Apply custom user formatter upon date.\n     * @param formatter custom formatter function.\n     * @param date passed date\n     */\n    private _customFormatChecker(formatter: (_: Date) => string, date: Date) {\n        return this.formatter ? this.formatter(date) : this._setLocaleToDate(date);\n    }\n\n    /*\n    * Transforms the date according to the specified format when `IgxDatePickerComponent` is in edit mode\n    * using @angular/common formatDate method: https://angular.io/api/common/formatDate\n    * @param  value: string | number | Date\n    * @returns formatted string\n    */\n    private _getDisplayDate(value: any): string {\n        if (this.format && !this.formatter) {\n            const locale = this.locale || this.defaultLocale;\n            return formatDate(value, this.format, locale);\n        } else {\n            return this._customFormatChecker(this.formatter, value);\n        }\n    }\n\n    private _getEditorDate(value: any) {\n        const locale = this.locale || this.defaultLocale;\n        const changedValue = (value) ? formatDate(value, this.mask, locale) : '';\n        return DatePickerUtil.addPromptCharsEditMode(this.dateFormatParts, this.value, changedValue);\n    }\n\n    public _updateValidityOnBlur() {\n        this._onTouchedCallback();\n        const input = this._inputDirective || this._inputDirectiveUserTemplate;\n        if (input && this._ngControl && !this._ngControl.valid) {\n            input.valid = IgxInputState.INVALID;\n        } else {\n            input.valid = IgxInputState.INITIAL;\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxDatePickerComponent,\n        IgxCalendarContainerComponent,\n        IgxDatePickerActionsDirective,\n        IgxDatePickerTemplateDirective,\n        DatePickerDisplayValuePipe,\n        DatePickerInputValuePipe\n    ],\n    entryComponents: [\n        IgxCalendarContainerComponent\n    ],\n    exports: [\n        IgxDatePickerComponent,\n        IgxDatePickerTemplateDirective,\n        IgxDatePickerActionsDirective,\n        DatePickerDisplayValuePipe,\n        DatePickerInputValuePipe\n    ],\n    imports: [\n        CommonModule,\n        IgxIconModule,\n        IgxInputGroupModule,\n        IgxCalendarModule,\n        IgxButtonModule,\n        IgxRippleModule,\n        IgxMaskModule,\n        IgxTextSelectionModule\n    ]\n})\nexport class IgxDatePickerModule { }\n","import {\n    Directive, EmbeddedViewRef, Input, OnChanges, ChangeDetectorRef,\n    SimpleChange, SimpleChanges, TemplateRef, ViewContainerRef, NgModule, NgZone, Output, EventEmitter\n} from '@angular/core';\n\nimport { CommonModule } from '@angular/common';\nimport { IBaseEventArgs } from '../../core/utils';\n\n/**\n * @hidden\n */\n@Directive({ selector: '[igxTemplateOutlet]' })\nexport class IgxTemplateOutletDirective implements OnChanges {\n    private _viewRef !: EmbeddedViewRef<any>;\n\n    /**\n    * The embedded views cache. Collection is key-value paired.\n    * Key is the template id, value is the embedded view for the related template.\n    */\n    private _embeddedViewsMap: Map<string, EmbeddedViewRef<any>> = new Map();\n\n    @Input() public igxTemplateOutletContext !: Object;\n\n    @Input() public igxTemplateOutlet !: TemplateRef<any>;\n\n    @Output()\n    public onViewCreated = new EventEmitter<IViewChangeEventArgs>();\n\n    @Output()\n    public onViewMoved = new EventEmitter<IViewChangeEventArgs>();\n\n    @Output()\n    public onCachedViewLoaded = new EventEmitter<ICachedViewLoadedEventArgs>();\n\n    @Output()\n    public onBeforeViewDetach = new EventEmitter<IViewChangeEventArgs>();\n\n    constructor(public _viewContainerRef: ViewContainerRef, private _zone: NgZone, public cdr: ChangeDetectorRef) {\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        const actionType: TemplateOutletAction = this._getActionType(changes);\n        switch (actionType) {\n            case TemplateOutletAction.CreateView: this._recreateView(); break;\n            case TemplateOutletAction.MoveView: this._moveView(); break;\n            case TemplateOutletAction.UseCachedView: this._useCachedView(); break;\n            case TemplateOutletAction.UpdateViewContext: this._updateExistingContext(this.igxTemplateOutletContext); break;\n        }\n    }\n\n    public cleanCache() {\n        this._embeddedViewsMap.forEach((item) => {\n            if (!item.destroyed) {\n                item.destroy();\n            }\n        });\n        this._embeddedViewsMap.clear();\n    }\n\n    public cleanView(tmplID) {\n        const embView = this._embeddedViewsMap.get(tmplID);\n        if (embView) {\n            embView.destroy();\n            this._embeddedViewsMap.delete(tmplID);\n        }\n    }\n\n    private _recreateView() {\n        const prevIndex = this._viewRef ? this._viewContainerRef.indexOf(this._viewRef) : -1;\n        // detach old and create new\n        if (prevIndex !== -1) {\n            this.onBeforeViewDetach.emit({ owner: this, view: this._viewRef, context: this.igxTemplateOutletContext });\n            this._viewContainerRef.detach(prevIndex);\n        }\n        if (this.igxTemplateOutlet) {\n            this._viewRef = this._viewContainerRef.createEmbeddedView(\n                this.igxTemplateOutlet, this.igxTemplateOutletContext);\n            this.onViewCreated.emit({ owner: this, view: this._viewRef, context: this.igxTemplateOutletContext });\n            const tmplId = this.igxTemplateOutletContext['templateID'];\n            if (tmplId) {\n                // if context contains a template id, check if we have a view for that template already stored in the cache\n                // if not create a copy and add it to the cache in detached state.\n                // Note: Views in detached state do not appear in the DOM, however they remain stored in memory.\n                const res = this._embeddedViewsMap.get(this.igxTemplateOutletContext['templateID']);\n                if (!res) {\n                    this._embeddedViewsMap.set(this.igxTemplateOutletContext['templateID'], this._viewRef);\n                }\n            }\n        }\n    }\n\n    private _moveView() {\n        // using external view and inserting it in current view.\n        const view = this.igxTemplateOutletContext['moveView'];\n        const owner = this.igxTemplateOutletContext['owner'];\n        if (view !== this._viewRef) {\n            if (owner._viewContainerRef.indexOf(view) !== -1) {\n                // detach in case view it is attached somewhere else at the moment.\n                this.onBeforeViewDetach.emit({ owner: this, view: this._viewRef, context: this.igxTemplateOutletContext });\n                owner._viewContainerRef.detach(owner._viewContainerRef.indexOf(view));\n            }\n            if (this._viewRef && this._viewContainerRef.indexOf(this._viewRef) !== -1) {\n                this.onBeforeViewDetach.emit({ owner: this, view: this._viewRef, context: this.igxTemplateOutletContext });\n                this._viewContainerRef.detach(this._viewContainerRef.indexOf(this._viewRef));\n            }\n            this._viewRef = view;\n            this._viewContainerRef.insert(view, 0);\n            this._updateExistingContext(this.igxTemplateOutletContext);\n            this.onViewMoved.emit({ owner: this, view: this._viewRef, context: this.igxTemplateOutletContext });\n        } else {\n            this._updateExistingContext(this.igxTemplateOutletContext);\n        }\n    }\n    private _useCachedView() {\n        // use view for specific template cached in the current template outlet\n        const tmplID = this.igxTemplateOutletContext['templateID'];\n        const cachedView = tmplID ?\n            this._embeddedViewsMap.get(tmplID) :\n            null;\n        // if view exists, but template has been changed and there is a view in the cache with the related template\n        // then detach old view and insert the stored one with the matching template\n        // after that update its context.\n        if (this._viewContainerRef.length > 0) {\n            this.onBeforeViewDetach.emit({ owner: this, view: this._viewRef, context: this.igxTemplateOutletContext });\n            this._viewContainerRef.detach(this._viewContainerRef.indexOf(this._viewRef));\n        }\n\n        this._viewRef = cachedView;\n        const oldContext = this._cloneContext(cachedView.context);\n        this._viewContainerRef.insert(this._viewRef, 0);\n        this._updateExistingContext(this.igxTemplateOutletContext);\n        this.onCachedViewLoaded.emit({ owner: this, view: this._viewRef, context: this.igxTemplateOutletContext, oldContext });\n    }\n\n    private _shouldRecreateView(changes: SimpleChanges): boolean {\n        const ctxChange = changes['igxTemplateOutletContext'];\n        return !!changes['igxTemplateOutlet'] || (ctxChange && this._hasContextShapeChanged(ctxChange));\n    }\n\n    private _hasContextShapeChanged(ctxChange: SimpleChange): boolean {\n        const prevCtxKeys = Object.keys(ctxChange.previousValue || {});\n        const currCtxKeys = Object.keys(ctxChange.currentValue || {});\n\n        if (prevCtxKeys.length === currCtxKeys.length) {\n            for (const propName of currCtxKeys) {\n                if (prevCtxKeys.indexOf(propName) === -1) {\n                    return true;\n                }\n            }\n            return false;\n        } else {\n            return true;\n        }\n    }\n\n    private _updateExistingContext(ctx: Object): void {\n        for (const propName of Object.keys(ctx)) {\n            (<any>this._viewRef.context)[propName] = (<any>this.igxTemplateOutletContext)[propName];\n        }\n    }\n\n    private _cloneContext(ctx: any): any {\n        const clone = {};\n        for (const propName of Object.keys(ctx)) {\n            clone[propName] = ctx[propName];\n        }\n        return clone;\n    }\n\n    private _getActionType(changes: SimpleChanges) {\n        const movedView = this.igxTemplateOutletContext['moveView'];\n        const tmplID = this.igxTemplateOutletContext['templateID'];\n        const cachedView = tmplID ?\n            this._embeddedViewsMap.get(tmplID) :\n            null;\n        const shouldRecreate = this._shouldRecreateView(changes);\n        if (movedView) {\n            // view is moved from external source\n            return TemplateOutletAction.MoveView;\n        } else if (shouldRecreate && cachedView) {\n            // should recreate (template or context change) and there is a matching template in cache\n            return TemplateOutletAction.UseCachedView;\n        } else if (!this._viewRef || shouldRecreate) {\n            // no view or should recreate\n            return TemplateOutletAction.CreateView;\n        } else if (this.igxTemplateOutletContext) {\n            // has context, update context\n            return TemplateOutletAction.UpdateViewContext;\n        }\n    }\n}\nenum TemplateOutletAction {\n    CreateView,\n    MoveView,\n    UseCachedView,\n    UpdateViewContext\n}\n\nexport interface IViewChangeEventArgs extends IBaseEventArgs {\n    owner: IgxTemplateOutletDirective;\n    view: EmbeddedViewRef<any>;\n    context: any;\n}\n\nexport interface ICachedViewLoadedEventArgs extends IViewChangeEventArgs {\n    oldContext: any;\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxTemplateOutletDirective],\n    entryComponents: [],\n    exports: [IgxTemplateOutletDirective],\n    imports: [CommonModule]\n})\n\nexport class IgxTemplateOutletModule {\n}\n","import { DOCUMENT } from '@angular/common';\nimport { Directive, HostBinding } from '@angular/core';\n\n/**\n * @hidden\n */\n@Directive({\n    selector: 'igx-dialog-title,[igxDialogTitle]'\n})\nexport class IgxDialogTitleDirective {\n\n    @HostBinding('class.igx-dialog__window-title')\n    public defaultStyle = true;\n }\n\n/**\n * @hidden\n */\n@Directive({\n    selector: 'igx-dialog-actions,[igxDialogActions]'\n})\nexport class IgxDialogActionsDirective {\n\n    @HostBinding('class.igx-dialog__window-actions')\n    public defaultClass = true;\n }\n","import { useAnimation } from '@angular/animations';\nimport { CommonModule } from '@angular/common';\nimport {\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    Input,\n    NgModule,\n    OnDestroy,\n    OnInit,\n    Optional,\n    Output,\n    ViewChild,\n    AfterContentInit\n} from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { IgxNavigationService, IToggleView } from '../core/navigation';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxDialogActionsDirective, IgxDialogTitleDirective } from './dialog.directives';\nimport { IgxToggleModule, IgxToggleDirective } from '../directives/toggle/toggle.directive';\nimport { OverlaySettings, GlobalPositionStrategy, NoOpScrollStrategy, PositionSettings } from '../services';\nimport { slideInBottom, slideOutTop } from '../animations/slide/index';\nimport { IgxFocusModule } from '../directives/focus/focus.directive';\nimport { IBaseEventArgs } from '../core/utils';\n\nlet DIALOG_ID = 0;\n/**\n * **Ignite UI for Angular Dialog Window** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/dialog.html)\n *\n * The Ignite UI Dialog Window presents a dialog window to the user which can simply display messages or display\n * more complicated visuals such as a user sign-in form.  It also provides a right and left button\n * which can be used for custom actions.\n *\n * Example:\n * ```html\n * <button (click)=\"form.open()\">Show Dialog</button>\n * <igx-dialog #form title=\"Sign In\" rightButtonLabel=\"OK\">\n *   <div>\n *     <input type=\"text\" igxInput/>\n *     <label igxLabel>Username</label>\n *   </div>\n *   <div>\n *     <input type=\"password\" igxInput/>\n *     <label igxLabel>Password</label>\n *   </div>\n * </igx-dialog>\n * ```\n */\n@Component({\n    selector: 'igx-dialog',\n    templateUrl: 'dialog-content.component.html'\n})\nexport class IgxDialogComponent implements IToggleView, OnInit, OnDestroy, AfterContentInit {\n    private static NEXT_ID = 1;\n    private static readonly DIALOG_CLASS = 'igx-dialog';\n\n    @ViewChild(IgxToggleDirective, { static: true })\n    public toggleRef: IgxToggleDirective;\n\n    /**\n    * An @Input property that sets the value of the `id` attribute. If not provided it will be automatically generated.\n    *```html\n    *<igx-dialog [id]=\"'igx-dialog-56'\" #alert title=\"Notification\" leftButtonLabel=\"OK\" (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n    *```\n    */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-dialog-${DIALOG_ID++}`;\n\n    @Input()\n    get isModal() {\n        return this._isModal;\n    }\n\n    set isModal(val: boolean) {\n        this._overlayDefaultSettings.modal = val;\n        this._isModal = val;\n    }\n\n    /**\n    * An @Input property controlling the `title` of the dialog.\n    *```html\n    *<igx-dialog title=\"Notification\" #alert leftButtonLabel=\"OK\" (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n    *```\n    */\n    @Input()\n    public title = '';\n\n    /**\n     *  An @Input property controlling the `message` of the dialog.\n     *```html\n     *<igx-dialog message=\"Your email was sent!\" #alert leftButtonLabel=\"OK\" (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     *```\n     */\n    @Input()\n    public message = '';\n\n    /**\n     * An @Input property to set the `label` of the left button of the dialog.\n     *```html\n     *<igx-dialog leftButtonLabel=\"OKAY\" #alert title=\"Notification\"  (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     *```\n     */\n    @Input()\n    public leftButtonLabel = '';\n\n    /**\n     * An @Input property to set the left button `type`. The types are `flat`, `raised` and `fab`.\n     * The `flat` type button is a rectangle and doesn't have a shadow. <br>\n     * The `raised` type button is also a rectangle but has a shadow. <br>\n     * The `fab` type button is a circle with a shadow. <br>\n     * The default value is `flat`.\n     *```html\n     *<igx-dialog leftButtonType=\"raised\" leftButtonLabel=\"OKAY\" #alert (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     *```\n     */\n    @Input()\n    public leftButtonType = 'flat';\n    /**\n     * An @Input property to set the left button color. The property accepts all valid CSS color property values.\n     *```html\n     *<igx-dialog leftButtonColor=\"yellow\" leftButtonLabel=\"OKAY\" #alert (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     *```\n     */\n    @Input()\n    public leftButtonColor = '';\n\n    /**\n     * An @Input property to set the left button `background-color`. The property accepts all valid CSS color property values.\n     *```html\n     *<igx-dialog leftButtonBackgroundColor=\"black\" leftButtonLabel=\"OKAY\" #alert (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     *```\n     */\n    @Input()\n    public leftButtonBackgroundColor = '';\n\n    /**\n     * An @Input property to set the left button `ripple`. The `ripple` animates a click/tap to a component as a series of fading waves.\n     * The property accepts all valid CSS color property values.\n     *```html\n     *<igx-dialog leftButtonRipple=\"green\" leftButtonLabel=\"OKAY\" #alert (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     *```\n     */\n    @Input()\n    public leftButtonRipple = '';\n\n    /**\n     * An @Input property to set the `label` of the right button of the dialog.\n     *```html\n     *<igx-dialog rightButtonLabel=\"OKAY\" #alert title=\"Notification\"  (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     *```\n     */\n    @Input()\n    public rightButtonLabel = '';\n\n    /**\n     * An @Input property to set the right button `type`. The types are `flat`, `raised` and `fab`.\n     * The `flat` type button is a rectangle and doesn't have a shadow. <br>\n     * The `raised` type button is also a rectangle but has a shadow. <br>\n     * The `fab` type button is a circle with a shadow. <br>\n     * The default value is `flat`.\n     *```html\n     *<igx-dialog rightButtonType=\"fab\" rightButtonLabel=\"OKAY\" #alert (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     *```\n     */\n    @Input()\n    public rightButtonType = 'flat';\n\n    /**\n     * An @Input property to set the right button `color`. The property accepts all valid CSS color property values.\n     *```html\n     *<igx-dialog rightButtonColor=\"yellow\" rightButtonLabel=\"OKAY\" #alert (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     *```\n     */\n    @Input()\n    public rightButtonColor = '';\n\n    /**\n     * An @Input property to set the right button `background-color`. The property accepts all valid CSS color property values.\n     *```html\n     *<igx-dialog rightButtonBackgroundColor=\"black\" rightButtonLabel=\"OKAY\" #alert (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     *```\n     */\n    @Input()\n    public rightButtonBackgroundColor = '';\n\n    /**\n     * An @Input property to set the right button `ripple`.\n     *```html\n     *<igx-dialog rightButtonRipple=\"green\" rightButtonLabel=\"OKAY\" #alert (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     *```\n     */\n    @Input()\n    public rightButtonRipple = '';\n\n    /**\n     * An @Input property that allows you to enable the \"close on click outside the dialog\". By default it's disabled.\n     *```html\n     *<igx-dialog closeOnOutsideSelect=\"true\" leftButtonLabel=\"Cancel\" (onLeftButtonSelect)=\"dialog.close()\"\n     *rightButtonLabel=\"OK\" rightButtonRipple=\"#4CAF50\" (onRightButtonSelect)=\"onDialogOKSelected($event)\">\n     *</igx-dialog>\n     *```\n     */\n    @Input()\n    get closeOnOutsideSelect() {\n        return this._closeOnOutsideSelect;\n    }\n\n    set closeOnOutsideSelect(val: boolean) {\n        this._overlayDefaultSettings.closeOnOutsideClick = val;\n        this._closeOnOutsideSelect = val;\n    }\n\n    /**\n     * Get the position and animation settings used by the dialog.\n     * ```typescript\n     * @ViewChild('alert', { static: true }) public alert: IgxDialogComponent;\n     * let currentPosition: PositionSettings = this.alert.positionSettings\n     * ```\n     */\n    @Input()\n    public get positionSettings(): PositionSettings {\n        return this._positionSettings;\n    }\n\n    /**\n     * Set the position and animation settings used by the dialog.\n     * ```typescript\n     * import { slideInLeft, slideOutRight } from 'igniteui-angular';\n     * ...\n     * @ViewChild('alert', { static: true }) public alert: IgxDialogComponent;\n     *  public newPositionSettings: PositionSettings = {\n     *      openAnimation: useAnimation(slideInTop, { params: { duration: '2000ms' } }),\n     *      closeAnimation: useAnimation(slideOutBottom, { params: { duration: '2000ms'} }),\n     *      horizontalDirection: HorizontalAlignment.Left,\n     *      verticalDirection: VerticalAlignment.Middle,\n     *      horizontalStartPoint: HorizontalAlignment.Left,\n     *      verticalStartPoint: VerticalAlignment.Middle,\n     *      minSize: { height: 100, width: 100 }\n     *  };\n     * this.alert.positionSettings = this.newPositionSettings;\n     * ```\n     */\n    public set positionSettings(settings: PositionSettings) {\n        this._positionSettings = settings;\n        this._overlayDefaultSettings.positionStrategy = new GlobalPositionStrategy(this._positionSettings);\n    }\n\n    /**\n     * An event that is emitted when the dialog is opened.\n     *```html\n     *<igx-dialog (onOpen)=\"onDialogOpenHandler($event)\" (onLeftButtonSelect)=\"dialog.close()\" rightButtonLabel=\"OK\">\n     *</igx-dialog>\n     *```\n     */\n    @Output()\n    public onOpen = new EventEmitter<IDialogEventArgs>();\n\n    /**\n     * An event that is emitted when the dialog is closed.\n     *```html\n     *<igx-dialog (onClose)=\"onDialogCloseHandler($event)\" title=\"Confirmation\" leftButtonLabel=\"Cancel\" rightButtonLabel=\"OK\">\n     *</igx-dialog>\n     *```\n     */\n    @Output()\n    public onClose = new EventEmitter<IDialogEventArgs>();\n\n    /**\n     * An event that is emitted when the left button is clicked.\n     *```html\n     *<igx-dialog (onLeftButtonSelect)=\"onDialogOKSelected($event)\" #dialog leftButtonLabel=\"OK\" rightButtonLabel=\"Cancel\">\n     *</igx-dialog>\n     *```\n     */\n    @Output()\n    public onLeftButtonSelect = new EventEmitter<IDialogEventArgs>();\n\n    /**\n     * An event that is emitted when the right button is clicked.\n     * ```html\n     *<igx-dialog (onRightButtonSelect)=\"onDialogOKSelected($event)\"\n     *#dialog title=\"Confirmation\" (onLeftButtonSelect)=\"dialog.close()\" rightButtonLabel=\"OK\"\n     *rightButtonRipple=\"#4CAF50\" closeOnOutsideSelect=\"true\">\n     *</igx-dialog>\n     *```\n     */\n    @Output()\n    public onRightButtonSelect = new EventEmitter<IDialogEventArgs>();\n\n    private _positionSettings: PositionSettings = {\n        openAnimation: useAnimation(slideInBottom, { params: { fromPosition: 'translateY(100%)' } }),\n        closeAnimation: useAnimation(slideOutTop, { params: { toPosition: 'translateY(-100%)' } })\n    };\n\n    private _overlayDefaultSettings: OverlaySettings;\n    private _closeOnOutsideSelect = false;\n    private _isModal = true;\n    protected destroy$ = new Subject<boolean>();\n\n    /**\n     * @hidden\n     */\n    public get element() {\n        return this.elementRef.nativeElement;\n    }\n\n    /**\n     * The default `tabindex` attribute for the component\n     *\n     * @hidden\n     */\n    @HostBinding('attr.tabindex')\n    public tabindex = -1;\n\n    private _titleId: string;\n\n    /**\n     * Returns the value of state. Possible state values are \"open\" or \"close\".\n     *```typescript\n     *@ViewChild(\"MyDialog\")\n     *public dialog: IgxDialogComponent;\n     *ngAfterViewInit() {\n     *    let dialogState = this.dialog.state;\n     *}\n     *```\n     */\n    get state(): string {\n        return this.isOpen ? 'open' : 'close';\n    }\n\n    /**\n     * Returns whether the dialog is visible to the end user.\n     *```typescript\n     *@ViewChild(\"MyDialog\")\n     *public dialog: IgxDialogComponent;\n     *ngAfterViewInit() {\n     *    let dialogOpen = this.dialog.isOpen;\n     *}\n     * ```\n     */\n    @Input()\n    get isOpen() {\n        return !this.toggleRef.collapsed;\n    }\n\n    @HostBinding('class.igx-dialog--hidden')\n    get isCollapsed() {\n        return this.toggleRef.collapsed;\n    }\n\n    /**\n     *Returns the value of the role of the dialog. The valid values are `dialog`, `alertdialog`, `alert`.\n     *```typescript\n     *@ViewChild(\"MyDialog\")\n     *public dialog: IgxDialogComponent;\n     *ngAfterViewInit() {\n     *    let dialogRole = this.dialog.role;\n     *}\n     * ```\n     */\n    @Input()\n    get role() {\n        if (this.leftButtonLabel !== '' && this.rightButtonLabel !== '') {\n            return 'dialog';\n        } else if (\n            this.leftButtonLabel !== '' ||\n            this.rightButtonLabel !== ''\n        ) {\n            return 'alertdialog';\n        } else {\n            return 'alert';\n        }\n    }\n\n    /**\n     *Returns the value of the title id.\n     *```typescript\n     *@ViewChild(\"MyDialog\")\n     *public dialog: IgxDialogComponent;\n     *ngAfterViewInit() {\n     *    let dialogTitle = this.dialog.titleId;\n     *}\n     * ```\n     */\n    @Input()\n    get titleId() {\n        return this._titleId;\n    }\n\n    constructor(\n        private elementRef: ElementRef,\n        @Optional() private navService: IgxNavigationService\n    ) {\n        this._titleId = IgxDialogComponent.NEXT_ID++ + '_title';\n\n        this._overlayDefaultSettings = {\n            positionStrategy: new GlobalPositionStrategy(this._positionSettings),\n            scrollStrategy: new NoOpScrollStrategy(),\n            modal: this.isModal,\n            closeOnOutsideClick: this.closeOnOutsideSelect\n        };\n    }\n\n    ngAfterContentInit() {\n        this.toggleRef.onClosing.pipe(takeUntil(this.destroy$)).subscribe(() => this.emitCloseFromDialog());\n    }\n\n    private emitCloseFromDialog() {\n        this.onClose.emit({ dialog: this, event: null });\n    }\n\n    /**\n     * A method that opens the dialog.\n     * @memberOf {@link IgxDialogComponent}\n     *```html\n     *<button (click)=\"dialog.open() igxButton=\"raised\" igxButtonColor=\"white\" igxRipple=\"white\">Trigger Dialog</button>\n     *<igx-dialog #dialog></igx-dialog>\n     *```\n     */\n    public open(overlaySettings: OverlaySettings = this._overlayDefaultSettings) {\n        this.toggleRef.open(overlaySettings);\n        this.onOpen.emit({ dialog: this, event: null });\n        if (!this.leftButtonLabel && !this.rightButtonLabel) {\n            this.toggleRef.element.focus();\n        }\n    }\n\n    /**\n     *A method that that closes the dialog.\n     *@memberOf {@link IgxDialogComponent}\n     *```html\n     *<button (click)=\"dialog.close() igxButton=\"raised\" igxButtonColor=\"white\" igxRipple=\"white\">Trigger Dialog</button>\n     *<igx-dialog #dialog></igx-dialog>\n     *```\n     */\n    public close() {\n        // `onClose` will emit from `toggleRef.onClosing` subscription\n        this.toggleRef.close();\n    }\n\n\n    /**\n     * A method that opens/closes the dialog.\n     *@memberOf {@link IgxDialogComponent}\n     *```html\n     *<button (click)=\"dialog.toggle() igxButton=\"raised\" igxButtonColor=\"white\" igxRipple=\"white\">Trigger Dialog</button>\n     *<igx-dialog #dialog></igx-dialog>\n     *```\n     */\n    public toggle() {\n        this.isOpen ? this.close() : this.open();\n    }\n\n    /**\n     * @hidden\n     */\n    public onDialogSelected(event) {\n        event.stopPropagation();\n        if (\n            this.isOpen &&\n            this.closeOnOutsideSelect &&\n            event.target.classList.contains(IgxDialogComponent.DIALOG_CLASS)\n        ) {\n            this.close();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public onInternalLeftButtonSelect(event) {\n        this.onLeftButtonSelect.emit({ dialog: this, event });\n    }\n\n    /**\n     * @hidden\n     */\n    public onInternalRightButtonSelect(event) {\n        this.onRightButtonSelect.emit({ dialog: this, event });\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        if (this.navService && this.id) {\n            this.navService.add(this.id, this);\n        }\n    }\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        if (this.navService && this.id) {\n            this.navService.remove(this.id);\n        }\n\n    }\n\n}\n\nexport interface IDialogEventArgs extends IBaseEventArgs {\n    dialog: IgxDialogComponent;\n    event: Event;\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxDialogComponent, IgxDialogTitleDirective, IgxDialogActionsDirective],\n    exports: [IgxDialogComponent, IgxDialogTitleDirective, IgxDialogActionsDirective],\n    imports: [CommonModule, IgxToggleModule, IgxButtonModule, IgxRippleModule, IgxFocusModule]\n})\nexport class IgxDialogModule { }\n","import { Directive, TemplateRef } from '@angular/core';\n\n@Directive({\n    selector: '[igxProcessBarText]'\n})\nexport class IgxProcessBarTextTemplateDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n\n@Directive({\n    selector: '[igxProgressBarGradient]'\n})\nexport class IgxProgressBarGradientDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n\n","import { Injectable, Inject, InjectionToken, inject } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\n\n/**\n * @hidden\n */\nexport type Direction = 'ltr' | 'rtl';\n\n/**\n * Injection token is used to inject the document into Directionality\n * which factory could be faked for testing purposes.\n *\n * We can't provide and mock the DOCUMENT token from platform-browser because configureTestingModule\n * allows override of the default providers, directive, pipes, modules of the test injector\n * which causes errors.\n *\n * @hidden\n */\nexport const DIR_DOCUMENT = new InjectionToken<Document>('dir-doc', {\n    providedIn: 'root',\n    factory: DIR_DOCUMENT_FACTORY\n});\n\n/**\n * @hidden\n */\nexport function DIR_DOCUMENT_FACTORY(): Document {\n    return inject(DOCUMENT);\n}\n\n/**\n * @hidden\n *\n * Bidirectional service that extracts the value of the direction attribute on the body or html elements.\n *\n * The dir attribute over the body element takes precedence.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class IgxDirectionality {\n    private _dir: Direction;\n    private _document: Document;\n\n    public get value(): Direction {\n        return this._dir;\n    }\n\n    public get document() {\n        return this._document;\n    }\n\n    public get rtl() {\n        return this._dir === 'rtl';\n    }\n\n    constructor(@Inject(DIR_DOCUMENT) document) {\n        this._document = <Document>document;\n        const bodyDir = this._document.body ? this._document.body.dir : null;\n        const htmlDir = this._document.documentElement ? this._document.documentElement.dir : null;\n        const extractedDir = bodyDir || htmlDir;\n        this._dir = (extractedDir === 'ltr' || extractedDir === 'rtl') ? extractedDir : 'ltr';\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    Input,\n    NgModule,\n    Output,\n    Renderer2,\n    ViewChild,\n    ContentChild,\n    AfterViewInit\n} from '@angular/core';\nimport {\n    IgxProcessBarTextTemplateDirective,\n    IgxProgressBarGradientDirective,\n} from './progressbar.common';\nimport { IBaseEventArgs } from '../core/utils';\nimport { IgxDirectionality } from '../services/direction/directionality';\n\nconst ONE_PERCENT = 0.01;\nconst MIN_VALUE = 0;\n\nexport enum IgxTextAlign {\n    START = 'start',\n    CENTER = 'center',\n    END = 'end'\n}\n\nexport enum IgxProgressType {\n    ERROR = 'error',\n    INFO = 'info',\n    WARNING = 'warning',\n    SUCCESS = 'success'\n}\n\nexport interface IChangeProgressEventArgs extends IBaseEventArgs {\n    previousValue: number;\n    currentValue: number;\n}\n\nexport abstract class BaseProgress {\n    /**\n     * @hidden\n     */\n    private requestAnimationId: number = undefined;\n\n    /**\n     * @hidden\n     */\n    protected _valueInPercent = MIN_VALUE;\n    /**\n     * @hidden\n     */\n    protected _max = 100;\n    /**\n     * @hidden\n     */\n    protected _value = MIN_VALUE;\n    /**\n     * @hidden\n     */\n    protected _animate = true;\n\n    /**\n     * @hidden\n     */\n    protected _step;\n\n    /**\n     *Returns the `IgxLinearProgressBarComponent`/`IgxCircularProgressBarComponent` value in percentage.\n     *```typescript\n     *@ViewChild(\"MyProgressBar\")\n     *public progressBar: IgxLinearProgressBarComponent; // IgxCircularProgressBarComponent\n     *public valuePercent(event){\n     *    let percentValue = this.progressBar.valueInPercent;\n     *    alert(percentValue);\n     *}\n     *```\n     */\n    public get valueInPercent(): number {\n        return this._valueInPercent;\n    }\n\n    /**\n     *Sets the `IgxLinearProgressBarComponent`/`IgxCircularProgressBarComponent` value in percentage.\n     *```typescript\n     *@ViewChild(\"MyProgressBar\")\n     *public progressBar: IgxLinearProgressBarComponent; // IgxCircularProgressBarComponent\n     *    public setValue(event){\n     *    this.progressBar.valueInPercent = 56;\n     *}\n     * //...\n     *```\n     *```html\n     *<button igxButton=\"fab\" igxRipple=\"\" (click)=\"setValue()\">setValue</button>\n     *```\n     */\n    public set valueInPercent(value: number) {\n        this._valueInPercent = value;\n    }\n\n    /**\n     * @hidden\n     */\n    protected runAnimation(val: number, step: number) {\n        this.requestAnimationId = requestAnimationFrame(\n            () => this.updateProgressSmoothly.call(this, val, step));\n    }\n\n    /**\n     * @hidden\n     */\n    protected updateProgressSmoothly(val: number, step: number) {\n        this._value += step;\n        const passedValue = convertInPercentage(val, this._max);\n        const progressValue = convertInPercentage(this._value, this._max);\n        if (this.valueInPercent === passedValue) {\n            this.updateProgress(val);\n            cancelAnimationFrame(this.requestAnimationId);\n        } else if (this.isInLimitRange(progressValue, passedValue, step)) {\n            this.updateProgress(val);\n            cancelAnimationFrame(this.requestAnimationId);\n        } else {\n            this.valueInPercent = progressValue;\n            this.requestAnimationId = requestAnimationFrame(() => this.updateProgressSmoothly.call(this, val, step));\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected updateProgressDirectly(val: number) {\n        this._value = val;\n        this.valueInPercent = convertInPercentage(this._value, this._max);\n    }\n\n    /**\n     * @hidden\n     */\n    protected directionFlow(currentValue: number, prevValue: number, step: number): number {\n        if (currentValue < prevValue) {\n            return step;\n        }\n\n        return -step;\n    }\n\n    /**\n     * @hidden\n     */\n    private isInLimitRange(val: number, comparator: number, step: number) {\n        return this.isExceedingUpperLimit(val, comparator, step) || this.isExceedingLowerLimit(val, comparator, step);\n    }\n\n    /**\n     * @hidden\n     *\n     *\n     * @param val\n     * @param comparator\n     * @param step\n     */\n    private isExceedingUpperLimit(val: number, comparator: number, step: number) {\n        return val > comparator && step > 0;\n    }\n\n    /**\n     * @hidden\n     *\n     * @param val\n     * @param comparator\n     * @param step\n     */\n    private isExceedingLowerLimit(val: number, comparator: number, step: number) {\n        return val < comparator && step < 0;\n    }\n\n    /**\n     * @hidden\n     * @param step\n     */\n    private updateProgress(val: number) {\n        this._value = val;\n        this.valueInPercent = convertInPercentage(this._value, this._max);\n    }\n}\nlet NEXT_LINEAR_ID = 0;\nlet NEXT_CIRCULAR_ID = 0;\nlet NEXT_GRADIENT_ID = 0;\n@Component({\n    selector: 'igx-linear-bar',\n    templateUrl: 'templates/linear-bar.component.html'\n})\nexport class IgxLinearProgressBarComponent extends BaseProgress {\n\n    /**\n     *Animation on progress `IgxLinearProgressBarComponent`. By default it is set to true.\n     *```html\n     *<igx-linear-bar [animate]=\"false\" [striped]=\"true\" [max]=\"200\" [value]=\"50\"></igx-linear-bar>\n     *```\n     */\n    @Input()\n    set animate(animate: boolean) {\n        this._animate = animate;\n    }\n\n    /**\n     *Returns whether the `IgxLinearProgressBarComponent` has animation true/false.\n     *```typescript\n     *@ViewChild(\"MyProgressBar\")\n     *public progressBar: IgxLinearProgressBarComponent;\n     *public animationStatus(event) {\n     *    let animationStatus = this.progressBar.animate;\n     *    alert(animationStatus);\n     *}\n     *```\n     */\n    get animate(): boolean {\n        return this._animate;\n    }\n\n    /**\n     *Set maximum value that can be passed. By default it is set to 100.\n     *```html\n     *<igx-linear-bar [striped]=\"false\" [max]=\"200\" [value]=\"0\"></igx-linear-bar>\n     *```\n     */\n    @HostBinding('attr.aria-valuemax')\n    @Input()\n    set max(maxNum: number) {\n        this._max = maxNum;\n    }\n\n    /**\n     *Returns the the maximum progress value of the `IgxLinearProgressBarComponent`.\n     *```typescript\n     *@ViewChild(\"MyProgressBar\")\n     *public progressBar: IgxLinearProgressBarComponent;\n     *public maxValue(event) {\n     *    let max = this.progressBar.max;\n     *    alert(max);\n     *}\n     *```\n     */\n    get max() {\n        return this._max;\n    }\n\n    /**\n     *Returns the value which update the progress indicator of the `IgxLinearProgressBarComponent`.\n     *```typescript\n     *@ViewChild(\"MyProgressBar\")\n     *public progressBar: IgxLinearProgressBarComponent;\n     *public stepValue(event) {\n     *    let step = this.progressBar.step;\n     *    alert(step);\n     *}\n     *```\n     */\n    @Input()\n    get step(): number {\n        if (this._step) {\n            return this._step;\n        }\n\n        return this._max * ONE_PERCENT;\n    }\n\n    /**\n     *Sets the value by which progress indicator is updated. By default it is 1% of the maximum value.\n     *```html\n     *<igx-linear-bar [striped]=\"false\" [max]=\"200\" [value]=\"0\" [step]=\"1\"></igx-linear-bar>\n     *```\n     */\n    set step(val: number) {\n        this._step = Number(val);\n    }\n\n    constructor() {\n        super();\n    }\n\n    @HostBinding('attr.aria-valuemin')\n    public valueMin = 0;\n\n    @HostBinding('class.igx-linear-bar')\n    public cssClass = 'igx-linear-bar';\n\n    /**\n     *Set `IgxLinearProgressBarComponent` to have striped style. By default it is set to false.\n     *```html\n     *<igx-linear-bar [striped]=\"true\" [max]=\"200\" [value]=\"50\"></igx-linear-bar>\n     *```\n     */\n    @HostBinding('class.igx-linear-bar--striped')\n    @Input()\n    public striped = false;\n\n    /**\n     *Set `IgxLinearProgressBarComponent` to have indeterminate. By default it is set to false.\n     *```html\n     *<igx-linear-bar [indeterminate]=\"true\"></igx-linear-bar>\n     *```\n     */\n    @HostBinding('class.igx-linear-bar--indeterminate')\n    @Input()\n    public indeterminate = false;\n\n    /**An @Input property that sets the value of the `role` attribute. If not provided it will be automatically set to `progressbar`.\n     * ```html\n     *<igx-linear-bar role=\"progressbar\"></igx-linear-bar>\n     * ```\n     */\n    @HostBinding('attr.role')\n    @Input()\n    public role = 'progressbar';\n\n    /**An @Input property that sets the value of `id` attribute. If not provided it will be automatically generated.\n     * ```html\n     *<igx-linear-bar [id]=\"'igx-linear-bar-55'\" [striped]=\"true\" [max]=\"200\" [value]=\"50\"></igx-linear-bar>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-linear-bar-${NEXT_LINEAR_ID++}`;\n\n    /**\n     *Set the position that defines where the text is aligned.\n     Possible options - `IgxTextAlign.START` (default), `IgxTextAlign.CENTER`, `IgxTextAlign.END`.\n     *```typescript\n     *public positionCenter: IgxTextAlign;\n     *public ngOnInit() {\n     *    this.positionCenter = IgxTextAlign.CENTER;\n     *}\n     * //...\n     *```\n     * ```html\n     *<igx-linear-bar type=\"warning\" [text]=\"'Custom text'\" [textAlign]=\"positionCenter\" [striped]=\"true\"></igx-linear-bar>\n     *```\n     */\n    @Input()\n    public textAlign: IgxTextAlign = IgxTextAlign.START;\n\n    /**\n     *Set the text to be visible. By default it is set to true.\n     * ```html\n     *<igx-linear-bar type=\"default\" [textVisibility]=\"false\"></igx-linear-bar>\n     *```\n     */\n    @Input()\n    public textVisibility = true;\n\n    /**\n     *Set the position that defines if the text should be aligned above the progress line. By default is set to false.\n     *```html\n     *<igx-linear-bar type=\"error\" [textTop]=\"true\"></igx-linear-bar>\n     *```\n     */\n    @Input()\n    public textTop = false;\n\n    /**\n     *Set a custom text that is displayed according to the defined position.\n     * ```html\n     *<igx-linear-bar type=\"warning\" [text]=\"'Custom text'\" [textAlign]=\"positionCenter\" [striped]=\"true\"></igx-linear-bar>\n     *```\n     */\n    @Input()\n    public text: string;\n\n    /**\n     *Set type of the `IgxLinearProgressBarComponent`. Possible options - `default`, `success`, `info`, `warning`, and `error`.\n     *```html\n     *<igx-linear-bar [striped]=\"false\" [max]=\"100\" [value]=\"0\" type=\"error\"></igx-linear-bar>\n     *```\n     */\n\n    @Input()\n    public type = 'default';\n\n    /**\n    *Returns value that indicates the current `IgxLinearProgressBarComponent` position.\n    *```typescript\n    *@ViewChild(\"MyProgressBar\")\n    *public progressBar: IgxLinearProgressBarComponent;\n    *public getValue(event) {\n    *    let value = this.progressBar.value;\n    *    alert(value);\n    *}\n    *```\n    */\n    @HostBinding('attr.aria-valuenow')\n    @Input()\n    get value(): number {\n        return this._value;\n    }\n\n    /**\n     *Set value that indicates the current `IgxLinearProgressBarComponent` position.\n     *```html\n     *<igx-linear-bar [striped]=\"false\" [max]=\"200\" [value]=\"50\"></igx-linear-bar>\n     *```\n     */\n    set value(val) {\n        val = Number(val);\n        if (this._value === val || this.indeterminate) {\n            return;\n        }\n\n        const valueInRange = getValueInProperRange(val, this.max);\n        if (isNaN(valueInRange)) {\n            return;\n        }\n        const changedValues = {\n            currentValue: valueInRange,\n            previousValue: this._value\n        };\n\n        const updateValue = super.directionFlow(this._value, val, this.step);\n        if (this._animate && val >= this.step) {\n            super.runAnimation(valueInRange, updateValue);\n        } else {\n            super.updateProgressDirectly(valueInRange);\n        }\n\n        this.onProgressChanged.emit(changedValues);\n    }\n\n    /**\n     *An event, which is triggered after a progress is changed.\n     *```typescript\n     *public progressChange(event) {\n     *    alert(\"Progress made!\");\n     *}\n     * //...\n     *```\n     *```html\n     *<igx-linear-bar (onProgressChanged)=\"progressChange($event)\" type=\"success\">\n     *```\n     */\n    @Output() public onProgressChanged = new EventEmitter<IChangeProgressEventArgs>();\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-linear-bar--danger')\n    public get error() {\n        return this.type === IgxProgressType.ERROR;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-linear-bar--info')\n    public get info() {\n        return this.type === IgxProgressType.INFO;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-linear-bar--warning')\n    public get warning() {\n        return this.type === IgxProgressType.WARNING;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-linear-bar--success')\n    public get success() {\n        return this.type === IgxProgressType.SUCCESS;\n    }\n}\n\n@Component({\n    selector: 'igx-circular-bar',\n    templateUrl: 'templates/circular-bar.component.html'\n})\nexport class IgxCircularProgressBarComponent extends BaseProgress implements AfterViewInit {\n\n    private readonly STROKE_OPACITY_DVIDER = 100;\n    private readonly STROKE_OPACITY_ADDITION = .2;\n\n    /** @hidden */\n    @HostBinding('class.igx-circular-bar')\n    public cssClass = 'igx-circular-bar';\n\n    /**\n     *An event, which is triggered after a progress is changed.\n     *```typescript\n     *public progressChange(event) {\n     *    alert(\"Progress made!\");\n     *}\n     * //...\n     *```\n     *```html\n     *<igx-circular-bar [value]=\"currentValue\" (onProgressChanged)=\"progressChange($event)\"></igx-circular-bar>\n     *```\n     */\n    @Output()\n    public onProgressChanged = new EventEmitter<IChangeProgressEventArgs>();\n\n    /**\n     *An @Input property that sets the value of `id` attribute. If not provided it will be automatically generated.\n     *```html\n     *<igx-circular-bar [id]=\"'igx-circular-bar-55'\" [value]=\"50\"></igx-circular-bar>\n     *```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-circular-bar-${NEXT_CIRCULAR_ID++}`;\n\n    /**\n     * @hidden\n     */\n    public gradientId = `igx-circular-gradient-${NEXT_GRADIENT_ID++}`;\n\n    /**\n     *An @Input property that sets the value of the `indeterminate` attribute. If not provided it will be automatically set to false.\n     *```html\n     *<igx-circular-bar [indeterminate]=\"true\"></igx-circular-bar>\n     *```\n     */\n    @HostBinding('class.igx-circular-bar--indeterminate')\n    @Input()\n    public indeterminate = false;\n\n    /**\n     *Sets the text visibility. By default it is set to true.\n     *```html\n     *<igx-circular-bar [textVisibility]=\"false\"></igx-circular-bar>\n     *```\n     */\n    @Input()\n    public textVisibility = true;\n\n    /**\n     * Sets/gets the text to be displayed inside the `igxCircularBar`.\n     *```html\n     *<igx-circular-bar text=\"Progress\"></igx-circular-bar>\n     *```\n     *```typescript\n     *let text = this.circularBar.text;\n     *```\n     */\n    @Input()\n    public text: string;\n\n    @ContentChild(IgxProcessBarTextTemplateDirective, { read: IgxProcessBarTextTemplateDirective })\n    public textTemplate: IgxProcessBarTextTemplateDirective;\n\n    @ContentChild(IgxProgressBarGradientDirective, { read: IgxProgressBarGradientDirective })\n    public gradientTemplate: IgxProgressBarGradientDirective;\n\n    /**\n     * @hidden\n    */\n    public get context(): any {\n        return {\n            $implicit: { value: this.value, valueInPercent: this.valueInPercent, max: this.max }\n        };\n    }\n\n    /**\n    *Animation on progress `IgxCircularProgressBarComponent`. By default it is set to true.\n     *```html\n     *<igx-circular-bar [animate]=\"false\" [value]=\"50\"></igx-circular-bar>\n     *```\n     */\n    @Input()\n    set animate(animate: boolean) {\n        this._animate = animate;\n    }\n\n    /**\n     *Returns whether the `IgxCircularProgressBarComponent` has animation true/false.\n     *```typescript\n     *@ViewChild(\"MyProgressBar\")\n     *public progressBar: IgxCircularProgressBarComponent;\n     *public animationStatus(event) {\n     *    let animationStatus = this.progressBar.animate;\n     *    alert(animationStatus);\n     *}\n     *```\n     */\n    get animate(): boolean {\n        return this._animate;\n    }\n\n    /**\n     *Set maximum value that can be passed. By default it is set to 100.\n     *```html\n     *<igx-circular-bar [max]=\"200\" [value]=\"0\"></igx-circular-bar>\n     *```\n     */\n    @Input()\n    set max(maxNum: number) {\n        this._max = maxNum;\n    }\n\n    /**\n     *Returns the the maximum progress value of the `IgxCircularProgressBarComponent`.\n     *```typescript\n     *@ViewChild(\"MyProgressBar\")\n     *public progressBar: IgxCircularProgressBarComponent;\n     *public maxValue(event) {\n     *    let max = this.progressBar.max;\n     *    alert(max);\n     *}\n     *```\n     *```html\n     *<igx-circular-bar [max]=\"245\" [animate]=\"false\" [value]=\"currentValue\"></igx-circular-bar>\n     *```\n     */\n    get max(): number {\n        return this._max;\n    }\n\n    /**\n     *Returns the value which update the progress indicator of the `IgxCircularProgressBarComponent`.\n     *```typescript\n     *@ViewChild(\"MyProgressBar\")\n     *public progressBar: IgxCircularProgressBarComponent;\n     *public stepValue(event) {\n     *    let step = this.progressBar.step;\n     *    alert(step);\n     *}\n     *```\n     */\n    @Input()\n    get step(): number {\n        if (this._step) {\n            return this._step;\n        }\n\n        return this._max * ONE_PERCENT;\n    }\n\n    /**\n     *Sets the value by which progress indicator is updated. By default it is 1% of the maximum value.\n     *```html\n     *<igx-circular-bar [striped]=\"false\" [max]=\"200\" [value]=\"0\" [step]=\"1\"></igx-circular-bar>\n     *```\n    */\n    set step(val: number) {\n        this._step = Number(val);\n    }\n\n    /**\n     *Returns value that indicates the current `IgxCircularProgressBarComponent` position.\n     *```typescript\n     *@ViewChild(\"MyProgressBar\")\n     *public progressBar: IgxCircularProgressBarComponent;\n     *public getValue(event) {\n     *    let value = this.progressBar.value;\n     *    alert(value);\n     *}\n     *```\n     *```html\n     *<button igxButton=\"fab\" igxRipple=\"\" (click)=\"getValue()\">Click</button>\n     *```\n     */\n    @Input()\n    get value(): number {\n        return this._value;\n    }\n\n    /**\n     *Set value that indicates the current `IgxCircularProgressBarComponent` position.\n     *```html\n     *<igx-circular-bar [value]=\"50\"></igx-circular-bar>\n     *```\n     */\n    set value(val: number) {\n        val = Number(val);\n        if (this._value === val || this.indeterminate) {\n            return;\n        }\n\n        const valueInProperRange = getValueInProperRange(val, this.max);\n        if (isNaN(valueInProperRange)) {\n            return;\n        }\n\n        const changedValues = {\n            currentValue: valueInProperRange,\n            previousValue: this._value\n        };\n\n        const updateValue = super.directionFlow(this._value, val, this.step);\n        if (this.animate && val >= this.step) {\n            super.runAnimation(valueInProperRange, updateValue);\n        } else {\n            this.updateProgressDirectly(valueInProperRange);\n        }\n\n        this.onProgressChanged.emit(changedValues);\n    }\n\n    private _circleRadius = 46;\n    private _circumference = 2 * Math.PI * this._circleRadius;\n\n    @ViewChild('circle', { static: true }) private _svgCircle: ElementRef;\n\n    constructor(private renderer: Renderer2, private _directionality: IgxDirectionality) {\n        super();\n    }\n\n    ngAfterViewInit() {\n        this.renderer.setStyle(\n            this._svgCircle.nativeElement,\n            'stroke',\n            `url(#${this.gradientId})`\n        );\n    }\n\n    /**\n     * @hidden\n     */\n    public updateProgressSmoothly(val: number, step: number) {\n        // Set frames for the animation\n        const FRAMES = [{\n            strokeDashoffset: this.getProgress(this._value),\n            strokeOpacity: (this._value / this.STROKE_OPACITY_DVIDER) + this.STROKE_OPACITY_ADDITION\n        }, {\n            strokeDashoffset: this.getProgress(this.valueInPercent),\n            strokeOpacity: (this.valueInPercent / this.STROKE_OPACITY_DVIDER) + this.STROKE_OPACITY_ADDITION\n        }];\n        this._svgCircle.nativeElement.animate(FRAMES, {\n            easing: 'ease-out',\n            fill: 'forwards'\n        });\n\n        super.updateProgressSmoothly(val, step);\n    }\n\n    /**\n     * @hidden\n    */\n    public get textContent(): string {\n        return this.text;\n    }\n\n    /**\n     * @hidden\n    */\n    public updateProgressDirectly(val: number) {\n        super.updateProgressDirectly(val);\n\n        this.renderer.setStyle(\n            this._svgCircle.nativeElement,\n            'stroke-dashoffset',\n            this.getProgress(this.valueInPercent));\n\n        this.renderer.setStyle(\n            this._svgCircle.nativeElement,\n            'stroke-opacity',\n            (this.valueInPercent / this.STROKE_OPACITY_DVIDER) + this.STROKE_OPACITY_ADDITION);\n    }\n\n    private getProgress(percentage: number) {\n        return this._directionality.rtl ?\n            this._circumference + (percentage * this._circumference / 100) :\n            this._circumference - (percentage * this._circumference / 100);\n    }\n}\n\nexport function getValueInProperRange(value: number, max: number, min = 0): number {\n    return Math.max(Math.min(value, max), min);\n}\n\nexport function convertInPercentage(value: number, max: number) {\n    return Math.floor(100 * value / max);\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxLinearProgressBarComponent,\n        IgxCircularProgressBarComponent,\n        IgxProcessBarTextTemplateDirective,\n        IgxProgressBarGradientDirective,\n    ],\n    exports: [\n        IgxLinearProgressBarComponent,\n        IgxCircularProgressBarComponent,\n        IgxProcessBarTextTemplateDirective,\n        IgxProgressBarGradientDirective,\n    ],\n    imports: [CommonModule]\n})\nexport class IgxProgressBarModule { }\n\n","import { IgxDropDownItemComponent } from './../drop-down/drop-down-item.component';\nimport { Component, DoCheck, Input } from '@angular/core';\n\n@Component({\n    selector: 'igx-select-item',\n    template: '<ng-content></ng-content>'\n})\nexport class IgxSelectItemComponent extends IgxDropDownItemComponent implements DoCheck {\n\n    private _text: any;\n\n    /**\n     * An @Input property that gets/sets the item's text to be displayed in the select component's input when the item is selected.\n     *\n     * ```typescript\n     *  //get\n     *  let mySelectedItem = this.dropDown.selectedItem;\n     *  let selectedItemText = mySelectedItem.text;\n     * ```\n\n     * ```html\n     * // set\n     * <igx-select-item [text]=\"'London'\"></igx-select-item>\n     * ```\n     */\n    @Input()\n    public get text(): string {\n        return this._text;\n    }\n\n    public set text(text: string) {\n        this._text = text;\n    }\n\n    /** @hidden @internal */\n    public get itemText() {\n        if (this._text !== undefined) {\n            return this._text;\n        }\n        // If text @Input is undefined, try extract a meaningful item text out of the item template\n        return this.elementRef.nativeElement.textContent.trim();\n    }\n\n    /**\n     * Sets/Gets if the item is the currently selected one in the select\n     *\n     * ```typescript\n     *  let mySelectedItem = this.select.selectedItem;\n     *  let isMyItemSelected = mySelectedItem.selected; // true\n     * ```\n     */\n    public get selected() {\n        return !this.isHeader && !this.disabled && this.selection.is_item_selected(this.dropDown.id, this);\n    }\n\n    public set selected(value: any) {\n        if (value && !this.isHeader && !this.disabled) {\n            this.dropDown.selectItem(this);\n        }\n    }\n\n    /** @hidden @internal */\n    public isHeader: boolean;\n\n    ngDoCheck(): void {\n    }\n}\n","import { VerticalAlignment, HorizontalAlignment, PositionSettings, Size, Util, ConnectedFit  } from '../services/overlay/utilities';\nimport { IPositionStrategy } from '../services/overlay/position';\nimport { fadeOut, fadeIn } from '../animations/main';\nimport { IgxSelectBase } from './select.common';\nimport { isIE } from '../core/utils';\nimport { BaseFitPositionStrategy } from '../services/overlay/position/base-fit-position-strategy';\n\n/** @hidden @internal */\nexport class SelectPositioningStrategy extends BaseFitPositionStrategy implements IPositionStrategy {\n\n    private _selectDefaultSettings = {\n        horizontalDirection: HorizontalAlignment.Right,\n        verticalDirection: VerticalAlignment.Bottom,\n        horizontalStartPoint: HorizontalAlignment.Left,\n        verticalStartPoint: VerticalAlignment.Top,\n        openAnimation: fadeIn,\n        closeAnimation: fadeOut\n    };\n\n    /** @inheritdoc */\n    public settings: PositionSettings;\n\n    constructor(public select: IgxSelectBase, settings?: PositionSettings) {\n        super();\n        this.settings = Object.assign({}, this._selectDefaultSettings, settings);\n    }\n\n    // Global variables required for cases of !initialCall (page scroll/overlay repositionAll)\n    private global_yOffset = 0;\n    private global_xOffset = 0;\n    private global_styles: SelectStyles = {};\n\n    /** @inheritdoc */\n    position(contentElement: HTMLElement, size: Size, document?: Document, initialCall?: boolean): void {\n        const rects = super.calculateElementRectangles(contentElement);\n        // selectFit obj, to be used for both cases of initialCall and !initialCall(page scroll/overlay repositionAll)\n        const selectFit: SelectFit = {\n            verticalOffset: this.global_yOffset,\n            horizontalOffset: this.global_xOffset,\n            targetRect: rects.targetRect,\n            contentElementRect: rects.elementRect,\n            styles: this.global_styles,\n            scrollContainer: this.select.scrollContainer,\n            scrollContainerRect: this.select.scrollContainer.getBoundingClientRect()\n        };\n\n        if (initialCall) {\n            // Fill in the required selectFit object properties.\n            selectFit.viewPortRect = Util.getViewportRect(document);\n            selectFit.itemElement = this.getInteractionItemElement();\n            selectFit.itemRect = selectFit.itemElement.getBoundingClientRect();\n\n            // Calculate input and selected item elements style related variables\n            selectFit.styles = this.calculateStyles(selectFit);\n\n            selectFit.scrollAmount = this.calculateScrollAmount(selectFit);\n            // Calculate how much to offset the overlay container.\n            this.calculateYoffset(selectFit);\n            this.calculateXoffset(selectFit);\n\n            super.updateViewPortFit(selectFit);\n            // container does not fit in viewPort and is out on Top or Bottom\n            if (selectFit.fitVertical.back < 0 || selectFit.fitVertical.forward < 0 ) {\n                this.fitInViewport(contentElement, selectFit);\n            }\n            this.select.scrollContainer.scrollTop = selectFit.scrollAmount;\n        }\n        this.setStyles(contentElement, selectFit);\n    }\n\n    /**\n     * Calculate selected item scroll position.\n     */\n    private calculateScrollAmount(selectFit: SelectFit): number {\n        const itemElementRect = selectFit.itemRect;\n        const scrollContainer = selectFit.scrollContainer;\n        const scrollContainerRect = selectFit.scrollContainerRect;\n        const scrollDelta = scrollContainerRect.top - itemElementRect.top;\n        let scrollPosition = scrollContainer.scrollTop - scrollDelta;\n\n        const dropDownHeight = scrollContainer.clientHeight;\n        scrollPosition -= dropDownHeight / 2;\n        scrollPosition += itemElementRect.height / 2;\n\n        return Math.round(Math.min(Math.max(0, scrollPosition), scrollContainer.scrollHeight - scrollContainerRect.height));\n    }\n\n    /**\n     * Position the items outer container so selected item text is positioned over input text and if header\n     * And/OR footer - both header/footer are visible\n     * @param selectFit selectFit to use for computation.\n     */\n    protected fitInViewport(contentElement: HTMLElement, selectFit: SelectFit) {\n        const footer = selectFit.scrollContainerRect.bottom - selectFit.contentElementRect.bottom;\n        const header = selectFit.scrollContainerRect.top - selectFit.contentElementRect.top;\n        const lastItemFitSize = selectFit.targetRect.bottom + selectFit.styles.itemTextToInputTextDiff - footer;\n        const firstItemFitSize = selectFit.targetRect.top - selectFit.styles.itemTextToInputTextDiff - header;\n        // out of viewPort on Top\n        if (selectFit.fitVertical.back < 0) {\n            const possibleScrollAmount = selectFit.scrollContainer.scrollHeight -\n                selectFit.scrollContainerRect.height - selectFit.scrollAmount;\n            if (possibleScrollAmount + selectFit.fitVertical.back > 0 && firstItemFitSize > selectFit.viewPortRect.top) {\n                selectFit.scrollAmount -= selectFit.fitVertical.back;\n                selectFit.verticalOffset -= selectFit.fitVertical.back;\n                this.global_yOffset = selectFit.verticalOffset;\n            } else {\n                selectFit.verticalOffset = 0 ;\n                this.global_yOffset = 0;\n            }\n        // out of viewPort on Bottom\n        } else if (selectFit.fitVertical.forward < 0) {\n            if (selectFit.scrollAmount + selectFit.fitVertical.forward > 0 && lastItemFitSize < selectFit.viewPortRect.bottom) {\n                selectFit.scrollAmount += selectFit.fitVertical.forward;\n                selectFit.verticalOffset += selectFit.fitVertical.forward;\n                this.global_yOffset = selectFit.verticalOffset;\n            } else {\n                selectFit.verticalOffset = -selectFit.contentElementRect.height + selectFit.targetRect.height;\n                this.global_yOffset = selectFit.verticalOffset;\n            }\n        }\n    }\n\n    /**\n     * Sets element's style which effectively positions the provided element\n     * @param element Element to position\n     * @param selectFit selectFit to use for computation.\n     * @param initialCall should be true if this is the initial call to the position method calling setStyles\n     */\n    protected setStyles(contentElement: HTMLElement, selectFit: SelectFit) {\n        super.setStyle(contentElement, selectFit.targetRect, selectFit.contentElementRect, selectFit);\n        contentElement.style.width = `${selectFit.styles.contentElementNewWidth}px`; // manage container based on paddings?\n        this.global_styles.contentElementNewWidth = selectFit.styles.contentElementNewWidth;\n    }\n\n    /**\n     * Calculate the necessary input and selected item styles to be used for positioning item text over input text.\n     * Calculate & Set default items container width.\n     * @param selectFit selectFit to use for computation.\n     */\n    private calculateStyles(selectFit: SelectFit): SelectStyles  {\n        const styles: SelectStyles = {};\n        const inputElementStyles = window.getComputedStyle(this.settings.target as Element);\n        const itemElementStyles = window.getComputedStyle(selectFit.itemElement);\n        const numericInputFontSize = parseFloat(inputElementStyles.fontSize);\n        const numericItemFontSize = parseFloat(itemElementStyles.fontSize);\n        const inputTextToInputTop = (selectFit.targetRect.bottom - selectFit.targetRect.top - numericInputFontSize) / 2;\n        const itemTextToItemTop = (selectFit.itemRect.height - numericItemFontSize) / 2;\n         // Adjust for input top padding\n        const negateInputPaddings = (\n                parseFloat(inputElementStyles.paddingTop) -\n                parseFloat(inputElementStyles.paddingBottom)\n            ) / 2;\n        styles.itemTextToInputTextDiff = Math.round(itemTextToItemTop - inputTextToInputTop + negateInputPaddings);\n\n        const numericLeftPadding = parseFloat(itemElementStyles.paddingLeft);\n        const numericTextIndent = parseFloat(itemElementStyles.textIndent);\n\n        styles.itemTextPadding = numericLeftPadding;\n        styles.itemTextIndent = numericTextIndent;\n        // 24 is the input's toggle ddl icon width\n        styles.contentElementNewWidth = selectFit.targetRect.width + 24 + numericLeftPadding * 2;\n\n        return styles;\n    }\n\n    /**\n     * Obtain the selected item if there is such one or otherwise use the first one\n     */\n    public getInteractionItemElement(): HTMLElement {\n        let itemElement;\n        if (this.select.selectedItem) {\n            itemElement = this.select.selectedItem.element.nativeElement;\n            // D.P. Feb 22 2019, #3921 Force item scroll before measuring in IE11, due to base scrollToItem delay\n            if (isIE()) {\n                this.select.scrollContainer.scrollTop = this.select.calculateScrollPosition(this.select.selectedItem);\n            }\n        } else {\n            itemElement = this.select.getFirstItemElement();\n        }\n        return itemElement;\n    }\n\n    /**\n     * Calculate how much to offset the overlay container for Y-axis.\n     */\n    private calculateYoffset(selectFit: SelectFit) {\n        selectFit.verticalOffset = -(selectFit.itemRect.top - selectFit.contentElementRect.top +\n            selectFit.styles.itemTextToInputTextDiff - selectFit.scrollAmount);\n        this.global_yOffset = selectFit.verticalOffset;\n    }\n\n    /**\n     * Calculate how much to offset the overlay container for X-axis.\n     */\n    private calculateXoffset(selectFit: SelectFit) {\n        selectFit.horizontalOffset = selectFit.styles.itemTextIndent - selectFit.styles.itemTextPadding;\n        this.global_xOffset = selectFit.horizontalOffset;\n    }\n}\n\n/** @hidden */\nexport interface SelectFit extends ConnectedFit {\n    itemElement?: HTMLElement;\n    scrollContainer: HTMLElement;\n    scrollContainerRect: ClientRect;\n    itemRect?: ClientRect;\n    styles?: SelectStyles;\n    scrollAmount?: number;\n}\n\n/** @hidden */\nexport interface SelectStyles {\n    itemTextPadding?: number;\n    itemTextIndent?: number;\n    itemTextToInputTextDiff?: number;\n    contentElementNewWidth?: number;\n    numericLeftPadding?: number;\n}\n","import { IgxInputDirective, IgxInputState } from './../directives/input/input.directive';\nimport {\n    Component, ContentChildren, forwardRef, QueryList, ViewChild, Input, ContentChild,\n    AfterContentInit, HostBinding, Directive, TemplateRef, ElementRef, ChangeDetectorRef, Optional,\n    Injector, OnInit, AfterViewInit, OnDestroy, Inject, Type\n\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR, NgControl, AbstractControl } from '@angular/forms';\nimport { Subscription } from 'rxjs';\n\nimport { IgxDropDownItemBaseDirective } from '../drop-down/index';\nimport { IgxInputGroupComponent } from '../input-group/input-group.component';\n\nimport { IgxDropDownComponent } from './../drop-down/drop-down.component';\nimport { IgxSelectItemComponent } from './select-item.component';\nimport { SelectPositioningStrategy } from './select-positioning-strategy';\n\nimport { OverlaySettings, AbsoluteScrollStrategy } from '../services/index';\nimport { IGX_DROPDOWN_BASE, ISelectionEventArgs, Navigate } from '../drop-down/drop-down.common';\nimport { CancelableEventArgs } from '../core/utils';\nimport { IgxLabelDirective } from '../directives/label/label.directive';\nimport { IgxSelectBase } from './select.common';\nimport { EditorProvider } from '../core/edit-provider';\nimport { IgxSelectionAPIService } from '../core/selection';\nimport { DisplayDensityToken, IDisplayDensityOptions } from '../core/density';\n\n/** @hidden @internal */\n@Directive({\n    selector: '[igxSelectToggleIcon]'\n})\nexport class IgxSelectToggleIconDirective {\n}\n\n/** @hidden @internal */\n@Directive({\n    selector: '[igxSelectHeader]'\n})\nexport class IgxSelectHeaderDirective {\n}\n\n/** @hidden @internal */\n@Directive({\n    selector: '[igxSelectFooter]'\n})\nexport class IgxSelectFooterDirective {\n}\n\nconst noop = () => { };\n\n/**\n * **Ignite UI for Angular Select** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/select.html)\n *\n * The `igxSelect` provides an input with dropdown list allowing selection of a single item.\n *\n * Example:\n * ```html\n * <igx-select #select1 [placeholder]=\"'Pick One'\">\n *   <label igxLabel>Select Label</label>\n *   <igx-select-item *ngFor=\"let item of items\" [value]=\"item.field\">\n *     {{ item.field }}\n *   </igx-select-item>\n * </igx-select>\n * ```\n */\n@Component({\n    selector: 'igx-select',\n    templateUrl: './select.component.html',\n    providers: [\n        { provide: NG_VALUE_ACCESSOR, useExisting: IgxSelectComponent, multi: true },\n        { provide: IGX_DROPDOWN_BASE, useExisting: IgxSelectComponent }],\n    styles: [`\n        :host {\n            display: block;\n        }\n    `]\n})\nexport class IgxSelectComponent extends IgxDropDownComponent implements IgxSelectBase, ControlValueAccessor,\n    AfterContentInit, OnInit, AfterViewInit, OnDestroy, EditorProvider {\n\n    private ngControl: NgControl = null;\n    private _statusChanges$: Subscription;\n    private _overlayDefaults: OverlaySettings;\n    private _value: any;\n\n    /** @hidden @internal do not use the drop-down container class */\n    public cssClass = false;\n\n    /** @hidden @internal */\n    @ViewChild('inputGroup', { read: IgxInputGroupComponent, static: true }) public inputGroup: IgxInputGroupComponent;\n\n    /** @hidden @internal */\n    @ViewChild('input', { read: IgxInputDirective, static: true }) public input: IgxInputDirective;\n\n    /** @hidden @internal */\n    @ContentChildren(forwardRef(() => IgxSelectItemComponent), { descendants: true })\n    public children: QueryList<IgxSelectItemComponent>;\n\n    /** @hidden @internal */\n    @ContentChild(forwardRef(() => IgxLabelDirective), { static: true }) label: IgxLabelDirective;\n\n    /** @hidden @internal */\n    public allowItemsFocus = false;\n\n    /** @hidden @internal */\n    public height: string;\n\n    /**\n     * An @Input property that gets/sets the component value.\n     *\n     * ```typescript\n     * // get\n     * let selectValue = this.select.value;\n     * ```\n     *\n     * ```typescript\n     * // set\n     * this.select.value = 'London';\n     * ```\n     * ```html\n     * <igx-select [value]=\"value\"></igx-select>\n     * ```\n     */\n    @Input()\n    public get value(): any {\n        return this._value;\n    }\n    public set value(v: any) {\n        if (this._value === v) {\n            return;\n        }\n        this._value = v;\n        this.setSelection(this.items.find(x => x.value === this.value));\n    }\n    /**\n     * An @Input property that sets input placeholder.\n     *\n     */\n    @Input() public placeholder;\n\n\n    /**\n     * An @Input property that disables the `IgxSelectComponent`.\n     * ```html\n     * <igx-select [disabled]=\"'true'\"></igx-select>\n     * ```\n     */\n    @Input() public disabled = false;\n\n    /**\n     * An @Input property that sets custom OverlaySettings `IgxSelectComponent`.\n     * ```html\n     * <igx-select [overlaySettings] = \"customOverlaySettings\"></igx-select>\n     * ```\n     */\n    @Input()\n    overlaySettings: OverlaySettings;\n\n    /** @hidden @internal */\n    @HostBinding('style.maxHeight')\n    public maxHeight = '256px';\n\n    /** @hidden @internal */\n    public width: string;\n\n    /**\n     * An @Input property that sets how the select will be styled.\n     * The allowed values are `line`, `box` and `border`. The default is `line`.\n     * ```html\n     *<igx-select [type]=\"'box'\"></igx-select>\n     * ```\n     */\n    @Input()\n    public type = 'line';\n\n    /**\n     * The custom template, if any, that should be used when rendering the select TOGGLE(open/close) button\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.select.toggleIconTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-select #select>\n     *      ...\n     *      <ng-template igxSelectToggleIcon let-collapsed>\n     *          <igx-icon>{{ collapsed ? 'remove_circle' : 'remove_circle_outline'}}</igx-icon>\n     *      </ng-template>\n     *  </igx-select>\n     * ```\n     */\n    @ContentChild(IgxSelectToggleIconDirective, { read: TemplateRef })\n    public toggleIconTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering the HEADER for the select items list\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.select.headerTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-select #select>\n     *      ...\n     *      <ng-template igxSelectHeader>\n     *          <div class=\"select__header\">\n     *              This is a custom header\n     *          </div>\n     *      </ng-template>\n     *  </igx-select>\n     * ```\n     */\n    @ContentChild(IgxSelectHeaderDirective, { read: TemplateRef, static: false })\n    public headerTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering the FOOTER for the select items list\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.select.footerTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-select #select>\n     *      ...\n     *      <ng-template igxSelectFooter>\n     *          <div class=\"select__footer\">\n     *              This is a custom footer\n     *          </div>\n     *      </ng-template>\n     *  </igx-select>\n     * ```\n     */\n    @ContentChild(IgxSelectFooterDirective, { read: TemplateRef, static: false })\n    public footerTemplate: TemplateRef<any> = null;\n\n    /** @hidden @internal */\n    public get selectionValue() {\n        const selectedItem = this.selectedItem;\n        return selectedItem ? selectedItem.itemText : '';\n    }\n\n    /** @hidden @internal */\n    public get selectedItem(): IgxSelectItemComponent {\n        return this.selection.first_item(this.id);\n    }\n\n    constructor(\n        protected elementRef: ElementRef,\n        protected cdr: ChangeDetectorRef,\n        protected selection: IgxSelectionAPIService,\n\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions,\n        private _injector: Injector) {\n        super(elementRef, cdr, selection, _displayDensityOptions);\n    }\n\n    //#region ControlValueAccessor\n\n    /** @hidden @internal */\n    private _onChangeCallback: (_: any) => void = noop;\n    /** @hidden @internal */\n    private _onTouchedCallback: () => void = noop;\n\n    /** @hidden @internal */\n    public writeValue = (value: any) => {\n        this.value = value;\n    }\n\n    /** @hidden @internal */\n    public registerOnChange(fn: any): void {\n        this._onChangeCallback = fn;\n    }\n\n    /** @hidden @internal */\n    public registerOnTouched(fn: any): void {\n        this._onTouchedCallback = fn;\n    }\n\n    /** @hidden @internal */\n    public setDisabledState(isDisabled: boolean): void {\n        this.disabled = isDisabled;\n    }\n    //#endregion\n\n    /** @hidden @internal */\n    public getEditElement(): HTMLElement {\n        return this.input.nativeElement;\n    }\n\n    /** @hidden @internal */\n    public selectItem(newSelection: IgxDropDownItemBaseDirective, event?) {\n        const oldSelection = this.selectedItem;\n\n        if (event) {\n            this.toggleDirective.close();\n        }\n        if (newSelection === null || newSelection === oldSelection || newSelection.disabled || newSelection.isHeader) {\n            return;\n        }\n\n        const args: ISelectionEventArgs = { oldSelection, newSelection, cancel: false };\n        this.onSelection.emit(args);\n\n        if (args.cancel) {\n            return;\n        }\n\n        this.setSelection(newSelection);\n        this._value = newSelection.value;\n        this.cdr.detectChanges();\n        this._onChangeCallback(this.value);\n    }\n\n    /** @hidden @internal */\n    public getFirstItemElement(): HTMLElement {\n        return this.children.first.element.nativeElement;\n    }\n\n    /**\n     * Opens the select\n     *\n     * ```typescript\n     * this.select.open();\n     * ```\n     */\n    public open(overlaySettings?: OverlaySettings) {\n        if (this.disabled || this.items.length === 0) {\n            return;\n        }\n        if (!this.selectedItem) {\n            this.navigateFirst();\n        }\n\n        super.open(Object.assign({}, this._overlayDefaults, this.overlaySettings, overlaySettings));\n    }\n\n    /** @hidden @internal */\n    ngAfterContentInit() {\n        this._overlayDefaults = {\n            modal: false,\n            closeOnOutsideClick: false,\n            positionStrategy: new SelectPositioningStrategy(this, { target: this.getEditElement() }),\n            scrollStrategy: new AbsoluteScrollStrategy(),\n            excludePositionTarget: true\n        };\n        this.children.changes.subscribe(() => {\n            this.setSelection(this.items.find(x => x.value === this.value));\n            this.cdr.detectChanges();\n        });\n        Promise.resolve().then(() => this.children.notifyOnChanges());\n    }\n\n    /** @hidden @internal */\n    public onToggleOpening(event: CancelableEventArgs) {\n        this.onOpening.emit(event);\n        if (event.cancel) {\n            return;\n        }\n        this.scrollToItem(this.selectedItem);\n    }\n\n    protected navigate(direction: Navigate, currentIndex?: number) {\n        if (this.collapsed && this.selectedItem) {\n            this.navigateItem(this.selectedItem.itemIndex);\n        }\n        super.navigate(direction, currentIndex);\n    }\n\n    protected manageRequiredAsterisk(): void {\n        if (this.ngControl && this.ngControl.control.validator) {\n            // Run the validation with empty object to check if required is enabled.\n            const error = this.ngControl.control.validator({} as AbstractControl);\n            this.inputGroup.isRequired = error && error.required;\n            this.cdr.markForCheck();\n        }\n    }\n    private setSelection(item: IgxDropDownItemBaseDirective) {\n        if (item && item.value !== undefined && item.value !== null) {\n            this.selection.set(this.id, new Set([item]));\n        } else {\n            this.selection.clear(this.id);\n        }\n    }\n\n    /** @hidden @internal */\n    public onBlur(): void {\n        this._onTouchedCallback();\n        if (this.ngControl && !this.ngControl.valid) {\n             this.input.valid = IgxInputState.INVALID;\n        } else {\n            this.input.valid = IgxInputState.INITIAL;\n        }\n        if (!this.collapsed) {\n            this.toggleDirective.close();\n        }\n    }\n\n    /** @hidden @internal */\n    public onFocus(): void {\n        this._onTouchedCallback();\n    }\n\n    protected onStatusChanged() {\n        if ((this.ngControl.control.touched || this.ngControl.control.dirty) &&\n            (this.ngControl.control.validator || this.ngControl.control.asyncValidator)) {\n            if (this.inputGroup.isFocused) {\n                this.input.valid = this.ngControl.valid ? IgxInputState.VALID : IgxInputState.INVALID;\n            } else {\n                this.input.valid = this.ngControl.valid ? IgxInputState.INITIAL : IgxInputState.INVALID;\n            }\n        }\n        this.manageRequiredAsterisk();\n    }\n    /**\n     * @hidden @internal\n     */\n    public ngOnInit() {\n        this.ngControl = this._injector.get<NgControl>(NgControl, null);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngAfterViewInit() {\n        if (this.ngControl) {\n            this._statusChanges$ = this.ngControl.statusChanges.subscribe(this.onStatusChanged.bind(this));\n            this.manageRequiredAsterisk();\n        }\n        this.cdr.detectChanges();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngOnDestroy() {\n        this.selection.clear(this.id);\n        if (this._statusChanges$) {\n            this._statusChanges$.unsubscribe();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     * Prevent input blur - closing the items container on Header/Footer Template click.\n     */\n   public mousedownHandler(event) {\n        event.preventDefault();\n    }\n}\n\n","import { IgxDropDownItemNavigationDirective } from '../drop-down/drop-down-navigation.directive';\nimport { Directive, Input, HostListener, OnDestroy } from '@angular/core';\nimport { Subscription, timer } from 'rxjs';\nimport { IgxSelectItemComponent } from './select-item.component';\nimport { IgxSelectBase } from './select.common';\n\n/** @hidden @internal */\n@Directive({\n    selector: '[igxSelectItemNavigation]'\n})\nexport class IgxSelectItemNavigationDirective extends IgxDropDownItemNavigationDirective implements OnDestroy {\n\n    @Input('igxSelectItemNavigation')\n    public target: IgxSelectBase;\n\n    constructor() { super(null); }\n\n    /** Captures keydown events and calls the appropriate handlers on the target component */\n    handleKeyDown(event: KeyboardEvent) {\n        if (!event || event.shiftKey) {\n            return;\n        }\n\n        const key = event.key.toLowerCase();\n        if (event.altKey && (key === 'arrowdown' || key === 'arrowup' || key === 'down' || key === 'up')) {\n            this.target.toggle();\n            return;\n        }\n\n        if (this.target.collapsed) {\n            switch (key) {\n                case 'space':\n                case 'spacebar':\n                case ' ':\n                case 'enter':\n                    event.preventDefault();\n                    this.target.open();\n                    return;\n                case 'arrowdown':\n                case 'down':\n                    this.target.navigateNext();\n                    this.target.selectItem(this.target.focusedItem);\n                    event.preventDefault();\n                    return;\n                case 'arrowup':\n                case 'up':\n                    this.target.navigatePrev();\n                    this.target.selectItem(this.target.focusedItem);\n                    event.preventDefault();\n                    return;\n                default:\n                    break;\n            }\n        }\n\n        super.handleKeyDown(event);\n    }\n\n    // tslint:disable:member-ordering\n    private inputStream = '';\n    private clearStream$ = Subscription.EMPTY;\n\n    /** Handle continuous letter typing navigation */\n    @HostListener('keyup', ['$event'])\n    public captureKey(event: KeyboardEvent) {\n        // relying only on key, available on all major browsers:\n        // https://caniuse.com/#feat=keyboardevent-key (IE/Edge quirk doesn't affect letter typing)\n        if (!event || !event.key || event.key.length > 1) {\n            // ignore longer keys ('Alt', 'ArrowDown', etc)\n            return;\n        }\n\n        this.clearStream$.unsubscribe();\n        this.clearStream$ = timer(500).subscribe(() => {\n            this.inputStream = '';\n        });\n        this.inputStream += event.key;\n        const focusedItem = this.target.focusedItem as IgxSelectItemComponent;\n\n        // select the item\n        if (focusedItem && this.inputStream.length > 1 && focusedItem.itemText.toLowerCase().startsWith(this.inputStream.toLowerCase())) {\n            return;\n        }\n        this.activateItemByText(this.inputStream);\n    }\n\n    public activateItemByText(text: string) {\n        const items = this.target.items as IgxSelectItemComponent[];\n        const activeItemIndex = items.indexOf(this.target.focusedItem as IgxSelectItemComponent) || 0;\n        // ^ this is focused OR selected if the dd is closed\n        let nextItem = items.slice(activeItemIndex + 1).find(x => !x.disabled && (x.itemText.toLowerCase().startsWith(text.toLowerCase())));\n\n        if (!nextItem) {\n            nextItem = items.slice(0, activeItemIndex).find(x => !x.disabled && (x.itemText.toLowerCase().startsWith(text.toLowerCase())));\n        }\n\n        if (!nextItem) {\n            return;\n        }\n\n        if (this.target.collapsed) {\n            this.target.selectItem(nextItem);\n        }\n        this.target.navigateItem(items.indexOf(nextItem));\n    }\n\n    ngOnDestroy(): void {\n        this.clearStream$.unsubscribe();\n    }\n}\n","import { Component } from '@angular/core';\nimport { IgxDropDownGroupComponent } from '../drop-down/index';\n\n/**\n * The `<igx-select-item>` is a container intended for row items in\n * a `<igx-select>` container.\n */\n@Component({\n    selector: 'igx-select-item-group',\n    template: `\n        <label id=\"{{labelId}}\">{{ label }}</label>\n        <ng-content select=\"igx-select-item\"></ng-content>\n    `\n})\nexport class IgxSelectGroupComponent extends IgxDropDownGroupComponent {\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { IgxIconModule } from '../icon/index';\nimport { IgxDropDownModule } from './../drop-down/index';\nimport { IgxToggleModule } from './../directives/toggle/toggle.directive';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxInputGroupModule } from '../input-group/input-group.component';\nimport { IgxButtonModule } from '../directives/button/button.directive';\n\nimport { IgxSelectComponent, IgxSelectToggleIconDirective, IgxSelectHeaderDirective, IgxSelectFooterDirective } from './select.component';\nimport { IgxSelectItemComponent } from './select-item.component';\nimport { IgxSelectItemNavigationDirective } from './select-navigation.directive';\nimport { IgxSelectGroupComponent } from './select-group.component';\n\n/** @hidden */\n@NgModule({\n    declarations: [IgxSelectComponent, IgxSelectItemComponent, IgxSelectItemNavigationDirective,\n        IgxSelectToggleIconDirective, IgxSelectGroupComponent, IgxSelectHeaderDirective,\n        IgxSelectFooterDirective],\n    exports: [IgxSelectComponent, IgxSelectItemComponent, IgxSelectItemNavigationDirective,\n         IgxSelectToggleIconDirective, IgxSelectGroupComponent, IgxSelectHeaderDirective,\n         IgxSelectFooterDirective],\n    imports: [IgxRippleModule, CommonModule, IgxInputGroupModule, FormsModule, ReactiveFormsModule,\n        IgxToggleModule, IgxDropDownModule, IgxButtonModule, IgxIconModule],\n    providers: []\n})\nexport class IgxSelectModule { }\n","import { SimpleChanges, SimpleChange } from '@angular/core';\n\n/**\n* @hidden\n*/\nexport function WatchChanges(): PropertyDecorator {\n    return (target: any, key: string, propDesc?: PropertyDescriptor) => {\n        const privateKey = '_' + key.toString();\n        propDesc = propDesc || {\n            configurable: true,\n            enumerable: true,\n        };\n        propDesc.get = propDesc.get || (function (this: any) { return this[privateKey]; });\n        const originalSetter = propDesc.set || (function (this: any, val: any) { this[privateKey] = val; });\n\n        propDesc.set = function (this: any, val: any) {\n            const init = this._init;\n            const oldValue = this[key];\n            if (val !== oldValue || (typeof val === 'object' && val === oldValue)) {\n                originalSetter.call(this, val);\n                if (this.ngOnChanges && !init) {\n                    // in case wacthed prop changes trigger ngOnChanges manually\n                    const changes: SimpleChanges = {\n                        [key]: new SimpleChange(oldValue, val, false)\n                    };\n                    this.ngOnChanges(changes);\n               }\n            }\n        };\n        return propDesc;\n    };\n}\n\nexport function WatchColumnChanges(): PropertyDecorator {\n    return (target: any, key: string, propDesc?: PropertyDescriptor) => {\n        const privateKey = '_' + key.toString();\n        propDesc = propDesc || {\n            configurable: true,\n            enumerable: true,\n        };\n        propDesc.get = propDesc.get || (function (this: any) { return this[privateKey]; });\n        const originalSetter = propDesc.set || (function (this: any, val: any) { this[privateKey] = val; });\n\n        propDesc.set = function (this: any, val: any) {\n            const init = this._init;\n            const oldValue = this[key];\n            originalSetter.call(this, val);\n            if (val !== oldValue || (typeof val === 'object' && val === oldValue)) {\n                if (this.rowIslandAPI.rowIsland) {\n                    this.rowIslandAPI.rowIsland.updateColumnList();\n               }\n            }\n        };\n        return propDesc;\n    };\n}\n\nexport function notifyChanges(repaint = false) {\n    return (_: any, key: string, propDesc?: PropertyDescriptor) => {\n\n        const privateKey = `__${key}`;\n\n        propDesc = propDesc || {\n            enumerable: true,\n            configurable: true\n        };\n\n\n        const originalSetter = propDesc ? propDesc.set : null;\n\n        propDesc.get = propDesc.get || (function(this) { return this[privateKey]; });\n\n        propDesc.set = function(this, newValue) {\n            if (originalSetter) {\n                originalSetter.call(this, newValue);\n                if (this.grid) {\n                    this.grid.notifyChanges(repaint);\n                }\n            } else {\n                if (newValue === this[key]) { return; }\n                this[privateKey] = newValue;\n                if (this.grid) {\n                    this.grid.notifyChanges(repaint);\n                }\n            }\n        };\n        return propDesc as any;\n    };\n}\n","import { IgxHierarchicalGridComponent } from './hierarchical-grid.component';\nimport { IgxRowIslandComponent } from './row-island.component';\nimport { Subject } from 'rxjs';\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class IgxRowIslandAPIService {\n    public rowIsland: IgxRowIslandComponent;\n    public change: Subject<any> = new Subject<any>();\n    protected state: Map<string, IgxRowIslandComponent> = new Map<string, IgxRowIslandComponent>();\n    protected destroyMap: Map<string, Subject<boolean>> = new Map<string, Subject<boolean>>();\n\n    protected childRowIslands: Map<string, IgxRowIslandComponent> = new Map<string, IgxRowIslandComponent>();\n    protected childGrids:  Map<any, IgxHierarchicalGridComponent> = new Map<any, IgxHierarchicalGridComponent>();\n\n    public register(rowIsland: IgxRowIslandComponent) {\n        this.state.set(rowIsland.id, rowIsland);\n        this.destroyMap.set(rowIsland.id, new Subject<boolean>());\n    }\n\n    public unsubscribe(rowIsland: IgxRowIslandComponent) {\n        this.state.delete(rowIsland.id);\n    }\n\n    public get(id: string): IgxRowIslandComponent {\n        return this.state.get(id);\n    }\n\n    public unset(id: string) {\n        this.state.delete(id);\n        this.destroyMap.delete(id);\n    }\n\n    public reset(oldId: string, newId: string) {\n        const destroy = this.destroyMap.get(oldId);\n        const rowIsland = this.get(oldId);\n\n        this.unset(oldId);\n\n        if (rowIsland) {\n            this.state.set(newId, rowIsland);\n        }\n\n        if (destroy) {\n            this.destroyMap.set(newId, destroy);\n        }\n    }\n\n    registerChildRowIsland(rowIsland: IgxRowIslandComponent) {\n        this.childRowIslands.set(rowIsland.key, rowIsland);\n        this.destroyMap.set(rowIsland.key, new Subject<boolean>());\n    }\n\n    unsetChildRowIsland(rowIsland: IgxRowIslandComponent) {\n        this.childRowIslands.delete(rowIsland.key);\n        this.destroyMap.delete(rowIsland.key);\n    }\n\n    getChildRowIsland(rowIslandKey: string) {\n        return this.childRowIslands.get(rowIslandKey);\n    }\n\n    registerChildGrid(parentRowID: string|object, grid: IgxHierarchicalGridComponent) {\n        this.childGrids.set(parentRowID, grid);\n    }\n\n    getChildGrids(inDepth?: boolean) {\n        let allChildren = [];\n        this.childGrids.forEach((grid) => {\n            allChildren.push(grid);\n        });\n        if (inDepth) {\n            this.childRowIslands.forEach((layout) => {\n                allChildren = allChildren.concat(layout.rowIslandAPI.getChildGrids(inDepth));\n            });\n        }\n\n        return allChildren;\n    }\n\n    getChildGridByID(rowID) {\n        return this.childGrids.get(rowID);\n    }\n}\n","import { Injectable, EventEmitter, NgZone } from '@angular/core';\nimport { IGridEditEventArgs } from '../common/events';\nimport { IgxGridBaseDirective } from '../grid';\nimport { FilteringExpressionsTree } from '../../data-operations/filtering-expressions-tree';\n\n\nexport interface GridSelectionRange {\n    rowStart: number;\n    rowEnd: number;\n    columnStart: string | number;\n    columnEnd: string | number;\n}\n\nexport interface ISelectionNode {\n    row: number;\n    column: number;\n    layout?: IMultiRowLayoutNode;\n    isSummaryRow?: boolean;\n}\n\nexport interface IMultiRowLayoutNode {\n    rowStart: number;\n    colStart: number;\n    rowEnd: number;\n    colEnd: number;\n    columnVisibleIndex: number;\n}\n\ninterface ISelectionKeyboardState {\n    node: null | ISelectionNode;\n    shift: boolean;\n    range: GridSelectionRange;\n    active: boolean;\n}\n\ninterface ISelectionPointerState extends ISelectionKeyboardState {\n    ctrl: boolean;\n    primaryButton: boolean;\n}\n\ntype SelectionState = ISelectionKeyboardState | ISelectionPointerState;\n\n\n// TODO: Refactor - export in a separate file\n\nexport class IgxRow {\n    transactionState: any;\n    state: any;\n    newData: any;\n\n    constructor(public id: any, public index: number, public data: any) {}\n\n    createEditEventArgs(): IGridEditEventArgs {\n        return {\n            rowID: this.id,\n            oldValue: { ... this.data },\n            newValue: this.newData,\n            cancel: false\n        };\n    }\n}\n\nexport class IgxCell {\n\n    primaryKey: any;\n    state: any;\n\n    constructor(\n        public id,\n        public rowIndex: number,\n        public column,\n        public value: any,\n        public editValue: any,\n        public rowData: any) {}\n\n    castToNumber(value: any): any {\n        if (this.column.dataType === 'number' && !this.column.inlineEditorTemplate) {\n            const v = parseFloat(value);\n            return !isNaN(v) && isFinite(v) ? v : 0;\n        }\n        return value;\n    }\n\n    createEditEventArgs(): IGridEditEventArgs {\n        return {\n            rowID: this.id.rowID,\n            cellID: this.id,\n            oldValue: this.value,\n            newValue: this.editValue,\n            cancel: false\n        };\n    }\n}\n\n@Injectable()\nexport class IgxGridCRUDService {\n\n    grid;\n    cell: IgxCell | null = null;\n    row: IgxRow | null = null;\n\n    createCell(cell): IgxCell {\n        return new IgxCell(cell.cellID, cell.rowIndex, cell.column, cell.value, cell.value, cell.row.rowData);\n    }\n\n    createRow(cell: IgxCell): IgxRow {\n        return new IgxRow(cell.id.rowID, cell.rowIndex, cell.rowData);\n    }\n\n    sameRow(rowID): boolean {\n        return this.row && this.row.id === rowID;\n    }\n\n    sameCell(cell: IgxCell): boolean {\n        return (this.cell.id.rowID === cell.id.rowID &&\n            this.cell.id.columnID === cell.id.columnID);\n    }\n\n    get inEditMode(): boolean {\n        return !!this.cell;\n    }\n\n    get rowEditing(): boolean {\n        return this.grid.rowEditable;\n    }\n\n    get primaryKey(): any {\n        return this.grid.primaryKey;\n    }\n\n    beginRowEdit() {\n        if (this.grid.rowEditable && (this.grid.primaryKey === undefined || this.grid.primaryKey === null)) {\n            console.warn('The grid must have a `primaryKey` specified when using `rowEditable`!');\n        }\n        this.row = this.createRow(this.cell);\n        const args = {\n            rowID: this.row.id,\n            oldValue: this.row.data,\n            cancel: false\n        };\n        this.grid.onRowEditEnter.emit(args);\n        if (args.cancel) {\n            this.endRowEdit();\n            return;\n        }\n        this.row.transactionState = this.grid.transactions.getAggregatedValue(this.row.id, true);\n        this.grid.transactions.startPending();\n        this.grid.openRowOverlay(this.row.id);\n    }\n\n\n    endRowEdit() {\n        this.row = null;\n    }\n\n    begin(cell): void {\n        const newCell = this.createCell(cell);\n        newCell.primaryKey = this.primaryKey;\n        const args = {\n            cellID: newCell.id,\n            rowID: newCell.id.rowID,\n            oldValue: newCell.value,\n            cancel: false\n        };\n\n        this.grid.onCellEditEnter.emit(args);\n\n        if (args.cancel) {\n            this.end();\n            return;\n        }\n\n        if (this.rowEditing) {\n            if (this.row && !this.sameRow(newCell.id.rowID)) {\n                this.grid.endEdit(true);\n                this.cell = newCell;\n                this.beginRowEdit();\n                return;\n            }\n\n            this.cell = newCell;\n\n            if (!this.row) {\n                this.beginRowEdit();\n                return;\n            }\n        } else {\n            this.cell = newCell;\n            this.endRowEdit();\n        }\n    }\n\n    end(): void {\n        this.cell = null;\n    }\n\n\n    isInEditMode(rowIndex: number, columnIndex: number): boolean {\n        if (!this.cell) {\n            return false;\n        }\n        return this.cell.column.index === columnIndex && this.cell.rowIndex === rowIndex;\n    }\n}\n\n\n@Injectable()\nexport class IgxGridSelectionService {\n    grid;\n    dragMode = false;\n    activeElement: ISelectionNode | null;\n    keyboardState = {} as ISelectionKeyboardState;\n    pointerState = {} as ISelectionPointerState;\n\n\n    selection = new Map<number, Set<number>>();\n    temp = new Map<number, Set<number>>();\n    _ranges: Set<string> = new Set<string>();\n    _selectionRange: Range;\n    rowSelection: Set<any> = new Set<any>();\n    private allRowsSelected: boolean;\n\n    /**\n     * Returns the current selected ranges in the grid from both\n     * keyboard and pointer interactions\n     */\n    get ranges(): GridSelectionRange[] {\n\n        // The last action was keyboard + shift selection -> add it\n        this.addKeyboardRange();\n\n        const ranges = Array.from(this._ranges).map(range => JSON.parse(range));\n\n        // No ranges but we have a focused cell -> add it\n        if (!ranges.length && this.activeElement && this.grid.isCellSelectable) {\n            ranges.push(this.generateRange(this.activeElement));\n        }\n\n        return ranges;\n    }\n\n    get primaryButton(): boolean {\n        return this.pointerState.primaryButton;\n    }\n\n    set primaryButton(value: boolean) {\n        this.pointerState.primaryButton = value;\n    }\n\n    constructor(private zone: NgZone) {\n        this.initPointerState();\n        this.initKeyboardState();\n    }\n\n    /**\n     * Resets the keyboard state\n     */\n    initKeyboardState(): void {\n        this.keyboardState.node = null;\n        this.keyboardState.shift = false;\n        this.keyboardState.range = null;\n        this.keyboardState.active = false;\n    }\n\n    /**\n     * Resets the pointer state\n     */\n    initPointerState(): void {\n        this.pointerState.node = null;\n        this.pointerState.ctrl = false;\n        this.pointerState.shift = false;\n        this.pointerState.range = null;\n        this.pointerState.primaryButton = true;\n    }\n\n    /**\n     * Adds a single node.\n     * Single clicks | Ctrl + single clicks on cells is the usual case.\n     */\n    add(node: ISelectionNode, addToRange = true): void {\n        this.selection.has(node.row) ? this.selection.get(node.row).add(node.column) :\n            this.selection.set(node.row, new Set<number>()).get(node.row).add(node.column);\n\n        if (addToRange) { this._ranges.add(JSON.stringify(this.generateRange(node))); }\n    }\n\n    /**\n     * Adds the active keyboard range selection (if any) to the `ranges` meta.\n     */\n    addKeyboardRange(): void {\n        if (this.keyboardState.range) {\n            this._ranges.add(JSON.stringify(this.keyboardState.range));\n        }\n    }\n\n    remove(node: ISelectionNode): void {\n        if (this.selection.has(node.row)) {\n            this.selection.get(node.row).delete(node.column);\n        }\n        if (this.isActiveNode(node)) {\n            this.activeElement = null;\n        }\n        this._ranges.delete(JSON.stringify(this.generateRange(node)));\n    }\n\n    isInMap(node: ISelectionNode): boolean {\n        return (this.selection.has(node.row) && this.selection.get(node.row).has(node.column)) ||\n            (this.temp.has(node.row) && this.temp.get(node.row).has(node.column));\n    }\n\n    selected(node: ISelectionNode): boolean {\n        return (this.isActiveNode(node) && this.grid.isCellSelectable) || this.isInMap(node);\n    }\n\n    isActiveNode(node: ISelectionNode): boolean {\n        if (this.activeElement) {\n            const isActive = this.activeElement.column === node.column && this.activeElement.row === node.row;\n            if (this.grid.hasColumnLayouts) {\n                const layout = this.activeElement.layout;\n                return isActive && this.isActiveLayout(layout, node.layout);\n            }\n            return isActive;\n        }\n        return false;\n    }\n\n    isActiveLayout(current: IMultiRowLayoutNode, target: IMultiRowLayoutNode): boolean {\n        return current.columnVisibleIndex === target.columnVisibleIndex;\n    }\n\n    addRangeMeta(node: ISelectionNode, state?: SelectionState): void {\n        this._ranges.add(JSON.stringify(this.generateRange(node, state)));\n    }\n\n    removeRangeMeta(node: ISelectionNode, state?: SelectionState): void {\n        this._ranges.delete(JSON.stringify(this.generateRange(node, state)));\n    }\n\n    /**\n     * Generates a new selection range from the given `node`.\n     * If `state` is passed instead it will generate the range based on the passed `node`\n     * and the start node of the `state`.\n     */\n    generateRange(node: ISelectionNode, state?: SelectionState): GridSelectionRange {\n        if (!state) {\n            return {\n                rowStart: node.row,\n                rowEnd: node.row,\n                columnStart: node.column,\n                columnEnd: node.column\n            };\n        }\n\n        const { row, column } = state.node;\n        const rowStart = Math.min(node.row, row);\n        const rowEnd = Math.max(node.row, row);\n        const columnStart = Math.min(node.column, column);\n        const columnEnd = Math.max(node.column, column);\n\n        return { rowStart, rowEnd, columnStart, columnEnd };\n    }\n\n    /**\n     *\n     */\n    keyboardStateOnKeydown(node: ISelectionNode, shift: boolean, shiftTab: boolean): void {\n        this.keyboardState.active = true;\n        this.initPointerState();\n        this.keyboardState.shift = shift && !shiftTab;\n\n        // Kb navigation with shift and no previous node.\n        // Clear the current selection init the start node.\n        if (this.keyboardState.shift && !this.keyboardState.node) {\n            this.clear();\n            this.keyboardState.node = node;\n        }\n    }\n\n    keyboardStateOnFocus(node: ISelectionNode, emitter: EventEmitter<GridSelectionRange>, dom): void {\n        const kbState = this.keyboardState;\n\n        // Focus triggered by keyboard navigation\n        if (kbState.active) {\n            if (isChromium()) {\n                this._moveSelectionChrome(dom);\n            }\n            // Start generating a range if shift is hold\n            if (kbState.shift) {\n                this.dragSelect(node, kbState);\n                kbState.range = this.generateRange(node, kbState);\n                emitter.emit(this.generateRange(node, kbState));\n                return;\n            }\n\n            this.initKeyboardState();\n            this.clear();\n            this.add(node);\n        }\n    }\n\n    pointerDown(node: ISelectionNode, shift: boolean, ctrl: boolean): void {\n        this.addKeyboardRange();\n        this.initKeyboardState();\n        this.pointerState.ctrl = ctrl;\n        this.pointerState.shift = shift;\n\n        // No ctrl key pressed - no multiple selection\n        if (!ctrl) {\n            this.clear();\n        }\n\n        if (shift) {\n            // No previously 'clicked' node. Use the last active node.\n            if (!this.pointerState.node) {\n                this.pointerState.node = this.activeElement || node;\n            }\n            this.pointerDownShiftKey(node);\n            this.clearTextSelection();\n            return;\n        }\n\n        this.removeRangeMeta(node);\n        this.pointerState.node = node;\n    }\n\n    pointerDownShiftKey(node: ISelectionNode): void {\n        this.clear();\n        this.selectRange(node, this.pointerState);\n    }\n\n    mergeMap(target: Map<number, Set<number>>, source: Map<number, Set<number>>): void {\n        const iterator = source.entries();\n        let pair = iterator.next();\n        let key: number;\n        let value: Set<number>;\n\n        while (!pair.done) {\n            [key, value] = pair.value;\n            if (target.has(key)) {\n                const newValue = target.get(key);\n                value.forEach(record => newValue.add(record));\n                target.set(key, newValue);\n            } else {\n                target.set(key, value);\n            }\n            pair = iterator.next();\n        }\n    }\n\n    pointerEnter(node: ISelectionNode, event: PointerEvent): boolean {\n        // https://www.w3.org/TR/pointerevents/#the-button-property\n        this.dragMode = event.buttons === 1 && event.button === -1;\n        if (!this.dragMode) {\n            return false;\n        }\n        this.clearTextSelection();\n\n        // If the users triggers a drag-like event by first clicking outside the grid cells\n        // and then enters in the grid body we may not have a initial pointer starting node.\n        // Assume the first pointerenter node is where we start.\n        if (!this.pointerState.node) {\n            this.pointerState.node = node;\n        }\n\n        this.pointerState.ctrl ? this.selectRange(node, this.pointerState, this.temp) :\n            this.dragSelect(node, this.pointerState);\n        return true;\n    }\n\n    pointerUp(node: ISelectionNode, emitter: EventEmitter<GridSelectionRange>): boolean {\n        if (this.dragMode) {\n            this.restoreTextSelection();\n            this.addRangeMeta(node, this.pointerState);\n            this.mergeMap(this.selection, this.temp);\n            this.zone.runTask(() => emitter.emit(this.generateRange(node, this.pointerState)));\n            this.temp.clear();\n            this.dragMode = false;\n            return true;\n        }\n\n        if (this.pointerState.shift) {\n            this.clearTextSelection();\n            this.restoreTextSelection();\n            this.addRangeMeta(node, this.pointerState);\n            emitter.emit(this.generateRange(node, this.pointerState));\n            return true;\n        }\n\n        this.add(node);\n        return false;\n    }\n\n    selectRange(node: ISelectionNode, state: SelectionState, collection: Map<number, Set<number>> = this.selection): void {\n        if (collection === this.temp) {\n            collection.clear();\n        }\n        const { rowStart, rowEnd, columnStart, columnEnd } = this.generateRange(node, state);\n        for (let i = rowStart; i <= rowEnd; i++) {\n            for (let j = columnStart as number; j <= columnEnd; j++) {\n                collection.has(i) ? collection.get(i).add(j) :\n                    collection.set(i, new Set<number>()).get(i).add(j);\n            }\n        }\n    }\n\n    dragSelect(node: ISelectionNode, state: SelectionState): void {\n        if (!this.pointerState.ctrl) {\n            this.selection.clear();\n        }\n        this.selectRange(node, state);\n    }\n\n    clear(clearAcriveEl = false): void {\n        if (clearAcriveEl) { this.activeElement = null; }\n        this.selection.clear();\n        this.temp.clear();\n        this._ranges.clear();\n    }\n\n    clearTextSelection(): void {\n        const selection = window.getSelection();\n        if (selection.rangeCount) {\n            this._selectionRange = selection.getRangeAt(0);\n            this._selectionRange.collapse(true);\n            selection.removeAllRanges();\n        }\n    }\n\n    restoreTextSelection(): void {\n        const selection = window.getSelection();\n        if (!selection.rangeCount) {\n            selection.addRange(this._selectionRange || document.createRange());\n        }\n    }\n\n    /**\n     * ( \n     * Chrome and Chromium don't care about the active\n     * range after keyboard navigation, thus this.\n     */\n    _moveSelectionChrome(node: Node) {\n        const selection = window.getSelection();\n        selection.removeAllRanges();\n        const range = new Range();\n        range.selectNode(node);\n        range.collapse(true);\n        selection.addRange(range);\n    }\n\n    /** Returns array of the selected row id's. */\n    getSelectedRows(): Array<any> {\n        return this.rowSelection.size ? Array.from(this.rowSelection.keys()) : [];\n    }\n\n    /** Clears row selection, if filtering is applied clears only selected rows from filtered data. */\n    clearRowSelection(event?): void {\n        const removedRec = this.isFilteringApplied() ?\n            this.getRowIDs(this.allData).filter(rID => this.isRowSelected(rID)) : this.getSelectedRows();\n        const newSelection = this.isFilteringApplied() ? this.getSelectedRows().filter(x => !removedRec.includes(x)) : [];\n        this.emitRowSelectionEvent(newSelection, [], removedRec, event);\n    }\n\n    /** Select all rows, if filtering is applied select only from filtered data. */\n    selectAllRows(event?) {\n        const allRowIDs = this.getRowIDs(this.allData);\n        const addedRows =  allRowIDs.filter((rID) => !this.isRowSelected(rID));\n        const newSelection = this.rowSelection.size ? this.getSelectedRows().concat(addedRows) : addedRows;\n\n        this.emitRowSelectionEvent(newSelection, addedRows, [], event);\n    }\n\n    /** Select the specified row and emit event. */\n    selectRowById(rowID, clearPrevSelection?, event?): void {\n        if (!this.grid.isRowSelectable || this.isRowDeleted(rowID)) { return; }\n        clearPrevSelection = !this.grid.isMultiRowSelectionEnabled || clearPrevSelection;\n\n        const newSelection = clearPrevSelection ? [rowID] : this.getSelectedRows().indexOf(rowID) !== -1 ?\n            this.getSelectedRows() : [...this.getSelectedRows(), rowID];\n        const removed = clearPrevSelection ? this.getSelectedRows() : [];\n        this.emitRowSelectionEvent(newSelection, [rowID], removed, event);\n    }\n\n    /** Deselect the specified row and emit event. */\n    deselectRow(rowID, event?): void {\n        if (!this.isRowSelected(rowID)) { return; }\n        const newSelection = this.getSelectedRows().filter(r => r !== rowID);\n        if (this.rowSelection.size && this.rowSelection.has(rowID)) {\n            this.emitRowSelectionEvent(newSelection, [], [rowID], event);\n        }\n    }\n\n    /** Select specified rows. No event is emitted. */\n    selectRowsWithNoEvent(rowIDs: any[], clearPrevSelection?): void {\n        if (clearPrevSelection) { this.rowSelection.clear(); }\n        rowIDs.forEach(rowID => { this.rowSelection.add(rowID); });\n        this.allRowsSelected = undefined;\n    }\n\n    /** Deselect specified rows. No event is emitted. */\n    deselectRowsWithNoEvent(rowIDs: any[]): void  {\n        rowIDs.forEach(rowID => this.rowSelection.delete(rowID));\n        this.allRowsSelected = undefined;\n    }\n\n    isRowSelected(rowID): boolean {\n        return this.rowSelection.size > 0 && this.rowSelection.has(rowID);\n    }\n\n    /** Select range from last selected row to the current specified row.*/\n    selectMultipleRows(rowID, rowData, event?): void  {\n        this.allRowsSelected = undefined;\n        if (!this.rowSelection.size || this.isRowDeleted(rowID)) {\n            this.selectRowById(rowID);\n            return;\n        }\n        const gridData = this.allData;\n        const lastRowID = this.getSelectedRows()[this.rowSelection.size - 1];\n        const currIndex = gridData.indexOf(this.getRowDataById(lastRowID));\n        const newIndex = gridData.indexOf(rowData);\n        const rows = gridData.slice(Math.min(currIndex, newIndex), Math.max(currIndex, newIndex) + 1);\n\n        const added = this.getRowIDs(rows).filter(rID => !this.isRowSelected(rID));\n        const newSelection = this.getSelectedRows().concat(added);\n\n        this.emitRowSelectionEvent(newSelection, added, [], event);\n    }\n\n    areAllRowSelected(): boolean {\n        if (!this.grid.data) { return false; }\n        if (this.allRowsSelected !== undefined) { return this.allRowsSelected; }\n\n        const dataItemsID = this.getRowIDs(this.allData);\n        return this.allRowsSelected = Math.min(this.rowSelection.size, dataItemsID.length) > 0 &&\n            new Set(Array.from(this.rowSelection.values()).concat(dataItemsID)).size === this.rowSelection.size;\n    }\n\n    hasSomeRowSelected(): boolean {\n        const filteredData = this.isFilteringApplied() ?\n            this.getRowIDs(this.grid.filteredData).some(rID => this.isRowSelected(rID)) : true;\n        return this.rowSelection.size > 0 && filteredData && !this.areAllRowSelected();\n    }\n\n    public get filteredSelectedRowIds(): any[] {\n        return this.isFilteringApplied() ?\n            this.getRowIDs(this.allData).filter(rowID => this.isRowSelected(rowID)) :\n            this.getSelectedRows().filter(rowID => !this.isRowDeleted(rowID));\n    }\n\n    public emitRowSelectionEvent(newSelection, added, removed, event?): boolean {\n        const currSelection = this.getSelectedRows();\n        if (this.areEqualCollections(currSelection, newSelection)) { return; }\n\n        const args = {\n            oldSelection: currSelection, newSelection: newSelection,\n            added: added, removed: removed, event: event, cancel: false\n        };\n        this.grid.onRowSelectionChange.emit(args);\n        if (args.cancel) { return; }\n        this.selectRowsWithNoEvent(args.newSelection, true);\n    }\n\n    public getRowDataById(rowID): Object {\n        if (!this.grid.primaryKey) { return rowID; }\n        const rowIndex = this.getRowIDs(this.grid.gridAPI.get_all_data(true)).indexOf(rowID);\n        return rowIndex < 0 ? {} : this.grid.gridAPI.get_all_data(true)[rowIndex];\n    }\n\n    public getRowIDs(data): Array<any> {\n        return this.grid.primaryKey && data.length ? data.map(rec => rec[this.grid.primaryKey]) : data;\n    }\n\n    public clearHeaderCBState(): void  {\n        this.allRowsSelected = undefined;\n    }\n\n    /**Clear rowSelection and update checkbox state*/\n    public clearAllSelectedRows(): void {\n        this.rowSelection.clear();\n        this.clearHeaderCBState();\n    }\n\n    /** Returns all data in the grid, with applied filtering and sorting and without deleted rows. */\n    public get allData(): Array<any> {\n        const allData = this.isFilteringApplied() || this.grid.sortingExpressions.length ?\n            this.grid.filteredSortedData : this.grid.gridAPI.get_all_data(true);\n        return allData.filter(rData => !this.isRowDeleted(this.grid.gridAPI.get_row_id(rData)));\n    }\n\n    private areEqualCollections(first, second): boolean {\n        return first.length === second.length && new Set(first.concat(second)).size === first.length;\n    }\n\n    private isFilteringApplied(): boolean {\n        const grid = this.grid as IgxGridBaseDirective;\n        return !FilteringExpressionsTree.empty(grid.filteringExpressionsTree) ||\n            !FilteringExpressionsTree.empty(grid.advancedFilteringExpressionsTree);\n    }\n\n    private isRowDeleted(rowID): boolean {\n        return this.grid.gridAPI.row_deleted_transaction(rowID);\n    }\n}\n\nexport function isChromium(): boolean {\n    return (/Chrom|e?ium/g.test(navigator.userAgent) || /Google Inc/g.test(navigator.vendor)) && !/Edge/g.test(navigator.userAgent);\n}\n","import { Inject, Injectable, NgZone } from '@angular/core';\nimport { getDOM as getDOM } from '@angular/platform-browser';\nimport { DOCUMENT } from '@angular/common';\nimport { PlatformUtil } from './utils';\n\nconst EVENT_SUFFIX = 'precise';\n\n/**\n * Touch gestures manager based on Hammer.js\n * Use with caution, this will track references for single manager per element. Very TBD. Much TODO.\n * @hidden\n */\n@Injectable()\nexport class HammerGesturesManager {\n    private platformBrowser: boolean;\n    /**\n     * Event option defaults for each recognizer, see http://hammerjs.github.io/api/ for API listing.\n     */\n    protected hammerOptions: HammerOptions = {};\n\n    private _hammerManagers: Array<{ element: EventTarget, manager: HammerManager; }> = [];\n\n    constructor(private _zone: NgZone, @Inject(DOCUMENT) private doc: any, private platformUtil: PlatformUtil) {\n        this.platformBrowser = this.platformUtil.isBrowser;\n        if (this.platformBrowser) {\n            this.hammerOptions = {\n                // D.P. #447 Force TouchInput due to PointerEventInput bug (https://github.com/hammerjs/hammer.js/issues/1065)\n                // see https://github.com/IgniteUI/igniteui-angular/issues/447#issuecomment-324601803\n                inputClass: Hammer.TouchInput,\n                recognizers: [\n                    [Hammer.Pan, { threshold: 0 }],\n                    [Hammer.Swipe, {\n                        direction: Hammer.DIRECTION_HORIZONTAL\n                    }],\n                    [Hammer.Tap],\n                    [Hammer.Tap, { event: 'doubletap', taps: 2 }, ['tap']]\n                ]\n            };\n        }\n    }\n\n    public supports(eventName: string): boolean {\n        return eventName.toLowerCase().endsWith('.' + EVENT_SUFFIX);\n    }\n\n    /**\n     * Add listener extended with options for Hammer.js. Will use defaults if none are provided.\n     * Modeling after other event plugins for easy future modifications.\n     */\n    public addEventListener(\n        element: HTMLElement,\n        eventName: string,\n        eventHandler: (eventObj) => void,\n        options: HammerOptions = null): () => void {\n        if (!this.platformBrowser) {\n            return;\n        }\n\n        // Creating the manager bind events, must be done outside of angular\n        return this._zone.runOutsideAngular(() => {\n            let mc: HammerManager = this.getManagerForElement(element);\n            if (mc === null) {\n                // new Hammer is a shortcut for Manager with defaults\n                mc = new Hammer(element, Object.assign(this.hammerOptions, options));\n                this.addManagerForElement(element, mc);\n            }\n            const handler = (eventObj) => { this._zone.run(() => { eventHandler(eventObj); }); };\n            mc.on(eventName, handler);\n            return () => { mc.off(eventName, handler); };\n        });\n    }\n\n    /**\n     * Add listener extended with options for Hammer.js. Will use defaults if none are provided.\n     * Modeling after other event plugins for easy future modifications.\n     *\n     * @param target Can be one of either window, body or document(fallback default).\n     */\n    public addGlobalEventListener(target: string, eventName: string, eventHandler: (eventObj) => void): () => void {\n        if (!this.platformBrowser) {\n            return;\n        }\n\n        const element = this.getGlobalEventTarget(target);\n\n        // Creating the manager bind events, must be done outside of angular\n        return this.addEventListener(element as HTMLElement, eventName, eventHandler);\n    }\n\n    /**\n     * Exposes [Dom]Adapter.getGlobalEventTarget to get global event targets.\n     * Supported: window, document, body. Defaults to document for invalid args.\n     * @param target Target name\n     */\n    public getGlobalEventTarget(target: string): EventTarget {\n        return getDOM().getGlobalEventTarget(this.doc, target);\n    }\n\n    /**\n     * Set HammerManager options.\n     *\n     * @param element The DOM element used to create the manager on.\n     *\n     * ### Example\n     *\n     * ```ts\n     * manager.setManagerOption(myElem, \"pan\", { pointers: 1 });\n     * ```\n     */\n    public setManagerOption(element: EventTarget, event: string, options: any) {\n        const manager = this.getManagerForElement(element);\n        manager.get(event).set(options);\n    }\n\n    /**\n     * Add an element and manager map to the internal collection.\n     *\n     * @param element The DOM element used to create the manager on.\n     */\n    public addManagerForElement(element: EventTarget, manager: HammerManager) {\n        this._hammerManagers.push({element, manager});\n    }\n\n    /**\n     * Get HammerManager for the element or null\n     *\n     * @param element The DOM element used to create the manager on.\n     */\n    public getManagerForElement(element: EventTarget): HammerManager {\n        const result =  this._hammerManagers.filter((value, index, array) => {\n            return value.element === element;\n        });\n        return result.length ? result[0].manager : null;\n    }\n\n    /**\n     * Destroys the HammerManager for the element, removing event listeners in the process.\n     *\n     * @param element The DOM element used to create the manager on.\n     */\n    public removeManagerForElement(element: HTMLElement) {\n        let index: number = null;\n        for (let i = 0; i < this._hammerManagers.length; i++) {\n            if (element === this._hammerManagers[i].element) {\n                index = i;\n                break;\n            }\n        }\n        if (index !== null) {\n            const item = this._hammerManagers.splice(index, 1)[0];\n            // destroy also\n            item.manager.destroy();\n        }\n    }\n\n    /** Destroys all internally tracked HammerManagers, removing event listeners in the process. */\n    public destroy() {\n        for (const item of this._hammerManagers) {\n            item.manager.destroy();\n        }\n        this._hammerManagers = [];\n    }\n}\n","\nexport enum FilterMode {\n    quickFilter = 'quickFilter',\n    excelStyleFilter = 'excelStyleFilter'\n}\n\nexport enum GridSummaryPosition {\n    top = 'top',\n    bottom = 'bottom'\n}\n\nexport enum GridSummaryCalculationMode {\n    rootLevelOnly = 'rootLevelOnly',\n    childLevelsOnly = 'childLevelsOnly',\n    rootAndChildLevels = 'rootAndChildLevels'\n}\n\nexport enum GridKeydownTargetType {\n    dataCell = 'dataCell',\n    summaryCell = 'summaryCell',\n    groupRow = 'groupRow',\n    hierarchicalRow = 'hierarchicalRow'\n}\n\nexport enum GridSelectionMode {\n    none = 'none',\n    single = 'single',\n    multiple = 'multiple',\n}\n\nexport enum ColumnDisplayOrder {\n    Alphabetical = 'Alphabetical',\n    DisplayOrder = 'DisplayOrder'\n}\n","import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Input,\n    TemplateRef,\n    ViewChild,\n    NgZone,\n    OnInit,\n    OnDestroy,\n    OnChanges,\n    SimpleChanges\n} from '@angular/core';\nimport { IgxTextHighlightDirective } from '../directives/text-highlight/text-highlight.directive';\nimport { GridBaseAPIService } from './api.service';\nimport {\n    getNodeSizeViaRange, ROW_COLLAPSE_KEYS, ROW_EXPAND_KEYS, SUPPORTED_KEYS, NAVIGATION_KEYS, isIE, isLeftClick, PlatformUtil\n} from '../core/utils';\nimport { State } from '../services/index';\nimport { IgxGridBaseDirective } from './grid-base.directive';\nimport { IgxGridSelectionService, ISelectionNode, IgxGridCRUDService } from './selection/selection.service';\nimport { DeprecateProperty, DeprecateMethod } from '../core/deprecateDecorators';\nimport { HammerGesturesManager } from '../core/touch';\nimport { ColumnType } from './common/column.interface';\nimport { RowType } from './common/row.interface';\nimport { GridSelectionMode } from './common/enums';\nimport { GridType } from './common/grid.interface';\nimport { IgxGridComponent, ISearchInfo } from './grid';\n\n/**\n * Providing reference to `IgxGridCellComponent`:\n * ```typescript\n * @ViewChild('grid', { read: IgxGridComponent })\n *  public grid: IgxGridComponent;\n * ```\n * ```typescript\n *  let column = this.grid.columnList.first;\n * ```\n * ```typescript\n *  let cell = column.cells[0];\n * ```\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    selector: 'igx-grid-cell',\n    templateUrl: './cell.component.html',\n    providers: [HammerGesturesManager]\n})\nexport class IgxGridCellComponent implements OnInit, OnChanges, OnDestroy {\n    private _vIndex = -1;\n    protected _lastSearchInfo: ISearchInfo;\n\n    /**\n     * Gets the column of the cell.\n     * ```typescript\n     *  let cellColumn = this.cell.column;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @Input()\n    public column: ColumnType;\n\n    /**\n     * Gets the row of the cell.\n     * ```typescript\n     * let cellRow = this.cell.row;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @Input()\n    public row: RowType;\n\n    /**\n     * Gets the data of the row of the cell.\n     * ```typescript\n     * let rowData = this.cell.rowData;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @Input()\n    public rowData: any;\n\n    /**\n     * Sets/gets the template of the cell.\n     * ```html\n     * <ng-template #cellTemplate igxCell let-value>\n     *   <div style=\"font-style: oblique; color:blueviolet; background:red\">\n     *       <span>{{value}}</span>\n     *   </div>\n     * </ng-template>\n     * ```\n     * ```typescript\n     * @ViewChild('cellTemplate',{read: TemplateRef})\n     * cellTemplate: TemplateRef<any>;\n     * ```\n     * ```typescript\n     * this.cell.cellTemplate = this.cellTemplate;\n     * ```\n     * ```typescript\n     * let template =  this.cell.cellTemplate;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @Input()\n    public cellTemplate: TemplateRef<any>;\n\n    /**\n     * Sets/gets the cell value.\n     * ```typescript\n     * this.cell.value = \"Cell Value\";\n     * ```\n     * ```typescript\n     * let cellValue = this.cell.value;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @Input()\n    public value: any;\n\n    /**\n     * Sets/gets the highlight class of the cell.\n     * Default value is `\"igx-highlight\"`.\n     * ```typescript\n     * let highlightClass = this.cell.highlightClass;\n     * ```\n     * ```typescript\n     * this.cell.highlightClass = 'igx-cell-highlight';\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    public highlightClass = 'igx-highlight';\n\n    /**\n     * Sets/gets the active highlight class class of the cell.\n     * Default value is `\"igx-highlight__active\"`.\n     * ```typescript\n     * let activeHighlightClass = this.cell.activeHighlightClass;\n     * ```\n     * ```typescript\n     * this.cell.activeHighlightClass = 'igx-cell-highlight_active';\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    public activeHighlightClass = 'igx-highlight__active';\n\n    /**\n     * Gets the cell formatter.\n     * ```typescript\n     * let cellForamatter = this.cell.formatter;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @Input()\n    formatter: (value: any) => any;\n\n    /**\n     * Gets the cell template context object.\n     * ```typescript\n     *  let context = this.cell.context();\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    get context(): any {\n        return {\n            $implicit: this.value,\n            cell: this\n        };\n    }\n\n    /**\n     * Gets the cell template.\n     * ```typescript\n     * let template = this.cell.template;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    get template(): TemplateRef<any> {\n        if (this.editMode) {\n            const inlineEditorTemplate = this.column.inlineEditorTemplate;\n            return inlineEditorTemplate ? inlineEditorTemplate : this.inlineEditorTemplate;\n        }\n        if (this.cellTemplate) {\n            return this.cellTemplate;\n        }\n        return this.defaultCellTemplate;\n    }\n\n    /**\n     * Gets the `id` of the grid in which the cell is stored.\n     * ```typescript\n     * let gridId = this.cell.gridID;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    get gridID(): any {\n        return this.row.gridID;\n    }\n\n    /**\n     * Gets the grid of the cell.\n     * ```typescript\n     * let grid = this.cell.grid;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    get grid(): any {\n        return this.gridAPI.grid;\n    }\n\n    /**\n     * Gets the `index` of the row where the cell is stored.\n     * ```typescript\n     * let rowIndex = this.cell.rowIndex;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @HostBinding('attr.data-rowIndex')\n    get rowIndex(): number {\n        return this.row.index;\n    }\n\n    /**\n     * Gets the `index` of the cell column.\n     * ```typescript\n     * let columnIndex = this.cell.columnIndex;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    get columnIndex(): number {\n        return this.column.index;\n    }\n\n    /**\n     * Gets the visible `index` of the in which the cell is stored.\n     * ```typescript\n     * let visibleColumnIndex = this.cell.visibleColumnIndex;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @HostBinding('attr.data-visibleIndex')\n    @Input()\n    get visibleColumnIndex() {\n        return this.column.columnLayoutChild ? this.column.visibleIndex : this._vIndex;\n    }\n\n    set visibleColumnIndex(val) {\n        this._vIndex = val;\n    }\n\n    /**\n     * Gets the ID of the cell.\n     * ```typescript\n     * let cellID = this.cell.cellID;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    public get cellID() {\n        const primaryKey = this.grid.primaryKey;\n        const rowID = primaryKey ? this.rowData[primaryKey] : this.rowData;\n        return { rowID, columnID: this.columnIndex, rowIndex: this.rowIndex };\n    }\n\n    /**\n     * Returns a reference to the nativeElement of the cell.\n     * ```typescript\n     * let cellNativeElement = this.cell.nativeElement;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    get nativeElement(): HTMLElement {\n        return this.element.nativeElement;\n    }\n\n    /**\n     * @deprecated\n     * Use `cell.editMode` as a getter and\n     * `cell.setEditMode(true | false)` to start/exit edit mode.\n     *\n     * Gets/sets whether the cell is in edit mode.\n     * ```typescript\n     * let isCellInEditMode = this.cell.inEditMode;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @DeprecateProperty(`'inEditMode' is deprecated\\nUse 'editMode' to get the current state and 'setEditMode(boolean)' as a setter`)\n    get inEditMode(): boolean {\n        return this.editMode;\n    }\n\n    set inEditMode(value: boolean) {\n        this.setEditMode(value);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @Input()\n    get cellSelectionMode() {\n        return this._cellSelection;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @Input()\n    set lastSearchInfo(value: ISearchInfo) {\n        this._lastSearchInfo = value;\n        this.highlightText(this._lastSearchInfo.searchText, this._lastSearchInfo.caseSensitive, this._lastSearchInfo.exactMatch);\n    }\n\n    set cellSelectionMode(value) {\n        if (this._cellSelection === value) { return; }\n         this.zone.runOutsideAngular(() => {\n            value === GridSelectionMode.multiple ?\n            this.addPointerListeners(value) : this.removePointerListeners(this._cellSelection);\n        });\n        this._cellSelection = value;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @Input()\n    @HostBinding('class.igx-grid__td--pinned-last')\n    lastPinned = false;\n\n    /**\n     * Returns whether the cell is in edit mode.\n     */\n    @Input()\n    @HostBinding('class.igx-grid__td--editing')\n    editMode = false;\n\n    /**\n     * Sets/get the `tabindex` property of the cell.\n     * Default value is `0`.\n     * ```typescript\n     * this.cell.tabindex = 1;\n     * ```\n     * ```typescript\n     * let cellTabIndex = this.cell.tabindex;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @HostBinding('attr.tabindex')\n    public tabindex = 0;\n\n    /**\n     * Sets/get the `role` property of the cell.\n     * Default value is `\"gridcell\"`.\n     * ```typescript\n     * this.cell.role = 'grid-cell';\n     * ```\n     * ```typescript\n     * let cellRole = this.cell.role;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @HostBinding('attr.role')\n    public role = 'gridcell';\n\n    /**\n     * Gets whether the cell is editable.\n     * ```typescript\n     * let isCellReadonly = this.cell.readonly;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @HostBinding('attr.aria-readonly')\n    get readonly(): boolean {\n        return !this.column.editable;\n    }\n\n    get gridRowSpan(): number {\n        return this.column.gridRowSpan;\n    }\n\n    get gridColumnSpan(): number {\n        return this.column.gridColumnSpan;\n    }\n\n\n    get rowEnd(): number {\n        return this.column.rowEnd;\n    }\n\n    get colEnd(): number {\n        return this.column.colEnd;\n    }\n\n    get rowStart(): number {\n        return this.column.rowStart;\n    }\n\n    get colStart(): number {\n        return this.column.colStart;\n    }\n\n    /**\n     * Returns a string containing the grid `id` and the column `field` concatenated by \"_\".\n     * ```typescript\n     * let describedBy = this.cell.describedBy;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @HostBinding('attr.aria-describedby')\n    get describedby(): string {\n        return `${this.row.gridID}_${this.column.field}`;\n    }\n\n    /**\n     * Gets the width of the cell.\n     * ```typescript\n     * let cellWidth = this.cell.width;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @Input()\n    width = '';\n\n    /**\n     * Gets whether the cell is selected.\n     * ```typescript\n     * let isSelected = this.cell.selected;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @HostBinding('attr.aria-selected')\n    @HostBinding('class.igx-grid__td--selected')\n    get selected() {\n        return this.selectionService.selected(this.selectionNode);\n    }\n\n    /**\n     * Selects/deselects the cell.\n     * ```typescript\n     * this.cell.selected = true.\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    set selected(val: boolean) {\n        const node = this.selectionNode;\n        val ? this.selectionService.add(node) : this.selectionService.remove(node);\n        this.grid.notifyChanges();\n    }\n\n    @HostBinding('class.igx-grid__td--edited')\n    get dirty() {\n        if (this.grid.rowEditable) {\n            const rowCurrentState = this.grid.transactions.getAggregatedValue(this.row.rowID, false);\n            if (rowCurrentState) {\n                return rowCurrentState[this.column.field] !== undefined && rowCurrentState[this.column.field] !== null;\n            }\n        } else {\n            const rowTransaction: State = this.grid.transactions.getState(this.row.rowID);\n                return rowTransaction && rowTransaction.value &&\n                (rowTransaction.value[this.column.field] ||\n                 rowTransaction.value[this.column.field] === 0 ||\n                 rowTransaction.value[this.column.field] === false);\n        }\n\n        return false;\n    }\n\n    /**\n     * Sets the current edit value while a cell is in edit mode.\n     * Only for cell editing mode.\n     * ```typescript\n     * this.cell.editValue = value;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    public set editValue(value) {\n        if (this.crudService.inEditMode) {\n            this.crudService.cell.editValue = value;\n        }\n    }\n\n    /**\n     * Gets the current edit value while a cell is in edit mode.\n     * Only for cell editing mode.\n     * ```typescript\n     * let editValue = this.cell.editValue;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    public get editValue() {\n        if (this.crudService.inEditMode) {\n            return this.crudService.cell.editValue;\n        }\n    }\n\n    /**\n     * Returns whether the cell is editable.\n     */\n    get editable(): boolean {\n        return this.column.editable;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-grid__td--active')\n    public focused = false;\n\n    @ViewChild('defaultCell', { read: TemplateRef, static: true })\n    protected defaultCellTemplate: TemplateRef<any>;\n\n    @ViewChild('inlineEditor', { read: TemplateRef, static: true })\n    protected inlineEditorTemplate: TemplateRef<any>;\n\n    @ViewChild(IgxTextHighlightDirective, { read: IgxTextHighlightDirective })\n    protected set highlight(value: IgxTextHighlightDirective) {\n        this._highlight = value;\n\n        if (this._highlight && this.grid.lastSearchInfo.searchText) {\n            this._highlight.highlight(this.grid.lastSearchInfo.searchText,\n                this.grid.lastSearchInfo.caseSensitive,\n                this.grid.lastSearchInfo.exactMatch);\n            this._highlight.activateIfNecessary();\n        }\n    }\n\n    protected get highlight() {\n        return this._highlight;\n    }\n\n    protected get selectionNode(): ISelectionNode {\n        return {\n            row: this.rowIndex,\n            column: this.column.columnLayoutChild ? this.column.parent.visibleIndex : this.visibleColumnIndex,\n            layout: this.column.columnLayoutChild ? {\n                rowStart: this.column.rowStart,\n                colStart: this.column.colStart,\n                rowEnd: this.column.rowEnd,\n                colEnd: this.column.colEnd,\n                columnVisibleIndex: this.visibleColumnIndex\n            } : null\n            };\n    }\n\n    protected isInCompositionMode = false;\n    protected compositionStartHandler;\n    protected compositionEndHandler;\n    private _highlight: IgxTextHighlightDirective;\n    private _cellSelection = GridSelectionMode.multiple;\n\n\n    constructor(\n        protected selectionService: IgxGridSelectionService,\n        protected crudService: IgxGridCRUDService,\n        public gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n        public cdr: ChangeDetectorRef,\n        private element: ElementRef,\n        protected zone: NgZone,\n        private touchManager: HammerGesturesManager,\n        protected platformUtil: PlatformUtil) { }\n\n    private addPointerListeners(selection) {\n        if (selection !== GridSelectionMode.multiple) { return; }\n        this.nativeElement.addEventListener('pointerdown', this.pointerdown);\n        this.nativeElement.addEventListener('pointerenter', this.pointerenter);\n        this.nativeElement.addEventListener('pointerup', this.pointerup);\n    }\n\n    private  removePointerListeners(selection) {\n        if (selection !== GridSelectionMode.multiple) { return; }\n        this.nativeElement.removeEventListener('pointerdown', this.pointerdown);\n        this.nativeElement.removeEventListener('pointerenter', this.pointerenter);\n        this.nativeElement.removeEventListener('pointerup', this.pointerup);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    ngOnInit() {\n        this.zone.runOutsideAngular(() => {\n            this.addPointerListeners(this.cellSelectionMode);\n            // IE 11 workarounds\n            if (isIE()) {\n                this.compositionStartHandler = () => this.isInCompositionMode = true;\n                this.compositionEndHandler = () => this.isInCompositionMode = false;\n                // Hitting Enter with IME submits and exits from edit mode instead of first closing the IME dialog\n                this.nativeElement.addEventListener('compositionstart', this.compositionStartHandler);\n                this.nativeElement.addEventListener('compositionend', this.compositionEndHandler);\n            }\n        });\n        if (this.platformUtil.isIOS) {\n            this.touchManager.addEventListener(this.nativeElement, 'doubletap', this.onDoubleClick, {\n                cssProps: { } /* don't disable user-select, etc */\n            } as HammerOptions);\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    ngOnDestroy() {\n        this.zone.runOutsideAngular(() => {\n            this.removePointerListeners(this.cellSelectionMode);\n            if (isIE()) {\n                this.nativeElement.removeEventListener('compositionstart', this.compositionStartHandler);\n                this.nativeElement.removeEventListener('compositionend', this.compositionEndHandler);\n            }\n        });\n        this.touchManager.destroy();\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    _updateCRUDStatus() {\n        if (this.editMode) {\n            return;\n        }\n\n        const crud = this.crudService;\n        const editableCell = this.crudService.cell;\n        const editMode = !!(crud.row || crud.cell);\n\n        if (this.editable && editMode && !this.row.deleted) {\n            if (editableCell) {\n                this.gridAPI.update_cell(editableCell, editableCell.editValue);\n                /* This check is related with the following issue #6517:\n                 * when edit cell that belongs to a column which is sorted and press tab,\n                 * the next cell in edit mode is with wrong value /its context is not updated/;\n                 * So we reapply sorting before the next cell enters edit mode.\n                 * Also we need to keep the notifyChanges below, because of the current\n                 * change detection cycle when we have editing with enabled transactions\n                 */\n                if (this.grid.sortingExpressions.length && this.grid.sortingExpressions.indexOf(editableCell.column.field)) {\n                    this.grid.cdr.detectChanges();\n                }\n            }\n            crud.end();\n            this.grid.notifyChanges();\n            crud.begin(this);\n            return;\n        }\n\n        if (editableCell && crud.sameRow(this.cellID.rowID)) {\n            this.gridAPI.submit_value();\n        } else if (editMode && !crud.sameRow(this.cellID.rowID)) {\n            this.grid.endEdit(true);\n        }\n    }\n\n    /**\n     * @deprecated\n     * Gets whether the cell is selected.\n     * ```typescript\n     * let isCellSelected = thid.cell.isCellSelected();\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @DeprecateMethod(`'isCellSelected' is deprecated. Use 'selected' property instead.`)\n    public isCellSelected() {\n        return this.selectionService.selected(this.selectionNode);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.value && !changes.value.firstChange) {\n            if (this.highlight) {\n                this.highlight.lastSearchInfo.searchedText = this.grid.lastSearchInfo.searchText;\n                this.highlight.lastSearchInfo.caseSensitive = this.grid.lastSearchInfo.caseSensitive;\n                this.highlight.lastSearchInfo.exactMatch = this.grid.lastSearchInfo.exactMatch;\n            }\n        }\n    }\n\n    /**\n     * Starts/ends edit mode for the cell.\n     *\n     * ```typescript\n     * cell.setEditMode(true);\n     * ```\n     */\n    setEditMode(value: boolean): void {\n        if (this.row.deleted) {\n            return;\n        }\n        if (this.editable && value) {\n            this.gridAPI.submit_value();\n            this.crudService.begin(this);\n        } else {\n            this.gridAPI.escape_editMode();\n        }\n        this.grid.notifyChanges();\n    }\n\n    /**\n     * Sets new value to the cell.\n     * ```typescript\n     * this.cell.update('New Value');\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    // TODO: Refactor\n    public update(val: any) {\n        if (this.row.deleted) {\n            return;\n        }\n        const cell = this.crudService.createCell(this);\n        const args = this.gridAPI.update_cell(cell, val);\n        if (this.crudService.cell && this.crudService.sameCell(cell)) {\n            if (args.cancel) {\n                return;\n            }\n            this.gridAPI.escape_editMode();\n        }\n        this.cdr.markForCheck();\n    }\n\n    /**\n     *\n     * @hidden\n     * @internal\n     */\n    pointerdown = (event: PointerEvent) => {\n        if (!isLeftClick(event)) {\n            this.selectionService.addKeyboardRange();\n            this.selectionService.initKeyboardState();\n            this.selectionService.primaryButton = false;\n            return;\n        }\n        this.selectionService.pointerDown(this.selectionNode, event.shiftKey, event.ctrlKey);\n    }\n\n    /**\n     *\n     * @hidden\n     * @internal\n     */\n    pointerenter = (event: PointerEvent) => {\n        const dragMode = this.selectionService.pointerEnter(this.selectionNode, event);\n        if (dragMode) {\n            this.grid.cdr.detectChanges();\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    pointerup = (event: PointerEvent) => {\n        if (this.grid.hasColumnLayouts) {\n            this.grid.navigation.setStartNavigationCell(this.colStart, this.rowStart, null);\n        }\n        if (!isLeftClick(event)) { return; }\n        if (this.selectionService.pointerUp(this.selectionNode, this.grid.onRangeSelection)) {\n            this.grid.cdr.detectChanges();\n        }\n        this._updateCRUDStatus();\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('dblclick', ['$event'])\n    public onDoubleClick = (event: MouseEvent | HammerInput) => {\n        if (event.type === 'doubletap') {\n            // prevent double-tap to zoom on iOS\n            (event as HammerInput).preventDefault();\n        }\n        if (this.editable && !this.editMode && !this.row.deleted) {\n            this.crudService.begin(this);\n        }\n\n        this.grid.onDoubleClick.emit({\n            cell: this,\n            event\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('click', ['$event'])\n    public onClick(event: MouseEvent) {\n        this.grid.onCellClick.emit({\n            cell: this,\n            event\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('contextmenu', ['$event'])\n    public onContextMenu(event: MouseEvent) {\n        this.grid.onContextMenu.emit({\n            cell: this,\n            event\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('focus', ['$event'])\n    public onFocus(event: FocusEvent) {\n        if (this.focused) {\n            return;\n        }\n        this.focused = true;\n        this.row.focused = true;\n        const node = this.selectionNode;\n        const shouldEmitSelection = !this.selectionService.isActiveNode(node);\n\n        if (this.selectionService.primaryButton) {\n            this._updateCRUDStatus();\n            this.selectionService.activeElement = node;\n        } else {\n            this.selectionService.activeElement = null;\n            if (this.crudService.inEditMode && !this.editMode) {\n                this.gridAPI.submit_value();\n            }\n        }\n\n        this.selectionService.primaryButton = true;\n        if (this.cellSelectionMode === GridSelectionMode.multiple && this.selectionService.activeElement) {\n            this.selectionService.add(this.selectionService.activeElement, false); // pointer events handle range generation\n            this.selectionService.keyboardStateOnFocus(node, this.grid.onRangeSelection, this.nativeElement);\n        }\n        if (this.grid.isCellSelectable && shouldEmitSelection) {\n            this.grid.onSelection.emit({ cell: this, event });\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('blur')\n    public onBlur() {\n        this.focused = false;\n        this.row.focused = false;\n    }\n\n    protected handleAlt(key: string, event: KeyboardEvent) {\n        if (this.isToggleKey(key)) {\n            const collapse = (this.row as any).expanded && ROW_COLLAPSE_KEYS.has(key);\n            const expand = !(this.row as any).expanded && ROW_EXPAND_KEYS.has(key);\n            if (expand) {\n                this.gridAPI.set_row_expansion_state(this.row.rowID, true, event);\n            } else if (collapse) {\n                this.gridAPI.set_row_expansion_state(this.row.rowID, false, event);\n            }\n            this.grid.notifyChanges();\n        }\n    }\n\n    protected handleTab(shift: boolean) {\n        if (shift) {\n            this.grid.navigation.performShiftTabKey(this.row.nativeElement, this.selectionNode);\n        } else {\n            this.grid.navigation.performTab(this.row.nativeElement, this.selectionNode);\n        }\n    }\n\n    protected handleEnd(ctrl: boolean) {\n        if (ctrl) {\n            this.grid.navigation.goToLastCell();\n        } else {\n            this.grid.navigation.onKeydownEnd(this.rowIndex, false, this.rowStart);\n        }\n    }\n\n    protected handleHome(ctrl: boolean) {\n        if (ctrl) {\n            this.grid.navigation.goToFirstCell();\n        } else {\n            this.grid.navigation.onKeydownHome(this.rowIndex, false, this.rowStart);\n        }\n    }\n\n    // TODO: Refactor\n    /**\n     *\n     * @hidden\n     * @internal\n     */\n    @HostListener('keydown', ['$event'])\n    dispatchEvent(event: KeyboardEvent) {\n        const key = event.key.toLowerCase();\n        const shift = event.shiftKey;\n        const ctrl = event.ctrlKey;\n        const node = this.selectionNode;\n\n        if (!SUPPORTED_KEYS.has(key)) {\n            return;\n        }\n        event.stopPropagation();\n\n        const keydownArgs = { targetType: 'dataCell', target: this, event: event, cancel: false };\n\n        // This fixes IME editing issue(#6335) that happens only on IE\n        if (isIE() && keydownArgs.event.keyCode === 229 && event.key === 'Tab') {\n            return;\n        }\n\n        this.grid.onGridKeydown.emit(keydownArgs);\n        if (keydownArgs.cancel) {\n            this.selectionService.clear();\n            this.selectionService.keyboardState.active = true;\n            return;\n        }\n\n        if (event.altKey) {\n            event.preventDefault();\n            this.handleAlt(key, event);\n            return;\n        }\n\n        this.selectionService.keyboardStateOnKeydown(node, shift, shift && key === 'tab');\n\n\n        if (key === 'tab') {\n            event.preventDefault();\n        }\n\n        if (this.editMode) {\n            if (NAVIGATION_KEYS.has(key)) {\n                if (this.column.inlineEditorTemplate) { return; }\n                if (['date', 'boolean'].indexOf(this.column.dataType) > -1) { return; }\n                return;\n            }\n        }\n\n        if (NAVIGATION_KEYS.has(key)) {\n            event.preventDefault();\n        }\n\n        switch (key) {\n            case 'tab':\n                this.handleTab(shift);\n                break;\n            case 'end':\n                this.handleEnd(ctrl);\n                break;\n            case 'home':\n                this.handleHome(ctrl);\n                break;\n            case 'arrowleft':\n            case 'left':\n                if (ctrl) {\n                    this.grid.navigation.onKeydownHome(node.row, false, this.rowStart);\n                    break;\n                }\n                this.grid.navigation.onKeydownArrowLeft(this.nativeElement, this.selectionNode);\n                break;\n            case 'arrowright':\n            case 'right':\n                if (ctrl) {\n                    this.grid.navigation.onKeydownEnd(node.row, false, this.rowStart);\n                    break;\n                }\n                this.grid.navigation.onKeydownArrowRight(this.nativeElement, this.selectionNode);\n                break;\n            case 'arrowup':\n            case 'up':\n                if (ctrl) {\n                    this.grid.navigation.navigateTop(this.visibleColumnIndex);\n                    break;\n                }\n                this.grid.navigation.navigateUp(this.row.nativeElement, this.selectionNode);\n                break;\n            case 'arrowdown':\n            case 'down':\n                if (ctrl) {\n                    this.grid.navigation.navigateBottom(this.visibleColumnIndex);\n                    break;\n                }\n                this.grid.navigation.navigateDown(this.row.nativeElement, this.selectionNode);\n                break;\n            case 'enter':\n            case 'f2':\n                this.onKeydownEnterEditMode();\n                break;\n            case 'escape':\n            case 'esc':\n                this.onKeydownExitEditMode();\n                break;\n            case ' ':\n            case 'spacebar':\n            case 'space':\n                if (this.grid.isRowSelectable) {\n                    this.row.selected ? this.selectionService.deselectRow(this.row.rowID, event) :\n                    this.selectionService.selectRowById(this.row.rowID, false, event);\n                }\n                break;\n            default:\n                return;\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onKeydownEnterEditMode() {\n        if (this.isInCompositionMode) {\n            return;\n        }\n        if (this.column.editable && !this.row.deleted) {\n            if (this.editMode) {\n                this.grid.endEdit(true);\n                this.nativeElement.focus();\n            } else {\n                this.crudService.begin(this);\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onKeydownExitEditMode() {\n        if (this.isInCompositionMode) {\n            return;\n        }\n\n        if (this.editMode) {\n            const args = this.crudService.cell.createEditEventArgs();\n            this.grid.onCellEditCancel.emit(args);\n            if (args.cancel) {\n                return;\n            }\n            this.grid.endEdit(false);\n            this.nativeElement.focus();\n        }\n    }\n\n    /**\n     * If the provided string matches the text in the cell, the text gets highlighted.\n     * ```typescript\n     * this.cell.highlightText('Cell Value', true);\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    public highlightText(text: string, caseSensitive?: boolean, exactMatch?: boolean): number {\n        return this.highlight && this.column.searchable ? this.highlight.highlight(text, caseSensitive, exactMatch) : 0;\n    }\n\n    /**\n     * Clears the highlight of the text in the cell.\n     * ```typescript\n     * this.cell.clearHighLight();\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    public clearHighlight() {\n        if (this.highlight && this.column.searchable) {\n            this.highlight.clearHighlight();\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public calculateSizeToFit(range: any): number {\n        return Math.max(...Array.from(this.nativeElement.children)\n            .map((child) => getNodeSizeViaRange(range, child)));\n    }\n\n    private isToggleKey(key: string): boolean {\n        return ROW_COLLAPSE_KEYS.has(key) || ROW_EXPAND_KEYS.has(key);\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { first, debounceTime } from 'rxjs/operators';\nimport { IgxColumnComponent } from './columns/column.component';\nimport { IgxGridGroupByRowComponent } from './grid/groupby-row.component';\nimport { ISelectionNode } from './selection/selection.service';\nimport { IgxForOfDirective } from '../directives/for-of/for_of.directive';\nimport { GridType } from './common/grid.interface';\nimport { FilterMode } from './common/enums';\n\nenum MoveDirection {\n    LEFT = 'left',\n    RIGHT = 'right'\n}\n\n/** @hidden */\n@Injectable()\nexport class IgxGridNavigationService {\n    public grid: GridType;\n\n    get displayContainerWidth() {\n        return Math.round(this.grid.parentVirtDir.dc.instance._viewContainer.element.nativeElement.offsetWidth);\n    }\n\n    get displayContainerScrollLeft() {\n        return Math.ceil(this.grid.headerContainer.scrollPosition);\n    }\n\n    get verticalDisplayContainerElement() {\n        return this.grid.verticalScrollContainer.dc.instance._viewContainer.element.nativeElement;\n    }\n\n    public horizontalScroll(rowIndex) {\n        let rowComp = this.grid.dataRowList.find((row) => row.index === rowIndex) || this.grid.dataRowList.first;\n        if (!rowComp) {\n            rowComp = this.grid.summariesRowList.find((row) => row.index === rowIndex);\n        }\n        return rowComp.virtDirRow;\n    }\n\n    public getColumnUnpinnedIndex(visibleColumnIndex: number) {\n        const column = this.grid.unpinnedColumns.find((col) => !col.columnGroup && col.visibleIndex === visibleColumnIndex);\n        return this.grid.pinnedColumns.length ? this.grid.unpinnedColumns.filter((c) => !c.columnGroup).indexOf(column) :\n            visibleColumnIndex;\n    }\n\n    public isColumnFullyVisible(columnIndex: number) {\n        return this.isColumnRightEdgeVisible(columnIndex) && this.isColumnLeftEdgeVisible(columnIndex);\n    }\n\n    public isColumnRightEdgeVisible(columnIndex: number) {\n        const forOfDir: IgxForOfDirective<any> = this.forOfDir();\n        if (this.isColumnPinned(columnIndex, forOfDir)) {\n            return true;\n        }\n        const index = this.getColumnUnpinnedIndex(columnIndex);\n        return this.displayContainerWidth >= forOfDir.getColumnScrollLeft(index + 1) - this.displayContainerScrollLeft;\n    }\n\n    public isColumnLeftEdgeVisible(columnIndex: number) {\n        const forOfDir = this.forOfDir();\n        if (this.isColumnPinned(columnIndex, forOfDir)) {\n            return true;\n        }\n        const index = this.getColumnUnpinnedIndex(columnIndex);\n        return this.displayContainerScrollLeft <= forOfDir.getColumnScrollLeft(index);\n    }\n\n    private forOfDir(): IgxForOfDirective<any> {\n        let forOfDir: IgxForOfDirective<any>;\n        if (this.grid.dataRowList.length > 0) {\n            forOfDir = this.grid.dataRowList.first.virtDirRow;\n        } else {\n            forOfDir = this.grid.headerContainer;\n        }\n        return forOfDir;\n    }\n\n    private isColumnPinned(columnIndex: number, forOfDir: IgxForOfDirective<any>): boolean {\n        const horizontalScroll = forOfDir.getScroll();\n        const column = this.grid.columnList.filter(c => !c.columnGroup).find((col) => col.visibleIndex === columnIndex);\n        return (!horizontalScroll.clientWidth || column.pinned);\n    }\n\n    public get gridOrderedColumns(): IgxColumnComponent[] {\n        return [...this.grid.pinnedColumns, ...this.grid.unpinnedColumns].filter(c => !c.columnGroup);\n    }\n\n    public isRowInEditMode(rowIndex): boolean {\n        return this.grid.rowEditable && (this.grid.rowInEditMode && this.grid.rowInEditMode.index === rowIndex);\n    }\n\n    public findNextEditable(direction: string, visibleColumnIndex: number) {\n        // go trough all columns in one cycle instead of\n        // splice().reverse().find()\n        const gridColumns = this.gridOrderedColumns;\n        const start = visibleColumnIndex;\n        let end = 0;\n        let step = 0;\n        let result = -1;\n        if (direction === MoveDirection.LEFT) {\n            end = 0;\n            step = -1;\n        } else if (direction === MoveDirection.RIGHT) {\n            end = gridColumns.length - 1;\n            step = 1;\n        }\n        for (let c = start; (c * step) <= end; c += step) {\n            const column = gridColumns[c];\n            if (column.editable) {\n                result = c;\n                break;\n            }\n        }\n        return result;\n    }\n\n    public getCellElementByVisibleIndex(rowIndex, visibleColumnIndex, isSummary = false) {\n        const cellSelector = this.getCellSelector(visibleColumnIndex, isSummary);\n        return this.grid.nativeElement.querySelector(\n            `${cellSelector}[data-rowindex=\"${rowIndex}\"][data-visibleIndex=\"${visibleColumnIndex}\"]`) as HTMLElement;\n    }\n\n    public onKeydownArrowRight(element, selectedNode: ISelectionNode) {\n        const rowIndex = selectedNode.row;\n        const visibleColumnIndex = selectedNode.column;\n        const isSummary = selectedNode.isSummaryRow;\n        if (this.grid.unpinnedColumns[this.grid.unpinnedColumns.length - 1].visibleIndex === visibleColumnIndex) {\n            return;\n        }\n        if (this.isColumnRightEdgeVisible(visibleColumnIndex + 1)) { // if next column is fully visible or is pinned\n            if (element.classList.contains('igx-grid__td--pinned-last') || element.classList.contains('igx-grid-summary--pinned-last')) {\n                if (this.isColumnLeftEdgeVisible(visibleColumnIndex + 1)) {\n                    element.nextElementSibling.firstElementChild.focus({ preventScroll: true });\n                } else {\n                    this.getFocusableGrid().nativeElement.focus({ preventScroll: true });\n                    this.grid.parentVirtDir.onChunkLoad\n                        .pipe(first())\n                        .subscribe(() => {\n                            element.nextElementSibling.firstElementChild.focus({ preventScroll: true });\n                        });\n                    this.horizontalScroll(rowIndex).scrollTo(0);\n                }\n            } else {\n                element.nextElementSibling.focus({ preventScroll: true });\n            }\n        } else {\n            this.performHorizontalScrollToCell(rowIndex, visibleColumnIndex + 1, isSummary);\n        }\n    }\n\n    public onKeydownArrowLeft(element, selectedNode: ISelectionNode) {\n        const rowIndex = selectedNode.row;\n        const visibleColumnIndex = selectedNode.column;\n        const isSummary = selectedNode.isSummaryRow;\n        if (visibleColumnIndex === 0) {\n            return;\n        }\n        const index = this.getColumnUnpinnedIndex(visibleColumnIndex - 1);\n        if (!element.previousElementSibling && this.grid.pinnedColumns.length && index === - 1) {\n            element.parentNode.previousElementSibling.focus({ preventScroll: true });\n        } else if (!this.isColumnLeftEdgeVisible(visibleColumnIndex - 1)) {\n            this.performHorizontalScrollToCell(rowIndex, visibleColumnIndex - 1, isSummary);\n        } else {\n            element.previousElementSibling.focus({ preventScroll: true });\n        }\n\n    }\n\n    public movePreviousEditable(rowIndex: number, currentColumnVisibleIndex: number) {\n        let prevEditableColumnIndex = this.findNextEditable(MoveDirection.LEFT, currentColumnVisibleIndex - 1);\n        if (prevEditableColumnIndex === -1) {\n            if (this.grid.rowEditTabs.length) {\n                //  TODO: make gridAPI visible for internal use and remove cast to any\n                (this.grid as any).gridAPI.submit_value();\n                this.grid.rowEditTabs.last.element.nativeElement.focus();\n                return;\n            } else {\n                // In case when row edit template is empty select last editable cell\n                prevEditableColumnIndex = this.grid.lastEditableColumnIndex;\n            }\n\n        }\n        this.focusEditableTarget(rowIndex, prevEditableColumnIndex);\n    }\n\n    public moveNextEditable(rowIndex: number, currentColumnVisibleIndex: number) {\n        let nextEditableColumnIndex = this.findNextEditable(MoveDirection.RIGHT, currentColumnVisibleIndex + 1);\n        if (nextEditableColumnIndex === -1) {\n            if ( this.grid.rowEditTabs.length) {\n                 //  TODO: make gridAPI visible for internal use and remove cast to any\n                (this.grid as any).gridAPI.submit_value();\n                this.grid.rowEditTabs.first.element.nativeElement.focus();\n                return;\n            } else {\n                // In case when row edit template is empty select first editable cell\n                nextEditableColumnIndex = this.grid.firstEditableColumnIndex;\n            }\n        }\n        this.focusEditableTarget(rowIndex, nextEditableColumnIndex);\n    }\n\n    public focusEditableTarget(rowIndex: number, columnIndex: number) {\n        if (this.isColumnFullyVisible(columnIndex)) {\n            this.getCellElementByVisibleIndex(rowIndex, columnIndex).focus();\n        } else {\n            this.performHorizontalScrollToCell(rowIndex, columnIndex);\n        }\n    }\n\n    public onKeydownHome(rowIndex, isSummary = false) {\n        const rowList = isSummary ? this.grid.summariesRowList : this.grid.dataRowList;\n        let rowElement = rowList.find((row) => row.index === rowIndex);\n        const cellSelector = this.getCellSelector(0, isSummary);\n        if (!rowElement) { return; }\n        rowElement = rowElement.nativeElement;\n        let firstCell = rowElement.querySelector(cellSelector);\n        if (this.grid.pinnedColumns.length || this.displayContainerScrollLeft === 0) {\n            firstCell.focus({ preventScroll: true });\n        } else {\n            this.getFocusableGrid().nativeElement.focus({ preventScroll: true });\n            this.grid.parentVirtDir.onChunkLoad\n                .pipe(first())\n                .subscribe(() => {\n                    firstCell = rowElement.querySelector(cellSelector);\n                    firstCell.focus({ preventScroll: true });\n                });\n            this.horizontalScroll(rowIndex).scrollTo(0);\n        }\n    }\n\n    public onKeydownEnd(rowIndex, isSummary = false) {\n        const index = this.grid.unpinnedColumns[this.grid.unpinnedColumns.length - 1].visibleIndex;\n        const rowList = isSummary ? this.grid.summariesRowList : this.grid.dataRowList;\n        let rowElement = rowList.find((row) => row.index === rowIndex);\n        if (!rowElement) { return; }\n        rowElement = rowElement.nativeElement;\n        if (this.isColumnRightEdgeVisible(index)) {\n            const allCells = rowElement.querySelectorAll(this.getCellSelector(-1, isSummary));\n            allCells[allCells.length - 1].focus({ preventScroll: true });\n        } else {\n            this.getFocusableGrid().nativeElement.focus({ preventScroll: true });\n            this.grid.parentVirtDir.onChunkLoad\n                .pipe(first())\n                .subscribe(() => {\n                    const allCells = rowElement.querySelectorAll(this.getCellSelector(-1, isSummary));\n                    allCells[allCells.length - 1].focus({ preventScroll: true });\n                });\n            this.horizontalScroll(rowIndex).scrollTo(this.getColumnUnpinnedIndex(index));\n        }\n    }\n\n    public navigateTop(visibleColumnIndex) {\n        const targetIndex = this.findFirstDataRowIndex();\n        const verticalScroll = this.grid.verticalScrollContainer.getScroll();\n        const cellSelector = this.getCellSelector(visibleColumnIndex);\n        const targetScr = this.grid.verticalScrollContainer.getScrollForIndex(targetIndex, false);\n        if (targetScr >= verticalScroll.scrollTop) {\n            const cells = this.grid.nativeElement.querySelectorAll(\n                `${cellSelector}[data-visibleIndex=\"${visibleColumnIndex}\"]`);\n            (cells[0] as HTMLElement).focus();\n        } else {\n           this.getFocusableGrid().nativeElement.focus({ preventScroll: true });\n            this.grid.verticalScrollContainer.scrollTo(targetIndex !== -1 ? targetIndex : 0);\n            this.grid.verticalScrollContainer.onChunkLoad\n                .pipe(debounceTime(10)).pipe(first()).subscribe(() => {\n                    const cells = this.grid.nativeElement.querySelectorAll(\n                        `${cellSelector}[data-visibleIndex=\"${visibleColumnIndex}\"]`);\n                    if (cells.length > 0) { (cells[0] as HTMLElement).focus(); }\n                });\n        }\n    }\n\n    private findFirstDataRowIndex() {\n        const dv = this.grid.dataView;\n        return dv.findIndex(rec => !this.grid.isGroupByRecord(rec) && !this.grid.isDetailRecord(rec));\n    }\n\n    private findLastDataRowIndex() {\n        let i = this.grid.dataView.length;\n        while (i--) {\n            const rec = this.grid.dataView[i];\n            if (!this.grid.isGroupByRecord(rec) && !this.grid.isDetailRecord(rec)) {\n                 return i;\n            }\n        }\n    }\n\n    public navigateBottom(visibleColumnIndex) {\n        const targetIndex = this.findLastDataRowIndex();\n        const targetScr = this.grid.verticalScrollContainer.getScrollForIndex(targetIndex, true);\n        const verticalScroll = this.grid.verticalScrollContainer.getScroll();\n        const cellSelector = this.getCellSelector(visibleColumnIndex);\n        if (verticalScroll.scrollHeight === 0 ||\n            verticalScroll.scrollTop === targetScr) {\n            const cells = this.grid.nativeElement.querySelectorAll(\n                `${cellSelector}[data-visibleIndex=\"${visibleColumnIndex}\"]`);\n            (cells[cells.length - 1] as HTMLElement).focus();\n        } else {\n           this.getFocusableGrid().nativeElement.focus({ preventScroll: true });\n            this.grid.verticalScrollContainer.scrollTo(targetIndex !== -1 ? targetIndex : this.grid.dataView.length - 1);\n            this.grid.verticalScrollContainer.onChunkLoad\n                .pipe(debounceTime(10)).pipe(first()).subscribe(() => {\n                    const cells = this.grid.nativeElement.querySelectorAll(\n                        `${cellSelector}[data-visibleIndex=\"${visibleColumnIndex}\"]`);\n                    if (cells.length > 0) {\n                        (cells[cells.length - 1] as HTMLElement).focus({preventScroll: true});\n                    }\n                });\n        }\n    }\n\n    public navigateUp(rowElement, selectedNode: ISelectionNode) {\n        const currentRowIndex = selectedNode.row;\n        const visibleColumnIndex = selectedNode.column;\n        if (currentRowIndex === 0) {\n            return;\n        }\n        const containerTopOffset = parseInt(this.verticalDisplayContainerElement.style.top, 10);\n        if (!rowElement.previousElementSibling ||\n            rowElement.previousElementSibling.offsetTop < Math.abs(containerTopOffset)) {\n           this.getFocusableGrid().nativeElement.focus({ preventScroll: true });\n            this.grid.verticalScrollContainer.scrollTo(currentRowIndex - 1);\n            this.grid.verticalScrollContainer.onChunkLoad\n                .pipe(first())\n                .subscribe(() => {\n                    const tag = rowElement.tagName.toLowerCase();\n                    rowElement = this.getRowByIndex(currentRowIndex, tag);\n                    this.focusPreviousElement(rowElement, visibleColumnIndex);\n                });\n        } else {\n            this.focusPreviousElement(rowElement, visibleColumnIndex);\n        }\n    }\n\n    protected focusPreviousElement(currentRowEl, visibleColumnIndex) {\n        this.focusElem(currentRowEl.previousElementSibling, visibleColumnIndex);\n    }\n\n    public navigateDown(rowElement, selectedNode: ISelectionNode) {\n        const currentRowIndex = selectedNode.row;\n        const visibleColumnIndex = selectedNode.column;\n        if (currentRowIndex === this.grid.dataView.length - 1 ||\n            (currentRowIndex === 0 && rowElement.tagName.toLowerCase() === 'igx-grid-summary-row')) {\n            // check if this is rootSummary row\n            return;\n        }\n        const rowHeight = this.grid.verticalScrollContainer.getSizeAt(currentRowIndex + 1);\n        const containerHeight = this.grid.calcHeight ? Math.ceil(this.grid.calcHeight) : 0;\n        const targetEndTopOffset = rowElement.nextElementSibling ?\n            rowElement.nextElementSibling.offsetTop + rowHeight + parseInt(this.verticalDisplayContainerElement.style.top, 10) :\n            containerHeight + rowHeight;\n       this.getFocusableGrid().nativeElement.focus({ preventScroll: true });\n        if (containerHeight && containerHeight < targetEndTopOffset) {\n            const nextIndex = currentRowIndex + 1;\n            this.grid.verticalScrollContainer.scrollTo(nextIndex);\n            this.grid.verticalScrollContainer.onChunkLoad\n                .pipe(first())\n                .subscribe(() => {\n                    rowElement = this.getNextRowByIndex(nextIndex);\n                    this.focusElem(rowElement, visibleColumnIndex);\n                });\n        } else {\n            this.focusNextElement(rowElement, visibleColumnIndex);\n        }\n    }\n\n    protected focusElem(rowElement, visibleColumnIndex) {\n        if (rowElement.tagName.toLowerCase() === 'igx-grid-groupby-row' || rowElement.className === 'igx-grid__tr-container') {\n            rowElement.focus();\n        } else {\n            const isSummaryRow = rowElement.tagName.toLowerCase() === 'igx-grid-summary-row';\n            if (this.isColumnFullyVisible(visibleColumnIndex)) {\n                const cellSelector = this.getCellSelector(visibleColumnIndex, isSummaryRow);\n                const cell = rowElement.querySelector(`${cellSelector}[data-visibleIndex=\"${visibleColumnIndex}\"]`);\n                cell.focus();\n                return cell;\n            }\n            this.performHorizontalScrollToCell(parseInt(\n                rowElement.getAttribute('data-rowindex'), 10), visibleColumnIndex, isSummaryRow);\n        }\n    }\n\n    protected focusNextElement(rowElement, visibleColumnIndex) {\n        return this.focusElem(rowElement.nextElementSibling, visibleColumnIndex);\n    }\n\n    public goToFirstCell() {\n        const targetIndex = this.findFirstDataRowIndex();\n        const targetScr = this.grid.verticalScrollContainer.getScrollForIndex(targetIndex, false);\n        const verticalScroll = this.grid.verticalScrollContainer.getScroll();\n        if (verticalScroll.scrollTop === targetScr) {\n            this.onKeydownHome(this.grid.dataRowList.first.index);\n        } else {\n            this.getFocusableGrid().nativeElement.focus({ preventScroll: true });\n            this.grid.verticalScrollContainer.scrollTo(targetIndex !== -1 ? targetIndex : 0);\n            this.grid.verticalScrollContainer.onChunkLoad\n                .pipe(first()).subscribe(() => {\n                    this.onKeydownHome(this.grid.dataRowList.first.index);\n                });\n        }\n    }\n\n    public goToLastCell() {\n        const targetIndex = this.findLastDataRowIndex();\n        const targetScr = this.grid.verticalScrollContainer.getScrollForIndex(targetIndex, true);\n        const verticalScroll = this.grid.verticalScrollContainer.getScroll();\n        if (verticalScroll.scrollHeight === 0 ||\n            verticalScroll.scrollTop === targetScr) {\n            const rows = this.getAllRows();\n            const rowIndex = parseInt(rows[rows.length - 1].getAttribute('data-rowIndex'), 10);\n            this.onKeydownEnd(rowIndex);\n        } else {\n           this.getFocusableGrid().nativeElement.focus({ preventScroll: true });\n            this.grid.verticalScrollContainer.scrollTo(targetIndex !== -1 ? targetIndex : this.grid.dataView.length - 1);\n            this.grid.verticalScrollContainer.onChunkLoad\n                .pipe(first()).subscribe(() => {\n                    const rows = this.getAllRows();\n                    if (rows.length > 0) {\n                        const rowIndex = parseInt(rows[rows.length - 1].getAttribute('data-rowIndex'), 10);\n                        this.onKeydownEnd(rowIndex);\n                    }\n                });\n        }\n    }\n\n    public goToLastBodyElement() {\n        const verticalScroll = this.grid.verticalScrollContainer.getScroll();\n        if (verticalScroll.scrollHeight === 0 ||\n            verticalScroll.scrollTop === verticalScroll.scrollHeight - this.grid.verticalScrollContainer.igxForContainerSize) {\n            const rowIndex = this.grid.dataView.length - 1;\n            const row = this.grid.nativeElement.querySelector(`[data-rowindex=\"${rowIndex}\"]`) as HTMLElement;\n            const isRowTarget = row.tagName.toLowerCase() === 'igx-grid-groupby-row' ||\n            this.grid.isDetailRecord(this.grid.dataView[rowIndex]);\n            if (row && isRowTarget) {\n                row.focus();\n                return;\n            }\n            const isSummary = (row && row.tagName.toLowerCase() === 'igx-grid-summary-row') ? true : false;\n            this.onKeydownEnd(rowIndex, isSummary);\n        } else {\n            this.grid.verticalScrollContainer.scrollTo(this.grid.dataView.length - 1);\n            this.grid.verticalScrollContainer.onChunkLoad\n                .pipe(first()).subscribe(() => {\n                    const rowIndex = this.grid.dataView.length - 1;\n                    const row = this.grid.nativeElement.querySelector(`[data-rowindex=\"${rowIndex}\"]`) as HTMLElement;\n                    const isRowTarget = row.tagName.toLowerCase() === 'igx-grid-groupby-row' ||\n                    this.grid.isDetailRecord(this.grid.dataView[rowIndex]);\n                    if (row && isRowTarget) {\n                        row.focus();\n                        return;\n                    }\n                    const isSummary = (row && row.tagName.toLowerCase() === 'igx-grid-summary-row') ? true : false;\n                    this.onKeydownEnd(rowIndex, isSummary);\n                });\n        }\n    }\n\n    public performTab(currentRowEl, selectedNode: ISelectionNode) {\n        const rowIndex = selectedNode.row;\n        const visibleColumnIndex = selectedNode.column;\n        const isSummaryRow = selectedNode.isSummaryRow;\n        const nextIsDetailRow = rowIndex + 1 <= this.grid.dataView.length - 1 ?\n         this.grid.isDetailRecord(this.grid.dataView[rowIndex + 1]) : false;\n        const isLastColumn = this.grid.unpinnedColumns[this.grid.unpinnedColumns.length - 1].visibleIndex === visibleColumnIndex;\n        if (isSummaryRow && rowIndex === 0 &&\n            this.grid.unpinnedColumns[this.grid.unpinnedColumns.length - 1].visibleIndex === visibleColumnIndex) {\n            return;\n        }\n\n        if (this.isRowInEditMode(rowIndex)) {\n            this.moveNextEditable(rowIndex, visibleColumnIndex);\n            return;\n        }\n\n        if (nextIsDetailRow && isLastColumn) {\n            this.navigateDown(currentRowEl, { row: rowIndex, column: visibleColumnIndex });\n            return;\n        }\n\n        if (isLastColumn) {\n            const rowEl = this.grid.rowList.find(row => row.index === rowIndex + 1) ?\n                this.grid.rowList.find(row => row.index === rowIndex + 1) :\n                this.grid.summariesRowList.find(row => row.index === rowIndex + 1);\n            if (rowIndex === this.grid.dataView.length - 1 && this.grid.rootSummariesEnabled) {\n                this.onKeydownHome(0, true);\n                return;\n            }\n            if (rowEl) {\n                this.navigateDown(currentRowEl, { row: rowIndex, column: 0 });\n            }\n        } else {\n            const cell = this.getCellElementByVisibleIndex(rowIndex, visibleColumnIndex, isSummaryRow);\n            if (cell) {\n                this.onKeydownArrowRight(cell, selectedNode);\n            }\n        }\n    }\n\n    public moveFocusToFilterCell(toStart?: boolean) {\n        if (this.grid.filteringService.isFilterRowVisible) {\n            this.grid.filteringService.focusFilterRowCloseButton();\n            return;\n        }\n\n        const columns = this.grid.filteringService.unpinnedFilterableColumns;\n        const targetIndex = toStart ? 0 : columns.length - 1;\n        const visibleIndex = columns[targetIndex].visibleIndex;\n        const isVisible = toStart ? this.isColumnLeftEdgeVisible(visibleIndex) : this.isColumnRightEdgeVisible(visibleIndex);\n        if (isVisible) {\n            this.grid.filteringService.focusFilterCellChip(columns[targetIndex], false);\n        } else {\n            this.grid.filteringService.scrollToFilterCell(columns[targetIndex], false);\n        }\n    }\n\n    public navigatePrevFilterCell(column: IgxColumnComponent, eventArgs) {\n        const cols = this.grid.filteringService.unpinnedFilterableColumns;\n        const prevFilterableIndex = cols.indexOf(column) - 1;\n        const visibleIndex = column.visibleIndex;\n        if (visibleIndex === 0 || prevFilterableIndex < 0) {\n            // prev is not filter cell\n            const firstFiltarableCol = this.getFirstPinnedFilterableColumn();\n            if (!firstFiltarableCol || column === firstFiltarableCol) {\n                eventArgs.preventDefault();\n            }\n            return;\n        }\n        const prevColumn = cols[prevFilterableIndex];\n        const prevVisibleIndex = prevColumn.visibleIndex;\n\n        if (prevFilterableIndex >= 0 && visibleIndex > 0 && !this.isColumnLeftEdgeVisible(prevVisibleIndex) && !column.pinned) {\n            eventArgs.preventDefault();\n            this.grid.filteringService.scrollToFilterCell(prevColumn, false);\n        }\n    }\n\n    public navigateFirstCellIfPossible(eventArgs) {\n        if (this.grid.rowList.length > 0) {\n            if (this.grid.rowList.filter(row => row instanceof IgxGridGroupByRowComponent).length > 0) {\n                eventArgs.stopPropagation();\n                return;\n            }\n            this.goToFirstCell();\n        } else if (this.grid.rootSummariesEnabled) {\n            this.onKeydownHome(0, true);\n        }\n        eventArgs.preventDefault();\n    }\n\n    public navigateNextFilterCell(column: IgxColumnComponent, eventArgs) {\n        const cols = this.grid.filteringService.unpinnedFilterableColumns;\n        const nextFilterableIndex = cols.indexOf(column) + 1;\n        if (nextFilterableIndex >= this.grid.filteringService.unpinnedFilterableColumns.length) {\n            // next is not filter cell\n            this.navigateFirstCellIfPossible(eventArgs);\n            return;\n        }\n        const nextColumn = cols[nextFilterableIndex];\n        const nextVisibleIndex = nextColumn.visibleIndex;\n        if (!column.pinned && !this.isColumnRightEdgeVisible(nextVisibleIndex)) {\n            eventArgs.preventDefault();\n            this.grid.filteringService.scrollToFilterCell(nextColumn, true);\n        } else if (column === this.getLastPinnedFilterableColumn() && !this.isColumnRightEdgeVisible(nextVisibleIndex)) {\n            this.grid.filteringService.scrollToFilterCell(nextColumn, false);\n            eventArgs.stopPropagation();\n        }\n    }\n\n    private getLastPinnedFilterableColumn(): IgxColumnComponent {\n        const pinnedFilterableColums =\n            this.grid.pinnedColumns.filter(col => !(col.columnGroup) && col.filterable);\n        return pinnedFilterableColums[pinnedFilterableColums.length - 1];\n    }\n\n    private getFirstPinnedFilterableColumn(): IgxColumnComponent {\n        return this.grid.pinnedColumns.filter(col => !(col.columnGroup) && col.filterable)[0];\n    }\n\n    public performShiftTabKey(currentRowEl, selectedNode: ISelectionNode) {\n        const rowIndex = selectedNode.row;\n        const visibleColumnIndex = selectedNode.column;\n        const isSummary = selectedNode.isSummaryRow;\n        if (isSummary && rowIndex === 0 && visibleColumnIndex === 0 && this.grid.rowList.length) {\n            this.goToLastBodyElement();\n            return;\n        }\n\n        if (this.isRowInEditMode(rowIndex)) {\n            this.movePreviousEditable(rowIndex, visibleColumnIndex);\n            return;\n        }\n\n        const prevIsDetailRow = rowIndex > 0 ? this.grid.isDetailRecord(this.grid.dataView[rowIndex - 1]) : false;\n        if (visibleColumnIndex === 0 && prevIsDetailRow) {\n            let target = currentRowEl.previousElementSibling;\n            const applyFocusFunc = () => {\n                    target = this.getRowByIndex(rowIndex - 1, '');\n                    target.focus({ preventScroll: true });\n            };\n            if (target) {\n                applyFocusFunc();\n            } else {\n                this.performVerticalScrollToCell(rowIndex - 1, visibleColumnIndex, () => {\n                    applyFocusFunc();\n                });\n            }\n\n            return;\n        }\n\n        if (visibleColumnIndex === 0) {\n            if (rowIndex === 0 && this.grid.allowFiltering && this.grid.filterMode === FilterMode.quickFilter) {\n                this.moveFocusToFilterCell();\n            } else {\n                this.navigateUp(currentRowEl,\n                    {\n                        row: rowIndex,\n                        column: this.grid.unpinnedColumns[this.grid.unpinnedColumns.length - 1].visibleIndex\n                    });\n            }\n        } else {\n            const cell = this.getCellElementByVisibleIndex(rowIndex, visibleColumnIndex, isSummary);\n            if (cell) {\n                this.onKeydownArrowLeft(cell, selectedNode);\n            }\n        }\n    }\n\n    public shouldPerformVerticalScroll(targetRowIndex: number, visibleColumnIndex: number): boolean {\n        const containerTopOffset = parseInt(this.verticalDisplayContainerElement.style.top, 10);\n        const targetRow = this.getRowByIndex(targetRowIndex, '') as any;\n        const rowHeight = this.grid.verticalScrollContainer.getSizeAt(targetRowIndex);\n        const containerHeight = this.grid.calcHeight ? Math.ceil(this.grid.calcHeight) : 0;\n        const targetEndTopOffset = targetRow ? targetRow.offsetTop + rowHeight + containerTopOffset :\n            containerHeight + rowHeight;\n        if (!targetRow || targetRow.offsetTop < Math.abs(containerTopOffset)\n            || containerHeight && containerHeight < targetEndTopOffset) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    public performVerticalScrollToCell(rowIndex: number, visibleColIndex: number, cb?: () => void) {\n        this.grid.verticalScrollContainer.scrollTo(rowIndex);\n        this.grid.verticalScrollContainer.onChunkLoad\n            .pipe(first()).subscribe(() => {\n                cb();\n            });\n    }\n\n    public performHorizontalScrollToCell(\n        rowIndex: number, visibleColumnIndex: number, isSummary: boolean = false, cb?: () => void) {\n        const unpinnedIndex = this.getColumnUnpinnedIndex(visibleColumnIndex);\n       this.getFocusableGrid().nativeElement.focus({ preventScroll: true });\n        this.grid.parentVirtDir.onChunkLoad\n            .pipe(first())\n            .subscribe(() => {\n                if (cb) {\n                    cb();\n                } else {\n                    const cellElement = this.getCellElementByVisibleIndex(rowIndex, visibleColumnIndex, isSummary);\n                    if (cellElement) {\n                        cellElement.focus({ preventScroll: true });\n                    }\n                }\n            });\n        this.horizontalScroll(rowIndex).scrollTo(unpinnedIndex);\n    }\n\n    protected getFocusableGrid() {\n        return this.grid;\n    }\n\n    protected getRowByIndex(index, selector = this.getRowSelector()) {\n        const gridTag = this.grid.nativeElement.tagName.toLocaleLowerCase();\n        const row = Array.from(this.grid.tbody.nativeElement.querySelectorAll(\n            `${selector}[data-rowindex=\"${index}\"]`))\n            .find(x => this.getClosestElemByTag(x, gridTag).getAttribute('id') === this.grid.id);\n            return row;\n        }\n\n    protected getNextRowByIndex(nextIndex) {\n        const gridTag = this.grid.nativeElement.tagName.toLocaleLowerCase();\n        const row = Array.from(this.grid.tbody.nativeElement.querySelectorAll(\n            `[data-rowindex=\"${nextIndex}\"]`)).find(x => this.getClosestElemByTag(x, gridTag).getAttribute('id') === this.grid.id);\n        return row;\n    }\n\n    private getAllRows() {\n        const selector = this.getRowSelector();\n        return this.grid.nativeElement.querySelectorAll(selector);\n    }\n\n    protected getCellSelector(visibleIndex?: number, isSummary = false): string {\n        if (visibleIndex === 0 && this.grid.hasDetails && !isSummary) {\n            return 'igx-expandable-grid-cell';\n        }\n        return isSummary ? 'igx-grid-summary-cell' : 'igx-grid-cell';\n    }\n\n    protected getRowSelector(): string {\n        return 'igx-grid-row';\n    }\n\n    protected getClosestElemByTag(sourceElem, targetTag) {\n        let result = sourceElem;\n        while (result !== null && result.nodeType === 1) {\n            if (result.tagName.toLowerCase() === targetTag.toLowerCase()) {\n                return result;\n            }\n            result = result.parentNode;\n        }\n        return null;\n    }\n}\n","import {\n    ChangeDetectorRef,\n    DoCheck,\n    ElementRef,\n    forwardRef,\n    HostBinding,\n    HostListener,\n    Input,\n    QueryList,\n    ViewChild,\n    ViewChildren,\n    Directive\n} from '@angular/core';\nimport { IgxCheckboxComponent } from '../checkbox/checkbox.component';\nimport { IgxGridForOfDirective } from '../directives/for-of/for_of.directive';\nimport { GridBaseAPIService } from './api.service';\nimport { IgxGridCellComponent } from './cell.component';\nimport { IgxColumnComponent } from './columns/column.component';\nimport { TransactionType } from '../services';\nimport { IgxGridBaseDirective } from './grid-base.directive';\nimport { IgxGridSelectionService, IgxGridCRUDService, IgxRow } from './selection/selection.service';\nimport { DeprecateProperty } from '../core/deprecateDecorators';\nimport { GridType } from './common/grid.interface';\n\n@Directive({\n    selector: '[igxRowBaseComponent]'\n})\nexport class IgxRowDirective<T extends IgxGridBaseDirective & GridType> implements DoCheck {\n\n    private _rowData: any;\n    /**\n     *  The data passed to the row component.\n     *\n     * ```typescript\n     * // get the row data for the first selected row\n     * let selectedRowData = this.grid.selectedRows[0].rowData;\n     * ```\n     */\n    @Input()\n    public get rowData(): any {\n        if (this.inEditMode) {\n            return Object.assign({}, this._rowData, this.grid.transactions.getAggregatedValue(this.rowID, false));\n        }\n        return this._rowData;\n    }\n\n    public set rowData(v: any) {\n        this._rowData = v;\n    }\n    /**\n     * The index of the row.\n     *\n     * ```typescript\n     * // get the index of the second selected row\n     * let selectedRowIndex = this.grid.selectedRows[1].index;\n     * ```\n     */\n    @Input()\n    public index: number;\n\n    /**\n     * @hidden\n     */\n    @Input()\n    public gridID: string;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('igxDirRef', { read: IgxGridForOfDirective })\n    public virtDirRow: IgxGridForOfDirective<any>;\n\n    /**\n     * @hidden\n     */\n    @ViewChild(forwardRef(() => IgxCheckboxComponent), { read: IgxCheckboxComponent })\n    public checkboxElement: IgxCheckboxComponent;\n\n    /**\n     * The rendered cells in the row component.\n     *\n     * ```typescript\n     * // get the cells of the third selected row\n     * let selectedRowCells = this.grid.selectedRows[2].cells;\n     * ```\n     */\n    @ViewChildren(forwardRef(() => IgxGridCellComponent))\n    public cells: QueryList<IgxGridCellComponent>;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('attr.role')\n    public role = 'row';\n\n    @HostBinding('attr.data-rowIndex')\n    get dataRowIndex() {\n        return this.index;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class')\n    get styleClasses(): string {\n        return this.resolveClasses();\n    }\n\n    /**\n     * @hidden\n     */\n    @Input()\n    @HostBinding('attr.aria-selected')\n    get selected(): boolean {\n        return this.selectionService.isRowSelected(this.rowID);\n    }\n\n    set selected(value: boolean) {\n        value ? this.selectionService.selectRowsWithNoEvent([this.rowID]) :\n        this.selectionService.deselectRowsWithNoEvent([this.rowID]);\n        this.grid.cdr.markForCheck();\n    }\n\n    /**\n     * @hidden\n     */\n    get columns(): IgxColumnComponent[] {\n        return this.grid.visibleColumns;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    get viewIndex(): number {\n        if ((this.grid as any).groupingExpressions.length) {\n            return this.grid.filteredSortedData.indexOf(this.rowData);\n        }\n        return this.index + this.grid.page * this.grid.perPage;\n    }\n\n    /**\n     * @hidden\n     */\n    get pinnedColumns(): IgxColumnComponent[] {\n        return this.grid.pinnedColumns;\n    }\n\n    /**\n     * @hidden\n     */\n    get unpinnedColumns(): IgxColumnComponent[] {\n        return this.grid.unpinnedColumns;\n    }\n\n    /**\n     * @hidden\n     */\n    public get showRowSelectors(): boolean {\n        return this.grid.showRowSelectors;\n    }\n\n    /** @hidden */\n    public get dirty(): boolean {\n        const row = this.grid.transactions.getState(this.rowID);\n        if (row) {\n            return row.type === TransactionType.ADD || row.type === TransactionType.UPDATE;\n        }\n\n        return false;\n    }\n\n    @DeprecateProperty('isSelected property is deprecated. Use selected property instead.')\n    public get isSelected() {\n        return this.selectionService.isRowSelected(this.rowID);\n    }\n\n    /**\n     * @hidden\n     */\n    public get rowDraggable(): boolean {\n        return this.grid.rowDraggable;\n    }\n\n    /** @hidden */\n    public get added(): boolean {\n        const row = this.grid.transactions.getState(this.rowID);\n        if (row) {\n            return row.type === TransactionType.ADD;\n        }\n\n         return false;\n    }\n\n    /** @hidden */\n    public get deleted(): boolean {\n        return this.gridAPI.row_deleted_transaction(this.rowID);\n    }\n\n    /**\n     * @hidden\n     */\n    public dragging = false;\n\n    // TODO: Refactor\n    public get inEditMode(): boolean {\n        if (this.grid.rowEditable) {\n            const editRowState = this.crudService.row;\n            return (editRowState && editRowState.id === this.rowID) || false;\n        } else {\n            return false;\n        }\n    }\n\n    /**\n     * Get a reference to the grid that contains the selected row.\n     *\n     * ```typescript\n     * handleRowSelection(event) {\n     *  // the grid on which the onRowSelectionChange event was triggered\n     *  const grid = event.row.grid;\n     * }\n     * ```\n     *\n     * ```html\n     *  <igx-grid\n     *    [data]=\"data\"\n     *    (onRowSelectionChange)=\"handleRowSelection($event)\">\n     *  </igx-grid>\n     * ```\n     */\n    get grid(): T {\n        return this.gridAPI.grid;\n    }\n\n    /**\n     * Gets the ID of the row.\n     * A row in the grid is identified either by:\n     * - primaryKey data value,\n     * - the whole rowData, if the primaryKey is omitted.\n     *\n     * ```typescript\n     * let rowID = this.grid.selectedRows[2].rowID;\n     * ```\n     */\n    public get rowID() {\n        const primaryKey = this.grid.primaryKey;\n        return primaryKey ? this._rowData[primaryKey] : this._rowData;\n    }\n\n    /**\n     * The native DOM element representing the row. Could be null in certain environments.\n     *\n     * ```typescript\n     * // get the nativeElement of the second selected row\n     * let selectedRowNativeElement = this.grid.selectedRows[1].nativeElement;\n     * ```\n     */\n    get nativeElement() {\n        return this.element.nativeElement;\n    }\n\n    /**\n     * @hidden\n     */\n    public focused = false;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public defaultCssClass = 'igx-grid__tr';\n\n\n    constructor(\n        public gridAPI: GridBaseAPIService<T>,\n        public crudService: IgxGridCRUDService,\n        public selectionService: IgxGridSelectionService,\n        public element: ElementRef<HTMLElement>,\n        public cdr: ChangeDetectorRef) {}\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('click', ['$event'])\n    public onClick(event: MouseEvent) {\n        if (this.grid.rowSelection === 'none' || this.deleted) { return; }\n        if (event.shiftKey && this.grid.rowSelection === 'multiple') {\n            this.selectionService.selectMultipleRows(this.rowID, this.rowData, event);\n            return;\n        }\n        this.selectionService.selectRowById(this.rowID, !event.ctrlKey, event);\n    }\n\n    /**\n     * @hidden\n     */\n    public onRowSelectorClick(event) {\n        event.stopPropagation();\n        if (event.shiftKey && this.grid.rowSelection === 'multiple') {\n            this.selectionService.selectMultipleRows(this.rowID, this.rowData, event);\n            return;\n        }\n        this.selected ? this.selectionService.deselectRow(this.rowID, event) :\n        this.selectionService.selectRowById(this.rowID, false, event);\n    }\n\n    /**\n     * Updates the specified row object and the data source record with the passed value.\n     * This method emits `onEditDone` event.\n     *\n     * ```typescript\n     * // update the second selected row's value\n     * let newValue = \"Apple\";\n     * this.grid.selectedRows[1].update(newValue);\n     * ```\n     */\n    public update(value: any) {\n        const crudService = this.crudService;\n        if (crudService.inEditMode && crudService.cell.id.rowID === this.rowID) {\n            this.grid.endEdit(false);\n        }\n        const row = new IgxRow(this.rowID, this.index, this.rowData);\n        this.gridAPI.update_row(row, value);\n        this.cdr.markForCheck();\n    }\n\n    /**\n     * Removes the specified row from the grid's data source.\n     * This method emits `onRowDeleted` event.\n     *\n     * ```typescript\n     * // delete the third selected row from the grid\n     * this.grid.selectedRows[2].delete();\n     * ```\n     */\n    public delete() {\n        this.grid.deleteRowById(this.rowID);\n    }\n\n    /**\n     * @hidden\n     */\n    get rowCheckboxAriaLabel() {\n        return this.grid.primaryKey ?\n            this.selected ? 'Deselect row with key ' + this.rowID : 'Select row with key ' + this.rowID :\n            this.selected ? 'Deselect row' : 'Select row';\n    }\n\n    /**\n     * @hidden\n     */\n    public ngDoCheck() {\n        this.cdr.markForCheck();\n    }\n\n    /**\n     * @hidden\n     */\n    protected resolveClasses(): string {\n        const indexClass = this.index % 2 ? this.grid.evenRowCSS : this.grid.oddRowCSS;\n        const selectedClass = this.selected ? 'igx-grid__tr--selected' : '';\n        const editClass = this.inEditMode ? 'igx-grid__tr--edit' : '';\n        const dirtyClass = this.dirty ? 'igx-grid__tr--edited' : '';\n        const deletedClass = this.deleted ? 'igx-grid__tr--deleted' : '';\n        const mrlClass = this.grid.hasColumnLayouts ? 'igx-grid__tr--mrl' : '';\n        const dragClass = this.dragging ? 'igx-grid__tr--drag' : '';\n        return `${this.defaultCssClass} ${indexClass} ${selectedClass} ${editClass} ${dirtyClass}\n         ${deletedClass} ${mrlClass} ${dragClass}`.trim();\n    }\n\n    /**\n     * @hidden\n     */\n    public get resolveDragIndicatorClasses(): string {\n        const defaultDragIndicatorCssClass = 'igx-grid__drag-indicator';\n        const dragIndicatorOff = this.grid.rowDragging && !this.dragging ? 'igx-grid__drag-indicator--off' : '';\n        return `${defaultDragIndicatorCssClass} ${dragIndicatorOff}`;\n    }\n}\n","export interface ISummaryExpression {\n    fieldName: string;\n    customSummary?: any;\n}\nexport interface IgxSummaryResult {\n    key: string;\n    label: string;\n    summaryResult: any;\n}\n\nexport interface ISummaryRecord {\n    summaries: Map<string, IgxSummaryResult[]>;\n    max?: number;\n    cellIndentation?: number;\n}\n\nconst clear = (el) => el === 0 || Boolean(el);\nconst first = (arr) => arr[0];\nconst last = (arr) => arr[arr.length - 1];\n\nexport class IgxSummaryOperand {\n    /**\n     * Counts all the records in the data source.\n     * If filtering is applied, counts only the filtered records.\n     * ```typescript\n     * IgxSummaryOperand.count(dataSource);\n     * ```\n     * @memberof IgxSummaryOperand\n     */\n    public static count(data: any[]): number {\n        return data.length;\n    }\n    /**\n     * Executes the static `count` method and returns `IgxSummaryResult[]`.\n     * ```typescript\n     * interface IgxSummaryResult {\n     *   key: string;\n     *   label: string;\n     *   summaryResult: any;\n     * }\n     * ```\n     * Can be overridden in the inherited classes to provide customization for the `summary`.\n     * ```typescript\n     * class CustomSummary extends IgxSummaryOperand {\n     *   constructor() {\n     *     super();\n     *   }\n     *   public operate(data: any[], allData: any[], fieldName: string): IgxSummaryResult[] {\n     *     const result = [];\n     *     result.push({\n     *       key: \"test\",\n     *       label: \"Test\",\n     *       summaryResult: IgxSummaryOperand.count(data)\n     *     });\n     *     return result;\n     *   }\n     * }\n     * this.grid.getColumnByName('ColumnName').summaries = CustomSummary;\n     * ```\n     * @memberof IgxSummaryOperand\n     */\n    public operate(data: any[] = [], allData: any[] = [], fieldName?: string): IgxSummaryResult[] {\n        return [{\n            key: 'count',\n            label: 'Count',\n            summaryResult: IgxSummaryOperand.count(data)\n        }];\n    }\n}\n\n// @dynamic\nexport class IgxNumberSummaryOperand extends IgxSummaryOperand {\n    /**\n     * Returns the minimum numeric value in the provided data records.\n     * If filtering is applied, returns the minimum value in the filtered data records.\n     * ```typescript\n     * IgxNumberSummaryOperand.min(data);\n     * ```\n     * @memberof IgxNumberSummaryOperand\n     */\n    public static min(data: any[]): number {\n        return data.length && data.filter(clear).length ? data.filter(clear).reduce((a, b) => Math.min(a, b)) : 0;\n    }\n    /**\n     * Returns the maximum numeric value in the provided data records.\n     * If filtering is applied, returns the maximum value in the filtered data records.\n     * ```typescript\n     * IgxNumberSummaryOperand.max(data);\n     * ```\n     * @memberof IgxNumberSummaryOperand\n     */\n    public static max(data: any[]): number {\n        return data.length && data.filter(clear).length ? data.filter(clear).reduce((a, b) => Math.max(a, b)) : 0;\n    }\n    /**\n     * Returns the sum of the numeric values in the provided data records.\n     * If filtering is applied, returns the sum of the numeric values in the data records.\n     * ```typescript\n     * IgxNumberSummaryOperand.sum(data);\n     * ```\n     * @memberof IgxNumberSummaryOperand\n     */\n    public static sum(data: any[]): number {\n        return data.length && data.filter(clear).length ? data.filter(clear).reduce((a, b) => +a + +b) : 0;\n    }\n    /**\n     * Returns the average numeric value in the data provided data records.\n     * If filtering is applied, returns the average numeric value in the filtered data records.\n     * ```typescript\n     * IgxSummaryOperand.average(data);\n     * ```\n     * @memberof IgxNumberSummaryOperand\n     */\n    public static average(data: any[]): number {\n        return data.length && data.filter(clear).length ? this.sum(data) / this.count(data) : 0;\n    }\n    /**\n     * Executes the static methods and returns `IgxSummaryResult[]`.\n     * ```typescript\n     * interface IgxSummaryResult {\n     *   key: string;\n     *   label: string;\n     *   summaryResult: any;\n     * }\n     * ```\n     * Can be overridden in the inherited classes to provide customization for the `summary`.\n     * ```typescript\n     * class CustomNumberSummary extends IgxNumberSummaryOperand {\n     *   constructor() {\n     *     super();\n     *   }\n     *   public operate(data: any[], allData: any[], fieldName: string): IgxSummaryResult[] {\n     *     const result = [];\n     *     result.push({\n     *       key: \"avg\",\n     *       label: \"Avg\",\n     *       summaryResult: IgxNumberSummaryOperand.average(data)\n     *     });\n     *     result.push({\n     *       key: \"max\",\n     *       label: \"Max\",\n     *       summaryResult: IgxNumberSummaryOperand.max(data)\n     *     });\n     *     return result;\n     *   }\n     * }\n     * this.grid.getColumnByName('ColumnName').summaries = CustomNumberSummary;\n     * ```\n     * @memberof IgxNumberSummaryOperand\n     */\n    public operate(data: any[] = [], allData: any[] = [], fieldName?: string): IgxSummaryResult[] {\n        const result = super.operate(data, allData, fieldName);\n        result.push({\n            key: 'min',\n            label: 'Min',\n            summaryResult: IgxNumberSummaryOperand.min(data)\n        });\n        result.push({\n            key: 'max',\n            label: 'Max',\n            summaryResult: IgxNumberSummaryOperand.max(data)\n        });\n        result.push({\n            key: 'sum',\n            label: 'Sum',\n            summaryResult: IgxNumberSummaryOperand.sum(data)\n        });\n        result.push({\n            key: 'average',\n            label: 'Avg',\n            summaryResult: IgxNumberSummaryOperand.average(data)\n        });\n        return result;\n    }\n}\n\n// @dynamic\nexport class IgxDateSummaryOperand extends IgxSummaryOperand {\n    /**\n     * Returns the latest date value in the data records.\n     * If filtering is applied, returns the latest date value in the filtered data records.\n     * ```typescript\n     * IgxDateSummaryOperand.latest(data);\n     * ```\n     * @memberof IgxDateSummaryOperand\n     */\n    public static latest(data: any[]) {\n        return data.length && data.filter(clear).length ?\n            first(data.filter(clear).sort((a, b) => new Date(b).valueOf() - new Date(a).valueOf())) : undefined;\n    }\n    /**\n     * Returns the earliest date value in the data records.\n     * If filtering is applied, returns the latest date value in the filtered data records.\n     * ```typescript\n     * IgxDateSummaryOperand.earliest(data);\n     * ```\n     * @memberof IgxDateSummaryOperand\n     */\n    public static earliest(data: any[]) {\n        return data.length && data.filter(clear).length ?\n            last(data.filter(clear).sort((a, b) => new Date(b).valueOf() - new Date(a).valueOf())) : undefined;\n    }\n    /**\n     * Executes the static methods and returns `IgxSummaryResult[]`.\n     * ```typescript\n     * interface IgxSummaryResult {\n     *   key: string;\n     *   label: string;\n     *   summaryResult: any;\n     * }\n     * ```\n     * Can be overridden in the inherited classes to provide customization for the `summary`.\n     * ```typescript\n     * class CustomDateSummary extends IgxDateSummaryOperand {\n     *   constructor() {\n     *     super();\n     *   }\n     *   public operate(data: any[], allData: any[], fieldName: string): IgxSummaryResult[] {\n     *     const result = [];\n     *     result.push({\n     *       key: \"latest\",\n     *       label: \"Latest Date\",\n     *       summaryResult: IgxDateSummaryOperand.latest(data)\n     *     });\n     *     return result;\n     *   }\n     * }\n     * this.grid.getColumnByName('ColumnName').summaries = CustomDateSummary;\n     * ```\n     * @memberof IgxDateSummaryOperand\n     */\n    public operate(data: any[] = [], allData: any[] = [], fieldName?: string): IgxSummaryResult[] {\n        const result = super.operate(data, allData, fieldName);\n        result.push({\n            key: 'earliest',\n            label: 'Earliest',\n            summaryResult: IgxDateSummaryOperand.earliest(data)\n        });\n        result.push({\n            key: 'latest',\n            label: 'Latest',\n            summaryResult: IgxDateSummaryOperand.latest(data)\n        });\n        return result;\n    }\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n\n@Directive({\n    selector: '[igxFilterCellTemplate]'\n})\nexport class IgxFilterCellTemplateDirective {\n    constructor(public template: TemplateRef<any>) {}\n}\n\n@Directive({\n    selector: '[igxCell]'\n})\nexport class IgxCellTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) { }\n}\n\n@Directive({\n    selector: '[igxHeader]'\n})\nexport class IgxCellHeaderTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) { }\n\n}\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxFooter]'\n})\nexport class IgxCellFooterTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) { }\n}\n\n@Directive({\n    selector: '[igxCellEditor]'\n})\nexport class IgxCellEditorTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) { }\n}\n\n@Directive({\n    selector: '[igxCollapsibleIndicator]'\n})\nexport class IgxCollapsibleIndicatorTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) { }\n}\n","import {\n    AfterContentInit,\n    ChangeDetectorRef,\n    ChangeDetectionStrategy,\n    Component,\n    ContentChild,\n    ContentChildren,\n    Input,\n    QueryList,\n    TemplateRef,\n    Output,\n    EventEmitter,\n    ElementRef,\n} from '@angular/core';\nimport { notifyChanges } from '../watch-changes';\nimport { WatchColumnChanges } from '../watch-changes';\nimport { IgxRowIslandAPIService } from '../hierarchical-grid/row-island-api.service';\nimport { DataType } from '../../data-operations/data-util';\nimport { DeprecateProperty } from '../../core/deprecateDecorators';\nimport {\n    IgxFilteringOperand,\n    IgxBooleanFilteringOperand,\n    IgxNumberFilteringOperand,\n    IgxDateFilteringOperand,\n    IgxStringFilteringOperand\n} from '../../data-operations/filtering-condition';\nimport { ISortingStrategy, DefaultSortingStrategy } from '../../data-operations/sorting-strategy';\nimport { DisplayDensity } from '../../core/displayDensity';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { IgxGridCellComponent } from '../cell.component';\nimport { IgxRowDirective } from '../row.directive';\nimport { FilteringExpressionsTree } from '../../data-operations/filtering-expressions-tree';\nimport { GridBaseAPIService } from '../api.service';\nimport { GridType } from '../common/grid.interface';\nimport { IgxGridHeaderComponent } from '../headers/grid-header.component';\nimport { IgxGridFilteringCellComponent } from '../filtering/base/grid-filtering-cell.component';\nimport { IgxGridHeaderGroupComponent } from '../headers/grid-header-group.component';\nimport { getNodeSizeViaRange } from '../../core/utils';\nimport { IgxSummaryOperand, IgxNumberSummaryOperand, IgxDateSummaryOperand } from '../summaries/grid-summary';\nimport {\n    IgxCellTemplateDirective,\n    IgxCellHeaderTemplateDirective,\n    IgxCellEditorTemplateDirective,\n    IgxCollapsibleIndicatorTemplateDirective,\n    IgxFilterCellTemplateDirective\n} from './templates.directive';\nimport { MRLResizeColumnInfo, MRLColumnSizeInfo } from './interfaces';\n\n/**\n * **Ignite UI for Angular Column** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/grid.html#columns-configuration)\n *\n * The Ignite UI Column is used within an `igx-grid` element to define what data the column will show. Features such as sorting,\n * filtering & editing are enabled at the column level.  You can also provide a template containing custom content inside\n * the column using `ng-template` which will be used for all cells within the column.\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-column',\n    template: ``\n})\nexport class IgxColumnComponent implements AfterContentInit {\n    /**\n     * Sets/gets the `field` value.\n     * ```typescript\n     * let columnField = this.column.field;\n     * ```\n     * ```html\n     * <igx-column [field] = \"'ID'\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @Input()\n    public field: string;\n    /**\n     * Sets/gets the `header` value.\n     * ```typescript\n     * let columnHeader = this.column.header;\n     * ```\n     * ```html\n     * <igx-column [header] = \"'ID'\"></igx-column>\n     * ```\n     *\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    public header = '';\n    /**\n     * Sets/gets whether the column is sortable.\n     * Default value is `false`.\n     * ```typescript\n     * let isSortable = this.column.sortable;\n     * ```\n     * ```html\n     * <igx-column [sortable] = \"true\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @WatchColumnChanges()\n    @Input()\n    public sortable = false;\n    /**\n     * Sets/gets whether the column is groupable.\n     * Default value is `false`.\n     * ```typescript\n     * let isGroupable = this.column.groupable;\n     * ```\n     * ```html\n     * <igx-column [groupable] = \"true\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges(true)\n    @WatchColumnChanges()\n    @Input()\n    groupable = false;\n    /**\n     * Gets whether the column is editable.\n     * Default value is `false`.\n     * ```typescript\n     * let isEditable = this.column.editable;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @WatchColumnChanges()\n    @Input()\n    get editable(): boolean {\n        // Updating the primary key when grid has transactions (incl. row edit)\n        // should not be allowed, as that can corrupt transaction state.\n        const rowEditable = this.grid && this.grid.rowEditable;\n        const hasTransactions = this.grid && this.grid.transactions.enabled;\n\n        if (this.isPrimaryColumn && (rowEditable || hasTransactions)) {\n            return false;\n        }\n\n        if (this._editable !== undefined) {\n            return this._editable;\n        } else {\n            return rowEditable;\n        }\n    }\n    /**\n     * Sets whether the column is editable.\n     * ```typescript\n     * this.column.editable = true;\n     * ```\n     * ```html\n     * <igx-column [editable] = \"true\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    set editable(editable: boolean) {\n        this._editable = editable;\n    }\n    /**\n     * Sets/gets whether the column is filterable.\n     * Default value is `true`.\n     * ```typescript\n     * let isFilterable = this.column.filterable;\n     * ```\n     * ```html\n     * <igx-column [filterable] = \"false\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    public filterable = true;\n    /**\n     * Sets/gets whether the column is resizable.\n     * Default value is `false`.\n     * ```typescript\n     * let isResizable = this.column.resizable;\n     * ```\n     * ```html\n     * <igx-column [resizable] = \"true\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @WatchColumnChanges()\n    @Input()\n    public resizable = false;\n    /**\n     * Gets a value indicating whether the summary for the column is enabled.\n     * ```typescript\n     * let hasSummary = this.column.hasSummary;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges(true)\n    @WatchColumnChanges()\n    @Input()\n    get hasSummary() {\n        return this._hasSummary;\n    }\n    /**\n     * Sets a value indicating whether the summary for the column is enabled.\n     * Default value is `false`.\n     * ```html\n     * <igx-column [hasSummary] = \"true\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    set hasSummary(value) {\n        this._hasSummary = value;\n\n        if (this.grid) {\n            this.grid.summaryService.resetSummaryHeight();\n        }\n    }\n    /**\n     * Gets whether the column is hidden.\n     * ```typescript\n     * let isHidden = this.column.hidden;\n     * ```\n     *@memberof IgxColumnComponent\n     */\n    @notifyChanges(true)\n    @WatchColumnChanges()\n    @Input()\n    get hidden(): boolean {\n        return this._hidden;\n    }\n    /**\n     * Sets the column hidden property.\n     * Default value is `false`.\n     * ```html\n     * <igx-column [hidden] = \"true\"></igx-column>\n     * ```\n     *\n     * Two-way data binding.\n     * ```html\n     * <igx-column [(hidden)] = \"model.isHidden\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    set hidden(value: boolean) {\n        if (this._hidden !== value) {\n            this._hidden = value;\n            this.hiddenChange.emit(this._hidden);\n            if (this.columnLayoutChild && this.parent.hidden !== value) {\n                this.parent.hidden = value;\n                return;\n            }\n            if (this.grid) {\n                this.grid.endEdit(false);\n                this.grid.summaryService.resetSummaryHeight();\n                this.grid.filteringService.refreshExpressions();\n                this.grid.filteringService.hideFilteringRowOnColumnVisibilityChange(this);\n                this.grid.notifyChanges();\n            }\n        }\n    }\n\n    /**\n     *@hidden\n     */\n    @Output()\n    public hiddenChange = new EventEmitter<boolean>();\n\n    /** @hidden */\n    @Output()\n    public expandedChange = new EventEmitter<boolean>();\n\n    /** @hidden */\n    @Output()\n    public collapsibleChange = new EventEmitter<boolean>();\n    /** @hidden */\n    @Output()\n    public visibleWhenCollapsedChange = new EventEmitter<boolean>();\n\n    /**\n     * Gets whether the hiding is disabled.\n     * ```typescript\n     * let isHidingDisabled =  this.column.disableHiding;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    disableHiding = false;\n    /**\n     * Gets whether the pinning is disabled.\n     * ```typescript\n     * let isPinningDisabled =  this.column.disablePinning;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    disablePinning = false;\n    /**\n     * Sets/gets whether the column is movable.\n     * Default value is `false`.\n     * ```typescript\n     * let isMovable = this.column.movable;\n     * ```\n     * ```html\n     * <igx-column [movable] = \"true\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @WatchColumnChanges()\n    @notifyChanges()\n    @Input()\n    public movable = false;\n    /**\n     * Gets the `width` of the column.\n     * ```typescript\n     * let columnWidth = this.column.width;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges(true)\n    @WatchColumnChanges()\n    @Input()\n    public get width(): string {\n        return this.widthSetByUser ? this._width : this.defaultWidth;\n    }\n    /**\n     * Sets the `width` of the column.\n     * ```html\n     * <igx-column [width] = \"'25%'\"></igx-column>\n     * ```\n     *\n     * Two-way data binding.\n     * ```html\n     * <igx-column [(width)]=\"model.columns[0].width\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public set width(value: string) {\n        if (value) {\n            this._calcWidth = null;\n            this.calcPixelWidth = NaN;\n            this.widthSetByUser = true;\n            // width could be passed as number from the template\n            // host bindings are not px affixed so we need to ensure we affix simple number strings\n            if (typeof(value) === 'number' || value.match(/^[0-9]*$/)) {\n                value = value + 'px';\n            }\n            this._width = value;\n            if (this.grid) {\n                this.cacheCalcWidth();\n            }\n            this.widthChange.emit(this._width);\n        }\n    }\n\n    /**\n     *@hidden\n     */\n    @Output()\n    public widthChange = new EventEmitter<string>();\n\n    /**\n     * @hidden\n     */\n    public get calcWidth(): any {\n        return this.getCalcWidth();\n    }\n\n    private _calcWidth = null;\n    public calcPixelWidth: number;\n\n    /**\n     * Sets/gets the maximum `width` of the column.\n     * ```typescript\n     * let columnMaxWidth = this.column.width;\n     * ```\n     * ```html\n     * <igx-column [maxWidth] = \"'150px'\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @WatchColumnChanges()\n    @Input()\n    public maxWidth: string;\n    /**\n     * Sets/gets the minimum `width` of the column.\n     * Default value is `88`;\n     * ```typescript\n     * let columnMinWidth = this.column.minWidth;\n     * ```\n     * ```html\n     * <igx-column [minWidth] = \"'100px'\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    public set minWidth(value: string) {\n        const minVal = parseFloat(value);\n        if (Number.isNaN(minVal)) { return; }\n        this._defaultMinWidth = value;\n\n    }\n    public get minWidth(): string {\n        return !this._defaultMinWidth ? this.defaultMinWidth : this._defaultMinWidth;\n    }\n    /**\n     * Sets/gets the class selector of the column header.\n     * ```typescript\n     * let columnHeaderClass = this.column.headerClasses;\n     * ```\n     * ```html\n     * <igx-column [headerClasses] = \"'column-header'\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    public headerClasses = '';\n\n    /**\n     * Sets/gets the class selector of the column group header.\n     * ```typescript\n     * let columnHeaderClass = this.column.headerGroupClasses;\n     * ```\n     * ```html\n     * <igx-column [headerGroupClasses] = \"'column-group-header'\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    public headerGroupClasses = '';\n    /**\n     * Sets a conditional class selector of the column cells.\n     * Accepts an object literal, containing key-value pairs,\n     * where the key is the name of the CSS class, while the\n     * value is either a callback function that returns a boolean,\n     * or boolean, like so:\n     * ```typescript\n     * callback = (rowData, columnKey, cellValue, rowIndex) => { return rowData[columnKey] > 6; }\n     * cellClasses = { 'className' : this.callback };\n     * ```\n     * ```html\n     * <igx-column [cellClasses] = \"cellClasses\"></igx-column>\n     * <igx-column [cellClasses] = \"{'class1' : true }\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    public cellClasses: any;\n\n    /**\n     * Sets conditional style properties on the column cells.\n     * Similar to `ngStyle` it accepts an object literal where the keys are\n     * the style properties and the value is the expression to be evaluated.\n     * As with `cellClasses` it accepts a callback function.\n     * ```typescript\n     * styles = {\n     *  background: 'royalblue',\n     *  color: (rowData, columnKey, cellValue, rowIndex) => value.startsWith('Important') : 'red': 'inherit'\n     * }\n     * ```\n     * ```html\n     * <igx-column [cellStyles]=\"styles\"></igx-column>\n     * ```\n     *\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    cellStyles = null;\n    /**\n     * Gets the column index.\n     * ```typescript\n     * let columnIndex = this.column.index;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get index(): number {\n        return this.grid.columns.indexOf(this);\n    }\n    /**\n     * When autogenerating columns, the formatter is used to format the display of the column data\n     * without modifying the underlying bound values.\n     *\n     * In this example, we check to see if the column name is Salary, and then provide a method as the column formatter\n     * to format the value into a currency string.\n     *\n     * ```typescript\n     * onColumnInit(column: IgxColumnComponent) {\n     *   if (column.field == \"Salary\") {\n     *     column.formatter = (salary => this.format(salary));\n     *   }\n     * }\n     *\n     * format(value: number) : string {\n     *   return formatCurrency(value, \"en-us\", \"$\");\n     * }\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    formatter: (value: any) => any;\n    /**\n     * Sets/gets whether the column filtering should be case sensitive.\n     * Default value is `true`.\n     * ```typescript\n     * let filteringIgnoreCase = this.column.filteringIgnoreCase;\n     * ```\n     * ```html\n     * <igx-column [filteringIgnoreCase] = \"false\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @WatchColumnChanges()\n    @Input()\n    public filteringIgnoreCase = true;\n    /**\n     * Sets/gets whether the column sorting should be case sensitive.\n     * Default value is `true`.\n     * ```typescript\n     * let sortingIgnoreCase = this.column.sortingIgnoreCase;\n     * ```\n     * ```html\n     * <igx-column [sortingIgnoreCase] = \"false\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @WatchColumnChanges()\n    @Input()\n    public sortingIgnoreCase = true;\n    /**\n     * Sets/gets the data type of the column values.\n     * Default value is `string`.\n     * ```typescript\n     * let columnDataType = this.column.dataType;\n     * ```\n     * ```html\n     * <igx-column [dataType] = \"'number'\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @Input()\n    public dataType: DataType = DataType.String;\n    /**\n     * Gets whether the column is `pinned`.\n     * ```typescript\n     * let isPinned = this.column.pinned;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @WatchColumnChanges()\n    @Input()\n    public get pinned(): boolean {\n        return this._pinned;\n    }\n    /**\n     * Sets whether the column is pinned.\n     * Default value is `false`.\n     * ```html\n     * <igx-column [pinned] = \"true\"></igx-column>\n     * ```\n     *\n     * Two-way data binding.\n     * ```html\n     * <igx-column [(pinned)] = \"model.columns[0].isPinned\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public set pinned(value: boolean) {\n        if (this._pinned !== value) {\n            if (this.grid && this.width && !isNaN(parseInt(this.width, 10))) {\n                value ? this.pin() : this.unpin();\n                return;\n            }\n            /* No grid/width available at initialization. `initPinning` in the grid\n               will re-init the group (if present)\n            */\n            this._unpinnedIndex = this.grid ? this.grid.columns.filter(x => !x.pinned).indexOf(this) : 0;\n            this._pinned = value;\n            this.pinnedChange.emit(this._pinned);\n        }\n    }\n\n    /**\n     *@hidden\n     */\n    @Output()\n    public pinnedChange = new EventEmitter<boolean>();\n\n    /**\n     * @deprecated\n     * Gets/Sets the `id` of the `igx-grid`.\n     * ```typescript\n     * let columnGridId = this.column.gridID;\n     * ```\n     * ```typescript\n     * this.column.gridID = 'grid-1';\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @DeprecateProperty(`The property is deprecated. Please, use \\`column.grid.id\\` instead.`)\n    public gridID: string;\n    /**\n     * Gets the column `summaries`.\n     * ```typescript\n     * let columnSummaries = this.column.summaries;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges(true)\n    @WatchColumnChanges()\n    @Input()\n    public get summaries(): any {\n        return this._summaries;\n    }\n    /**\n     * Sets the column `summaries`.\n     * ```typescript\n     * this.column.summaries = IgxNumberSummaryOperand;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public set summaries(classRef: any) {\n        this._summaries = new classRef();\n\n        if (this.grid) {\n            this.grid.summaryService.removeSummariesCachePerColumn(this.field);\n            (this.grid as any)._summaryPipeTrigger++;\n            this.grid.summaryService.resetSummaryHeight();\n        }\n    }\n    /**\n     * Sets/gets whether the column is `searchable`.\n     * Default value is `true`.\n     * ```typescript\n     * let isSearchable =  this.column.searchable';\n     * ```\n     * ```html\n     *  <igx-column [searchable] = \"false\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    public searchable = true;\n    /**\n     * Gets the column `filters`.\n     * ```typescript\n     * let columnFilters = this.column.filters'\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @Input()\n    public get filters(): IgxFilteringOperand {\n        return this._filters;\n    }\n    /**\n     * Sets the column `filters`.\n     * ```typescript\n     * this.column.filters = IgxBooleanFilteringOperand.instance().\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public set filters(instance: IgxFilteringOperand) {\n        this._filters = instance;\n    }\n    /**\n     * Gets the column `sortStrategy`.\n     * ```typescript\n     * let sortStrategy = this.column.sortStrategy\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @Input()\n    public get sortStrategy(): ISortingStrategy {\n        return this._sortStrategy;\n    }\n    /**\n     * Sets the column `sortStrategy`.\n     * ```typescript\n     * this.column.sortStrategy = new CustomSortingStrategy().\n     * class CustomSortingStrategy extends SortingStrategy {...}\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public set sortStrategy(classRef: ISortingStrategy) {\n        this._sortStrategy = classRef;\n    }\n    /**\n    * Gets the function that compares values for grouping.\n    * ```typescript\n    * let groupingComparer = this.column.groupingComparer'\n    * ```\n    * @memberof IgxColumnComponent\n    */\n    @Input()\n    public get groupingComparer(): (a: any, b: any) => number {\n        return this._groupingComparer;\n    }\n    /**\n     * Sets a custom function to compare values for grouping.\n     * Subsequent values in the sorted data that the function returns 0 for are grouped.\n     * ```typescript\n     * this.column.groupingComparer = (a: any, b: any) => { return a === b ? 0 : -1; }\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public set groupingComparer(funcRef: (a: any, b: any) => number) {\n        this._groupingComparer = funcRef;\n    }\n    /**\n     * Gets the default minimum `width` of the column.\n     * ```typescript\n     * let defaultMinWidth =  this.column.defaultMinWidth;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get defaultMinWidth(): string {\n        if (!this.grid) { return '80'; }\n        switch (this.grid.displayDensity) {\n            case DisplayDensity.cosy:\n                return '64';\n            case DisplayDensity.compact:\n                return '56';\n            default:\n                return '80';\n        }\n    }\n    /**\n     * The reference to the `igx-grid` owner.\n     * ```typescript\n     * let gridComponent = this.column.grid;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public get grid(): IgxGridBaseDirective {\n        return this.gridAPI.grid;\n    }\n    /**\n     * Returns a reference to the `bodyTemplate`.\n     * ```typescript\n     * let bodyTemplate = this.column.bodyTemplate;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input('cellTemplate')\n    get bodyTemplate(): TemplateRef<any> {\n        return this._bodyTemplate;\n    }\n    /**\n     * Sets the body template.\n     * ```html\n     * <ng-template #bodyTemplate igxCell let-val>\n     *    <div style = \"background-color: yellowgreen\" (click) = \"changeColor(val)\">\n     *       <span> {{val}} </span>\n     *    </div>\n     * </ng-template>\n     * ```\n     * ```typescript\n     * @ViewChild(\"'bodyTemplate'\", {read: TemplateRef })\n     * public bodyTemplate: TemplateRef<any>;\n     * this.column.bodyTemplate = this.bodyTemplate;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    set bodyTemplate(template: TemplateRef<any>) {\n        this._bodyTemplate = template;\n    }\n    /**\n     * Returns a reference to the header template.\n     * ```typescript\n     * let headerTemplate = this.column.headerTemplate;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    get headerTemplate(): TemplateRef<any> {\n        return this._headerTemplate;\n    }\n    /**\n     * Sets the header template.\n     * Note that the column header height is fixed and any content bigger than it will be cut off.\n     * ```html\n     * <ng-template #headerTemplate>\n     *   <div style = \"background-color:black\" (click) = \"changeColor(val)\">\n     *       <span style=\"color:red\" >{{column.field}}</span>\n     *   </div>\n     * </ng-template>\n     * ```\n     * ```typescript\n     * @ViewChild(\"'headerTemplate'\", {read: TemplateRef })\n     * public headerTemplate: TemplateRef<any>;\n     * this.column.headerTemplate = this.headerTemplate;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    set headerTemplate(template: TemplateRef<any>) {\n        this._headerTemplate = template;\n    }\n    /**\n     * Returns a reference to the inline editor template.\n     * ```typescript\n     * let inlineEditorTemplate = this.column.inlineEditorTemplate;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input('cellEditorTemplate')\n    get inlineEditorTemplate(): TemplateRef<any> {\n        return this._inlineEditorTemplate;\n    }\n    /**\n     * Sets the inline editor template.\n     * ```html\n     * <ng-template #inlineEditorTemplate igxCellEditor let-cell=\"cell\">\n     *     <input type=\"string\" [(ngModel)]=\"cell.value\"/>\n     * </ng-template>\n     * ```\n     * ```typescript\n     * @ViewChild(\"'inlineEditorTemplate'\", {read: TemplateRef })\n     * public inlineEditorTemplate: TemplateRef<any>;\n     * this.column.inlineEditorTemplate = this.inlineEditorTemplate;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    set inlineEditorTemplate(template: TemplateRef<any>) {\n        this._inlineEditorTemplate = template;\n    }\n    /**\n     * Returns a reference to the `filterCellTemplate`.\n     * ```typescript\n     * let filterCellTemplate = this.column.filterCellTemplate;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input('filterCellTemplate')\n    get filterCellTemplate(): TemplateRef<any> {\n        return this._filterCellTemplate;\n    }\n    /**\n     * Sets the quick filter template.\n     * ```html\n     * <ng-template #filterCellTemplate IgxFilterCellTemplate let-column=\"column\">\n     *    <input (input)=\"onInput()\">\n     * </ng-template>\n     * ```\n     * ```typescript\n     * @ViewChild(\"'filterCellTemplate'\", {read: TemplateRef })\n     * public filterCellTemplate: TemplateRef<any>;\n     * this.column.filterCellTemplate = this.filterCellTemplate;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    set filterCellTemplate(template: TemplateRef<any>) {\n        this._filterCellTemplate = template;\n    }\n\n    /** @hidden */\n    @Input('collapsibleIndicatorTemplate')\n    public collapsibleIndicatorTemplate: TemplateRef<any>;\n    /**\n     * Gets the cells of the column.\n     * ```typescript\n     * let columnCells =  this.column.cells;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get cells(): IgxGridCellComponent[] {\n        return this.grid.rowList.filter((row) => row instanceof IgxRowDirective)\n            .map((row) => {\n                if (row.cells) {\n                    return row.cells.filter((cell) => cell.columnIndex === this.index);\n                }\n            }).reduce((a, b) => a.concat(b), []);\n    }\n    /**\n     * Gets the column visible index.\n     * If the column is not visible, returns `-1`.\n     * ```typescript\n     * let visibleColumnIndex =  this.column.visibleIndex;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get visibleIndex(): number {\n        if (!isNaN(this._vIndex)) {\n            return this._vIndex;\n        }\n        const unpinnedColumns = this.grid.unpinnedColumns.filter(c => !c.columnGroup);\n        const pinnedColumns = this.grid.pinnedColumns.filter(c => !c.columnGroup);\n        let col = this;\n        let vIndex = -1;\n\n        if (this.columnGroup) {\n            col = this.allChildren.filter(c => !c.columnGroup)[0] as any;\n        }\n        if (this.columnLayoutChild) {\n            return this.parent.childrenVisibleIndexes.find(x => x.column === this).index;\n        }\n\n        if (!this.pinned) {\n            const indexInCollection = unpinnedColumns.indexOf(col);\n            vIndex = indexInCollection === -1 ? -1 : pinnedColumns.length + indexInCollection;\n        } else {\n            vIndex = pinnedColumns.indexOf(col);\n        }\n        this._vIndex = vIndex;\n        return vIndex;\n    }\n    /**\n     * Returns a boolean indicating if the column is a `ColumnGroup`.\n     * ```typescript\n     * let columnGroup =  this.column.columnGroup;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get columnGroup() {\n        return false;\n    }\n    /**\n     * Returns a boolean indicating if the column is a `ColumnLayout` for multi-row layout.\n     * ```typescript\n     * let columnGroup =  this.column.columnGroup;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get columnLayout() {\n        return false;\n    }\n\n    /**\n    * Returns a boolean indicating if the column is a child of a `ColumnLayout` for multi-row layout.\n    * ```typescript\n    * let columnLayoutChild =  this.column.columnLayoutChild;\n    * ```\n    * @memberof IgxColumnComponent\n    */\n    get columnLayoutChild() {\n        return this.parent && this.parent.columnLayout;\n    }\n\n    /**\n     * Returns the children columns collection.\n     * Returns an empty array if the column does not contain children columns.\n     * ```typescript\n     * let childrenColumns =  this.column.allChildren;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get allChildren(): IgxColumnComponent[] {\n        return [];\n    }\n    /**\n     * Returns the level of the column in a column group.\n     * Returns `0` if the column doesn't have a `parent`.\n     * ```typescript\n     * let columnLevel =  this.column.level;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get level() {\n        let ptr = this.parent;\n        let lvl = 0;\n\n        while (ptr) {\n            lvl++;\n            ptr = ptr.parent;\n        }\n        return lvl;\n    }\n\n    get isLastPinned(): boolean {\n        return this.grid.pinnedColumns[this.grid.pinnedColumns.length - 1] === this;\n    }\n    get gridRowSpan(): number {\n        return this.rowEnd && this.rowStart ? this.rowEnd - this.rowStart : 1;\n    }\n    get gridColumnSpan(): number {\n        return this.colEnd && this.colStart ? this.colEnd - this.colStart : 1;\n    }\n\n    /**\n     * Row index where the current field should end.\n     * The amount of rows between rowStart and rowEnd will determine the amount of spanning rows to that field\n     * ```html\n     * <igx-column-layout>\n     *   <igx-column [rowEnd]=\"2\" [rowStart]=\"1\" [colStart]=\"1\"></igx-column>\n     * </igx-column-layout>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @Input()\n    public rowEnd: number;\n\n    /**\n     * Column index where the current field should end.\n     * The amount of columns between colStart and colEnd will determine the amount of spanning columns to that field\n     * ```html\n     * <igx-column-layout>\n     *   <igx-column [colEnd]=\"3\" [rowStart]=\"1\" [colStart]=\"1\"></igx-column>\n     * </igx-column-layout>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @Input()\n    public colEnd: number;\n\n    /**\n     * Row index from which the field is starting.\n     * ```html\n     * <igx-column-layout>\n     *   <igx-column [rowStart]=\"1\" [colStart]=\"1\"></igx-column>\n     * </igx-column-layout>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @Input() rowStart: number;\n\n    /**\n     * Column index from which the field is starting.\n     * ```html\n     * <igx-column-layout>\n     *   <igx-column [colStart]=\"1\" [rowStart]=\"1\"></igx-column>\n     * </igx-column-layout>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @Input() colStart: number;\n\n    /**\n     * Indicates whether the column will be visible when its parent is collapsed.\n     * ```html\n     * <igx-column-group>\n     *   <igx-column [visibleWhenCollapsed]=\"true\"></igx-column>\n     * </igx-column-group>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges(true)\n    @Input()\n    set visibleWhenCollapsed(value: boolean) {\n        this._visibleWhenCollapsed = value;\n        this.visibleWhenCollapsedChange.emit(this._visibleWhenCollapsed);\n        if (this.parent) { this.parent.setExpandCollapseState(); }\n    }\n\n    get visibleWhenCollapsed(): boolean {\n        return this._visibleWhenCollapsed;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public collapsible = false;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public expanded = true;\n\n    /**\n     * hidden\n     */\n    public defaultWidth: string;\n\n    /**\n     * hidden\n     */\n    public widthSetByUser: boolean;\n\n    /**\n     * Returns the filteringExpressionsTree of the column.\n     * ```typescript\n     * let tree =  this.column.filteringExpressionsTree;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get filteringExpressionsTree(): FilteringExpressionsTree {\n        return this.grid.filteringExpressionsTree.find(this.field) as FilteringExpressionsTree;\n    }\n    /**\n     * Sets/gets the parent column.\n     * ```typescript\n     * let parentColumn = this.column.parent;\n     * ```\n     * ```typescript\n     * this.column.parent = higherLevelColumn;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    parent = null;\n    /**\n     * Sets/gets the children columns.\n     * ```typescript\n     * let columnChildren = this.column.children;\n     * ```\n     * ```typescript\n     * this.column.children = childrenColumns;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    children: QueryList<IgxColumnComponent>;\n\n    /**\n     *@hidden\n     */\n    protected _unpinnedIndex;\n    /**\n     *@hidden\n     */\n    protected _pinned = false;\n    /**\n     *@hidden\n     */\n    protected _bodyTemplate: TemplateRef<any>;\n    /**\n     *@hidden\n     */\n    protected _headerTemplate: TemplateRef<any>;\n    /**\n     *@hidden\n     */\n    protected _inlineEditorTemplate: TemplateRef<any>;\n    /**\n     *@hidden\n     */\n    protected _filterCellTemplate: TemplateRef<any>;\n    /**\n     *@hidden\n     */\n    protected _collapseIndicatorTemplate: TemplateRef<any>;\n    /**\n     *@hidden\n     */\n    protected _summaries = null;\n    /**\n     *@hidden\n     */\n    protected _filters = null;\n    /**\n     *@hidden\n     */\n    protected _sortStrategy: ISortingStrategy = DefaultSortingStrategy.instance();\n    /**\n     *@hidden\n     */\n    protected _groupingComparer: (a: any, b: any) => number;\n    /**\n     *@hidden\n     */\n    protected _hidden = false;\n    /**\n     *@hidden\n     */\n    protected _index: number;\n    /**\n     *@hidden\n     */\n    protected _disablePinning = false;\n    /**\n     *@hidden\n     */\n    protected _width: string;\n    /**\n     *@hidden\n     */\n    protected _defaultMinWidth = '';\n    /**\n     *@hidden\n     */\n    protected _hasSummary = false;\n    /**\n     * @hidden\n     */\n    protected _editable: boolean;\n    /**\n     *  @hidden\n    */\n    protected _visibleWhenCollapsed;\n    /**\n     * @hidden\n     */\n    protected _collapsible = false;\n    /**\n     * @hidden\n     */\n    protected _expanded = true;\n    /**\n     * @hidden\n     */\n    protected get isPrimaryColumn(): boolean {\n        return this.field !== undefined && this.grid !== undefined && this.field === this.grid.primaryKey;\n    }\n    /**\n     *@hidden\n     */\n    @ContentChild(IgxCellTemplateDirective, { read: IgxCellTemplateDirective })\n    protected cellTemplate: IgxCellTemplateDirective;\n    /**\n     *@hidden\n     */\n    @ContentChildren(IgxCellHeaderTemplateDirective, { read: IgxCellHeaderTemplateDirective, descendants: false })\n    protected headTemplate: QueryList<IgxCellHeaderTemplateDirective>;\n    /**\n     *@hidden\n     */\n    @ContentChild(IgxCellEditorTemplateDirective, { read: IgxCellEditorTemplateDirective })\n    protected editorTemplate: IgxCellEditorTemplateDirective;\n\n    protected _vIndex = NaN;\n    /**\n     *@hidden\n     */\n    @ContentChild(IgxFilterCellTemplateDirective, { read: IgxFilterCellTemplateDirective })\n    public filterCellTemplateDirective: IgxFilterCellTemplateDirective;\n    /**\n     *@hidden\n     */\n    @ContentChild(IgxCollapsibleIndicatorTemplateDirective, { read: IgxCollapsibleIndicatorTemplateDirective, static: false })\n    protected collapseIndicatorTemplate:  IgxCollapsibleIndicatorTemplateDirective;\n\n    constructor(public gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>, public cdr: ChangeDetectorRef,\n        public rowIslandAPI: IgxRowIslandAPIService, public elementRef: ElementRef) { }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public resetCaches() {\n        this._vIndex = NaN;\n        if (this.grid) {\n            this.cacheCalcWidth();\n        }\n    }\n\n    /**\n     *@hidden\n     */\n    public ngAfterContentInit(): void {\n        if (this.cellTemplate) {\n            this._bodyTemplate = this.cellTemplate.template;\n        }\n        if (this.headTemplate && this.headTemplate.length) {\n            this._headerTemplate = this.headTemplate.toArray()[0].template;\n        }\n        if (this.editorTemplate) {\n            this._inlineEditorTemplate = this.editorTemplate.template;\n        }\n        if (this.filterCellTemplateDirective) {\n            this._filterCellTemplate = this.filterCellTemplateDirective.template;\n        }\n        if (!this.summaries) {\n            switch (this.dataType) {\n                case DataType.String:\n                case DataType.Boolean:\n                    this.summaries = IgxSummaryOperand;\n                    break;\n                case DataType.Number:\n                    this.summaries = IgxNumberSummaryOperand;\n                    break;\n                case DataType.Date:\n                    this.summaries = IgxDateSummaryOperand;\n                    break;\n                default:\n                    this.summaries = IgxSummaryOperand;\n                    break;\n            }\n        }\n        if (!this.filters) {\n            switch (this.dataType) {\n                case DataType.Boolean:\n                    this.filters = IgxBooleanFilteringOperand.instance();\n                    break;\n                case DataType.Number:\n                    this.filters = IgxNumberFilteringOperand.instance();\n                    break;\n                case DataType.Date:\n                    this.filters = IgxDateFilteringOperand.instance();\n                    break;\n                case DataType.String:\n                default:\n                    this.filters = IgxStringFilteringOperand.instance();\n                    break;\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    getGridTemplate(isRow: boolean, isIE: boolean): string {\n        if (isRow) {\n            const rowsCount = this.grid.multiRowLayoutRowSize;\n            return isIE ?\n                `(1fr)[${rowsCount}]` :\n                `repeat(${rowsCount},1fr)`;\n        } else {\n            return this.getColumnSizesString(this.children);\n        }\n    }\n\n    public getInitialChildColumnSizes(children: QueryList<IgxColumnComponent>): Array<MRLColumnSizeInfo> {\n        const columnSizes: MRLColumnSizeInfo[] = [];\n        // find the smallest col spans\n        children.forEach(col => {\n            if (!col.colStart) {\n                return;\n            }\n            const newWidthSet = col.widthSetByUser && columnSizes[col.colStart - 1] && !columnSizes[col.colStart - 1].widthSetByUser;\n            const newSpanSmaller = columnSizes[col.colStart - 1] && columnSizes[col.colStart - 1].colSpan > col.gridColumnSpan;\n            const bothWidthsSet = col.widthSetByUser && columnSizes[col.colStart - 1] && columnSizes[col.colStart - 1].widthSetByUser;\n            const bothWidthsNotSet = !col.widthSetByUser && columnSizes[col.colStart - 1] && !columnSizes[col.colStart - 1].widthSetByUser;\n\n            if (columnSizes[col.colStart - 1] === undefined) {\n                // If nothing is defined yet take any column at first\n                // We use colEnd to know where the column actually ends, because not always it starts where we have it set in columnSizes.\n                columnSizes[col.colStart - 1] = {\n                    ref: col,\n                    width: col.widthSetByUser || this.grid.columnWidthSetByUser ? parseInt(col.calcWidth, 10) : null,\n                    colSpan: col.gridColumnSpan,\n                    colEnd: col.colStart + col.gridColumnSpan,\n                    widthSetByUser: col.widthSetByUser\n                };\n            } else if (newWidthSet || (newSpanSmaller && ((bothWidthsSet) || (bothWidthsNotSet)))) {\n                // If a column is set already it should either not have width defined or have width with bigger span than the new one.\n\n                /**\n                 *  If replaced column has bigger span, we want to fill the remaining columns\n                 *  that the replacing column does not fill with the old one.\n                 **/\n                if (bothWidthsSet && newSpanSmaller) {\n                    // Start from where the new column set would end and apply the old column to the rest depending on how much it spans.\n                    // We have not yet replaced it so we can use it directly from the columnSizes collection.\n                    // This is where colEnd is used because the colStart of the old column is not actually i + 1.\n                    for (let i = col.colStart - 1 + col.gridColumnSpan; i < columnSizes[col.colStart - 1].colEnd - 1; i++) {\n                        if (!columnSizes[i] || !columnSizes[i].widthSetByUser) {\n                            columnSizes[i] = columnSizes[col.colStart - 1];\n                        } else {\n                            break;\n                        }\n                    }\n                }\n\n                // Replace the old column with the new one.\n                columnSizes[col.colStart - 1] = {\n                    ref: col,\n                    width: col.widthSetByUser || this.grid.columnWidthSetByUser ? parseInt(col.calcWidth, 10) : null,\n                    colSpan: col.gridColumnSpan,\n                    colEnd: col.colStart + col.gridColumnSpan,\n                    widthSetByUser: col.widthSetByUser\n                };\n            } else if (bothWidthsSet && columnSizes[col.colStart - 1].colSpan < col.gridColumnSpan) {\n                // If the column already in the columnSizes has smaller span, we still need to fill any empty places with the current col.\n                // Start from where the smaller column set would end and apply the bigger column to the rest depending on how much it spans.\n                // Since here we do not have it in columnSizes we set it as a new column keeping the same colSpan.\n                for (let i = col.colStart - 1 + columnSizes[col.colStart - 1].colSpan; i < col.colStart - 1 + col.gridColumnSpan; i++) {\n                    if (!columnSizes[i] || !columnSizes[i].widthSetByUser) {\n                        columnSizes[i] = {\n                            ref: col,\n                            width: col.widthSetByUser || this.grid.columnWidthSetByUser ? parseInt(col.calcWidth, 10) : null,\n                            colSpan: col.gridColumnSpan,\n                            colEnd: col.colStart + col.gridColumnSpan,\n                            widthSetByUser: col.widthSetByUser\n                        };\n                    } else {\n                        break;\n                    }\n                }\n            }\n        });\n\n        // Flatten columnSizes so there are not columns with colSpan > 1\n        for (let i = 0; i < columnSizes.length; i++) {\n            if (columnSizes[i] && columnSizes[i].colSpan > 1) {\n                let j = 1;\n\n                // Replace all empty places depending on how much the current column spans starting from next col.\n                for (; j < columnSizes[i].colSpan && i + j + 1 < columnSizes[i].colEnd; j++) {\n                    if (columnSizes[i + j] &&\n                        ((!columnSizes[i].width && columnSizes[i + j].width) ||\n                            (!columnSizes[i].width && !columnSizes[i + j].width && columnSizes[i + j].colSpan <= columnSizes[i].colSpan) ||\n                            (!!columnSizes[i + j].width && columnSizes[i + j].colSpan <= columnSizes[i].colSpan))) {\n                        // If we reach an already defined column that has width and the current doesn't have or\n                        // if the reached column has bigger colSpan we stop.\n                        break;\n                    } else {\n                        const width = columnSizes[i].widthSetByUser ?\n                            columnSizes[i].width / columnSizes[i].colSpan :\n                            columnSizes[i].width;\n                        columnSizes[i + j] = {\n                            ref: columnSizes[i].ref,\n                            width: width,\n                            colSpan: 1,\n                            colEnd: columnSizes[i].colEnd,\n                            widthSetByUser: columnSizes[i].widthSetByUser\n                        };\n                    }\n                }\n\n                // Update the current column width so it is divided between all columns it spans and set it to 1.\n                columnSizes[i].width = columnSizes[i].widthSetByUser ?\n                    columnSizes[i].width / columnSizes[i].colSpan :\n                    columnSizes[i].width;\n                columnSizes[i].colSpan = 1;\n\n                // Update the index based on how much we have replaced. Subtract 1 because we started from 1.\n                i += j - 1;\n            }\n        }\n\n        return columnSizes;\n    }\n\n    public getFilledChildColumnSizes(children: QueryList<IgxColumnComponent>): Array<string> {\n        const columnSizes = this.getInitialChildColumnSizes(children);\n\n        // fill the gaps if there are any\n        const result: string[] = [];\n        for (let i = 0; i < columnSizes.length; i++) {\n            if (columnSizes[i] && !!columnSizes[i].width) {\n                result.push(columnSizes[i].width + 'px');\n            } else {\n                result.push(parseInt(this.grid.getPossibleColumnWidth(), 10) + 'px');\n            }\n        }\n        return result;\n    }\n\n    protected getColumnSizesString(children: QueryList<IgxColumnComponent>): string {\n        const res = this.getFilledChildColumnSizes(children);\n        return res.join(' ');\n    }\n\n    public getResizableColUnderEnd(): MRLResizeColumnInfo[] {\n        if (this.columnLayout || !this.columnLayoutChild || this.columnGroup) {\n            return [{ target: this, spanUsed: 1 }];\n        }\n\n        const columnSized = this.getInitialChildColumnSizes(this.parent.children);\n        const targets: MRLResizeColumnInfo[] = [];\n        const colEnd = this.colEnd ? this.colEnd : this.colStart + 1;\n\n        for (let i = 0; i < columnSized.length; i++) {\n            if (this.colStart <= i + 1 && i + 1 < colEnd) {\n                targets.push({ target: columnSized[i].ref, spanUsed: 1 });\n            }\n        }\n\n        const targetsSquashed: MRLResizeColumnInfo[] = [];\n        for (let j = 0; j < targets.length; j++) {\n            if (targetsSquashed.length && targetsSquashed[targetsSquashed.length - 1].target.field === targets[j].target.field) {\n                targetsSquashed[targetsSquashed.length - 1].spanUsed++;\n            } else {\n                targetsSquashed.push(targets[j]);\n            }\n        }\n\n        return targetsSquashed;\n    }\n\n    /**\n     * Pins the column at the provided index in the pinned area. Defaults to index `0` if not provided.\n     * Returns `true` if the column is successfully pinned. Returns `false` if the column cannot be pinned.\n     * Column cannot be pinned if:\n     * - Is already pinned\n     * - index argument is out of range\n     * - The pinned area exceeds 80% of the grid width\n     * ```typescript\n     * let success = this.column.pin();\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public pin(index?: number): boolean {\n        // TODO: Probably should the return type of the old functions\n        // should be moved as a event parameter.\n        if (this.grid) {\n            this.grid.endEdit(true);\n        }\n        if (this._pinned) {\n            return false;\n        }\n\n        if (this.parent && !this.parent.pinned) {\n            return this.topLevelParent.pin(index);\n        }\n\n        const grid = (this.grid as any);\n        const hasIndex = index !== undefined;\n        if (hasIndex && (index < 0 || index >= grid.pinnedColumns.length)) {\n            return false;\n        }\n\n        if (!this.parent && !this.pinnable) {\n            return false;\n        }\n\n        this._pinned = true;\n        this.pinnedChange.emit(this._pinned);\n        this._unpinnedIndex = grid._unpinnedColumns.indexOf(this);\n        index = index !== undefined ? index : grid._pinnedColumns.length;\n        const targetColumn = grid._pinnedColumns[index];\n        const args = { column: this, insertAtIndex: index, isPinned: true };\n        grid.onColumnPinning.emit(args);\n\n        if (grid._pinnedColumns.indexOf(this) === -1) {\n            grid._pinnedColumns.splice(args.insertAtIndex, 0, this);\n\n            if (grid._unpinnedColumns.indexOf(this) !== -1) {\n                grid._unpinnedColumns.splice(grid._unpinnedColumns.indexOf(this), 1);\n            }\n        }\n\n        if (hasIndex) {\n            grid._moveColumns(this, targetColumn);\n        }\n\n        if (this.columnGroup) {\n            this.allChildren.forEach(child => child.pin());\n            grid.reinitPinStates();\n        }\n\n        grid.resetCaches();\n        grid.notifyChanges();\n        if (this.columnLayoutChild) {\n            this.grid.columns.filter(x => x.columnLayout).forEach(x => x.populateVisibleIndexes());\n        }\n        this.grid.filteringService.refreshExpressions();\n        return true;\n    }\n    /**\n     * Unpins the column and place it at the provided index in the unpinned area. Defaults to index `0` if not provided.\n     * Returns `true` if the column is successfully unpinned. Returns `false` if the column cannot be unpinned.\n     * Column cannot be unpinned if:\n     * - Is already unpinned\n     * - index argument is out of range\n     * ```typescript\n     * let success = this.column.unpin();\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public unpin(index?: number): boolean {\n        if (this.grid) {\n            this.grid.endEdit(true);\n        }\n        if (!this._pinned) {\n            return false;\n        }\n\n        if (this.parent && this.parent.pinned) {\n            return this.topLevelParent.unpin(index);\n        }\n\n        const grid = (this.grid as any);\n        const hasIndex = index !== undefined;\n        if (hasIndex && (index < 0 || index >= grid._unpinnedColumns.length)) {\n            return false;\n        }\n\n        index = (index !== undefined ? index :\n            this._unpinnedIndex !== undefined ? this._unpinnedIndex : this.index);\n        this._pinned = false;\n        this.pinnedChange.emit(this._pinned);\n\n        const targetColumn = grid._unpinnedColumns[index];\n\n        grid._unpinnedColumns.splice(index, 0, this);\n        if (grid._pinnedColumns.indexOf(this) !== -1) {\n            grid._pinnedColumns.splice(grid._pinnedColumns.indexOf(this), 1);\n        }\n\n        if (hasIndex) {\n            grid._moveColumns(this, targetColumn);\n        }\n\n        if (this.columnGroup) {\n            this.allChildren.forEach(child => child.unpin());\n        }\n\n        grid.reinitPinStates();\n        grid.resetCaches();\n\n        const insertAtIndex = grid._unpinnedColumns.indexOf(this);\n        const args = { column: this, insertAtIndex, isPinned: false };\n        grid.onColumnPinning.emit(args);\n\n        grid.notifyChanges();\n        if (this.columnLayoutChild) {\n            this.grid.columns.filter(x => x.columnLayout).forEach(x => x.populateVisibleIndexes());\n        }\n        this.grid.filteringService.refreshExpressions();\n\n        return true;\n    }\n    /**\n     * Returns a reference to the top level parent column.\n     * ```typescript\n     * let topLevelParent =  this.column.topLevelParent;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get topLevelParent() {\n        let parent = this.parent;\n        while (parent && parent.parent) {\n            parent = parent.parent;\n        }\n        return parent;\n    }\n\n    /**\n     * Returns a reference to the header of the column.\n     * ```typescript\n     * let column = this.grid.columnList.filter(c => c.field === 'ID')[0];\n     * let headerCell = column.headerCell;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get headerCell(): IgxGridHeaderComponent {\n        return this.grid.headerCellList.find((header) => header.column === this);\n    }\n\n    /**\n    * Returns a reference to the filter cell of the column.\n    * ```typescript\n    * let column = this.grid.columnList.filter(c => c.field === 'ID')[0];\n    * let filterell = column.filterell;\n    * ```\n    * @memberof IgxColumnComponent\n    */\n    get filterCell(): IgxGridFilteringCellComponent {\n        return this.grid.filterCellList.find((filterCell) => filterCell.column === this);\n    }\n\n    /**\n     * Returns a reference to the header group of the column.\n     * @memberof IgxColumnComponent\n     */\n    get headerGroup(): IgxGridHeaderGroupComponent {\n        return this.grid.headerGroupsList.find((headerGroup) => headerGroup.column === this);\n    }\n\n    /**\n     * Autosize the column to the longest currently visible cell value, including the header cell.\n     * ```typescript\n     * @ViewChild('grid') grid: IgxGridComponent;\n     * let column = this.grid.columnList.filter(c => c.field === 'ID')[0];\n     * column.autosize();\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public autosize() {\n        if (!this.columnGroup) {\n            this.width = this.getLargestCellWidth();\n            this.grid.reflow();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public getCalcWidth(): any {\n        if (this._calcWidth !== null && !isNaN(this.calcPixelWidth)) {\n            return this._calcWidth;\n        }\n        this.cacheCalcWidth();\n        return this._calcWidth;\n    }\n\n    /**\n     * @hidden\n     * Returns the size (in pixels) of the longest currently visible cell, including the header cell.\n     * ```typescript\n     * @ViewChild('grid') grid: IgxGridComponent;\n     *\n     * let column = this.grid.columnList.filter(c => c.field === 'ID')[0];\n     * let size = column.getLargestCellWidth();\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public getLargestCellWidth(): string {\n        const range = this.grid.document.createRange();\n        const largest = new Map<number, number>();\n\n        if (this.cells.length > 0) {\n            let cellsContentWidths = [];\n            if (this.cells[0].nativeElement.children.length > 0) {\n                this.cells.forEach((cell) => cellsContentWidths.push(cell.calculateSizeToFit(range)));\n            } else {\n                cellsContentWidths = this.cells.map((cell) => getNodeSizeViaRange(range, cell.nativeElement));\n            }\n\n            const index = cellsContentWidths.indexOf(Math.max(...cellsContentWidths));\n            const cellStyle = this.grid.document.defaultView.getComputedStyle(this.cells[index].nativeElement);\n            const cellPadding = parseFloat(cellStyle.paddingLeft) + parseFloat(cellStyle.paddingRight) +\n                parseFloat(cellStyle.borderRightWidth);\n\n            largest.set(Math.max(...cellsContentWidths), cellPadding);\n        }\n\n        if (this.headerCell) {\n            let headerCell;\n            if (this.headerTemplate && this.headerCell.elementRef.nativeElement.children[0].children.length > 0) {\n                headerCell = Math.max(...Array.from(this.headerCell.elementRef.nativeElement.children[0].children)\n                    .map((child) => getNodeSizeViaRange(range, child)));\n            } else {\n                headerCell = getNodeSizeViaRange(range, this.headerCell.elementRef.nativeElement.children[0]);\n            }\n\n            if (this.sortable || this.filterable) {\n                headerCell += this.headerCell.elementRef.nativeElement.children[1].getBoundingClientRect().width;\n            }\n\n            const headerStyle = this.grid.document.defaultView.getComputedStyle(this.headerCell.elementRef.nativeElement);\n            const headerPadding = parseFloat(headerStyle.paddingLeft) + parseFloat(headerStyle.paddingRight) +\n                parseFloat(headerStyle.borderRightWidth);\n            largest.set(headerCell, headerPadding);\n\n        }\n\n        const largestCell = Math.max(...Array.from(largest.keys()));\n        const width = Math.ceil(largestCell + largest.get(largestCell));\n\n        if (Number.isNaN(width)) {\n            return this.width;\n        } else {\n            return width + 'px';\n        }\n    }\n\n    /**\n     *@hidden\n     */\n    public getCellWidth() {\n        const colWidth = this.width;\n        const isPercentageWidth = colWidth && typeof colWidth === 'string' && colWidth.indexOf('%') !== -1;\n\n        if (this.columnLayoutChild) {\n            return '';\n        }\n\n        if (colWidth && !isPercentageWidth) {\n\n            let cellWidth = colWidth;\n            if (typeof cellWidth !== 'string' || cellWidth.endsWith('px') === false) {\n                cellWidth += 'px';\n            }\n\n            return cellWidth;\n        } else {\n            return colWidth;\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected cacheCalcWidth(): any {\n        const grid = this.gridAPI.grid;\n        const colWidth = this.width;\n        const isPercentageWidth = colWidth && typeof colWidth === 'string' && colWidth.indexOf('%') !== -1;\n        if (isPercentageWidth) {\n            this._calcWidth = parseInt(colWidth, 10) / 100 * (grid.calcWidth - grid.featureColumnsWidth());\n        } else if (!colWidth) {\n            // no width\n            this._calcWidth = this.defaultWidth || grid.getPossibleColumnWidth();\n        } else {\n            this._calcWidth = this.width;\n        }\n        this.calcPixelWidth = parseInt(this._calcWidth, 10);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected setExpandCollapseState() {\n        this.children.filter(col => (col.visibleWhenCollapsed !== undefined)).forEach(c =>  {\n            if (!this.collapsible) { c.hidden = this.hidden; return; }\n            c.hidden = this._expanded ? c.visibleWhenCollapsed : !c.visibleWhenCollapsed;\n        });\n    }\n     /**\n     * @hidden\n     * @internal\n     */\n    protected checkCollapsibleState() {\n        if (!this.children) { return false; }\n        const cols = this.children.map(child => child.visibleWhenCollapsed);\n        return (cols.some(c => c === true) && cols.some(c => c === false));\n    }\n\n    /**\n     *@hidden\n    */\n    public get pinnable() {\n        return (this.grid as any)._init || !this.pinned;\n    }\n\n    /**\n     * @hidden\n     */\n    public populateVisibleIndexes() { }\n}\n","import { Directive } from '@angular/core';\nimport { ConnectedPositioningStrategy } from '../services';\nimport { VerticalAlignment, PositionSettings } from '../services/overlay/utilities';\nimport { scaleInVerBottom, scaleInVerTop } from '../animations/main';\nimport { IgxForOfSyncService } from '../directives/for-of/for_of.sync.service';\n\n\n@Directive({\n    selector: '[igxGridBody]',\n    providers: [IgxForOfSyncService]\n})\nexport class IgxGridBodyDirective {}\n\n\n/**\n * @hidden\n */\nexport interface RowEditPositionSettings extends PositionSettings {\n    container?: HTMLElement;\n}\n\n/**\n * @hidden\n */\nexport class RowEditPositionStrategy extends ConnectedPositioningStrategy {\n    isTop = false;\n    isTopInitialPosition = null;\n    public settings: RowEditPositionSettings;\n    position(contentElement: HTMLElement, size: { width: number, height: number }, document?: Document, initialCall?: boolean): void {\n        const container = this.settings.container; // grid.tbody\n        const target = <HTMLElement>this.settings.target; // current grid.row\n\n        // Position of the overlay depends on the available space in the grid.\n        // If the bottom space is not enough then the the row overlay will show at the top of the row.\n        // Once shown, either top or bottom, then this position stays until the overlay is closed (isTopInitialPosition property),\n        // which means that when scrolling then overlay may hide, while the row is still visible (UX requirement).\n        this.isTop = this.isTopInitialPosition !== null ?\n            this.isTopInitialPosition :\n            container.getBoundingClientRect().bottom <\n                target.getBoundingClientRect().bottom + contentElement.getBoundingClientRect().height;\n\n        // Set width of the row editing overlay to equal row width, otherwise it fits 100% of the grid.\n        contentElement.style.width = target.clientWidth + 'px';\n        this.settings.verticalStartPoint = this.settings.verticalDirection = this.isTop ? VerticalAlignment.Top : VerticalAlignment.Bottom;\n        this.settings.openAnimation = this.isTop ? scaleInVerBottom : scaleInVerTop;\n\n        super.position(contentElement, { width: target.clientWidth, height: target.clientHeight }, document, initialCall);\n    }\n}\n","import { EventEmitter, Input, Output, Directive } from '@angular/core';\nimport { IBaseEventArgs } from '../core/utils';\n\nexport interface IValueChangedEventArgs extends IBaseEventArgs {\n    oldValue: any;\n    newValue: any;\n}\n\n/**\n *@hidden\n */\n@Directive()\nexport abstract class ItemPropertyValueChangedDirective {\n    private _object: any;\n    private _propName: string;\n\n    get object() {\n        return this._object;\n    }\n\n    set object(value) {\n        if (value) {\n            this._object = value;\n        }\n    }\n\n    @Input()\n    get value() {\n        return (this.object) ? this.object[this._propName] : null;\n    }\n\n    set value(value) {\n        this.onValueChanged(value);\n    }\n\n    @Output()\n    public valueChanged = new EventEmitter<IValueChangedEventArgs>();\n\n    constructor(propName: string) {\n        this._propName = propName;\n    }\n\n    protected onValueChanged(value) {\n        const currentValue = this.value;\n        if (value !== currentValue) {\n            this.object[this._propName] = value;\n            this.valueChanged.emit({ oldValue: currentValue, newValue: value });\n        }\n    }\n}\n\n/** @hidden */\n@Directive()\nexport class ColumnChooserItemBaseDirective extends ItemPropertyValueChangedDirective {\n    @Input()\n    get column() {\n        return this.object;\n    }\n\n    set column(value) {\n        if (value) {\n            this.object = value;\n        }\n    }\n\n    @Input()\n    public indentation = 30;\n\n    @Input()\n    public container: any;\n\n    constructor(public prop: string) {\n        super(prop);\n    }\n\n    get name() {\n        return (this.column) ? ((this.column.header) ? this.column.header : this.column.field) : '';\n    }\n\n    get level() {\n        return this.column.level;\n    }\n\n    get calcIndent() {\n        return this.indentation * this.level;\n    }\n}\n","\nimport { Directive } from '@angular/core';\nimport { ColumnChooserItemBaseDirective } from '../column-chooser-item-base';\nimport { IBaseEventArgs } from '../../core/utils';\n\nexport interface IColumnVisibilityChangedEventArgs extends IBaseEventArgs {\n    column: any;\n    newValue: boolean;\n}\n\n/** @hidden */\n@Directive({\n    selector: '[igxColumnHidingItem]'\n})\nexport class IgxColumnHidingItemDirective extends ColumnChooserItemBaseDirective {\n\n    constructor() {\n        super('hidden');\n    }\n\n    get disabled() {\n        return this.column.disableHiding;\n    }\n}\n","import { ChangeDetectorRef, HostBinding, Input, OnDestroy, Directive } from '@angular/core';\nimport { IgxStringFilteringOperand } from '../data-operations/filtering-condition';\nimport { FilteringExpressionsTree, IFilteringExpressionsTree } from '../data-operations/filtering-expressions-tree';\nimport { FilteringLogic, IFilteringExpression } from '../data-operations/filtering-expression.interface';\nimport { FilteringStrategy } from '../data-operations/filtering-strategy';\nimport { ColumnChooserItemBaseDirective } from './column-chooser-item-base';\nimport { ColumnDisplayOrder } from './common/enums';\n\nclass CustomFilteringStrategy extends FilteringStrategy {\n    public filter(data: any[], expressionsTree: IFilteringExpressionsTree): any[] {\n        const res: ColumnChooserItemBaseDirective[] = [];\n        data.forEach((item: ColumnChooserItemBaseDirective) => {\n            if (this.matchRecord(item, expressionsTree.filteringOperands[0] as IFilteringExpression)) {\n                res.push(item);\n            } else if (item.column.columnGroup) {\n                if (item.column.allChildren.findIndex((child) =>\n                    this.matchRecord(child, expressionsTree.filteringOperands[1] as IFilteringExpression) ||\n                    this.matchRecord(child, expressionsTree.filteringOperands[2] as IFilteringExpression)) > -1) {\n                    res.push(item);\n                }\n            }\n        });\n\n        return res;\n    }\n}\n\n/** @hidden */\n@Directive()\nexport abstract class ColumnChooserBaseDirective implements OnDestroy {\n    /**\n     * Gets the grid columns that are going to be manipulated.\n     * ```typescript\n     * let gridColumns = this.columnHidingUI.columns;\n     * ```\n     */\n\n    @Input()\n    get columns() {\n        return this._gridColumns;\n    }\n    /**\n     * Sets the the grid columns that are going to be manipulated.\n     * ```html\n     * <igx-column-hiding [columns]=\"grid.columns\"></igx-column-hiding>\n     * ```\n     */\n    set columns(value) {\n        if (value) {\n            this._gridColumns = value;\n            this.createColumnItems();\n            if (this.filterCriteria) {\n                this.filter();\n            }\n        }\n    }\n    /**\n     * Sets/gets the title of the column chooser.\n     * ```typescript\n     * let title =  this.columnHidingUI.title;\n     * ```\n     */\n    @Input()\n    get title() {\n        return this._title;\n    }\n    /**\n     * ```html\n     * <igx-column-hiding [title]=\"'IgxColumnHidingComponent Title'\"></igx-column-hiding>\n     * ```\n     */\n    set title(value) {\n        this._title = (value) ? value : '';\n    }\n    /**\n     * Gets the prompt that is displayed in the filter input.\n     * ```typescript\n     * let filterColumnsPrompt =  this.columnHidingUI.filterColumnsPrompt;\n     * ```\n     */\n    @Input()\n    get filterColumnsPrompt() {\n        return this._filterColumnsPrompt;\n    }\n    /**\n     * Sets the prompt that is going to be displayed in the filter input.\n     * ```html\n     * <igx-column-hiding [filterColumnsPrompt]=\"'Type here to search'\"></igx-column-hiding>\n     * ```\n     */\n    set filterColumnsPrompt(value) {\n        this._filterColumnsPrompt = (value) ? value : '';\n    }\n    /**\n     * Hides/ shows the filtering columns input from the UI.\n     */\n    @Input()\n    public disableFilter = false;\n    /**\n     * Gets the items of the selected columns.\n     * ```typescript\n     * let columnItems =  this.columnHidingUI.columnItems;\n     * ```\n     */\n    @Input()\n    get columnItems() {\n        return this._currentColumns;\n    }\n    /**\n     * Gets the value which filters the columns list.\n     * ```typescript\n     * let filterCriteria =  this.columnHidingUI.filterCriteria;\n     * ```\n     */\n    @Input()\n    get filterCriteria() {\n        return this._filterCriteria;\n    }\n\n    /**\n     * Sets the value which filters the columns list.\n     * ```html\n     *  <igx-column-hiding [filterCriteria]=\"'ID'\"></igx-column-hiding>\n     * ```\n     */\n    set filterCriteria(value) {\n        if (!value || value.length === 0) {\n            this.clearFiltering();\n            this._filterCriteria = '';\n            this.cdr.detectChanges();\n            return;\n        } else if (this._filterCriteria && this._filterCriteria.length > value.length) {\n            this.clearFiltering();\n        }\n\n        this._filterCriteria = value;\n        this.filter();\n        this.cdr.detectChanges();\n    }\n    /**\n     * Gets the display order of the columns.\n     * ```typescript\n     * let columnDisplayOrder  =  this.columnHidingUI.columnDisplayOrder;\n     * ```\n     */\n    @Input()\n    get columnDisplayOrder() {\n        return this._columnDisplayOrder;\n    }\n    /**\n     * Sets the display order of the columns.\n     * ```typescript\n     * this.columnHidingUI.columnDisplayOrder = ColumnDisplayOrder.Alphabetical;\n     * ```\n     */\n    set columnDisplayOrder(value: ColumnDisplayOrder) {\n        if (value !== undefined) {\n            this.orderColumns(value);\n            if (this._filterCriteria.length > 0) {\n                this.filter();\n            }\n        }\n    }\n    /**\n     * Access to the columnHidingUI:\n     * ```typescript\n     * @ViewChild('column-hiding-component')\n     *  public columnHidingUI: IgxColumnHidingComponent;\n     * ```\n     * Sets/gets the max height of the column area.\n     * ```typescript\n     * let columnsAreaMaxHeight =  this.columnHidingUI.columnsAreaMaxHeight;\n     * ```\n     *\n     * ```html\n     * <igx-column-hiding [columnsAreaMaxHeight]=\"200px\"></igx-column-hiding>\n     * ```\n     */\n    @Input()\n    public columnsAreaMaxHeight = '100%';\n    /**\n     * Sets/Gets the css class selector.\n     * By default the value of the `class` attribute is `\"igx-column-hiding\"`.\n     * ```typescript\n     * let cssCLass =  this.columnHidingUI.cssClass;\n     * ```\n     * ```typescript\n     * this.columnHidingUI.cssClass = 'column-chooser';\n     * ```\n     */\n    @HostBinding('attr.class')\n    public cssClass = 'igx-column-hiding';\n    /**\n     *@hidden\n     */\n    private _currentColumns = [];\n    /**\n     *@hidden\n     */\n    private _gridColumns = [];\n    /**\n     *@hidden\n     */\n    private _rawColumns = [];\n    /**\n     *@hidden\n     */\n    private _columnDisplayOrder = ColumnDisplayOrder.DisplayOrder;\n    /**\n     *@hidden\n     */\n    private _filterCriteria = '';\n    /**\n     *@hidden\n     */\n    private _filterColumnsPrompt = '';\n    /**\n     *@hidden\n     */\n    private _title = '';\n\n    constructor(public cdr: ChangeDetectorRef) {\n    }\n    /**\n     *@hidden\n     */\n    ngOnDestroy() {\n        for (const item of this._currentColumns) {\n            item.valueChanged.unsubscribe();\n        }\n    }\n    /**\n     *@hidden\n     */\n    private createColumnItems() {\n        if (this._gridColumns.length > 0) {\n            this._rawColumns = [];\n            this._gridColumns.forEach((column) => {\n                const item = this.createColumnItem(this, column);\n                if (item) {\n                    this._rawColumns.push(item);\n                }\n            });\n            this._currentColumns = this._rawColumns.slice(0);\n            this.orderColumns(this._columnDisplayOrder);\n        }\n    }\n    /**\n     *@hidden\n     */\n    protected abstract createColumnItem(container: any, column: any);\n    /**\n     *@hidden\n     */\n    private orderColumns(value) {\n        this._columnDisplayOrder = value;\n        if (value === ColumnDisplayOrder[ColumnDisplayOrder.Alphabetical] ||\n            value === ColumnDisplayOrder.Alphabetical) {\n            this._currentColumns = this._rawColumns.slice(0).sort((current, next) => {\n                return current.name.toLowerCase().localeCompare(next.name.toLowerCase());\n            });\n        } else {\n            this._currentColumns = this._rawColumns;\n        }\n    }\n    /**\n     *@hidden\n     */\n    protected filter() {\n        const filteringExpressionsTree = new FilteringExpressionsTree(FilteringLogic.Or);\n        filteringExpressionsTree.filteringOperands.push(this.createFilteringExpression('name'));\n        filteringExpressionsTree.filteringOperands.push(this.createFilteringExpression('field'));\n        filteringExpressionsTree.filteringOperands.push(this.createFilteringExpression('header'));\n\n        const strategy = new CustomFilteringStrategy();\n        this._currentColumns = strategy.filter(this._currentColumns, filteringExpressionsTree);\n    }\n    /**\n     *@hidden\n     */\n    protected createFilteringExpression(fieldName: string): IFilteringExpression {\n        return {\n            condition: IgxStringFilteringOperand.instance().condition('contains'),\n            fieldName: fieldName,\n            ignoreCase: true,\n            searchVal: this._filterCriteria\n        };\n    }\n    /**\n     *@hidden\n     */\n    protected clearFiltering() {\n        this.createColumnItems();\n    }\n}\n\n\n","import {\n    ChangeDetectorRef,\n    Component,\n    EventEmitter,\n    Input,\n    Output,\n    OnDestroy\n} from '@angular/core';\nimport { IColumnVisibilityChangedEventArgs, IgxColumnHidingItemDirective } from './column-hiding-item.directive';\nimport { ColumnChooserBaseDirective } from '../column-chooser-base';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\n\n@Component({\n    preserveWhitespaces: false,\n    selector: 'igx-column-hiding',\n    templateUrl: './column-hiding.component.html'\n})\nexport class IgxColumnHidingComponent extends ColumnChooserBaseDirective implements OnDestroy {\n    /**\n     * Returns a boolean indicating whether the `HIDE ALL` button is disabled.\n     * ```html\n     * <igx-column-hiding #columnHidingUI\n     *     [columns]=\"grid.columns\" [title]=\"'Column Hiding'\">\n     * </igx-column-hiding>\n     * ```\n     * ```typescript\n     * @ViewChild(\"'columnHidingUI'\")\n     * public columnHiding: IgxColumnHidingComponent;\n     * let isHideAlldisabled =  this.columnHiding.disableHideAll;\n     * ```\n     *@memberof IgxColumnHidingComponent\n     */\n    @Input()\n    get disableHideAll(): boolean {\n        if (!this.columnItems || this.columnItems.length < 1 ||\n            this.hiddenColumnsCount === this.columns.length) {\n            return true;\n        } else if (this.hidableColumns.length < 1 ||\n            this.hidableColumns.length === this.hidableColumns.filter((col) => col.value).length) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n    /**\n     * Returns a boolean indicating whether the `SHOW ALL` button is disabled.\n     * ```typescript\n     * let isShowAlldisabled =  this.columnHiding.disableShowAll;\n     * ```\n     * @memberof IgxColumnHidingComponent\n     */\n    @Input()\n    get disableShowAll(): boolean {\n        if (!this.columnItems || this.columnItems.length < 1 ||\n            this.hiddenColumnsCount < 1 || this.hidableColumns.length < 1) {\n            return true;\n        } else if (this.hidableColumns.length === this.hidableColumns.filter((col) => !col.value).length) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n    /**\n     * Sets/gets the text of the button that shows all columns if they are hidden.\n     * ```typescript\n     * let showAllButtonText =  this.columnHiding.showAllText;\n     * ```\n     *\n     * ```html\n     * <igx-column-hiding [showAllText] = \"'Show Columns'\"></igx-column-hiding>\n     * ```\n     * @memberof IgxColumnHidingComponent\n     */\n    @Input()\n    public showAllText = 'Show All';\n    /**\n     * Sets/gets the text of the button that hides all columns if they are shown.\n     * ```typescript\n     * let hideAllButtonText =  this.columnHiding.hideAllText;\n     * ```\n     *\n     * ```html\n     * <igx-column-hiding [hideAllText] = \"'Hide Columns'\"></igx-column-hiding>\n     * ```\n     * @memberof IgxColumnHidingComponent\n     */\n    @Input()\n    public hideAllText = 'Hide All';\n    /**\n     * An event that is emitted after the columns visibility is changed.\n     * Provides references to the `column` and the `newValue` properties as event arguments.\n     * ```html\n     *  <igx-column-hiding (onColumnVisibilityChanged) = \"onColumnVisibilityChanged($event)\"></igx-column-hiding>\n     * ```\n     * @memberof IgxColumnHidingComponent\n     */\n    @Output()\n    public onColumnVisibilityChanged = new EventEmitter<IColumnVisibilityChangedEventArgs>();\n    /**\n     * Gets the count of the hidden columns.\n     * ```typescript\n     * let hiddenColumnsCount =  this.columnHiding.hiddenColumnsCount;\n     * ```\n     * @memberof IgxColumnHidingComponent\n     */\n    public get hiddenColumnsCount() {\n        return (this.columns) ? this.columns.filter((col) => col.hidden).length : 0;\n    }\n\n    constructor(public cdr: ChangeDetectorRef) {\n        super(cdr);\n    }\n\n    /**\n     *@hidden\n     */\n    public get hidableColumns() {\n        return this.columnItems.filter((col) => !col.disabled);\n    }\n\n    private destroy$ = new Subject<boolean>();\n    /**\n     *@hidden\n     */\n    protected createColumnItem(container: any, column: any) {\n        if (column.grid.hasColumnLayouts && !column.columnLayout) {\n            return null;\n        }\n        const item = new IgxColumnHidingItemDirective();\n        item.container = container;\n        item.column = column;\n\n        item.valueChanged.pipe(takeUntil(this.destroy$)).subscribe((args) => {\n            this.onVisibilityChanged({ column: item.column, newValue: args.newValue });\n        });\n\n        return item;\n    }\n    /**\n     * Shows all columns in the grid.\n     * ```typescript\n     * this.columnHiding.showAllColumns();\n     * ```\n     * @memberof IgxColumnHidingComponent\n     */\n    public showAllColumns() {\n        const collection = this.hidableColumns;\n        for (const col of collection) {\n            col.value = false;\n        }\n    }\n    /**\n     * Hides all columns in the grid.\n     * ```typescript\n     * this.columnHiding.hideAllColumns();\n     * ```\n     * @memberof IgxColumnHidingComponent\n     */\n    public hideAllColumns() {\n        const collection = this.hidableColumns;\n        for (const col of collection) {\n            col.value = true;\n        }\n    }\n    /**\n     * @hidden\n     */\n    public onVisibilityChanged(args: IColumnVisibilityChangedEventArgs) {\n        this.onColumnVisibilityChanged.emit(args);\n    }\n\n    /**\n     *@hidden\n     */\n    public ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n}\n\n","import { Directive } from '@angular/core';\nimport { ColumnChooserItemBaseDirective } from '../column-chooser-item-base';\n\n\n@Directive({\n    selector: '[igxColumnPinningItem]'\n})\nexport class IgxColumnPinningItemDirective extends ColumnChooserItemBaseDirective {\n\n    constructor() {\n        super('pinned');\n    }\n\n    /**\n     * Returns whether a column could be pinned.\n     * It's not possible to pin a column if there is not enough space for the unpinned area.\n     * ```typescript\n     * const columnItem: IgxColumnPinningItemDirective;\n     * this.columnItem.pinnable;\n     * ```\n     */\n    get pinnable() {\n        return this.column.pinnable;\n    }\n    /**\n     * Returns whether a column have pinning enabled\n     */\n    public get pinningDisabled() {\n        return this.column.disablePinning;\n    }\n}\n","\nimport { Component, ChangeDetectorRef } from '@angular/core';\nimport { ColumnChooserBaseDirective } from '../column-chooser-base';\nimport { IgxColumnPinningItemDirective } from './pinning.directive';\n\n\n\n@Component({\n    preserveWhitespaces: false,\n    selector: 'igx-column-pinning',\n    templateUrl: './column-pinning.component.html'\n})\nexport class IgxColumnPinningComponent extends ColumnChooserBaseDirective {\n\n    constructor(public cdr: ChangeDetectorRef) {\n        super(cdr);\n    }\n\n    /**\n     * @hidden\n     */\n    createColumnItem(container: any, column: any) {\n        if (column.level !== 0 || column.disablePinning) {\n            return null;\n        }\n        const item = new IgxColumnPinningItemDirective();\n        item.container = container;\n        item.column = column;\n        return item;\n    }\n\n    /**\n     * @hidden\n     */\n    public checkboxValueChange(event, columnItem: IgxColumnPinningItemDirective) {\n        if (event.checked && !columnItem.pinnable) {\n            event.checkbox.checked = false;\n            return false;\n        }\n        columnItem.value = !columnItem.value;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get pinnableColumns() {\n        return this.columnItems.filter((col) => !col.pinningDisabled);\n    }\n}\n\n","import {\n    ChangeDetectorRef,\n    Component,\n    HostBinding,\n    Input,\n    Optional,\n    ViewChild,\n    Inject,\n    TemplateRef\n} from '@angular/core';\n\nimport { IDisplayDensityOptions, DisplayDensityToken, DisplayDensityBase } from '../../core/displayDensity';\nimport {\n    CsvFileTypes,\n    IgxBaseExporter,\n    IgxCsvExporterOptions,\n    IgxCsvExporterService,\n    IgxExcelExporterOptions,\n    IgxExcelExporterService,\n    AbsoluteScrollStrategy\n} from '../../services/index';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxButtonDirective } from '../../directives/button/button.directive';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { IgxDropDownComponent } from '../../drop-down/drop-down.component';\nimport { IgxColumnHidingComponent } from '../hiding/column-hiding.component';\nimport { IgxColumnPinningComponent } from '../pinning/column-pinning.component';\nimport { OverlaySettings, PositionSettings, HorizontalAlignment, VerticalAlignment } from '../../services/overlay/utilities';\nimport { ConnectedPositioningStrategy } from '../../services/overlay/position';\nimport { GridType } from '../common/grid.interface';\n\n/**\n * This class encapsulates the Toolbar's logic and is internally used by\n * the `IgxGridComponent`, `IgxTreeGridComponent` and `IgxHierarchicalGridComponent`.\n */\n@Component({\n    selector: 'igx-grid-toolbar',\n    templateUrl: './grid-toolbar.component.html'\n})\nexport class IgxGridToolbarComponent extends DisplayDensityBase {\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-grid-toolbar')\n    @Input()\n    public gridID: string;\n\n    /**\n     * Gets the default text shown in the filtering box.\n     * ```typescript\n     * const filterPrompt = this.grid.toolbar.filterColumnsPrompt;\n     * ```\n     */\n    @Input()\n    public get filterColumnsPrompt() {\n        return this._filterColumnsPrompt;\n    }\n\n    /**\n     * Sets the default text shown in the filtering box.\n     * ```typescript\n     * this.grid.toolbar.filterColumnsPrompt('Filter columns ...');\n     * ```\n     */\n    public set filterColumnsPrompt(value: string) {\n        this._filterColumnsPrompt = value;\n    }\n\n    private _filterColumnsPrompt = 'Filter columns list ...';\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @Input()\n    public class = '';\n\n    /**\n     * Gets the height for the `IgxGridToolbarComponent`'s drop down panels.\n     * ```typescript\n     * const dropdownHeight = this.grid.toolbar.defaultDropDownsMaxHeight;\n     * ```\n     */\n    @Input()\n    get defaultDropDownsMaxHeight() {\n        const gridHeight = this.grid.calcHeight;\n        return (gridHeight) ? gridHeight * 0.7 + 'px' : '100%';\n    }\n\n    /**\n     * Provides a reference to the `IgxDropDownComponent` of the Column Hiding UI.\n     * ```typescript\n     * const dropdownHiding = this.grid.toolbar.columnHidingDropdown;\n     * ```\n     */\n    @ViewChild('columnHidingDropdown', { read: IgxDropDownComponent })\n    public columnHidingDropdown: IgxDropDownComponent;\n\n    /**\n     * Provides a reference to the `IgxColumnHidingComponent`.\n     * ```typescript\n     * const hidingUI = this.grid.toolbar.columnHidingUI;\n     * ```\n     */\n    @ViewChild(IgxColumnHidingComponent)\n    public columnHidingUI: IgxColumnHidingComponent;\n\n    /**\n     * Provides a reference to the Column Hiding button.\n     * ```typescript\n     * const hidingButton = this.grid.toolbar.columnHidingButton;\n     * ```\n     */\n    @ViewChild('columnHidingButton', { read: IgxButtonDirective })\n    public columnHidingButton: IgxButtonDirective;\n\n    /**\n     * Provides a reference to the `IgxDropDownComponent` of the Export button.\n     * ```typescript\n     * const exportDropdown = this.grid.toolbar.exportDropdown;\n     * ```\n     */\n    @ViewChild('exportDropdown', { read: IgxDropDownComponent })\n    public exportDropdown: IgxDropDownComponent;\n\n    /**\n     * Provides a reference to the Export button.\n     * ```typescript\n     * const exportBtn = this.grid.toolbar.exportButton;\n     * ```\n     */\n    @ViewChild('btnExport', { read: IgxButtonDirective })\n    public exportButton: IgxButtonDirective;\n\n    /**\n     * Provides a reference to the `IgxDropDownComponent` of the Column Pinning UI.\n     * ```typescript\n     * const dropdownPinning = this.grid.toolbar.columnPinningDropdown;\n     * ```\n     */\n    @ViewChild('columnPinningDropdown', { read: IgxDropDownComponent })\n    public columnPinningDropdown: IgxDropDownComponent;\n\n    /**\n     * Provides a reference to the `IgxColumnPinningComponent`.\n     * ```typescript\n     * const pinningUI = this.grid.toolbar.columnPinningDropdown;\n     * ```\n     */\n    @ViewChild(IgxColumnPinningComponent)\n    public columnPinningUI: IgxColumnPinningComponent;\n\n    /**\n     * Provides a reference to the Column Pinning button.\n     * ```typescript\n     * const pinningButton = this.grid.toolbar.columnPinningButton;\n     * ```\n     */\n    @ViewChild('columnPinningButton', { read: IgxButtonDirective })\n    public columnPinningButton: IgxButtonDirective;\n\n    /**\n     * Returns a reference to the `IgxGridComponent` component, hosting the `IgxGridToolbarComponent`.\n     * ```typescript\n     * const grid = this.igxGrid1.toolbar.grid;\n     * ```\n     */\n    public get grid(): IgxGridBaseDirective {\n        return this.gridAPI.grid;\n    }\n\n    /**\n     * Returns whether the `IgxGridComponent` renders an export button.\n     * ```typescript\n     * const exportButton = this.igxGrid1.toolbar.shouldShowExportButton;\n     * ```\n     */\n    public get shouldShowExportButton(): boolean {\n        return (this.grid != null && (this.grid.exportExcel || this.grid.exportCsv));\n    }\n\n    /**\n     * Returns whether the `IgxGridComponent` renders an Excel export button.\n     * ```typescript\n     * const exportExcelButton = this.igxGrid1.toolbar.shouldShowExportExcelButton;\n     * ```\n     */\n    public get shouldShowExportExcelButton(): boolean {\n        return (this.grid != null && this.grid.exportExcel);\n    }\n\n    /**\n     * Returns whether the `IgxGridComponent` renders an CSV export button.\n     * ```typescript\n     * const exportCSVButton = this.igxGrid1.toolbar.shouldShowExportCsvButton;\n     * ```\n     */\n    public get shouldShowExportCsvButton(): boolean {\n        return (this.grid != null && this.grid.exportCsv);\n    }\n\n    /**\n     * Returns how many columns are pinned.\n     * ```typescript\n     * const pinnedCount = this.igxGrid1.toolbar.pinnedColumnsCount;\n     * ```\n     */\n    public get pinnedColumnsCount() {\n        return this.grid.pinnedColumns.filter(col => !col.columnLayout).length;\n    }\n\n    /**\n     * Returns the theme of the `IgxGridToolbarComponent`.\n     * ```typescript\n     * const toolbarTheme = this.grid.toolbar.hostClass;\n     * ```\n     */\n\n    @HostBinding('attr.class')\n    get hostClass(): string {\n        const classes = [this.getComponentDensityClass('igx-grid-toolbar')];\n        // The custom classes should be at the end.\n        classes.push(this.class);\n        return classes.join(' ');\n        return this.getComponentDensityClass('igx-grid-toolbar');\n    }\n\n    constructor(public gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n        public cdr: ChangeDetectorRef,\n        @Optional() public excelExporter: IgxExcelExporterService,\n        @Optional() public csvExporter: IgxCsvExporterService,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n            super(_displayDensityOptions);\n    }\n\n    private _positionSettings: PositionSettings = {\n        horizontalDirection: HorizontalAlignment.Left,\n        horizontalStartPoint: HorizontalAlignment.Right,\n        verticalDirection: VerticalAlignment.Bottom,\n        verticalStartPoint: VerticalAlignment.Bottom\n    };\n\n    private _overlaySettings: OverlaySettings = {\n        positionStrategy: new ConnectedPositioningStrategy(this._positionSettings),\n        scrollStrategy: new AbsoluteScrollStrategy(),\n        modal: false,\n        closeOnOutsideClick: true,\n        excludePositionTarget: true\n    };\n\n    /**\n     * Returns the title of `IgxGridToolbarComponent`.\n     * ```typescript\n     * const toolbarTitle = this.igxGrid1.toolbar.getTitle();\n     * ```\n     */\n    public getTitle(): string {\n        return this.grid != null ? this.grid.toolbarTitle : '';\n    }\n\n    /**\n     * Returns the text of the export button of the `IgxGridToolbarComponent`.\n     * ```typescript\n     * const toolbarExportText = this.igxGrid1.toolbar.getTitle();\n     * ```\n     */\n    public getExportText(): string {\n        return this.grid != null ? this.grid.exportText : '';\n    }\n\n    /**\n     * Returns the text of the Excel export button of the `IgxGridToolbarComponent`.\n     * ```typescript\n     * const toolbarExcelText = this.igxGrid1.toolbar.getExportExcelText();\n     * ```\n     */\n    public getExportExcelText(): string {\n        return this.grid != null ? this.grid.exportExcelText : '';\n    }\n\n    /**\n     * Returns the text of the CSV export button of the `IgxGridToolbarComponent`.\n     * ```typescript\n     * const toolbarCSVText = this.igxGrid1.toolbar.getExportCsvText();\n     * ```\n     */\n    public getExportCsvText(): string {\n        return this.grid != null ? this.grid.exportCsvText : '';\n    }\n\n    /**\n     * Toggles the export button's dropdown menu.\n     * ```typescript\n     * this.igxGrid1.toolbar.exportClicked();\n     * ```\n     */\n    public exportClicked() {\n        this._overlaySettings.positionStrategy.settings.target = this.exportButton.nativeElement;\n        this._overlaySettings.outlet = this.grid.outletDirective;\n        this.exportDropdown.toggle(this._overlaySettings);\n    }\n\n    /**\n     * Exports the grid to excel.\n     * ```typescript\n     * this.igxGrid1.toolbar.exportToExcelClicked();\n     * ```\n     */\n    public exportToExcelClicked() {\n        this.performExport(this.excelExporter, 'excel');\n    }\n\n    /**\n     * Exports the grid to CSV.\n     * ```typescript\n     * this.igxGrid1.toolbar.exportToCsvClicked();\n     * ```\n     */\n    public exportToCsvClicked() {\n        this.performExport(this.csvExporter, 'csv');\n    }\n\n    private performExport(exp: IgxBaseExporter, exportType: string) {\n        this.exportClicked();\n\n        const fileName = 'ExportedData';\n        const options = exportType === 'excel' ?\n            new IgxExcelExporterOptions(fileName) :\n            new IgxCsvExporterOptions(fileName, CsvFileTypes.CSV);\n\n        const args = { grid: this.grid, exporter: exp, options: options, cancel: false };\n\n        this.grid.onToolbarExporting.emit(args);\n        if (args.cancel) {\n            return;\n        }\n        exp.export(this.grid, options);\n    }\n\n    /**\n     * Toggles the Column Hiding UI.\n     * ```typescript\n     * this.grid1.toolbar.toggleColumnHidingUI();\n     * ```\n     */\n    public toggleColumnHidingUI() {\n        this._overlaySettings.positionStrategy.settings.target = this.columnHidingButton.nativeElement;\n        this._overlaySettings.outlet = this.grid.outletDirective;\n        this.columnHidingDropdown.toggle(this._overlaySettings);\n    }\n\n    /**\n     * Toggles the Column Pinning UI.\n     * ```typescript\n     * this.grid1.toolbar.toggleColumnPinningUI();\n     * ```\n     */\n    public toggleColumnPinningUI() {\n        this._overlaySettings.positionStrategy.settings.target = this.columnPinningButton.nativeElement;\n        this._overlaySettings.outlet = this.grid.outletDirective;\n        this.columnPinningDropdown.toggle(this._overlaySettings);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public showAdvancedFilteringUI() {\n        this.grid.openAdvancedFilteringDialog();\n    }\n\n    /**\n     * Returns the `context` object which represents the `template context` binding into the\n     * `toolbar custom container` by providing references to the parent IgxGird and the toolbar itself.\n     * ```typescript\n     * const context =  this.igxGrid.toolbar.context;\n     * ```\n     */\n    public get context(): any {\n        return {\n            // $implicit: this\n            grid: this.grid,\n            toolbar: this\n        };\n    }\n\n    /** @hidden */\n    public get customContentTemplate(): TemplateRef<any> {\n        if (this.grid != null && this.grid.toolbarCustomContentTemplate != null) {\n            return this.grid.toolbarCustomContentTemplate.template;\n        } else {\n            return null;\n        }\n    }\n}\n","import { Directive, ElementRef, HostListener } from '@angular/core';\nimport { GridBaseAPIService } from './api.service';\nimport { GridType } from './common/grid.interface';\n\n/** @hidden */\n@Directive({\n    selector: '[igxRowEdit]'\n})\nexport class IgxRowEditTemplateDirective { }\n\n/** @hidden */\n@Directive({\n    selector: '[igxRowEditText]'\n})\nexport class IgxRowEditTextDirective { }\n\n/** @hidden */\n@Directive({\n    selector: '[igxRowEditActions]'\n})\nexport class IgxRowEditActionsDirective { }\n\n\n// TODO: Refactor circular ref, deps and logic\n/** @hidden */\n@Directive({\n    selector: `[igxRowEditTabStop]`\n})\nexport class IgxRowEditTabStopDirective {\n    private currentCellIndex: number;\n\n\n    constructor(public api: GridBaseAPIService<any>, public element: ElementRef) {}\n\n    get grid(): GridType {\n        return this.api.grid;\n    }\n\n    @HostListener('keydown.Tab', [`$event`])\n    @HostListener('keydown.Shift.Tab', [`$event`])\n    public handleTab(event: KeyboardEvent): void {\n        event.stopPropagation();\n        if ((this.grid.rowEditTabs.last === this && !event.shiftKey) ||\n            (this.grid.rowEditTabs.first === this && event.shiftKey)\n        ) {\n            this.move(event);\n        }\n    }\n\n    @HostListener('keydown.Escape', [`$event`])\n    public handleEscape(event: KeyboardEvent): void {\n        this.grid.endEdit(false, event);\n        const activeNode = this.grid.selectionService.activeElement;\n        //  on right click activeNode is deleted, so we may have no one\n        if (activeNode) {\n            const cell = this.grid.navigation.getCellElementByVisibleIndex(\n                activeNode.row,\n                activeNode.layout ? activeNode.layout.columnVisibleIndex : activeNode.column);\n            cell.focus();\n        }\n    }\n\n    /**\n     * Moves focus to first/last editable cell in the editable row and put the cell in edit mode.\n     * If cell is out of view first scrolls to the cell\n     * @param event keyboard event containing information about whether SHIFT key was pressed\n     */\n    private move(event: KeyboardEvent) {\n        event.preventDefault();\n        this.currentCellIndex = event.shiftKey ? this.grid.lastEditableColumnIndex : this.grid.firstEditableColumnIndex;\n        if (!this.grid.navigation.isColumnFullyVisible(this.currentCellIndex)) {\n            this.grid.navigation.performHorizontalScrollToCell(\n                this.grid.rowInEditMode.index, this.currentCellIndex, false, this.activateCell);\n        } else {\n            this.activateCell();\n        }\n    }\n\n    /**\n     * Sets the cell in edit mode and focus its native element\n     * @param cellIndex index of the cell to activate\n     */\n    private activateCell = (): void => {\n        const cell = this.grid.rowInEditMode.cells.find(e => e.visibleColumnIndex === this.currentCellIndex);\n        cell.nativeElement.focus();\n        cell.setEditMode(true);\n        this.currentCellIndex = -1;\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Input,\n    ViewChild,\n    TemplateRef,\n} from '@angular/core';\nimport { IGroupByRecord } from '../../data-operations/groupby-record.interface';\nimport { DataType } from '../../data-operations/data-util';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { IgxGridSelectionService, ISelectionNode } from '../selection/selection.service';\nimport { ROW_COLLAPSE_KEYS, ROW_EXPAND_KEYS, SUPPORTED_KEYS } from '../../core/utils';\nimport { GridType } from '../common/grid.interface';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-groupby-row',\n    templateUrl: './groupby-row.component.html'\n})\nexport class IgxGridGroupByRowComponent {\n\n    constructor(public gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n        private gridSelection: IgxGridSelectionService,\n        public element: ElementRef,\n        public cdr: ChangeDetectorRef) { }\n\n    /**\n     * @hidden\n     */\n    protected defaultCssClass = 'igx-grid__group-row';\n\n    /**\n     * @hidden\n     */\n    protected paddingIndentationCssClass = 'igx-grid__group-row--padding-level';\n\n    /**\n    * @hidden\n    */\n    @ViewChild('defaultGroupByExpandedTemplate', { read: TemplateRef, static: true })\n    protected defaultGroupByExpandedTemplate: TemplateRef<any>;\n\n    /**\n    * @hidden\n    */\n    @ViewChild('defaultGroupByCollapsedTemplate', { read: TemplateRef, static: true })\n    protected defaultGroupByCollapsedTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n    @Input()\n    protected isFocused = false;\n\n    /**\n     * Returns whether the row is focused.\n     * ```\n     * let gridRowFocused = this.grid1.rowList.first.focused;\n     * ```\n     */\n    get focused(): boolean {\n        return this.isFocused;\n    }\n\n    /**\n     * An @Input property that sets the index of the row.\n     * ```html\n     * <igx-grid-groupby-row [gridID]=\"id\" [index]=\"rowIndex\" [groupRow]=\"rowData\" #row></igx-grid-groupby-row>\n     * ```\n     */\n    @Input()\n    public index: number;\n\n    /**\n     * An @Input property that sets the id of the grid the row belongs to.\n     * ```html\n     * <igx-grid-groupby-row [gridID]=\"id\" [index]=\"rowIndex\" [groupRow]=\"rowData\" #row></igx-grid-groupby-row>\n     * ```\n     */\n    @Input()\n    public gridID: string;\n\n    /**\n     * An @Input property that specifies the group record the component renders for.\n     * ```typescript\n     * <igx-grid-groupby-row [gridID]=\"id\" [index]=\"rowIndex\" [groupRow]=\"rowData\" #row></igx-grid-groupby-row>\n     * ```\n     */\n    @Input()\n    public groupRow: IGroupByRecord;\n\n    /**\n     * Returns a reference of the content of the group.\n     * ```typescript\n     * const groupRowContent = this.grid1.rowList.first.groupContent;\n     * ```\n     */\n    @ViewChild('groupContent', { static: true })\n    public groupContent: ElementRef;\n\n    /**\n     * Returns whether the group row is expanded.\n     * ```typescript\n     * const groupRowExpanded = this.grid1.rowList.first.expanded;\n     * ```\n     */\n    @HostBinding('attr.aria-expanded')\n    get expanded(): boolean {\n        return this.grid.isExpandedGroup(this.groupRow);\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('attr.tabindex')\n    public tabindex = 0;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('attr.aria-describedby')\n    get describedBy(): string {\n        const grRowExpr = this.groupRow.expression !== undefined ? this.groupRow.expression.fieldName : '';\n        return this.gridID + '_' + grRowExpr;\n    }\n\n    @HostBinding('attr.data-rowIndex')\n    get dataRowIndex() {\n        return this.index;\n    }\n\n    /**\n     * Returns a reference to the underlying HTML element.\n     * ```typescript\n     * const groupRowElement = this.nativeElement;\n     * ```\n     */\n    get nativeElement(): any {\n        return this.element.nativeElement;\n    }\n\n    /**\n     * Returns the style classes applied to the group rows.\n     * ```typescript\n     * const groupCssStyles = this.grid1.rowList.first.styleClasses;\n     * ```\n     */\n    @HostBinding('class')\n    get styleClasses(): string {\n        return `${this.defaultCssClass} ` + `${this.paddingIndentationCssClass}-` + this.groupRow.level +\n            (this.focused ? ` ${this.defaultCssClass}--active` : '');\n    }\n\n    /**\n     *@hidden\n     */\n    @HostListener('focus')\n    public onFocus() {\n        this.isFocused = true;\n    }\n\n    /**\n     *@hidden\n     */\n    @HostListener('blur')\n    public onBlur() {\n        this.isFocused = false;\n    }\n\n    /**\n     * Toggles the group row.\n     * ```typescript\n     * this.grid1.rowList.first.toggle()\n     * ```\n     */\n    public toggle() {\n        const isVirtualized = !this.grid.verticalScrollContainer.dc.instance.notVirtual;\n        const groupRowIndex = this.index;\n        this.grid.toggleGroup(this.groupRow);\n        if (isVirtualized) {\n            const groupRow = this.grid.nativeElement.querySelector(`[data-rowIndex=\"${groupRowIndex}\"]`);\n            if (groupRow) {\n                groupRow.focus();\n            }\n        }\n    }\n\n    public get iconTemplate() {\n        if (this.expanded) {\n            return this.grid.rowExpandedIndicatorTemplate || this.defaultGroupByExpandedTemplate;\n        } else {\n            return this.grid.rowCollapsedIndicatorTemplate || this.defaultGroupByCollapsedTemplate;\n        }\n    }\n\n    protected get selectionNode(): ISelectionNode {\n        return {\n            row: this.index,\n            column: this.gridSelection.activeElement ? this.gridSelection.activeElement.column : 0\n        };\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown', ['$event'])\n    public onKeydown(event) {\n        // TODO: Refactor\n        const key = event.key.toLowerCase();\n        if (!SUPPORTED_KEYS.has(key)) {\n            return;\n        }\n        event.stopPropagation();\n        const keydownArgs = { targetType: 'groupRow', target: this, event: event, cancel: false };\n        this.grid.onGridKeydown.emit(keydownArgs);\n        if (keydownArgs.cancel) {\n            return;\n        }\n        event.preventDefault();\n\n        if (!this.isKeySupportedInGroupRow(key, event.shiftKey, event.altKey) || event.ctrlKey) { return; }\n\n        if (this.isToggleKey(key, event.altKey)) {\n            if ((this.expanded && ROW_COLLAPSE_KEYS.has(key)) || (!this.expanded && ROW_EXPAND_KEYS.has(key))) {\n                this.toggle();\n            }\n            return;\n        }\n\n        const selection = this.gridSelection;\n        selection.keyboardState.shift = event.shiftKey && !(key === 'tab');\n\n        const activeNode = selection.activeElement ? Object.assign({}, selection.activeElement) : this.selectionNode;\n        activeNode.row = this.index;\n        switch (key) {\n            case 'arrowdown':\n            case 'down':\n                this.grid.navigation.navigateDown(this.nativeElement, activeNode);\n                break;\n            case 'arrowup':\n            case 'up':\n                this.grid.navigation.navigateUp(this.nativeElement, activeNode);\n                break;\n            case 'tab':\n                this.handleTabKey(event.shiftKey, activeNode);\n                break;\n        }\n    }\n\n    /**\n     * Returns a reference to the `IgxGridComponent` the `IgxGridGroupByRowComponent` belongs to.\n     * ```typescript\n     * this.grid1.rowList.first.grid;\n     * ```\n     */\n    get grid(): any {\n        return this.gridAPI.grid;\n    }\n\n    /**\n     * @hidden\n     */\n    get dataType(): any {\n        const column = this.grid.getColumnByName(this.groupRow.expression.fieldName);\n        return (column && column.dataType) || DataType.String;\n    }\n\n    private handleTabKey(shift: boolean, activeNode: ISelectionNode) {\n        if (shift) {\n            this.grid.navigation.performShiftTabKey(this.nativeElement, activeNode);\n        } else {\n            if (this.index === this.grid.dataView.length - 1 && this.grid.rootSummariesEnabled) {\n                this.grid.navigation.onKeydownHome(0, true);\n            } else {\n                const orderedColumns = this.grid.navigation.gridOrderedColumns;\n                const lastCol = orderedColumns[orderedColumns.length - 1];\n                activeNode.column = lastCol.columnLayoutChild ? lastCol.parent.visibleIndex : lastCol.visibleIndex;\n                this.grid.navigation.performTab(this.nativeElement, activeNode);\n            }\n        }\n    }\n\n    private isKeySupportedInGroupRow(key, shift = false, alt = false) {\n        if (shift) {\n            return ['down', 'up', 'arrowdown', 'arrowup', 'tab'].indexOf(key) !== -1;\n        }\n        return this.isToggleKey(key, alt) ? true : ['down', 'up', 'arrowdown', 'arrowup', 'tab'].indexOf(key) !== -1;\n    }\n\n    private isToggleKey(key, altKey) {\n        return altKey && ['left', 'right', 'up', 'down', 'arrowleft', 'arrowright', 'arrowup', 'arrowdown'].indexOf(key) !== -1;\n    }\n\n}\n","import { Directive, TemplateRef, EventEmitter, QueryList, Optional, Inject } from '@angular/core';\nimport { DisplayDensityBase, IDisplayDensityOptions, DisplayDensityToken } from '../core/density';\n\nexport interface IListChild {\n    index: number;\n}\n\n/** @hidden */\n@Directive({\n    selector: '[igxListBase]'\n})\nexport class IgxListBaseDirective extends DisplayDensityBase {\n    onItemClicked: EventEmitter<any>;\n    allowLeftPanning: boolean;\n    allowRightPanning: boolean;\n    panEndTriggeringThreshold: number;\n    onLeftPan: EventEmitter<any>;\n    onRightPan: EventEmitter<any>;\n    onPanStateChange: EventEmitter<any>;\n    children: QueryList<any>;\n    listItemLeftPanningTemplate: IgxListItemLeftPanningTemplateDirective;\n    listItemRightPanningTemplate: IgxListItemRightPanningTemplateDirective;\n\n    constructor(@Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n        super(_displayDensityOptions);\n    }\n}\n\nexport enum IgxListPanState { NONE, LEFT, RIGHT }\n\n@Directive({\n    selector: '[igxEmptyList]'\n})\nexport class IgxEmptyListTemplateDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n\n@Directive({\n    selector: '[igxDataLoading]'\n})\nexport class IgxDataLoadingTemplateDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n\n@Directive({\n    selector: '[igxListItemLeftPanning]'\n})\nexport class IgxListItemLeftPanningTemplateDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n\n@Directive({\n    selector: '[igxListItemRightPanning]'\n})\nexport class IgxListItemRightPanningTemplateDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n","/* tslint:disable */\nexport default [\n    {\n        name: 'add_filter',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M19 15v-3h-2v3h-3v2h3v3h2v-3h3v-2h-3zM5 10h10v2H5zM2 5h16v2H2zM8 15h4v2H8z\"/>\n      </svg>`\n    },\n    {\n        name: 'contains',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Layer_1\" data-name=\"Layer 1\" viewBox=\"0 0 24 24\">\n        <path d=\"M3 3v18h18V3zm16 16H5V5h14z\"/>\n        <path d=\"M12 11.3a4.39 4.39 0 0 0-2.54.63 2.07 2.07 0 0 0-.9 1.78 2.29 2.29 0 0 0 .66 1.74 2.63 2.63 0 0 0 1.89.63 2.39 2.39 0 0 0 1.32-.37 3.05 3.05 0 0 0 1-.93 3.72 3.72 0 0 0 .08.57c0 .19.1.38.16.58h1.79a4.51 4.51 0 0 1-.21-.88 5.57 5.57 0 0 1-.07-.93v-3.5a2.44 2.44 0 0 0-.84-2 3.34 3.34 0 0 0-2.22-.7 3.54 3.54 0 0 0-2.3.72A1.93 1.93 0 0 0 9 10.29h1.71a.93.93 0 0 1 .29-.71 1.5 1.5 0 0 1 1-.29 1.45 1.45 0 0 1 1 .35 1.3 1.3 0 0 1 .37 1v.69zm1.4 1.08v1.17a1.61 1.61 0 0 1-.71.77 2.27 2.27 0 0 1-1.21.34 1.18 1.18 0 0 1-.84-.27.92.92 0 0 1-.3-.72 1.16 1.16 0 0 1 .44-.9 1.76 1.76 0 0 1 1.22-.39z\"/>\n      </svg>`\n    },\n    {\n        name: 'does_not_contain',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M21,19.74V3H4.26L2.89,1.63,1.63,2.92,3,4.29V21H19.73l1.37,1.37,1.27-1.26ZM5,19V6.28l5.28,5.27a3.19,3.19,0,0,0-.81.38,2.07,2.07,0,0,0-.9,1.78,2.29,2.29,0,0,0,.66,1.74,2.63,2.63,0,0,0,1.89.63,2.39,2.39,0,0,0,1.32-.37,3.05,3.05,0,0,0,1-.93,3.72,3.72,0,0,0,.08.57c0,.19.1.38.16.58h1L17.73,19Zm5.79-6.23a1.31,1.31,0,0,1,.45-.25l1.37,1.36.28.29a1.57,1.57,0,0,1-.19.15,2.27,2.27,0,0,1-1.21.34,1.18,1.18,0,0,1-.84-.27.92.92,0,0,1-.3-.72A1.16,1.16,0,0,1,10.79,12.77Zm2.6-1.47h-.83L10.94,9.68l.08-.1a1.5,1.5,0,0,1,1-.29,1.45,1.45,0,0,1,1,.35,1.3,1.3,0,0,1,.37,1ZM19,17.74l-3.85-3.85V10.62a2.44,2.44,0,0,0-.84-2,3.34,3.34,0,0,0-2.22-.7,3.64,3.64,0,0,0-2.24.67L6.26,5H19Z\"/>\n    </svg>`\n    },\n    {\n        name: 'all',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M2 14h8v2H2zM2 6h12v2H2zM16 17l-3-3-1.5 1.5L16 20l7-7-1.5-1.5L16 17zM2 10h12v2H2z\"/>\n      </svg>\n      `\n    },\n    {\n        name: 'empty',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M5 17h2v2H5zM13 17h2v2h-2zM5 13h2v2H5zM17 17h2v2h-2zM13 5h2v2h-2zM9 17h2v2H9zM17 9h2v2h-2zM17 13h2v2h-2zM17 5h2v2h-2zM5 9h2v2H5zM5 5h2v2H5zM9 5h2v2H9z\"/>\n      </svg>`\n    },\n    {\n        name: 'end_expression',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M13.14 6.76L17.49 12l-4.35 5.24 1.54 1.28L20.09 12l-5.41-6.52-1.54 1.28z\"/>\n        <path d=\"M11.91 11h2v2h-2zM7.91 11h2v2h-2zM3.91 11h2v2h-2z\"/>\n      </svg>`\n    },\n    {\n        name: 'ends_with',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M3 14.5h2v2H3zM11 14.5h2v2h-2zM7 14.5h2v2H7zM20.8 14.8v-3A2.1 2.1 0 0 0 20 10a3 3 0 0 0-2-.6 3 3 0 0 0-2 .6 1.7 1.7 0 0 0-.7 1.5h1.5a.8.8 0 0 1 .3-.7 1.3 1.3 0 0 1 .9-.3 1.3 1.3 0 0 1 .9.4 1.1 1.1 0 0 1 .3.8v.6H18a3.8 3.8 0 0 0-2.2.6 1.8 1.8 0 0 0-.8 1.5 2 2 0 0 0 .6 1.6 2.3 2.3 0 0 0 1.6.6 2.1 2.1 0 0 0 1.2-.4 2.8 2.8 0 0 0 .8-.8 4.3 4.3 0 0 0 .1.5l.1.5H21a4.1 4.1 0 0 1-.2-.7 5.4 5.4 0 0 1 0-1zm-1.6-.5a1.5 1.5 0 0 1-.6.7 2 2 0 0 1-1 .2 1.1 1.1 0 0 1-.8-.2.8.8 0 0 1-.2-.6 1 1 0 0 1 .3-.8 1.5 1.5 0 0 1 1.1-.3h1.2z\"/>\n      </svg>`\n    },\n    {\n        name: 'equals',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M5 13.5h14v2H5zM5 8.5h14v2H5z\"/>\n      </svg>`\n    },\n    {\n        name: 'greater_than_or_equal',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M5.99 19h12.02v2H5.99zM18 9.47L6 3v2.11L15.09 10 6 14.9v2.11l12-6.47V9.47z\"/>\n      </svg>`\n    },\n    {\n        name: 'greater_than',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M6 7.11L15.09 12 6 16.89V19l12-6.46v-1.08L6 5v2.11z\"/>\n      </svg>\n      `\n    },\n    {\n        name: 'is_after',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M15 7h4v10h-4v2h6V5h-6v2zM11 3h2v18h-2zM7 5h2v2H7zM3 5h2v2H3zM3 17h2v2H3zM3 13h2v2H3zM3 9h2v2H3zM7 17h2v2H7z\"/>\n      </svg>`\n    },\n    {\n        name: 'is_before',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M3 19h6v-2H5V7h4V5H3v14zM11 3h2v18h-2zM15 5h2v2h-2zM19 5h2v2h-2zM19 13h2v2h-2zM15 17h2v2h-2zM19 17h2v2h-2zM19 9h2v2h-2z\"/>\n      </svg>`\n    },\n    {\n        name: 'is_false',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M8 5a7 7 0 1 0 7 7 7 7 0 0 0-7-7zm4.31 9.79l-1.52 1.52L8 13.52l-2.79 2.79-1.52-1.52L6.48 12 3.69 9.21l1.52-1.52L8 10.48l2.79-2.79 1.52 1.52L9.52 12zM18 7a5 5 0 0 0-3 1.06 7.48 7.48 0 0 1 .49 1 3.89 3.89 0 1 1 0 5.82 8.08 8.08 0 0 1-.49 1A5 5 0 1 0 18 7z\"/>\n        <path d=\"M17.52 13.85l2.91-2.92-.78-.78-2.13 2.12-1.17-1.15-.38.37-.41.41.42.42L17 13.34l.52.51z\"/>\n      </svg>`\n    },\n    {\n        name: 'is_not_null',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M16.58 6.07l.79-1.36-1.74-1-.78 1.35a7.5 7.5 0 0 0-7.43 12.87l-.79 1.36 1.74 1 .78-1.35a7.5 7.5 0 0 0 7.43-12.87zM6.5 12A5.5 5.5 0 0 1 12 6.5a5.65 5.65 0 0 1 1.84.32l-5.41 9.36A5.49 5.49 0 0 1 6.5 12zm5.5 5.5a5.65 5.65 0 0 1-1.84-.32l5.41-9.36A5.5 5.5 0 0 1 12 17.5z\"/>\n      </svg>`\n    },\n    {\n        name: 'is_null',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M12 4.5a7.5 7.5 0 1 0 7.5 7.5A7.5 7.5 0 0 0 12 4.5zm0 13a5.5 5.5 0 1 1 5.5-5.5 5.5 5.5 0 0 1-5.5 5.5z\"/>\n      </svg>`\n    },\n    {\n        name: 'is_true',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M19.44 14.22zM16.56 14.22zM16.56 14.22L18 12.79l1.44 1.43.78-.78L18.79 12l1.43-1.44-.78-.78L18 11.21l-1.44-1.43-.78.78L17.21 12l-1.43 1.44.78.78z\"/>\n        <path d=\"M18 7a5 5 0 0 0-3 1.06 7.48 7.48 0 0 1 .49 1 3.89 3.89 0 1 1 0 5.82 8.08 8.08 0 0 1-.49 1A5 5 0 1 0 18 7zM8 5a7 7 0 1 0 7 7 7 7 0 0 0-7-7zm-.93 10.18l-3.38-3.37 1.13-1.12 2.25 2.25 4.11-4.12 1.13 1.12z\"/>\n      </svg>`\n    },\n    {\n        name: 'last_month',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M17.5 14a4.48 4.48 0 1 0 4.5 4.5 4.47 4.47 0 0 0-4.5-4.5zm3.5 5.5h-4v2l-3-3 3-3v2h4zM5 9h2v2H5zM5 13h2v2H5zM10 13h2v2h-2zM5 17h2v2H5zM10 17h2v2h-2zM10 9h2v2h-2zM15 9h2v2h-2z\"/>\n        <path d=\"M4 8h14v4h2V5a2 2 0 0 0-2-2h-1V1h-2v2H7V1H5v2H4a2 2 0 0 0-2 2v15a2 2 0 0 0 2 2h7v-2H4z\"/>\n      </svg>`\n    },\n    {\n        name: 'last_year',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M21 10v11H7v2h14a2 2 0 0 0 2-2V10z\"/>\n        <path d=\"M19 17V5a2 2 0 0 0-2-2h-1V1h-2v2H6V1H4v2H3a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2zM3 17V7h14v10H3z\"/>\n        <path d=\"M8.87 9l-2.99 3 2.99 3v-2.25h5.26v-1.5H8.87V9z\"/>\n      </svg>`\n    },\n    {\n        name: 'less_than_or_equal',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M5.99 19h12.02v2H5.99zM18 14.9L8.91 10 18 5.11V3L6 9.47v1.07l12 6.47V14.9z\"/>\n      </svg>`\n    },\n    {\n        name: 'less_than',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M6 12.54L18 19v-2.11L8.91 12 18 7.11V5L6 11.46v1.08z\"/>\n      </svg>`\n    },\n    {\n        name: 'next_month',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M20 14.76a4.5 4.5 0 1 0 2 3.74 4.47 4.47 0 0 0-2-3.74zm-2 6.74v-2h-4v-2h4v-2l3 3zM5 9h2v2H5zM5 13h2v2H5zM10 13h2v2h-2zM5 17h2v2H5zM10 17h2v2h-2zM10 9h2v2h-2zM15 9h2v2h-2z\"/>\n        <path d=\"M4 8h14v4h2V5a2 2 0 0 0-2-2h-1V1h-2v2H7V1H5v2H4a2 2 0 0 0-2 2v15a2 2 0 0 0 2 2h7v-2H4z\"/>\n      </svg>`\n    },\n    {\n        name: 'next_year',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M21 21H7v2h14a2 2 0 0 0 2-2V10h-2z\"/>\n        <path d=\"M19 17V5a2 2 0 0 0-2-2h-1V1h-2v2H6V1H4v2H3a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2zM3 17V7h14v10H3z\"/>\n        <path d=\"M11.13 11.25H5.88v1.5h5.25V15l3-3-3-3v2.25z\"/>\n      </svg>`\n    },\n    {\n        name: 'not_empty',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M5 9h2v2H5zM9 17h2v2H9zM13 17h2v2h-2zM17 9h2v2h-2zM17 5h2v2h-2zM5 17h2v2H5zM13 5h2v2h-2zM5 13h2v2H5zM19 15v-2h-2v.47L18.53 15H19zM11 7V5H9v.46L10.54 7H11zM2.76 1.76L1.5 3.06 20.97 22.5l1.26-1.26-8.89-8.89L2.76 1.76z\"/>\n      </svg>`\n    },\n    {\n        name: 'not_equal',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M17.37 4.71l-1.74-1-2.76 4.79H5v2h6.71l-1.73 3H5v2h3.82l-2.19 3.79 1.74 1 2.76-4.79H19v-2h-6.71l1.73-3H19v-2h-3.82l2.19-3.79z\"/>\n      </svg>`\n    },\n    {\n        name: 'start_expression',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M18.1 11h2v2h-2zM10.1 11h2v2h-2z\"/>\n        <path d=\"M10.9 6.8L9.3 5.5 4 12l5.4 6.5 1.6-1.3L6.5 12 11 6.8zM14.1 11h2v2h-2z\"/>\n      </svg>`\n    },\n    {\n        name: 'starts_with',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path fill=\"none\" d=\"M4.97 13.23h3.06L6.5 9.12l-1.53 4.11z\"/>\n        <path d=\"M5.89 7.5L2 16.5h1.72l.73-1.8h4.1l.73 1.8H11l-3.89-9zM5 13.23l1.5-4.11L8 13.23zM12 14.5h2v2h-2zM20 14.5h2v2h-2zM16 14.5h2v2h-2z\"/>\n      </svg>`\n    },\n    {\n        name: 'this_month',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M6 9h2v2H6zM6 13h2v2H6zM11 13h2v2h-2zM6 17h2v2H6zM11 17h2v2h-2zM11 9h2v2h-2zM16 9h2v2h-2zM21 14.76a4.5 4.5 0 1 0 2 3.74 4.47 4.47 0 0 0-2-3.74zm-2.94 5.41l-1.75-1.76.69-.71 1.05 1L20 16.83l.71.71z\"/>\n        <path d=\"M5 8h14v4h2V5a2 2 0 0 0-2-2h-1V1h-2v2H8V1H6v2H5a2 2 0 0 0-2 2v15a2 2 0 0 0 2 2h7v-2H5z\"/>\n      </svg>`\n    },\n    {\n        name: 'this_year',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M21 21H7v2h14a2 2 0 0 0 2-2V10h-2z\"/>\n        <path d=\"M19 17V5a2 2 0 0 0-2-2h-1V1h-2v2H6V1H4v2H3a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2zM3 17V7h14v10H3z\"/>\n        <path d=\"M8.85 13.15l-1.77-1.77-.88.89 2.65 2.65 4.95-4.96-.88-.88-4.07 4.07z\"/>\n      </svg>`\n    },\n    {\n        name: 'today',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M19 4h-1V2h-2v2H8V2H6v2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 16H5V9h14z\"/>\n        <path d=\"M16.53 12.06L15.47 11l-4.88 4.88-2.12-2.12-1.06 1.06L10.59 18l5.94-5.94z\"/>\n      </svg>`\n    },\n    {\n        name: 'ungroup',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M15 15h5v5h-5zM6 13h5v5H6zM13 6h5v5h-5zM6 6h5v5H6z\"/>\n        <path d=\"M20 2H4a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h9v-2H4V4h16v9h2V4a2 2 0 0 0-2-2z\"/>\n      </svg>`\n    },\n    {\n        name: 'yesterday',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M10.68 15.38h6.13v-1.75h-6.13V11l-3.49 3.5 3.49 3.5v-2.62z\"/>\n        <path d=\"M19 4h-1V2h-2v2H8V2H6v2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 16H5V9h14z\"/>\n      </svg>`\n    },\n    {\n        name: 'pin',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path d=\"M15.18 2.25l7.07 7.07-2.83-.01-3.54 3.55.01 4.24-3.53-3.54-5.66 5.66H5.28V17.8l5.66-5.66L7.4 8.61l4.24.01 3.55-3.54-.01-2.83z\"/>\n      </svg>`\n    },\n    {\n        name: 'unpin',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <path fill=\"none\" d=\"M0 0h24v25H0V0z\"/>\n        <path d=\"M11.84 14.08L6.7 19.22H5.28V17.8l5.14-5.14L2 4.26 3.29 3l18 18L20 22.21zm4-.49l-5-5h.73l3.55-3.54v-2.8l7.07 7.07h-2.77l-3.54 3.54z\" />\n      </svg>`\n    },\n    {\n        name: 'ungroup',\n        value: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n          <path d=\"M18,4.5H6A1.5,1.5,0,0,0,4.5,6V18A1.5,1.5,0,0,0,6,19.5h6.75V18H6V6H18v6.75h1.5V6A1.5,1.5,0,0,0,18,4.5Z\"/>\n          <rect x=\"7.5\" y=\"12.75\" width=\"3.75\" height=\"3.75\"/>\n          <rect x=\"14.25\" y=\"14.25\" width=\"3.75\" height=\"3.75\"/>\n          <rect x=\"7.5\" y=\"7.5\" width=\"3.75\" height=\"3.75\"/>\n          <rect x=\"12.75\" y=\"7.5\" width=\"3.75\" height=\"3.75\"/>\n        </svg>`\n    }\n];\n","import { Pipe, PipeTransform, Inject, LOCALE_ID } from '@angular/core';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { DataUtil } from '../../data-operations/data-util';\nimport { cloneArray } from '../../core/utils';\nimport { GridType } from './grid.interface';\nimport { DatePipe, DecimalPipe } from '@angular/common';\n\n/**\n * @hidden\n * @internal\n */\n@Pipe({\n    name: 'igxCellStyleClasses'\n})\nexport class IgxGridCellStyleClassesPipe implements PipeTransform {\n\n    transform(cssClasses: { [prop: string]: any }, value: any, data: any, field: string, index: number): string {\n        if (!cssClasses) {\n            return '';\n        }\n\n        const result = [];\n\n        for (const cssClass of Object.keys(cssClasses)) {\n            const callbackOrValue = cssClasses[cssClass];\n            const apply = typeof callbackOrValue === 'function' ? callbackOrValue(data, field, value, index) : callbackOrValue;\n            if (apply) {\n                result.push(cssClass);\n            }\n        }\n\n        return result.join(' ');\n    }\n}\n\n/**\n * @hidden\n * @internal\n */\n@Pipe({\n    name: 'igxCellStyles'\n})\nexport class IgxGridCellStylesPipe implements PipeTransform {\n\n    transform(styles: { [prop: string]: any }, value: any, data: any, field: string, index: number): { [prop: string]: any } {\n        const css = {};\n        if (!styles) {\n            return css;\n        }\n\n        for (const prop of Object.keys(styles)) {\n            const res = styles[prop];\n            css[prop] = typeof res === 'function' ? res(data, field, value, index) : res;\n        }\n\n        return css;\n    }\n}\n\n/**\n * @hidden\n * @internal\n */\n@Pipe({\n    name: 'igxNotGrouped'\n})\nexport class IgxGridNotGroupedPipe implements PipeTransform {\n\n    transform(value: any[]): any[] {\n        return value.filter(item => !item.columnGroup);\n    }\n}\n\n/**\n * @hidden\n * @internal\n */\n@Pipe({\n    name: 'igxTopLevel'\n})\nexport class IgxGridTopLevelColumns implements PipeTransform {\n\n    transform(value: any[]): any[] {\n        return value.filter(item => item.level === 0);\n    }\n}\n\n/**\n * @hidden\n * @internal\n */\n@Pipe({\n    name: 'filterCondition',\n    pure: true\n})\nexport class IgxGridFilterConditionPipe implements PipeTransform {\n\n    public transform(value: string): string {\n        return value.split(/(?=[A-Z])/).join(' ');\n    }\n}\n\n/**\n * @hidden\n * @internal\n */\n@Pipe({\n    name: 'gridTransaction',\n    pure: true\n})\nexport class IgxGridTransactionPipe implements PipeTransform {\n\n    constructor(private gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) { }\n\n    transform(collection: any[], id: string, pipeTrigger: number) {\n        const grid: IgxGridBaseDirective = this.gridAPI.grid;\n\n        if ( grid.transactions.enabled) {\n            const result = DataUtil.mergeTransactions(\n                cloneArray(collection),\n                grid.transactions.getAggregatedChanges(true),\n                grid.primaryKey);\n            return result;\n        }\n        return collection;\n    }\n}\n\n/**\n * @hidden\n * @internal\n */\n@Pipe({\n    name: 'paginatorOptions',\n    pure: true,\n})\nexport class IgxGridPaginatorOptionsPipe implements PipeTransform {\n    public transform(values: Array<number>) {\n        return Array.from(new Set([...values])).sort((a, b) => a - b);\n    }\n}\n\n/**\n * @hidden\n * @internal\n */\n@Pipe({\n    name: 'visibleColumns',\n    pure: true\n})\nexport class IgxHasVisibleColumnsPipe implements PipeTransform {\n    transform(values: any[], hasVisibleColumns) {\n        if (!(values && values.length)) {\n            return values;\n        }\n        return hasVisibleColumns ? values : [];\n    }\n\n}\n\n\n/**\n * @hidden\n * @internal\n */\n@Pipe({\n    name: 'igxdate'\n})\nexport class IgxDatePipeComponent extends DatePipe implements PipeTransform {\n\n    private readonly DEFAULT_DATE_FORMAT = 'mediumDate';\n\n    constructor(@Inject(LOCALE_ID) locale: string) {\n        // D.P. constructor duplication due to es6 compilation, might be obsolete in the future\n        super(locale);\n    }\n    transform(value: any, locale: string): string {\n        if (value && value instanceof Date) {\n            if (locale) {\n                return super.transform(value, this.DEFAULT_DATE_FORMAT, undefined, locale);\n            } else {\n                return super.transform(value);\n            }\n        } else {\n            return value;\n        }\n    }\n}\n\n/**\n * @hidden\n * @internal\n */\n@Pipe({\n    name: 'igxdecimal'\n})\nexport class IgxDecimalPipeComponent extends DecimalPipe implements PipeTransform {\n    constructor(@Inject(LOCALE_ID) locale: string) {\n        // D.P. constructor duplication due to es6 compilation, might be obsolete in the future\n        super(locale);\n    }\n    transform(value: any, locale: string): string {\n        if (value && typeof value === 'number') {\n            if (locale) {\n                return super.transform(value, undefined, locale);\n            } else {\n                return super.transform(value);\n            }\n        } else {\n            return value;\n        }\n    }\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { IgxIconService } from '../../icon/icon.service';\nimport { FilteringExpressionsTree, IFilteringExpressionsTree } from '../../data-operations/filtering-expressions-tree';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport icons from './svgIcons';\nimport { IFilteringExpression, FilteringLogic } from '../../data-operations/filtering-expression.interface';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { IForOfState } from '../../directives/for-of/for_of.directive';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IFilteringOperation } from '../../data-operations/filtering-condition';\nimport { GridBaseAPIService } from '../api.service';\nimport { IColumnVisibilityChangedEventArgs } from '../grid';\nimport { IColumnResizeEventArgs } from '../common/events';\nimport { GridType } from '../common/grid.interface';\nimport { IgxDatePipeComponent } from '../common/pipes';\n\nconst FILTERING_ICONS_FONT_SET = 'filtering-icons';\n\n/**\n *@hidden\n */\nexport class ExpressionUI {\n    public expression: IFilteringExpression;\n    public beforeOperator: FilteringLogic;\n    public afterOperator: FilteringLogic;\n    public isSelected = false;\n    public isVisible = true;\n}\n\n/**\n *@hidden\n */\n@Injectable()\nexport class IgxFilteringService implements OnDestroy {\n\n    private columnsWithComplexFilter = new Set<string>();\n    private areEventsSubscribed = false;\n    private destroy$ = new Subject<boolean>();\n    private isFiltering = false;\n    private columnToExpressionsMap = new Map<string, ExpressionUI[]>();\n    private _datePipe: IgxDatePipeComponent;\n    private columnStartIndex = -1;\n    private _filterIconsRegistered = false;\n\n    public gridId: string;\n    public isFilterRowVisible = false;\n    public filteredColumn: IgxColumnComponent = null;\n    public selectedExpression: IFilteringExpression = null;\n    public columnToFocus: IgxColumnComponent = null;\n    public shouldFocusNext = false;\n    public columnToMoreIconHidden = new Map<string, boolean>();\n\n    grid: IgxGridBaseDirective;\n\n    constructor(private gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>, private iconService: IgxIconService) {}\n\n    ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    public get displayContainerWidth() {\n        return parseInt(this.grid.parentVirtDir.dc.instance._viewContainer.element.nativeElement.offsetWidth, 10);\n    }\n\n    public get displayContainerScrollLeft() {\n        return this.grid.headerContainer.scrollPosition;\n    }\n\n    public get areAllColumnsInView() {\n        return parseInt(this.grid.parentVirtDir.dc.instance._viewContainer.element.nativeElement.offsetWidth, 10) === 0;\n    }\n\n    public get unpinnedFilterableColumns() {\n        return this.grid.unpinnedColumns.filter(col => !col.columnGroup && col.filterable);\n    }\n\n    public get unpinnedColumns() {\n        return this.grid.unpinnedColumns.filter(col => !col.columnGroup);\n    }\n\n    public get datePipe(): IgxDatePipeComponent {\n        if (!this._datePipe) {\n            this._datePipe = new IgxDatePipeComponent(this.grid.locale);\n        }\n        return this._datePipe;\n    }\n\n    /**\n     * Subscribe to grid's events.\n     */\n    public subscribeToEvents() {\n        if (!this.areEventsSubscribed) {\n            this.areEventsSubscribed = true;\n\n            this.grid.onColumnResized.pipe(takeUntil(this.destroy$)).subscribe((eventArgs: IColumnResizeEventArgs) => {\n                this.updateFilteringCell(eventArgs.column);\n            });\n\n            this.grid.parentVirtDir.onChunkLoad.pipe(takeUntil(this.destroy$)).subscribe((eventArgs: IForOfState) => {\n                if (eventArgs.startIndex !== this.columnStartIndex) {\n                    this.columnStartIndex = eventArgs.startIndex;\n                    this.grid.filterCellList.forEach((filterCell) => {\n                        filterCell.updateFilterCellArea();\n                    });\n                }\n                if (this.columnToFocus) {\n                    this.focusFilterCellChip(this.columnToFocus, false);\n                    this.columnToFocus = null;\n                }\n            });\n\n            this.grid.onColumnMovingEnd.pipe(takeUntil(this.destroy$)).subscribe(() => {\n                this.grid.filterCellList.forEach((filterCell) => {\n                    filterCell.updateFilterCellArea();\n                });\n            });\n        }\n    }\n\n    /**\n     * Close filtering row if a column is hidden.\n     */\n    public hideFilteringRowOnColumnVisibilityChange(col: IgxColumnComponent) {\n        const filteringRow = this.grid.filteringRow;\n\n        if (filteringRow && filteringRow.column && filteringRow.column === col) {\n            filteringRow.close();\n        }\n    }\n\n    /**\n     * Internal method to create expressionsTree and filter grid used in both filter modes.\n     */\n    public filterInternal(field: string, expressions: FilteringExpressionsTree | Array<ExpressionUI> = null): void {\n        this.isFiltering = true;\n\n        let expressionsTree;\n        if (expressions instanceof FilteringExpressionsTree) {\n            expressionsTree = expressions;\n        } else {\n            expressionsTree = this.createSimpleFilteringTree(field, expressions);\n        }\n\n        if (expressionsTree.filteringOperands.length === 0) {\n            this.clearFilter(field);\n        } else {\n            this.filter(field, null, expressionsTree);\n        }\n\n        this.isFiltering = false;\n    }\n\n    /**\n     * Execute filtering on the grid.\n     */\n    public filter(field: string, value: any, conditionOrExpressionTree?: IFilteringOperation | IFilteringExpressionsTree,\n        ignoreCase?: boolean) {\n        const col = this.gridAPI.get_column_by_name(field);\n        const filteringIgnoreCase = ignoreCase || (col ? col.filteringIgnoreCase : false);\n\n        if (conditionOrExpressionTree) {\n            this.gridAPI.filter(field, value, conditionOrExpressionTree, filteringIgnoreCase);\n        } else {\n            const expressionsTreeForColumn = this.grid.filteringExpressionsTree.find(field);\n            if (!expressionsTreeForColumn) {\n                throw new Error('Invalid condition or Expression Tree!');\n            } else if (expressionsTreeForColumn instanceof FilteringExpressionsTree) {\n                this.gridAPI.filter(field, value, expressionsTreeForColumn, filteringIgnoreCase);\n            } else {\n                const expressionForColumn = expressionsTreeForColumn as IFilteringExpression;\n                this.gridAPI.filter(field, value, expressionForColumn.condition, filteringIgnoreCase);\n            }\n        }\n\n        // Wait for the change detection to update filtered data through the pipes and then emit the event.\n        requestAnimationFrame(() => this.grid.onFilteringDone.emit(col.filteringExpressionsTree));\n    }\n\n    /**\n     * Clear the filter of a given column.\n     */\n    public clearFilter(field: string): void {\n        if (field) {\n            const column = this.gridAPI.get_column_by_name(field);\n            if (!column) {\n                return;\n            }\n        }\n\n        this.isFiltering = true;\n\n        this.gridAPI.clear_filter(field);\n\n        // Wait for the change detection to update filtered data through the pipes and then emit the event.\n        requestAnimationFrame(() => this.grid.onFilteringDone.emit(null));\n\n        if (field) {\n            const expressions = this.getExpressions(field);\n            expressions.length = 0;\n        }\n\n        this.isFiltering = false;\n    }\n\n    /**\n     * Filters all the `IgxColumnComponent` in the `IgxGridComponent` with the same condition.\n     */\n    public filterGlobal(value: any, condition, ignoreCase?) {\n        this.gridAPI.filter_global(value, condition, ignoreCase);\n\n        // Wait for the change detection to update filtered data through the pipes and then emit the event.\n        requestAnimationFrame(() => this.grid.onFilteringDone.emit(this.grid.filteringExpressionsTree));\n    }\n\n    /**\n     * Register filtering SVG icons in the icon service.\n     */\n    public registerSVGIcons(): void {\n        if (!this._filterIconsRegistered) {\n            for (const icon of icons) {\n                if (!this.iconService.isSvgIconCached(icon.name, FILTERING_ICONS_FONT_SET)) {\n                    this.iconService.addSvgIconFromText(icon.name, icon.value, FILTERING_ICONS_FONT_SET);\n                }\n            }\n            this._filterIconsRegistered = true;\n        }\n    }\n\n    /**\n     * Returns the ExpressionUI array for a given column.\n     */\n    public getExpressions(columnId: string): ExpressionUI[] {\n        if (!this.columnToExpressionsMap.has(columnId)) {\n            const column = this.grid.columns.find((col) => col.field === columnId);\n            const expressionUIs = new Array<ExpressionUI>();\n            if (column) {\n                this.generateExpressionsList(column.filteringExpressionsTree, this.grid.filteringExpressionsTree.operator, expressionUIs);\n                this.columnToExpressionsMap.set(columnId, expressionUIs);\n            }\n            return expressionUIs;\n        }\n\n        return this.columnToExpressionsMap.get(columnId);\n    }\n\n    /**\n     * Recreates all ExpressionUIs for all columns. Executed after filtering to refresh the cache.\n     */\n    public refreshExpressions() {\n        if (!this.isFiltering) {\n            this.columnsWithComplexFilter.clear();\n\n            this.columnToExpressionsMap.forEach((value: ExpressionUI[], key: string) => {\n                const column = this.grid.columns.find((col) => col.field === key);\n                if (column) {\n                    value.length = 0;\n\n                    this.generateExpressionsList(column.filteringExpressionsTree, this.grid.filteringExpressionsTree.operator, value);\n\n                    const isComplex = this.isFilteringTreeComplex(column.filteringExpressionsTree);\n                    if (isComplex) {\n                        this.columnsWithComplexFilter.add(key);\n                    }\n\n                    this.updateFilteringCell(column);\n                } else {\n                    this.columnToExpressionsMap.delete(key);\n                }\n            });\n        }\n    }\n\n    /**\n     * Remove an ExpressionUI for a given column.\n     */\n    public removeExpression(columnId: string, indexToRemove: number) {\n        const expressionsList = this.getExpressions(columnId);\n\n        if (indexToRemove === 0 && expressionsList.length > 1) {\n            expressionsList[1].beforeOperator = null;\n        } else if (indexToRemove === expressionsList.length - 1) {\n            expressionsList[indexToRemove - 1].afterOperator = null;\n        } else {\n            expressionsList[indexToRemove - 1].afterOperator = expressionsList[indexToRemove + 1].beforeOperator;\n            expressionsList[0].beforeOperator = null;\n            expressionsList[expressionsList.length - 1].afterOperator = null;\n        }\n\n        expressionsList.splice(indexToRemove, 1);\n    }\n\n    /**\n     * Generate filtering tree for a given column from existing ExpressionUIs.\n     */\n    public createSimpleFilteringTree(columnId: string, expressionUIList = null): FilteringExpressionsTree {\n        const expressionsList = expressionUIList ? expressionUIList : this.getExpressions(columnId);\n        const expressionsTree = new FilteringExpressionsTree(FilteringLogic.Or, columnId);\n        let currAndBranch: FilteringExpressionsTree;\n        let currExpressionUI: ExpressionUI;\n\n        for (let i = 0; i < expressionsList.length; i++) {\n            currExpressionUI = expressionsList[i];\n\n            if (!currExpressionUI.expression.condition.isUnary && currExpressionUI.expression.searchVal === null) {\n                if (currExpressionUI.afterOperator === FilteringLogic.And && !currAndBranch) {\n                    currAndBranch = new FilteringExpressionsTree(FilteringLogic.And, columnId);\n                    expressionsTree.filteringOperands.push(currAndBranch);\n                }\n                continue;\n            }\n\n            if ((currExpressionUI.beforeOperator === undefined || currExpressionUI.beforeOperator === null ||\n                 currExpressionUI.beforeOperator === FilteringLogic.Or) &&\n                currExpressionUI.afterOperator === FilteringLogic.And) {\n\n                currAndBranch = new FilteringExpressionsTree(FilteringLogic.And, columnId);\n                expressionsTree.filteringOperands.push(currAndBranch);\n                currAndBranch.filteringOperands.push(currExpressionUI.expression);\n\n            } else if (currExpressionUI.beforeOperator === FilteringLogic.And) {\n                currAndBranch.filteringOperands.push(currExpressionUI.expression);\n            } else {\n                expressionsTree.filteringOperands.push(currExpressionUI.expression);\n                currAndBranch = null;\n            }\n        }\n\n        return expressionsTree;\n    }\n\n    /**\n     * Returns whether a complex filter is applied to a given column.\n     */\n    public isFilterComplex(columnId: string) {\n        if (this.columnsWithComplexFilter.has(columnId)) {\n            return true;\n        }\n\n        const column = this.grid.columns.find((col) => col.field === columnId);\n        const isComplex = column && this.isFilteringTreeComplex(column.filteringExpressionsTree);\n        if (isComplex) {\n            this.columnsWithComplexFilter.add(columnId);\n        }\n\n        return isComplex;\n    }\n\n    /**\n     * Returns the string representation of the FilteringLogic operator.\n     */\n    public getOperatorAsString(operator: FilteringLogic): any {\n        if (operator === 0) {\n            return this.grid.resourceStrings.igx_grid_filter_operator_and;\n        } else {\n            return this.grid.resourceStrings.igx_grid_filter_operator_or;\n        }\n    }\n\n    /**\n     * Generate the label of a chip from a given filtering expression.\n     */\n    public getChipLabel(expression: IFilteringExpression): any {\n        if (expression.condition.isUnary) {\n            return this.grid.resourceStrings[`igx_grid_filter_${expression.condition.name}`] || expression.condition.name;\n        } else if (expression.searchVal instanceof Date) {\n            return this.datePipe.transform(expression.searchVal, this.grid.locale);\n        } else {\n            return expression.searchVal;\n        }\n    }\n\n    /**\n     * Updates the content of a filterCell.\n     */\n    public updateFilteringCell(column: IgxColumnComponent) {\n        const filterCell = column.filterCell;\n        if (filterCell) {\n            filterCell.updateFilterCellArea();\n        }\n    }\n\n    /**\n     * Focus a chip in a filterCell.\n     */\n    public focusFilterCellChip(column: IgxColumnComponent, focusFirst: boolean) {\n        const filterCell = column.filterCell;\n        if (filterCell) {\n            filterCell.focusChip(focusFirst);\n        }\n    }\n\n    /**\n     * Focus the close button in the filtering row.\n     */\n    public focusFilterRowCloseButton() {\n        this.grid.filteringRow.closeButton.nativeElement.focus();\n    }\n\n    public get filteredData() {\n        return this.grid.filteredData;\n    }\n\n    /**\n     * Scrolls to a filterCell.\n     */\n    public scrollToFilterCell(column: IgxColumnComponent, shouldFocusNext: boolean) {\n        this.grid.nativeElement.focus({preventScroll: true});\n        this.columnToFocus = column;\n        this.shouldFocusNext = shouldFocusNext;\n\n        let currentColumnRight = 0;\n        let currentColumnLeft = 0;\n        for (let index = 0; index < this.unpinnedColumns.length; index++) {\n            currentColumnRight += parseInt(this.unpinnedColumns[index].width, 10);\n            if (this.unpinnedColumns[index] === column) {\n                currentColumnLeft = currentColumnRight - parseInt(this.unpinnedColumns[index].width, 10);\n                break;\n            }\n        }\n\n        const forOfDir = this.grid.headerContainer;\n        const width = this.displayContainerWidth + this.displayContainerScrollLeft;\n        if (shouldFocusNext) {\n            forOfDir.scrollPosition += currentColumnRight - width;\n        } else {\n            forOfDir.scrollPosition = currentColumnLeft;\n        }\n    }\n\n    private isFilteringTreeComplex(expressions: IFilteringExpressionsTree | IFilteringExpression): boolean {\n        if (!expressions) {\n            return false;\n        }\n\n        if (expressions instanceof FilteringExpressionsTree) {\n            const expressionsTree = expressions as FilteringExpressionsTree;\n            if (expressionsTree.operator === FilteringLogic.Or) {\n                const andOperatorsCount = this.getChildAndOperatorsCount(expressionsTree);\n\n                // having more that 'And' and operator in the sub-tree means that the filter could not be represented without parentheses.\n                return andOperatorsCount > 1;\n            }\n\n            let isComplex = false;\n            for (let i = 0; i < expressionsTree.filteringOperands.length; i++) {\n                isComplex = isComplex || this.isFilteringTreeComplex(expressionsTree.filteringOperands[i]);\n            }\n\n            return isComplex;\n        }\n\n        return false;\n    }\n\n    private getChildAndOperatorsCount(expressions: IFilteringExpressionsTree): number {\n        let count = 0;\n        let operand;\n        for (let i = 0; i < expressions.filteringOperands.length; i++) {\n            operand = expressions[i];\n            if (operand instanceof FilteringExpressionsTree) {\n                if (operand.operator === FilteringLogic.And) {\n                    count++;\n                }\n\n                count = count + this.getChildAndOperatorsCount(operand);\n            }\n        }\n\n        return count;\n    }\n\n    public generateExpressionsList(expressions: IFilteringExpressionsTree | IFilteringExpression,\n        operator: FilteringLogic,\n        expressionsUIs: ExpressionUI[]): void {\n        this.generateExpressionsListRecursive(expressions, operator, expressionsUIs);\n\n        // The beforeOperator of the first expression and the afterOperator of the last expression should be null\n        if (expressionsUIs.length) {\n            expressionsUIs[expressionsUIs.length - 1].afterOperator = null;\n        }\n    }\n\n    private generateExpressionsListRecursive(expressions: IFilteringExpressionsTree | IFilteringExpression,\n                                    operator: FilteringLogic,\n                                    expressionsUIs: ExpressionUI[]): void {\n        if (!expressions) {\n            return;\n        }\n\n        if (expressions instanceof FilteringExpressionsTree) {\n            const expressionsTree = expressions as FilteringExpressionsTree;\n            for (let i = 0; i < expressionsTree.filteringOperands.length; i++) {\n                this.generateExpressionsListRecursive(expressionsTree.filteringOperands[i], expressionsTree.operator, expressionsUIs);\n            }\n            if (expressionsUIs.length) {\n                expressionsUIs[expressionsUIs.length - 1].afterOperator = operator;\n            }\n        } else {\n            const exprUI = new ExpressionUI();\n            exprUI.expression = expressions as IFilteringExpression;\n            exprUI.afterOperator = operator;\n\n            const prevExprUI = expressionsUIs[expressionsUIs.length - 1];\n            if (prevExprUI) {\n                exprUI.beforeOperator = prevExprUI.afterOperator;\n            }\n\n            expressionsUIs.push(exprUI);\n        }\n    }\n\n    public isFilteringExpressionsTreeEmpty(expressionTree: IFilteringExpressionsTree): boolean {\n        if (FilteringExpressionsTree.empty(expressionTree)) {\n            return true;\n        }\n\n        let expr: any;\n\n        for (let i = 0; i < expressionTree.filteringOperands.length; i++) {\n            expr = expressionTree.filteringOperands[i];\n\n            if ((expr instanceof FilteringExpressionsTree)) {\n                const exprTree = expr as FilteringExpressionsTree;\n                if (exprTree.filteringOperands && exprTree.filteringOperands.length) {\n                    return false;\n                }\n            } else {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n","import { Injectable, NgZone } from '@angular/core';\nimport { IgxColumnComponent } from '../columns/column.component';\n\n/**\n * @hidden\n * @internal\n */\n@Injectable()\nexport class IgxColumnResizingService {\n\n    private pinnedMaxWidth: string;\n\n    /**\n     *@hidden\n     */\n    public startResizePos: number;\n    /**\n     * Indicates that a column is currently being resized.\n     */\n    public isColumnResizing: boolean;\n    /**\n     *@hidden\n     */\n    public resizeCursor: string = null;\n    /**\n     *@hidden\n     */\n    public showResizer = false;\n    /**\n     * The column being resized.\n     */\n    public column: IgxColumnComponent;\n\n    constructor(private zone: NgZone) { }\n\n    /**\n     *@hidden\n     */\n    get resizerHeight(): number {\n        let height = this.column.grid.getVisibleContentHeight();\n\n        // Column height multiplier in case there are Column Layouts. The resizer height need to take into account rowStart.\n        let columnHeightMultiplier = 1;\n        if (this.column.columnLayoutChild) {\n            columnHeightMultiplier = this.column.grid.multiRowLayoutRowSize - this.column.rowStart + 1;\n        }\n\n        if (this.column.level !== 0) {\n            height -= this.column.topLevelParent.headerGroup.height - this.column.headerGroup.height * columnHeightMultiplier;\n        }\n\n        return height;\n    }\n\n    /**\n     * Returns the minimal possible width to which the column can be resized.\n     */\n    get restrictResizeMin(): number {\n        const actualMinWidth = parseFloat(this.column.minWidth);\n        const minWidth = actualMinWidth < parseFloat(this.column.width) ? actualMinWidth : parseFloat(this.column.width);\n\n        return this.column.headerCell.elementRef.nativeElement.getBoundingClientRect().width - minWidth;\n    }\n\n    /**\n     * Returns the maximal possible width to which the column can be resized.\n     */\n    get restrictResizeMax(): number {\n        const actualWidth = this.column.headerCell.elementRef.nativeElement.getBoundingClientRect().width;\n        if (this.column.maxWidth) {\n            return parseFloat(this.column.maxWidth) - actualWidth;\n        } else {\n            return Number.MAX_SAFE_INTEGER;\n        }\n    }\n\n    /**\n     * Autosizes the column to the longest currently visible cell value, including the header cell.\n     * If the column has a predifined maxWidth and the autosized column width will become bigger than it,\n     * then the column is sized to its maxWidth.\n     * If the column is pinned and the autosized column width will cause the pinned area to become bigger\n     * than the maximum allowed pinned area width (80% of the total grid width), autosizing will be deismissed.\n     */\n    public autosizeColumnOnDblClick() {\n        const currentColWidth = this.column.headerCell.elementRef.nativeElement.getBoundingClientRect().width;\n\n        const size = this.column.getLargestCellWidth();\n        if (this.column.maxWidth && (parseFloat(size) > parseFloat(this.column.maxWidth))) {\n            this.column.width = parseFloat(this.column.maxWidth) + 'px';\n        } else if (parseFloat(size) < parseFloat(this.column.minWidth)) {\n            this.column.width = parseFloat(this.column.minWidth) + 'px';\n        } else {\n            this.column.width = size;\n        }\n\n        this.zone.run(() => {});\n\n        this.column.grid.onColumnResized.emit({\n            column: this.column,\n            prevWidth: currentColWidth.toString(),\n            newWidth: this.column.width\n        });\n    }\n\n    /**\n     * Resizes the column regaridng to the column minWidth and maxWidth.\n     */\n    public resizeColumn(event: MouseEvent) {\n        this.showResizer = false;\n        const diff = event.clientX - this.startResizePos;\n\n        let currentColWidth = parseFloat(this.column.width);\n        const actualWidth = this.column.headerCell.elementRef.nativeElement.getBoundingClientRect().width;\n        currentColWidth = Number.isNaN(currentColWidth) || (currentColWidth < actualWidth) ? actualWidth : currentColWidth;\n\n        const colMinWidth = this.getColMinWidth(this.column);\n        const colMaxWidth = this.getColMaxWidth(this.column);\n        if (this.column.grid.hasColumnLayouts) {\n            this.resizeColumnLayoutFor(this.column, diff);\n        } else {\n            if (currentColWidth + diff < colMinWidth) {\n                this.column.width = colMinWidth + 'px';\n            } else if (colMaxWidth && (currentColWidth + diff > colMaxWidth)) {\n                this.column.width = colMaxWidth + 'px';\n            } else {\n                this.column.width = (currentColWidth + diff) + 'px';\n            }\n        }\n\n        this.zone.run(() => {});\n\n        if (currentColWidth !== parseFloat(this.column.width)) {\n            this.column.grid.onColumnResized.emit({\n                column: this.column,\n                prevWidth: currentColWidth.toString(),\n                newWidth: this.column.width\n            });\n        }\n\n        this.isColumnResizing = false;\n    }\n\n    protected getColMinWidth(column: IgxColumnComponent) {\n        let currentColWidth = parseFloat(column.width);\n        const actualWidth = column.headerCell.elementRef.nativeElement.getBoundingClientRect().width;\n        currentColWidth = Number.isNaN(currentColWidth) || (currentColWidth < actualWidth) ? actualWidth : currentColWidth;\n\n        const actualMinWidth = parseFloat(column.minWidth);\n        return actualMinWidth < currentColWidth ? actualMinWidth : currentColWidth;\n    }\n\n    protected getColMaxWidth(column: IgxColumnComponent) {\n        return column.pinned ? parseFloat(this.pinnedMaxWidth) : parseFloat(column.maxWidth);\n    }\n\n    protected resizeColumnLayoutFor(column: IgxColumnComponent, diff: number) {\n        const relativeColumns = column.getResizableColUnderEnd();\n        const combinedSpan = relativeColumns.reduce((acc, col) =>  acc + col.spanUsed, 0);\n\n        // Resize first those who might reach min/max width\n        let columnsToResize = [...relativeColumns];\n        let updatedDiff = diff;\n        let updatedCombinedSpan = combinedSpan;\n        let setMinMaxCols = false;\n        do {\n            // Cycle them until there are not ones that reach min/max size, because the diff accumulates after each cycle.\n            // This is because we can have at first 2 cols reaching min width and then after\n            // recalculating the diff there might be 1 more that reaches min width.\n            setMinMaxCols = false;\n            let newCombinedSpan = updatedCombinedSpan;\n            const newColsToResize = [];\n            columnsToResize.forEach((col) => {\n                const currentResizeWidth = parseFloat(col.target.calcWidth);\n                const resizeScaled = (diff / updatedCombinedSpan) * col.target.gridColumnSpan;\n\n                const minWidth = this.getColMinWidth(col.target);\n                const maxWidth = this.getColMaxWidth(col.target);\n                if (currentResizeWidth + resizeScaled < minWidth) {\n                    col.target.width = minWidth + 'px';\n                    updatedDiff += (currentResizeWidth - minWidth);\n                    newCombinedSpan -= col.spanUsed;\n                    setMinMaxCols = true;\n                } else if (maxWidth && (currentResizeWidth + resizeScaled > maxWidth)) {\n                    col.target.width = maxWidth + 'px';\n                    updatedDiff -= (maxWidth - currentResizeWidth);\n                    newCombinedSpan -= col.spanUsed;\n                    setMinMaxCols = true;\n                } else {\n                    // Save new ones that can be resized\n                    newColsToResize.push(col);\n                }\n            });\n\n            updatedCombinedSpan = newCombinedSpan;\n            columnsToResize = newColsToResize;\n        } while (setMinMaxCols);\n\n        // Those left that don't reach min/max size resize them normally.\n        columnsToResize.forEach((col) => {\n            const currentResizeWidth = parseFloat(col.target.calcWidth);\n            const resizeScaled = (updatedDiff / updatedCombinedSpan) * col.target.gridColumnSpan;\n            col.target.width = (currentResizeWidth + resizeScaled) + 'px';\n        });\n    }\n}\n","import { Directive, Input, Output, EventEmitter, ElementRef, OnDestroy, NgZone, OnInit } from '@angular/core';\nimport { interval, Observable, Subscription, Subject } from 'rxjs';\nimport { filter, takeUntil } from 'rxjs/operators';\n\nexport enum DragScrollDirection {\n    NONE,\n    LEFT,\n    TOP,\n    RIGHT,\n    BOTTOM,\n    TOPLEFT,\n    TOPRIGHT,\n    BOTTOMLEFT,\n    BOTTOMRIGHT\n}\n\n\n@Directive({\n    selector: '[igxGridDragSelect]'\n})\nexport class IgxGridDragSelectDirective implements OnInit, OnDestroy {\n    _activeDrag: boolean;\n\n    @Input('igxGridDragSelect')\n    get activeDrag(): boolean {\n        return this._activeDrag;\n    }\n\n    set activeDrag(val: boolean) {\n        if (val !== this._activeDrag) {\n            this.unsubscribe();\n            this._activeDrag = val;\n        }\n    }\n\n    @Output()\n    onDragStop = new EventEmitter<boolean>();\n\n    @Output()\n    onDragScroll = new EventEmitter<DragScrollDirection>();\n\n    get nativeElement(): HTMLElement {\n        return this.ref.nativeElement;\n    }\n\n    get clientRect(): ClientRect {\n        return this.nativeElement.getBoundingClientRect();\n    }\n\n    protected end$ = new Subject<any>();\n    protected lastDirection = DragScrollDirection.NONE;\n    protected _interval$: Observable<any>;\n    protected _sub: Subscription;\n\n    constructor(private ref: ElementRef, private zone: NgZone) {\n        this._interval$ = interval(100).pipe(\n            takeUntil(this.end$),\n            filter(() => this.activeDrag)\n        );\n    }\n\n    ngOnInit() {\n        this.zone.runOutsideAngular(() => {\n            this.nativeElement.addEventListener('pointerover', this.startDragSelection);\n            this.nativeElement.addEventListener('pointerleave', this.stopDragSelection);\n        });\n    }\n\n    ngOnDestroy() {\n        this.zone.runOutsideAngular(() => {\n            this.nativeElement.removeEventListener('pointerover', this.startDragSelection);\n            this.nativeElement.removeEventListener('pointerleave', this.stopDragSelection);\n        });\n        this.unsubscribe();\n        this.end$.complete();\n    }\n\n\n    startDragSelection = (ev: PointerEvent) => {\n        if (!this.activeDrag) {\n            return;\n        }\n        const x = ev.clientX;\n        const y = ev.clientY;\n        const direction = this._measureDimensions(x, y);\n        if (direction === this.lastDirection) {\n            return;\n        }\n        this.unsubscribe();\n        this._sub = this._interval$.subscribe(() => this.onDragScroll.emit(direction));\n        this.lastDirection = direction;\n    }\n\n    stopDragSelection = () => {\n        if (!this.activeDrag) {\n            return;\n        }\n        this.onDragStop.emit(false);\n        this.unsubscribe();\n        this.lastDirection = DragScrollDirection.NONE;\n    }\n\n    _measureDimensions(x: number, y: number): DragScrollDirection {\n        let direction: DragScrollDirection;\n\n        const rect = this.clientRect;\n        const RATIO = 0.15;\n        const offsetX = Math.trunc(x - rect.left);\n        const offsetY = Math.trunc(y - rect.top);\n\n        const left = offsetX <= rect.width * RATIO;\n        const right = offsetX >= rect.width * (1 - RATIO);\n        const top = offsetY <= rect.height * RATIO;\n        const bottom = offsetY >= rect.height * (1 - RATIO);\n\n        if (top && left) {\n            direction = DragScrollDirection.TOPLEFT;\n        } else if (top && right) {\n            direction = DragScrollDirection.TOPRIGHT;\n        } else if (bottom && left) {\n            direction = DragScrollDirection.BOTTOMLEFT;\n        } else if (bottom && right) {\n            direction = DragScrollDirection.BOTTOMRIGHT;\n        } else if (top) {\n            direction = DragScrollDirection.TOP;\n        } else if (bottom) {\n            direction = DragScrollDirection.BOTTOM;\n        } else if (left) {\n            direction = DragScrollDirection.LEFT;\n        } else if (right) {\n            direction = DragScrollDirection.RIGHT;\n        } else {\n            direction = DragScrollDirection.NONE;\n        }\n\n        return direction;\n\n    }\n\n    protected unsubscribe() {\n        if (this._sub) {\n            this._sub.unsubscribe();\n        }\n    }\n}\n","\nimport {\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Input,\n    Renderer2,\n    ViewChild\n} from '@angular/core';\n\nimport {\n    IgxListPanState,\n    IListChild,\n    IgxListBaseDirective\n} from './list.common';\n\nimport { HammerGesturesManager } from '../core/touch';\n\n/**\n * The Ignite UI List Item component is a container intended for row items in the Ignite UI for Angular List component.\n *\n * Example:\n * ```html\n * <igx-list>\n *   <igx-list-item isHeader=\"true\">Contacts</igx-list-item>\n *   <igx-list-item *ngFor=\"let contact of contacts\">\n *     <span class=\"name\">{{ contact.name }}</span>\n *     <span class=\"phone\">{{ contact.phone }}</span>\n *   </igx-list-item>\n * </igx-list>\n * ```\n */\n@Component({\n    providers: [HammerGesturesManager],\n    selector: 'igx-list-item',\n    templateUrl: 'list-item.component.html',\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class IgxListItemComponent implements IListChild {\n\n    /**\n     *@hidden\n     */\n    private _panState: IgxListPanState = IgxListPanState.NONE;\n\n    /**\n     *@hidden\n     */\n    private panOffset = 0;\n\n    /**\n     * @hidden\n     */\n    private _index: number = null;\n\n    /**\n     *@hidden\n     */\n    private lastPanDir = IgxListPanState.NONE;\n\n    /**\n     * Provides a reference to the template's base element shown when left panning a list item.\n     * ```typescript\n     * const leftPanTmpl = this.listItem.leftPanningTemplateElement;\n     * ```\n     */\n    @ViewChild('leftPanningTmpl')\n    public leftPanningTemplateElement;\n\n    /**\n     * Provides a reference to the template's base element shown when right panning a list item.\n     * ```typescript\n     * const rightPanTmpl = this.listItem.rightPanningTemplateElement;\n     * ```\n     */\n    @ViewChild('rightPanningTmpl')\n    public rightPanningTemplateElement;\n\n    constructor(\n        public list: IgxListBaseDirective,\n        private elementRef: ElementRef,\n        private _renderer: Renderer2) {\n    }\n\n    /**\n     * Sets/gets whether the `list item` is a header.\n     * ```html\n     * <igx-list-item [isHeader] = \"true\">Header</igx-list-item>\n     * ```\n     * ```typescript\n     * let isHeader =  this.listItem.isHeader;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    @Input()\n    public isHeader: boolean;\n\n    /**\n     * Sets/gets whether the `list item` is hidden.\n     * By default the `hidden` value is `false`.\n     * ```html\n     * <igx-list-item [hidden] = \"true\">Hidden Item</igx-list-item>\n     * ```\n     * ```typescript\n     * let isHidden =  this.listItem.hidden;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    @Input()\n    public hidden = false;\n\n    /**\n     * Gets the `role` attribute of the `list item`.\n     * ```typescript\n     * let itemRole =  this.listItem.role;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    @HostBinding('attr.role')\n    public get role() {\n        return this.isHeader ? 'separator' : 'listitem';\n    }\n\n    /**\n     * Sets/gets the `aria-label` attribute of the `list item`.\n     * ```typescript\n     * this.listItem.ariaLabel = \"Item1\";\n     * ```\n     * ```typescript\n     * let itemAriaLabel = this.listItem.ariaLabel;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    @HostBinding('attr.aria-label')\n    public ariaLabel: string;\n\n    /**\n     * Gets the `touch-action` style of the `list item`.\n     * ```typescript\n     * let touchAction = this.listItem.touchAction;\n     * ```\n     */\n    @HostBinding('style.touch-action')\n    public touchAction = 'pan-y';\n\n    /**\n     * Indicates whether `list item` should have header style.\n     * ```typescript\n     * let headerStyle =  this.listItem.headerStyle;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    @HostBinding('class.igx-list__header')\n    get headerStyle(): boolean {\n        return this.isHeader;\n    }\n\n    /**\n     * Applies the inner style of the `list item` if the item is not counted as header.\n     * ```typescript\n     * let innerStyle =  this.listItem.innerStyle;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    @HostBinding('class.igx-list__item-base')\n    get innerStyle(): boolean {\n        return !this.isHeader;\n    }\n\n    /**\n     * Returns string value which describes the display mode of the `list item`.\n     * ```typescript\n     * let isHidden = this.listItem.display;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    @HostBinding('style.display')\n    get display(): string {\n        return this.hidden ? 'none' : '';\n    }\n\n    /**\n     *@hidden\n     */\n    @HostListener('click', ['$event'])\n    clicked(evt) {\n        this.list.onItemClicked.emit({ item: this, event: evt, direction: this.lastPanDir });\n        this.lastPanDir = IgxListPanState.NONE;\n    }\n\n    /**\n     *@hidden\n     */\n    @HostListener('panstart', ['$event'])\n    panStart(ev) {\n        if (this.isTrue(this.isHeader)) {\n            return;\n        }\n        if (!this.isTrue(this.list.allowLeftPanning) && !this.isTrue(this.list.allowRightPanning)) {\n            return;\n        }\n    }\n\n    /**\n     *@hidden\n     */\n    @HostListener('panmove', ['$event'])\n    panMove(ev) {\n        if (this.isTrue(this.isHeader)) {\n            return;\n        }\n        if (!this.isTrue(this.list.allowLeftPanning) && !this.isTrue(this.list.allowRightPanning)) {\n            return;\n        }\n        const isPanningToLeft = ev.deltaX < 0;\n        if (isPanningToLeft && this.isTrue(this.list.allowLeftPanning)) {\n            this.showLeftPanTemplate();\n            this.setContentElementLeft(Math.max(this.maxLeft, ev.deltaX));\n        } else if (!isPanningToLeft && this.isTrue(this.list.allowRightPanning)) {\n            this.showRightPanTemplate();\n            this.setContentElementLeft(Math.min(this.maxRight, ev.deltaX));\n        }\n    }\n\n    /**\n     *@hidden\n     */\n    @HostListener('panend', ['$event'])\n    panEnd(ev) {\n        if (this.isTrue(this.isHeader)) {\n            return;\n        }\n        if (!this.isTrue(this.list.allowLeftPanning) && !this.isTrue(this.list.allowRightPanning)) {\n            return;\n        }\n\n        // the translation offset of the current list item content\n        const relativeOffset = this.panOffset;\n        const widthTriggeringGrip = this.width * this.list.panEndTriggeringThreshold;\n\n        if (relativeOffset === 0) {\n            return; // no panning has occured\n        }\n\n        const dir = relativeOffset > 0 ? IgxListPanState.RIGHT : IgxListPanState.LEFT;\n        this.lastPanDir = dir;\n\n        const oldPanState = this._panState;\n        if (Math.abs(relativeOffset) < widthTriggeringGrip) {\n            this.setContentElementLeft(0);\n            this._panState = IgxListPanState.NONE;\n            this.hideLeftAndRightPanTemplates();\n            return;\n        }\n\n        const args = { item: this, direction: dir, keepItem: false};\n\n        if (dir === IgxListPanState.LEFT) {\n            this.list.onLeftPan.emit(args);\n        } else {\n            this.list.onRightPan.emit(args);\n        }\n\n        if (args.keepItem === true) {\n            this.setContentElementLeft(0);\n            this._panState = IgxListPanState.NONE;\n        } else {\n            if (dir === IgxListPanState.LEFT) {\n                this.setContentElementLeft(this.maxLeft);\n                this._panState = IgxListPanState.LEFT;\n            } else {\n                this.setContentElementLeft(this.maxRight);\n                this._panState = IgxListPanState.RIGHT;\n            }\n        }\n\n        if (oldPanState !== this._panState) {\n            const args2 = { oldState: oldPanState, newState: this._panState, item: this };\n            this.list.onPanStateChange.emit(args2);\n        }\n        this.hideLeftAndRightPanTemplates();\n    }\n\n    /**\n     *@hidden\n     */\n    private showLeftPanTemplate() {\n        this.setLeftAndRightTemplatesVisibility('visible', 'hidden');\n    }\n\n    /**\n     *@hidden\n     */\n    private showRightPanTemplate() {\n        this.setLeftAndRightTemplatesVisibility('hidden', 'visible');\n    }\n\n    /**\n     *@hidden\n     */\n    private hideLeftAndRightPanTemplates() {\n        setTimeout(() => {\n            this.setLeftAndRightTemplatesVisibility('hidden', 'hidden');\n        }, 500);\n    }\n\n    /**\n     *@hidden\n     */\n    private setLeftAndRightTemplatesVisibility(leftVisibility, rightVisibility) {\n        if (this.leftPanningTemplateElement && this.leftPanningTemplateElement.nativeElement) {\n            this.leftPanningTemplateElement.nativeElement.style.visibility = leftVisibility;\n        }\n        if (this.rightPanningTemplateElement && this.rightPanningTemplateElement.nativeElement) {\n            this.rightPanningTemplateElement.nativeElement.style.visibility = rightVisibility;\n        }\n    }\n\n    /**\n     * Gets the `panState` of a `list item`.\n     * ```typescript\n     * let itemPanState =  this.listItem.panState;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    public get panState(): IgxListPanState {\n        return this._panState;\n    }\n\n    /**\n     * Gets the `index` of a `list item`.\n     * ```typescript\n     * let itemIndex =  this.listItem.index;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    @Input()\n    public get index(): number {\n        return this._index !== null ? this._index : this.list.children.toArray().indexOf(this);\n    }\n\n    /**\n     * Sets the `index` of the `list item`.\n     * ```typescript\n     * this.listItem.index = index;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    public set index(value: number) {\n        this._index = value;\n    }\n\n    /**\n     * Returns an element reference to the list item.\n     * ```typescript\n     * let listItemElement =  this.listItem.element.\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    public get element() {\n        return this.elementRef.nativeElement;\n    }\n\n    /**\n     * Returns a reference container which contains the list item's content.\n     * ```typescript\n     * let listItemContainer =  this.listItem.contentElement.\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    public get contentElement() {\n        const candidates = this.element.getElementsByClassName('igx-list__item-content');\n        return (candidates && candidates.length > 0) ? candidates[0] : null;\n    }\n\n    /**\n     * Returns the `context` object which represents the `template context` binding into the `list item container`\n     * by providing the `$implicit` declaration which is the `IgxListItemComponent` itself.\n     * ```typescript\n     * let listItemComponent = this.listItem.context;\n     * ```\n     */\n    public get context(): any {\n        return {\n            $implicit: this\n        };\n    }\n\n    /**\n     * Gets the width of a `list item`.\n     * ```typescript\n     * let itemWidth = this.listItem.width;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    public get width() {\n        if (this.element) {\n            return this.element.offsetWidth;\n        }\n    }\n\n    /**\n     * Gets the maximum left position of the `list item`.\n     * ```typescript\n     * let maxLeft = this.listItem.maxLeft;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    public get maxLeft() {\n        return -this.width;\n    }\n\n    /**\n     * Gets the maximum right position of the `list item`.\n     * ```typescript\n     * let maxRight = this.listItem.maxRight;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    public get maxRight() {\n        return this.width;\n    }\n\n    /**\n     *@hidden\n     */\n    private setContentElementLeft(value: number) {\n        this.panOffset = value;\n        this.contentElement.style.transform = 'translateX(' + value + 'px)';\n    }\n\n    /**\n     *@hidden\n     */\n    private isTrue(value: boolean): boolean {\n        if (typeof (value) === 'boolean') {\n            return value;\n        } else {\n            return value === 'true';\n        }\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    Component,\n    ContentChild,\n    ContentChildren,\n    ElementRef,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    Input,\n    NgModule,\n    Output,\n    QueryList,\n    TemplateRef,\n    ViewChild,\n    Optional,\n    Inject, Directive\n} from '@angular/core';\n\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\n\nimport { IgxListItemComponent } from './list-item.component';\nimport {\n    IgxListBaseDirective,\n    IgxDataLoadingTemplateDirective,\n    IgxEmptyListTemplateDirective,\n    IgxListPanState,\n    IgxListItemLeftPanningTemplateDirective,\n    IgxListItemRightPanningTemplateDirective\n} from './list.common';\nimport { IDisplayDensityOptions, DisplayDensityToken, DisplayDensity } from '../core/density';\nimport { IBaseEventArgs } from '../core/utils';\n\nlet NEXT_ID = 0;\n\n/**\n * Interface for the panStateChange igxList event arguments\n */\nexport interface IPanStateChangeEventArgs extends IBaseEventArgs {\n    oldState: IgxListPanState;\n    newState: IgxListPanState;\n    item: IgxListItemComponent;\n}\n\n/**\n * Interface for the listItemClick igxList event arguments\n */\nexport interface IListItemClickEventArgs extends IBaseEventArgs {\n    item: IgxListItemComponent;\n    event: Event;\n    direction: IgxListPanState;\n}\n\n/**\n * Interface for the listItemPanning igxList event arguments\n */\nexport interface IListItemPanningEventArgs extends IBaseEventArgs {\n    item: IgxListItemComponent;\n    direction: IgxListPanState;\n    keepItem: boolean;\n}\n\n/**\n * igxListThumbnail is container for the List media\n * Use it to wrap anything you want to be used as a thumbnail.\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: '[igxListThumbnail]'\n})\nexport class IgxListThumbnailDirective {}\n\n/**\n * igxListAction is container for the List action\n * Use it to wrap anything you want to be used as a list action: icon, checkbox...\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: '[igxListAction]'\n})\nexport class IgxListActionDirective {}\n\n/**\n * igxListLine is container for the List text content\n * Use it to wrap anything you want to be used as a plane text.\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: '[igxListLine]'\n})\nexport class IgxListLineDirective {}\n\n/**\n * igxListLineTitle is a directive that add class to the target element\n * Use it to make anything to look like list Title.\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: '[igxListLineTitle]'\n})\nexport class IgxListLineTitleDirective {\n    @HostBinding('class.igx-list__item-line-title')\n    public cssClass = 'igx-list__item-line-title';\n}\n\n/**\n * igxListLineSubTitle is a directive that add class to the target element\n * Use it to make anything to look like list Subtitle.\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: '[igxListLineSubTitle]'\n})\nexport class IgxListLineSubTitleDirective {\n    @HostBinding('class.igx-list__item-line-subtitle')\n    public cssClass = 'igx-list__item-line-subtitle';\n}\n\n/**\n * Displays a collection of data items in a templatable list format\n *\n * @igxModule IgxListModule\n *\n * @igxTheme igx-list-theme\n *\n * @igxKeywords list, data\n *\n * @igxGroup Grids & Lists\n *\n * @remarks\n * The Ignite UI List displays rows of items and supports one or more header items as well as search and filtering\n * of list items. Each list item is completely templatable and will support any valid HTML or Angular component.\n *\n * @example\n * ```html\n * <igx-list>\n *   <igx-list-item isHeader=\"true\">Contacts</igx-list-item>\n *   <igx-list-item *ngFor=\"let contact of contacts\">\n *     <span class=\"name\">{{ contact.name }}</span>\n *     <span class=\"phone\">{{ contact.phone }}</span>\n *   </igx-list-item>\n * </igx-list>\n * ```\n */\n@Component({\n    selector: 'igx-list',\n    templateUrl: 'list.component.html',\n    providers: [{ provide: IgxListBaseDirective, useExisting: IgxListComponent }]\n})\nexport class IgxListComponent extends IgxListBaseDirective {\n\n    constructor(public element: ElementRef,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n        super(_displayDensityOptions);\n    }\n\n    /**\n     * Returns a collection of all items and headers in the list.\n     *\n     * @example\n     * ```typescript\n     * let listChildren: QueryList = this.list.children;\n     * ```\n     */\n    @ContentChildren(forwardRef(() => IgxListItemComponent), { descendants: true })\n    public children: QueryList<IgxListItemComponent>;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected get sortedChildren(): IgxListItemComponent[] {\n        if (this.children !== undefined) {\n            return this.children.toArray()\n                .sort((a: IgxListItemComponent, b: IgxListItemComponent) => {\n                    return a.index - b.index;\n                });\n        }\n        return null;\n    }\n\n    /**\n     * Sets/gets the empty list template.\n     *\n     * @remarks\n     * This template is used by IgxList in case there are no list items\n     * defined and `isLoading` is set to `false`.\n     *\n     * @example\n     * ```html\n     * <igx-list>\n     *   <ng-template igxEmptyList>\n     *     <p class=\"empty\">No contacts! :(</p>\n     *   </ng-template>\n     * </igx-list>\n     * ```\n     * ```typescript\n     * let emptyTemplate = this.list.emptyListTemplate;\n     * ```\n     */\n    @ContentChild(IgxEmptyListTemplateDirective, { read: IgxEmptyListTemplateDirective })\n    public emptyListTemplate: IgxEmptyListTemplateDirective;\n\n    /**\n     * Sets/gets the list loading template.\n     *\n     * @remarks\n     * This template is used by IgxList in case there are no list items defined and `isLoading` is set to `true`.\n     *\n     * @example\n     * ```html\n     * <igx-list>\n     *   <ng-template igxDataLoading>\n     *     <p>Patience, we are currently loading your data...</p>\n     *   </ng-template>\n     * </igx-list>\n     * ```\n     * ```typescript\n     * let loadingTemplate = this.list.dataLoadingTemplate;\n     * ```\n     */\n    @ContentChild(IgxDataLoadingTemplateDirective, { read: IgxDataLoadingTemplateDirective })\n    public dataLoadingTemplate: IgxDataLoadingTemplateDirective;\n\n    /**\n     * Sets/gets the template for left panning a list item.\n     *\n     * @remarks\n     * Default value is `null`.\n     *\n     * @example\n     * ```html\n     * <igx-list [allowLeftPanning]=\"true\">\n     *   <ng-template igxListItemLeftPanning>\n     *     <igx-icon>delete</igx-icon>Delete\n     *   </ng-template>\n     * </igx-list>\n     * ```\n     * ```typescript\n     * let itemLeftPanTmpl = this.list.listItemLeftPanningTemplate;\n     * ```\n     */\n    @ContentChild(IgxListItemLeftPanningTemplateDirective, { read: IgxListItemLeftPanningTemplateDirective })\n    public listItemLeftPanningTemplate: IgxListItemLeftPanningTemplateDirective;\n\n    /**\n     * Sets/gets the template for right panning a list item.\n     *\n     * @remarks\n     * Default value is `null`.\n     *\n     * @example\n     * ```html\n     * <igx-list [allowRightPanning] = \"true\">\n     *   <ng-template igxListItemRightPanning>\n     *     <igx-icon>call</igx-icon>Dial\n     *   </ng-template>\n     * </igx-list>\n     * ```\n     * ```typescript\n     * let itemRightPanTmpl = this.list.listItemRightPanningTemplate;\n     * ```\n     */\n    @ContentChild(IgxListItemRightPanningTemplateDirective, { read: IgxListItemRightPanningTemplateDirective })\n    public listItemRightPanningTemplate: IgxListItemRightPanningTemplateDirective;\n\n    /**\n     * Provides a threshold after which the item's panning will be completed automatically.\n     *\n     * @remarks\n     * By default this property is set to 0.5 which is 50% of the list item's width.\n     *\n     * @example\n     * ```html\n     * <igx-list [panEndTriggeringThreshold]=\"0.8\"></igx-list>\n     * ```\n     */\n    @Input()\n    public panEndTriggeringThreshold = 0.5;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChild('defaultEmptyList', { read: TemplateRef, static: true })\n    protected defaultEmptyListTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChild('defaultDataLoading', { read: TemplateRef, static: true })\n    protected defaultDataLoadingTemplate: TemplateRef<any>;\n\n    /**\n     * Sets/gets the `id` of the list.\n     *\n     * @remarks\n     * If not set, the `id` of the first list component will be `\"igx-list-0\"`.\n     *\n     * @example\n     * ```html\n     * <igx-list id=\"my-first-list\"></igx-list>\n     * ```\n     * ```typescript\n     * let listId = this.list.id;\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-list-${NEXT_ID++}`;\n\n    /**\n     * Sets/gets whether the left panning of an item is allowed.\n     *\n     * @remarks\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     * <igx-list [allowLeftPanning]=\"true\"></igx-list>\n     * ```\n     * ```typescript\n     * let isLeftPanningAllowed = this.list.allowLeftPanning;\n     * ```\n     */\n    @Input()\n    public allowLeftPanning = false;\n\n    /**\n     * Sets/gets whether the right panning of an item is allowed.\n     *\n     * @remarks\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     * <igx-list [allowRightPanning]=\"true\"></igx-list>\n     * ```\n     * ```typescript\n     * let isRightPanningAllowed = this.list.allowRightPanning;\n     * ```\n     */\n    @Input()\n    public allowRightPanning = false;\n\n    /**\n     * Sets/gets whether the list is currently loading data.\n     *\n     * @remarks\n     * Set it to display the dataLoadingTemplate while data is being retrieved.\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     *  <igx-list [isLoading]=\"true\"></igx-list>\n     * ```\n     * ```typescript\n     * let isLoading = this.list.isLoading;\n     * ```\n     */\n    @Input()\n    public isLoading = false;\n\n    /**\n     * Event emitted when a left pan gesture is executed on a list item.\n     *\n     * @remarks\n     * Provides a reference to an object of type `IListItemPanningEventArgs` as an event argument.\n     *\n     * @example\n     * ```html\n     * <igx-list [allowLeftPanning]=\"true\" (onLeftPan)=\"onLeftPan($event)\"></igx-list>\n     * ```\n     */\n    @Output()\n    public onLeftPan = new EventEmitter<IListItemPanningEventArgs>();\n\n    /**\n     * Event emitted when a right pan gesture is executed on a list item.\n     *\n     * @remarks\n     * Provides a reference to an object of type `IListItemPanningEventArgs` as an event argument.\n     *\n     * @example\n     * ```html\n     * <igx-list [allowRightPanning]=\"true\" (onRightPan)=\"onRightPan($event)\"></igx-list>\n     * ```\n     */\n    @Output()\n    public onRightPan = new EventEmitter<IListItemPanningEventArgs>();\n\n    /**\n     *\n     * Event emitted when a pan gesture is executed on a list item.\n     *\n     * @remarks\n     * Provides references to the `IgxListItemComponent` and `IgxListPanState` as event arguments.\n     *\n     * @example\n     * ```html\n     * <igx-list (onPanStateChange)=\"onPanStateChange($event)\"></igx-list>\n     * ```\n    */\n    @Output()\n    public onPanStateChange = new EventEmitter<IPanStateChangeEventArgs>();\n\n    /**\n     * Event emitted when a list item is clicked.\n     *\n     * @remarks\n     * Provides references to the `IgxListItemComponent` and `Event` as event arguments.\n     *\n     * @example\n     * ```html\n     * <igx-list (onItemClicked)=\"onItemClicked($event)\"></igx-list>\n     * ```\n     */\n    @Output()\n    public onItemClicked = new EventEmitter<IListItemClickEventArgs>();\n\n    /**\n     * Gets the `role` attribute value.\n     *\n     * @example\n     * ```typescript\n     * let listRole =  this.list.role;\n     * ```\n     */\n    @HostBinding('attr.role')\n    public get role() {\n        return 'list';\n    }\n\n    /**\n     * Gets a boolean indicating if the list is empty.\n     *\n     * @example\n     * ```typescript\n     * let isEmpty =  this.list.isListEmpty;\n     * ```\n     */\n    @HostBinding('class.igx-list-empty')\n    public get isListEmpty(): boolean {\n        return !this.children || this.children.length === 0;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-list')\n    public get cssClass(): boolean {\n        return !this.isListEmpty && this.displayDensity === DisplayDensity.comfortable;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-list--compact')\n    public get cssClassCompact(): boolean {\n        return !this.isListEmpty && this.displayDensity === DisplayDensity.compact;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-list--cosy')\n    public get cssClassCosy(): boolean {\n        return !this.isListEmpty && this.displayDensity === DisplayDensity.cosy;\n    }\n\n    /**\n     * Gets the list `items` excluding the header ones.\n     *\n     * @example\n     * ```typescript\n     * let listItems: IgxListItemComponent[] = this.list.items;\n     * ```\n     */\n    public get items(): IgxListItemComponent[] {\n        const items: IgxListItemComponent[] = [];\n        if (this.children !== undefined) {\n            for (const child of this.sortedChildren) {\n                if (!child.isHeader) {\n                    items.push(child);\n                }\n            }\n        }\n        return items;\n    }\n\n    /**\n     * Gets the header list `items`.\n     *\n     * @example\n     * ```typescript\n     * let listHeaders: IgxListItemComponent[] =  this.list.headers;\n     * ```\n     */\n    public get headers(): IgxListItemComponent[] {\n        const headers: IgxListItemComponent[] = [];\n        if (this.children !== undefined) {\n            for (const child of this.children.toArray()) {\n                if (child.isHeader) {\n                    headers.push(child);\n                }\n            }\n        }\n        return headers;\n    }\n\n    /**\n     * Gets the `context` object of the template binding.\n     *\n     * @remark\n     * Gets the `context` object which represents the `template context` binding into the `list container`\n     * by providing the `$implicit` declaration which is the `IgxListComponent` itself.\n     *\n     * @example\n     * ```typescript\n     * let listComponent =  this.list.context;\n     * ```\n     */\n    public get context(): any {\n        return {\n            $implicit: this\n        };\n    }\n\n    /**\n     * Gets a `TemplateRef` to the currently used template.\n     *\n     * @example\n     * ```typescript\n     * let listTemplate = this.list.template;\n     * ```\n     */\n    public get template(): TemplateRef<any> {\n        if (this.isLoading) {\n            return this.dataLoadingTemplate ? this.dataLoadingTemplate.template : this.defaultDataLoadingTemplate;\n        } else {\n            return this.emptyListTemplate ? this.emptyListTemplate.template : this.defaultEmptyListTemplate;\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxListBaseDirective,\n        IgxListComponent,\n        IgxListItemComponent,\n        IgxListThumbnailDirective,\n        IgxListActionDirective,\n        IgxListLineDirective,\n        IgxListLineTitleDirective,\n        IgxListLineSubTitleDirective,\n        IgxDataLoadingTemplateDirective,\n        IgxEmptyListTemplateDirective,\n        IgxListItemLeftPanningTemplateDirective,\n        IgxListItemRightPanningTemplateDirective\n    ],\n    exports: [\n        IgxListComponent,\n        IgxListItemComponent,\n        IgxListThumbnailDirective,\n        IgxListActionDirective,\n        IgxListLineDirective,\n        IgxListLineTitleDirective,\n        IgxListLineSubTitleDirective,\n        IgxDataLoadingTemplateDirective,\n        IgxEmptyListTemplateDirective,\n        IgxListItemLeftPanningTemplateDirective,\n        IgxListItemRightPanningTemplateDirective\n    ],\n    imports: [\n        CommonModule,\n        IgxRippleModule\n    ]\n})\nexport class IgxListModule {\n}\n","import {\n    AfterViewInit,\n    Component,\n    ChangeDetectionStrategy,\n    Input,\n    ViewChild,\n    ChangeDetectorRef,\n    TemplateRef,\n    Directive\n} from '@angular/core';\nimport { IgxColumnComponent } from '../../columns/column.component';\nimport { IChangeCheckboxEventArgs } from '../../../checkbox/checkbox.component';\nimport { IgxInputDirective } from '../../../directives/input/input.directive';\nimport { DisplayDensity } from '../../../core/density';\nimport { IgxForOfDirective } from '../../../directives/for-of/for_of.directive';\nimport { FilterListItem } from './grid.excel-style-filtering.component';\nimport { IgxListComponent } from '../../../list';\n\n@Directive({\n    selector: '[igxExcelStyleLoading]'\n})\nexport class IgxExcelStyleLoadingValuesTemplateDirective {\n    constructor(public template: TemplateRef<any>) {}\n}\n\n/**\n * @hidden\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-excel-style-search',\n    templateUrl: './excel-style-search.component.html'\n})\nexport class IgxExcelStyleSearchComponent implements AfterViewInit {\n\n    private _isLoading;\n\n    public get isLoading() {\n        return this._isLoading;\n    }\n\n    public set isLoading(value: boolean) {\n        this._isLoading = value;\n        if (!(this.cdr as any).destroyed) {\n            this.cdr.detectChanges();\n        }\n    }\n\n    public searchValue: any;\n\n    @Input()\n    public grid: any;\n\n    @Input()\n    public data: FilterListItem[];\n\n    @Input()\n    public inline: boolean;\n\n    @Input()\n    public column: IgxColumnComponent;\n\n    @ViewChild('input', { read: IgxInputDirective, static: true })\n    public searchInput: IgxInputDirective;\n\n    @ViewChild('list', { read: IgxListComponent, static: true })\n    public list: IgxListComponent;\n\n    @Input()\n    public displayDensity: DisplayDensity;\n\n    @ViewChild(IgxForOfDirective, { static: true })\n    protected virtDir: IgxForOfDirective<any>;\n\n    @ViewChild('defaultExcelStyleLoadingValuesTemplate', { read: TemplateRef, static: true })\n    protected defaultExcelStyleLoadingValuesTemplate: TemplateRef<any>;\n\n    public get valuesLoadingTemplate() {\n        if (this.grid.excelStyleLoadingValuesTemplateDirective) {\n            return this.grid.excelStyleLoadingValuesTemplateDirective.template;\n        } else {\n            return this.defaultExcelStyleLoadingValuesTemplate;\n        }\n    }\n\n    constructor(public cdr: ChangeDetectorRef) { }\n\n    public ngAfterViewInit() {\n        this.refreshSize();\n    }\n\n    public refreshSize() {\n        requestAnimationFrame(() => {\n            this.virtDir.recalcUpdateSizes();\n        });\n    }\n\n    public clearInput() {\n        this.searchValue = null;\n    }\n\n    public onCheckboxChange(eventArgs: IChangeCheckboxEventArgs) {\n        const selectedIndex = this.data.indexOf(eventArgs.checkbox.value);\n        if (selectedIndex === 0) {\n            this.data.forEach(element => {\n                element.isSelected = eventArgs.checked;\n                this.data[0].indeterminate = false;\n            });\n        } else {\n            eventArgs.checkbox.value.isSelected = eventArgs.checked;\n            if (!this.data.slice(1, this.data.length).find(el => el.isSelected === false)) {\n                this.data[0].indeterminate = false;\n                this.data[0].isSelected = true;\n            } else if (!this.data.slice(1, this.data.length).find(el => el.isSelected === true)) {\n                this.data[0].indeterminate = false;\n                this.data[0].isSelected = false;\n            } else {\n                this.data[0].indeterminate = true;\n            }\n        }\n        eventArgs.checkbox.nativeCheckbox.nativeElement.blur();\n    }\n\n    public get itemSize() {\n        let itemSize = '40px';\n        switch (this.displayDensity) {\n            case DisplayDensity.cosy: itemSize = '32px'; break;\n            case DisplayDensity.compact: itemSize = '24px'; break;\n            default: break;\n        }\n        return itemSize;\n    }\n\n    public get containerSize() {\n        return this.list.element.nativeElement.offsetHeight;\n    }\n}\n","import {\n    Component,\n    ChangeDetectionStrategy,\n    AfterViewInit,\n    Input,\n    Output,\n    EventEmitter,\n    ChangeDetectorRef,\n    ViewChild\n} from '@angular/core';\nimport { IgxColumnComponent } from '../../columns/column.component';\nimport { ExpressionUI } from '../grid-filtering.service';\nimport { IgxButtonGroupComponent } from '../../../buttonGroup/buttonGroup.component';\nimport { IgxDropDownItemComponent, IgxDropDownComponent } from '../../../drop-down/index';\nimport { IgxInputGroupComponent, IgxInputDirective } from '../../../input-group/index';\nimport { DataType, DataUtil } from '../../../data-operations/data-util';\nimport { IFilteringOperation } from '../../../data-operations/filtering-condition';\nimport { OverlaySettings, ConnectedPositioningStrategy, CloseScrollStrategy } from '../../../services/index';\nimport { KEYS, IBaseEventArgs } from '../../../core/utils';\nimport { FilteringLogic } from '../../../data-operations/filtering-expression.interface';\nimport { DisplayDensity } from '../../../core/density';\n\n/**\n * @hidden\n */\nexport interface ILogicOperatorChangedArgs extends IBaseEventArgs {\n    target: ExpressionUI;\n    newValue: FilteringLogic;\n}\n\n/**\n * @hidden\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-excel-style-default-expression',\n    templateUrl: './excel-style-default-expression.component.html'\n})\nexport class IgxExcelStyleDefaultExpressionComponent implements AfterViewInit {\n\n    private _dropDownOverlaySettings: OverlaySettings = {\n        closeOnOutsideClick: true,\n        modal: false,\n        positionStrategy: new ConnectedPositioningStrategy(),\n        scrollStrategy: new CloseScrollStrategy()\n    };\n\n    @Input()\n    public column: IgxColumnComponent;\n\n    @Input()\n    public expressionUI: ExpressionUI;\n\n    @Input()\n    public expressionsList: Array<ExpressionUI>;\n\n    @Input()\n    public grid: any;\n\n    @Input()\n    public displayDensity: DisplayDensity;\n\n    @Output()\n    public onExpressionRemoved = new EventEmitter<ExpressionUI>();\n\n    @Output()\n    public onLogicOperatorChanged = new EventEmitter<ILogicOperatorChangedArgs>();\n\n    @ViewChild('inputGroupConditions', { read: IgxInputGroupComponent, static: true })\n    protected inputGroupConditions: IgxInputGroupComponent;\n\n    @ViewChild('inputValues', { read: IgxInputDirective, static: true })\n    protected inputValuesDirective: IgxInputDirective;\n\n    @ViewChild('dropdownConditions', { read: IgxDropDownComponent, static: true })\n    protected dropdownConditions: IgxDropDownComponent;\n\n    @ViewChild('logicOperatorButtonGroup', { read: IgxButtonGroupComponent })\n    protected logicOperatorButtonGroup: IgxButtonGroupComponent;\n\n    protected get inputValuesElement() {\n        return this.inputValuesDirective;\n    }\n\n    get isLast(): boolean {\n        return this.expressionsList[this.expressionsList.length - 1] === this.expressionUI;\n    }\n\n    get isSingle(): boolean {\n        return this.expressionsList.length === 1;\n    }\n\n    get inputConditionsPlaceholder(): string {\n        return this.grid.resourceStrings['igx_grid_filter_condition_placeholder'];\n    }\n\n    get inputValuePlaceholder(): string {\n        return this.grid.resourceStrings['igx_grid_filter_row_placeholder'];\n    }\n\n    get type() {\n        switch (this.column.dataType) {\n            case DataType.Number:\n                return 'number';\n            default:\n                return 'text';\n        }\n    }\n\n    constructor(public cdr: ChangeDetectorRef) {}\n\n    ngAfterViewInit(): void {\n        this._dropDownOverlaySettings.outlet = this.column.grid.outletDirective;\n        this._dropDownOverlaySettings.positionStrategy.settings.target = this.inputGroupConditions.element.nativeElement;\n    }\n\n    public focus() {\n        // use requestAnimationFrame to focus the values input because when initializing the component\n        // datepicker's input group is not yet fully initialized\n        requestAnimationFrame(() => this.inputValuesElement.focus());\n    }\n\n    public isConditionSelected(conditionName: string): boolean {\n        return this.expressionUI.expression.condition && this.expressionUI.expression.condition.name === conditionName;\n    }\n\n    public getConditionName(condition: IFilteringOperation) {\n        return condition ? this.translateCondition(condition.name) : null;\n    }\n\n    public getInputWidth() {\n        return this.inputGroupConditions.element.nativeElement.offsetWidth + 'px';\n    }\n\n    get conditions() {\n        return this.column.filters.conditionList();\n    }\n\n    public translateCondition(value: string): string {\n        return this.grid.resourceStrings[`igx_grid_filter_${this.getCondition(value).name}`] || value;\n    }\n\n    public getIconName(): string {\n        if (this.column.dataType === DataType.Boolean && this.expressionUI.expression.condition === null) {\n            return this.getCondition(this.conditions[0]).iconName;\n        } else if (!this.expressionUI.expression.condition) {\n            return 'filter_list';\n        } else {\n            return this.expressionUI.expression.condition.iconName;\n        }\n    }\n\n    public toggleCustomDialogDropDown() {\n        this.dropdownConditions.toggle(this._dropDownOverlaySettings);\n    }\n\n    public getCondition(value: string): IFilteringOperation {\n        return this.column.filters.condition(value);\n    }\n\n    public onConditionsChanged(eventArgs: any) {\n        const value = (eventArgs.newSelection as IgxDropDownItemComponent).value;\n        this.expressionUI.expression.condition = this.getCondition(value);\n\n        this.focus();\n    }\n\n    public onValuesInput(eventArgs) {\n        this.expressionUI.expression.searchVal = DataUtil.parseValue(this.column.dataType, eventArgs.target.value);\n    }\n\n    public onLogicOperatorButtonClicked(eventArgs, buttonIndex: number) {\n        if (this.logicOperatorButtonGroup.selectedButtons.length === 0) {\n            eventArgs.stopPropagation();\n            this.logicOperatorButtonGroup.selectButton(buttonIndex);\n        } else {\n            this.onLogicOperatorChanged.emit({\n                target: this.expressionUI,\n                newValue: buttonIndex as FilteringLogic\n            });\n        }\n    }\n\n    public onLogicOperatorKeyDown(eventArgs, buttonIndex: number) {\n        if (eventArgs.key === KEYS.ENTER) {\n            this.logicOperatorButtonGroup.selectButton(buttonIndex);\n            this.onLogicOperatorChanged.emit({\n                target: this.expressionUI,\n                newValue: buttonIndex as FilteringLogic\n            });\n        }\n    }\n\n    public onRemoveButtonClick() {\n        this.onExpressionRemoved.emit(this.expressionUI);\n    }\n\n    public onInputConditionsKeyDown(eventArgs) {\n        if (eventArgs.altKey && (eventArgs.key === KEYS.DOWN_ARROW || eventArgs.key === KEYS.DOWN_ARROW_IE)) {\n            this.toggleCustomDialogDropDown();\n        }\n\n        if (eventArgs.key === KEYS.TAB && eventArgs.shiftKey && this.expressionsList[0] === this.expressionUI) {\n            eventArgs.preventDefault();\n        }\n\n        event.stopPropagation();\n    }\n}\n","import {\n    Component,\n    ChangeDetectionStrategy,\n    ViewChild,\n    Input\n} from '@angular/core';\nimport { IgxExcelStyleDefaultExpressionComponent } from './excel-style-default-expression.component';\nimport { IgxDatePickerComponent } from '../../../date-picker/date-picker.component';\nimport { DisplayDensity } from '../../../core/density';\n\n/**\n * @hidden\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-excel-style-date-expression',\n    templateUrl: './excel-style-date-expression.component.html'\n})\nexport class IgxExcelStyleDateExpressionComponent extends IgxExcelStyleDefaultExpressionComponent {\n\n    @ViewChild('datePicker', { read: IgxDatePickerComponent, static: true })\n    private datePicker: IgxDatePickerComponent;\n\n    protected get inputValuesElement() {\n        return this.datePicker.getEditElement();\n    }\n\n    @Input()\n    public displayDensity: DisplayDensity;\n\n    get inputDatePlaceholder(): string {\n        return this.grid.resourceStrings['igx_grid_filter_row_date_placeholder'];\n    }\n}\n","import {\n    Component,\n    ChangeDetectionStrategy,\n    Input,\n    ChangeDetectorRef,\n    ViewChild,\n    AfterViewInit,\n    TemplateRef,\n    ViewChildren,\n    QueryList,\n    ElementRef\n} from '@angular/core';\nimport { IgxColumnComponent } from '../../columns/column.component';\nimport { IgxFilteringService, ExpressionUI } from '../grid-filtering.service';\nimport { FilteringLogic } from '../../../data-operations/filtering-expression.interface';\nimport { DataType } from '../../../data-operations/data-util';\nimport {\n    IgxStringFilteringOperand,\n    IgxBooleanFilteringOperand,\n    IgxNumberFilteringOperand,\n    IgxDateFilteringOperand\n} from '../../../data-operations/filtering-condition';\nimport { IgxToggleDirective } from '../../../directives/toggle/toggle.directive';\nimport {\n    ConnectedPositioningStrategy,\n    AutoPositionStrategy,\n    OverlaySettings,\n    VerticalAlignment,\n    PositionSettings,\n    HorizontalAlignment,\n    IgxOverlayService,\n    AbsoluteScrollStrategy\n} from '../../../services/index';\nimport { ILogicOperatorChangedArgs, IgxExcelStyleDefaultExpressionComponent } from './excel-style-default-expression.component';\nimport { KEYS } from '../../../core/utils';\nimport { IgxExcelStyleDateExpressionComponent } from './excel-style-date-expression.component';\nimport { DisplayDensity } from '../../../core/density';\n\n/**\n * @hidden\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-excel-style-custom-dialog',\n    templateUrl: './excel-style-custom-dialog.component.html'\n})\nexport class IgxExcelStyleCustomDialogComponent implements AfterViewInit {\n\n    @Input()\n    public expressionsList = new Array<ExpressionUI>();\n\n    private _customDialogPositionSettings: PositionSettings = {\n        verticalDirection: VerticalAlignment.Middle,\n        horizontalDirection: HorizontalAlignment.Center,\n        horizontalStartPoint: HorizontalAlignment.Center,\n        verticalStartPoint: VerticalAlignment.Middle\n    };\n\n    private _customDialogOverlaySettings: OverlaySettings = {\n        closeOnOutsideClick: true,\n        modal: false,\n        positionStrategy: new AutoPositionStrategy(this._customDialogPositionSettings),\n        scrollStrategy: new AbsoluteScrollStrategy()\n    };\n\n    @Input()\n    public column: IgxColumnComponent;\n\n    @Input()\n    public selectedOperator: string;\n\n    @Input()\n    public filteringService: IgxFilteringService;\n\n    @Input()\n    public overlayComponentId: string;\n\n    @Input()\n    public overlayService: IgxOverlayService;\n\n    @Input()\n    public displayDensity: DisplayDensity;\n\n    @ViewChildren(IgxExcelStyleDefaultExpressionComponent)\n    private expressionComponents: QueryList<IgxExcelStyleDefaultExpressionComponent>;\n\n    @ViewChildren(IgxExcelStyleDateExpressionComponent)\n    private expressionDateComponents: QueryList<IgxExcelStyleDateExpressionComponent>;\n\n    @ViewChild('toggle', { read: IgxToggleDirective, static: true })\n    public toggle: IgxToggleDirective;\n\n    @ViewChild('defaultExpressionTemplate', { read: TemplateRef })\n    protected defaultExpressionTemplate: TemplateRef<any>;\n\n    @ViewChild('dateExpressionTemplate', { read: TemplateRef })\n    protected dateExpressionTemplate: TemplateRef<any>;\n\n    @ViewChild('expressionsContainer', { static: true })\n    protected expressionsContainer: ElementRef;\n\n    constructor(private cdr: ChangeDetectorRef) {}\n\n    ngAfterViewInit(): void {\n        this._customDialogOverlaySettings.outlet = this.grid.outlet;\n    }\n\n    get template(): TemplateRef<any> {\n        if (this.column.dataType === DataType.Date) {\n            return this.dateExpressionTemplate;\n        }\n\n        return this.defaultExpressionTemplate;\n    }\n\n    get grid(): any {\n        return this.filteringService.grid;\n    }\n\n    public onCustomDialogOpening() {\n        if (this.selectedOperator) {\n            this.createInitialExpressionUIElement();\n        }\n    }\n\n    public onCustomDialogOpened() {\n        if (this.expressionComponents.first) {\n            this.expressionComponents.first.focus();\n        }\n    }\n\n    public open(esf) {\n        this._customDialogOverlaySettings.positionStrategy.settings.target =\n            this.overlayComponentId ?\n                this.grid.rootGrid ? this.grid.rootGrid.nativeElement : this.grid.nativeElement :\n                esf;\n        this.toggle.open(this._customDialogOverlaySettings);\n    }\n\n    public onClearButtonClick() {\n        this.filteringService.clearFilter(this.column.field);\n        this.createInitialExpressionUIElement();\n        this.cdr.detectChanges();\n    }\n\n    public closeDialog() {\n        if (this.overlayComponentId) {\n            this.overlayService.hide(this.overlayComponentId);\n        } else {\n            this.toggle.close();\n        }\n    }\n\n    public onApplyButtonClick() {\n        this.expressionsList = this.expressionsList.filter(\n            element => element.expression.condition &&\n            (element.expression.searchVal || element.expression.searchVal === 0 || element.expression.condition.isUnary));\n\n        if (this.expressionsList.length > 0) {\n            this.expressionsList[0].beforeOperator = null;\n            this.expressionsList[this.expressionsList.length - 1].afterOperator = null;\n        }\n\n        this.filteringService.filterInternal(this.column.field, this.expressionsList);\n        this.closeDialog();\n    }\n\n    public onAddButtonClick() {\n        const exprUI = new ExpressionUI();\n        exprUI.expression = {\n            condition: null,\n            fieldName: this.column.field,\n            ignoreCase: this.column.filteringIgnoreCase,\n            searchVal: null\n        };\n\n        this.expressionsList[this.expressionsList.length - 1].afterOperator = FilteringLogic.And;\n        exprUI.beforeOperator = this.expressionsList[this.expressionsList.length - 1].afterOperator;\n\n        this.expressionsList.push(exprUI);\n\n        this.markChildrenForCheck();\n        this.scrollToBottom();\n    }\n\n    public onExpressionRemoved(event: ExpressionUI) {\n        const indexToRemove = this.expressionsList.indexOf(event);\n\n        if (indexToRemove === 0 && this.expressionsList.length > 1) {\n            this.expressionsList[1].beforeOperator = null;\n        } else if (indexToRemove === this.expressionsList.length - 1) {\n            this.expressionsList[indexToRemove - 1].afterOperator = null;\n        } else {\n            this.expressionsList[indexToRemove - 1].afterOperator = this.expressionsList[indexToRemove + 1].beforeOperator;\n            this.expressionsList[0].beforeOperator = null;\n            this.expressionsList[this.expressionsList.length - 1].afterOperator = null;\n        }\n\n        this.expressionsList.splice(indexToRemove, 1);\n\n        this.cdr.detectChanges();\n\n        this.markChildrenForCheck();\n    }\n\n    public onLogicOperatorChanged(event: ILogicOperatorChangedArgs) {\n        const index = this.expressionsList.indexOf(event.target);\n        event.target.afterOperator = event.newValue;\n        if (index + 1 < this.expressionsList.length) {\n            this.expressionsList[index + 1].beforeOperator = event.newValue;\n        }\n    }\n\n    public onKeyDown(eventArgs) {\n        eventArgs.stopPropagation();\n    }\n\n    public onApplyButtonKeyDown(eventArgs) {\n        if (eventArgs.key === KEYS.TAB && !eventArgs.shiftKey) {\n            eventArgs.stopPropagation();\n            eventArgs.preventDefault();\n        }\n    }\n\n    private createCondition(conditionName: string) {\n        switch (this.column.dataType) {\n            case DataType.Boolean:\n                return IgxBooleanFilteringOperand.instance().condition(conditionName);\n            case DataType.Number:\n                return IgxNumberFilteringOperand.instance().condition(conditionName);\n            case DataType.Date:\n                return IgxDateFilteringOperand.instance().condition(conditionName);\n            default:\n                return IgxStringFilteringOperand.instance().condition(conditionName);\n        }\n    }\n\n    private markChildrenForCheck() {\n        this.expressionComponents.forEach(x => x.cdr.markForCheck());\n        this.expressionDateComponents.forEach(x => x.cdr.markForCheck());\n    }\n\n    private createInitialExpressionUIElement() {\n        this.expressionsList = [];\n        const firstExprUI = new ExpressionUI();\n\n        firstExprUI.expression = {\n            condition: this.createCondition(this.selectedOperator),\n            fieldName: this.column.field,\n            ignoreCase: this.column.filteringIgnoreCase,\n            searchVal: null\n        };\n        firstExprUI.afterOperator = FilteringLogic.And;\n\n        this.expressionsList.push(firstExprUI);\n\n        const secondExprUI = new ExpressionUI();\n        secondExprUI.expression = {\n            condition: null,\n            fieldName: this.column.field,\n            ignoreCase: this.column.filteringIgnoreCase,\n            searchVal: null\n        };\n\n        secondExprUI.beforeOperator = FilteringLogic.And;\n\n        this.expressionsList.push(secondExprUI);\n    }\n\n    private scrollToBottom() {\n        requestAnimationFrame(() => {\n            this.expressionsContainer.nativeElement.scrollTop = this.expressionsContainer.nativeElement.scrollHeight;\n        });\n    }\n}\n","import {\n    Component,\n    ChangeDetectionStrategy,\n    ViewChild,\n    Input,\n    AfterViewInit,\n    OnDestroy,\n    OnChanges,\n    SimpleChanges\n} from '@angular/core';\nimport { IgxColumnComponent } from '../../columns/column.component';\nimport { IgxButtonGroupComponent } from '../../../buttonGroup/buttonGroup.component';\nimport { DisplayDensity } from '../../../core/density';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { GridType } from '../../common/grid.interface';\n\n/**\n * @hidden\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-excel-style-sorting',\n    templateUrl: './excel-style-sorting.component.html'\n})\nexport class IgxExcelStyleSortingComponent implements AfterViewInit, OnDestroy, OnChanges {\n    private destroy$ = new Subject<boolean>();\n\n    @Input()\n    public column: IgxColumnComponent;\n\n    @Input()\n    public grid: GridType;\n\n    @Input()\n    public displayDensity: DisplayDensity;\n\n    @ViewChild('sortButtonGroup', { read: IgxButtonGroupComponent, static: true })\n    public sortButtonGroup: IgxButtonGroupComponent;\n\n    constructor() {}\n\n    ngAfterViewInit(): void {\n        this.grid.sortingExpressionsChange.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            this.updateSelectedButtons(this.column.field);\n        });\n        this.updateSelectedButtons(this.column.field);\n    }\n\n    ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (changes.column && !changes.column.firstChange) {\n            this.updateSelectedButtons(changes.column.currentValue.field);\n        }\n    }\n\n    private updateSelectedButtons(fieldName: string) {\n        const sortIndex = this.grid.sortingExpressions.findIndex(s => s.fieldName === fieldName);\n\n        this.sortButtonGroup.buttons.forEach((b, i) => {\n            this.sortButtonGroup.deselectButton(i);\n        });\n\n        if (sortIndex !== -1 ) {\n            const sortDirection = this.grid.sortingExpressions[sortIndex].dir;\n            this.sortButtonGroup.selectButton(sortDirection - 1);\n        }\n    }\n\n    public onSortButtonClicked(sortDirection) {\n        if (this.sortButtonGroup.selectedIndexes.length === 0) {\n            if (this.grid.isColumnGrouped(this.column.field)) {\n                this.sortButtonGroup.selectButton(sortDirection - 1);\n            } else {\n                this.grid.clearSort(this.column.field);\n            }\n        } else {\n            this.grid.sort({ fieldName: this.column.field, dir: sortDirection, ignoreCase: true });\n        }\n    }\n}\n","import {\n    ChangeDetectorRef,\n    Component,\n    ViewChild,\n    HostBinding,\n    ChangeDetectionStrategy,\n    TemplateRef,\n    Directive,\n    OnDestroy,\n    ElementRef,\n    Input,\n    ViewRef\n} from '@angular/core';\nimport {\n    HorizontalAlignment,\n    VerticalAlignment,\n    OverlaySettings,\n    IgxOverlayService,\n    AbsoluteScrollStrategy,\n    AutoPositionStrategy\n} from '../../../services/index';\nimport { IgxFilteringService, ExpressionUI } from '../grid-filtering.service';\nimport {\n    IFilteringOperation,\n    IgxStringFilteringOperand,\n    IgxNumberFilteringOperand,\n    IgxBooleanFilteringOperand,\n    IgxDateFilteringOperand\n} from '../../../data-operations/filtering-condition';\nimport { FilteringExpressionsTree, IFilteringExpressionsTree } from '../../../data-operations/filtering-expressions-tree';\nimport { FilteringLogic, IFilteringExpression } from '../../../data-operations/filtering-expression.interface';\nimport { cloneArray, KEYS } from '../../../core/utils';\nimport { DataType, DataUtil } from '../../../data-operations/data-util';\nimport { IgxExcelStyleSearchComponent } from './excel-style-search.component';\nimport { IgxExcelStyleCustomDialogComponent } from './excel-style-custom-dialog.component';\nimport { Subscription, Subject } from 'rxjs';\nimport { IgxExcelStyleSortingComponent } from './excel-style-sorting.component';\nimport { takeUntil } from 'rxjs/operators';\nimport { ISelectionEventArgs, IgxDropDownComponent } from '../../../drop-down';\nimport { IgxColumnComponent } from '../../columns/column.component';\nimport { IgxGridBaseDirective } from '../../grid-base.directive';\nimport { DisplayDensity } from '../../../core/density';\nimport { IgxDecimalPipeComponent, IgxDatePipeComponent } from '../../common/pipes';\n\n/**\n *@hidden\n */\nexport class FilterListItem {\n    public value: any;\n    public label: any;\n    public isSelected: boolean;\n    public indeterminate: boolean;\n    public isSpecial = false;\n    public isBlanks = false;\n}\n\n@Directive({\n    selector: '[igxExcelStyleSorting]'\n})\nexport class IgxExcelStyleSortingTemplateDirective {\n    constructor(public template: TemplateRef<any>) {}\n}\n\n@Directive({\n    selector: '[igxExcelStyleMoving]'\n})\nexport class IgxExcelStyleMovingTemplateDirective {\n    constructor(public template: TemplateRef<any>) {}\n}\n\n@Directive({\n    selector: '[igxExcelStyleHiding]'\n})\nexport class IgxExcelStyleHidingTemplateDirective {\n    constructor(public template: TemplateRef<any>) {}\n}\n\n@Directive({\n    selector: '[igxExcelStylePinning]'\n})\nexport class IgxExcelStylePinningTemplateDirective {\n    constructor(public template: TemplateRef<any>) {}\n}\n\n/**\n * A component used for presenting Excel style filtering UI for a specific column.\n * It is used internally in the Grid, but could also be hosted in a container outside of it.\n *\n * Example:\n * ```html\n * <igx-grid-excel-style-filtering\n *     [column]=\"grid1.columns[0]\">\n * </igx-grid-excel-style-filtering>\n * ```\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-excel-style-filtering',\n    templateUrl: './grid.excel-style-filtering.component.html'\n})\nexport class IgxGridExcelStyleFilteringComponent implements OnDestroy {\n    private static readonly filterOptimizationThreshold = 2;\n\n    private shouldOpenSubMenu = true;\n    private expressionsList = new Array<ExpressionUI>();\n    private destroy$ = new Subject<boolean>();\n    private containsNullOrEmpty = false;\n    private selectAllSelected = true;\n    private selectAllIndeterminate = false;\n    private filterValues = new Set<any>();\n    private _column: IgxColumnComponent;\n    private _columnPinning: Subscription;\n    private _columnVisibilityChanged: Subscription;\n    private _filteringChanged: Subscription;\n    private _densityChanged: Subscription;\n\n    /**\n     * An @Input property that sets the column.\n     */\n    @Input()\n    public set column(value: IgxColumnComponent) {\n        this._column = value;\n\n        if (this._columnPinning) {\n            this._columnPinning.unsubscribe();\n        }\n\n        if (this._columnVisibilityChanged) {\n            this._columnVisibilityChanged.unsubscribe();\n        }\n\n        if (this._filteringChanged) {\n            this._filteringChanged.unsubscribe();\n        }\n\n        if (this._densityChanged) {\n            this._densityChanged.unsubscribe();\n        }\n\n        if (this._column) {\n            this._column.grid.filteringService.registerSVGIcons();\n            this.isColumnPinnable = this.column.pinnable;\n            this.init();\n\n            this._columnPinning = this.grid.onColumnPinning.pipe(takeUntil(this.destroy$)).subscribe(() => {\n                requestAnimationFrame(() => {\n                    this.isColumnPinnable = this.column.pinnable;\n                    if (!(this.cdr as ViewRef).destroyed) {\n                       this.cdr.detectChanges();\n                    }\n                });\n            });\n            this._columnVisibilityChanged = this.grid.onColumnVisibilityChanged.pipe(takeUntil(this.destroy$)).subscribe(() => {\n                this.cdr.detectChanges();\n            });\n            this._filteringChanged = this.grid.filteringExpressionsTreeChange.pipe(takeUntil(this.destroy$)).subscribe(() => {\n                this.init();\n            });\n            this._densityChanged = this.grid.onDensityChanged.pipe(takeUntil(this.destroy$)).subscribe(() => {\n                this.cdr.detectChanges();\n            });\n        }\n    }\n\n    /**\n     * Returns the current column.\n     */\n    public get column(): IgxColumnComponent {\n        return this._column;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get filteringService(): IgxFilteringService {\n        return this.grid.filteringService;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public listData = new Array<FilterListItem>();\n    /**\n     * @hidden @internal\n     */\n    public uniqueValues = [];\n    /**\n     * @hidden @internal\n     */\n    public overlayService: IgxOverlayService;\n    /**\n     * @hidden @internal\n     */\n    public overlayComponentId: string;\n\n    private _subMenuPositionSettings = {\n        verticalStartPoint: VerticalAlignment.Top\n    };\n\n    private _subMenuOverlaySettings: OverlaySettings = {\n        closeOnOutsideClick: true,\n        modal: false,\n        positionStrategy: new AutoPositionStrategy(this._subMenuPositionSettings),\n        scrollStrategy: new AbsoluteScrollStrategy()\n    };\n\n    /**\n     * @hidden @internal\n     */\n    get minHeight() {\n        if (!this.inline) {\n            let minHeight = 600;\n            switch (this.grid.displayDensity) {\n                case DisplayDensity.cosy: minHeight = 465; break;\n                case DisplayDensity.compact: minHeight = 330; break;\n                default: break;\n            }\n            return `${minHeight}px`;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('style.max-height') get maxHeight() {\n        if (!this.inline) {\n            let maxHeight = 730;\n            switch (this.grid.displayDensity) {\n                case DisplayDensity.cosy: maxHeight = 565; break;\n                case DisplayDensity.compact: maxHeight = 405; break;\n                default: break;\n            }\n            return `${maxHeight}px`;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class.igx-excel-filter')\n    className = 'igx-excel-filter';\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class.igx-excel-filter--inline')\n    public inline = true;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('dropdown', { read: ElementRef })\n    public mainDropdown: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('subMenu', { read: IgxDropDownComponent })\n    public subMenu: IgxDropDownComponent;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('customDialog', { read: IgxExcelStyleCustomDialogComponent })\n    public customDialog: IgxExcelStyleCustomDialogComponent;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('excelStyleSearch', { read: IgxExcelStyleSearchComponent })\n    protected excelStyleSearch: IgxExcelStyleSearchComponent;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('excelStyleSorting', { read: IgxExcelStyleSortingComponent })\n    protected excelStyleSorting: IgxExcelStyleSortingComponent;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('defaultExcelStyleSortingTemplate', { read: TemplateRef, static: true })\n    protected defaultExcelStyleSortingTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('defaultExcelStyleHidingTemplate', { read: TemplateRef, static: true })\n    protected defaultExcelStyleHidingTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('defaultExcelStyleMovingTemplate', { read: TemplateRef, static: true })\n    protected defaultExcelStyleMovingTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('defaultExcelStylePinningTemplate', { read: TemplateRef, static: true })\n    protected defaultExcelStylePinningTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    public isColumnPinnable: boolean;\n\n    /**\n     * @hidden @internal\n     */\n    get grid(): IgxGridBaseDirective {\n        return this.column.grid;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get conditions() {\n        return this.column.filters.conditionList();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get subMenuText() {\n        switch (this.column.dataType) {\n            case DataType.Boolean:\n                return this.grid.resourceStrings.igx_grid_excel_boolean_filter;\n            case DataType.Number:\n                return this.grid.resourceStrings.igx_grid_excel_number_filter;\n            case DataType.Date:\n                return this.grid.resourceStrings.igx_grid_excel_date_filter;\n            default:\n                return this.grid.resourceStrings.igx_grid_excel_text_filter;\n        }\n    }\n\n    constructor(private cdr: ChangeDetectorRef, private element: ElementRef) {}\n\n    /**\n     * @hidden @internal\n     */\n    ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    private init() {\n        this.expressionsList = new Array<ExpressionUI>();\n        this.filteringService.generateExpressionsList(this.column.filteringExpressionsTree, this.grid.filteringLogic, this.expressionsList);\n        this.populateColumnData();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public clearFilterClass() {\n        if (this.column.filteringExpressionsTree) {\n            return 'igx-excel-filter__actions-clear';\n        }\n\n        return 'igx-excel-filter__actions-clear--disabled';\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public pinClass() {\n        return this.isColumnPinnable ? 'igx-excel-filter__actions-pin' : 'igx-excel-filter__actions-pin--disabled';\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public initialize(column: IgxColumnComponent, overlayService: IgxOverlayService,\n        overlayComponentId: string) {\n        this.inline = false;\n        this.column = column;\n        this.overlayService = overlayService;\n        this.overlayComponentId = overlayComponentId;\n\n        this._subMenuOverlaySettings.outlet = (this.grid as any).outlet;\n\n        requestAnimationFrame(() => {\n            this.excelStyleSearch.searchInput.nativeElement.focus();\n        });\n\n        this.grid.onColumnMoving.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            this.closeDropdown();\n        });\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public getCondition(value: string): IFilteringOperation {\n        return this.column.filters.condition(value);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public translateCondition(value: string): string {\n        return this.grid.resourceStrings[`igx_grid_filter_${this.getCondition(value).name}`] || value;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onPin() {\n        this.column.pinned = !this.column.pinned;\n        this.closeDropdown();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onHideToggle() {\n        this.column.hidden = !this.column.hidden;\n        this.grid.onColumnVisibilityChanged.emit({ column: this.column, newValue: this.column.hidden });\n        this.closeDropdown();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onTextFilterClick(eventArgs) {\n        if (this.shouldOpenSubMenu) {\n            this._subMenuOverlaySettings.positionStrategy.settings.target = eventArgs.currentTarget;\n\n            const gridRect = this.grid.nativeElement.getBoundingClientRect();\n            const dropdownRect = this.mainDropdown.nativeElement.getBoundingClientRect();\n\n            let x = dropdownRect.left + dropdownRect.width;\n            let x1 = gridRect.left + gridRect.width;\n            x += window.pageXOffset;\n            x1 += window.pageXOffset;\n            if (Math.abs(x - x1) < 200) {\n                this._subMenuOverlaySettings.positionStrategy.settings.horizontalDirection = HorizontalAlignment.Left;\n                this._subMenuOverlaySettings.positionStrategy.settings.horizontalStartPoint = HorizontalAlignment.Left;\n            } else {\n                this._subMenuOverlaySettings.positionStrategy.settings.horizontalDirection = HorizontalAlignment.Right;\n                this._subMenuOverlaySettings.positionStrategy.settings.horizontalStartPoint = HorizontalAlignment.Right;\n            }\n\n            this.subMenu.open(this._subMenuOverlaySettings);\n            this.shouldOpenSubMenu = false;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onTextFilterKeyDown(eventArgs) {\n        if (eventArgs.key === KEYS.ENTER) {\n            this.onTextFilterClick(eventArgs);\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onSubMenuClosed() {\n        requestAnimationFrame(() => {\n            this.shouldOpenSubMenu = true;\n        });\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onSubMenuSelection(eventArgs: ISelectionEventArgs) {\n        if (this.expressionsList && this.expressionsList.length &&\n            this.expressionsList[0].expression.condition.name !== 'in') {\n            this.customDialog.expressionsList = this.expressionsList;\n        }\n\n        this.customDialog.selectedOperator = eventArgs.newSelection.value;\n        eventArgs.cancel = true;\n        if (this.overlayComponentId) {\n            this.element.nativeElement.style.display = 'none';\n        }\n        this.subMenu.close();\n        this.customDialog.open(this.mainDropdown.nativeElement);\n    }\n\n    private areExpressionsSelectable () {\n        if (this.expressionsList.length === 1 &&\n            (this.expressionsList[0].expression.condition.name === 'equals' ||\n             this.expressionsList[0].expression.condition.name === 'true' ||\n             this.expressionsList[0].expression.condition.name === 'false' ||\n             this.expressionsList[0].expression.condition.name === 'empty' ||\n             this.expressionsList[0].expression.condition.name === 'in')) {\n            return true;\n        }\n\n        const selectableExpressionsCount = this.expressionsList.filter(exp =>\n            (exp.beforeOperator === 1 || exp.afterOperator === 1) &&\n            (exp.expression.condition.name === 'equals' ||\n             exp.expression.condition.name === 'true' ||\n             exp.expression.condition.name === 'false' ||\n             exp.expression.condition.name === 'empty' ||\n             exp.expression.condition.name === 'in')).length;\n\n        return selectableExpressionsCount === this.expressionsList.length;\n    }\n\n    private areExpressionsValuesInTheList() {\n        if (this.column.dataType === DataType.Boolean) {\n            return true;\n        }\n\n        if (this.filterValues.size === 1) {\n            const firstValue = this.filterValues.values().next().value;\n\n            if (!firstValue && firstValue !== 0) {\n                return true;\n            }\n        }\n\n        for (let index = 0; index < this.uniqueValues.length; index++) {\n            if (this.filterValues.has(this.uniqueValues[index])) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    private populateColumnData() {\n        if (this.grid.uniqueColumnValuesStrategy) {\n            this.cdr.detectChanges();\n            this.renderColumnValuesRemotely();\n        } else {\n            this.renderColumnValuesFromData();\n        }\n    }\n\n    private renderColumnValuesRemotely() {\n        this.excelStyleSearch.isLoading = true;\n        const expressionsTree: FilteringExpressionsTree = this.getColumnFilterExpressionsTree();\n\n        this.grid.uniqueColumnValuesStrategy(this.column, expressionsTree, (colVals: any[]) => {\n            const columnValues = (this.column.dataType === DataType.Date) ?\n                colVals.map(val => val ? val.toDateString() : val) : colVals;\n\n            this.renderValues(columnValues);\n            this.excelStyleSearch.isLoading = false;\n            this.excelStyleSearch.refreshSize();\n        });\n    }\n\n    private renderColumnValuesFromData() {\n        let data = this.column.gridAPI.get_all_data((this.grid as any).id);\n        const expressionsTree = this.getColumnFilterExpressionsTree();\n\n        if (expressionsTree.filteringOperands.length) {\n            const state = { expressionsTree: expressionsTree };\n            data = DataUtil.filter(cloneArray(data), state);\n        }\n\n        const columnField = this.column.field;\n        const columnValues = (this.column.dataType === DataType.Date) ?\n            data.map(record => record[columnField] ? record[columnField].toDateString() : record[columnField]) :\n            data.map(record => record[columnField]);\n\n        this.renderValues(columnValues);\n    }\n\n    private renderValues(columnValues: any[]) {\n        this.generateUniqueValues(columnValues);\n        this.generateFilterValues(this.column.dataType === DataType.Date);\n        this.generateListData();\n    }\n\n    private generateUniqueValues(columnValues: any[]) {\n        this.uniqueValues = Array.from(new Set(columnValues));\n    }\n\n    private generateFilterValues(isDateColumn: boolean = false) {\n        if (isDateColumn) {\n            this.filterValues = new Set<any>(this.expressionsList.reduce((arr, e) => {\n                if (e.expression.condition.name === 'in') {\n                    return [ ...arr, ...Array.from((e.expression.searchVal as Set<any>).values()).map(v =>\n                        new Date(v).toDateString()) ];\n                }\n                return [ ...arr, ...[e.expression.searchVal ? e.expression.searchVal.toDateString() : e.expression.searchVal] ];\n            }, []));\n        } else {\n            this.filterValues = new Set<any>(this.expressionsList.reduce((arr, e) => {\n                if (e.expression.condition.name === 'in') {\n                    return [ ...arr, ...Array.from((e.expression.searchVal as Set<any>).values()) ];\n                }\n                return [ ...arr, ...[e.expression.searchVal] ];\n            }, []));\n        }\n    }\n\n    private generateListData() {\n        this.listData = new Array<FilterListItem>();\n\n        const shouldUpdateSelection = this.areExpressionsSelectable() && this.areExpressionsValuesInTheList();\n\n        if (this.column.dataType === DataType.Boolean) {\n            this.addBooleanItems();\n        } else {\n            this.addItems(shouldUpdateSelection);\n        }\n\n        this.listData.sort((a, b) => this.sortData(a, b));\n\n        if (this.column.dataType === DataType.Date) {\n            this.uniqueValues = this.uniqueValues.map(value => new Date(value));\n        }\n\n        if (this.containsNullOrEmpty) {\n            this.addBlanksItem(shouldUpdateSelection);\n        }\n\n        this.addSelectAllItem();\n\n        if (!(this.cdr as any).destroyed) {\n            this.cdr.detectChanges();\n        }\n    }\n\n    private getColumnFilterExpressionsTree() {\n        const gridExpressionsTree: IFilteringExpressionsTree = this.grid.filteringExpressionsTree;\n        const expressionsTree = new FilteringExpressionsTree(gridExpressionsTree.operator, gridExpressionsTree.fieldName);\n\n        for (const operand of gridExpressionsTree.filteringOperands) {\n            if (operand instanceof FilteringExpressionsTree) {\n                const columnExprTree = operand as FilteringExpressionsTree;\n                if (columnExprTree.fieldName === this.column.field) {\n                    break;\n                }\n            }\n            expressionsTree.filteringOperands.push(operand);\n        }\n\n        return expressionsTree;\n    }\n\n    private addBooleanItems() {\n        this.selectAllSelected = true;\n        this.selectAllIndeterminate = false;\n        this.uniqueValues.forEach(element => {\n            const filterListItem = new FilterListItem();\n            if (element !== undefined && element !== null && element !== '') {\n                if (this.column.filteringExpressionsTree) {\n                    if (element === true && this.expressionsList.find(exp => exp.expression.condition.name === 'true' )) {\n                        filterListItem.isSelected = true;\n                        this.selectAllIndeterminate = true;\n                    } else if (element === false && this.expressionsList.find(exp => exp.expression.condition.name === 'false' )) {\n                            filterListItem.isSelected = true;\n                            this.selectAllIndeterminate = true;\n                    } else {\n                        filterListItem.isSelected = false;\n                    }\n                } else {\n                    filterListItem.isSelected = true;\n                }\n                filterListItem.value = element;\n                filterListItem.label = element;\n                filterListItem.indeterminate = false;\n                this.listData.push(filterListItem);\n            } else {\n                this.containsNullOrEmpty = true;\n            }\n        });\n    }\n\n    private addItems(shouldUpdateSelection: boolean) {\n        this.selectAllSelected = true;\n        this.selectAllIndeterminate = false;\n\n        const numberPipe = new IgxDecimalPipeComponent(this.column.grid.locale);\n        const datePipe = new IgxDatePipeComponent(this.column.grid.locale);\n\n        this.uniqueValues.forEach(element => {\n            if (element !== undefined && element !== null && element !== '') {\n                const filterListItem = new FilterListItem();\n                if (this.column.filteringExpressionsTree) {\n                    if (shouldUpdateSelection) {\n                        if (this.filterValues.has(element)) {\n                            filterListItem.isSelected = true;\n                        } else {\n                            filterListItem.isSelected = false;\n                        }\n                        this.selectAllIndeterminate = true;\n                    } else {\n                        filterListItem.isSelected = false;\n                        this.selectAllSelected = false;\n                    }\n                } else {\n                    filterListItem.isSelected = true;\n                }\n                if (this.column.dataType === DataType.Date) {\n                    const date = new Date(element);\n\n                    filterListItem.value = date;\n\n                    filterListItem.label = this.column.formatter ?\n                        this.column.formatter(date) :\n                        datePipe.transform(date, this.column.grid.locale);\n\n                } else if (this.column.dataType === DataType.Number) {\n                    filterListItem.value = element;\n\n                    filterListItem.label = this.column.formatter ?\n                        this.column.formatter(element) :\n                        numberPipe.transform(element, this.column.grid.locale);\n\n                } else {\n                    filterListItem.value = element;\n\n                    filterListItem.label = this.column.formatter ?\n                        this.column.formatter(element) :\n                        element;\n                }\n\n                filterListItem.indeterminate = false;\n                this.listData.push(filterListItem);\n            } else {\n                this.containsNullOrEmpty = true;\n            }\n        });\n    }\n\n    private addSelectAllItem() {\n        const selectAll =  new FilterListItem();\n        selectAll.isSelected = this.selectAllSelected;\n        selectAll.value = this.grid.resourceStrings.igx_grid_excel_select_all;\n        selectAll.label = this.grid.resourceStrings.igx_grid_excel_select_all;\n        selectAll.indeterminate = this.selectAllIndeterminate;\n        selectAll.isSpecial = true;\n        this.listData.unshift(selectAll);\n    }\n\n    private addBlanksItem(shouldUpdateSelection) {\n        const blanks =  new FilterListItem();\n        if (this.column.filteringExpressionsTree) {\n            if (shouldUpdateSelection) {\n                if (this.filterValues.has(null)) {\n                    blanks.isSelected = true;\n                } else {\n                    blanks.isSelected = false;\n                }\n            }\n        } else {\n            blanks.isSelected = true;\n        }\n        blanks.value = null;\n        blanks.label = this.grid.resourceStrings.igx_grid_excel_blanks;\n        blanks.indeterminate = false;\n        blanks.isSpecial = true;\n        blanks.isBlanks = true;\n        this.listData.unshift(blanks);\n    }\n\n    private sortData(a: FilterListItem, b: FilterListItem) {\n        let valueA = a.value;\n        let valueB = b.value;\n        if (typeof(a) === DataType.String) {\n            valueA = a.value.toUpperCase();\n            valueB = b.value.toUpperCase();\n        }\n        if (valueA < valueB) {\n            return -1;\n        } else if (valueA > valueB) {\n            return 1;\n        } else {\n            return 0;\n        }\n    }\n\n    private selectAllFilterItems() {\n        this.listData.forEach(filterListItem => {\n            filterListItem.isSelected = true;\n            filterListItem.indeterminate = false;\n        });\n        this.excelStyleSearch.cdr.detectChanges();\n    }\n\n    // TODO: sort members by access modifier\n\n    /**\n     * @hidden @internal\n     */\n    get sortingTemplate() {\n        if (this.grid.excelStyleSortingTemplateDirective) {\n            return this.grid.excelStyleSortingTemplateDirective.template;\n        } else {\n            return this.defaultExcelStyleSortingTemplate;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get movingTemplate() {\n        if (this.grid.excelStyleMovingTemplateDirective) {\n            return this.grid.excelStyleMovingTemplateDirective.template;\n        } else {\n            return this.defaultExcelStyleMovingTemplate;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get pinningTemplate() {\n        if (this.grid.excelStylePinningTemplateDirective) {\n            return this.grid.excelStylePinningTemplateDirective.template;\n        } else {\n            return this.defaultExcelStylePinningTemplate;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get hidingTemplate() {\n        if (this.grid.excelStyleHidingTemplateDirective) {\n            return this.grid.excelStyleHidingTemplateDirective.template;\n        } else {\n            return this.defaultExcelStyleHidingTemplate;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get applyButtonDisabled() {\n        return this.listData[0] && !this.listData[0].isSelected && !this.listData[0].indeterminate;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public applyFilter() {\n        const filterTree = new FilteringExpressionsTree(FilteringLogic.Or, this.column.field);\n        const selectedItems = this.listData.slice(1, this.listData.length).filter(el => el.isSelected === true);\n        const unselectedItem = this.listData.slice(1, this.listData.length).find(el => el.isSelected === false);\n\n        if (unselectedItem) {\n            if (selectedItems.length <= IgxGridExcelStyleFilteringComponent.filterOptimizationThreshold) {\n                selectedItems.forEach(element => {\n                    let condition = null;\n                    if (element.value !== null && element.value !== undefined) {\n                        if (this.column.dataType === DataType.Boolean) {\n                            condition = this.createCondition(element.value.toString());\n                        } else {\n                            condition = this.createCondition('equals');\n                        }\n                    } else {\n                        condition = this.createCondition('empty');\n                    }\n                    filterTree.filteringOperands.push({\n                        condition: condition,\n                        fieldName: this.column.field,\n                        ignoreCase: this.column.filteringIgnoreCase,\n                        searchVal: element.value\n                    });\n                });\n            } else {\n                const blanksItemIndex = selectedItems.findIndex(e => e.value === null || e.value === undefined);\n                let blanksItem: any;\n                if (blanksItemIndex >= 0) {\n                    blanksItem = selectedItems[blanksItemIndex];\n                    selectedItems.splice(blanksItemIndex, 1);\n                }\n\n                filterTree.filteringOperands.push({\n                    condition: this.createCondition('in'),\n                    fieldName: this.column.field,\n                    ignoreCase: this.column.filteringIgnoreCase,\n                    searchVal: new Set(this.column.dataType === DataType.Date ?\n                        selectedItems.map(d => new Date(d.value.getFullYear(), d.value.getMonth(), d.value.getDate()).toISOString()) :\n                        selectedItems.map(e => e.value))\n                });\n\n                if (blanksItem) {\n                    filterTree.filteringOperands.push({\n                        condition: this.createCondition('empty'),\n                        fieldName: this.column.field,\n                        ignoreCase: this.column.filteringIgnoreCase,\n                        searchVal: blanksItem.value\n                    });\n                }\n            }\n\n            this.filteringService.filterInternal(this.column.field, filterTree);\n            this.expressionsList = new Array<ExpressionUI>();\n            this.filteringService.generateExpressionsList(this.column.filteringExpressionsTree,\n                this.grid.filteringLogic, this.expressionsList);\n        } else {\n            this.filteringService.clearFilter(this.column.field);\n        }\n\n        this.closeDropdown();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public cancel() {\n        if (!this.overlayComponentId) {\n            this.init();\n        }\n        this.closeDropdown();\n    }\n\n    private closeDropdown() {\n        if (this.overlayComponentId) {\n            this.overlayService.hide(this.overlayComponentId);\n            this.overlayComponentId = null;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onKeyDown(eventArgs) {\n        if (eventArgs.key === KEYS.ESCAPE || eventArgs.key === KEYS.ESCAPE_IE) {\n            this.closeDropdown();\n        }\n        eventArgs.stopPropagation();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public clearFilter() {\n        this.filteringService.clearFilter(this.column.field);\n        this.selectAllFilterItems();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onClearFilterKeyDown(eventArgs) {\n        if (eventArgs.key === KEYS.ENTER) {\n            this.clearFilter();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public showCustomFilterItem(): boolean {\n        const exprTree = this.column.filteringExpressionsTree;\n        return exprTree && exprTree.filteringOperands && exprTree.filteringOperands.length &&\n            !((exprTree.filteringOperands[0] as IFilteringExpression).condition &&\n            (exprTree.filteringOperands[0] as IFilteringExpression).condition.name === 'in');\n    }\n\n    private createCondition(conditionName: string) {\n        switch (this.column.dataType) {\n            case DataType.Boolean:\n                return IgxBooleanFilteringOperand.instance().condition(conditionName);\n            case DataType.Number:\n                return IgxNumberFilteringOperand.instance().condition(conditionName);\n            case DataType.Date:\n                return IgxDateFilteringOperand.instance().condition(conditionName);\n            default:\n                return IgxStringFilteringOperand.instance().condition(conditionName);\n        }\n    }\n}\n","import { AutoPositionStrategy } from '../../../services/overlay/position/auto-position-strategy';\nimport { ConnectedFit } from '../../../services/overlay/utilities';\n\n/** @hidden */\nexport class ExcelStylePositionStrategy extends AutoPositionStrategy {\n    protected shouldFitInViewPort(connectedFit: ConnectedFit) {\n        return true;\n    }\n\n    protected fitInViewport(element: HTMLElement, connectedFit: ConnectedFit) {\n        const heightOverflow = connectedFit.contentElementRect.height - connectedFit.viewPortRect.height;\n        if (heightOverflow > 0) {\n            element.style.width = 'auto';\n            element.style.height = `${connectedFit.viewPortRect.height}px`;\n        } else {\n            element.style.height = `${Math.max(\n                connectedFit.viewPortRect.height - connectedFit.targetRect.bottom - 1,\n                connectedFit.contentElementRect.height)}px`;\n        }\n\n        super.fitInViewport(element, connectedFit);\n    }\n}\n","import { ElasticPositionStrategy } from './../../services/overlay/position/elastic-position-strategy';\nimport {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    DoCheck,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Input,\n    NgZone,\n    OnInit,\n    Inject,\n    OnDestroy,\n    NgModuleRef\n} from '@angular/core';\nimport { DataType } from '../../data-operations/data-util';\nimport { SortingDirection } from '../../data-operations/sorting-expression.interface';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IgxFilteringService } from '../filtering/grid-filtering.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { IgxColumnResizingService } from '../resizing/resizing.service';\nimport { IgxOverlayService } from '../../services/overlay/overlay';\nimport { IgxGridExcelStyleFilteringComponent } from '../filtering/excel-style/grid.excel-style-filtering.component';\nimport { OverlaySettings, PositionSettings, VerticalAlignment } from '../../services/overlay/utilities';\nimport { useAnimation } from '@angular/animations';\nimport { filter, takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { fadeIn, fadeOut } from '../../animations/main';\nimport { AbsoluteScrollStrategy } from '../../services/overlay/scroll/absolute-scroll-strategy';\nimport { GridType } from '../common/grid.interface';\nimport { ExcelStylePositionStrategy } from '../filtering/excel-style/excel-style-position-strategy';\n\n/**\n * @hidden\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-header',\n    templateUrl: './grid-header.component.html'\n})\nexport class IgxGridHeaderComponent implements DoCheck, OnInit, OnDestroy {\n\n    private _componentOverlayId: string;\n    private _filterMenuPositionSettings: PositionSettings;\n    private _filterMenuOverlaySettings: OverlaySettings;\n    private _destroy$ = new Subject<boolean>();\n\n    @Input()\n    public column: IgxColumnComponent;\n\n    @Input()\n    public gridID: string;\n\n    @HostBinding('class')\n    get styleClasses(): string {\n        const defaultClasses = [\n            'igx-grid__th--fw',\n            this.column.headerClasses\n        ];\n\n        const classList = {\n            'igx-grid__th': !this.column.columnGroup,\n            'asc': this.ascending,\n            'desc': this.descending,\n            'igx-grid__th--number': this.column.dataType === DataType.Number,\n            'igx-grid__th--sortable': this.column.sortable,\n            'igx-grid__th--filtrable': this.column.filterable && this.grid.filteringService.isFilterRowVisible,\n            'igx-grid__th--sorted': this.sorted\n        };\n\n        for (const klass of Object.keys(classList)) {\n            if (classList[klass]) {\n                defaultClasses.push(klass);\n            }\n        }\n        return defaultClasses.join(' ');\n    }\n\n    @HostBinding('style.height.rem')\n    get height() {\n        if (this.grid.hasColumnGroups) {\n            return (this.grid.maxLevelHeaderDepth + 1 - this.column.level) * this.grid.defaultRowHeight / this.grid._baseFontSize;\n        }\n        return null;\n    }\n\n    get ascending() {\n        return this.sortDirection === SortingDirection.Asc;\n    }\n\n    get descending() {\n        return this.sortDirection === SortingDirection.Desc;\n    }\n\n    get sortingIcon(): string {\n        if (this.sortDirection !== SortingDirection.None) {\n            // arrow_downward and arrow_upward\n            // are material icons ligature strings\n            return this.sortDirection === SortingDirection.Asc ? 'arrow_upward' : 'arrow_downward';\n        }\n        return 'arrow_upward';\n    }\n\n    get sorted() {\n        return this.sortDirection !== SortingDirection.None;\n    }\n\n    get filterIconClassName() {\n        return this.column.filteringExpressionsTree ? 'igx-excel-filter__icon--filtered' : 'igx-excel-filter__icon';\n    }\n\n    get columnTitle() {\n        return this.column.elementRef.nativeElement.getAttribute('title') ||\n            this.column.header || this.column.field;\n    }\n\n    @HostBinding('attr.role')\n    public hostRole = 'columnheader';\n\n    @HostBinding('attr.tabindex')\n    public tabindex = 0;\n\n    @HostBinding('attr.id')\n    get headerID() {\n        return `${this.gridID}_${this.column.field}`;\n    }\n\n    protected sortDirection = SortingDirection.None;\n\n    constructor(\n        public gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n        public colResizingService: IgxColumnResizingService,\n        public cdr: ChangeDetectorRef,\n        public elementRef: ElementRef,\n        public zone: NgZone,\n        private _filteringService: IgxFilteringService,\n        private _moduleRef: NgModuleRef<any>,\n        @Inject(IgxOverlayService) private _overlayService: IgxOverlayService\n    ) { }\n\n    public ngOnInit() {\n        this.initFilteringSettings();\n    }\n\n    public ngDoCheck() {\n        this.getSortDirection();\n        this.cdr.markForCheck();\n    }\n\n    ngOnDestroy(): void {\n        this._destroy$.next(true);\n        this._destroy$.complete();\n\n        if (this._componentOverlayId) {\n            this._overlayService.hide(this._componentOverlayId);\n        }\n    }\n\n    @HostListener('click', ['$event'])\n    public onClick(event) {\n        if (!this.colResizingService.isColumnResizing) {\n            event.stopPropagation();\n            if (this.grid.filteringService.isFilterRowVisible) {\n                if (this.column.filterable && !this.column.columnGroup &&\n                    !this.grid.filteringService.isFilterComplex(this.column.field)) {\n                    this.grid.filteringService.filteredColumn = this.column;\n                }\n            } else if (this.column.sortable) {\n                this.triggerSort();\n            }\n        }\n    }\n\n    public onFilteringIconClick(event) {\n        event.stopPropagation();\n\n        this.toggleFilterDropdown();\n    }\n\n    get grid(): any {\n        return this.gridAPI.grid;\n    }\n\n    protected getSortDirection() {\n        const expr = this.gridAPI.grid.sortingExpressions.find((x) => x.fieldName === this.column.field);\n        this.sortDirection = expr ? expr.dir : SortingDirection.None;\n    }\n\n    public onSortingIconClick(event) {\n        if (this.grid.filteringService.isFilterRowVisible) {\n            event.stopPropagation();\n            this.triggerSort();\n        }\n    }\n\n    private triggerSort() {\n        const groupingExpr = this.grid.groupingExpressions ?\n            this.grid.groupingExpressions.find((expr) => expr.fieldName === this.column.field) : null;\n        const sortDir = groupingExpr ?\n            this.sortDirection + 1 > SortingDirection.Desc ? SortingDirection.Asc : SortingDirection.Desc\n            : this.sortDirection + 1 > SortingDirection.Desc ? SortingDirection.None : this.sortDirection + 1;\n        this.sortDirection = sortDir;\n        this.grid.sort({ fieldName: this.column.field, dir: this.sortDirection, ignoreCase: this.column.sortingIgnoreCase,\n            strategy: this.column.sortStrategy });\n    }\n\n    private toggleFilterDropdown() {\n        if (!this._componentOverlayId) {\n            const headerTarget = this.elementRef.nativeElement;\n            const filterIconTarget = headerTarget.querySelector('.' + this.filterIconClassName);\n\n            this._filterMenuOverlaySettings.positionStrategy.settings.target = filterIconTarget;\n            this._filterMenuOverlaySettings.outlet = this.grid.outlet;\n\n            this._componentOverlayId =\n                this._overlayService.attach(IgxGridExcelStyleFilteringComponent, this._filterMenuOverlaySettings, this._moduleRef);\n            this._overlayService.show(this._componentOverlayId, this._filterMenuOverlaySettings);\n        }\n    }\n\n    private initFilteringSettings() {\n        this._filterMenuPositionSettings = {\n            verticalStartPoint: VerticalAlignment.Bottom,\n            openAnimation: useAnimation(fadeIn, {\n                params: {\n                    duration: '250ms'\n                }\n            }),\n            closeAnimation: useAnimation(fadeOut, {\n                params: {\n                    duration: '200ms'\n                }\n            })\n        };\n\n        this._filterMenuOverlaySettings = {\n            closeOnOutsideClick: true,\n            modal: false,\n            positionStrategy: new ExcelStylePositionStrategy(this._filterMenuPositionSettings),\n            scrollStrategy: new AbsoluteScrollStrategy()\n        };\n\n        this._overlayService.onOpening.pipe(\n            filter((overlay) => overlay.id === this._componentOverlayId),\n            takeUntil(this._destroy$)).subscribe((eventArgs) => {\n                this.onOverlayOpening(eventArgs);\n            });\n\n        this._overlayService.onClosed.pipe(\n            filter(overlay => overlay.id === this._componentOverlayId),\n            takeUntil(this._destroy$)).subscribe(() => {\n                this.onOverlayClosed();\n            });\n    }\n\n    private onOverlayOpening(eventArgs) {\n        const instance = eventArgs.componentRef.instance as IgxGridExcelStyleFilteringComponent;\n        if (instance) {\n            instance.initialize(this.column, this._overlayService, eventArgs.id);\n        }\n    }\n\n    private onOverlayClosed() {\n        this._componentOverlayId = null;\n    }\n}\n","import {\n    ChangeDetectorRef,\n    Component,\n    Input,\n    TemplateRef,\n    ViewChild,\n    HostBinding,\n    AfterViewInit,\n    ElementRef,\n    HostListener,\n    OnInit,\n    ChangeDetectionStrategy,\n    DoCheck\n} from '@angular/core';\nimport { IgxColumnComponent } from '../../columns/column.component';\nimport { IFilteringExpression } from '../../../data-operations/filtering-expression.interface';\nimport { IBaseChipEventArgs, IgxChipsAreaComponent, IgxChipComponent } from '../../../chips';\nimport { IgxFilteringService, ExpressionUI } from '../grid-filtering.service';\nimport { KEYS } from '../../../core/utils';\n\n/**\n * @hidden\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-filtering-cell',\n    templateUrl: './grid-filtering-cell.component.html'\n})\nexport class IgxGridFilteringCellComponent implements AfterViewInit, OnInit, DoCheck {\n\n    private baseClass = 'igx-grid__filtering-cell-indicator';\n    private currentTemplate = null;\n\n    public expressionsList: ExpressionUI[];\n    public moreFiltersCount = 0;\n\n    @Input()\n    public column: IgxColumnComponent;\n\n    @ViewChild('emptyFilter', { read: TemplateRef, static: true })\n    protected emptyFilter: TemplateRef<any>;\n\n    @ViewChild('defaultFilter', { read: TemplateRef, static: true })\n    protected defaultFilter: TemplateRef<any>;\n\n    @ViewChild('complexFilter', { read: TemplateRef, static: true })\n    protected complexFilter: TemplateRef<any>;\n\n    @ViewChild('chipsArea', { read: IgxChipsAreaComponent })\n    protected chipsArea: IgxChipsAreaComponent;\n\n    @ViewChild('moreIcon', { read: ElementRef })\n    protected moreIcon: ElementRef;\n\n    @ViewChild('ghostChip', { read: IgxChipComponent })\n    protected ghostChip: IgxChipComponent;\n\n    @ViewChild('complexChip', { read: IgxChipComponent })\n    protected complexChip: IgxChipComponent;\n\n    @HostBinding('class.igx-grid__filtering-cell')\n    public cssClass = 'igx-grid__filtering-cell';\n\n    constructor(public cdr: ChangeDetectorRef, public filteringService: IgxFilteringService) {\n        this.filteringService.subscribeToEvents();\n    }\n\n    ngOnInit(): void {\n        this.filteringService.columnToMoreIconHidden.set(this.column.field, true);\n    }\n\n    ngAfterViewInit(): void {\n        this.updateFilterCellArea();\n    }\n\n    public ngDoCheck() {\n        this.updateFilterCellArea();\n    }\n\n    @HostListener('keydown.tab', ['$event'])\n    public onTabKeyDown(eventArgs) {\n\n        if (this.isLastElementFocused()) {\n            this.filteringService.grid.navigation.navigateNextFilterCell(this.column, eventArgs);\n        }\n        eventArgs.stopPropagation();\n    }\n\n    @HostListener('keydown.shift.tab', ['$event'])\n    public onShiftTabKeyDown(eventArgs) {\n        if (this.isFirstElementFocused()) {\n            this.filteringService.grid.navigation.navigatePrevFilterCell(this.column, eventArgs);\n        }\n        eventArgs.stopPropagation();\n    }\n\n    /**\n     * Returns whether a chip with a given index is visible or not.\n     */\n    public isChipVisible(index: number) {\n        const expression = this.expressionsList[index];\n        return !!(expression && expression.isVisible);\n    }\n\n    /**\n     * Updates the filtering cell area.\n     */\n    public updateFilterCellArea() {\n        this.expressionsList = this.filteringService.getExpressions(this.column.field);\n        this.updateVisibleFilters();\n    }\n\n    get template(): TemplateRef<any> {\n        if (!this.column.filterable) {\n            this.currentTemplate = null;\n            return null;\n        }\n\n        if (this.column.filterCellTemplate) {\n            this.currentTemplate = this.column.filterCellTemplate;\n            return this.column.filterCellTemplate;\n        }\n\n        const expressionTree = this.column.filteringExpressionsTree;\n        if (!expressionTree || expressionTree.filteringOperands.length === 0) {\n            this.currentTemplate = this.emptyFilter;\n            return this.emptyFilter;\n        }\n\n        if (this.filteringService.isFilterComplex(this.column.field)) {\n            this.currentTemplate = this.complexFilter;\n            return this.complexFilter;\n        }\n\n        this.currentTemplate = this.defaultFilter;\n        return this.defaultFilter;\n    }\n\n    /**\n     * Gets the context passed to the filter template.\n     * @memberof IgxGridFilteringCellComponent\n     */\n    get context() {\n        return {\n            column: this.column\n        };\n    }\n\n    /**\n     * Chip clicked event handler.\n     */\n    public onChipClicked(expression?: IFilteringExpression) {\n        if (expression) {\n            this.expressionsList.forEach((item) => {\n                item.isSelected = (item.expression === expression);\n            });\n        } else if (this.expressionsList.length > 0) {\n            this.expressionsList.forEach((item) => {\n                item.isSelected = false;\n            });\n            this.expressionsList[0].isSelected = true;\n        }\n\n        const index = this.filteringService.unpinnedFilterableColumns.indexOf(this.column);\n        if (index >= 0 && !this.isColumnRightVisible(index)) {\n            this.filteringService.scrollToFilterCell(this.filteringService.unpinnedFilterableColumns[index], true);\n        } else if (index >= 0 && !this.isColumnLeftVisible(index)) {\n            this.filteringService.scrollToFilterCell(this.filteringService.unpinnedFilterableColumns[index], false);\n        }\n\n        this.filteringService.filteredColumn = this.column;\n        this.filteringService.isFilterRowVisible = true;\n        this.filteringService.selectedExpression = expression;\n    }\n\n    /**\n     * Chip removed event handler.\n     */\n    public onChipRemoved(eventArgs: IBaseChipEventArgs, item: ExpressionUI): void {\n        const indexToRemove = this.expressionsList.indexOf(item);\n        this.removeExpression(indexToRemove);\n        this.focusChip();\n    }\n\n    /**\n     * Clears the filtering.\n     */\n    public clearFiltering(): void {\n        this.filteringService.clearFilter(this.column.field);\n        this.cdr.detectChanges();\n    }\n\n    /**\n     * Chip keydown event handler.\n     */\n    public onChipKeyDown(eventArgs: KeyboardEvent, expression?: IFilteringExpression) {\n        if (eventArgs.key === KEYS.ENTER) {\n            eventArgs.preventDefault();\n            this.onChipClicked(expression);\n        }\n    }\n\n    /**\n     * Returns the filtering indicator class.\n     */\n    public filteringIndicatorClass() {\n        return {\n            [this.baseClass]: !this.isMoreIconHidden(),\n            [`${this.baseClass}--hidden`]: this.isMoreIconHidden()\n        };\n    }\n\n    /**\n     * Focus a chip depending on the current visible template.\n     */\n    public focusChip(focusFirst: boolean = false) {\n        if (this.currentTemplate === this.defaultFilter) {\n            if (focusFirst) {\n                this.focusFirstElement();\n            } else {\n                this.focusElement();\n            }\n        } else if (this.currentTemplate === this.emptyFilter) {\n            this.ghostChip.elementRef.nativeElement.querySelector(`.igx-chip__item`).focus();\n        } else if (this.currentTemplate === this.complexFilter) {\n            this.complexChip.elementRef.nativeElement.querySelector(`.igx-chip__item`).focus();\n        }\n    }\n\n    private removeExpression(indexToRemove: number) {\n        if (indexToRemove === 0 && this.expressionsList.length === 1) {\n            this.clearFiltering();\n            return;\n        }\n\n        this.filteringService.removeExpression(this.column.field, indexToRemove);\n\n        this.updateVisibleFilters();\n        this.filteringService.filterInternal(this.column.field);\n    }\n\n    private isMoreIconHidden(): boolean {\n        return this.filteringService.columnToMoreIconHidden.get(this.column.field);\n    }\n\n    private updateVisibleFilters() {\n        this.expressionsList.forEach((ex) => ex.isVisible = true);\n\n        if (this.moreIcon) {\n            this.filteringService.columnToMoreIconHidden.set(this.column.field, true);\n        }\n        this.cdr.detectChanges();\n\n        if (this.chipsArea && this.expressionsList.length > 1) {\n            const areaWidth = this.chipsArea.element.nativeElement.offsetWidth;\n            let viewWidth = 0;\n            const chipsAreaElements = this.chipsArea.element.nativeElement.children;\n            let visibleChipsCount = 0;\n            const moreIconWidth = this.moreIcon.nativeElement.offsetWidth -\n                parseInt(document.defaultView.getComputedStyle(this.moreIcon.nativeElement)['margin-left'], 10);\n\n            for (let index = 0; index < chipsAreaElements.length - 1; index++) {\n                if (viewWidth + chipsAreaElements[index].offsetWidth < areaWidth) {\n                    viewWidth += chipsAreaElements[index].offsetWidth;\n                    if (index % 2 === 0) {\n                        visibleChipsCount++;\n                    } else {\n                        viewWidth += parseInt(document.defaultView.getComputedStyle(chipsAreaElements[index])['margin-left'], 10);\n                        viewWidth += parseInt(document.defaultView.getComputedStyle(chipsAreaElements[index])['margin-right'], 10);\n                    }\n                } else {\n                    if (index % 2 !== 0 && viewWidth + moreIconWidth > areaWidth) {\n                        visibleChipsCount--;\n                    } else if (visibleChipsCount > 0 && viewWidth - chipsAreaElements[index - 1].offsetWidth + moreIconWidth > areaWidth) {\n                        visibleChipsCount--;\n                    }\n                    this.moreFiltersCount = this.expressionsList.length - visibleChipsCount;\n                    this.filteringService.columnToMoreIconHidden.set(this.column.field, false);\n                    break;\n                }\n            }\n\n            for (let i = visibleChipsCount; i < this.expressionsList.length; i++) {\n                this.expressionsList[i].isVisible = false;\n            }\n            this.cdr.detectChanges();\n        }\n    }\n\n    private isFirstElementFocused(): boolean {\n        return !(this.chipsArea && this.chipsArea.chipsList.length > 0 &&\n            this.chipsArea.chipsList.first.elementRef.nativeElement.querySelector(`.igx-chip__item`) !== document.activeElement);\n    }\n\n    private isLastElementFocused(): boolean {\n        if (this.chipsArea) {\n            if (this.isMoreIconHidden() && this.chipsArea.chipsList.last.elementRef.nativeElement.querySelector(`.igx-chip__remove`) !==\n                document.activeElement) {\n                return false;\n            } else if (!this.isMoreIconHidden() && this.moreIcon.nativeElement !== document.activeElement) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    private focusFirstElement(): void {\n        if (this.chipsArea.chipsList.length > 0) {\n            this.chipsArea.chipsList.first.elementRef.nativeElement.querySelector(`.igx-chip__item`).focus();\n        } else {\n            this.moreIcon.nativeElement.focus();\n        }\n    }\n\n    private focusElement(): void {\n        if (this.filteringService.shouldFocusNext) {\n            if (!this.isMoreIconHidden() && this.chipsArea.chipsList.length === 0) {\n                this.moreIcon.nativeElement.focus();\n            } else {\n                this.chipsArea.chipsList.first.elementRef.nativeElement.querySelector(`.igx-chip__item`).focus();\n            }\n        } else {\n            if (!this.isMoreIconHidden()) {\n                this.moreIcon.nativeElement.focus();\n            } else {\n                this.chipsArea.chipsList.last.elementRef.nativeElement.querySelector(`.igx-chip__remove`).focus();\n            }\n        }\n    }\n\n    private isColumnRightVisible(columnIndex: number): boolean {\n        if (this.filteringService.areAllColumnsInView) {\n            return true;\n        }\n        let currentColumnRight = 0;\n        for (let index = 0; index < this.filteringService.unpinnedColumns.length; index++) {\n            currentColumnRight += parseInt(this.filteringService.unpinnedColumns[index].width, 10);\n            if (this.filteringService.unpinnedColumns[index] === this.filteringService.unpinnedFilterableColumns[columnIndex]) {\n                break;\n            }\n        }\n        const width = this.filteringService.displayContainerWidth + this.filteringService.displayContainerScrollLeft;\n        return currentColumnRight <= width;\n    }\n\n    private isColumnLeftVisible(columnIndex: number): boolean {\n        if (this.filteringService.areAllColumnsInView) {\n            return true;\n        }\n        let currentColumnLeft = 0;\n        for (let index = 0; index < this.filteringService.unpinnedColumns.length; index++) {\n            if (this.filteringService.unpinnedColumns[index] === this.filteringService.unpinnedFilterableColumns[columnIndex]) {\n                break;\n            }\n            currentColumnLeft += parseInt(this.filteringService.unpinnedColumns[index].width, 10);\n        }\n        return currentColumnLeft >= this.filteringService.displayContainerScrollLeft;\n    }\n}\n","import {\n    Component,\n    HostBinding,\n    Input,\n    ViewChild,\n    QueryList,\n    ViewChildren,\n    forwardRef,\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    DoCheck,\n    ElementRef,\n    HostListener\n} from '@angular/core';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IgxFilteringService } from '../filtering/grid-filtering.service';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { IgxColumnResizingService } from '../resizing/resizing.service';\nimport { IgxGridHeaderComponent } from './grid-header.component';\nimport { IgxGridFilteringCellComponent } from '../filtering/base/grid-filtering-cell.component';\nimport { isIE } from '../../core/utils';\nimport { GridType } from '../common/grid.interface';\n\nconst Z_INDEX = 9999;\n\n/**\n * @hidden\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-header-group',\n    templateUrl: './grid-header-group.component.html'\n})\nexport class IgxGridHeaderGroupComponent implements DoCheck {\n\n    @HostBinding('style.-ms-grid-row-span')\n    get gridRowSpan(): number {\n        return this.column.gridRowSpan;\n    }\n\n    @HostBinding('style.-ms-grid-column-span')\n    get gridColumnSpan(): number {\n        return this.column.gridColumnSpan;\n    }\n\n\n    @HostBinding('style.grid-row-end')\n    get rowEnd(): number {\n        return this.column.rowEnd;\n    }\n\n    @HostBinding('style.grid-column-end')\n    get colEnd(): number {\n        return this.column.colEnd;\n    }\n\n    @HostBinding('style.-ms-grid-row')\n    @HostBinding('style.grid-row-start')\n    get rowStart(): number {\n        return this.column.rowStart;\n    }\n\n    @HostBinding('style.-ms-grid-column')\n    @HostBinding('style.grid-column-start')\n    get colStart(): number {\n        return this.column.colStart;\n    }\n\n    /**\n     * Gets the column of the header group.\n     * @memberof IgxGridHeaderGroupComponent\n     */\n    @Input()\n    public column: IgxColumnComponent;\n\n    /**\n     * Gets the `id` of the grid in which the header group is stored.\n     * @memberof IgxGridHeaderGroupComponent\n     */\n    @Input()\n    public gridID: string;\n\n    /**\n     * @hidden\n     */\n    @ViewChild(IgxGridHeaderComponent)\n    public headerCell: IgxGridHeaderComponent;\n\n    /**\n     * @hidden\n     */\n    @ViewChild(IgxGridFilteringCellComponent)\n    public filterCell: IgxGridFilteringCellComponent;\n\n    /**\n     * @hidden\n     */\n    @ViewChildren(forwardRef(() => IgxGridHeaderGroupComponent), { read: IgxGridHeaderGroupComponent })\n    public children: QueryList<IgxGridHeaderGroupComponent>;\n\n    /**\n     * Gets the width of the header group.\n     * @memberof IgxGridHeaderGroupComponent\n     */\n    get width() {\n        return this.grid.getHeaderGroupWidth(this.column);\n    }\n\n    /**\n     * Gets the style classes of the header group.\n     * @memberof IgxGridHeaderGroupComponent\n     */\n    @HostBinding('class')\n    get styleClasses(): string {\n        const defaultClasses = [\n            'igx-grid__thead-item',\n            this.column.headerGroupClasses\n        ];\n\n        const classList = {\n            'igx-grid__th--pinned': this.isPinned,\n            'igx-grid__th--pinned-last': this.isLastPinned,\n            'igx-grid__drag-col-header': this.isHeaderDragged,\n            'igx-grid__th--filtering': this.isFiltered\n        };\n\n        for (const className of Object.keys(classList)) {\n            if (classList[className]) {\n                defaultClasses.push(className);\n            }\n        }\n        return defaultClasses.join(' ');\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.z-index')\n    get zIndex() {\n        if (!this.column.pinned) {\n            return null;\n        }\n        return Z_INDEX - this.grid.pinnedColumns.indexOf(this.column);\n    }\n\n    /**\n     * Gets the grid of the header group.\n     * @memberof IgxGridHeaderGroupComponent\n     */\n    get grid(): any {\n        return this.gridAPI.grid;\n    }\n\n    /**\n     * Gets whether the header group belongs to a column that is filtered.\n     * @memberof IgxGridHeaderGroupComponent\n     */\n    get isFiltered(): boolean {\n        return this.filteringService.filteredColumn === this.column;\n    }\n\n    /**\n     * Gets whether the header group is stored in the last column in the pinned area.\n     * @memberof IgxGridHeaderGroupComponent\n     */\n    get isLastPinned(): boolean {\n        return !this.grid.hasColumnLayouts ? this.column.isLastPinned : false;\n    }\n\n    @HostBinding('style.display')\n    get groupDisplayStyle(): string {\n        return this.grid.hasColumnLayouts && this.column.children && !isIE() ? 'flex' : '';\n    }\n\n    /**\n     * Gets whether the header group is stored in a pinned column.\n     * @memberof IgxGridHeaderGroupComponent\n     */\n    get isPinned(): boolean {\n        return this.column.pinned;\n    }\n\n    /**\n     * Gets whether the header group belongs to a column that is moved.\n     * @memberof IgxGridHeaderGroupComponent\n     */\n    get isHeaderDragged(): boolean {\n        return this.grid.draggedColumn ===  this.column;\n    }\n\n    /**\n     * @hidden\n     */\n    get hasLastPinnedChildColumn(): boolean {\n        return this.column.allChildren.some(child => child.isLastPinned);\n    }\n\n    /**\n     * @hidden\n     */\n    get height() {\n        return this.element.nativeElement.getBoundingClientRect().height;\n    }\n\n    /**\n     * @hidden\n     */\n    get columnTitle() {\n        return this.column.elementRef.nativeElement.getAttribute('title') || this.column.header;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('mousedown', ['$event'])\n    public onMouseDown(event): void {\n        // hack for preventing text selection in IE and Edge while dragging the resizer\n        event.preventDefault();\n    }\n\n    public ngDoCheck() {\n        this.cdr.markForCheck();\n    }\n\n    constructor(private cdr: ChangeDetectorRef,\n                public gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n                public element: ElementRef,\n                public colResizingService: IgxColumnResizingService,\n                public filteringService: IgxFilteringService) { }\n}\n","import { Injectable} from '@angular/core';\nimport { IgxSummaryResult } from './grid-summary';\nimport { DataUtil } from '../../data-operations/data-util';\nimport { cloneArray } from '../../core/utils';\n\n/** @hidden */\n@Injectable()\nexport class IgxGridSummaryService {\n    protected summaryCacheMap: Map<string, Map<string, any[]>> = new Map<string, Map<string, IgxSummaryResult[]>>();\n    public grid;\n    public rootSummaryID = 'igxGridRootSummary';\n    public summaryHeight = 0;\n    public maxSummariesLenght = 0;\n    public groupingExpressions = [];\n    public retriggerRootPipe = 0;\n    public deleteOperation = false;\n\n    public recalculateSummaries() {\n        this.resetSummaryHeight();\n        this.grid.notifyChanges(true);\n    }\n\n    public clearSummaryCache(args?) {\n        if (!this.summaryCacheMap.size) { return; }\n        if (!args) {\n            this.summaryCacheMap.clear();\n            if (this.grid && this.grid.rootSummariesEnabled) {\n                this.retriggerRootPipe++;\n            }\n            return;\n        }\n        if (args.data) {\n            const rowID = this.grid.primaryKey ? args.data[this.grid.primaryKey] : args.data;\n            this.removeSummaries(rowID);\n        }\n        if (args.rowID !== undefined && args.rowID !== null) {\n            let columnName = args.cellID ? this.grid.columnList.find(col => col.index === args.cellID.columnID).field : undefined;\n            if (columnName && this.grid.rowEditable) { return; }\n\n            const isGroupedColumn = this.grid.groupingExpressions &&\n                    this.grid.groupingExpressions.map(expr => expr.fieldName).indexOf(columnName) !== -1;\n            if (columnName && isGroupedColumn ) {\n                columnName = undefined;\n            }\n            this.removeSummaries(args.rowID, columnName);\n        }\n    }\n\n    public removeSummaries(rowID, columnName?) {\n        this.deleteSummaryCache(this.rootSummaryID, columnName);\n        if (this.summaryCacheMap.size === 1 && this.summaryCacheMap.has(this.rootSummaryID)) { return; }\n        if (this.isTreeGrid) {\n            if (this.grid.transactions.enabled && this.deleteOperation) {\n                this.deleteOperation = false;\n                // TODO: this.removeChildRowSummaries(rowID, columnName);\n                this.summaryCacheMap.clear();\n                return;\n            }\n            this.removeAllTreeGridSummaries(rowID, columnName);\n        } else if (this.isHierarchicalGrid) {\n            if (this.grid.transactions.enabled && this.deleteOperation) {\n                this.deleteOperation = false;\n                this.summaryCacheMap.clear();\n            }\n        } else {\n           const summaryIds = this.getSummaryID(rowID, this.grid.groupingExpressions);\n           summaryIds.forEach(id => {\n               this.deleteSummaryCache(id, columnName);\n           });\n        }\n    }\n\n    public removeSummariesCachePerColumn(columnName) {\n        this.summaryCacheMap.forEach((cache) => {\n            if (cache.get(columnName)) {\n                cache.delete(columnName);\n            }\n        });\n        if (this.grid.rootSummariesEnabled) {  this.retriggerRootPipe++; }\n    }\n\n    public calcMaxSummaryHeight() {\n        if (this.summaryHeight) {\n            return this.summaryHeight;\n        }\n        if (!this.grid.data) {return this.summaryHeight = 0; }\n        let maxSummaryLength = 0;\n        this.grid.columnList.filter((col) => col.hasSummary && !col.hidden).forEach((column) => {\n            const getCurrentSummaryColumn = column.summaries.operate([], [], column.field).length;\n            if (getCurrentSummaryColumn) {\n                if (maxSummaryLength < getCurrentSummaryColumn) {\n                    maxSummaryLength = getCurrentSummaryColumn;\n                }\n            }\n        });\n        this.maxSummariesLenght = maxSummaryLength;\n        this.summaryHeight =  maxSummaryLength * this.grid.defaultSummaryHeight;\n        return this.summaryHeight;\n    }\n\n    public calculateSummaries(rowID, data) {\n        let rowSummaries = this.summaryCacheMap.get(rowID);\n        if (!rowSummaries) {\n            rowSummaries = new Map<string, IgxSummaryResult[]>();\n            this.summaryCacheMap.set(rowID, rowSummaries);\n        }\n        if (!this.hasSummarizedColumns || !data) {return rowSummaries; }\n        this.grid.columnList.filter(col => col.hasSummary).forEach((column) => {\n            if (!rowSummaries.get(column.field)) {\n                rowSummaries.set(column.field,\n                    column.summaries.operate(data.map(r => r[column.field]), data, column.field));\n            }\n        });\n        return rowSummaries;\n    }\n\n    public resetSummaryHeight() {\n        this.summaryHeight = 0;\n        (this.grid as any)._summaryPipeTrigger++;\n        if (this.grid.rootSummariesEnabled) {\n            this.retriggerRootPipe++;\n        }\n    }\n\n    public updateSummaryCache(groupingArgs) {\n        if (this.summaryCacheMap.size === 0 || !this.hasSummarizedColumns) { return; }\n        if (this.groupingExpressions.length === 0) {\n            this.groupingExpressions = groupingArgs.expressions.map(record => record.fieldName);\n            return;\n        }\n        if (groupingArgs.length === 0) {\n            this.groupingExpressions = [];\n            this.clearSummaryCache();\n            return;\n        }\n        this.compareGroupingExpressions(this.groupingExpressions, groupingArgs);\n        this.groupingExpressions = groupingArgs.expressions.map(record => record.fieldName);\n    }\n\n    public get hasSummarizedColumns(): boolean {\n        const summarizedColumns = this.grid.columnList.filter(col => col.hasSummary && !col.hidden);\n        return summarizedColumns.length > 0;\n    }\n\n    private deleteSummaryCache(id, columnName) {\n        if (this.summaryCacheMap.get(id)) {\n            const filteringApplied = columnName && this.grid.filteringExpressionsTree &&\n                    this.grid.filteringExpressionsTree.filteringOperands.map((expr) => expr.fieldName).indexOf(columnName) !== -1;\n            if (columnName && this.summaryCacheMap.get(id).get(columnName) && !filteringApplied) {\n                this.summaryCacheMap.get(id).delete(columnName);\n            } else {\n                this.summaryCacheMap.delete(id);\n            }\n            if (id === this.rootSummaryID && this.grid.rootSummariesEnabled) {\n                this.retriggerRootPipe++;\n            }\n        }\n    }\n\n    private getSummaryID(rowID, groupingExpressions) {\n        if (groupingExpressions.length === 0) { return []; }\n        const summaryIDs = [];\n        let data = this.grid.data;\n        if (this.grid.transactions.enabled) {\n            data = DataUtil.mergeTransactions(\n                cloneArray(this.grid.data),\n                this.grid.transactions.getAggregatedChanges(true),\n                this.grid.primaryKey\n            );\n        }\n        const rowData = this.grid.primaryKey ? data.find(rec => rec[this.grid.primaryKey] === rowID) : rowID;\n        let id = '{ ';\n        groupingExpressions.forEach(expr => {\n            id += `'${expr.fieldName}': '${rowData[expr.fieldName]}'`;\n                summaryIDs.push(id.concat(' }'));\n                id += ', ';\n        });\n        return summaryIDs;\n    }\n\n    private removeAllTreeGridSummaries(rowID, columnName?) {\n        let row = this.grid.records.get(rowID);\n        if (!row) { return; }\n        row = row.children ? row : row.parent;\n        while (row) {\n            rowID = row.rowID;\n            this.deleteSummaryCache(rowID, columnName);\n            row = row.parent;\n        }\n    }\n\n    // TODO: remove only deleted rows\n    private removeChildRowSummaries(rowID, columnName?) {\n    }\n\n    private compareGroupingExpressions(current, groupingArgs) {\n        const newExpressions = groupingArgs.expressions.map(record => record.fieldName);\n        const removedCols = groupingArgs.ungroupedColumns;\n        if (current.length <= newExpressions.length) {\n            const newExpr = newExpressions.slice(0, current.length).toString();\n            if (current.toString() !== newExpr) {\n                this.clearSummaryCache();\n            }\n        } else {\n            const currExpr = current.slice(0, newExpressions.length).toString();\n            if (currExpr !== newExpressions.toString()) {\n                this.clearSummaryCache();\n                return;\n            }\n            removedCols.map(col => col.field).forEach(colName => {\n                this.summaryCacheMap.forEach((cache, id) => {\n                   if (id.indexOf(colName) !== -1) {\n                       this.summaryCacheMap.delete(id);\n                   }});\n            });\n        }\n    }\n\n    private get isTreeGrid() {\n        return this.grid.nativeElement.tagName.toLowerCase() === 'igx-tree-grid';\n    }\n\n    private get isHierarchicalGrid() {\n        return this.grid.nativeElement.tagName.toLowerCase() === 'igx-hierarchical-grid';\n    }\n\n}\n","import { Component, Input, HostBinding, HostListener, ChangeDetectionStrategy, ElementRef } from '@angular/core';\nimport { IgxSummaryResult } from './grid-summary';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { DataType } from '../../data-operations/data-util';\nimport { ISelectionNode } from '../selection/selection.service';\nimport { SUPPORTED_KEYS } from '../../core/utils';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-summary-cell',\n    templateUrl: './summary-cell.component.html'\n})\nexport class IgxSummaryCellComponent {\n\n    @Input()\n    public summaryResults: IgxSummaryResult[];\n\n    @Input()\n    public column: IgxColumnComponent;\n\n    @Input()\n    public firstCellIndentation = 0;\n\n    @Input()\n    public hasSummary = false;\n\n    @Input()\n    public density;\n\n    constructor(private element: ElementRef) {\n    }\n\n    @Input()\n    @HostBinding('attr.data-rowIndex')\n    public rowIndex: number;\n\n    @HostBinding('attr.data-visibleIndex')\n    get visibleColumnIndex(): number {\n        return this.column.visibleIndex;\n    }\n\n    @HostBinding('attr.tabindex')\n    public tabindex = 0;\n\n    @HostBinding('attr.aria-describedby')\n    public get describeby() {\n        return `Summary_${this.column.field}`;\n    }\n\n    @HostBinding('class.igx-grid-summary--active')\n    public focused: boolean;\n\n    @HostListener('focus')\n    public onFocus() {\n        this.focused = true;\n    }\n\n    @HostListener('blur')\n    public onBlur() {\n        this.focused = false;\n    }\n\n    protected get selectionNode(): ISelectionNode {\n        return {\n            row: this.rowIndex,\n            column: this.column.columnLayoutChild ? this.column.parent.visibleIndex : this.visibleColumnIndex,\n            isSummaryRow: true\n        };\n    }\n\n    @HostListener('keydown', ['$event'])\n    dispatchEvent(event: KeyboardEvent) {\n        // TODO: Refactor\n        const key = event.key.toLowerCase();\n        const ctrl = event.ctrlKey;\n        const shift = event.shiftKey;\n\n        if (!SUPPORTED_KEYS.has(key)) {\n            return;\n        }\n        event.stopPropagation();\n        const args = { targetType: 'summaryCell', target: this, event: event, cancel: false };\n        this.grid.onGridKeydown.emit(args);\n        if (args.cancel) {\n            return;\n        }\n        event.preventDefault();\n\n        if (!this.isKeySupportedInCell(key, ctrl)) { return; }\n\n        this.grid.selectionService.keyboardState.shift = shift && !(key === 'tab');\n        const row = this.getRowElementByIndex(this.rowIndex);\n        switch (key) {\n            case 'tab':\n                if (shift) {\n                    this.grid.navigation.performShiftTabKey(row, this.selectionNode);\n                    break;\n                }\n                this.grid.navigation.performTab(row, this.selectionNode);\n                break;\n            case 'arrowleft':\n            case 'home':\n            case 'left':\n                if (ctrl || key === 'home') {\n                    this.grid.navigation.onKeydownHome(this.rowIndex, true);\n                    break;\n                }\n                this.grid.navigation.onKeydownArrowLeft(this.nativeElement, this.selectionNode);\n                break;\n            case 'end':\n            case 'arrowright':\n            case 'right':\n                if (ctrl || key === 'end') {\n                    this.grid.navigation.onKeydownEnd(this.rowIndex, true);\n                    break;\n                }\n                this.grid.navigation.onKeydownArrowRight(this.nativeElement, this.selectionNode);\n                break;\n            case 'arrowup':\n            case 'up':\n                    this.grid.navigation.navigateUp(row, this.selectionNode);\n                break;\n            case 'arrowdown':\n            case 'down':\n                    this.grid.navigation.navigateDown(row, this.selectionNode);\n                break;\n        }\n    }\n\n    get width() {\n        return this.column.getCellWidth();\n    }\n\n    get nativeElement(): any {\n        return this.element.nativeElement;\n    }\n\n    get columnDatatype(): DataType {\n        return this.column.dataType;\n    }\n\n    get itemHeight() {\n        return this.column.grid.defaultSummaryHeight;\n    }\n\n    /**\n    * @hidden\n    */\n    public get grid() {\n        return (this.column.grid as any);\n    }\n\n    private getRowElementByIndex(rowIndex) {\n        const summaryRows = this.grid.summariesRowList.toArray();\n        return summaryRows.find((sr) => sr.dataRowIndex === rowIndex).nativeElement;\n    }\n\n    private isKeySupportedInCell(key, ctrl) {\n        if (ctrl) {\n           return ['arrowup', 'arrowdown', 'up', 'down', 'end', 'home'].indexOf(key) === -1;\n        }\n        return ['down', 'up', 'left', 'right', 'arrowdown', 'arrowup', 'arrowleft', 'arrowright', 'home', 'end', 'tab'].indexOf(key) !== -1;\n    }\n\n    public translateSummary(summary: IgxSummaryResult): string {\n        return this.grid.resourceStrings[`igx_grid_summary_${summary.key}`] || summary.label;\n    }\n}\n","import {\n    Component,\n    Input,\n    ViewChildren,\n    QueryList,\n    HostBinding,\n    ViewChild,\n    ElementRef,\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    DoCheck\n} from '@angular/core';\nimport { IgxSummaryResult } from './grid-summary';\nimport { IgxSummaryCellComponent } from './summary-cell.component';\nimport { IgxGridForOfDirective } from '../../directives/for-of/for_of.directive';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IgxForOfSyncService } from '../../directives/for-of/for_of.sync.service';\nimport { GridType } from '../common/grid.interface';\n\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-summary-row',\n    templateUrl: './summary-row.component.html',\n    providers: [IgxForOfSyncService]\n})\nexport class IgxSummaryRowComponent implements DoCheck  {\n\n    @Input()\n    public summaries: Map<string, IgxSummaryResult[]>;\n\n    @Input()\n    public gridID;\n\n    @Input()\n    public index: number;\n\n    @Input()\n    public firstCellIndentation = -1;\n\n    @HostBinding('attr.data-rowIndex')\n    get dataRowIndex() {\n        return this.index;\n    }\n\n    get minHeight() {\n        return this.grid.summaryService.calcMaxSummaryHeight() - 1;\n    }\n\n    @ViewChildren(IgxSummaryCellComponent, { read: IgxSummaryCellComponent })\n    public summaryCells: QueryList<IgxSummaryCellComponent>;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('igxDirRef', { read: IgxGridForOfDirective })\n    public virtDirRow: IgxGridForOfDirective<any>;\n\n    constructor(public gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n                public element: ElementRef,\n                public cdr: ChangeDetectorRef) {}\n\n    public ngDoCheck() {\n        this.cdr.markForCheck();\n    }\n\n    public get grid() {\n        return this.gridAPI.grid;\n    }\n\n    public get nativeElement() {\n        return this.element.nativeElement;\n    }\n\n    public getColumnSummaries(columnName) {\n        if (!this.summaries.get(columnName)) {\n            return [];\n        }\n        return this.summaries.get(columnName);\n\n    }\n\n    /**\n     * @hidden\n     */\n    public get pinnedColumns(): IgxColumnComponent[] {\n        return this.grid.pinnedColumns;\n    }\n\n    /**\n     * @hidden\n     */\n    public get unpinnedColumns(): IgxColumnComponent[] {\n        return this.grid.unpinnedColumns;\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { IgxColumnComponent } from '../columns/column.component';\n\n/**\n * @hidden\n * @internal\n */\nexport enum DropPosition {\n    BeforeDropTarget,\n    AfterDropTarget,\n    None\n}\n\n\n/**\n * @hidden\n * @internal\n */\n@Injectable({\n    providedIn: 'root',\n})\nexport class IgxColumnMovingService {\n    private _icon: any;\n    private _column: IgxColumnComponent;\n\n    public cancelDrop: boolean;\n    public isColumnMoving: boolean;\n\n    get column(): IgxColumnComponent {\n        return this._column;\n    }\n    set column(val: IgxColumnComponent) {\n        if (val) {\n            this._column = val;\n        }\n    }\n\n    get icon(): any {\n        return this._icon;\n    }\n    set icon(val: any) {\n        if (val) {\n            this._icon = val;\n        }\n    }\n}\n","import {\n    Directive,\n    ElementRef,\n    Inject,\n    Input,\n    NgZone,\n    Output,\n    OnInit,\n    OnDestroy,\n} from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { Subject, fromEvent, animationFrameScheduler, interval } from 'rxjs';\nimport { map, switchMap, takeUntil, throttle } from 'rxjs/operators';\n\n/**\n * @hidden\n * @internal\n */\n@Directive({\n    selector: '[igxResizer]'\n})\nexport class IgxColumnResizerDirective implements OnInit, OnDestroy {\n\n    @Input()\n    public restrictHResizeMin: number = Number.MIN_SAFE_INTEGER;\n\n    @Input()\n    public restrictHResizeMax: number = Number.MAX_SAFE_INTEGER;\n\n    @Output()\n    public resizeEnd = new Subject<any>();\n\n    @Output()\n    public resizeStart = new Subject<any>();\n\n    @Output()\n    public resize = new Subject<any>();\n\n    private _left;\n    private _destroy = new Subject<boolean>();\n\n    constructor(public element: ElementRef, @Inject(DOCUMENT) public document, public zone: NgZone) {\n\n        this.resizeStart.pipe(\n            map((event) => event.clientX),\n            takeUntil(this._destroy),\n            switchMap((offset) => this.resize.pipe(\n                map((event) => event.clientX - offset),\n                takeUntil(this.resizeEnd),\n                takeUntil(this._destroy)\n            ))\n        ).subscribe((pos) => {\n\n            const left = this._left + pos;\n\n            const min = this._left - this.restrictHResizeMin;\n            const max = this._left + this.restrictHResizeMax;\n\n            this.left = left < min ? min : left;\n\n            if (left > max) {\n                this.left = max;\n            }\n        });\n\n    }\n\n    ngOnInit() {\n        this.zone.runOutsideAngular(() => {\n            fromEvent(this.document.defaultView, 'mousemove').pipe(\n                throttle(() => interval(0, animationFrameScheduler)),\n                takeUntil(this._destroy)\n            ).subscribe((res) => this.onMousemove(res));\n\n            fromEvent(this.document.defaultView, 'mouseup').pipe(takeUntil(this._destroy))\n                .subscribe((res) => this.onMouseup(res));\n        });\n    }\n\n    ngOnDestroy() {\n        this._destroy.next(true);\n        this._destroy.complete();\n    }\n\n    public set left(val) {\n        requestAnimationFrame(() => this.element.nativeElement.style.left = val + 'px');\n    }\n\n    public set top(val) {\n        requestAnimationFrame(() => this.element.nativeElement.style.top = val + 'px');\n    }\n\n    onMouseup(event) {\n        this.resizeEnd.next(event);\n        this.resizeEnd.complete();\n    }\n\n    onMousedown(event) {\n        event.preventDefault();\n        const parent = this.element.nativeElement.parentElement.parentElement;\n\n        this.left = this._left = event.clientX - parent.getBoundingClientRect().left;\n        this.top = event.target.getBoundingClientRect().top - parent.getBoundingClientRect().top;\n\n        this.resizeStart.next(event);\n    }\n\n    onMousemove(event) {\n        event.preventDefault();\n        this.resize.next(event);\n    }\n}\n","import { ChangeDetectionStrategy, Component, ViewChild } from '@angular/core';\nimport { IgxColumnResizingService } from './resizing.service';\nimport { IgxColumnResizerDirective } from './resizer.directive';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-column-resizer',\n    templateUrl: './resizer.component.html'\n})\nexport class IgxGridColumnResizerComponent {\n    constructor(public colResizingService: IgxColumnResizingService) { }\n\n    @ViewChild(IgxColumnResizerDirective, { static: true })\n    public resizer: IgxColumnResizerDirective;\n}\n","import {\n    AfterViewInit,\n    ChangeDetectorRef,\n    Component,\n    Input,\n    TemplateRef,\n    ViewChild,\n    ViewChildren,\n    QueryList,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    ChangeDetectionStrategy,\n    ViewRef\n} from '@angular/core';\nimport { DataType, DataUtil } from '../../../data-operations/data-util';\nimport { IgxColumnComponent } from '../../columns/column.component';\nimport { IgxDropDownComponent, ISelectionEventArgs } from '../../../drop-down/index';\nimport { IFilteringOperation } from '../../../data-operations/filtering-condition';\nimport { FilteringLogic, IFilteringExpression } from '../../../data-operations/filtering-expression.interface';\nimport { HorizontalAlignment, VerticalAlignment, OverlaySettings } from '../../../services/overlay/utilities';\nimport { ConnectedPositioningStrategy } from '../../../services/overlay/position/connected-positioning-strategy';\nimport { IBaseChipEventArgs, IgxChipsAreaComponent, IgxChipComponent } from '../../../chips';\nimport { ExpressionUI } from '../grid-filtering.service';\nimport { IgxDropDownItemComponent } from '../../../drop-down/drop-down-item.component';\nimport { IgxFilteringService } from '../grid-filtering.service';\nimport { KEYS, isEdge, isIE } from '../../../core/utils';\nimport { AbsoluteScrollStrategy } from '../../../services/overlay/scroll';\n\n/**\n * @hidden\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-filtering-row',\n    templateUrl: './grid-filtering-row.component.html'\n})\nexport class IgxGridFilteringRowComponent implements AfterViewInit {\n\n    private _positionSettings = {\n        horizontalStartPoint: HorizontalAlignment.Left,\n        verticalStartPoint: VerticalAlignment.Bottom\n    };\n\n    private _conditionsOverlaySettings: OverlaySettings = {\n        excludePositionTarget: true,\n        closeOnOutsideClick: true,\n        modal: false,\n        scrollStrategy: new AbsoluteScrollStrategy(),\n        positionStrategy: new ConnectedPositioningStrategy(this._positionSettings)\n    };\n\n    private _operatorsOverlaySettings: OverlaySettings = {\n        excludePositionTarget: true,\n        closeOnOutsideClick: true,\n        modal: false,\n        scrollStrategy: new AbsoluteScrollStrategy(),\n        positionStrategy: new ConnectedPositioningStrategy(this._positionSettings)\n    };\n\n    private chipsAreaWidth: number;\n    private chipAreaScrollOffset = 0;\n    private _column = null;\n    private isKeyPressed = false;\n    private isComposing = false;\n    private _cancelChipClick = false;\n\n    public showArrows: boolean;\n    public expression: IFilteringExpression;\n    public expressionsList: Array<ExpressionUI>;\n\n    @Input()\n    get column(): IgxColumnComponent {\n        return this._column;\n    }\n\n    set column(val) {\n        if (this._column) {\n            this.expressionsList.forEach(exp => exp.isSelected = false);\n        }\n        if (val) {\n            this._column = val;\n\n            this.expressionsList = this.filteringService.getExpressions(this._column.field);\n            this.resetExpression();\n\n            this.chipAreaScrollOffset = 0;\n            this.transform(this.chipAreaScrollOffset);\n        }\n    }\n\n    @Input()\n    get value(): any {\n        return this.expression ? this.expression.searchVal : null;\n    }\n\n    set value(val) {\n        if (!val && val !== 0) {\n            this.expression.searchVal = null;\n            this.showHideArrowButtons();\n        } else {\n            this.expression.searchVal = DataUtil.parseValue(this.column.dataType, val);\n            if (this.expressionsList.find(item => item.expression === this.expression) === undefined) {\n                this.addExpression(true);\n            }\n        }\n\n        this.filter();\n    }\n\n    @ViewChild('defaultFilterUI', { read: TemplateRef, static: true })\n    protected defaultFilterUI: TemplateRef<any>;\n\n    @ViewChild('defaultDateUI', { read: TemplateRef, static: true })\n    protected defaultDateUI: TemplateRef<any>;\n\n    @ViewChild('input', { read: ElementRef })\n    protected input: ElementRef;\n\n    @ViewChild('inputGroupConditions', { read: IgxDropDownComponent, static: true })\n    protected dropDownConditions: IgxDropDownComponent;\n\n    @ViewChild('chipsArea', { read: IgxChipsAreaComponent, static: true })\n    protected chipsArea: IgxChipsAreaComponent;\n\n    @ViewChildren('operators', { read: IgxDropDownComponent })\n    protected dropDownOperators: QueryList<IgxDropDownComponent>;\n\n    @ViewChild('inputGroup', { read: ElementRef })\n    protected inputGroup: ElementRef;\n\n    @ViewChild('inputGroupPrefix', { read: ElementRef })\n    protected inputGroupPrefix: ElementRef;\n\n    @ViewChild('container', { static: true })\n    protected container: ElementRef;\n\n    @ViewChild('operand')\n    protected operand: ElementRef;\n\n    @ViewChild('closeButton', { static: true })\n    public closeButton: ElementRef;\n\n    @HostBinding('class.igx-grid__filtering-row')\n    public cssClass = 'igx-grid__filtering-row';\n\n    constructor(public filteringService: IgxFilteringService, public element: ElementRef, public cdr: ChangeDetectorRef) { }\n\n    ngAfterViewInit() {\n        this._conditionsOverlaySettings.outlet = this.column.grid.outletDirective;\n        this._operatorsOverlaySettings.outlet = this.column.grid.outletDirective;\n\n        const selectedItem = this.expressionsList.find(expr => expr.isSelected === true);\n        if (selectedItem) {\n            this.expression = selectedItem.expression;\n        }\n\n        this.input.nativeElement.focus();\n    }\n\n    @HostListener('keydown.shift.tab', ['$event'])\n    @HostListener('keydown.tab', ['$event'])\n    public onTabKeydown(event) {\n        event.stopPropagation();\n        if (document.activeElement === this.closeButton.nativeElement && !event.shiftKey) {\n            this.filteringService.grid.navigation.navigateFirstCellIfPossible(event);\n        }\n    }\n\n    @HostListener('keydown.esc', ['$event'])\n    public onEscKeydown(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.close();\n    }\n\n    get disabled(): boolean {\n        return !(this.column.filteringExpressionsTree && this.column.filteringExpressionsTree.filteringOperands.length > 0);\n    }\n\n    get template(): TemplateRef<any> {\n        if (this.column.dataType === DataType.Date) {\n            return this.defaultDateUI;\n        }\n\n        return this.defaultFilterUI;\n    }\n\n    get type() {\n        switch (this.column.dataType) {\n            case DataType.String:\n            case DataType.Boolean:\n                return 'text';\n            case DataType.Number:\n                return 'number';\n        }\n    }\n\n    get conditions(): any {\n        return this.column.filters.conditionList();\n    }\n\n    get isUnaryCondition(): boolean {\n        if (this.expression.condition) {\n            return this.expression.condition.isUnary;\n        } else {\n            return true;\n        }\n    }\n\n    get placeholder(): string {\n        if (this.expression.condition && this.expression.condition.isUnary) {\n            return this.filteringService.getChipLabel(this.expression);\n        } else if (this.column.dataType === DataType.Date) {\n            return this.filteringService.grid.resourceStrings.igx_grid_filter_row_date_placeholder;\n        } else if (this.column.dataType === DataType.Boolean) {\n            return this.filteringService.grid.resourceStrings.igx_grid_filter_row_boolean_placeholder;\n        } else {\n            return this.filteringService.grid.resourceStrings.igx_grid_filter_row_placeholder;\n        }\n    }\n\n    /**\n     * Event handler for keydown on the input group's prefix.\n     */\n    public onPrefixKeyDown(event: KeyboardEvent) {\n        if ((event.key === KEYS.ENTER || event.key === KEYS.SPACE || event.key === KEYS.SPACE_IE) && this.dropDownConditions.collapsed) {\n            this.toggleConditionsDropDown(this.inputGroupPrefix.nativeElement);\n            event.stopImmediatePropagation();\n        } else if (event.key === KEYS.TAB) {\n            if (event.shiftKey) {\n                event.preventDefault();\n                event.stopPropagation();\n            } else if (!this.dropDownConditions.collapsed) {\n                this.toggleConditionsDropDown(this.inputGroupPrefix.nativeElement);\n            }\n        }\n    }\n\n    /**\n     * Event handler for keydown on the input.\n     */\n    public onInputKeyDown(event: KeyboardEvent) {\n        this.isKeyPressed = true;\n\n        if (this.column.dataType === DataType.Boolean) {\n            if (event.key === KEYS.ENTER || event.key === KEYS.SPACE || event.key === KEYS.SPACE_IE) {\n                this.inputGroupPrefix.nativeElement.focus();\n                this.toggleConditionsDropDown(this.inputGroupPrefix.nativeElement);\n                event.stopPropagation();\n                return;\n            }\n        }\n\n        if (event.key === KEYS.ENTER) {\n            if (this.isComposing) {\n                return;\n            }\n            this.commitInput();\n        } else if (event.altKey && (event.key === KEYS.DOWN_ARROW || event.key === KEYS.DOWN_ARROW_IE)) {\n            this.inputGroupPrefix.nativeElement.focus();\n            this.toggleConditionsDropDown(this.inputGroupPrefix.nativeElement);\n        } else if (event.key === KEYS.ESCAPE || event.key === KEYS.ESCAPE_IE) {\n            event.preventDefault();\n            this.close();\n        }\n        event.stopPropagation();\n    }\n\n    /**\n     * Event handler for keyup on the input.\n     */\n    public onInputKeyUp(eventArgs) {\n        this.isKeyPressed = false;\n    }\n\n    /**\n     * Event handler for input on the input.\n     */\n    public onInput(eventArgs) {\n        // The 'iskeyPressed' flag is needed for a case in IE, because the input event is fired on focus and for some reason,\n        // when you have a japanese character as a placeholder, on init the value here is empty string .\n        const target = eventArgs.target;\n\n        if (isEdge() && target.type !== 'number' || this.isKeyPressed && isIE() || target.value || target.checkValidity()) {\n            this.value = target.value;\n        }\n    }\n\n    /**\n     * Event handler for compositionstart on the input.\n     */\n    public onCompositionStart() {\n        this.isComposing = true;\n    }\n\n    /**\n     * Event handler for compositionend on the input.\n     */\n    public onCompositionEnd() {\n        this.isComposing = false;\n    }\n\n    /**\n     * Event handler for input click event.\n     */\n    public onInputClick() {\n        if (this.column.dataType === DataType.Boolean && this.dropDownConditions.collapsed) {\n            this.inputGroupPrefix.nativeElement.focus();\n            this.toggleConditionsDropDown(this.inputGroupPrefix.nativeElement);\n        }\n    }\n\n    /**\n     * Event handler for datepicker's close.\n     */\n    public datePickerClose() {\n        this.input.nativeElement.focus();\n    }\n\n    /**\n     * Returns the filtering operation condition for a given value.\n     */\n    public getCondition(value: string): IFilteringOperation {\n        return this.column.filters.condition(value);\n    }\n\n    /**\n     * Returns the translated condition name for a given value.\n     */\n    public translateCondition(value: string): string {\n        return this.filteringService.grid.resourceStrings[`igx_grid_filter_${this.getCondition(value).name}`] || value;\n    }\n\n    /**\n     * Returns the icon name of the current condition.\n     */\n    public getIconName(): string {\n        if (this.column.dataType === DataType.Boolean && this.expression.condition === null) {\n            return this.getCondition(this.conditions[0]).iconName;\n        } else {\n            return this.expression.condition.iconName;\n        }\n    }\n\n    /**\n     * Returns whether a given condition is selected in dropdown.\n     */\n    public isConditionSelected(conditionName: string): boolean {\n        if (this.expression.condition) {\n            return this.expression.condition.name === conditionName;\n        } else {\n            return false;\n        }\n    }\n\n    /**\n     * Clears the current filtering.\n     */\n    public clearFiltering() {\n        this.filteringService.clearFilter(this.column.field);\n        this.resetExpression();\n        if (this.input) {\n            this.input.nativeElement.focus();\n        }\n        this.cdr.detectChanges();\n\n        this.chipAreaScrollOffset = 0;\n        this.transform(this.chipAreaScrollOffset);\n    }\n\n    /**\n     * Commits the value of the input.\n     */\n    public commitInput() {\n        const selectedItem = this.expressionsList.filter(ex => ex.isSelected === true);\n        selectedItem.forEach(e => e.isSelected = false);\n\n        let indexToDeselect = -1;\n        for (let index = 0; index < this.expressionsList.length; index++) {\n            const expression = this.expressionsList[index].expression;\n            if (expression.searchVal === null && !expression.condition.isUnary) {\n                indexToDeselect = index;\n            }\n        }\n        if (indexToDeselect !== -1) {\n            this.removeExpression(indexToDeselect, this.expression);\n        }\n        this.resetExpression();\n        this.scrollChipsWhenAddingExpression();\n    }\n\n    /**\n     * Clears the value of the input.\n     */\n    public clearInput() {\n        this.value = null;\n    }\n\n    /**\n     * Event handler for keydown on clear button.\n     */\n    public onClearKeyDown(eventArgs: KeyboardEvent) {\n        if (eventArgs.key === KEYS.ENTER || eventArgs.key === KEYS.SPACE || eventArgs.key === KEYS.SPACE_IE) {\n            eventArgs.preventDefault();\n            this.clearInput();\n            this.input.nativeElement.focus();\n        }\n    }\n\n    /**\n     * Event handler for click on clear button.\n     */\n    public onClearClick() {\n        this.clearInput();\n        this.input.nativeElement.focus();\n    }\n\n    /**\n     * Event handler for keydown on commit button.\n     */\n    public onCommitKeyDown(eventArgs: KeyboardEvent) {\n        if (eventArgs.key === KEYS.ENTER || eventArgs.key === KEYS.SPACE || eventArgs.key === KEYS.SPACE_IE) {\n            eventArgs.preventDefault();\n            this.commitInput();\n            this.input.nativeElement.focus();\n        }\n    }\n\n    /**\n     * Event handler for click on commit button.\n     */\n    public onCommitClick() {\n        this.commitInput();\n        this.input.nativeElement.focus();\n    }\n\n    /**\n     * Event handler for focusout on the input group.\n     */\n    public onInputGroupFocusout() {\n        if (!this.value && this.value !== 0 &&\n            this.expression.condition && !this.expression.condition.isUnary) {\n            return;\n        }\n        requestAnimationFrame(() => {\n            const focusedElement = document.activeElement;\n\n            if (focusedElement.className === 'igx-chip__remove' || focusedElement.tagName === 'IGX-DAY-ITEM') {\n                return;\n            }\n\n            if (!(focusedElement && this.inputGroup.nativeElement.contains(focusedElement))\n                && this.dropDownConditions.collapsed) {\n                this.commitInput();\n            }\n        });\n    }\n\n    /**\n     * Closes the filtering edit row.\n     */\n    public close() {\n        if (this.expressionsList.length === 1 &&\n            this.expressionsList[0].expression.searchVal === null &&\n            this.expressionsList[0].expression.condition.isUnary === false) {\n            this.filteringService.getExpressions(this.column.field).pop();\n\n            this.filter();\n        } else {\n            const condToRemove = this.expressionsList.filter(ex => ex.expression.searchVal === null && !ex.expression.condition.isUnary);\n            if (condToRemove && condToRemove.length > 0) {\n                condToRemove.forEach(c => this.filteringService.removeExpression(this.column.field, this.expressionsList.indexOf(c)));\n                this.filter();\n            }\n        }\n\n        this.filteringService.isFilterRowVisible = false;\n\n        this.filteringService.updateFilteringCell(this.column);\n        this.filteringService.focusFilterCellChip(this.column, true);\n\n        this.filteringService.filteredColumn = null;\n        this.filteringService.selectedExpression = null;\n\n        this.chipAreaScrollOffset = 0;\n        this.transform(this.chipAreaScrollOffset);\n    }\n\n    /*\n    * noop\n    */\n    public noop() { }\n\n    /**\n     *  Event handler for date picker's selection.\n     */\n    public onDateSelected(value: Date) {\n        this.value = value;\n    }\n\n    /**\n     * Opens the conditions dropdown.\n     */\n    public toggleConditionsDropDown(target: any) {\n        this._conditionsOverlaySettings.positionStrategy.settings.target = target;\n        this.dropDownConditions.toggle(this._conditionsOverlaySettings);\n    }\n\n    /**\n     * Opens the logic operators dropdown.\n     */\n    public toggleOperatorsDropDown(eventArgs, index) {\n        this._operatorsOverlaySettings.positionStrategy.settings.target = eventArgs.target.parentElement;\n        this.dropDownOperators.toArray()[index].toggle(this._operatorsOverlaySettings);\n    }\n\n    /**\n     * Event handler for change event in conditions dropdown.\n     */\n    public onConditionsChanged(eventArgs) {\n        const value = (eventArgs.newSelection as IgxDropDownItemComponent).value;\n        this.expression.condition = this.getCondition(value);\n        if (this.expression.condition.isUnary) {\n            // update grid's filtering on the next cycle to ensure the drop-down is closed\n            // if the drop-down is not closed this event handler will be invoked multiple times\n            requestAnimationFrame(() => this.unaryConditionChangedCallback());\n        } else {\n            requestAnimationFrame(() => this.conditionChangedCallback());\n        }\n\n        if (this.input) {\n            // Add requestAnimationFrame becasue of an issue in IE, where you are still able to write in the input,\n            // if it has been focused and then set to readonly.\n            requestAnimationFrame(() => this.input.nativeElement.focus());\n        }\n    }\n\n\n    public onChipPointerdown(args, chip: IgxChipComponent) {\n        const activeElement = document.activeElement;\n        this._cancelChipClick = chip.selected && activeElement &&\n            this.inputGroup.nativeElement.contains(activeElement);\n    }\n\n    public onChipClick(args, item: ExpressionUI) {\n        if (this._cancelChipClick) {\n            this._cancelChipClick = false;\n            return;\n        }\n\n        this.expressionsList.forEach(ex => ex.isSelected = false);\n\n        this.toggleChip(item);\n    }\n\n    public toggleChip(item: ExpressionUI) {\n        item.isSelected = !item.isSelected;\n        if (item.isSelected) {\n            this.expression = item.expression;\n\n            if (this.input) {\n                this.input.nativeElement.focus();\n            }\n        }\n    }\n\n    /**\n     * Event handler for chip keydown event.\n     */\n    public onChipKeyDown(eventArgs: KeyboardEvent, item: ExpressionUI) {\n        if (eventArgs.key === KEYS.ENTER) {\n            eventArgs.preventDefault();\n\n            this.toggleChip(item);\n        }\n    }\n\n    /**\n     * Scrolls the first chip into view if the tab key is pressed on the left arrow.\n     */\n    public onLeftArrowKeyDown(event) {\n        if (event.key === KEYS.TAB) {\n            this.chipAreaScrollOffset = 0;\n            this.transform(this.chipAreaScrollOffset);\n        }\n    }\n\n    /**\n     * Event handler for chip removed event.\n     */\n    public onChipRemoved(eventArgs: IBaseChipEventArgs, item: ExpressionUI) {\n        const indexToRemove = this.expressionsList.indexOf(item);\n        this.removeExpression(indexToRemove, item.expression);\n\n        this.scrollChipsOnRemove();\n    }\n\n    /**\n     * Event handler for logic operator changed event.\n     */\n    public onLogicOperatorChanged(eventArgs: ISelectionEventArgs, expression: ExpressionUI) {\n        if (eventArgs.oldSelection) {\n            expression.afterOperator = (eventArgs.newSelection as IgxDropDownItemComponent).value;\n            this.expressionsList[this.expressionsList.indexOf(expression) + 1].beforeOperator = expression.afterOperator;\n\n            // update grid's filtering on the next cycle to ensure the drop-down is closed\n            // if the drop-down is not closed this event handler will be invoked multiple times\n            requestAnimationFrame(() => this.filter());\n        }\n    }\n\n    /**\n     * Scrolls the chips into the chip area when left or right arrows are pressed.\n     */\n    public scrollChipsOnArrowPress(arrowPosition: string) {\n        let count = 0;\n        const chipAraeChildren = this.chipsArea.element.nativeElement.children;\n        const containerRect = this.container.nativeElement.getBoundingClientRect();\n\n        if (arrowPosition === 'right') {\n            for (let index = 0; index < chipAraeChildren.length; index++) {\n                if (Math.ceil(chipAraeChildren[index].getBoundingClientRect().right) < Math.ceil(containerRect.right)) {\n                    count++;\n                }\n            }\n\n            if (count < chipAraeChildren.length) {\n                this.chipAreaScrollOffset -= Math.ceil(chipAraeChildren[count].getBoundingClientRect().right) -\n                    Math.ceil(containerRect.right) + 1;\n                this.transform(this.chipAreaScrollOffset);\n            }\n        }\n\n        if (arrowPosition === 'left') {\n            for (let index = 0; index < chipAraeChildren.length; index++) {\n                if (Math.ceil(chipAraeChildren[index].getBoundingClientRect().left) < Math.ceil(containerRect.left)) {\n                    count++;\n                }\n            }\n\n            if (count > 0) {\n                this.chipAreaScrollOffset += Math.ceil(containerRect.left) -\n                    Math.ceil(chipAraeChildren[count - 1].getBoundingClientRect().left) + 1;\n                this.transform(this.chipAreaScrollOffset);\n            }\n        }\n    }\n\n    private showHideArrowButtons() {\n        requestAnimationFrame(() => {\n            if (this.filteringService.isFilterRowVisible) {\n                const containerWidth = this.container.nativeElement.getBoundingClientRect().width;\n                this.chipsAreaWidth = this.chipsArea.element.nativeElement.getBoundingClientRect().width;\n\n                this.showArrows = this.chipsAreaWidth >= containerWidth && this.isColumnFiltered;\n\n                // TODO: revise the cdr.detectChanges() usage here\n                if (!(this.cdr as ViewRef).destroyed) {\n                this.cdr.detectChanges(); }\n            }\n        });\n    }\n\n    private addExpression(isSelected: boolean) {\n        const exprUI = new ExpressionUI();\n        exprUI.expression = this.expression;\n        exprUI.beforeOperator = this.expressionsList.length > 0 ? FilteringLogic.And : null;\n        exprUI.isSelected = isSelected;\n\n        this.expressionsList.push(exprUI);\n\n        const length = this.expressionsList.length;\n        if (this.expressionsList[length - 2]) {\n            this.expressionsList[length - 2].afterOperator = this.expressionsList[length - 1].beforeOperator;\n        }\n\n        this.showHideArrowButtons();\n    }\n\n    private removeExpression(indexToRemove: number, expression: IFilteringExpression) {\n        if (indexToRemove === 0 && this.expressionsList.length === 1) {\n            this.clearFiltering();\n            return;\n        }\n\n        this.filteringService.removeExpression(this.column.field, indexToRemove);\n\n        this.filter();\n\n        if (this.expression === expression) {\n            this.resetExpression();\n        }\n\n        this.showHideArrowButtons();\n    }\n\n    private resetExpression() {\n        this.expression = {\n            fieldName: this.column.field,\n            condition: null,\n            searchVal: null,\n            ignoreCase: this.column.filteringIgnoreCase\n        };\n\n        if (this.column.dataType !== DataType.Boolean) {\n            this.expression.condition = this.getCondition(this.conditions[0]);\n        }\n\n        if (this.column.dataType === DataType.Date && this.input) {\n            this.input.nativeElement.value = null;\n        }\n\n        this.showHideArrowButtons();\n    }\n\n    private scrollChipsWhenAddingExpression() {\n        const chipAraeChildren = this.chipsArea.element.nativeElement.children;\n        if (!chipAraeChildren || chipAraeChildren.length === 0) {\n            return;\n        }\n\n        const containerRectRight = Math.ceil(this.container.nativeElement.getBoundingClientRect().right);\n\n        const lastChipRectRight = Math.ceil(chipAraeChildren[chipAraeChildren.length - 1].getBoundingClientRect().right);\n        if (lastChipRectRight >= containerRectRight) {\n            this.chipAreaScrollOffset -= lastChipRectRight - containerRectRight;\n            this.transform(this.chipAreaScrollOffset);\n        }\n    }\n\n    /**\n     * @hidden\n     * Resets the chips area\n     * @memberof IgxGridFilteringRowComponent\n     */\n    public resetChipsArea() {\n        this.chipAreaScrollOffset = 0;\n        this.transform(this.chipAreaScrollOffset);\n        this.showHideArrowButtons();\n    }\n\n    private transform(offset: number) {\n        requestAnimationFrame(() => {\n            this.chipsArea.element.nativeElement.style.transform = `translate(${offset}px)`;\n        });\n    }\n\n    private scrollChipsOnRemove() {\n        let count = 0;\n        const chipAraeChildren = this.chipsArea.element.nativeElement.children;\n        const containerRect = this.container.nativeElement.getBoundingClientRect();\n\n        for (let index = 0; index < chipAraeChildren.length; index++) {\n            if (Math.ceil(chipAraeChildren[index].getBoundingClientRect().right) < Math.ceil(containerRect.left)) {\n                count++;\n            }\n        }\n\n        if (count <= 2) {\n            this.chipAreaScrollOffset = 0;\n        } else {\n            const dif = chipAraeChildren[count].id === 'chip' ? count - 2 : count - 1;\n            this.chipAreaScrollOffset += Math.ceil(containerRect.left) - Math.ceil(chipAraeChildren[dif].getBoundingClientRect().left) + 1;\n        }\n\n        this.transform(this.chipAreaScrollOffset);\n    }\n\n    private conditionChangedCallback() {\n        if (!!this.expression.searchVal || this.expression.searchVal === 0) {\n            this.filter();\n        } else if (this.value) {\n            this.value = null;\n        }\n    }\n\n    private unaryConditionChangedCallback() {\n        if (this.value) {\n            this.value = null;\n        }\n        if (this.expressionsList.find(item => item.expression === this.expression) === undefined) {\n            this.addExpression(true);\n        }\n        this.filter();\n    }\n\n    private filter() {\n        this.filteringService.filterInternal(this.column.field);\n    }\n\n    private get isColumnFiltered() {\n        return this.column.filteringExpressionsTree && this.column.filteringExpressionsTree.filteringOperands.length > 0;\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { IgxGridBaseDirective } from './grid-base.directive';\nimport { first } from 'rxjs/operators';\nimport { IgxColumnComponent } from './columns/column.component';\nimport { IgxGridNavigationService } from './grid-navigation.service';\nimport { ISelectionNode } from './selection/selection.service';\n\n\nexport interface IStartNavigationCell {\n    rowStart: number;\n    colStart: number;\n    direction: NavigationDirection;\n}\n\nexport enum NavigationDirection {\n    horizontal = 'horizontal',\n    vertical = 'vertical'\n}\n\n\n/** @hidden */\n@Injectable()\nexport class IgxGridMRLNavigationService extends IgxGridNavigationService {\n\n    private startNavigationCell: IStartNavigationCell;\n\n    public grid: IgxGridBaseDirective;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public setStartNavigationCell(colStart: number, rowStart: number, dir: NavigationDirection) {\n        this.startNavigationCell = {\n            colStart: colStart,\n            rowStart: rowStart,\n            direction: dir\n        };\n    }\n\n    private applyNavigationCell(colStart: number, rowStart: number, navDirection: NavigationDirection): number {\n        const oppositeDir = navDirection === NavigationDirection.vertical ?\n            NavigationDirection.horizontal : NavigationDirection.vertical;\n        if (this.startNavigationCell && this.startNavigationCell.direction !== navDirection) {\n            this.startNavigationCell.direction = oppositeDir;\n        } else {\n            this.setStartNavigationCell(colStart, rowStart, oppositeDir);\n        }\n\n        return navDirection === NavigationDirection.vertical ?\n            this.startNavigationCell.colStart : this.startNavigationCell.rowStart;\n    }\n\n    public navigateUp(rowElement: HTMLElement, selectedNode: ISelectionNode) {\n        this.focusCellUpFromLayout(rowElement, selectedNode);\n    }\n\n    public navigateDown(rowElement: HTMLElement, selectedNode: ISelectionNode) {\n        this.focusCellDownFromLayout(rowElement, selectedNode);\n    }\n\n    public isColumnRightEdgeVisible(visibleColumnIndex: number): boolean {\n        const column = this.grid.columnList.filter(c => !c.columnGroup).find((col) => col.visibleIndex === visibleColumnIndex);\n        const forOfDir =  this.grid.headerContainer;\n        const horizontalScroll = forOfDir.getScroll();\n        if (!horizontalScroll.clientWidth || (column && column.pinned)) {\n            return true;\n        } else if (column) {\n            if (this.isParentColumnFullyVisible(column)) { return true; }\n            const scrollPos = this.getChildColumnScrollPositions(visibleColumnIndex);\n            return this.displayContainerWidth >= scrollPos.rightScroll - this.displayContainerScrollLeft &&\n            this.displayContainerScrollLeft <= scrollPos.leftScroll;\n        }\n        return false;\n    }\n    private isParentColumnFullyVisible(parent: IgxColumnComponent): boolean {\n        const forOfDir = this.grid.dataRowList.length > 0 ? this.grid.dataRowList.first.virtDirRow : this.grid.headerContainer;\n        const horizontalScroll = forOfDir.getScroll();\n        if (!horizontalScroll.clientWidth || parent.pinned) { return true; }\n        const index = forOfDir.igxForOf.indexOf(parent);\n        return this.displayContainerWidth >= forOfDir.getColumnScrollLeft(index + 1) - this.displayContainerScrollLeft &&\n            this.displayContainerScrollLeft <= forOfDir.getColumnScrollLeft(index);\n    }\n\n    public isColumnLeftEdgeVisible(visibleColumnIndex: number): boolean {\n        const forOfDir = this.grid.headerContainer;\n        const horizontalScroll = forOfDir.getScroll();\n        const column = this.grid.columnList.filter(c => !c.columnGroup).find((col) => col.visibleIndex === visibleColumnIndex);\n        if (!horizontalScroll.clientWidth || column.pinned) {\n            return true;\n        }\n        if (this.isParentColumnFullyVisible(column)) { return true; }\n        const scrollPos = this.getChildColumnScrollPositions(visibleColumnIndex);\n        return this.displayContainerScrollLeft <= scrollPos.leftScroll;\n    }\n\n    public onKeydownArrowRight(element: HTMLElement, selectedNode: ISelectionNode) {\n        this.focusNextCellFromLayout(element, selectedNode);\n    }\n\n    public onKeydownArrowLeft(element: HTMLElement, selectedNode: ISelectionNode) {\n        this.focusPrevCellFromLayout(element, selectedNode);\n    }\n    public get gridOrderedColumns(): IgxColumnComponent[] {\n        return [...this.grid.pinnedColumns, ...this.grid.unpinnedColumns].filter(c => !c.columnGroup)\n        .sort((a, b) => a.visibleIndex - b.visibleIndex);\n    }\n\n    public performTab(currentRowEl: HTMLElement, selectedNode: ISelectionNode) {\n        const visibleColumnIndex = selectedNode.layout ? selectedNode.layout.columnVisibleIndex : 0;\n        const nextElementColumn = this.grid.columns.find(x => !x.columnGroup && x.visibleIndex === visibleColumnIndex + 1);\n        const rowIndex = selectedNode.row;\n        const row = this.grid.getRowByIndex(rowIndex);\n        this._moveFocusToCell(currentRowEl, nextElementColumn, row, selectedNode, 'next');\n        if (nextElementColumn) {\n            this.setStartNavigationCell(nextElementColumn.colStart, nextElementColumn.rowStart, null);\n        }\n    }\n\n    protected _moveFocusToCell(currentRowEl: HTMLElement, nextElementColumn, row, selectedNode, dir) {\n        if (nextElementColumn && row.cells) {\n            let nextCell = row.cells.find(currCell => currCell.column === nextElementColumn);\n            const isVisible = this.isColumnRightEdgeVisible(nextElementColumn.visibleIndex);\n            if (!nextCell || !isVisible) {\n                this.grid.nativeElement.focus({ preventScroll: true });\n                const cb = () => {\n                    nextCell = row.cells.find(currCell => currCell.column === nextElementColumn);\n                    if (this.grid.rowEditable && this.isRowInEditMode(row.index)) {\n                        if (dir === 'next') {\n                            this.moveNextEditable(row.index, selectedNode.layout.columnVisibleIndex);\n                        } else {\n                            this.movePreviousEditable(row.index, selectedNode.layout.columnVisibleIndex);\n                        }\n                        return;\n                    }\n                    this._focusCell(nextCell.nativeElement);\n                };\n                this.performHorizontalScrollToCell(row.index, nextElementColumn.visibleIndex, false, cb);\n            } else {\n                if (this.grid.rowEditable && this.isRowInEditMode(row.index)) {\n                    if (dir === 'next') {\n                        this.moveNextEditable(row.index, selectedNode.layout.columnVisibleIndex);\n                    } else {\n                        this.movePreviousEditable(row.index, selectedNode.layout.columnVisibleIndex);\n                    }\n                    return;\n                }\n                this._focusCell(nextCell.nativeElement);\n            }\n        } else {\n            // end of layout reached\n            if (this.isRowInEditMode(row.index)) {\n                //  TODO: make gridAPI visible for internal use and remove cast to any\n                (this.grid as any).gridAPI.submit_value();\n                if (dir === 'next') {\n                    this.grid.rowEditTabs.first.element.nativeElement.focus();\n                } else {\n                    this.grid.rowEditTabs.last.element.nativeElement.focus();\n                }\n                return;\n            }\n            if (dir === 'next') {\n                super.navigateDown(currentRowEl, {row: row.index, column: 0});\n            } else {\n                 let lastVisibleIndex = 0;\n                this.grid.unpinnedColumns.forEach((col) => {\n                    lastVisibleIndex = Math.max(lastVisibleIndex, col.visibleIndex);\n                });\n                super.navigateUp(currentRowEl, {row: row.index, column: lastVisibleIndex});\n            }\n        }\n    }\n\n    public performShiftTabKey(currentRowEl: HTMLElement, selectedNode: ISelectionNode) {\n        const visibleColumnIndex = selectedNode.layout ? selectedNode.layout.columnVisibleIndex : 0;\n        const rowIndex = selectedNode.row;\n        const row = this.grid.getRowByIndex(rowIndex);\n        const prevElementColumn =\n         this.grid.columns.find(x => !x.columnGroup && x.visibleIndex === visibleColumnIndex - 1 && !x.hidden);\n         this._moveFocusToCell(currentRowEl, prevElementColumn, row, selectedNode, 'prev');\n        if (prevElementColumn) {\n            this.setStartNavigationCell(prevElementColumn.colStart, prevElementColumn.rowStart, null);\n        }\n    }\n\n    private focusCellUpFromLayout(rowElement: HTMLElement, selectedNode: ISelectionNode) {\n        const isNonDataRow = rowElement.tagName.toLowerCase() === 'igx-grid-groupby-row' || this._isDetailRecordAt(selectedNode.row);\n        const currentRowStart = selectedNode.layout ?  selectedNode.layout.rowStart : 1;\n        const currentColStart = this.applyNavigationCell(selectedNode.layout ? selectedNode.layout.colStart : 1,\n            currentRowStart,\n            NavigationDirection.vertical);\n        const parentIndex = selectedNode.column;\n        const columnLayout = this.grid.columns.find( x => x.columnLayout && x.visibleIndex === parentIndex);\n        let movePrev;\n        // check if element up is from the same layout\n        let upperElementColumn = columnLayout.children.find(c =>\n            (c.rowEnd === currentRowStart || c.rowStart + c.gridRowSpan === currentRowStart)  &&\n            c.colStart <= currentColStart &&\n            (currentColStart < c.colEnd || currentColStart < c.colStart + c.gridColumnSpan));\n        if (isNonDataRow || !upperElementColumn) {\n            // no prev row in current row layout, go to next row last rowstart\n            const layoutRowEnd = this.grid.multiRowLayoutRowSize + 1;\n            upperElementColumn = columnLayout.children.find(c =>\n                (c.rowEnd === layoutRowEnd || c.rowStart + c.gridRowSpan === layoutRowEnd) &&\n                c.colStart <= currentColStart &&\n                (currentColStart < c.colEnd || currentColStart < c.colStart + c.gridColumnSpan));\n            movePrev = true;\n        }\n        const rowIndex = movePrev ? selectedNode.row - 1 : selectedNode.row;\n        if (rowIndex < 0) {\n            // end of rows reached.\n            return;\n        }\n        let prevRow;\n        const cb = () => {\n            prevRow = this.grid.getRowByIndex(rowIndex);\n            if (prevRow && prevRow.cells) {\n                this._focusCell(upperElementColumn.cells.find((c) => c.rowIndex === prevRow.index).nativeElement);\n            } else if (prevRow) {\n                prevRow.nativeElement.focus({ preventScroll: true });\n            } else {\n                const prevElem = this.getRowByIndex(rowIndex, '') as any;\n                prevElem.focus({ preventScroll: true });\n            }\n        };\n        if (this.shouldPerformVerticalScroll(rowIndex, upperElementColumn.visibleIndex)) {\n            this.grid.nativeElement.focus({ preventScroll: true });\n                this.performVerticalScrollToCell(rowIndex, upperElementColumn.visibleIndex, cb);\n        } else {\n            cb();\n        }\n    }\n\n    private focusCellDownFromLayout(rowElement: HTMLElement, selectedNode: ISelectionNode) {\n        const isNonDataRow = rowElement.tagName.toLowerCase() === 'igx-grid-groupby-row' || this._isDetailRecordAt(selectedNode.row);\n        const parentIndex = selectedNode.column;\n        const columnLayout = this.grid.columns.find( x => x.columnLayout && x.visibleIndex === parentIndex);\n        const currentRowEnd = selectedNode.layout ? selectedNode.layout.rowEnd || selectedNode.layout.rowStart + 1 : 2;\n        const currentColStart = this.applyNavigationCell(selectedNode.layout ? selectedNode.layout.colStart : 1,\n            selectedNode.layout ? selectedNode.layout.rowStart : 1,\n            NavigationDirection.vertical);\n        let moveNext;\n        // check if element down is from the same layout\n        let nextElementColumn = columnLayout.children.find(c => c.rowStart === currentRowEnd &&\n            c.colStart <= currentColStart &&\n            (currentColStart < c.colEnd || currentColStart < c.colStart + c.gridColumnSpan));\n        if (isNonDataRow || !nextElementColumn) {\n            // no next row in current row layout, go to next row first rowstart\n            nextElementColumn = columnLayout.children.find(c => c.rowStart === 1 &&\n                c.colStart <= currentColStart &&\n                (currentColStart < c.colEnd || currentColStart < c.colStart + c.gridColumnSpan));\n            moveNext = true;\n        }\n        const rowIndex = moveNext ? selectedNode.row + 1 : selectedNode.row;\n        if (rowIndex > this.grid.dataView.length - 1) {\n            // end of rows reached.\n            return;\n        }\n        let nextRow;\n        const cb = () => {\n            nextRow = this.grid.getRowByIndex(rowIndex);\n            if (nextRow && nextRow.cells) {\n                this._focusCell(nextElementColumn.cells.find((c) => c.rowIndex === nextRow.index).nativeElement);\n            } else if (nextRow) {\n                nextRow.nativeElement.focus({ preventScroll: true });\n            } else {\n                const nextElem = this.getRowByIndex(rowIndex, '') as any;\n                nextElem.focus({ preventScroll: true });\n            }\n        };\n        if (this.shouldPerformVerticalScroll(rowIndex, nextElementColumn.visibleIndex)) {\n            this.grid.nativeElement.focus({ preventScroll: true });\n                this.performVerticalScrollToCell(rowIndex, nextElementColumn.visibleIndex, cb);\n        } else {\n            cb();\n        }\n    }\n\n    private focusNextCellFromLayout(cellElement: HTMLElement, selectedNode: ISelectionNode) {\n        const parentIndex = selectedNode.column;\n        let columnLayout = this.grid.columns.find( x => x.columnLayout && x.visibleIndex === parentIndex);\n        const currentColEnd = selectedNode.layout.colEnd || selectedNode.layout.colStart + 1;\n        const currentRowStart = this.applyNavigationCell(selectedNode.layout.colStart,\n            selectedNode.layout.rowStart,\n            NavigationDirection.horizontal);\n        const rowIndex = selectedNode.row;\n        // check if next element is from the same layout\n        let nextElementColumn = columnLayout.children.find(c => c.colStart === currentColEnd &&\n            c.rowStart <= currentRowStart &&\n            (currentRowStart < c.rowEnd || currentRowStart < c.rowStart + c.gridRowSpan));\n        if (!nextElementColumn) {\n            // no next column in current layout, search for next layout\n            columnLayout = this.grid.columns.find(c => c.columnLayout && !c.hidden && c.visibleIndex === columnLayout.visibleIndex + 1);\n            if (!columnLayout) {\n                // reached the end\n                return null;\n            }\n            // next element is from the next layout\n            nextElementColumn = columnLayout.children.find(c => c.colStart === 1 &&\n                c.rowStart <= currentRowStart &&\n                (currentRowStart < c.rowEnd || currentRowStart < c.rowStart + c.gridRowSpan));\n        }\n        const cb = () => {\n            const nextElement = nextElementColumn.cells.find((c) => c.rowIndex === rowIndex).nativeElement;\n           this._focusCell(nextElement);\n        };\n        if (!this.isColumnRightEdgeVisible(nextElementColumn.visibleIndex)) {\n            this.grid.nativeElement.focus({ preventScroll: true });\n            this.performHorizontalScrollToCell(rowIndex, nextElementColumn.visibleIndex, false, cb);\n        } else {\n            cb();\n        }\n    }\n\n    private focusPrevCellFromLayout(cellElement: HTMLElement, selectedNode: ISelectionNode) {\n        const parentIndex = selectedNode.column;\n        let columnLayout = this.grid.columns.find( x => x.columnLayout && x.visibleIndex === parentIndex);\n        const currentColStart = selectedNode.layout.colStart;\n        const currentRowStart = this.applyNavigationCell(currentColStart,\n            selectedNode.layout.rowStart,\n            NavigationDirection.horizontal);\n        const rowIndex = selectedNode.row;\n\n        // check previous element is from the same layout\n        let prevElementColumn = columnLayout.children\n        .find(c => (c.colEnd === currentColStart || c.colStart + c.gridColumnSpan === currentColStart ) &&\n            c.rowStart <= currentRowStart &&\n            (currentRowStart < c.rowEnd || currentRowStart < c.rowStart + c.gridRowSpan));\n        if (!prevElementColumn) {\n            // no prev column in current layout, seacrh for prev layout\n            columnLayout = this.grid.columns.find(c => c.columnLayout && !c.hidden && c.visibleIndex === columnLayout.visibleIndex - 1);\n            if (!columnLayout) {\n                // reached the end\n                return null;\n            }\n            const layoutSize = columnLayout.getInitialChildColumnSizes(columnLayout.children).length;\n            // first element is from the next layout\n            prevElementColumn = columnLayout.children\n            .find(c => (c.colEnd === layoutSize + 1 || c.colStart + c.gridColumnSpan === layoutSize + 1) &&\n                c.rowStart <= currentRowStart &&\n                (currentRowStart < c.rowEnd || currentRowStart < c.rowStart + c.gridRowSpan));\n        }\n\n        const cb = () => {\n            const prevElement = prevElementColumn.cells.find((c) => c.rowIndex === rowIndex).nativeElement;\n            this._focusCell(prevElement);\n        };\n        if (!this.isColumnLeftEdgeVisible(prevElementColumn.visibleIndex)) {\n            this.grid.nativeElement.focus({ preventScroll: true });\n            this.performHorizontalScrollToCell(rowIndex, prevElementColumn.visibleIndex, false, cb);\n        } else {\n            cb();\n        }\n    }\n\n    public onKeydownEnd(rowIndex: number, isSummary: boolean = false, cellRowStart?: number) {\n        const layouts = this.grid.columns.filter(c => c.columnLayout && !c.hidden).sort((a, b) => a.visibleIndex - b.visibleIndex);\n        const lastLayout = layouts[layouts.length - 1];\n        const lastLayoutChildren = lastLayout.children;\n        const layoutSize =  lastLayout.getInitialChildColumnSizes(lastLayoutChildren).length;\n        const currentRowStart = this.applyNavigationCell(\n            this.startNavigationCell ? this.startNavigationCell.colStart : 1,\n            cellRowStart || this.grid.multiRowLayoutRowSize,\n            NavigationDirection.horizontal);\n        const nextElementColumn = lastLayout.children.find(c =>\n            (c.colEnd === layoutSize + 1 || c.colStart + c.gridColumnSpan === layoutSize + 1) &&\n            c.rowStart <= currentRowStart &&\n            (currentRowStart < c.rowEnd || currentRowStart < c.rowStart + c.gridRowSpan));\n        const indexInLayout = lastLayoutChildren.toArray().indexOf(nextElementColumn);\n\n        const rowList = isSummary ? this.grid.summariesRowList : this.grid.dataRowList;\n        let rowElement = rowList.find((row) => row.index === rowIndex);\n        if (!rowElement) { return; }\n        rowElement = rowElement.nativeElement;\n\n        if (!this.isColumnRightEdgeVisible(nextElementColumn.visibleIndex)) {\n            this.grid.nativeElement.focus({ preventScroll: true });\n            const cb = () => {\n                const allBlocks = rowElement.querySelectorAll(this.getColumnLayoutSelector());\n                const cell = allBlocks[allBlocks.length - 1].children[indexInLayout];\n                this._focusCell(cell);\n            };\n            this.performHorizontalScrollToCell(rowIndex, nextElementColumn.visibleIndex, false, cb);\n            return;\n        } else {\n            const allBlocks = rowElement.querySelectorAll(this.getColumnLayoutSelector());\n            const cell =  allBlocks[allBlocks.length - 1].children[indexInLayout];\n            this._focusCell(cell);\n        }\n    }\n\n    public onKeydownHome(rowIndex: number, isSummary: boolean = false, cellRowStart: number = 1) {\n        const firstLayout = this.grid.columns.filter(c => c.columnLayout && !c.hidden)[0];\n        const lastLayoutChildren = firstLayout.children.toArray();\n        const currentRowStart = this.applyNavigationCell(\n            this.startNavigationCell ? this.startNavigationCell.colStart : 1,\n            cellRowStart,\n            NavigationDirection.horizontal);\n        const nextElementColumn = firstLayout.children.find(c =>\n            c.colStart === 1 &&\n            c.rowStart <= currentRowStart &&\n            (currentRowStart < c.rowEnd || currentRowStart < c.rowStart + c.gridRowSpan));\n        const indexInLayout = lastLayoutChildren.indexOf(nextElementColumn);\n\n        const rowList = isSummary ? this.grid.summariesRowList : this.grid.dataRowList;\n        let rowElement = rowList.find((row) => row.index === rowIndex);\n        if (!rowElement) { return; }\n        rowElement = rowElement.nativeElement;\n\n        if (!this.isColumnLeftEdgeVisible(nextElementColumn.visibleIndex)) {\n            this.grid.nativeElement.focus({ preventScroll: true });\n           const cb = () => {\n                const allBlocks = rowElement.querySelectorAll(this.getColumnLayoutSelector());\n                const cell = allBlocks[0].children[indexInLayout];\n                this._focusCell(cell);\n            };\n            this.performHorizontalScrollToCell(rowIndex, nextElementColumn.visibleIndex, false, cb);\n            return;\n        } else {\n            const allBlocks = rowElement.querySelectorAll(this.getColumnLayoutSelector());\n            const cell =  allBlocks[0].children[indexInLayout];\n            this._focusCell(cell);\n        }\n    }\n\n    protected getColumnLayoutSelector(): string {\n        return '.igx-grid__mrl-block';\n    }\n\n    protected getChildColumnScrollPositions(visibleColIndex: number): { leftScroll: number, rightScroll: number } {\n        const forOfDir = this.grid.dataRowList.length > 0 ? this.grid.dataRowList.first.virtDirRow : this.grid.headerContainer;\n        const targetCol: IgxColumnComponent = this.getColunmByVisibleIndex(visibleColIndex);\n        const parent = targetCol.parent;\n        const parentVIndex = forOfDir.igxForOf.indexOf(parent);\n        let leftScroll = forOfDir.getColumnScrollLeft(parentVIndex), rightScroll = 0;\n        // caculate offset from parent based on target column colStart and colEnd and the resolved child column sizes.\n        const childSizes = parent.getFilledChildColumnSizes(parent.children);\n        const colStart = targetCol.colStart || 1;\n        const colEnd = targetCol.colEnd || colStart + 1;\n        for (let i = 1; i < colStart; i++) {\n            leftScroll += parseInt(childSizes[i - 1], 10);\n        }\n        rightScroll += leftScroll;\n        for (let j = colStart; j < colEnd; j++) {\n            rightScroll +=  parseInt(childSizes[j - 1], 10);\n        }\n        return {leftScroll, rightScroll};\n    }\n\n    protected getColunmByVisibleIndex(visibleColIndex: number): IgxColumnComponent {\n        visibleColIndex = visibleColIndex < 0 ? 0 : visibleColIndex;\n        return this.grid.columnList.find((col) => !col.columnLayout && col.visibleIndex === visibleColIndex);\n    }\n\n    public shouldPerformVerticalScroll(rowIndex: number, visibleColumnIndex: number): boolean {\n        if (this._isGroupRecordAt(rowIndex) || this._isDetailRecordAt(rowIndex)) {\n            return super.shouldPerformVerticalScroll(rowIndex, visibleColumnIndex);\n       }\n        if (!super.shouldPerformVerticalScroll(rowIndex, visibleColumnIndex)) {return false; }\n       const targetRow = this.grid.summariesRowList.filter(s => s.index !== 0)\n           .concat(this.grid.rowList.toArray()).find(r => r.index === rowIndex);\n       const scrollTop =  Math.abs(this.grid.verticalScrollContainer.getScroll().scrollTop);\n       const containerHeight = this.grid.calcHeight ? Math.ceil(this.grid.calcHeight) : 0;\n       const scrollPos = this.getVerticalScrollPositions(rowIndex, visibleColumnIndex);\n       if (!targetRow || targetRow.nativeElement.offsetTop + scrollPos.topOffset < Math.abs(this.verticalDCTopOffset)\n           || containerHeight && containerHeight < scrollPos.rowBottom - scrollTop) {\n           return true;\n       } else {\n           return false;\n       }\n   }\n\n   get verticalDCTopOffset(): number {\n        return parseInt(this.grid.verticalScrollContainer.dc.instance._viewContainer.element.nativeElement.style.top, 10);\n    }\n\n    private _isGroupRecordAt(rowIndex: number) {\n        const record = this.grid.dataView[rowIndex];\n        return record.records && record.records.length;\n    }\n    private _isDetailRecordAt(rowIndex: number) {\n        const record = this.grid.dataView[rowIndex];\n        return this.grid.isDetailRecord(record);\n    }\n\n    public performVerticalScrollToCell(rowIndex: number, visibleColumnIndex: number, cb?: () => void) {\n        if (this._isGroupRecordAt(rowIndex) || this._isDetailRecordAt(rowIndex)) {\n            return super.performVerticalScrollToCell(rowIndex, visibleColumnIndex, cb);\n        }\n        const containerHeight = this.grid.calcHeight ? Math.ceil(this.grid.calcHeight) : 0;\n        const scrollTop = Math.abs(this.grid.verticalScrollContainer.getScroll().scrollTop);\n        const scrollPos = this.getVerticalScrollPositions(rowIndex, visibleColumnIndex);\n        const targetRow = this.grid.summariesRowList.filter(s => s.index !== 0)\n            .concat(this.grid.rowList.toArray()).find(r => r.index === rowIndex);\n        const isPrevious =  (scrollTop > scrollPos.rowTop) && (!targetRow ||\n                targetRow.nativeElement.offsetTop + scrollPos.topOffset < Math.abs(this.verticalDCTopOffset));\n        const scrollAmount = isPrevious ? scrollPos.rowTop : Math.abs(scrollTop + containerHeight - scrollPos.rowBottom);\n\n        this.grid.verticalScrollContainer.onChunkLoad\n        .pipe(first()).subscribe(() => {\n            cb();\n        });\n\n        if (isPrevious) {\n            this.grid.verticalScrollContainer.scrollPosition = scrollAmount;\n        } else {\n            this.grid.verticalScrollContainer.addScrollTop(scrollAmount);\n        }\n    }\n\n    public getVerticalScrollPositions(rowIndex: number, visibleColIndex: number): { rowTop: number, rowBottom: number, topOffset: number } {\n        const targetCol: IgxColumnComponent = this.getColunmByVisibleIndex(visibleColIndex);\n        const topOffset = (targetCol.rowStart - 1)  * this.grid.defaultRowHeight;\n        const rowTop = this.grid.verticalScrollContainer.sizesCache[rowIndex] + topOffset;\n        const rowBottom = rowTop + (this.grid.defaultRowHeight * targetCol.gridRowSpan);\n        return { rowTop, rowBottom, topOffset };\n    }\n\n    public performHorizontalScrollToCell(\n        rowIndex: number, visibleColumnIndex: number, isSummary: boolean = false, cb?: () => void) {\n        const scrollPos = this.getChildColumnScrollPositions(visibleColumnIndex);\n        const hScroll = this.horizontalScroll(rowIndex);\n        this.grid.parentVirtDir.onChunkLoad\n            .pipe(first())\n            .subscribe(() => {\n                if (cb) {\n                    cb();\n                } else {\n                    this._focusCell(this.getCellElementByVisibleIndex(rowIndex, visibleColumnIndex, isSummary));\n                }\n        });\n        const isPrevItem =  hScroll.getScroll().scrollLeft > scrollPos.leftScroll;\n        const containerSize = parseInt(hScroll.igxForContainerSize, 10);\n        const nextScroll = isPrevItem ? scrollPos.leftScroll : scrollPos.rightScroll - containerSize;\n        hScroll.scrollPosition = nextScroll;\n    }\n\n    protected _focusCell(cellElem: HTMLElement) {\n        // in case of variable row heights in mrl grid make sure cell is really in view after it has been rendered.\n        const gridBoundingClientRect = this.grid.tbody.nativeElement.getBoundingClientRect();\n        const diffTop = cellElem.getBoundingClientRect().top - gridBoundingClientRect.top;\n        const diffBottom = cellElem.getBoundingClientRect().bottom - gridBoundingClientRect.bottom;\n\n        if (diffTop < 0) {\n            // cell is above grid top - not visible\n            this.grid.nativeElement.focus({ preventScroll: true });\n            this.grid.verticalScrollContainer.onChunkLoad\n                .pipe(first())\n                .subscribe(() => {\n                    cellElem.focus({ preventScroll: true });\n            });\n            this.grid.verticalScrollContainer.addScrollTop(diffTop);\n        } else if (diffBottom > 0) {\n            // cell is below grid bottom - not visible\n            this.grid.nativeElement.focus({ preventScroll: true });\n            this.grid.verticalScrollContainer.onChunkLoad\n                .pipe(first())\n                .subscribe(() => {\n                    cellElem.focus({ preventScroll: true });\n            });\n            this.grid.verticalScrollContainer.addScrollTop(diffBottom);\n        }  else {\n            // cell is visible\n            cellElem.focus({ preventScroll: true });\n        }\n    }\n\n    public goToFirstCell() {\n        this.startNavigationCell = null;\n        super.goToFirstCell();\n    }\n\n    public goToLastCell() {\n        this.startNavigationCell = null;\n        super.goToLastCell();\n    }\n}\n","import { Directive, OnDestroy, Input, ElementRef, ViewContainerRef, NgZone, Renderer2, ChangeDetectorRef } from '@angular/core';\nimport { IgxDragDirective } from '../../directives/drag-drop/drag-drop.directive';\nimport { Subscription, fromEvent } from 'rxjs';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { KEYS } from '../../core/utils';\nimport { IgxColumnMovingService } from './moving.service';\n\n\n/**\n * @hidden\n * @internal\n */\n@Directive({\n    selector: '[igxColumnMovingDrag]',\n\n})\nexport class IgxColumnMovingDragDirective extends IgxDragDirective implements OnDestroy {\n\n    @Input('igxColumnMovingDrag')\n    set data(val) {\n        this._column = val;\n    }\n\n    get column() {\n        return this._column;\n    }\n\n    get draggable(): boolean {\n        return this.column && (this.column.movable || (this.column.groupable && !this.column.columnGroup));\n    }\n\n    public get icon(): HTMLElement {\n        return this.cms.icon;\n    }\n\n    private subscription$: Subscription;\n    private _column: IgxColumnComponent;\n    private _ghostClass = 'igx-grid__drag-ghost-image';\n    private ghostImgIconClass = 'igx-grid__drag-ghost-image-icon';\n    private ghostImgIconGroupClass = 'igx-grid__drag-ghost-image-icon-group';\n\n    constructor(\n        public element: ElementRef<HTMLElement>,\n        public viewContainer: ViewContainerRef,\n        public zone: NgZone,\n        public renderer: Renderer2,\n        public cdr: ChangeDetectorRef,\n        private cms: IgxColumnMovingService,\n    ) {\n        super(cdr, element, viewContainer, zone, renderer);\n    }\n\n    public ngOnDestroy() {\n        this._unsubscribe();\n    }\n\n    public onEscape(event) {\n        this.cms.cancelDrop = true;\n        this.onPointerUp(event);\n    }\n\n    public onPointerDown(event) {\n        if (!this.draggable || event.target.getAttribute('draggable') === 'false') {\n            return;\n        }\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        this._removeOnDestroy = false;\n        this.cms.column = this.column;\n        this.ghostClass = this._ghostClass;\n\n        super.onPointerDown(event);\n\n        this.cms.isColumnMoving = true;\n        this.column.grid.cdr.detectChanges();\n\n        const args = {\n            source: this.column\n        };\n        this.column.grid.onColumnMovingStart.emit(args);\n\n        this.subscription$ = fromEvent(this.column.grid.document.defaultView, 'keydown').subscribe((ev: KeyboardEvent) => {\n            if (ev.key === KEYS.ESCAPE || ev.key === KEYS.ESCAPE_IE) {\n                this.onEscape(ev);\n            }\n        });\n    }\n\n    public onPointerMove(event) {\n        event.preventDefault();\n        super.onPointerMove(event);\n\n        if (this._dragStarted && this.ghostElement && !this.column.grid.draggedColumn) {\n            this.column.grid.draggedColumn = this.column;\n            this.column.grid.cdr.detectChanges();\n        }\n\n        if (this.cms.isColumnMoving) {\n            const args = {\n                source: this.column,\n                cancel: false\n            };\n            this.column.grid.onColumnMoving.emit(args);\n\n            if (args.cancel) {\n                this.onEscape(event);\n            }\n        }\n    }\n\n    public onPointerUp(event) {\n        // Run it explicitly inside the zone because sometimes onPointerUp executes after the code below.\n        this.zone.run(() => {\n            super.onPointerUp(event);\n\n            this.cms.isColumnMoving = false;\n            this.column.grid.draggedColumn = null;\n            this.column.grid.cdr.detectChanges();\n        });\n\n        this._unsubscribe();\n    }\n\n    protected createGhost(pageX, pageY) {\n        super.createGhost(pageX, pageY);\n\n        this.ghostElement.style.height = null;\n        this.ghostElement.style.minWidth = null;\n        this.ghostElement.style.flexBasis = null;\n        this.ghostElement.style.position = null;\n\n        const icon = document.createElement('i');\n        const text = document.createTextNode('block');\n        icon.appendChild(text);\n\n        icon.classList.add('material-icons');\n        this.cms.icon = icon;\n\n        if (!this.column.columnGroup) {\n            this.renderer.addClass(icon, this.ghostImgIconClass);\n\n            this.ghostElement.insertBefore(icon, this.ghostElement.firstElementChild);\n\n            this.ghostLeft = this._ghostStartX = pageX - ((this.ghostElement.getBoundingClientRect().width / 3) * 2);\n            this.ghostTop = this._ghostStartY = pageY - ((this.ghostElement.getBoundingClientRect().height / 3) * 2);\n        } else {\n            this.ghostElement.insertBefore(icon, this.ghostElement.childNodes[0]);\n\n            this.renderer.addClass(icon, this.ghostImgIconGroupClass);\n            this.ghostElement.children[0].style.paddingLeft = '0px';\n\n            this.ghostLeft = this._ghostStartX = pageX - ((this.ghostElement.getBoundingClientRect().width / 3) * 2);\n            this.ghostTop = this._ghostStartY = pageY - ((this.ghostElement.getBoundingClientRect().height / 3) * 2);\n        }\n    }\n\n    private _unsubscribe() {\n        if (this.subscription$) {\n            this.subscription$.unsubscribe();\n            this.subscription$ = null;\n        }\n    }\n}\n","import { Directive, ElementRef, Renderer2, NgZone, HostBinding, TemplateRef } from '@angular/core';\nimport { IgxDropDirective } from '../../directives/drag-drop/drag-drop.directive';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IgxGridComponent } from './grid.component';\nimport { SortingDirection } from '../../data-operations/sorting-expression.interface';\nimport { IgxColumnMovingDragDirective } from '../moving/moving.drag.directive';\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxGroupByRow]'\n})\nexport class IgxGroupByRowTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) { }\n\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxGridDetail]'\n})\nexport class IgxGridDetailTemplateDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxRowExpandedIndicator]'\n})\nexport class IgxRowExpandedIndicatorDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxRowCollapsedIndicator]'\n})\nexport class IgxRowCollapsedIndicatorDirective {\n}\n\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxHeaderExpandedIndicator]'\n})\nexport class IgxHeaderExpandIndicatorDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxHeaderCollapsedIndicator]'\n})\nexport class IgxHeaderCollapseIndicatorDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxGroupAreaDrop]'\n})\nexport class IgxGroupAreaDropDirective extends IgxDropDirective {\n\n    constructor(private elementRef: ElementRef, private renderer: Renderer2, private zone: NgZone) {\n        super(elementRef, renderer, zone);\n    }\n\n    @HostBinding('class.igx-drop-area--hover')\n    public hovered = false;\n\n\n    public onDragEnter(event) {\n        const drag: IgxColumnMovingDragDirective = event.detail.owner;\n        const column: IgxColumnComponent = drag.column;\n        if (!this.columnBelongsToGrid(column)) {\n            return;\n        }\n        const grid = <IgxGridComponent>column.grid;\n        const isGrouped = grid.groupingExpressions.findIndex((item) => item.fieldName === column.field) !== -1;\n        if (column.groupable && !isGrouped && !column.columnGroup && !!column.field) {\n            drag.icon.innerText = 'group_work';\n            this.hovered = true;\n        } else {\n            drag.icon.innerText = 'block';\n            this.hovered = false;\n        }\n    }\n\n    public onDragLeave(event) {\n        const drag: IgxColumnMovingDragDirective = event.detail.owner;\n        const column: IgxColumnComponent = drag.column;\n        if (!this.columnBelongsToGrid(column)) {\n            return;\n        }\n        event.detail.owner.icon.innerText = 'block';\n        this.hovered = false;\n    }\n\n    public onDragDrop(event) {\n        const drag: IgxColumnMovingDragDirective = event.detail.owner;\n        if (drag instanceof IgxColumnMovingDragDirective) {\n            const column: IgxColumnComponent = drag.column;\n            if (!this.columnBelongsToGrid(column)) {\n                return;\n            }\n            const grid = <IgxGridComponent>column.grid;\n            const isGrouped = grid.groupingExpressions.findIndex((item) => item.fieldName === column.field) !== -1;\n            if (column.groupable && !isGrouped && !column.columnGroup && !!column.field) {\n                grid.groupBy({ fieldName: column.field, dir: SortingDirection.Asc, ignoreCase: column.sortingIgnoreCase,\n                    strategy: column.sortStrategy, groupingComparer: column.groupingComparer });\n            }\n        }\n    }\n\n    private closestParentByAttr(elem, attr) {\n        return elem.hasAttribute(attr) ?\n            elem :\n            this.closestParentByAttr(elem.parentElement, attr);\n    }\n\n    private columnBelongsToGrid(column) {\n        const elem = this.elementRef.nativeElement;\n        const closestGridID = this.closestParentByAttr(elem, 'igxGroupAreaDrop').getAttribute('gridId');\n        if (!column) {\n            return false;\n        } else {\n            const grid = <IgxGridComponent>column.grid;\n            if (!grid || grid.id !== closestGridID) {\n                return false;\n            }\n            return true;\n        }\n    }\n}\n","import {\n    Component, Input, ViewChild, ChangeDetectorRef, ViewChildren, QueryList, ElementRef, AfterViewInit, OnDestroy, HostBinding\n} from '@angular/core';\nimport { VerticalAlignment, HorizontalAlignment, Point, OverlaySettings } from '../../../services/overlay/utilities';\nimport { ConnectedPositioningStrategy } from '../../../services/overlay/position/connected-positioning-strategy';\nimport { IgxOverlayService } from '../../../services/overlay/overlay';\nimport { FilteringExpressionsTree, IFilteringExpressionsTree } from '../../../data-operations/filtering-expressions-tree';\nimport { FilteringLogic, IFilteringExpression } from '../../../data-operations/filtering-expression.interface';\nimport { IgxChipComponent } from '../../../chips/chip.component';\nimport { IgxSelectComponent } from '../../../select/select.component';\nimport { IDragStartEventArgs, IDragBaseEventArgs } from '../../../directives/drag-drop/drag-drop.directive';\nimport { CloseScrollStrategy } from '../../../services/overlay/scroll/close-scroll-strategy';\nimport { IgxToggleDirective, IgxOverlayOutletDirective } from '../../../directives/toggle/toggle.directive';\nimport { IButtonGroupEventArgs } from '../../../buttonGroup/buttonGroup.component';\nimport { takeUntil, first } from 'rxjs/operators';\nimport { Subject, Subscription } from 'rxjs';\nimport { KEYS } from '../../../core/utils';\nimport { AbsoluteScrollStrategy, AutoPositionStrategy } from '../../../services/index';\nimport { IgxColumnComponent } from '../../columns/column.component';\nimport { GridType } from '../../common/grid.interface';\nimport { DataUtil } from './../../../data-operations/data-util';\n\n/**\n *@hidden\n */\nclass ExpressionItem {\n    constructor(parent?: ExpressionGroupItem) {\n        this.parent = parent;\n    }\n    parent: ExpressionGroupItem;\n    selected: boolean;\n}\n\n/**\n *@hidden\n */\nclass ExpressionGroupItem extends ExpressionItem {\n    constructor(operator: FilteringLogic, parent?: ExpressionGroupItem) {\n        super(parent);\n        this.operator = operator;\n        this.children = [];\n    }\n    operator: FilteringLogic;\n    children: ExpressionItem[];\n}\n\n/**\n *@hidden\n */\nclass ExpressionOperandItem extends ExpressionItem {\n    constructor(expression: IFilteringExpression, parent: ExpressionGroupItem) {\n        super(parent);\n        this.expression = expression;\n    }\n    expression: IFilteringExpression;\n    inEditMode: boolean;\n    inAddMode: boolean;\n    hovered: boolean;\n    columnHeader: string;\n}\n\n/**\n * A component used for presenting advanced filtering UI for a Grid.\n * It is used internally in the Grid, but could also be hosted in a container outside of it.\n *\n * Example:\n * ```html\n * <igx-advanced-filtering-dialog\n *     [grid]=\"grid1\">\n * </igx-advanced-filtering-dialog>\n * ```\n */\n@Component({\n    selector: 'igx-advanced-filtering-dialog',\n    templateUrl: './advanced-filtering-dialog.component.html'\n})\nexport class IgxAdvancedFilteringDialogComponent implements AfterViewInit, OnDestroy {\n    /**\n     * @hidden @internal\n     */\n    public inline = true;\n    /**\n     * @hidden @internal\n     */\n    public rootGroup: ExpressionGroupItem;\n\n    /**\n     * @hidden @internal\n     */\n    public selectedExpressions: ExpressionOperandItem[] = [];\n\n    /**\n     * @hidden @internal\n     */\n    public selectedGroups: ExpressionGroupItem[] = [];\n\n    /**\n     * @hidden @internal\n     */\n    public currentGroup: ExpressionGroupItem;\n\n    /**\n     * @hidden @internal\n     */\n    public editedExpression: ExpressionOperandItem;\n\n    /**\n     * @hidden @internal\n     */\n    public addModeExpression: ExpressionOperandItem;\n\n    /**\n     * @hidden @internal\n     */\n    public contextualGroup: ExpressionGroupItem;\n\n    /**\n     * @hidden @internal\n     */\n    public filteringLogics;\n\n    /**\n     * @hidden @internal\n     */\n    public selectedCondition: string;\n\n    /**\n     * @hidden @internal\n     */\n    public searchValue: any;\n\n    private _positionSettings = {\n        horizontalStartPoint: HorizontalAlignment.Right,\n        verticalStartPoint: VerticalAlignment.Top\n    };\n    private _overlaySettings: OverlaySettings = {\n        closeOnOutsideClick: false,\n        modal: false,\n        positionStrategy: new ConnectedPositioningStrategy(this._positionSettings),\n        scrollStrategy: new CloseScrollStrategy()\n    };\n\n    /**\n     * @hidden @internal\n     */\n    public columnSelectOverlaySettings: OverlaySettings = {\n        scrollStrategy: new AbsoluteScrollStrategy(),\n        modal: false,\n        closeOnOutsideClick: false,\n        excludePositionTarget: true\n    };\n\n    /**\n     * @hidden @internal\n     */\n    public conditionSelectOverlaySettings: OverlaySettings = {\n        scrollStrategy: new AbsoluteScrollStrategy(),\n        modal: false,\n        closeOnOutsideClick: false,\n        excludePositionTarget: true\n    };\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('columnSelect', { read: IgxSelectComponent })\n    public columnSelect: IgxSelectComponent;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('conditionSelect', { read: IgxSelectComponent })\n    public conditionSelect: IgxSelectComponent;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('searchValueInput', { read: ElementRef })\n    public searchValueInput: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('addRootAndGroupButton', { read: ElementRef })\n    public addRootAndGroupButton: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('addConditionButton', { read: ElementRef })\n    public addConditionButton: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('editingInputsContainer', { read: ElementRef })\n    public set editingInputsContainer(value: ElementRef) {\n        if ((value && !this._editingInputsContainer) ||\n            (value && this._editingInputsContainer && this._editingInputsContainer.nativeElement !== value.nativeElement)) {\n            requestAnimationFrame(() => {\n                this.scrollElementIntoView(value.nativeElement);\n            });\n        }\n\n        this._editingInputsContainer = value;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get editingInputsContainer(): ElementRef {\n        return this._editingInputsContainer;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('addModeContainer', { read: ElementRef })\n    public set addModeContainer(value: ElementRef) {\n        if ((value && !this._addModeContainer) ||\n            (value && this._addModeContainer && this._addModeContainer.nativeElement !== value.nativeElement)) {\n            requestAnimationFrame(() => {\n                this.scrollElementIntoView(value.nativeElement);\n            });\n        }\n\n        this._addModeContainer = value;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get addModeContainer(): ElementRef {\n        return this._addModeContainer;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('currentGroupButtonsContainer', { read: ElementRef })\n    public set currentGroupButtonsContainer(value: ElementRef) {\n        if ((value && !this._currentGroupButtonsContainer) ||\n            (value && this._currentGroupButtonsContainer && this._currentGroupButtonsContainer.nativeElement !== value.nativeElement)) {\n            requestAnimationFrame(() => {\n                this.scrollElementIntoView(value.nativeElement);\n            });\n        }\n\n        this._currentGroupButtonsContainer = value;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get currentGroupButtonsContainer(): ElementRef {\n        return this._currentGroupButtonsContainer;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild(IgxToggleDirective)\n    public contextMenuToggle: IgxToggleDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChildren(IgxChipComponent)\n    public chips: QueryList<IgxChipComponent>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('expressionsContainer')\n    protected expressionsContainer: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('overlayOutlet', { read: IgxOverlayOutletDirective, static: true })\n    public overlayOutlet: IgxOverlayOutletDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('style.display')\n    display = 'block';\n\n    private destroy$ = new Subject<any>();\n    private _overlayComponentId: string;\n    private _overlayService: IgxOverlayService;\n    private _selectedColumn: IgxColumnComponent;\n    private _clickTimer;\n    private _dblClickDelay = 200;\n    private _preventChipClick = false;\n    private _editingInputsContainer: ElementRef;\n    private _addModeContainer: ElementRef;\n    private _currentGroupButtonsContainer: ElementRef;\n    private _grid: GridType;\n    private _filteringChange: Subscription;\n\n    constructor(public cdr: ChangeDetectorRef) { }\n\n    /**\n     * @hidden @internal\n     */\n    public ngAfterViewInit(): void {\n        this._overlaySettings.outlet = this.overlayOutlet;\n        this.columnSelectOverlaySettings.outlet = this.overlayOutlet;\n        this.conditionSelectOverlaySettings.outlet = this.overlayOutlet;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get displayDensity() {\n        return this.grid.displayDensity;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get selectedColumn(): IgxColumnComponent {\n        return this._selectedColumn;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public set selectedColumn(value: IgxColumnComponent) {\n        const oldValue = this._selectedColumn;\n\n        if (this._selectedColumn !== value) {\n            this._selectedColumn = value;\n            if (oldValue && this._selectedColumn && this._selectedColumn.dataType !== oldValue.dataType) {\n                this.selectedCondition = null;\n                this.searchValue = null;\n                this.cdr.detectChanges();\n            }\n        }\n    }\n\n    /**\n     * An @Input property that sets the grid.\n     */\n    @Input()\n    set grid(grid: GridType) {\n        this._grid = grid;\n\n        if (this._filteringChange) {\n            this._filteringChange.unsubscribe();\n        }\n\n        if (this._grid) {\n            this._grid.filteringService.registerSVGIcons();\n\n            this._filteringChange = this._grid.advancedFilteringExpressionsTreeChange.pipe(takeUntil(this.destroy$)).subscribe(() => {\n                this.init();\n            });\n\n            this.init();\n        }\n    }\n\n    /**\n     * Returns the grid.\n     */\n    get grid(): GridType {\n        return this._grid;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get filterableColumns(): IgxColumnComponent[] {\n        return this.grid.columns.filter((col) => !col.columnGroup && col.filterable);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public dragStart(dragArgs: IDragStartEventArgs) {\n        if (!this._overlayComponentId) {\n            dragArgs.cancel = true;\n            return;\n        }\n\n        if (!this.contextMenuToggle.collapsed) {\n            this.contextMenuToggle.element.style.display = 'none';\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public dragEnd(dragArgs: IDragBaseEventArgs) {\n        if (!this.contextMenuToggle.collapsed) {\n            this.calculateContextMenuTarget();\n            this.contextMenuToggle.reposition();\n            this.contextMenuToggle.element.style.display = '';\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onDragMove(e) {\n        const deltaX = e.nextPageX - e.pageX;\n        const deltaY = e.nextPageY - e.pageY;\n        e.cancel = true;\n        this._overlayService.setOffset(this._overlayComponentId, deltaX, deltaY);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public addCondition(parent: ExpressionGroupItem, afterExpression?: ExpressionItem) {\n        this.cancelOperandAdd();\n\n        const operandItem = new ExpressionOperandItem({\n            fieldName: null,\n            condition: null,\n            ignoreCase: true,\n            searchVal: null\n        }, parent);\n\n        if (afterExpression) {\n            const index = parent.children.indexOf(afterExpression);\n            parent.children.splice(index + 1, 0, operandItem);\n        } else {\n            parent.children.push(operandItem);\n        }\n\n        this.enterExpressionEdit(operandItem);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public addAndGroup(parent?: ExpressionGroupItem, afterExpression?: ExpressionItem) {\n        this.addGroup(FilteringLogic.And, parent, afterExpression);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public addOrGroup(parent?: ExpressionGroupItem, afterExpression?: ExpressionItem) {\n        this.addGroup(FilteringLogic.Or, parent, afterExpression);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public endGroup(groupItem: ExpressionGroupItem) {\n        this.currentGroup = groupItem.parent;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public commitOperandEdit() {\n        if (this.editedExpression) {\n            this.editedExpression.expression.fieldName = this.selectedColumn.field;\n            this.editedExpression.expression.condition = this.selectedColumn.filters.condition(this.selectedCondition);\n            this.editedExpression.expression.searchVal = DataUtil.parseValue(this.selectedColumn.dataType, this.searchValue);\n            this.editedExpression.columnHeader = this.selectedColumn.header;\n\n            this.editedExpression.inEditMode = false;\n            this.editedExpression = null;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public cancelOperandAdd() {\n        if (this.addModeExpression) {\n            this.addModeExpression.inAddMode = false;\n            this.addModeExpression = null;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public cancelOperandEdit() {\n        if (this.editedExpression) {\n            this.editedExpression.inEditMode = false;\n\n            if (!this.editedExpression.expression.fieldName) {\n                this.deleteItem(this.editedExpression);\n            }\n\n            this.editedExpression = null;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public operandCanBeCommitted(): boolean {\n        return this.selectedColumn && this.selectedCondition &&\n            (!!this.searchValue || this.selectedColumn.filters.condition(this.selectedCondition).isUnary);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public exitOperandEdit() {\n        if (!this.editedExpression) {\n            return;\n        }\n\n        if (this.operandCanBeCommitted()) {\n            this.commitOperandEdit();\n        } else {\n            this.cancelOperandEdit();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public isExpressionGroup(expression: ExpressionItem): boolean {\n        return expression instanceof ExpressionGroupItem;\n    }\n\n    private addGroup(operator: FilteringLogic, parent?: ExpressionGroupItem, afterExpression?: ExpressionItem) {\n        this.cancelOperandAdd();\n\n        const groupItem = new ExpressionGroupItem(operator, parent);\n\n        if (parent) {\n            if (afterExpression) {\n                const index = parent.children.indexOf(afterExpression);\n                parent.children.splice(index + 1, 0, groupItem);\n            } else {\n                parent.children.push(groupItem);\n            }\n        } else {\n            this.rootGroup = groupItem;\n        }\n\n        this.addCondition(groupItem);\n        this.currentGroup = groupItem;\n    }\n\n    private createExpressionGroupItem(expressionTree: IFilteringExpressionsTree, parent?: ExpressionGroupItem): ExpressionGroupItem {\n        let groupItem: ExpressionGroupItem;\n        if (expressionTree) {\n            groupItem = new ExpressionGroupItem(expressionTree.operator, parent);\n\n            for (const expr of expressionTree.filteringOperands) {\n                if (expr instanceof FilteringExpressionsTree) {\n                    groupItem.children.push(this.createExpressionGroupItem(expr, groupItem));\n                } else {\n                    const filteringExpr = expr as IFilteringExpression;\n                    const exprCopy: IFilteringExpression = {\n                        fieldName: filteringExpr.fieldName,\n                        condition: filteringExpr.condition,\n                        searchVal: filteringExpr.searchVal,\n                        ignoreCase: filteringExpr.ignoreCase\n                    };\n                    const operandItem = new ExpressionOperandItem(exprCopy, groupItem);\n                    const column = this.grid.getColumnByName(filteringExpr.fieldName);\n                    operandItem.columnHeader = column.header;\n                    groupItem.children.push(operandItem);\n                }\n            }\n        }\n\n        return groupItem;\n    }\n\n    private createExpressionsTreeFromGroupItem(groupItem: ExpressionGroupItem): FilteringExpressionsTree {\n        if (!groupItem) {\n            return null;\n        }\n\n        const expressionsTree = new FilteringExpressionsTree(groupItem.operator);\n\n        for (const item of groupItem.children) {\n            if (item instanceof ExpressionGroupItem) {\n                const subTree = this.createExpressionsTreeFromGroupItem((item as ExpressionGroupItem));\n                expressionsTree.filteringOperands.push(subTree);\n            } else {\n                expressionsTree.filteringOperands.push((item as ExpressionOperandItem).expression);\n            }\n        }\n\n        return expressionsTree;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onChipRemove(expressionItem: ExpressionItem) {\n        this.deleteItem(expressionItem);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onChipClick(expressionItem: ExpressionOperandItem) {\n        this._clickTimer = setTimeout(() => {\n            if (!this._preventChipClick) {\n                this.onToggleExpression(expressionItem);\n            }\n            this._preventChipClick = false;\n        }, this._dblClickDelay);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onChipDblClick(expressionItem: ExpressionOperandItem) {\n        clearTimeout(this._clickTimer);\n        this._preventChipClick = true;\n        this.enterExpressionEdit(expressionItem);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public enterExpressionEdit(expressionItem: ExpressionOperandItem) {\n        this.clearSelection();\n        this.exitOperandEdit();\n        this.cancelOperandAdd();\n\n        if (this.editedExpression) {\n            this.editedExpression.inEditMode = false;\n        }\n\n        expressionItem.hovered = false;\n\n        this.selectedColumn = expressionItem.expression.fieldName ?\n            this.grid.getColumnByName(expressionItem.expression.fieldName) : null;\n        this.selectedCondition = expressionItem.expression.condition ?\n            expressionItem.expression.condition.name : null;\n        this.searchValue = expressionItem.expression.searchVal;\n\n        expressionItem.inEditMode = true;\n        this.editedExpression = expressionItem;\n\n        this.cdr.detectChanges();\n\n        this.columnSelectOverlaySettings.positionStrategy = new AutoPositionStrategy({ target: this.columnSelect.element });\n        this.conditionSelectOverlaySettings.positionStrategy = new AutoPositionStrategy({ target: this.conditionSelect.element });\n\n        if (!this.selectedColumn) {\n            this.columnSelect.input.nativeElement.focus();\n        } else if (this.selectedColumn.filters.condition(this.selectedCondition).isUnary) {\n            this.conditionSelect.input.nativeElement.focus();\n        } else {\n            this.searchValueInput.nativeElement.focus();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public clearSelection() {\n        for (const group of this.selectedGroups) {\n            group.selected = false;\n        }\n        this.selectedGroups = [];\n\n        for (const expr of this.selectedExpressions) {\n            expr.selected = false;\n        }\n        this.selectedExpressions = [];\n\n        this.toggleContextMenu();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public enterExpressionAdd(expressionItem: ExpressionOperandItem) {\n        this.clearSelection();\n        this.exitOperandEdit();\n\n        if (this.addModeExpression) {\n            this.addModeExpression.inAddMode = false;\n        }\n\n        expressionItem.inAddMode = true;\n        this.addModeExpression = expressionItem;\n        if (expressionItem.selected) {\n            this.toggleExpression(expressionItem);\n        }\n    }\n\n    private onToggleExpression(expressionItem: ExpressionOperandItem) {\n        this.exitOperandEdit();\n        this.toggleExpression(expressionItem);\n\n        this.toggleContextMenu();\n    }\n\n    private toggleExpression(expressionItem: ExpressionOperandItem) {\n        expressionItem.selected = !expressionItem.selected;\n\n        if (expressionItem.selected) {\n            this.selectedExpressions.push(expressionItem);\n        } else {\n            const index = this.selectedExpressions.indexOf(expressionItem);\n            this.selectedExpressions.splice(index, 1);\n            this.deselectParentRecursive(expressionItem);\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public contextMenuClosed() {\n        this.contextualGroup = null;\n    }\n\n    private toggleContextMenu() {\n        const contextualGroup = this.findSingleSelectedGroup();\n\n        if (contextualGroup || this.selectedExpressions.length > 1) {\n            this.contextualGroup = contextualGroup;\n\n            if (contextualGroup) {\n                this.filteringLogics = [\n                    {\n                        label: this.grid.resourceStrings.igx_grid_filter_operator_and,\n                        selected: contextualGroup.operator === FilteringLogic.And\n                    },\n                    {\n                        label: this.grid.resourceStrings.igx_grid_filter_operator_or,\n                        selected: contextualGroup.operator === FilteringLogic.Or\n                    }\n                ];\n            }\n        } else if (this.contextMenuToggle) {\n            this.contextMenuToggle.close();\n        }\n    }\n\n    private findSingleSelectedGroup(): ExpressionGroupItem {\n        for (const group of this.selectedGroups) {\n            const containsAllSelectedExpressions = this.selectedExpressions.every(op => this.isInsideGroup(op, group));\n\n            if (containsAllSelectedExpressions) {\n                return group;\n            }\n        }\n\n        return null;\n    }\n\n    private isInsideGroup(item: ExpressionItem, group: ExpressionGroupItem): boolean {\n        if (!item) {\n            return false;\n        }\n\n        if (item.parent === group) {\n            return true;\n        }\n\n        return this.isInsideGroup(item.parent, group);\n    }\n\n    private deleteItem(expressionItem: ExpressionItem) {\n        if (!expressionItem.parent) {\n            this.rootGroup = null;\n            this.currentGroup = null;\n            return;\n        }\n\n        if (expressionItem === this.currentGroup) {\n            this.currentGroup = this.currentGroup.parent;\n        }\n\n        const children = expressionItem.parent.children;\n        const index = children.indexOf(expressionItem);\n        children.splice(index, 1);\n\n        if (!children.length) {\n            this.deleteItem(expressionItem.parent);\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onKeyDown(eventArgs: KeyboardEvent) {\n        eventArgs.stopPropagation();\n        if (!this.contextMenuToggle.collapsed &&\n            (eventArgs.key === KEYS.ESCAPE || eventArgs.key === KEYS.ESCAPE_IE)) {\n            this.clearSelection();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public createAndGroup() {\n        this.createGroup(FilteringLogic.And);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public createOrGroup() {\n        this.createGroup(FilteringLogic.Or);\n    }\n\n    private createGroup(operator: FilteringLogic) {\n        const chips = this.chips.toArray();\n        const minIndex = this.selectedExpressions.reduce((i, e) => Math.min(i, chips.findIndex(c => c.data === e)), Number.MAX_VALUE);\n        const firstExpression = chips[minIndex].data;\n\n        const parent = firstExpression.parent;\n        const groupItem = new ExpressionGroupItem(operator, parent);\n\n        const index = parent.children.indexOf(firstExpression);\n        parent.children.splice(index, 0, groupItem);\n\n        for (const expr of this.selectedExpressions) {\n            this.deleteItem(expr);\n            groupItem.children.push(expr);\n            expr.parent = groupItem;\n        }\n\n        this.clearSelection();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public deleteFilters() {\n        for (const expr of this.selectedExpressions) {\n            this.deleteItem(expr);\n        }\n\n        this.clearSelection();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onGroupClick(groupItem: ExpressionGroupItem) {\n        this.toggleGroup(groupItem);\n    }\n\n    private toggleGroup(groupItem: ExpressionGroupItem) {\n        this.exitOperandEdit();\n        if (groupItem.children && groupItem.children.length) {\n            this.toggleGroupRecursive(groupItem, !groupItem.selected);\n            if (!groupItem.selected) {\n                this.deselectParentRecursive(groupItem);\n            }\n            this.toggleContextMenu();\n        }\n    }\n\n    private toggleGroupRecursive(groupItem: ExpressionGroupItem, selected: boolean) {\n        if (groupItem.selected !== selected) {\n            groupItem.selected = selected;\n\n            if (groupItem.selected) {\n                this.selectedGroups.push(groupItem);\n            } else {\n                const index = this.selectedGroups.indexOf(groupItem);\n                this.selectedGroups.splice(index, 1);\n            }\n        }\n\n        for (const expr of groupItem.children) {\n            if (expr instanceof ExpressionGroupItem) {\n                this.toggleGroupRecursive(expr, selected);\n            } else {\n                const operandExpression = expr as ExpressionOperandItem;\n                if (operandExpression.selected !== selected) {\n                    this.toggleExpression(operandExpression);\n                }\n            }\n        }\n    }\n\n    private deselectParentRecursive(expressionItem: ExpressionItem) {\n        const parent = expressionItem.parent;\n        if (parent) {\n            if (parent.selected) {\n                parent.selected = false;\n                const index = this.selectedGroups.indexOf(parent);\n                this.selectedGroups.splice(index, 1);\n            }\n            this.deselectParentRecursive(parent);\n        }\n    }\n\n    private calculateContextMenuTarget() {\n        const containerRect = this.expressionsContainer.nativeElement.getBoundingClientRect();\n        const chips = this.chips.filter(c => this.selectedExpressions.indexOf(c.data) !== -1);\n        let minTop = chips.reduce((t, c) =>\n            Math.min(t, c.elementRef.nativeElement.getBoundingClientRect().top), Number.MAX_VALUE);\n        minTop = Math.max(containerRect.top, minTop);\n        minTop = Math.min(containerRect.bottom, minTop);\n        let maxRight = chips.reduce((r, c) =>\n            Math.max(r, c.elementRef.nativeElement.getBoundingClientRect().right), 0);\n        maxRight = Math.max(maxRight, containerRect.left);\n        maxRight = Math.min(maxRight, containerRect.right);\n        this._overlaySettings.positionStrategy.settings.target = new Point(maxRight, minTop);\n    }\n\n    private scrollElementIntoView(target: HTMLElement) {\n        const container = this.expressionsContainer.nativeElement;\n        const targetOffset = target.offsetTop - container.offsetTop;\n        const delta = 10;\n\n        if (container.scrollTop + delta > targetOffset) {\n            container.scrollTop = targetOffset - delta;\n        } else if (container.scrollTop + container.clientHeight < targetOffset + target.offsetHeight + delta) {\n            container.scrollTop = targetOffset + target.offsetHeight + delta - container.clientHeight;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ungroup() {\n        const selectedGroup = this.contextualGroup;\n        const parent = selectedGroup.parent;\n        if (parent) {\n            const index = parent.children.indexOf(selectedGroup);\n            parent.children.splice(index, 1, ...selectedGroup.children);\n\n            for (const expr of selectedGroup.children) {\n                expr.parent = parent;\n            }\n        }\n\n        this.clearSelection();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public deleteGroup() {\n        const selectedGroup = this.contextualGroup;\n        const parent = selectedGroup.parent;\n        if (parent) {\n            const index = parent.children.indexOf(selectedGroup);\n            parent.children.splice(index, 1);\n        } else {\n            this.rootGroup = null;\n        }\n\n        this.clearSelection();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public selectFilteringLogic(event: IButtonGroupEventArgs) {\n        this.contextualGroup.operator = event.index as FilteringLogic;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public getConditionFriendlyName(name: string): string {\n        return this.grid.resourceStrings[`igx_grid_filter_${name}`] || name;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public isDate(value: any) {\n        return value instanceof Date;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onExpressionsScrolled() {\n        if (!this.contextMenuToggle.collapsed) {\n            this.calculateContextMenuTarget();\n            this.contextMenuToggle.reposition();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public invokeClick(eventArgs: KeyboardEvent) {\n        if (eventArgs.key === KEYS.ENTER || eventArgs.key === KEYS.SPACE || eventArgs.key === KEYS.SPACE_IE) {\n            eventArgs.preventDefault();\n            (eventArgs.currentTarget as HTMLElement).click();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onOutletPointerDown(event) {\n        // This prevents closing the select's dropdown when clicking the scroll\n        event.preventDefault();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public getConditionList(): string[] {\n        return this.selectedColumn ? this.selectedColumn.filters.conditionList() : [];\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public initialize(grid: GridType, overlayService: IgxOverlayService,\n        overlayComponentId: string) {\n        this.inline = false;\n        this.grid = grid;\n        this._overlayService = overlayService;\n        this._overlayComponentId = overlayComponentId;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public setAddButtonFocus() {\n        if (this.addRootAndGroupButton) {\n            this.addRootAndGroupButton.nativeElement.focus();\n        } else if (this.addConditionButton) {\n            this.addConditionButton.nativeElement.focus();\n        }\n    }\n\n    private init() {\n        this.clearSelection();\n        this.cancelOperandAdd();\n        this.cancelOperandEdit();\n        this.rootGroup = this.createExpressionGroupItem(this.grid.advancedFilteringExpressionsTree);\n        this.currentGroup = this.rootGroup;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public context(expression: ExpressionItem, afterExpression?: ExpressionItem) {\n        return {\n            $implicit: expression,\n            afterExpression\n        };\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onClearButtonClick() {\n        this.grid.advancedFilteringExpressionsTree = null;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public closeDialog() {\n        if (this._overlayComponentId) {\n            this._overlayService.hide(this._overlayComponentId);\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public applyChanges() {\n        this.exitOperandEdit();\n        this.grid.advancedFilteringExpressionsTree = this.createExpressionsTreeFromGroupItem(this.rootGroup);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public cancelChanges() {\n        if (!this._overlayComponentId) {\n            this.init();\n        }\n        this.closeDialog();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onApplyButtonClick() {\n        this.applyChanges();\n        this.closeDialog();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onChipSelectionEnd() {\n        const contextualGroup = this.findSingleSelectedGroup();\n        if (contextualGroup || this.selectedExpressions.length > 1) {\n            this.contextualGroup = contextualGroup;\n            this.calculateContextMenuTarget();\n            if (this.contextMenuToggle.collapsed) {\n                this.contextMenuToggle.open(this._overlaySettings);\n            } else {\n                this.contextMenuToggle.reposition();\n            }\n        }\n    }\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n/**\n * @hidden\n * @internal\n */\n@Directive({\n    selector: '[igxRowSelector]'\n})\nexport class IgxRowSelectorDirective {\n    constructor(public templateRef: TemplateRef<any>) { }\n}\n\n/**\n * @hidden\n * @internal\n */\n@Directive({\n    selector: '[igxHeadSelector]'\n})\nexport class IgxHeadSelectorDirective {\n    constructor(public templateRef: TemplateRef<any>) { }\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n\n/**\n * The IgxGridToolbarCustomContentDirective directive is used to mark an 'ng-template' (with\n * the 'igxToolbarCustomContent' selector) defined in the IgxGrid which is used to provide\n * custom content for cener part of the IgxGridToolbar.\n */\n@Directive({\n    selector: '[igxToolbarCustomContent]'\n})\nexport class IgxGridToolbarCustomContentDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n","import {\n    AfterContentInit,\n    Component,\n    ContentChildren,\n    ChangeDetectionStrategy,\n    Input,\n    forwardRef,\n    QueryList,\n    TemplateRef,\n    Output,\n    EventEmitter\n} from '@angular/core';\n\nimport { IgxColumnComponent } from './column.component';\nimport { IgxGridCellComponent } from '../cell.component';\nimport { flatten } from '../../core/utils';\n\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [{ provide: IgxColumnComponent, useExisting: forwardRef(() => IgxColumnGroupComponent) }],\n    selector: 'igx-column-group',\n    template: ``\n})\nexport class IgxColumnGroupComponent extends IgxColumnComponent implements AfterContentInit {\n\n    @ContentChildren(IgxColumnComponent, { read: IgxColumnComponent })\n    children = new QueryList<IgxColumnComponent>();\n\n    /**\n     * Set if the column group is collapsible.\n     * Default value is `false`\n     * ```html\n     *  <igx-column-group [collapsible] = \"true\"></igx-column-group>\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    @Input()\n    public set collapsible(value: boolean) {\n        this._collapsible = value;\n        this.collapsibleChange.emit(this._collapsible);\n        if (this.children && !this.hidden) {\n            if (this._collapsible) {\n                this.setExpandCollapseState();\n            } else {\n                this.children.forEach(child => child.hidden = false);\n            }\n        }\n    }\n    public get collapsible() {\n        return this._collapsible && this.checkCollapsibleState();\n    }\n\n    /**\n     * Set whether the group is expanded or collapsed initially.\n     * Applied only if the collapsible property is set to `true`\n     * Default value is `true`\n     * ```html\n     *  const state = false\n     *  <igx-column-group [(expand)] = \"state\"></igx-column-group>\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    @Input()\n    public set expanded(value: boolean) {\n        this._expanded = value;\n        this.expandedChange.emit(this._expanded);\n        if (!this.collapsible) { return; }\n        if (!this.hidden && this.children) {\n            this.setExpandCollapseState();\n        }\n    }\n    public get expanded() {\n        return this._expanded;\n    }\n\n    /**\n     * Gets the column group `summaries`.\n     * ```typescript\n     * let columnGroupSummaries = this.columnGroup.summaries;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    @Input()\n    public get summaries(): any {\n        return this._summaries;\n    }\n    /**\n     * Sets the column group `summaries`.\n     * ```typescript\n     * this.columnGroup.summaries = IgxNumberSummaryOperand;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    public set summaries(classRef: any) { }\n    /**\n     * Sets/gets whether the column group is `searchable`.\n     * Default value is `true`.\n     * ```typescript\n     * let isSearchable =  this.columnGroup.searchable;\n     * ```\n     * ```html\n     *  <igx-column-group [searchable] = \"false\"></igx-column-group>\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    @Input()\n    public searchable = true;\n    /**\n     * Gets the column group `filters`.\n     * ```typescript\n     * let columnGroupFilters = this.columnGroup.filters;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    @Input()\n    public get filters(): any {\n        return this._filters;\n    }\n    /**\n     * Sets the column group `filters`.\n     * ```typescript\n     * this.columnGroup.filters = IgxStringFilteringOperand;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    public set filters(classRef: any) { }\n\n    /**\n     * Returns a reference to the body template.\n     * ```typescript\n     * let bodyTemplate = this.columnGroup.bodyTemplate;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    get bodyTemplate(): TemplateRef<any> {\n        return this._bodyTemplate;\n    }\n    /**\n     * @hidden\n     */\n    set bodyTemplate(template: TemplateRef<any>) { }\n\n    /**\n     * Allows you to define a custom template for expand/collapse indicator\n     * @memberof IgxColumnGroupComponent\n     */\n    @Input()\n    get collapsibleIndicatorTemplate(): TemplateRef<any> {\n        return this._collapseIndicatorTemplate;\n    }\n    set collapsibleIndicatorTemplate(template: TemplateRef<any>) {\n        this._collapseIndicatorTemplate = template;\n    }\n\n    /**\n     * Returns a reference to the inline editor template.\n     * ```typescript\n     * let inlineEditorTemplate = this.columnGroup.inlineEditorTemplate;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    get inlineEditorTemplate(): TemplateRef<any> {\n        return this._inlineEditorTemplate;\n    }\n    /**\n     * @hidden\n     */\n    set inlineEditorTemplate(template: TemplateRef<any>) { }\n    /**\n     * Gets the column group cells.\n     * ```typescript\n     * let columnCells = this.columnGroup.cells;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    get cells(): IgxGridCellComponent[] {\n        return [];\n    }\n    /**\n     * Gets whether the column group is hidden.\n     * ```typescript\n     * let isHidden = this.columnGroup.hidden;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    @Input()\n    get hidden() {\n        return this.allChildren.every(c => c.hidden);\n    }\n    /**\n     * Sets the column group hidden property.\n     * ```html\n     * <igx-column [hidden] = \"true\"></igx-column>\n     * ```\n     *\n     * Two-way data binding\n     * ```html\n     * <igx-column [(hidden)] = \"model.columns[0].isHidden\"></igx-column>\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    set hidden(value: boolean) {\n        this._hidden = value;\n        this.hiddenChange.emit(this._hidden);\n        if (this._hidden || !this.collapsible) {\n            this.children.forEach(child => child.hidden = this._hidden);\n        } else {\n            this.children.forEach(c =>  {\n                if (c.visibleWhenCollapsed === undefined) {c.hidden = false; return; }\n                c.hidden = this.expanded ? c.visibleWhenCollapsed : !c.visibleWhenCollapsed;\n            });\n        }\n    }\n\n    /**\n     *@hidden\n     */\n    @Output()\n    public hiddenChange = new EventEmitter<boolean>();\n\n    /**\n     *@hidden\n     */\n    ngAfterContentInit() {\n        /*\n            @ContentChildren with descendants still returns the `parent`\n            component in the query list.\n        */\n        if (this.headTemplate && this.headTemplate.length) {\n            this._headerTemplate = this.headTemplate.toArray()[0].template;\n        }\n        if (this.collapseIndicatorTemplate) {\n            this._collapseIndicatorTemplate = this.collapseIndicatorTemplate.template;\n        }\n        // currently only ivy fixes the issue, we have to slice only if the first child is group\n        if (this.children.first === this) {\n            this.children.reset(this.children.toArray().slice(1));\n        }\n        this.children.forEach(child => {\n            child.parent = this;\n        });\n        if (this.collapsible) {\n            this.setExpandCollapseState();\n        }\n    }\n\n    /**\n     * Returns the children columns collection.\n     * ```typescript\n     * let columns =  this.columnGroup.allChildren;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    get allChildren(): IgxColumnComponent[] {\n        return flatten(this.children.toArray());\n    }\n    /**\n     * Returns a boolean indicating if the column is a `ColumnGroup`.\n     * ```typescript\n     * let isColumnGroup =  this.columnGroup.columnGroup\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    get columnGroup() {\n        return true;\n    }\n    /**\n     * Returns a boolean indicating if the column is a `ColumnLayout` for multi-row layout.\n     * ```typescript\n     * let columnGroup =  this.column.columnGroup;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get columnLayout() {\n        return false;\n    }\n    /**\n     * Gets the width of the column group.\n     * ```typescript\n     * let columnGroupWidth = this.columnGroup.width;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    get width() {\n        let isChildrenWidthInPercent = false, width;\n        width = `${this.children.reduce((acc, val) => {\n            if (val.hidden) {\n                return acc;\n            }\n            if (typeof val.width === 'string' && val.width.indexOf('%') !== -1) {\n                isChildrenWidthInPercent = true;\n                return acc + parseInt(val.width, 10);\n            }\n            return acc + parseInt(val.calcWidth, 10);\n        }, 0)}`;\n        return isChildrenWidthInPercent ? width + '%' : width + 'px';\n    }\n\n    set width(val) { }\n\n    // constructor(public gridAPI: GridBaseAPIService<IgxGridBaseDirective & IGridDataBindable>, public cdr: ChangeDetectorRef) {\n    //     // D.P. constructor duplication due to es6 compilation, might be obsolete in the future\n    //     super(gridAPI, cdr);\n    // }\n}\n","import { Directive, Input, OnDestroy, NgModule, TemplateRef } from '@angular/core';\nimport { IgxDragDirective } from '../directives/drag-drop/drag-drop.directive';\nimport { KEYS } from '../core/utils';\nimport { fromEvent, Subscription } from 'rxjs';\nimport { IgxRowDirective, IgxGridBaseDirective } from './grid';\nimport { IRowDragStartEventArgs, IRowDragEndEventArgs } from './common/events';\nimport { GridType } from './common/grid.interface';\nimport { IgxHierarchicalRowComponent } from './hierarchical-grid/hierarchical-row.component';\n\n\nconst ghostBackgroundClass = 'igx-grid__tr--ghost';\nconst gridCellClass = 'igx-grid__td';\nconst rowSelectedClass = 'igx-grid__tr--selected';\nconst cellSelectedClass = 'igx-grid__td--selected';\nconst cellActiveClass = 'igx-grid__td--active';\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxRowDrag]'\n})\nexport class IgxRowDragDirective extends IgxDragDirective implements OnDestroy {\n    private row: IgxRowDirective<IgxGridBaseDirective & GridType>;\n    private subscription$: Subscription;\n    private _rowDragStarted = false;\n\n    @Input('igxRowDrag')\n    set data(val) {\n        this.row = val;\n    }\n\n    get data() {\n        return this.row;\n    }\n\n    public onPointerDown(event) {\n        event.preventDefault();\n        this._rowDragStarted = false;\n        this._removeOnDestroy = false;\n        super.onPointerDown(event);\n    }\n\n    public onPointerMove(event) {\n        super.onPointerMove(event);\n        if (this._dragStarted && !this._rowDragStarted) {\n            this._rowDragStarted = true;\n            const args: IRowDragStartEventArgs = {\n                dragDirective: this,\n                dragData: this.row,\n                cancel: false,\n                owner: this.row.grid\n            };\n\n            this.row.grid.onRowDragStart.emit(args);\n            if (args.cancel) {\n                this.ghostElement.parentNode.removeChild(this.ghostElement);\n                this.ghostElement = null;\n                this._dragStarted = false;\n                this._clicked = false;\n                return;\n            }\n            this.row.dragging = true;\n            this.row.grid.rowDragging = true;\n            this.row.grid.markForCheck();\n\n            this.subscription$ = fromEvent(this.row.grid.document.defaultView, 'keydown').subscribe((ev: KeyboardEvent) => {\n                if (ev.key === KEYS.ESCAPE || ev.key === KEYS.ESCAPE_IE) {\n                    this._lastDropArea = false;\n                    this.onPointerUp(event);\n                }\n            });\n        }\n    }\n\n    public onPointerUp(event) {\n\n        if (!this._clicked) {\n            return;\n        }\n\n        const args: IRowDragEndEventArgs = {\n            dragDirective: this,\n            dragData: this.row,\n            animation: false,\n            owner: this.row.grid\n        };\n        this.zone.run(() => {\n            this.row.grid.onRowDragEnd.emit(args);\n        });\n\n        const dropArea = this._lastDropArea;\n        super.onPointerUp(event);\n        if (!dropArea && this.ghostElement) {\n            this.ghostElement.addEventListener('transitionend', this.transitionEndEvent, false);\n        }   else {\n            this.endDragging();\n        }\n    }\n\n    protected createGhost(pageX, pageY) {\n        this.row.grid.endEdit(true);\n        this.row.grid.markForCheck();\n        this.ghostContext = {\n            $implicit: this.row.rowData,\n            data: this.row.rowData,\n            grid: this.row.grid\n        };\n        super.createGhost(pageX, pageY, this.row.nativeElement);\n\n        // check if there is an expander icon and create the ghost at the corresponding position\n        if (this.isHierarchicalGrid) {\n            const row = this.row as IgxHierarchicalRowComponent;\n            if (row.expander) {\n                const expanderWidth = row.expander.nativeElement.getBoundingClientRect().width;\n                this._ghostHostX += expanderWidth;\n            }\n        }\n\n        const ghost = this.ghostElement;\n\n        const gridRect = this.row.grid.nativeElement.getBoundingClientRect();\n        const rowRect = this.row.nativeElement.getBoundingClientRect();\n        ghost.style.overflow = 'hidden';\n        ghost.style.width = gridRect.width + 'px';\n        ghost.style.height = rowRect.height + 'px';\n\n        this.renderer.addClass(ghost, ghostBackgroundClass);\n        this.renderer.removeClass(ghost, rowSelectedClass);\n\n        const ghostCells = ghost.getElementsByClassName(gridCellClass);\n        for (let index = 0; index < ghostCells.length; index++) {\n            this.renderer.removeClass(ghostCells[index], cellSelectedClass);\n            this.renderer.removeClass(ghostCells[index], cellActiveClass);\n        }\n    }\n\n    private _unsubscribe() {\n        if (this.subscription$ && !this.subscription$.closed) {\n            this.subscription$.unsubscribe();\n        }\n    }\n\n    private endDragging() {\n        this.onTransitionEnd(null);\n        this.row.dragging = false;\n        this.row.grid.rowDragging = false;\n        this.row.grid.markForCheck();\n        this._unsubscribe();\n    }\n\n    private transitionEndEvent = (evt?) => {\n        if (this.ghostElement) {\n            this.ghostElement.removeEventListener('transitionend', this.transitionEndEvent, false);\n        }\n        this.endDragging();\n    }\n\n    private get isHierarchicalGrid() {\n        return this.row.grid.nativeElement.tagName.toLowerCase() === 'igx-hierarchical-grid';\n    }\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxDragIndicatorIcon]'\n})\n\nexport class IgxDragIndicatorIconDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxRowDragGhost]'\n})\n\nexport class IgxRowDragGhostDirective  {\n    constructor(public templateRef: TemplateRef<any>) { }\n}\n\n@NgModule({\n    declarations: [IgxRowDragDirective, IgxDragIndicatorIconDirective, IgxRowDragGhostDirective],\n    entryComponents: [],\n    exports: [IgxRowDragDirective, IgxDragIndicatorIconDirective, IgxRowDragGhostDirective],\n    imports: []\n})\n\nexport class IgxRowDragModule {\n}\n","import { DOCUMENT } from '@angular/common';\nimport {\n    AfterContentInit,\n    AfterViewInit,\n    ChangeDetectorRef,\n    ComponentFactoryResolver,\n    ContentChildren,\n    ContentChild,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    Inject,\n    Input,\n    IterableChangeRecord,\n    IterableDiffers,\n    NgZone,\n    OnDestroy,\n    OnInit,\n    Output,\n    QueryList,\n    TemplateRef,\n    ViewChild,\n    ViewChildren,\n    ViewContainerRef,\n    InjectionToken,\n    Optional,\n    DoCheck,\n    Directive\n} from '@angular/core';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport { Subject, combineLatest, pipe } from 'rxjs';\nimport { takeUntil, first, filter, throttleTime, map } from 'rxjs/operators';\nimport { cloneArray, isEdge, isNavigationKey, flatten, mergeObjects, isIE } from '../core/utils';\nimport { DataType } from '../data-operations/data-util';\nimport { FilteringLogic, IFilteringExpression } from '../data-operations/filtering-expression.interface';\nimport { IGroupByRecord } from '../data-operations/groupby-record.interface';\nimport { ISortingExpression } from '../data-operations/sorting-expression.interface';\nimport { IForOfState, IgxGridForOfDirective } from '../directives/for-of/for_of.directive';\nimport { IgxTextHighlightDirective } from '../directives/text-highlight/text-highlight.directive';\nimport {\n    AbsoluteScrollStrategy,\n    HorizontalAlignment,\n    VerticalAlignment,\n    IgxOverlayService,\n    OverlaySettings,\n    PositionSettings,\n    ConnectedPositioningStrategy,\n    ContainerPositionStrategy\n} from '../services/index';\nimport { GridBaseAPIService } from './api.service';\nimport { IgxGridCellComponent } from './cell.component';\nimport { IColumnVisibilityChangedEventArgs } from './hiding/column-hiding-item.directive';\nimport { ISummaryExpression } from './summaries/grid-summary';\nimport { RowEditPositionStrategy } from './grid.common';\nimport { IgxGridToolbarComponent } from './toolbar/grid-toolbar.component';\nimport { IgxRowDirective } from './row.directive';\nimport { IgxGridHeaderComponent } from './headers/grid-header.component';\nimport { IgxOverlayOutletDirective, IgxToggleDirective } from '../directives/toggle/toggle.directive';\nimport {\n    FilteringExpressionsTree, IFilteringExpressionsTree, FilteringExpressionsTreeType\n} from '../data-operations/filtering-expressions-tree';\nimport { IFilteringOperation } from '../data-operations/filtering-condition';\nimport { Transaction, TransactionType, TransactionService, State } from '../services/index';\nimport {\n    IgxRowEditTemplateDirective,\n    IgxRowEditTabStopDirective,\n    IgxRowEditTextDirective,\n    IgxRowEditActionsDirective\n} from './grid.rowEdit.directive';\nimport { IgxGridNavigationService } from './grid-navigation.service';\nimport { IDisplayDensityOptions, DisplayDensityToken, DisplayDensityBase, DisplayDensity } from '../core/displayDensity';\nimport { IgxGridRowComponent } from './grid';\nimport { IgxFilteringService } from './filtering/grid-filtering.service';\nimport { IgxGridFilteringCellComponent } from './filtering/base/grid-filtering-cell.component';\nimport { WatchChanges } from './watch-changes';\nimport { IgxGridHeaderGroupComponent } from './headers/grid-header-group.component';\nimport { IGridResourceStrings } from '../core/i18n/grid-resources';\nimport { CurrentResourceStrings } from '../core/i18n/resources';\nimport { IgxGridSummaryService } from './summaries/grid-summary.service';\nimport { IgxSummaryRowComponent } from './summaries/summary-row.component';\nimport {\n    IgxGridSelectionService,\n    GridSelectionRange,\n    IgxGridCRUDService,\n    IgxRow,\n    IgxCell,\n    isChromium\n} from './selection/selection.service';\nimport { DragScrollDirection } from './selection/drag-select.directive';\nimport { ICachedViewLoadedEventArgs, IgxTemplateOutletDirective } from '../directives/template-outlet/template_outlet.directive';\nimport { IgxExcelStyleLoadingValuesTemplateDirective } from './filtering/excel-style/excel-style-search.component';\nimport {\n    IgxExcelStyleSortingTemplateDirective,\n    IgxExcelStylePinningTemplateDirective,\n    IgxExcelStyleHidingTemplateDirective,\n    IgxExcelStyleMovingTemplateDirective\n} from './filtering/excel-style/grid.excel-style-filtering.component';\nimport { IgxGridColumnResizerComponent } from './resizing/resizer.component';\nimport { IgxGridFilteringRowComponent } from './filtering/base/grid-filtering-row.component';\nimport { CharSeparatedValueData } from '../services/csv/char-separated-value-data';\nimport { IgxColumnResizingService } from './resizing/resizing.service';\nimport { DeprecateProperty } from '../core/deprecateDecorators';\nimport { IFilteringStrategy } from '../data-operations/filtering-strategy';\nimport { IgxRowExpandedIndicatorDirective, IgxRowCollapsedIndicatorDirective,\n     IgxHeaderExpandIndicatorDirective, IgxHeaderCollapseIndicatorDirective } from './grid/grid.directives';\nimport { GridKeydownTargetType, GridSelectionMode, GridSummaryPosition, GridSummaryCalculationMode, FilterMode } from './common/enums';\nimport {\n    IGridCellEventArgs,\n    IRowSelectionEventArgs,\n    IPinColumnEventArgs,\n    IGridEditEventArgs,\n    IPageEventArgs,\n    IRowDataEventArgs,\n    IColumnResizeEventArgs,\n    IColumnMovingStartEventArgs,\n    IColumnMovingEventArgs,\n    IColumnMovingEndEventArgs,\n    IGridKeydownEventArgs,\n    IRowDragStartEventArgs,\n    IRowDragEndEventArgs,\n    IGridClipboardEvent,\n    IGridToolbarExportEventArgs,\n    ISearchInfo,\n    ICellPosition,\n    IRowToggleEventArgs\n} from './common/events';\nimport { IgxAdvancedFilteringDialogComponent } from './filtering/advanced-filtering/advanced-filtering-dialog.component';\nimport { GridType } from './common/grid.interface';\nimport { IgxDecimalPipeComponent, IgxDatePipeComponent } from './common/pipes';\nimport { DropPosition } from './moving/moving.service';\nimport { IgxHeadSelectorDirective, IgxRowSelectorDirective } from './selection/row-selectors';\nimport { IgxGridToolbarCustomContentDirective } from './toolbar/toolbar.directive';\nimport { IgxColumnComponent } from './columns/column.component';\nimport { IgxColumnGroupComponent } from './columns/column-group.component';\nimport { IGridSortingStrategy } from '../data-operations/sorting-strategy';\nimport { IgxRowDragGhostDirective, IgxDragIndicatorIconDirective  } from './row-drag.directive';\n\nconst MINIMUM_COLUMN_WIDTH = 136;\nconst FILTER_ROW_HEIGHT = 50;\n\n// By default row editing overlay outlet is inside grid body so that overlay is hidden below grid header when scrolling.\n// In cases when grid has 1-2 rows there isn't enough space in grid body and row editing overlay should be shown above header.\n// Default row editing overlay height is higher then row height that is why the case is valid also for row with 2 rows.\n// More accurate calculation is not possible, cause row editing overlay is still not shown and we don't know its height,\n// but in the same time we need to set row editing overlay outlet before opening the overlay itself.\nconst MIN_ROW_EDITING_COUNT_THRESHOLD = 2;\n\nexport const IgxGridTransaction = new InjectionToken<string>('IgxGridTransaction');\n\n\n\n@Directive({\n    selector: '[igxGridBaseComponent]'\n})\nexport class IgxGridBaseDirective extends DisplayDensityBase implements\n    OnInit, DoCheck, OnDestroy, AfterContentInit, AfterViewInit {\n    private _scrollWidth: number;\n    private _customDragIndicatorIconTemplate: TemplateRef<any>;\n    protected _init = true;\n    private _cdrRequests = false;\n    protected _cdrRequestRepaint = false;\n\n    public get scrollWidth() {\n        return this._scrollWidth;\n    }\n\n    private _resourceStrings = CurrentResourceStrings.GridResStrings;\n    private _emptyGridMessage = null;\n    private _emptyFilteredGridMessage = null;\n    private _isLoading = false;\n    private _locale = null;\n    public _destroyed = false;\n    private overlayIDs = [];\n    private _filteringStrategy: IFilteringStrategy;\n    private _sortingStrategy: IGridSortingStrategy;\n\n    private _hostWidth;\n    private _advancedFilteringOverlayId: string;\n    private _advancedFilteringPositionSettings: PositionSettings = {\n        verticalDirection: VerticalAlignment.Middle,\n        horizontalDirection: HorizontalAlignment.Center,\n        horizontalStartPoint: HorizontalAlignment.Center,\n        verticalStartPoint: VerticalAlignment.Middle\n    };\n\n    private _advancedFilteringOverlaySettings: OverlaySettings = {\n        closeOnOutsideClick: false,\n        modal: false,\n        positionStrategy: new ConnectedPositioningStrategy(this._advancedFilteringPositionSettings),\n    };\n\n\n    /**\n    * @hidden @internal\n    */\n    @ViewChild('defaultExpandedTemplate', { read: TemplateRef, static: true })\n    protected defaultExpandedTemplate: TemplateRef<any>;\n\n    /**\n    * @hidden @internal\n    */\n    @ViewChild('defaultCollapsedTemplate', { read: TemplateRef, static: true })\n    protected defaultCollapsedTemplate: TemplateRef<any>;\n\n\n    /**\n     * Gets/Sets the resource strings.\n     * @remarks\n     * By default it uses EN resources.\n    */\n    @Input()\n    set resourceStrings(value: IGridResourceStrings) {\n        this._resourceStrings = Object.assign({}, this._resourceStrings, value);\n    }\n\n    get resourceStrings(): IGridResourceStrings {\n        return this._resourceStrings;\n    }\n\n    /**\n     * Gets/Sets whether to autogenerate the columns.\n     * @remarks\n     * The default value is false. When set to true, it will override all columns declared through code or in markup.\n     * @example\n     * ```html\n     * <igx-grid [data]=\"Data\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public autoGenerate = false;\n\n    /**\n    * @hidden @internal\n    */\n    public id: string;\n\n    /**\n     * Gets/Sets a custom template when empty.\n     * @example\n     * ```html\n     * <igx-grid [id]=\"'igx-grid-1'\" [data]=\"Data\" [emptyGridTemplate]=\"myTemplate\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public emptyGridTemplate: TemplateRef<any>;\n\n    /**\n     * Gets/Sets a custom template when loading.\n     * @example\n     * ```html\n     * <igx-grid [id]=\"'igx-grid-1'\" [data]=\"Data\" [loadingGridTemplate]=\"myTemplate\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public loadingGridTemplate: TemplateRef<any>;\n\n\n    /**\n     * Gets/Sets the filtering logic of the `IgxGridComponent`.\n     * @remarks\n     * The default is AND.\n     * @example\n     * ```html\n     * <igx-grid [data]=\"Data\" [autoGenerate]=\"true\" [filteringLogic]=\"filtering\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    public get filteringLogic() {\n        return this._filteringExpressionsTree.operator;\n    }\n\n    public set filteringLogic(value: FilteringLogic) {\n        this._filteringExpressionsTree.operator = value;\n    }\n\n    /**\n     * Gets/Sets the filtering state.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [autoGenerate]=\"true\" [(filteringExpressionsTree)]=\"model.filteringExpressions\"></igx-grid>\n     * ```\n     * @remarks\n     * Supports two-way binding.\n     */\n    @WatchChanges()\n    @Input()\n    get filteringExpressionsTree() {\n        return this._filteringExpressionsTree;\n    }\n\n    set filteringExpressionsTree(value) {\n        if (value && value instanceof FilteringExpressionsTree) {\n            const val = (value as FilteringExpressionsTree);\n            for (let index = 0; index < val.filteringOperands.length; index++) {\n                if (!(val.filteringOperands[index] instanceof FilteringExpressionsTree)) {\n                    const newExpressionsTree = new FilteringExpressionsTree(FilteringLogic.And, val.filteringOperands[index].fieldName);\n                    newExpressionsTree.filteringOperands.push(val.filteringOperands[index] as IFilteringExpression);\n                    val.filteringOperands[index] = newExpressionsTree;\n                }\n            }\n\n            value.type = FilteringExpressionsTreeType.Regular;\n            this._filteringExpressionsTree = value;\n            this._filteringPipeTrigger++;\n            this.filteringExpressionsTreeChange.emit(this._filteringExpressionsTree);\n\n            if (this.filteringService.isFilteringExpressionsTreeEmpty(this._filteringExpressionsTree) &&\n                !this.advancedFilteringExpressionsTree) {\n                this.filteredData = null;\n            }\n\n            this.filteringService.refreshExpressions();\n            this.selectionService.clearHeaderCBState();\n            this.summaryService.clearSummaryCache();\n            this.notifyChanges();\n        }\n    }\n\n    /**\n     * Emitted after filtering is performed.\n     * @remarks\n     * Returns the filtering expressions tree of the column for which filtering was performed.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [height]=\"'305px'\" [autoGenerate]=\"true\"\n     *              (filteringExpressionsTreeChange)=\"filteringExprTreeChange($event)\"></igx-grid>\n     * ```\n    */\n    @Output()\n    public filteringExpressionsTreeChange = new EventEmitter<IFilteringExpressionsTree>();\n\n    /**\n     * Emitted after advanced filtering is performed.\n     * @remarks\n     * Returns the advanced filtering expressions tree.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [height]=\"'305px'\" [autoGenerate]=\"true\"\n     *           (advancedFilteringExpressionsTreeChange)=\"advancedFilteringExprTreeChange($event)\"></igx-grid>\n     * ```\n    */\n    @Output()\n    public advancedFilteringExpressionsTreeChange = new EventEmitter<IFilteringExpressionsTree>();\n\n    /**\n     * Gets/Sets the advanced filtering state.\n     * @example\n     * ```typescript\n     * let advancedFilteringExpressionsTree = this.grid.advancedFilteringExpressionsTree;\n     * this.grid.advancedFilteringExpressionsTree = logic;\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    get advancedFilteringExpressionsTree() {\n        return this._advancedFilteringExpressionsTree;\n    }\n\n    set advancedFilteringExpressionsTree(value) {\n        if (value && value instanceof FilteringExpressionsTree) {\n            value.type = FilteringExpressionsTreeType.Advanced;\n            this._advancedFilteringExpressionsTree = value;\n            this._filteringPipeTrigger++;\n        } else {\n            this._advancedFilteringExpressionsTree = null;\n        }\n        this.advancedFilteringExpressionsTreeChange.emit(this._advancedFilteringExpressionsTree);\n\n        if (this.filteringService.isFilteringExpressionsTreeEmpty(this._advancedFilteringExpressionsTree) &&\n            !this.advancedFilteringExpressionsTree) {\n            this.filteredData = null;\n        }\n\n        this.selectionService.clearHeaderCBState();\n        this.summaryService.clearSummaryCache();\n        this.notifyChanges();\n\n        // Wait for the change detection to update filtered data through the pipes and then emit the event.\n        requestAnimationFrame(() => this.onFilteringDone.emit(this._advancedFilteringExpressionsTree));\n    }\n\n    /**\n     * Gets/Sets the locale.\n     * @remarks\n     * If not set, returns browser's language.\n     */\n    @Input()\n    get locale(): string {\n        if (this._locale) {\n            return this._locale;\n        } else {\n            return 'en';\n        }\n    }\n\n    set locale(value) {\n        this._locale = value;\n    }\n\n    /**\n     * Gets/Sets whether the paging feature is enabled.\n     * @remarks\n     * The default state is disabled (false).\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [autoGenerate]=\"true\" [paging]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get paging(): boolean {\n        return this._paging;\n    }\n\n    set paging(value: boolean) {\n        this._paging = value;\n        this._pipeTrigger++;\n        this.notifyChanges(true);\n    }\n\n    /**\n     * Gets/Sets the current page index.\n    *@example\n    * ```html\n     * <igx-grid #grid [data]=\"Data\" [paging]=\"true\" [(page)]=\"model.page\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     * @remarks\n     * Supports two-way binding.\n     */\n    @Input()\n    get page(): number {\n        return this._page;\n    }\n\n    set page(val: number) {\n        if (val === this._page || val < 0 || val > this.totalPages - 1) {\n            return;\n        }\n        this.selectionService.clear(true);\n        this.onPagingDone.emit({ previous: this._page, current: val });\n        this._page = val;\n        this.pageChange.emit(this._page);\n        this.navigateTo(0);\n        this.notifyChanges();\n    }\n\n    /**\n     *@hidden @internal\n     */\n    @Output()\n    public pageChange = new EventEmitter<number>();\n\n    /**\n     * Gets/Sets the number of visible items per page.\n     * @remarks\n     * The default is 15.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [paging]=\"true\" [(perPage)]=\"model.perPage\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get perPage(): number {\n        return this._perPage;\n    }\n\n    set perPage(val: number) {\n        if (val < 0) {\n            return;\n        }\n        this.selectionService.clear(true);\n        this._perPage = val;\n        this.perPageChange.emit(this._perPage);\n        this.page = 0;\n        this.endEdit(true);\n        this.notifyChanges();\n    }\n\n    /**\n     *@hidden @internal\n     */\n    @Output()\n    public perPageChange = new EventEmitter<number>();\n\n    /**\n     * Gets/Sets a custom `ng-template` for the pagination UI of the grid.\n     * @example\n     * ```html\n     * <igx-grid #grid [paging]=\"true\" [myTemplate]=\"myTemplate\" [height]=\"'305px'\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public paginationTemplate: TemplateRef<any>;\n\n    /**\n     * Gets/Sets whether the column hiding UI is enabled.\n     * @remarks\n     * By default it is disabled (false). In order for the UI to work, you need to enable the toolbar as shown in the example below.\n     * @example\n     * ```html\n     * <igx-grid [data]=\"Data\" [autoGenerate]=\"true\" [showToolbar]=\"true\" [columnHiding]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get columnHiding() {\n        return this._columnHiding;\n    }\n\n    set columnHiding(value) {\n        if (this._columnHiding !== value) {\n            this._columnHiding = value;\n            if (!this._init) {\n                this.notifyChanges(true);\n            }\n        }\n    }\n\n    @DeprecateProperty('rowSelectable property is deprecated. Use rowSelection property instead.')\n    @WatchChanges()\n    @Input()\n    get rowSelectable(): boolean {\n        return this.isRowSelectable;\n    }\n\n    set rowSelectable(val: boolean) {\n        this.rowSelection = val ? GridSelectionMode.multiple : GridSelectionMode.none;\n    }\n\n    /**\n     * Gets/Sets if the row selectors are hidden.\n     * @remarks\n     *  By default row selectors are shown\n    */\n    @WatchChanges()\n    @Input()\n    get hideRowSelectors() {\n        return this._hideRowSelectors;\n    }\n\n    set hideRowSelectors(value: boolean) {\n        this._hideRowSelectors = value;\n        this.notifyChanges(true);\n    }\n\n    /**\n     * Gets/Sets whether rows can be moved.\n     * @example\n     * ```html\n     * <igx-grid #grid [rowDraggable]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get rowDraggable(): boolean {\n        return this._rowDrag && this.hasVisibleColumns;\n    }\n\n\n    set rowDraggable(val: boolean) {\n        this._rowDrag = val;\n        this.notifyChanges(true);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public rowDragging = false;\n\n\n    /**\n    * Gets/Sets whether the rows are editable.\n    * @remarks\n    * By default it is set to false.\n    * @example\n    * ```html\n    * <igx-grid #grid [showToolbar]=\"true\" [rowEditable]=\"true\" [primaryKey]=\"'ProductID'\" [columnHiding]=\"true\"></igx-grid>\n    * ```\n    */\n    @WatchChanges()\n    @Input()\n    get rowEditable(): boolean {\n        return this._rowEditable;\n    }\n\n    set rowEditable(val: boolean) {\n        if (!this._init) {\n            this.refreshGridState();\n        }\n        this._rowEditable = val;\n        this.notifyChanges();\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @Input()\n    public class = '';\n\n    /**\n     * Gets/Sets the height.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [height]=\"'305px'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @HostBinding('style.height')\n    @Input()\n    public get height() {\n        return this._height;\n    }\n\n    public set height(value: string) {\n        if (this._height !== value) {\n            this._height = value;\n            this.nativeElement.style.height = value;\n            this.notifyChanges(true);\n        }\n    }\n\n    /**\n     * @hidden @internal\n    */\n    @HostBinding('style.width')\n    get hostWidth() {\n        return this._width || this._hostWidth;\n    }\n\n    /**\n     * Gets/Sets the width of the grid.\n     * @example\n     * ```typescript\n     * let gridWidth = this.grid.width;\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    get width() {\n        return this._width;\n    }\n\n    set width(value) {\n        if (this._width !== value) {\n            this._width = value;\n            this.nativeElement.style.width = value;\n            this.notifyChanges(true);\n        }\n    }\n\n    /**\n     * Gets the width of the header.\n     * @example\n     * ```html\n     * let gridHeaderWidth = this.grid.headerWidth;\n     * ```\n     */\n    get headerWidth() {\n        return parseInt(this.width, 10) - 17;\n    }\n\n    /**\n     * Gets/Sets the styling classes applied to all even `IgxGridRowComponent`s in the grid.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [evenRowCSS]=\"'igx-grid--my-even-class'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public evenRowCSS = 'igx-grid__tr--even';\n\n    /**\n     * Gets/Sets the styling classes applied to all odd `IgxGridRowComponent`s in the grid.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [evenRowCSS]=\"'igx-grid--my-odd-class'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public oddRowCSS = 'igx-grid__tr--odd';\n\n    /**\n     * Gets/Sets the row height.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [showToolbar]=\"true\" [rowHeight]=\"100\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    public get rowHeight() {\n        return this._rowHeight ? this._rowHeight : this.defaultRowHeight;\n    }\n\n    public set rowHeight(value) {\n        this._rowHeight = parseInt(value, 10);\n    }\n\n    /**\n     * Gets/Sets the default width of the columns.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [showToolbar]=\"true\" [columnWidth]=\"100\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    public get columnWidth(): string {\n        return this._columnWidth;\n    }\n    public set columnWidth(value: string) {\n        this._columnWidth = value;\n        this.columnWidthSetByUser = true;\n        this.notifyChanges(true);\n    }\n\n    /**\n     * Gets/Sets the primary key.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [showToolbar]=\"true\" [primaryKey]=\"'ProductID'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    public primaryKey;\n\n    /**\n     * Get/Sets the message displayed when there are no records.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [emptyGridMessage]=\"'The grid is empty'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    set emptyGridMessage(value: string) {\n        this._emptyGridMessage = value;\n    }\n    get emptyGridMessage(): string {\n        return this._emptyGridMessage || this.resourceStrings.igx_grid_emptyGrid_message;\n    }\n\n    /**\n     * Gets/Sets whether the grid is going to show a loading indicator.\n     *@example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [isLoading]=\"true\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    set isLoading(value: boolean) {\n        if (this._isLoading !== value) {\n            this._isLoading = value;\n            this.evaluateLoadingState();\n        }\n        Promise.resolve().then(() => {\n            // wait for the current detection cycle to end before triggering a new one.\n            this.notifyChanges();\n        });\n    }\n\n    get isLoading(): boolean {\n        return this._isLoading;\n    }\n\n    /**\n     * Gets/Sets whether the columns should be auto-generated once again after the initialization of the grid\n     * @remarks\n     * This will allow to bind the grid to remote data and having auto-generated columns at the same time.\n     * Note that after generating the columns, this property would be disabled to avoid re-creating\n     * columns each time a new data is assigned.\n     * @example\n     * ```typescript\n     *  this.grid.shouldGenerate = true;\n     * ```\n     */\n    public shouldGenerate: boolean;\n\n    /**\n     * Gets/Sets the message displayed when there are no records and the grid is filtered.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [emptyGridMessage]=\"'The grid is empty'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    set emptyFilteredGridMessage(value: string) {\n        this._emptyFilteredGridMessage = value;\n    }\n\n    get emptyFilteredGridMessage(): string {\n        return this._emptyFilteredGridMessage || this.resourceStrings.igx_grid_emptyFilteredGrid_message;\n    }\n\n    /**\n     * Gets/Sets the title to be displayed in the built-in column hiding UI.\n     * @example\n     * ```html\n     * <igx-grid [showToolbar]=\"true\" [columnHiding]=\"true\" columnHidingTitle=\"Column Hiding\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public columnHidingTitle = '';\n\n    /**\n     * Gets/Sets if the built-in column pinning UI should be shown in the toolbar.\n     * @example\n    * ```html\n     * <igx-grid #grid [data]=\"localData\" [columnPinning]=\"'true\" [height]=\"'305px'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    get columnPinning() {\n        return this._columnPinning;\n    }\n    set columnPinning(value) {\n        if (this._columnPinning !== value) {\n            this._columnPinning = value;\n            if (!this._init) {\n                this.notifyChanges(true);\n            }\n        }\n    }\n\n    /**\n     * Gets/Sets the title to be displayed in the UI of the column pinning.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [columnPinning]=\"'true\" [columnPinningTitle]=\"'Column Hiding'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public columnPinningTitle = '';\n\n    /**\n     * Gets/Sets if the filtering is enabled.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [allowFiltering]=\"true\" [height]=\"'305px'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get allowFiltering() {\n        return this._allowFiltering;\n    }\n\n    set allowFiltering(value) {\n        if (this._allowFiltering !== value) {\n            this._allowFiltering = value;\n            this.filteringService.registerSVGIcons();\n\n            if (!this._init) {\n                this.calcGridHeadRow();\n            }\n\n            this.filteringService.isFilterRowVisible = false;\n            this.filteringService.filteredColumn = null;\n\n            this.notifyChanges(true);\n        }\n    }\n\n    /**\n     * Gets/Sets a value indicating whether the advanced filtering is enabled.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [allowAdvancedFiltering]=\"true\" [showToolbar]=\"true\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get allowAdvancedFiltering() {\n        return this._allowAdvancedFiltering;\n    }\n\n    set allowAdvancedFiltering(value) {\n        if (this._allowAdvancedFiltering !== value) {\n            this._allowAdvancedFiltering = value;\n            this.filteringService.registerSVGIcons();\n\n            if (!this._init) {\n                this.notifyChanges(true);\n            }\n        }\n    }\n\n    /**\n     * Gets/Sets the filter mode.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [filterMode]=\"'quickFilter'\" [height]=\"'305px'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     * @remarks\n     * By default it's set to FilterMode.quickFilter.\n     */\n    @Input()\n    get filterMode() {\n        return this._filterMode;\n    }\n\n    set filterMode(value) {\n        this._filterMode = value;\n\n        if (this.filteringService.isFilterRowVisible) {\n            this.filteringRow.close();\n        }\n        this.notifyChanges(true);\n    }\n\n    /**\n     * Gets/Sets the summary position.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" summaryPosition=\"top\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     * @remarks\n     * By default it is bottom.\n     */\n    @Input()\n    get summaryPosition() {\n        return this._summaryPosition;\n    }\n\n    set summaryPosition(value) {\n        this._summaryPosition = value;\n        this.notifyChanges();\n    }\n\n    /**\n     * Gets/Sets the summary calculation mode.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" summaryCalculationMode=\"rootLevelOnly\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     * @remarks\n     * By default it is rootAndChildLevels which means the summaries are calculated for the root level and each child level.\n     */\n    @Input()\n    get summaryCalculationMode() {\n        return this._summaryCalculationMode;\n    }\n\n    set summaryCalculationMode(value) {\n        this._summaryCalculationMode = value;\n        if (!this._init) {\n            this.endEdit(true);\n            this.summaryService.resetSummaryHeight();\n            this.notifyChanges(true);\n        }\n    }\n\n    /**\n     * Gets/Sets the filtering strategy of the grid.\n     * @example\n     * ```html\n     *  <igx-grid #grid [data]=\"localData\" [filterStrategy]=\"filterStrategy\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get filterStrategy(): IFilteringStrategy {\n        return this._filteringStrategy;\n    }\n\n    set filterStrategy(classRef: IFilteringStrategy) {\n        this._filteringStrategy = classRef;\n    }\n\n    /**\n     * Gets/Sets the sorting strategy of the grid.\n     * @example\n     * ```html\n     *  <igx-grid #grid [data]=\"localData\" [sortStrategy]=\"sortStrategy\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get sortStrategy(): IGridSortingStrategy {\n        return this._sortingStrategy;\n    }\n\n    set sortStrategy(value: IGridSortingStrategy) {\n        this._sortingStrategy = value;\n    }\n\n    /**\n     * Gets/Sets a unique values strategy used by the Excel Style Filtering\n     * @remarks\n     * Provides a callback for loading unique column values on demand.\n     * If this property is provided, the unique values it generates will be used by the Excel Style Filtering.\n     * @example\n     * ```html\n     * <igx-grid [data]=\"localData\" [filterMode]=\"'excelStyleFilter'\" [uniqueColumnValuesStrategy]=\"columnValuesStrategy\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public uniqueColumnValuesStrategy: (column: IgxColumnComponent,\n                                        filteringExpressionsTree: IFilteringExpressionsTree,\n                                        done: (values: any[]) => void) => void;\n\n    /**\n     * Emitted when `IgxGridCellComponent` is clicked.\n     * @remarks\n     * Returns the `IgxGridCellComponent`.\n     * @example\n     * ```html\n     * <igx-grid #grid (onCellClick)=\"onCellClick($event)\" [data]=\"localData\" [height]=\"'305px'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onCellClick = new EventEmitter<IGridCellEventArgs>();\n\n    /**\n     * Emitted when `IgxGridCellComponent` is selected.\n     * @remarks\n     *  Returns the `IgxGridCellComponent`.\n     * @example\n     * ```html\n     * <igx-grid #grid (onSelection)=\"onCellSelect($event)\" [data]=\"localData\" [height]=\"'305px'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onSelection = new EventEmitter<IGridCellEventArgs>();\n\n    /**\n     *  Emitted when `IgxGridRowComponent` is selected.\n     * @example\n     * ```html\n     * <igx-grid #grid (onRowSelectionChange)=\"onCellClickChange($event)\" [data]=\"localData\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onRowSelectionChange = new EventEmitter<IRowSelectionEventArgs>();\n\n    /**\n     * Emitted when `IgxColumnComponent` is pinned.\n     * @remarks\n     * The index that the column is inserted at may be changed through the `insertAtIndex` property.\n     * @example\n     * ```typescript\n     * public columnPinning(event) {\n     *     if (event.column.field === \"Name\") {\n     *       event.insertAtIndex = 0;\n     *     }\n     * }\n     * ```\n     */\n    @Output()\n    public onColumnPinning = new EventEmitter<IPinColumnEventArgs>();\n\n    /**\n     * Emitted when editing and **not** submitting the value.\n     * @remarks\n     * (e.g. `Esc` key was pressed)\n     * This event is cancelable.\n     *@example\n     * ```html\n     * <igx-grid #grid3 (onCellEditCancel)=\"editCancel($event)\" [data]=\"data\" [primaryKey]=\"'ProductID'\">\n     * </igx-grid>\n     * ```\n     */\n    @Output()\n    public onCellEditCancel = new EventEmitter<IGridEditEventArgs>();\n\n    /**\n     * Emitted when cell enters edit mode.\n     * @remarks\n     * This event is cancelable.\n     *@example\n     * ```html\n     * <igx-grid #grid3 (onCellEditEnter)=\"editStart($event)\" [data]=\"data\" [primaryKey]=\"'ProductID'\">\n     * </igx-grid>\n     * ```\n     */\n    @Output()\n    public onCellEditEnter = new EventEmitter<IGridEditEventArgs>();\n\n    /**\n     * Emitted when cell has been edited.\n     * @remarks\n     * Event is fired after editing is completed, when the cell is exiting edit mode.\n     * This event is cancelable.\n     * @example\n     * ```html\n     * <igx-grid #grid3 (onCellEdit)=\"editDone($event)\" [data]=\"data\" [primaryKey]=\"'ProductID'\">\n     * </igx-grid>\n     * ```\n     */\n    @Output()\n    public onCellEdit = new EventEmitter<IGridEditEventArgs>();\n\n    /**\n     * Emitted when a row enters edit mode.\n     * @remarks\n     * Emitted when [rowEditable]=\"true\".\n     * This event is cancelable.\n     *@example\n     * ```html\n     * <igx-grid #grid3 (onRowEditEnter)=\"editStart($event)\" [primaryKey]=\"'ProductID'\" [rowEditable]=\"true\">\n     * </igx-grid>\n     * ```\n     */\n    @Output()\n    public onRowEditEnter = new EventEmitter<IGridEditEventArgs>();\n\n    /**\n     * Emitted when exiting edit mode for a row.\n     * @remarks\n     * Emitted when [rowEditable]=\"true\" & `endEdit(true)` is called.\n     * Emitted when changing rows during edit mode, selecting an un-editable cell in the edited row,\n     * performing paging operation, column resizing, pinning, moving or hitting  `Done`\n     * button inside of the rowEditingOverlay, or hitting the `Enter` key while editing a cell.\n     * This event is cancelable.\n     *@example\n     * ```html\n     * <igx-grid #grid3 (onRowEdit)=\"editDone($event)\" [data]=\"data\" [primaryKey]=\"'ProductID'\" [rowEditable]=\"true\">\n     * </igx-grid>\n     * ```\n     */\n    @Output()\n    public onRowEdit = new EventEmitter<IGridEditEventArgs>();\n\n    /**\n     * Emitted when row editing is canceled.\n     * @remarks\n     * Emits when [rowEditable]=\"true\" & `endEdit(false)` is called.\n     * Emitted when changing hitting `Esc` key during cell editing and when click on the `Cancel` button\n     * in the row editing overlay.\n     * This event is cancelable.\n     *@example\n     * ```html\n     * <igx-grid #grid3 (onRowEditCancel)=\"editCancel($event)\" [data]=\"data\" [primaryKey]=\"'ProductID'\" [rowEditable]=\"true\">\n     * </igx-grid>\n     * ```\n     */\n    @Output()\n    public onRowEditCancel = new EventEmitter<IGridEditEventArgs>();\n\n    /**\n     * Emitted when a column is initialized.\n     * @remarks\n     * Returns the column object.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [onColumnInit]=\"initColumns($event)\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onColumnInit = new EventEmitter<IgxColumnComponent>();\n\n    /**\n     * Emitted when sorting is performed through the UI.\n     * @remarks\n     * Returns the sorting expression.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [autoGenerate]=\"true\" (onSortingDone)=\"sortingDone($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onSortingDone = new EventEmitter<ISortingExpression | Array<ISortingExpression>>();\n\n    /**\n     * Emitted when filtering is performed through the UI.\n     * @remarks\n     * Returns the filtering expressions tree of the column for which filtering was performed.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [height]=\"'305px'\" [autoGenerate]=\"true\" (onFilteringDone)=\"filteringDone($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onFilteringDone = new EventEmitter<IFilteringExpressionsTree>();\n\n    /**\n     * Emitted when paging is performed.\n     * @remarks\n     * Returns an object consisting of the previous and next pages.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [height]=\"'305px'\" [autoGenerate]=\"true\" (onPagingDone)=\"pagingDone($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onPagingDone = new EventEmitter<IPageEventArgs>();\n\n    /**\n     * Emitted when a row added through the API.\n     * @remarks\n     * Returns the data for the new `IgxGridRowComponent` object.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" (onRowAdded)=\"rowAdded($event)\" [height]=\"'305px'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onRowAdded = new EventEmitter<IRowDataEventArgs>();\n\n    /**\n     * Emitted when a row is deleted through API.\n     * @remarks\n     * Returns an `IRowDataEventArgs` object.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" (onRowDeleted)=\"rowDeleted($event)\" [height]=\"'305px'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onRowDeleted = new EventEmitter<IRowDataEventArgs>();\n\n    /**\n     * Emitted when a new chunk of data is loaded from virtualization.\n     * @example\n     * ```typescript\n     *  <igx-grid #grid [data]=\"localData\" [autoGenerate]=\"true\" (onDataPreLoad)='handleDataPreloadEvent()'></igx-grid>\n     * ```\n     */\n    @Output()\n    public onDataPreLoad = new EventEmitter<IForOfState>();\n\n    /**\n     * Emitted when column is resized.\n     * @remarks\n     * Returns the `IgxColumnComponent` object's old and new width.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" (onColumnResized)=\"resizing($event)\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onColumnResized = new EventEmitter<IColumnResizeEventArgs>();\n\n    /**\n     * Emitted when a cell is right clicked.\n     * @remarks\n     * Returns the `IgxGridCellComponent` object.\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" (onContextMenu)=\"contextMenu($event)\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onContextMenu = new EventEmitter<IGridCellEventArgs>();\n\n    /**\n     * Emitted when a cell is double clicked.\n     * @remarks\n     * Returns the `IgxGridCellComponent` object.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" (onDoubleClick)=\"dblClick($event)\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onDoubleClick = new EventEmitter<IGridCellEventArgs>();\n\n    /**\n     * Emitted when column visibility is changed.\n     * @remarks\n     * Args: { column: any, newValue: boolean }\n     * @example\n     * ```html\n     * <igx-grid [columnHiding]=\"true\" [showToolbar]=\"true\" (onColumnVisibilityChanged)=\"visibilityChanged($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onColumnVisibilityChanged = new EventEmitter<IColumnVisibilityChangedEventArgs>();\n\n    /**\n     * Emitted when column moving starts.\n     * @remarks\n     * Returns the moved `IgxColumnComponent` object.\n     * @example\n     * ```html\n     * <igx-grid [columnHiding]=\"true\" [showToolbar]=\"true\" (onColumnMovingStart)=\"movingStart($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onColumnMovingStart = new EventEmitter<IColumnMovingStartEventArgs>();\n\n    /**\n     * Emitted during the column moving operation.\n     * @remarks\n     * Returns the source and target `IgxColumnComponent` objects. This event is cancelable.\n     * @example\n     * ```html\n     * <igx-grid [columnHiding]=\"true\" [showToolbar]=\"true\" (onColumnMoving)=\"moving($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onColumnMoving = new EventEmitter<IColumnMovingEventArgs>();\n\n    /**\n     * Emitted when column moving ends.\n     * @remarks\n     * Returns the source and target `IgxColumnComponent` objects.\n     * @example\n     * ```html\n     * <igx-grid [columnHiding]=\"true\" [showToolbar]=\"true\" (onColumnMovingEnd)=\"movingEnds($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onColumnMovingEnd = new EventEmitter<IColumnMovingEndEventArgs>();\n\n    /**\n     * Emitted when keydown is triggered over element inside grid's body.\n     * @remarks\n     * This event is fired only if the key combination is supported in the grid.\n     * Return the target type, target object and the original event. This event is cancelable.\n     * @example\n     * ```html\n     *  <igx-grid (onGridKeydown)=\"customKeydown($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onGridKeydown = new EventEmitter<IGridKeydownEventArgs>();\n\n    /**\n     * Emitted when start dragging a row.\n     * @remarks\n     * Return the dragged row.\n     */\n    @Output()\n    public onRowDragStart = new EventEmitter<IRowDragStartEventArgs>();\n\n    /**\n     * Emitted when dropping a row.\n     * @remarks\n     * Return the dropped row.\n     */\n    @Output()\n    public onRowDragEnd = new EventEmitter<IRowDragEndEventArgs>();\n\n    /**\n     * Emitted when a copy operation is executed.\n     * @remarks\n     * Fired only if copy behavior is enabled through the [`clipboardOptions`]{@link IgxGridBaseDirective#clipboardOptions}.\n     */\n    @Output()\n    onGridCopy = new EventEmitter<IGridClipboardEvent>();\n\n    /**\n     *@hidden @internal\n     */\n    @Output()\n    public expansionStatesChange = new EventEmitter<Map<any, boolean>>();\n\n    /**\n     * Emitted when the expanded state of a row gets changed.\n     * @example\n     * ```html\n     * <igx-grid [data]=\"employeeData\" (onRowToggle)=\"rowToggle($event)\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onRowToggle = new EventEmitter<IRowToggleEventArgs>();\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild(IgxGridColumnResizerComponent)\n    public resizeLine: IgxGridColumnResizerComponent;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('loadingOverlay', { static: true })\n    public loadingOverlay: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('igxLoadingOverlayOutlet', { read: IgxOverlayOutletDirective, static: true })\n    public loadingOutlet: IgxOverlayOutletDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @ContentChildren(IgxColumnComponent, { read: IgxColumnComponent, descendants: true })\n    public columnList: QueryList<IgxColumnComponent> = new QueryList<IgxColumnComponent>();\n\n    /**\n     *@hidden @internal\n     */\n    @ContentChild(IgxExcelStyleSortingTemplateDirective, { read: IgxExcelStyleSortingTemplateDirective })\n    public excelStyleSortingTemplateDirective: IgxExcelStyleSortingTemplateDirective;\n\n    /**\n     *@hidden @internal\n     */\n    @ContentChild(IgxExcelStyleMovingTemplateDirective, { read: IgxExcelStyleMovingTemplateDirective })\n    public excelStyleMovingTemplateDirective: IgxExcelStyleMovingTemplateDirective;\n\n    /**\n     *@hidden @internal\n     */\n    @ContentChild(IgxExcelStyleHidingTemplateDirective, { read: IgxExcelStyleHidingTemplateDirective })\n    public excelStyleHidingTemplateDirective: IgxExcelStyleHidingTemplateDirective;\n\n    /**\n     *@hidden @internal\n     */\n    @ContentChild(IgxExcelStylePinningTemplateDirective, { read: IgxExcelStylePinningTemplateDirective })\n    public excelStylePinningTemplateDirective: IgxExcelStylePinningTemplateDirective;\n\n    /**\n     *@hidden @internal\n     */\n    @ContentChild(IgxExcelStyleLoadingValuesTemplateDirective, { read: IgxExcelStyleLoadingValuesTemplateDirective, static: true })\n    public excelStyleLoadingValuesTemplateDirective: IgxExcelStyleLoadingValuesTemplateDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChildren(IgxGridHeaderGroupComponent, { read: IgxGridHeaderGroupComponent })\n    public headerGroups: QueryList<IgxGridHeaderGroupComponent>;\n\n    /**\n     * A list of all `IgxGridHeaderGroupComponent`.\n     * @example\n     * ```typescript\n     * const headerGroupsList = this.grid.headerGroupsList;\n     * ```\n     */\n    get headerGroupsList(): IgxGridHeaderGroupComponent[] {\n        return this.headerGroups ? flatten(this.headerGroups.toArray()) : [];\n    }\n\n    /**\n     * A list of all `IgxGridHeaderComponent`.\n     * @example\n     * ```typescript\n     * const headers = this.grid.headerCellList;\n     * ```\n     */\n    get headerCellList(): IgxGridHeaderComponent[] {\n        return this.headerGroupsList.map((headerGroup) => headerGroup.headerCell).filter((headerCell) => headerCell);\n    }\n\n    /**\n     * A list of all `IgxGridFilteringCellComponent`.\n     * @example\n     * ```typescript\n     * const filterCells = this.grid.filterCellList;\n     * ```\n     */\n    get filterCellList(): IgxGridFilteringCellComponent[] {\n        return this.headerGroupsList.map((headerGroup) => headerGroup.filterCell).filter((filterCell) => filterCell);\n    }\n\n    @ViewChildren('row')\n    private _rowList: QueryList<IgxGridRowComponent>;\n\n    @ViewChildren('summaryRow', { read: IgxSummaryRowComponent })\n    protected _summaryRowList: QueryList<IgxSummaryRowComponent>;\n\n    /**\n     * @hidden @internal\n    */\n    public get summariesRowList() {\n        const res = new QueryList<any>();\n        if (!this._summaryRowList) {\n            return res;\n        }\n        const sumList = this._summaryRowList.filter((item) => {\n            return item.element.nativeElement.parentElement !== null;\n        });\n        res.reset(sumList);\n        return res;\n    }\n\n    /**\n     * A list of `IgxGridRowComponent`.\n     * @example\n     * ```typescript\n     * const rowList = this.grid.rowList;\n     * ```\n     */\n    public get rowList() {\n        const res = new QueryList<any>();\n        if (!this._rowList) {\n            return res;\n        }\n        const rList = this._rowList\n            .filter((item) => {\n                return item.element.nativeElement.parentElement !== null;\n            })\n            .sort((a, b) => {\n                return a.index - b.index;\n            });\n        res.reset(rList);\n        return res;\n    }\n\n    @ViewChildren(IgxRowDirective, { read: IgxRowDirective })\n    private _dataRowList: QueryList<IgxRowDirective<IgxGridBaseDirective>>;\n\n    /**\n     * A list of currently rendered `IgxGridRowComponent`'s.\n     * @example\n     * ```typescript\n     * const dataList = this.grid.dataRowList;\n     * ```\n     */\n    public get dataRowList(): QueryList<IgxRowDirective<IgxGridBaseDirective>> {\n        const res = new QueryList<IgxRowDirective<IgxGridBaseDirective>>();\n        if (!this._dataRowList) {\n            return res;\n        }\n        const rList = this._dataRowList.filter((item) => {\n            return item.element.nativeElement.parentElement !== null;\n        }).sort((a, b) => {\n            return a.index - b.index;\n        });\n        res.reset(rList);\n        return res;\n    }\n\n    /**\n     * A template reference for the template when the filtered grid is empty.\n     * @example\n     * ```\n     * const emptyTempalte = this.grid.emptyGridTemplate;\n     * ```\n     */\n    @ViewChild('emptyFilteredGrid', { read: TemplateRef, static: true })\n    public emptyFilteredGridTemplate: TemplateRef<any>;\n\n    /**\n     * A template reference for the template when the grid is empty.\n     * @example\n     * ```\n     * const emptyTempalte = this.grid.emptyGridTemplate;\n     * ```\n     */\n    @ViewChild('defaultEmptyGrid', { read: TemplateRef, static: true })\n    public emptyGridDefaultTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n    */\n    @ViewChild('defaultLoadingGrid', { read: TemplateRef, static: true })\n    public loadingGridDefaultTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('scrollContainer', { read: IgxGridForOfDirective, static: true })\n    public parentVirtDir: IgxGridForOfDirective<any>;\n\n    /**\n     * Returns the template which will be used by the toolbar to show custom content.\n     * @example\n     * ```typescript\n     * let customContentTemplate = this.grid.toolbarCustomContentTemplate;\n     * ```\n    */\n    public get toolbarCustomContentTemplate(): IgxGridToolbarCustomContentDirective {\n        return this.toolbarCustomContentTemplates.first;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChildren(IgxGridToolbarCustomContentDirective, { read: IgxGridToolbarCustomContentDirective, descendants: false })\n    public toolbarCustomContentTemplates: QueryList<IgxGridToolbarCustomContentDirective>;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get headSelectorTemplate(): TemplateRef<IgxHeadSelectorDirective> {\n        if (this.headSelectorsTemplates && this.headSelectorsTemplates.first) {\n            return this.headSelectorsTemplates.first.templateRef;\n        }\n\n        return null;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChildren(IgxHeadSelectorDirective, { read: IgxHeadSelectorDirective, descendants: false })\n    public headSelectorsTemplates: QueryList<IgxHeadSelectorDirective>;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get rowSelectorTemplate(): TemplateRef<IgxRowSelectorDirective> {\n        if (this.rowSelectorsTemplates && this.rowSelectorsTemplates.first) {\n            return this.rowSelectorsTemplates.first.templateRef;\n        }\n\n        return null;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChildren(IgxRowSelectorDirective, { read: IgxRowSelectorDirective, descendants: false })\n    public rowSelectorsTemplates: QueryList<IgxRowSelectorDirective>;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChildren(IgxRowDragGhostDirective, { read: TemplateRef, descendants: false })\n    public dragGhostCustomTemplates: QueryList<TemplateRef<any>>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('verticalScrollContainer', { read: IgxGridForOfDirective, static: true })\n    public verticalScrollContainer: IgxGridForOfDirective<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('verticalScrollHolder', { read: IgxGridForOfDirective, static: true })\n    public verticalScroll: IgxGridForOfDirective<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('scr', { read: ElementRef, static: true })\n    public scr: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('footer', { read: ElementRef })\n    public footer: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('hContainer', { read: IgxGridForOfDirective, static: true })\n    public headerContainer: IgxGridForOfDirective<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('headerSelectorContainer')\n    public headerSelectorContainer: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('headerDragContainer')\n    public headerDragContainer: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('headerGroupContainer')\n    public headerGroupContainer: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('filteringRow', { read: IgxGridFilteringRowComponent })\n    public filteringRow: IgxGridFilteringRowComponent;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('theadRow', { static: true })\n    public theadRow: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('tbody', { static: true })\n    public tbody: ElementRef;\n\n    /**\n     * @hidden @internal\n    */\n    @ViewChild('tfoot', { static: true })\n    public tfoot: ElementRef;\n\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('igxFilteringOverlayOutlet', { read: IgxOverlayOutletDirective, static: true })\n    protected _outletDirective: IgxOverlayOutletDirective;\n\n    /**\n     * @hidden @internal\n     */\n    public get outletDirective() {\n        return this._outletDirective;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('igxRowEditingOverlayOutlet', { read: IgxOverlayOutletDirective, static: true })\n    public rowEditingOutletDirective: IgxOverlayOutletDirective;\n\n    /**\n     * @hidden @internal\n    */\n    @ViewChildren(IgxTemplateOutletDirective, { read: IgxTemplateOutletDirective })\n    public tmpOutlets: QueryList<any> = new QueryList<any>();\n\n\n    /**\n     * @hidden @internal\n    */\n    public get rowOutletDirective() {\n        return this.rowEditingOutletDirective;\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public get parentRowOutletDirective() {\n        return this.outletDirective;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChild('dragIndicatorIconBase', { read: TemplateRef, static: true })\n    public dragIndicatorIconBase: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n    */\n    @ViewChild('defaultRowEditTemplate', { read: TemplateRef, static: true })\n    private defaultRowEditTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n    */\n    @ContentChild(IgxRowEditTemplateDirective, { read: TemplateRef })\n    public rowEditCustom: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    public get rowEditContainer(): TemplateRef<any> {\n        return this.rowEditCustom ? this.rowEditCustom : this.defaultRowEditTemplate;\n    }\n    /**\n     * @hidden @internal\n     */\n    @ContentChild(IgxRowEditTextDirective, { read: TemplateRef })\n    public rowEditText: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ContentChild(IgxRowEditActionsDirective, { read: TemplateRef })\n    public rowEditActions: TemplateRef<any>;\n\n\n    /**\n    * The custom template, if any, that should be used when rendering a row expand indicator.\n    */\n   @ContentChild(IgxRowExpandedIndicatorDirective, { read: TemplateRef })\n   public rowExpandedIndicatorTemplate: TemplateRef<any> = null;\n\n   /**\n   * The custom template, if any, that should be used when rendering a row collapse indicator.\n   */\n   @ContentChild(IgxRowCollapsedIndicatorDirective, { read: TemplateRef })\n   public rowCollapsedIndicatorTemplate: TemplateRef<any> = null;\n\n    /**\n    * The custom template, if any, that should be used when rendering a header expand indicator.\n    */\n   @ContentChild(IgxHeaderExpandIndicatorDirective, { read: TemplateRef })\n   public headerExpandIndicatorTemplate: TemplateRef<any> = null;\n\n   /**\n   * The custom template, if any, that should be used when rendering a header collapse indicator.\n   */\n   @ContentChild(IgxHeaderCollapseIndicatorDirective, { read: TemplateRef })\n   public headerCollapseIndicatorTemplate: TemplateRef<any> = null;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChildren(IgxDragIndicatorIconDirective, { read: TemplateRef, descendants: false })\n    public dragIndicatorIconTemplates: QueryList<TemplateRef<any>>;\n\n    /**\n    * The custom template, if any, that should be used when rendering the row drag indicator icon\n    */\n    public get dragIndicatorIconTemplate(): TemplateRef<any> {\n        return this._customDragIndicatorIconTemplate || this.dragIndicatorIconTemplates.first;\n    }\n\n    public set dragIndicatorIconTemplate(val: TemplateRef<any>) {\n        this._customDragIndicatorIconTemplate = val;\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public get rowInEditMode(): IgxRowDirective<IgxGridBaseDirective & GridType> {\n        const editRowState = this.crudService.row;\n        return editRowState !== null ? this.rowList.find(e => e.rowID === editRowState.id) : null;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get firstEditableColumnIndex(): number {\n        const index = this.navigation.gridOrderedColumns.findIndex(e => e.editable);\n        return index !== -1 ? index : null;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get lastEditableColumnIndex(): number {\n        const orderedColumns = this.navigation.gridOrderedColumns;\n        const index = orderedColumns.reverse().findIndex(e => e.editable);\n        return index !== -1 ? orderedColumns.length - 1 - index : null;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChildren(IgxRowEditTabStopDirective)\n    public rowEditTabsDEFAULT: QueryList<IgxRowEditTabStopDirective>;\n\n    /**\n     * @hidden @internal\n     */\n    @ContentChildren(IgxRowEditTabStopDirective)\n    public rowEditTabsCUSTOM: QueryList<IgxRowEditTabStopDirective>;\n\n    /**\n     * @hidden @internal\n     * TODO: Nav service logic doesn't handle 0 results from this querylist\n     */\n    public get rowEditTabs(): QueryList<IgxRowEditTabStopDirective> {\n        return this.rowEditTabsCUSTOM.length ? this.rowEditTabsCUSTOM : this.rowEditTabsDEFAULT;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild(IgxToggleDirective)\n    public rowEditingOverlay: IgxToggleDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.tabindex')\n    public tabindex = 0;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.class')\n    get hostClass(): string {\n        const classes = [this.getComponentDensityClass('igx-grid')];\n        // The custom classes should be at the end.\n        classes.push(this.class);\n        return classes.join(' ');\n    }\n\n    get bannerClass(): string {\n        const position = this.rowEditPositioningStrategy.isTop ? 'igx-banner__border-top' : 'igx-banner__border-bottom';\n        return `${this.getComponentDensityClass('igx-banner')} ${position}`;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.role')\n    public hostRole = 'grid';\n\n    /**\n     * @hidden @internal\n     */\n    get pipeTrigger(): number {\n        return this._pipeTrigger;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get filteringPipeTrigger(): number {\n        return this._filteringPipeTrigger;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get summaryPipeTrigger(): number {\n        return this._summaryPipeTrigger;\n    }\n\n    /**\n     * Gets/Sets the sorting state.\n     * @remarks\n     * Supports two-way data binding.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [autoGenerate]=\"true\" [(sortingExpressions)]=\"model.sortingExpressions\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    get sortingExpressions(): ISortingExpression[] {\n        return this._sortingExpressions;\n    }\n\n    set sortingExpressions(value: ISortingExpression[]) {\n        this._sortingExpressions = cloneArray(value);\n        this.sortingExpressionsChange.emit(this._sortingExpressions);\n        this.notifyChanges();\n    }\n\n    /**\n     * Emitted before sorting is performed.\n     * @remarks\n     * Returns the sorting expressions.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [autoGenerate]=\"true\" (sortingExpressionsChange)=\"sortingExprChange($event)\"></igx-grid>\n     * ```\n    */\n    @Output()\n    public sortingExpressionsChange = new EventEmitter<ISortingExpression[]>();\n\n    /**\n     * @hidden @internal\n     */\n    get maxLevelHeaderDepth() {\n        if (this._maxLevelHeaderDepth === null) {\n            this._maxLevelHeaderDepth = this.hasColumnLayouts ?\n                this.columnList.reduce((acc, col) => Math.max(acc, col.rowStart), 0) :\n                this.columnList.reduce((acc, col) => Math.max(acc, col.level), 0);\n        }\n        return this._maxLevelHeaderDepth;\n    }\n\n    /**\n     * Gets the number of hidden columns.\n     * @example\n     * ```typescript\n     * const hiddenCol = this.grid.hiddenColumnsCount;\n     * ``\n     */\n    get hiddenColumnsCount() {\n        return this.columnList.filter((col) => col.columnGroup === false && col.hidden === true).length;\n    }\n\n    /**\n     * Gets/Sets the text to be displayed inside the toggle button.\n     * @remarks\n     * Used for the built-in column hiding UI of the`IgxColumnComponent`.\n     * @example\n     * ```html\n     * <igx-grid [columnHiding]=\"true\" [showToolbar]=\"true\" [hiddenColumnsText]=\"'Hidden Columns'\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    get hiddenColumnsText() {\n        return this._hiddenColumnsText;\n    }\n\n    set hiddenColumnsText(value) {\n        this._hiddenColumnsText = value;\n\n    }\n\n    /**\n     * Gets/Sets the text to be displayed inside the toggle button.\n     * @remarks\n     * Used for the built-in column pinning UI of the`IgxColumnComponent`.\n     * @example\n     * ```html\n     * <igx-grid [pinnedColumnsText]=\"'PinnedCols Text\" [data]=\"data\" [width]=\"'100%'\" [height]=\"'500px'\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    get pinnedColumnsText() {\n        return this._pinnedColumnsText;\n    }\n    set pinnedColumnsText(value) {\n        this._pinnedColumnsText = value;\n    }\n\n    /**\n     * Get transactions service for the grid.\n     */\n    get transactions(): TransactionService<Transaction, State> {\n        return this._transactions;\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public columnsWithNoSetWidths = null;\n\n    /* Toolbar related definitions */\n    private _showToolbar = false;\n    private _exportExcel = false;\n    private _exportCsv = false;\n    private _toolbarTitle: string = null;\n    private _exportText: string = null;\n    private _exportExcelText: string = null;\n    private _exportCsvText: string = null;\n    private _rowEditable = false;\n    private _currentRowState: any;\n    private _filteredSortedData = null;\n    /**\n     * @hidden @internal\n    */\n    public get currentRowState(): any {\n        return this._currentRowState;\n    }\n\n    /**\n     * Provides access to the `IgxToolbarComponent`.\n     * @example\n     * ```typescript\n     * const gridToolbar = this.grid.toolbar;\n     * ```\n     */\n    @ViewChild('toolbar', { read: IgxGridToolbarComponent })\n    public toolbar: IgxGridToolbarComponent = null;\n\n    @ViewChild('toolbar', { read: ElementRef })\n    private toolbarHtml: ElementRef = null;\n\n    /**\n     * Gets/Sets whether the toolbar is shown.\n     * @example\n     * ```html\n     * <igx-grid [data]=\"localData\" [showToolbar]=\"true\" [autoGenerate]=\"true\" ></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    public get showToolbar(): boolean {\n        return this._showToolbar;\n    }\n    public set showToolbar(newValue: boolean) {\n        if (this._showToolbar !== newValue) {\n            this._showToolbar = newValue;\n            if (!this._init) {\n                this.notifyChanges(true);\n            }\n        }\n    }\n\n    /**\n     * Gets/Sets the toolbar's title.\n     * @example\n     * ```html\n     * <igx-grid [data]=\"localData\" [showToolbar]=\"true\" [autoGenerate]=\"true\" [toolbarTitle]=\"'My Grid'\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    public get toolbarTitle(): string {\n        return this._toolbarTitle;\n    }\n\n    public set toolbarTitle(newValue: string) {\n        if (this._toolbarTitle !== newValue) {\n            this._toolbarTitle = newValue;\n            if (!this._init) {\n                this.notifyChanges(true);\n            }\n        }\n    }\n\n    /**\n     * Gets/Sets whether exporting to MS Excel is enabled or disabled.\n     * @example\n     * ```html\n     * <igx-grid [data]=\"localData\" [showToolbar]=\"true\" [autoGenerate]=\"true\" [exportExcel]=\"true\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    public get exportExcel(): boolean {\n        return this.getExportExcel();\n    }\n\n    public set exportExcel(newValue: boolean) {\n        if (this._exportExcel !== newValue) {\n            this._exportExcel = newValue;\n            if (!this._init) {\n                this.notifyChanges(true);\n            }\n        }\n    }\n\n    /**\n     * Gets/Sets whether the option for exporting to CSV is enabled or disabled.\n     * ```html\n     * <igx-grid [data]=\"localData\" [showToolbar]=\"true\" [autoGenerate]=\"true\" [exportCsv]=\"true\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    public get exportCsv(): boolean {\n        return this.getExportCsv();\n    }\n    public set exportCsv(newValue: boolean) {\n        if (this._exportCsv !== newValue) {\n            this._exportCsv = newValue;\n            if (!this._init) {\n                this.notifyChanges(true);\n            }\n        }\n    }\n\n    /**\n     * Gets/Sets the textual content for the main export button.\n     * @example\n     * ```html\n     * <igx-grid [data]=\"localData\" [showToolbar]=\"true\" [exportText]=\"'My Exporter'\" [exportCsv]=\"true\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    public get exportText(): string {\n        return this._exportText;\n    }\n\n    public set exportText(newValue: string) {\n        if (this._exportText !== newValue) {\n            this._exportText = newValue;\n            if (!this._init) {\n                this.notifyChanges(true);\n            }\n        }\n    }\n\n    /**\n     * Gets/Sets the textual content for the MS Excel export button.\n     * ```html\n     * <igx-grid [exportExcelText]=\"'My Excel Exporter\" [showToolbar]=\"true\" [exportText]=\"'My Exporter'\" [exportCsv]=\"true\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    public get exportExcelText(): string {\n        return this._exportExcelText;\n    }\n    public set exportExcelText(newValue: string) {\n        if (this._exportExcelText !== newValue) {\n            this._exportExcelText = newValue;\n            if (!this._init) {\n                this.notifyChanges(true);\n            }\n        }\n    }\n\n    /**\n     * Gets/Sets the textual content for the CSV export button.\n     * @example\n     * ```html\n     * <igx-grid [exportCsvText]=\"'My Csv Exporter\" [showToolbar]=\"true\" [exportText]=\"'My Exporter'\" [exportExcel]=\"true\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    public get exportCsvText(): string {\n        return this._exportCsvText;\n    }\n    public set exportCsvText(newValue: string) {\n        if (this._exportCsvText !== newValue) {\n            this._exportCsvText = newValue;\n            if (!this._init) {\n                this.notifyChanges(true);\n            }\n        }\n    }\n\n    /**\n     * Controls the copy behavior of the grid.\n     */\n    @Input()\n    clipboardOptions = {\n        /**\n         * Enables/disables the copy behavior\n         */\n        enabled: true,\n        /**\n         * Include the columns headers in the clipboard output.\n         */\n        copyHeaders: true,\n        /**\n         * Apply the columns formatters (if any) on the data in the clipboard output.\n         */\n        copyFormatters: true,\n        /**\n         * The separator used for formatting the copy output. Defaults to `\\t`.\n         */\n        separator: '\\t'\n    };\n\n    /**\n     * Gets/Sets cell selection mode.\n     * @remarks\n     * By default the cell selection mode is multiple\n     * @param selectionMode: GridSelectionMode\n    */\n    @WatchChanges()\n    @Input()\n    get cellSelection() {\n        return this._cellSelectionMode;\n    }\n\n    set cellSelection(selectionMode:  GridSelectionMode) {\n        this._cellSelectionMode = selectionMode;\n        if (this.gridAPI.grid) {\n            this.selectionService.clear(true);\n            this.notifyChanges();\n        }\n    }\n\n    /**\n     * Gets/Sets row selection mode\n     * @remarks\n     * By default the row selection mode is none\n     * @param selectionMode: GridSelectionMode\n    */\n    @WatchChanges()\n    @Input()\n    get rowSelection() {\n        return this._rowSelectionMode;\n    }\n\n\n    set rowSelection(selectionMode:  GridSelectionMode) {\n        this._rowSelectionMode = selectionMode;\n        if (this.gridAPI.grid && this.columnList) {\n            this.selectionService.clearAllSelectedRows();\n            this.notifyChanges(true);\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public rowEditMessage;\n\n    /**\n     * Emitted when an export process is initiated by the user.\n     * @example\n     * ```typescript\n     * toolbarExporting(event: IGridToolbarExportEventArgs){\n     *     const toolbarExporting = event;\n     * }\n     * ```\n     */\n    @Output()\n    public onToolbarExporting = new EventEmitter<IGridToolbarExportEventArgs>();\n\n    /* End of toolbar related definitions */\n\n    /**\n     * Emitted when making a range selection.\n     * @remarks\n     * Range selection can be made either through drag selection or through keyboard selection.\n     */\n    @Output()\n    onRangeSelection = new EventEmitter<GridSelectionRange>();\n\n    /**\n     * @hidden @internal\n     */\n    public pagingState;\n    /**\n     * @hidden @internal\n     */\n    public calcWidth: number;\n    /**\n     * @hidden @internal\n     */\n    public calcHeight = 0;\n    /**\n     * @hidden @internal\n     */\n    public tfootHeight: number;\n    /**\n     * @hidden @internal\n     */\n    public chipsGoupingExpressions = [];\n    /**\n     * @hidden @internal\n     */\n    public summariesHeight: number;\n\n    /**\n     * @hidden @internal\n     */\n    public draggedColumn: IgxColumnComponent;\n\n\n    /**\n     * @hidden @internal\n     */\n    public disableTransitions = false;\n\n    /**\n     * @hidden @internal\n     */\n    public lastSearchInfo: ISearchInfo = {\n        searchText: '',\n        caseSensitive: false,\n        exactMatch: false,\n        activeMatchIndex: 0,\n        matchInfoCache: []\n    };\n\n    /**\n     * @hidden @internal\n     */\n    public columnWidthSetByUser = false;\n\n    data: any[];\n    filteredData: any[];\n\n    /**\n     * @hidden\n     */\n    protected destroy$ = new Subject<any>();\n\n    /**\n     * @hidden\n     */\n    protected _perPage = 15;\n    /**\n     * @hidden\n     */\n    protected _page = 0;\n    /**\n     * @hidden\n     */\n    protected _paging = false;\n    /**\n     * @hidden\n     */\n    protected _hideRowSelectors = false;\n    /**\n     * @hidden\n     */\n    protected _rowDrag = false;\n    /**\n     * @hidden\n     */\n    protected _pipeTrigger = 0;\n    /**\n     * @hidden\n     */\n    protected _filteringPipeTrigger = 0;\n    /**\n     * @hidden\n     */\n    protected _summaryPipeTrigger = 0;\n    /**\n     * @hidden\n     */\n    protected _columns: IgxColumnComponent[] = [];\n    /**\n     * @hidden\n     */\n    protected _pinnedColumns: IgxColumnComponent[] = [];\n    /**\n     * @hidden\n     */\n    protected _unpinnedColumns: IgxColumnComponent[] = [];\n    /**\n     * @hidden\n     */\n    protected _filteringExpressionsTree: IFilteringExpressionsTree = new FilteringExpressionsTree(FilteringLogic.And);\n    /**\n     * @hidden\n     */\n    protected _advancedFilteringExpressionsTree: IFilteringExpressionsTree;\n    /**\n     * @hidden\n     */\n    protected _sortingExpressions: Array<ISortingExpression> = [];\n    /**\n     * @hidden\n     */\n    protected _maxLevelHeaderDepth = null;\n    /**\n     * @hidden\n     */\n    protected _columnHiding = false;\n    /**\n     * @hidden\n     */\n    protected _columnPinning = false;\n\n\n    /**\n     * @hidden\n     */\n    protected _hasVisibleColumns;\n    protected _allowFiltering = false;\n    protected _allowAdvancedFiltering = false;\n    protected _filterMode = FilterMode.quickFilter;\n\n    protected observer: ResizeObserver = new ResizeObserver(() => {});\n\n    protected resizeNotify = new Subject();\n\n\n    private columnListDiffer;\n    private _hiddenColumnsText = '';\n    private _pinnedColumnsText = '';\n    private _height = '100%';\n    private _width = '100%';\n    private _rowHeight;\n    protected _baseFontSize: number;\n    private _horizontalForOfs: Array<IgxGridForOfDirective<any>> = [];\n    private _multiRowLayoutRowSize = 1;\n    protected _loadingId;\n    protected _expansionStates: Map<any, boolean> = new Map<any, boolean>();\n    protected _defaultExpandState = false;\n    // Caches\n    private _totalWidth = NaN;\n    private _pinnedVisible = [];\n    private _unpinnedVisible = [];\n    private _pinnedWidth = NaN;\n    private _unpinnedWidth = NaN;\n    private _visibleColumns = [];\n    private _columnGroups = false;\n    private _autoGeneratedCols = [];\n    protected _headerFeaturesWidth = NaN;\n\n    private _columnWidth: string;\n\n    protected _defaultTargetRecordNumber = 10;\n\n    private _summaryPosition = GridSummaryPosition.bottom;\n    private _summaryCalculationMode = GridSummaryCalculationMode.rootAndChildLevels;\n    private _cellSelectionMode = GridSelectionMode.multiple;\n    private _rowSelectionMode = GridSelectionMode.none;\n\n    private rowEditPositioningStrategy = new RowEditPositionStrategy({\n        horizontalDirection: HorizontalAlignment.Right,\n        verticalDirection: VerticalAlignment.Bottom,\n        horizontalStartPoint: HorizontalAlignment.Left,\n        verticalStartPoint: VerticalAlignment.Bottom,\n        closeAnimation: null\n    });\n\n    private rowEditSettings = {\n        scrollStrategy: new AbsoluteScrollStrategy(),\n        modal: false,\n        closeOnOutsideClick: false,\n        outlet: this.rowOutletDirective,\n        positionStrategy: this.rowEditPositioningStrategy\n    };\n\n    private verticalScrollHandler = (event) => {\n        this.verticalScrollContainer.onScroll(event);\n        if (isEdge()) { this.wheelHandler(false); }\n        this.disableTransitions = true;\n\n        this.zone.run(() => {\n            this.zone.onStable.pipe(first()).subscribe(() => {\n                this.verticalScrollContainer.onChunkLoad.emit(this.verticalScrollContainer.state);\n            });\n\n            if (this.rowEditable) {\n                this.changeRowEditingOverlayStateOnScroll(this.rowInEditMode);\n            }\n        });\n        this.disableTransitions = false;\n\n        this.hideOverlays();\n    }\n\n    private horizontalScrollHandler = (event) => {\n        const scrollLeft = event.target.scrollLeft;\n        if (isEdge()) { this.wheelHandler(true); }\n        this.headerContainer.onHScroll(scrollLeft);\n        this._horizontalForOfs.forEach(vfor => vfor.onHScroll(scrollLeft));\n        this.cdr.markForCheck();\n\n        this.zone.run(() => {\n            this.zone.onStable.pipe(first()).subscribe(() => {\n                this.parentVirtDir.onChunkLoad.emit(this.headerContainer.state);\n            });\n        });\n\n        this.hideOverlays();\n    }\n\n    /**\n    * @hidden\n    * @internal\n    */\n    public isDetailRecord(rec) {\n        return false;\n    }\n\n    /**\n    * @hidden\n    * @internal\n    */\n    public isGroupByRecord(rec) {\n        return false;\n    }\n\n    /**\n    * @hidden\n    * @internal\n    */\n    public get hasDetails() {\n        return false;\n    }\n\n    /**\n     * Returns the state of the grid virtualization.\n     * @remarks\n     * Includes the start index and how many records are rendered.\n     * @example\n     * ```typescript\n     * const gridVirtState = this.grid1.virtualizationState;\n     * ```\n     */\n    get virtualizationState() {\n        return this.verticalScrollContainer.state;\n    }\n\n    /**\n     * @hidden\n     */\n    set virtualizationState(state) {\n        this.verticalScrollContainer.state = state;\n    }\n\n    /**\n    * @hidden\n    * @internal\n    */\n    public hideOverlays() {\n        this.overlayIDs.forEach(overlayID => {\n            this.overlayService.hide(overlayID);\n            this.overlayService.onClosed.pipe(\n                filter(o => o.id === overlayID),\n                takeUntil(this.destroy$)).subscribe(() => {\n                    this.nativeElement.focus();\n                });\n        });\n    }\n\n    private keydownHandler = (event) => {\n        const key = event.key.toLowerCase();\n        if ((isNavigationKey(key) && event.keyCode !== 32) || key === 'tab' || key === 'pagedown' || key === 'pageup') {\n            event.preventDefault();\n            if (key === 'pagedown') {\n                this.verticalScrollContainer.scrollNextPage();\n                this.nativeElement.focus();\n            } else if (key === 'pageup') {\n                this.verticalScrollContainer.scrollPrevPage();\n                this.nativeElement.focus();\n            }\n        }\n    }\n\n    constructor(\n        public selectionService: IgxGridSelectionService,\n        public crudService: IgxGridCRUDService,\n        public colResizingService: IgxColumnResizingService,\n        protected gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n        @Inject(IgxGridTransaction) protected _transactions: TransactionService<Transaction, State>,\n        private elementRef: ElementRef,\n        private zone: NgZone,\n        @Inject(DOCUMENT) public document,\n        public cdr: ChangeDetectorRef,\n        protected resolver: ComponentFactoryResolver,\n        protected differs: IterableDiffers,\n        protected viewRef: ViewContainerRef,\n        public navigation: IgxGridNavigationService,\n        public filteringService: IgxFilteringService,\n        @Inject(IgxOverlayService) protected overlayService: IgxOverlayService,\n        public summaryService: IgxGridSummaryService,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n            super(_displayDensityOptions);\n            this.cdr.detach();\n    }\n\n    _setupServices() {\n        this.gridAPI.grid = this;\n        this.crudService.grid = this;\n        this.selectionService.grid = this;\n        this.navigation.grid = this;\n        this.filteringService.grid = this;\n        this.summaryService.grid = this;\n    }\n\n    _setupListeners() {\n        const destructor = takeUntil<any>(this.destroy$);\n\n        this.onRowAdded.pipe(destructor).subscribe(args => this.refreshGridState(args));\n        this.onRowDeleted.pipe(destructor).subscribe(args => {\n            this.summaryService.deleteOperation = true;\n            this.summaryService.clearSummaryCache(args);\n        });\n\n        this.transactions.onStateUpdate.pipe(destructor).subscribe(() => {\n            this.selectionService.clearHeaderCBState();\n            this.summaryService.clearSummaryCache();\n            this._pipeTrigger++;\n            this.notifyChanges();\n            if (this.transactions.getAggregatedChanges(false).length === 0) {\n                // Needs better check, calling 'transactions.clear()' will also trigger this\n                if (this.gridAPI.atInexistingPage()) {\n                    this.page--;\n                }\n            }\n        });\n\n        this.resizeNotify.pipe(destructor, filter(() => !this._init), throttleTime(100))\n            .subscribe(() => {\n                this.zone.run(() => {\n                    this.notifyChanges(true);\n                });\n            });\n\n        this.onPagingDone.pipe(destructor).subscribe(() => {\n            this.endEdit(true);\n            this.selectionService.clear(true);\n        });\n\n        this.onColumnMoving.pipe(destructor).subscribe(() => this.endEdit(true));\n        this.onColumnResized.pipe(destructor).subscribe(() => this.endEdit(true));\n\n        this.overlayService.onOpening.pipe(destructor).subscribe((event) => {\n            if (this._advancedFilteringOverlayId === event.id) {\n                const instance = event.componentRef.instance as IgxAdvancedFilteringDialogComponent;\n                if (instance) {\n                    instance.initialize(this, this.overlayService, event.id);\n                }\n            }\n        });\n\n        this.overlayService.onOpened.pipe(destructor).subscribe((event) => {\n            // do not hide the advanced filtering overlay on scroll\n            if (this._advancedFilteringOverlayId === event.id) {\n                const instance = event.componentRef.instance as IgxAdvancedFilteringDialogComponent;\n                if (instance) {\n                    instance.setAddButtonFocus();\n                }\n                return;\n            }\n\n            if (this.overlayService.getOverlayById(event.id).settings.outlet === this.outletDirective &&\n                this.overlayIDs.indexOf(event.id) < 0) {\n                this.overlayIDs.push(event.id);\n            }\n        });\n\n        this.overlayService.onClosed.pipe(destructor, filter(() => !this._init)).subscribe((event) => {\n            if (this._advancedFilteringOverlayId === event.id) {\n                this._advancedFilteringOverlayId = null;\n                return;\n            }\n\n            const ind = this.overlayIDs.indexOf(event.id);\n            if (ind !== -1) {\n                this.overlayIDs.splice(ind, 1);\n            }\n        });\n\n        this.verticalScrollContainer.onDataChanging.pipe(destructor, filter(() => !this._init)).subscribe(($event) => {\n            const shouldRecalcSize = this.isPercentHeight &&\n             ( !this.calcHeight || this.calcHeight === this.getDataBasedBodyHeight() ||\n              this.calcHeight === this.renderedRowHeight * this._defaultTargetRecordNumber);\n            if (shouldRecalcSize) {\n                this.calculateGridHeight();\n                $event.containerSize = this.calcHeight;\n            }\n            this.evaluateLoadingState();\n        });\n\n        this.verticalScrollContainer.onScrollbarVisibilityChanged.pipe(destructor, filter(() => !this._init)).subscribe(() => {\n            // called to recalc all widths that may have changes as a result of\n            // the vert. scrollbar showing/hiding\n            this.notifyChanges(true);\n        });\n\n        this.verticalScrollContainer.onContentSizeChange.pipe(destructor, filter(() => !this._init)).subscribe(($event) => {\n            this.calculateGridSizes(false);\n        });\n\n        this.onDensityChanged.pipe(destructor).subscribe(() => {\n            this._headerFeaturesWidth = NaN;\n            this.summaryService.summaryHeight = 0;\n            this.endEdit(true);\n            this.cdr.markForCheck();\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        super.ngOnInit();\n        this._setupServices();\n        this._setupListeners();\n        this.columnListDiffer = this.differs.find([]).create(null);\n        this.calcWidth = this.width && this.width.indexOf('%') === -1 ? parseInt(this.width, 10) : 0;\n        this.shouldGenerate = this.autoGenerate;\n        this._scrollWidth = this.getScrollWidth();\n    }\n\n    protected setupColumns() {\n        if (this.autoGenerate) {\n            this.autogenerateColumns();\n        }\n\n        this.initColumns(this.columnList, (col: IgxColumnComponent) => this.onColumnInit.emit(col));\n        this.columnListDiffer.diff(this.columnList);\n\n        this.columnList.changes\n            .pipe(takeUntil(this.destroy$))\n            .subscribe((change: QueryList<IgxColumnComponent>) => {\n                this.onColumnsChanged(change);\n            });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public resetColumnsCaches() {\n        this.columnList.forEach(column => column.resetCaches());\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public resetForOfCache() {\n        const firstVirtRow = this.dataRowList.first;\n        if (firstVirtRow) {\n            if (this._cdrRequests) {\n                firstVirtRow.virtDirRow.cdr.detectChanges();\n            }\n            firstVirtRow.virtDirRow.assumeMaster();\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public resetColumnCollections() {\n        this._visibleColumns.length = 0;\n        this._pinnedVisible.length = 0;\n        this._unpinnedVisible.length = 0;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public resetCachedWidths() {\n        this._unpinnedWidth = NaN;\n        this._pinnedWidth = NaN;\n        this._totalWidth = NaN;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public resetCaches(recalcFeatureWidth = true) {\n        if (recalcFeatureWidth) {\n            this._headerFeaturesWidth = NaN;\n        }\n        this.resetForOfCache();\n        this.resetColumnsCaches();\n        this.resetColumnCollections();\n        this.resetCachedWidths();\n        this.hasVisibleColumns = undefined;\n        this._columnGroups = this.columnList.some(col => col.columnGroup);\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterContentInit() {\n        this.setupColumns();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public _setupRowObservers() {\n        const elementFilter = (item: IgxRowDirective<any> | IgxSummaryRowComponent) => this.isDefined(item.nativeElement.parentElement);\n        const extractForOfs = pipe(map((collection: any[]) => collection.filter(elementFilter).map(item => item.virtDirRow)));\n        const rowListObserver = extractForOfs(this._dataRowList.changes);\n        const summaryRowObserver = extractForOfs(this._summaryRowList.changes);\n        const resetHorizontalForOfs = () => {\n            this._horizontalForOfs = [\n                ...this._dataRowList.filter(elementFilter).map(item => item.virtDirRow),\n                ...this._summaryRowList.filter(elementFilter).map(item => item.virtDirRow)\n            ];\n        };\n        rowListObserver.pipe(takeUntil(this.destroy$)).subscribe(resetHorizontalForOfs);\n        summaryRowObserver.pipe(takeUntil(this.destroy$)).subscribe(resetHorizontalForOfs);\n        resetHorizontalForOfs();\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public _zoneBegoneListeners() {\n        this.zone.runOutsideAngular(() => {\n            this.nativeElement.addEventListener('keydown', this.keydownHandler);\n            this.verticalScrollContainer.getScroll().addEventListener('scroll', this.verticalScrollHandler);\n            this.headerContainer.getScroll().addEventListener('scroll', this.horizontalScrollHandler);\n\n            this.observer = new ResizeObserver(() => this.resizeNotify.next());\n            this.observer.observe(this.nativeElement);\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterViewInit() {\n        this.initPinning();\n        this.calculateGridSizes();\n        this._init = false;\n        this.cdr.reattach();\n        this._setupRowObservers();\n        this._zoneBegoneListeners();\n\n        const vertScrDC = this.verticalScrollContainer.displayContainer;\n        vertScrDC.addEventListener('scroll', this.scrollHandler);\n        vertScrDC.addEventListener('wheel', () => this.wheelHandler());\n\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public notifyChanges(repaint = false) {\n        this._cdrRequests = true;\n        this._cdrRequestRepaint = repaint;\n        this.cdr.markForCheck();\n    }\n\n    protected resetNotifyChanges() {\n        this._cdrRequestRepaint = false;\n        this._cdrRequests = false;\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public ngDoCheck() {\n        super.ngDoCheck();\n        if (this._init) {\n            return;\n        }\n\n        if (this._cdrRequestRepaint) {\n            this.resetNotifyChanges();\n            this.calculateGridSizes();\n            this.refreshSearch(true);\n            return;\n        }\n\n        if (this._cdrRequests) {\n            this.resetNotifyChanges();\n            this.cdr.detectChanges();\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n    */\n    public getDragGhostCustomTemplate() {\n        if (this.dragGhostCustomTemplates && this.dragGhostCustomTemplates.first) {\n            return this.dragGhostCustomTemplates.first;\n        }\n\n        return null;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngOnDestroy() {\n        this.tmpOutlets.forEach((tmplOutlet) => {\n            tmplOutlet.cleanCache();\n        });\n\n        this.destroy$.next(true);\n        this.destroy$.complete();\n        this._destroyed = true;\n\n        if (this._advancedFilteringOverlayId) {\n            this.overlayService.hide(this._advancedFilteringOverlayId);\n        }\n\n        this.zone.runOutsideAngular(() => {\n            this.observer.disconnect();\n            this.nativeElement.removeEventListener('keydown', this.keydownHandler);\n            this.verticalScrollContainer.getScroll().removeEventListener('scroll', this.verticalScrollHandler);\n            this.headerContainer.getScroll().removeEventListener('scroll', this.horizontalScrollHandler);\n            const vertScrDC = this.verticalScrollContainer.displayContainer;\n            vertScrDC.removeEventListener('scroll', this.scrollHandler);\n            vertScrDC.removeEventListener('wheel', () => this.wheelHandler());\n        });\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public dataLoading(event) {\n        this.onDataPreLoad.emit(event);\n    }\n\n    /**\n     * Toggles the specified column's visibility.\n     * @example\n     * ```typescript\n     * this.grid1.toggleColumnVisibility({\n     *       column: this.grid1.columns[0],\n     *       newValue: true\n     * });\n     * ```\n     */\n    public toggleColumnVisibility(args: IColumnVisibilityChangedEventArgs) {\n        const col = args.column ? this.columnList.find((c) => c === args.column) : undefined;\n\n        if (!col) {\n            return;\n        }\n\n        col.hidden = args.newValue;\n        this.onColumnVisibilityChanged.emit(args);\n    }\n\n    /**\n     * Gets/Sets a list of key-value pairs [row ID, expansion state].\n     * @remarks\n     * Includes only states that differ from the default one.\n     * Supports two-way binding.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"data\" [(expansionStates)]=\"model.expansionStates\">\n     * </igx-grid>\n     * ```\n     */\n    @Input()\n    public get expansionStates() {\n        return this._expansionStates;\n    }\n\n    public set expansionStates(value) {\n        this._expansionStates = new Map<any, boolean>(value);\n        this.expansionStatesChange.emit(this._expansionStates);\n        if (this.gridAPI.grid) {\n            this.cdr.detectChanges();\n        }\n    }\n\n   /**\n     * Expands all rows.\n     * @example\n     * ```typescript\n     * this.grid.expandAll();\n     * ```\n    */\n    public expandAll() {\n        this._defaultExpandState = true;\n        this.expansionStates = new Map<any, boolean>();\n    }\n\n   /**\n     * Collapses all rows.\n     * @example\n     * ```typescript\n     * this.grid.collapseAll();\n     * ```\n    */\n    public collapseAll() {\n        this._defaultExpandState = false;\n        this.expansionStates = new Map<any, boolean>();\n    }\n\n    /**\n     * Expands the row by its id.\n     * @remarks\n     * ID is either the primaryKey value or the data record instance.\n     * @example\n     * ```typescript\n     * this.grid.expandRow(rowID);\n     * ```\n     * @param rowID The row id - primaryKey value or the data record instance.\n     */\n    public expandRow(rowID: any) {\n        this.gridAPI.set_row_expansion_state(rowID, true);\n    }\n\n    /**\n     * Collapses the row by its id.\n     * @remarks\n     * ID is either the primaryKey value or the data record instance.\n     * @example\n     * ```typescript\n     * this.grid.collapseRow(rowID);\n     * ```\n     * @param rowID The row id - primaryKey value or the data record instance.\n    */\n    public collapseRow(rowID: any) {\n        this.gridAPI.set_row_expansion_state(rowID, false);\n    }\n\n\n    /**\n     * Toggles the row by its id.\n     * @remarks\n     * ID is either the primaryKey value or the data record instance.\n     * @example\n     * ```typescript\n     * this.grid.toggleRow(rowID);\n     * ```\n     * @param rowID The row id - primaryKey value or the data record instance.\n    */\n    public toggleRow(rowID: any) {\n        const rec = this.gridAPI.get_rec_by_id(rowID);\n        const state = this.gridAPI.get_row_expansion_state(rec);\n        this.gridAPI.set_row_expansion_state(rowID, !state);\n    }\n\n    /**\n     * @hidden\n     * @internal\n    */\n    public getDefaultExpandState(rec: any) {\n        return this._defaultExpandState;\n    }\n\n    /**\n     * Gets the native element.\n     * @example\n     * ```typescript\n     * const nativeEl = this.grid.nativeElement.\n     * ```\n     */\n    get nativeElement() {\n        return this.elementRef.nativeElement;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    protected get outlet() {\n        return this.outletDirective;\n    }\n\n    /**\n     * Gets the default row height.\n     * @example\n     * ```typescript\n     * const rowHeigh = this.grid.defaultRowHeight;\n     * ```\n     */\n    get defaultRowHeight(): number {\n        switch (this.displayDensity) {\n            case DisplayDensity.cosy:\n                return 40;\n            case DisplayDensity.compact:\n                return 32;\n            default:\n                return 50;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get defaultSummaryHeight(): number {\n        switch (this.displayDensity) {\n            case DisplayDensity.cosy:\n                return 30;\n            case DisplayDensity.compact:\n                return 24;\n            default:\n                return 36;\n        }\n    }\n\n    /**\n     * Returns the `IgxGridHeaderGroupComponent`'s minimum allowed width.\n     * @remarks\n     * Used internally for restricting header group component width.\n     * The values below depend on the header cell default right/left padding values.\n     */\n    get defaultHeaderGroupMinWidth(): number {\n        switch (this.displayDensity) {\n            case DisplayDensity.cosy:\n                return 32;\n            case DisplayDensity.compact:\n                return 24;\n            default:\n                return 48;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public paginatorClassName(): string {\n        switch (this.displayDensity) {\n            case DisplayDensity.cosy:\n                return 'igx-paginator--cosy';\n            case DisplayDensity.compact:\n                return 'igx-paginator--compact';\n            default:\n                return 'igx-paginator';\n        }\n    }\n\n    /**\n     * Gets the current width of the container for the pinned `IgxColumnComponent`s.\n     * @example\n     * ```typescript\n     * const pinnedWidth = this.grid.getPinnedWidth;\n     * ```\n     */\n    get pinnedWidth() {\n        if (!isNaN(this._pinnedWidth)) { return this._pinnedWidth; }\n        this._pinnedWidth = this.getPinnedWidth();\n        return this._pinnedWidth;\n    }\n\n    /**\n     * Gets the current width of the container for the unpinned `IgxColumnComponent`s.\n     * @example\n     * ```typescript\n     * const unpinnedWidth = this.grid.getUnpinnedWidth;\n     * ```\n     */\n    get unpinnedWidth() {\n        if (!isNaN(this._unpinnedWidth)) { return this._unpinnedWidth; }\n        this._unpinnedWidth = this.getUnpinnedWidth();\n        return this._unpinnedWidth;\n    }\n\n    /**\n     * @hidden @internal\n    */\n    get isHorizontalScrollHidden() {\n        const diff = this.unpinnedWidth - this.totalWidth;\n        return this.width === null || diff >= 0;\n    }\n\n    /**\n     * @hidden @internal\n     * Gets the combined width of the columns that are specific to the enabled grid features. They are fixed.\n     */\n    public featureColumnsWidth(expander?: ElementRef) {\n        if (Number.isNaN(this._headerFeaturesWidth)) {\n            const rowSelectArea = this.headerSelectorContainer ?\n                this.headerSelectorContainer.nativeElement.getBoundingClientRect().width : 0;\n            const rowDragArea = this.rowDraggable && this.headerDragContainer ?\n                this.headerDragContainer.nativeElement.getBoundingClientRect().width : 0;\n            const groupableArea = this.headerGroupContainer ?\n                this.headerGroupContainer.nativeElement.getBoundingClientRect().width : 0;\n            const expanderWidth = expander ? expander.nativeElement.getBoundingClientRect().width : 0;\n            this._headerFeaturesWidth = rowSelectArea + rowDragArea + groupableArea + expanderWidth;\n        }\n        return this._headerFeaturesWidth;\n    }\n\n    /**\n     * @hidden @internal\n    */\n    get summariesMargin() {\n        return this.featureColumnsWidth();\n    }\n\n    /**\n     * Gets an array of `IgxColumnComponent`s.\n     * @example\n     * ```typescript\n     * const colums = this.grid.columns.\n     * ```\n     */\n    get columns(): IgxColumnComponent[] {\n        return this._columns;\n    }\n\n    /**\n     * Gets an array of the pinned `IgxColumnComponent`s.\n     * @example\n     * ```typescript\n     * const pinnedColumns = this.grid.pinnedColumns.\n     * ```\n     */\n    get pinnedColumns(): IgxColumnComponent[] {\n        if (this._pinnedVisible.length) {\n            return this._pinnedVisible;\n        }\n        this._pinnedVisible = this._pinnedColumns.filter(col => !col.hidden);\n        return this._pinnedVisible;\n    }\n\n    /**\n     * Gets an array of unpinned `IgxColumnComponent`s.\n     * @example\n     * ```typescript\n     * const unpinnedColumns = this.grid.unpinnedColumns.\n     * ```\n     */\n    get unpinnedColumns(): IgxColumnComponent[] {\n        if (this._unpinnedVisible.length) {\n            return this._unpinnedVisible;\n        }\n        this._unpinnedVisible = this._unpinnedColumns.filter((col) => !col.hidden);\n        return this._unpinnedVisible;\n    }\n\n    /**\n     * Gets the `width` to be set on `IgxGridHeaderGroupComponent`.\n     */\n    public getHeaderGroupWidth(column: IgxColumnComponent): string {\n        if (this.hasColumnLayouts) {\n            return '';\n        }\n        const colWidth = column.width;\n        const minWidth = this.defaultHeaderGroupMinWidth;\n        const isPercentageWidth = colWidth && typeof colWidth === 'string' && colWidth.indexOf('%') !== -1;\n\n        if (!isPercentageWidth && parseInt(colWidth, 10) < minWidth) {\n            return minWidth + 'px';\n        }\n\n        return colWidth;\n    }\n\n    /**\n     * Returns the `IgxColumnComponent` by field name.\n     * @example\n     * ```typescript\n     * const myCol = this.grid1.getColumnByName(\"ID\");\n     * ```\n     * @param name\n    */\n    public getColumnByName(name: string): IgxColumnComponent {\n        return this.columnList.find((col) => col.field === name);\n    }\n\n    /**\n     * Returns the `IgxRowDirective` by index.\n     * @example\n     * ```typescript\n     * const myRow = this.grid1.getRowByIndex(1);\n     * ```\n     * @param index\n    */\n    public getRowByIndex(index: number): IgxRowDirective<IgxGridBaseDirective & GridType> {\n        return this.gridAPI.get_row_by_index(index);\n    }\n\n    /**\n     * Returns `IgxGridRowComponent` object by the specified primary key .\n     * @remarks\n     * Requires that the `primaryKey` property is set.\n     * @example\n     * ```typescript\n     * const myRow = this.grid1.getRowByKey(\"cell5\");\n     * ```\n     * @param keyValue\n    */\n    public getRowByKey(keyValue: any): IgxRowDirective<IgxGridBaseDirective & GridType> {\n        return this.gridAPI.get_row_by_key(keyValue);\n    }\n\n    /**\n     * Returns an array of visible `IgxColumnComponent`s.\n     * @example\n     * ```typescript\n     * const visibleColumns = this.grid.visibleColumns.\n     * ```\n     */\n    get visibleColumns(): IgxColumnComponent[] {\n        if (this._visibleColumns.length) {\n            return this._visibleColumns;\n        }\n        this._visibleColumns = this.columnList.filter(c => !c.hidden);\n        return this._visibleColumns;\n    }\n\n    /**\n     * Returns the `IgxGridCellComponent` that matches the conditions.\n     * @example\n     * ```typescript\n     * const myCell = this.grid1.getCellByColumn(2,\"UnitPrice\");\n     * ```\n     * @param rowIndex\n     * @param columnField\n    */\n    public getCellByColumn(rowIndex: number, columnField: string): IgxGridCellComponent {\n        const columnId = this.columnList.map((column) => column.field).indexOf(columnField);\n        if (columnId !== -1) {\n            return this.gridAPI.get_cell_by_index(rowIndex, columnId);\n        }\n    }\n\n    /**\n     * Returns an `IgxGridCellComponent` object by the specified primary key and column field.\n     * @remarks\n     * Requires that the primaryKey property is set.\n     * @example\n     * ```typescript\n     * grid.getCellByKey(1, 'index');\n     * ```\n     * @param rowSelector match any rowID\n     * @param columnField\n    */\n    public getCellByKey(rowSelector: any, columnField: string): IgxGridCellComponent {\n        return this.gridAPI.get_cell_by_key(rowSelector, columnField);\n    }\n\n    /**\n     * Gets the total number of pages.\n     * @example\n     * ```typescript\n     * const totalPages = this.grid.totalPages;\n     * ```\n     */\n    get totalPages(): number {\n        if (this.pagingState) {\n            return this.pagingState.metadata.countPages;\n        }\n        return -1;\n    }\n\n    /**\n     * Gets if the current page is the first page.\n     * @example\n     * ```typescript\n     * const firstPage = this.grid.isFirstPage;\n     * ```\n     */\n    get isFirstPage(): boolean {\n        return this.page === 0;\n    }\n\n    /**\n     * Goes to the next page, if the grid is not already at the last page.\n     * @example\n     * ```typescript\n     * this.grid1.nextPage();\n     * ```\n     */\n    public nextPage(): void {\n        if (!this.isLastPage) {\n            this.page += 1;\n        }\n    }\n\n    /**\n     * Goes to the previous page, if the grid is not already at the first page.\n     * @example\n     * ```typescript\n     * this.grid1.previousPage();\n     * ```\n     */\n    public previousPage(): void {\n        if (!this.isFirstPage) {\n            this.page -= 1;\n        }\n    }\n\n    /**\n     * Returns the total number of records.\n     * @remarks\n     * Only functions when paging is enabled.\n     * @example\n     * ```typescript\n     * const totalRecords = this.grid.totalRecords;\n     * ```\n     */\n    get totalRecords(): number {\n        if (this.pagingState) {\n            return this.pagingState.metadata.countRecords;\n        }\n    }\n\n    /**\n     * Returns if the current page is the last page.\n     * @example\n     * ```typescript\n     * const lastPage = this.grid.isLastPage;\n     * ```\n     */\n    get isLastPage(): boolean {\n        return this.page + 1 >= this.totalPages;\n    }\n\n    /**\n     * Returns the total width of the `IgxGridComponent`.\n     * @example\n     * ```typescript\n     * const gridWidth = this.grid.totalWidth;\n     * ```\n     */\n    get totalWidth(): number {\n        if (!isNaN(this._totalWidth)) { return this._totalWidth; }\n        // Take only top level columns\n        const cols = this.visibleColumns.filter(col => col.level === 0 && !col.pinned);\n        let totalWidth = 0;\n        let i = 0;\n        for (i; i < cols.length; i++) {\n            totalWidth += parseInt(cols[i].calcWidth, 10) || 0;\n        }\n        this._totalWidth = totalWidth;\n        return totalWidth;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    get showRowSelectors(): boolean {\n        return this.isRowSelectable  && this.hasVisibleColumns && !this.hideRowSelectors;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    get showDragIcons(): boolean {\n        return this.rowDraggable && this.columns.length > this.hiddenColumnsCount;\n    }\n\n    /**\n     * @hidden\n     */\n    protected _moveColumns(from: IgxColumnComponent, to: IgxColumnComponent, pos: DropPosition) {\n        const list = this.columnList.toArray();\n        const fromIndex = list.indexOf(from);\n        let toIndex = list.indexOf(to);\n\n        if (pos === DropPosition.BeforeDropTarget) {\n            toIndex--;\n            if (toIndex < 0) {\n                toIndex = 0;\n            }\n        }\n\n        if (pos === DropPosition.AfterDropTarget) {\n            toIndex++;\n        }\n\n        list.splice(toIndex, 0, ...list.splice(fromIndex, 1));\n        const newList = this._resetColumnList(list);\n        this.columnList.reset(newList);\n        this.columnList.notifyOnChanges();\n        this._columns = this.columnList.toArray();\n    }\n\n    /**\n     * @hidden\n     */\n    protected _resetColumnList(list?) {\n        if (!list) {\n            list = this.columnList.toArray();\n        }\n        let newList = [];\n        list.filter(c => c.level === 0).forEach(p => {\n            newList.push(p);\n            if (p.columnGroup) {\n                newList = newList.concat(p.allChildren);\n            }\n        });\n        return newList;\n    }\n\n    /**\n     * @hidden\n     */\n    protected _reorderColumns(from: IgxColumnComponent, to: IgxColumnComponent, position: DropPosition, columnCollection: any[]) {\n        let dropIndex = columnCollection.indexOf(to);\n\n        if (to.columnGroup) {\n            dropIndex += to.allChildren.length;\n        }\n\n        if (position === DropPosition.BeforeDropTarget) {\n            dropIndex--;\n        }\n\n        if (position === DropPosition.AfterDropTarget) {\n            dropIndex++;\n        }\n\n        columnCollection.splice(dropIndex, 0, ...columnCollection.splice(columnCollection.indexOf(from), 1));\n    }\n    /**\n     * @hidden\n     */\n    protected _moveChildColumns(parent: IgxColumnComponent, from: IgxColumnComponent, to: IgxColumnComponent, pos: DropPosition) {\n        const buffer = parent.children.toArray();\n        const fromIndex = buffer.indexOf(from);\n        let toIndex = buffer.indexOf(to);\n\n        if (pos === DropPosition.BeforeDropTarget) {\n            toIndex--;\n        }\n\n        if (pos === DropPosition.AfterDropTarget) {\n            toIndex++;\n        }\n\n        buffer.splice(toIndex, 0, ...buffer.splice(fromIndex, 1));\n        parent.children.reset(buffer);\n    }\n    /**\n     * Moves a column to the specified drop target.\n     * @example\n     * ```typescript\n     * grid.moveColumn(compName, persDetails);\n     * ```\n\t  */\n    public moveColumn(column: IgxColumnComponent, dropTarget: IgxColumnComponent, pos: DropPosition = DropPosition.None) {\n\n        let position = pos;\n        const fromIndex = column.visibleIndex;\n        const toIndex = dropTarget.visibleIndex;\n\n        if (pos === DropPosition.BeforeDropTarget && fromIndex < toIndex) {\n            position = DropPosition.BeforeDropTarget;\n        } else if (pos === DropPosition.AfterDropTarget && fromIndex > toIndex) {\n            position = DropPosition.AfterDropTarget;\n        } else {\n            position = DropPosition.None;\n        }\n\n\n        if ((column.level !== dropTarget.level) ||\n            (column.topLevelParent !== dropTarget.topLevelParent)) {\n            return;\n        }\n\n        this.endEdit(true);\n        if (column.level) {\n            this._moveChildColumns(column.parent, column, dropTarget, position);\n        }\n\n        if (dropTarget.pinned && column.pinned) {\n            this._reorderColumns(column, dropTarget, position, this._pinnedColumns);\n        }\n\n        if (dropTarget.pinned && !column.pinned) {\n            column.pin();\n            this._reorderColumns(column, dropTarget, position, this._pinnedColumns);\n\n        }\n\n        if (!dropTarget.pinned && column.pinned) {\n            column.unpin();\n            let list = [];\n\n            if (this.pinnedColumns.indexOf(column) === -1 && this.pinnedColumns.indexOf(dropTarget) === -1) {\n                list = this._unpinnedColumns;\n            } else {\n                list = this._pinnedColumns;\n            }\n\n            const fi = list.indexOf(column);\n            const ti = list.indexOf(dropTarget);\n\n            if (pos === DropPosition.BeforeDropTarget && fi < ti) {\n                position = DropPosition.BeforeDropTarget;\n            } else if (pos === DropPosition.AfterDropTarget && fi > ti) {\n                position = DropPosition.AfterDropTarget;\n            } else {\n                position = DropPosition.None;\n            }\n        }\n\n        if (!dropTarget.pinned) {\n            this._reorderColumns(column, dropTarget, position, this._unpinnedColumns);\n        }\n\n        this._moveColumns(column, dropTarget, position);\n        this.notifyChanges();\n        if (this.hasColumnLayouts) {\n            this.columns.filter(x => x.columnLayout).forEach(x => x.populateVisibleIndexes());\n        }\n\n        const args = {\n            source: column,\n            target: dropTarget\n        };\n\n        this.onColumnMovingEnd.emit(args);\n    }\n\n    /**\n     * Goes to the desired page index.\n     * @example\n     * ```typescript\n     * this.grid1.paginate(1);\n     * ```\n     * @param val\n    */\n    public paginate(val: number): void {\n        if (val < 0 || val > this.totalPages - 1) {\n            return;\n        }\n\n        this.page = val;\n    }\n\n    /**\n     * Manually marks the `IgxGridComponent` for change detection.\n     * @example\n     * ```typescript\n     * this.grid1.markForCheck();\n     * ```\n     */\n    public markForCheck() {\n        this.cdr.detectChanges();\n    }\n\n    /**\n     * Creates a new `IgxGridRowComponent` and adds the data record to the end of the data source.\n     * @example\n     * ```typescript\n     * this.grid1.addRow(record);\n     * ```\n     * @param data\n    */\n    public addRow(data: any): void {\n        // commit pending states prior to adding a row\n        this.endEdit(true);\n        this.gridAPI.addRowToData(data);\n\n        this.onRowAdded.emit({ data });\n        this._pipeTrigger++;\n        this.notifyChanges();\n    }\n\n    /**\n     * Removes the `IgxGridRowComponent` and the corresponding data record by primary key.\n     * @remarks\n     * Requires that the `primaryKey` property is set.\n     * The method accept rowSelector as a parameter, which is the rowID.\n     * @example\n     * ```typescript\n     * this.grid1.deleteRow(0);\n     * ```\n     * @param rowSelector\n    */\n    public deleteRow(rowSelector: any): void {\n        if (this.primaryKey !== undefined && this.primaryKey !== null) {\n            this.deleteRowById(rowSelector);\n        }\n    }\n\n    /** @hidden */\n    public deleteRowById(rowId: any) {\n        this.gridAPI.deleteRowById(rowId);\n    }\n\n    /**\n     * @hidden\n     */\n    protected deleteRowFromData(rowID: any, index: number) {\n        //  if there is a row (index !== 0) delete it\n        //  if there is a row in ADD or UPDATE state change it's state to DELETE\n        if (index !== -1) {\n            if (this.transactions.enabled) {\n                const transaction: Transaction = { id: rowID, type: TransactionType.DELETE, newValue: null };\n                this.transactions.add(transaction, this.data[index]);\n            } else {\n                this.data.splice(index, 1);\n            }\n        } else {\n            const state: State = this.transactions.getState(rowID);\n            this.transactions.add({ id: rowID, type: TransactionType.DELETE, newValue: null }, state && state.recordRef);\n        }\n    }\n\n    /**\n     * Updates the `IgxGridRowComponent` and the corresponding data record by primary key.\n     * @remarks\n     * Requires that the `primaryKey` property is set.\n     * @example\n     * ```typescript\n     * this.gridWithPK.updateCell('Updated', 1, 'ProductName');\n     * ```\n     * @param value the new value which is to be set.\n     * @param rowSelector corresponds to rowID.\n     * @param column corresponds to column field.\n    */\n    public updateCell(value: any, rowSelector: any, column: string): void {\n        if (this.isDefined(this.primaryKey)) {\n            const col = this.columnList.toArray().find(c => c.field === column);\n            if (col) {\n                // Simplify\n                const rowData = this.gridAPI.getRowData(rowSelector);\n                const index = this.gridAPI.get_row_index_in_data(rowSelector);\n                // If row passed is invalid\n                if (index < 0) {\n                    return;\n                }\n                const id = {\n                    rowID: rowSelector,\n                    columnID: col.index,\n                    rowIndex: index\n                };\n\n                const cell = new IgxCell(id, index, col, rowData[col.field], rowData[col.field], rowData);\n                const args = this.gridAPI.update_cell(cell, value);\n\n                if (this.crudService.cell && this.crudService.sameCell(cell)) {\n                    if (args.cancel) {\n                        return;\n                    }\n                    this.gridAPI.escape_editMode();\n                }\n                this.cdr.detectChanges();\n            }\n        }\n    }\n\n    /**\n     * Updates the `IgxGridRowComponent`\n     * @remarks\n     * The row is specified by\n     * rowSelector parameter and the data source record with the passed value.\n     * This method will apply requested update only if primary key is specified in the grid.\n     * @example\n     * ```typescript\n     * grid.updateRow({\n     *       ProductID: 1, ProductName: 'Spearmint', InStock: true, UnitsInStock: 1, OrderDate: new Date('2005-03-21')\n     *   }, 1);\n     * ```\n     * @param value\n     * @param rowSelector correspond to rowID\n    */\n    public updateRow(value: any, rowSelector: any): void {\n        if (this.isDefined(this.primaryKey)) {\n            const editableCell = this.crudService.cell;\n            if (editableCell && editableCell.id.rowID === rowSelector) {\n                this.gridAPI.escape_editMode();\n            }\n            const row = new IgxRow(rowSelector, -1, this.gridAPI.getRowData(rowSelector));\n            this.gridAPI.update_row(row, value);\n\n            // TODO: fix for #5934 and probably break for #5763\n            // consider adding of third optional boolean parameter in updateRow.\n            // If developer set this parameter to true we should call notifyChanges(true), and\n            // vise-versa if developer set it to false we should call notifyChanges(false).\n            // The parameter should default to false\n            this.notifyChanges();\n        }\n    }\n\n    /**\n     * Sort a single `IgxColumnComponent`.\n     * @remarks\n     * Sort the `IgxGridComponent`'s `IgxColumnComponent` based on the provided array of sorting expressions.\n     * @example\n     * ```typescript\n     * this.grid.sort({ fieldName: name, dir: SortingDirection.Asc, ignoreCase: false });\n     * ```\n     */\n    public sort(expression: ISortingExpression | Array<ISortingExpression>): void {\n        this.endEdit(false);\n        if (expression instanceof Array) {\n            this.gridAPI.sort_multiple(expression);\n        } else {\n            this.gridAPI.sort(expression);\n        }\n        requestAnimationFrame(() => this.onSortingDone.emit(expression));\n    }\n\n    /**\n     * Filters a single `IgxColumnComponent`.\n     * @example\n     * ```typescript\n     * public filter(term) {\n     *      this.grid.filter(\"ProductName\", term, IgxStringFilteringOperand.instance().condition(\"contains\"));\n     * }\n     * ```\n     * @param name\n     * @param value\n     * @param conditionOrExpressionTree\n     * @param ignoreCase\n    */\n    public filter(name: string, value: any, conditionOrExpressionTree?: IFilteringOperation | IFilteringExpressionsTree,\n        ignoreCase?: boolean) {\n        this.filteringService.filter(name, value, conditionOrExpressionTree, ignoreCase);\n    }\n\n    /**\n     * Filters all the `IgxColumnComponent` in the `IgxGridComponent` with the same condition.\n     * @example\n     * ```typescript\n     * grid.filterGlobal('some', IgxStringFilteringOperand.instance().condition('contains'));\n     * ```\n     * @param value\n     * @param condition\n     * @param ignoreCase\n    */\n    public filterGlobal(value: any, condition, ignoreCase?) {\n        this.filteringService.filterGlobal(value, condition, ignoreCase);\n    }\n\n    /**\n     * Enables summaries for the specified column and applies your customSummary.\n     * @remarks\n     * If you do not provide the customSummary, then the default summary for the column data type will be applied.\n     * @example\n     * ```typescript\n     * grid.enableSummaries([{ fieldName: 'ProductName' }, { fieldName: 'ID' }]);\n     * ```\n     * Enable summaries for the listed columns.\n     * @example\n     * ```typescript\n     * grid.enableSummaries('ProductName');\n     * ```\n     * @param rest\n    */\n    public enableSummaries(...rest) {\n        if (rest.length === 1 && Array.isArray(rest[0])) {\n            this._multipleSummaries(rest[0], true);\n        } else {\n            this._summaries(rest[0], true, rest[1]);\n        }\n    }\n\n    /**\n     * Disable summaries for the specified column.\n     * @example\n     * ```typescript\n     * grid.disableSummaries('ProductName');\n     * ```\n     *@remarks\n     * Disable summaries for the listed columns.\n     *@example\n     * ```typescript\n     * grid.disableSummaries([{ fieldName: 'ProductName' }]);\n     * ```\n     */\n    public disableSummaries(...rest) {\n        if (rest.length === 1 && Array.isArray(rest[0])) {\n            this._disableMultipleSummaries(rest[0]);\n        } else {\n            this._summaries(rest[0], false);\n        }\n    }\n\n    /**\n     * If name is provided, clears the filtering state of the corresponding `IgxColumnComponent`.\n     *@remarks\n     Otherwise clears the filtering state of all `IgxColumnComponent`s.\n     *@example\n     * ```typescript\n     * this.grid.clearFilter();\n     * ```\n     * @param name\n    */\n    public clearFilter(name?: string) {\n        this.filteringService.clearFilter(name);\n    }\n\n    /**\n     * If name is provided, clears the sorting state of the corresponding `IgxColumnComponent`.\n     * @remarks\n     * otherwise clears the sorting state of all `IgxColumnComponent`.\n     * @example\n     * ```typescript\n     * this.grid.clearSort();\n     * ```\n     * @param name\n    */\n    public clearSort(name?: string) {\n        if (!name) {\n            this.sortingExpressions = [];\n            return;\n        }\n        if (!this.gridAPI.get_column_by_name(name)) {\n            return;\n        }\n        this.gridAPI.clear_sort(name);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public refreshGridState(args?) {\n        this.endEdit(true);\n        this.selectionService.clearHeaderCBState();\n        this.summaryService.clearSummaryCache(args);\n    }\n\n    // TODO: We have return values here. Move them to event args ??\n\n    /**\n     * Pins a column by field name.\n     * @remarks\n     * Returns whether the operation is successful.\n     * @example\n     * ```typescript\n     * this.grid.pinColumn(\"ID\");\n     * ```\n     * @param columnName\n     * @param index\n    */\n    public pinColumn(columnName: string | IgxColumnComponent, index?): boolean {\n        const col = columnName instanceof IgxColumnComponent ? columnName : this.getColumnByName(columnName);\n        return col.pin(index);\n    }\n\n    /**\n     * Unpins a column by field name. Returns whether the operation is successful.\n     * @example\n     * ```typescript\n     * this.grid.pinColumn(\"ID\");\n     * ```\n     * @param columnName\n     * @param index\n    */\n    public unpinColumn(columnName: string | IgxColumnComponent, index?): boolean {\n        const col = columnName instanceof IgxColumnComponent ? columnName : this.getColumnByName(columnName);\n        return col.unpin(index);\n    }\n\n\n    /**\n     * Recalculates grid width/height dimensions.\n     * @remarks\n     * Should be run when changing DOM elements dimentions manually that affect the grid's size.\n     * @example\n     * ```typescript\n     * this.grid.reflow();\n     * ```\n     */\n    public reflow() {\n        this.calculateGridSizes();\n    }\n\n    /**\n     * Finds the next occurrence of a given string in the grid and scrolls to the cell if it isn't visible.\n     * @remarks\n     * Returns how many times the grid contains the string.\n     * @example\n     * ```typescript\n     * this.grid.findNext(\"financial\");\n     * ```\n     * @param text the string to search.\n     * @param caseSensitive optionally, if the search should be case sensitive (defaults to false).\n     * @param exactMatch optionally, if the text should match the entire value  (defaults to false).\n    */\n    public findNext(text: string, caseSensitive?: boolean, exactMatch?: boolean): number {\n        return this.find(text, 1, caseSensitive, exactMatch);\n    }\n\n    /**\n     * Finds the previous occurrence of a given string in the grid and scrolls to the cell if it isn't visible.\n     * @remarks\n     * Returns how many times the grid contains the string.\n     * @example\n     * ```typescript\n     * this.grid.findPrev(\"financial\");\n     * ```\n     * @param text the string to search.\n     * @param caseSensitive optionally, if the search should be case sensitive (defaults to false).\n     * @param exactMatch optionally, if the text should match the entire value (defaults to false).\n    */\n    public findPrev(text: string, caseSensitive?: boolean, exactMatch?: boolean): number {\n        return this.find(text, -1, caseSensitive, exactMatch);\n    }\n\n    /**\n     * Reapplies the existing search.\n     * @remarks\n     * Returns how many times the grid contains the last search.\n     * @example\n     * ```typescript\n     * this.grid.refreshSearch();\n     * ```\n     * @param updateActiveInfo\n    */\n    public refreshSearch(updateActiveInfo?: boolean): number {\n        if (this.lastSearchInfo.searchText) {\n            this.rebuildMatchCache();\n\n            if (updateActiveInfo) {\n                const activeInfo = IgxTextHighlightDirective.highlightGroupsMap.get(this.id);\n                this.lastSearchInfo.matchInfoCache.forEach((match, i) => {\n                    if (match.column === activeInfo.column &&\n                        match.row === activeInfo.row &&\n                        match.index === activeInfo.index) {\n                        this.lastSearchInfo.activeMatchIndex = i;\n                    }\n                });\n            }\n\n            return this.find(this.lastSearchInfo.searchText, 0, this.lastSearchInfo.caseSensitive, this.lastSearchInfo.exactMatch, false);\n        } else {\n            return 0;\n        }\n    }\n\n    /**\n     * Removes all the highlights in the cell.\n     * @example\n     * ```typescript\n     * this.grid.clearSearch();\n     * ```\n     */\n    public clearSearch() {\n        this.lastSearchInfo = {\n            searchText: '',\n            caseSensitive: false,\n            exactMatch: false,\n            activeMatchIndex: 0,\n            matchInfoCache: []\n        };\n\n        this.rowList.forEach((row) => {\n            if (row.cells) {\n                row.cells.forEach((c) => {\n                    c.clearHighlight();\n                });\n            }\n        });\n    }\n\n    /**\n     * Returns if the `IgxGridComponent` has sortable columns.\n     * @example\n     * ```typescript\n     * const sortableGrid = this.grid.hasSortableColumns;\n     * ```\n     */\n    get hasSortableColumns(): boolean {\n        return this.columnList.some((col) => col.sortable);\n    }\n\n    /**\n     * Returns if the `IgxGridComponent` has editable columns.\n     * @example\n     * ```typescript\n     * const editableGrid = this.grid.hasEditableColumns;\n     * ```\n     */\n    get hasEditableColumns(): boolean {\n        return this.columnList.some((col) => col.editable);\n    }\n\n    /**\n     * Returns if the `IgxGridComponent` has fiterable columns.\n     * @example\n     * ```typescript\n     * const filterableGrid = this.grid.hasFilterableColumns;\n     * ```\n     */\n    get hasFilterableColumns(): boolean {\n        return this.columnList.some((col) => col.filterable);\n    }\n\n    /**\n     * Returns if the `IgxGridComponent` has summarized columns.\n     * @example\n     * ```typescript\n     * const summarizedGrid = this.grid.hasSummarizedColumns;\n     * ```\n     */\n    get hasSummarizedColumns(): boolean {\n        return this.summaryService.hasSummarizedColumns;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get rootSummariesEnabled(): boolean {\n        return this.summaryCalculationMode !== GridSummaryCalculationMode.childLevelsOnly;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get hasVisibleColumns(): boolean {\n        if (this._hasVisibleColumns === undefined) {\n            return this.columnList ? this.columnList.some(c => !c.hidden) : false;\n        }\n        return this._hasVisibleColumns;\n    }\n\n    set hasVisibleColumns(value) {\n        this._hasVisibleColumns = value;\n    }\n    /**\n     * Returns if the `IgxGridComponent` has moveable columns.\n     * @example\n     * ```typescript\n     * const movableGrid = this.grid.hasMovableColumns;\n     * ```\n     */\n    get hasMovableColumns(): boolean {\n        return this.columnList && this.columnList.some((col) => col.movable);\n    }\n\n    /**\n     * Returns if the `IgxGridComponent` has column groups.\n     * @example\n     * ```typescript\n     * const groupGrid = this.grid.hasColumnGroups;\n     * ```\n     */\n    get hasColumnGroups(): boolean {\n        return this._columnGroups;\n    }\n    /**\n     * Returns if the `IgxGridComponent` has column layouts for multi-row layout definition.\n     * @example\n     * ```typescript\n     * const layoutGrid = this.grid.hasColumnLayouts;\n     * ```\n     */\n    public get hasColumnLayouts() {\n        return !!this.columnList.some(col => col.columnLayout);\n    }\n\n    /**\n     * Returns an array of the selected `IgxGridCellComponent`s.\n     * @example\n     * ```typescript\n     * const selectedCells = this.grid.selectedCells;\n     * ```\n     */\n    get selectedCells(): IgxGridCellComponent[] | any[] {\n        if (this.dataRowList) {\n            return this.dataRowList.map((row) => row.cells.filter((cell) => cell.selected))\n                .reduce((a, b) => a.concat(b), []);\n        }\n        return [];\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get multiRowLayoutRowSize() {\n        return this._multiRowLayoutRowSize;\n    }\n\n    /**\n     * @hidden\n     */\n    protected get rowBasedHeight() {\n        return this.dataLength * this.rowHeight;\n    }\n\n    /**\n     * @hidden\n     */\n    protected get isPercentWidth() {\n        return this.width && this.width.indexOf('%') !== -1;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get isPercentHeight() {\n        return this._height && this._height.indexOf('%') !== -1;\n    }\n\n    /**\n     * @hidden\n     * Sets columns defaultWidth property\n     */\n    protected _derivePossibleWidth() {\n        if (!this.columnWidthSetByUser) {\n            this._columnWidth = this.width !== null ? this.getPossibleColumnWidth() : MINIMUM_COLUMN_WIDTH + 'px';\n        }\n        this.columnList.forEach((column: IgxColumnComponent) => {\n            if (this.hasColumnLayouts && parseInt(this._columnWidth, 10)) {\n                const columnWidthCombined = parseInt(this._columnWidth, 10) * (column.colEnd ? column.colEnd - column.colStart : 1);\n                column.defaultWidth = columnWidthCombined + 'px';\n            } else {\n                column.defaultWidth = this._columnWidth;\n                column.resetCaches();\n            }\n        });\n        this.resetCachedWidths();\n    }\n\n    /**\n     * @hidden\n     */\n    protected get defaultTargetBodyHeight(): number {\n        const allItems = this.dataLength;\n        return this.renderedRowHeight * Math.min(this._defaultTargetRecordNumber,\n            this.paging ? Math.min(allItems, this.perPage) : allItems);\n    }\n\n    /**\n     * @hidden @internal\n     * The rowHeight input is bound to min-height css prop of rows that adds a 1px border in all cases\n     */\n    public get renderedRowHeight(): number {\n        return this.rowHeight + 1;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected calcGridHeadRow() {\n        if (this.maxLevelHeaderDepth) {\n            this._baseFontSize = parseFloat(getComputedStyle(this.document.documentElement).getPropertyValue('font-size'));\n            let minSize = (this.maxLevelHeaderDepth + 1) * this.defaultRowHeight / this._baseFontSize;\n            if (this._allowFiltering && this._filterMode === FilterMode.quickFilter) {\n                minSize += (FILTER_ROW_HEIGHT + 1) / this._baseFontSize;\n            }\n            this.theadRow.nativeElement.style.minHeight = `${minSize}rem`;\n        }\n    }\n\n    /**\n     * @hidden\n     * Sets TBODY height i.e. this.calcHeight\n     */\n    protected calculateGridHeight() {\n        this.calcGridHeadRow();\n        this.summariesHeight = 0;\n        if (this.hasSummarizedColumns && this.rootSummariesEnabled) {\n            this.summariesHeight = this.summaryService.calcMaxSummaryHeight();\n        }\n\n        this.calcHeight = this._calculateGridBodyHeight();\n    }\n\n    /**\n     * @hidden\n     */\n    protected getGroupAreaHeight(): number {\n        return 0;\n    }\n\n    /**\n     * @hidden\n     */\n    protected getToolbarHeight(): number {\n        let toolbarHeight = 0;\n        if (this.showToolbar && this.toolbarHtml != null) {\n            toolbarHeight = this.toolbarHtml.nativeElement.firstElementChild ?\n                this.toolbarHtml.nativeElement.offsetHeight : 0;\n        }\n        return toolbarHeight;\n    }\n\n    /**\n     * @hidden\n     */\n    protected getPagingHeight(): number {\n        let pagingHeight = 0;\n        if (this.paging && this.footer) {\n            pagingHeight = this.footer.nativeElement.firstElementChild ?\n                this.footer.nativeElement.offsetHeight : 0;\n        }\n        return pagingHeight;\n    }\n\n    /**\n     * @hidden\n     */\n    protected getFilterCellHeight(): number {\n        const headerGroupNativeEl = (this.headerGroupsList.length !== 0) ?\n                                        this.headerGroupsList[0].element.nativeElement : null;\n        const filterCellNativeEl = (headerGroupNativeEl) ?\n                                    headerGroupNativeEl.querySelector('igx-grid-filtering-cell') : null;\n        return (filterCellNativeEl) ? filterCellNativeEl.offsetHeight : 0;\n    }\n\n    /**\n     * @hidden\n     */\n    protected _calculateGridBodyHeight(): number {\n        if (!this._height) {\n            return null;\n        }\n\n        const actualTheadRow = (!this.allowFiltering || (this.allowFiltering && this.filterMode !== FilterMode.quickFilter)) ?\n                                 this.theadRow.nativeElement.offsetHeight - this.getFilterCellHeight() :\n                                 this.theadRow.nativeElement.offsetHeight;\n        const footerHeight = this.summariesHeight || this.tfoot.nativeElement.offsetHeight - this.tfoot.nativeElement.clientHeight;\n        const toolbarHeight = this.getToolbarHeight();\n        const pagingHeight = this.getPagingHeight();\n        const groupAreaHeight = this.getGroupAreaHeight();\n        const renderedHeight = toolbarHeight + actualTheadRow +\n            footerHeight + pagingHeight + groupAreaHeight +\n            this.scr.nativeElement.clientHeight;\n\n        const computed = this.document.defaultView.getComputedStyle(this.nativeElement).getPropertyValue('height');\n        let gridHeight = 0;\n\n        if (this.isPercentHeight) {\n            const autoSize = this._shouldAutoSize(renderedHeight);\n            if (autoSize || computed.indexOf('%') !== -1) {\n                const bodyHeight = this.getDataBasedBodyHeight();\n                return bodyHeight > 0 ? bodyHeight : null;\n            }\n            gridHeight = parseInt(computed, 10);\n        } else {\n            gridHeight = parseInt(this._height, 10);\n        }\n        const height = Math.abs(gridHeight - renderedHeight);\n\n        if (height === 0 || isNaN(gridHeight)) {\n            const bodyHeight = this.defaultTargetBodyHeight;\n            return bodyHeight > 0 ? bodyHeight : null;\n        }\n        return height;\n    }\n\n    protected checkContainerSizeChange() {\n        const origHeight = this.nativeElement.parentElement.offsetHeight;\n        this.nativeElement.style.display = 'none';\n        const height = this.nativeElement.parentElement.offsetHeight;\n        this.nativeElement.style.display = '';\n        return origHeight !== height;\n    }\n\n    protected _shouldAutoSize(renderedHeight) {\n        this.tbody.nativeElement.style.display = 'none';\n        let res = !this.nativeElement.parentElement ||\n        this.nativeElement.parentElement.clientHeight === 0 ||\n        this.nativeElement.parentElement.clientHeight === renderedHeight;\n        if (!isChromium()) {\n            // If grid causes the parent container to extend (for example when container is flex)\n            // we should always auto-size since the actual size of the container will continuously change as the grid renders elements.\n           res = this.checkContainerSizeChange();\n        }\n        this.tbody.nativeElement.style.display = '';\n        return res;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get outerWidth() {\n        return this.hasVerticalScroll() ? this.calcWidth + this.scrollWidth : this.calcWidth;\n    }\n\n    /**\n     * @hidden @internal\n     * Gets the visible content height that includes header + tbody + footer.\n     */\n    public getVisibleContentHeight() {\n        let height = this.theadRow.nativeElement.clientHeight + this.tbody.nativeElement.clientHeight;\n        if (this.hasSummarizedColumns) {\n            height += this.tfoot.nativeElement.clientHeight;\n        }\n        return height;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public getPossibleColumnWidth(baseWidth: number = null) {\n        let computedWidth;\n        if (baseWidth !== null) {\n            computedWidth = baseWidth;\n        } else {\n            computedWidth = this.calcWidth ||\n                parseInt(this.document.defaultView.getComputedStyle(this.nativeElement).getPropertyValue('width'), 10);\n        }\n\n        computedWidth -= this.featureColumnsWidth();\n\n        const visibleChildColumns = this.visibleColumns.filter(c => !c.columnGroup);\n\n\n        // Column layouts related\n        let visibleCols = [];\n        const columnBlocks = this.visibleColumns.filter(c => c.columnGroup);\n        const colsPerBlock = columnBlocks.map(block => block.getInitialChildColumnSizes(block.children));\n        const combinedBlocksSize = colsPerBlock.reduce((acc, item) => acc + item.length, 0);\n        colsPerBlock.forEach(blockCols => visibleCols = visibleCols.concat(blockCols));\n        //\n\n        const columnsWithSetWidths = this.hasColumnLayouts ?\n            visibleCols.filter(c => c.widthSetByUser) :\n            visibleChildColumns.filter(c => c.widthSetByUser);\n\n        const columnsToSize = this.hasColumnLayouts ?\n            combinedBlocksSize - columnsWithSetWidths.length :\n            visibleChildColumns.length - columnsWithSetWidths.length;\n        const sumExistingWidths = columnsWithSetWidths\n            .reduce((prev, curr) => {\n                const colWidth = curr.width;\n                const widthValue = parseInt(colWidth, 10);\n                const currWidth = colWidth && typeof colWidth === 'string' && colWidth.indexOf('%') !== -1 ?\n                    widthValue / 100 * computedWidth :\n                    widthValue;\n                return prev + currWidth;\n            }, 0);\n\n        // When all columns are hidden, return 0px width\n        if (!sumExistingWidths && !columnsToSize) {\n            return '0px';\n        }\n\n        const columnWidth = Math.floor(!Number.isFinite(sumExistingWidths) ?\n            Math.max(computedWidth / columnsToSize, MINIMUM_COLUMN_WIDTH) :\n            Math.max((computedWidth - sumExistingWidths) / columnsToSize, MINIMUM_COLUMN_WIDTH));\n\n            return columnWidth + 'px';\n        }\n\n    /**\n     * @hidden\n     * Sets grid width i.e. this.calcWidth\n     */\n    protected calculateGridWidth() {\n        let width;\n        const computed = this.document.defaultView.getComputedStyle(this.nativeElement).getPropertyValue('width');\n\n        if (this.isPercentWidth) {\n            /* width in %*/\n            width = computed.indexOf('%') === -1 ? parseInt(computed, 10) : null;\n        } else {\n            width = parseInt(this.width, 10);\n        }\n\n        if (!width && this.nativeElement) {\n            width = this.nativeElement.offsetWidth;\n        }\n\n\n        if (this.width === null || !width) {\n            width = this.getColumnWidthSum();\n        }\n\n        if (this.hasVerticalScroll() && this.width !== null) {\n            width -= this.scrollWidth;\n        }\n        if ((Number.isFinite(width) || width === null) && width !== this.calcWidth) {\n            this.calcWidth = width;\n        }\n        this._derivePossibleWidth();\n    }\n\n    private getColumnWidthSum(): number {\n        let colSum = 0;\n        const  cols = this.hasColumnLayouts ?\n         this.visibleColumns.filter(x => x.columnLayout) : this.visibleColumns.filter(x => !x.columnGroup);\n        cols.forEach((item) => {\n            const isWidthInPercent = item.width && typeof item.width === 'string' && item.width.indexOf('%') !== -1;\n            if (isWidthInPercent) {\n                item.width = item.calcWidth || MINIMUM_COLUMN_WIDTH + 'px';\n            }\n            colSum +=  parseInt((item.width || item.defaultWidth), 10) || MINIMUM_COLUMN_WIDTH;\n        });\n        if (!colSum) {\n            return null;\n        }\n        this.cdr.detectChanges();\n        colSum += this.featureColumnsWidth();\n        return colSum;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public hasVerticalScroll() {\n        if (this._init) { return false; }\n        const isScrollable = this.verticalScrollContainer ? this.verticalScrollContainer.isScrollable() : false;\n        return !!(this.calcWidth && this.dataView &&\n            this.dataView.length > 0 &&\n            isScrollable);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    protected getDataBasedBodyHeight(): number {\n        return !this.data || (this.data.length < this._defaultTargetRecordNumber) ?\n            0 : this.defaultTargetBodyHeight;\n    }\n\n    /**\n     * @hidden\n     */\n    protected onColumnsChanged(change: QueryList<IgxColumnComponent>) {\n        const diff = this.columnListDiffer.diff(change);\n        if (this.autoGenerate && this.columnList.length === 0 && this._autoGeneratedCols.length > 0) {\n            // In Ivy if there are nested conditional templates the content children are re-evaluated\n            // hence autogenerated columns are cleared and need to be reset.\n            this.columnList.reset(this._autoGeneratedCols);\n            return;\n        }\n        if (diff) {\n            let added = false;\n            let removed = false;\n\n            this.initColumns(this.columnList);\n\n\n            diff.forEachAddedItem((record: IterableChangeRecord<IgxColumnComponent>) => {\n                this.onColumnInit.emit(record.item);\n                added = true;\n            });\n\n            diff.forEachRemovedItem((record: IterableChangeRecord<IgxColumnComponent | IgxColumnGroupComponent>) => {\n                const isColumnGroup = record.item instanceof IgxColumnGroupComponent;\n                if (!isColumnGroup) {\n                    // Clear Grouping\n                    this.gridAPI.clear_groupby(record.item.field);\n\n                    // Clear Filtering\n                    this.gridAPI.clear_filter(record.item.field);\n\n                    // Close filter row\n                    if ( this.filteringService.isFilterRowVisible\n                        && this.filteringService.filteredColumn\n                        && this.filteringService.filteredColumn.field === record.item.field) {\n                        this.filteringRow.close();\n                    }\n\n                    // Clear Sorting\n                    this.gridAPI.clear_sort(record.item.field);\n                }\n                removed = true;\n            });\n\n            this.resetCaches();\n\n            if (added || removed) {\n                this.summaryService.clearSummaryCache();\n                Promise.resolve().then(() => {\n                    // `onColumnsChanged` can be executed midway a current detectChange cycle and markForCheck will be ignored then.\n                    // This ensures that we will wait for the current cycle to end so we can trigger a new one and ngDoCheck to fire.\n                    this.notifyChanges(true);\n                });\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected calculateGridSizes(recalcFeatureWidth = true) {\n        /*\n            TODO: (R.K.) This layered lasagne should be refactored\n            ASAP. The reason I have to reset the caches so many times is because\n            after teach `detectChanges` call they are filled with invalid\n            state. Of course all of this happens midway through the grid\n            sizing process which of course, uses values from the caches, thus resulting\n            in a broken layout.\n        */\n        this.resetCaches(recalcFeatureWidth);\n        this.cdr.detectChanges();\n        const hasScroll = this.hasVerticalScroll();\n        this.calculateGridWidth();\n        this.resetCaches(recalcFeatureWidth);\n        this.cdr.detectChanges();\n        this.calculateGridHeight();\n\n        if (this.rowEditable) {\n            this.repositionRowEditingOverlay(this.rowInEditMode);\n        }\n\n        if (this.filteringService.isFilterRowVisible) {\n            this.filteringRow.resetChipsArea();\n        }\n\n        this.cdr.detectChanges();\n        // in case scrollbar has appeared recalc to size correctly.\n        if (hasScroll !== this.hasVerticalScroll()) {\n            this.calculateGridWidth();\n            this.cdr.detectChanges();\n        }\n        if (this.zone.isStable) {\n            this.zone.run(() => {\n                this._applyWidthHostBinding();\n                this.cdr.detectChanges();\n            });\n        } else {\n            this.zone.onStable.pipe(first()).subscribe(() => {\n                this.zone.run(() => {\n                    this._applyWidthHostBinding();\n                });\n            });\n        }\n        this.resetCaches(recalcFeatureWidth);\n    }\n\n    private _applyWidthHostBinding() {\n        let width = this._width;\n        if (width === null) {\n            let currentWidth = this.calcWidth;\n            if (this.hasVerticalScroll()) {\n                currentWidth += this.scrollWidth;\n            }\n            width = currentWidth + 'px';\n            this.resetCaches();\n        }\n        this._hostWidth = width;\n        this.cdr.markForCheck();\n    }\n\n    /**\n     * Gets calculated width of the pinned area.\n     * @example\n     * ```typescript\n     * const pinnedWidth = this.grid.getPinnedWidth();\n     * ```\n     * @param takeHidden If we should take into account the hidden columns in the pinned area.\n    */\n    public getPinnedWidth(takeHidden = false) {\n        const fc = takeHidden ? this._pinnedColumns : this.pinnedColumns;\n        let sum = 0;\n        for (const col of fc) {\n            if (col.level === 0) {\n                sum += parseInt(col.calcWidth, 10);\n            }\n        }\n        sum += this.featureColumnsWidth();\n\n        return sum;\n    }\n\n    /**\n     * @hidden\n     * Gets calculated width of the unpinned area\n     * @param takeHidden If we should take into account the hidden columns in the pinned area.\n    */\n    protected getUnpinnedWidth(takeHidden = false) {\n        let width = this.isPercentWidth ?\n            this.calcWidth :\n            parseInt(this.width, 10) || parseInt(this.hostWidth, 10) || this.calcWidth;\n        if (this.hasVerticalScroll() && !this.isPercentWidth) {\n            width -= this.scrollWidth;\n        }\n        return width - this.getPinnedWidth(takeHidden);\n    }\n\n    /**\n     * @hidden\n     */\n    protected _summaries(fieldName: string, hasSummary: boolean, summaryOperand?: any) {\n        const column = this.gridAPI.get_column_by_name(fieldName);\n        if (column) {\n            column.hasSummary = hasSummary;\n            if (summaryOperand) {\n                if (this.rootSummariesEnabled) { this.summaryService.retriggerRootPipe++; }\n                column.summaries = summaryOperand;\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected _multipleSummaries(expressions: ISummaryExpression[], hasSummary: boolean) {\n        expressions.forEach((element) => {\n            this._summaries(element.fieldName, hasSummary, element.customSummary);\n        });\n    }\n    /**\n     * @hidden\n     */\n    protected _disableMultipleSummaries(expressions) {\n        expressions.forEach((column) => {\n            const columnName = column && column.fieldName ? column.fieldName : column;\n            this._summaries(columnName, false);\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    protected resolveDataTypes(rec) {\n        if (typeof rec === 'number') {\n            return DataType.Number;\n        } else if (typeof rec === 'boolean') {\n            return DataType.Boolean;\n        } else if (typeof rec === 'object' && rec instanceof Date) {\n            return DataType.Date;\n        }\n        return DataType.String;\n    }\n\n    private getScrollWidth() {\n        const div = document.createElement('div');\n        const style = div.style;\n        style.width = '100px';\n        style.height = '100px';\n        style.position = 'absolute';\n        style.top = '-10000px';\n        style.top = '-10000px';\n        style.overflow = 'scroll';\n        document.body.appendChild(div);\n        const scrollWidth = div.offsetWidth - div.clientWidth;\n        document.body.removeChild(div);\n        return scrollWidth;\n    }\n\n    /**\n     * @hidden\n     */\n    protected autogenerateColumns() {\n        const data = this.gridAPI.get_data();\n        const factory = this.resolver.resolveComponentFactory(IgxColumnComponent);\n        const fields = this.generateDataFields(data);\n        const columns = [];\n\n        fields.forEach((field) => {\n            const ref = factory.create(this.viewRef.injector);\n            ref.instance.field = field;\n            ref.instance.dataType = this.resolveDataTypes(data[0][field]);\n            ref.changeDetectorRef.detectChanges();\n            columns.push(ref.instance);\n        });\n        this._autoGeneratedCols = columns;\n\n        this.columnList.reset(columns);\n        if (data && data.length > 0) {\n            this.shouldGenerate = false;\n        }\n    }\n\n    protected generateDataFields(data: any[]): string[] {\n        return Object.keys(data && data.length !== 0 ? data[0] : []);\n    }\n\n    /**\n     * @hidden\n     */\n    onlyTopLevel(arr) {\n        return arr.filter(c => c.level === 0);\n    }\n\n    /**\n     * @hidden\n     */\n    protected initColumns(collection: QueryList<IgxColumnComponent>, cb: Function = null) {\n        this._columnGroups = this.columnList.some(col => col.columnGroup);\n        if (this.hasColumnLayouts) {\n            // Set overall row layout size\n            this.columnList.forEach((col) => {\n                if (col.columnLayout) {\n                    const layoutSize = col.children ?\n                        col.children.reduce((acc, val) => Math.max(val.rowStart + val.gridRowSpan - 1, acc), 1) :\n                        1;\n                    this._multiRowLayoutRowSize = Math.max(layoutSize, this._multiRowLayoutRowSize);\n                }\n            });\n        }\n        if (this.hasColumnLayouts && this.hasColumnGroups) {\n            // invalid configuration - multi-row and column groups\n            // remove column groups\n            const columnLayoutColumns = this.columnList.filter((col) => col.columnLayout || col.columnLayoutChild);\n            this.columnList.reset(columnLayoutColumns);\n        }\n        this._maxLevelHeaderDepth = null;\n        this._columns = this.columnList.toArray();\n        collection.forEach((column: IgxColumnComponent) => {\n            column.defaultWidth = this.columnWidthSetByUser ? this._columnWidth : column.defaultWidth ? column.defaultWidth : '';\n\n            if (cb) {\n                cb(column);\n            }\n        });\n\n        this.reinitPinStates();\n\n        if (this.hasColumnLayouts) {\n            collection.forEach((column: IgxColumnComponent) => {\n                column.populateVisibleIndexes();\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected reinitPinStates() {\n        this._pinnedColumns = (this.hasColumnGroups) ? this.columnList.filter((c) => c.pinned) :\n            this.columnList.filter((c) => c.pinned).sort((a, b) => this._pinnedColumns.indexOf(a) - this._pinnedColumns.indexOf(b));\n        this._unpinnedColumns = this.hasColumnGroups ? this.columnList.filter((c) => !c.pinned) :\n        this.columnList.filter((c) => !c.pinned)\n        .sort((a, b) => this._unpinnedColumns.indexOf(a) - this._unpinnedColumns.indexOf(b));\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public isColumnGrouped(fieldName: string): boolean {\n        return false;\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public onHeaderSelectorClick(event) {\n        if (!this.isMultiRowSelectionEnabled) { return; }\n        this.selectionService.areAllRowSelected() ?\n            this.selectionService.clearRowSelection(event) : this.selectionService.selectAllRows(event);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get headSelectorBaseAriaLabel() {\n        if (this._filteringExpressionsTree.filteringOperands.length > 0) {\n            return this.selectionService.areAllRowSelected() ? 'Deselect all filtered' : 'Select all filtered';\n        }\n\n        return this.selectionService.areAllRowSelected() ? 'Deselect all' : 'Select all';\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get totalRowsCountAfterFilter() {\n        if (this.data) {\n            return this.selectionService.allData.length;\n        }\n\n        return 0;\n    }\n\n    /**\n     * Returns the currently transformed paged/filtered/sorted/grouped data, displayed in the grid.\n     * @example\n     * ```typescript\n     *      const dataView = this.grid.dataView;\n     * ```\n     */\n    get dataView(): any[] {\n        return this.verticalScrollContainer.igxForOf;\n    }\n\n    /**\n     * Get current selection state.\n     * @example\n     * Returns an array with selected rows' IDs (primaryKey or rowData)\n     * ```typescript\n     * const selectedRows = this.grid.selectedRows();\n     * ```\n     */\n    public selectedRows(): any[] {\n        return this.selectionService.getSelectedRows();\n    }\n\n    /**\n     * Select specified rows by ID.\n     * @example\n     * ```typescript\n     * this.grid.selectRows([1,2,5], true);\n     * ```\n     * @param rowIDs\n     * @param clearCurrentSelection if true clears the current selection\n    */\n    public selectRows(rowIDs: any[], clearCurrentSelection?: boolean) {\n        this.selectionService.selectRowsWithNoEvent(rowIDs, clearCurrentSelection);\n        this.notifyChanges();\n    }\n\n    /**\n     * Deselect specified rows by ID.\n     * @example\n     * ```typescript\n     * this.grid.deselectRows([1,2,5]);\n     * ```\n     * @param rowIDs\n    */\n    public deselectRows(rowIDs: any[]) {\n        this.selectionService.deselectRowsWithNoEvent(rowIDs);\n        this.notifyChanges();\n    }\n\n    /**\n     * Selects all rows\n     * @remarks\n     * By default if filtering is in place, selectAllRows() and deselectAllRows() select/deselect all filtered rows.\n     * If you set the parameter onlyFilterData to false that will select all rows in the grid exept deleted rows.\n     * @example\n     * ```typescript\n     * this.grid.selectAllRows();\n     * this.grid.selectAllRows(false);\n     * ```\n     * @param onlyFilterData\n     */\n    public selectAllRows(onlyFilterData = true) {\n        const data = onlyFilterData && this.filteredData ? this.filteredData : this.gridAPI.get_all_data(true);\n        const rowIDs = this.selectionService.getRowIDs(data).filter(rID => !this.gridAPI.row_deleted_transaction(rID));\n        this.selectRows(rowIDs);\n    }\n\n    /**\n     * Deselects all rows\n     * @remarks\n     * By default if filtering is in place, selectAllRows() and deselectAllRows() select/deselect all filtered rows.\n     * If you set the parameter onlyFilterData to false that will select all rows in the grid exept deleted rows.\n     * @example\n     * ```typescript\n     * this.grid.deselectAllRows();\n     * ```\n     * @param onlyFilterData\n     */\n    public deselectAllRows(onlyFilterData = true) {\n        if (onlyFilterData && this.filteredData && this.filteredData.length > 0) {\n            this.deselectRows(this.selectionService.getRowIDs(this.filteredData));\n        } else {\n            this.selectionService.clearAllSelectedRows();\n            this.notifyChanges();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public clearCellSelection(): void {\n        this.selectionService.clear(true);\n        this.notifyChanges();\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public dragScroll(dir: DragScrollDirection): void {\n        const scrollDelta = 48;\n        const horizontal = this.headerContainer.getScroll();\n        const vertical = this.verticalScrollContainer.getScroll();\n        switch (dir) {\n            case DragScrollDirection.LEFT:\n                horizontal.scrollLeft -= scrollDelta;\n                break;\n            case DragScrollDirection.RIGHT:\n                horizontal.scrollLeft += scrollDelta;\n                break;\n            case DragScrollDirection.TOP:\n                vertical.scrollTop -= scrollDelta;\n                break;\n            case DragScrollDirection.BOTTOM:\n                vertical.scrollTop += scrollDelta;\n                break;\n            case DragScrollDirection.BOTTOMLEFT:\n                horizontal.scrollLeft -= scrollDelta;\n                vertical.scrollTop += scrollDelta;\n                break;\n            case DragScrollDirection.BOTTOMRIGHT:\n                horizontal.scrollLeft += scrollDelta;\n                vertical.scrollTop += scrollDelta;\n                break;\n            case DragScrollDirection.TOPLEFT:\n                horizontal.scrollLeft -= scrollDelta;\n                vertical.scrollTop -= scrollDelta;\n                break;\n            case DragScrollDirection.TOPRIGHT:\n                horizontal.scrollLeft += scrollDelta;\n                vertical.scrollTop -= scrollDelta;\n                break;\n            default:\n                return;\n        }\n        this.wheelHandler();\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public isDefined(arg: any): boolean {\n        return arg !== undefined && arg !== null;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public selectRange(arg: GridSelectionRange | GridSelectionRange[] | null | undefined): void {\n        if (!this.isDefined(arg)) {\n            this.clearCellSelection();\n            return;\n        }\n        if (arg instanceof Array) {\n            arg.forEach(range => this.setSelection(range));\n        } else {\n            this.setSelection(arg);\n        }\n        this.notifyChanges();\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public columnToVisibleIndex(field: string | number): number {\n        const visibleColumns = this.visibleColumns;\n        if (typeof field === 'number') {\n            return field;\n        }\n        return visibleColumns.find(column => column.field === field).visibleIndex;\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public setSelection(range: GridSelectionRange): void {\n        const startNode = { row: range.rowStart, column: this.columnToVisibleIndex(range.columnStart) };\n        const endNode = { row: range.rowEnd, column: this.columnToVisibleIndex(range.columnEnd) };\n\n        this.selectionService.pointerState.node = startNode;\n        this.selectionService.selectRange(endNode, this.selectionService.pointerState);\n        this.selectionService.addRangeMeta(endNode, this.selectionService.pointerState);\n        this.selectionService.initPointerState();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    getSelectedRanges(): GridSelectionRange[] {\n        return this.selectionService.ranges;\n    }\n\n\n    protected extractDataFromSelection(source: any[], formatters = false, headers = false): any[] {\n        let columnsArray: IgxColumnComponent[];\n        let record = {};\n        const selectedData = [];\n        const activeEl = this.selectionService.activeElement;\n\n        const selectionMap = Array.from(this.selectionService.selection)\n            .filter((tuple) => tuple[0] < source.length);\n\n        if (this.cellSelection === GridSelectionMode.single && activeEl) {\n            selectionMap.push([activeEl.row, new Set<number>().add(activeEl.column)]);\n        }\n\n        for (const [row, set] of selectionMap) {\n            if (!source[row] || source[row].detailsData !== undefined) {\n                continue;\n            }\n            const temp = Array.from(set);\n            for (const each of temp) {\n                columnsArray = this.getSelectableColumnsAt(each);\n                columnsArray.forEach((col) => {\n                    if (col) {\n                        const key = headers ? col.header || col.field : col.field;\n                        record[key] = formatters && col.formatter ? col.formatter(source[row][col.field])\n                            : source[row][col.field];\n                    }\n                });\n            }\n            if (Object.keys(record).length) {\n                selectedData.push(record);\n            }\n            record = {};\n        }\n        return selectedData;\n    }\n\n    protected getSelectableColumnsAt(index) {\n        if (this.hasColumnLayouts) {\n            const visibleLayoutColumns = this.visibleColumns\n                .filter(col => col.columnLayout)\n                .sort((a, b) => a.visibleIndex - b.visibleIndex);\n            const colLayout = visibleLayoutColumns[index];\n            return colLayout ? colLayout.children.toArray() : [];\n        } else {\n            const visibleColumns = this.visibleColumns\n                .filter(col => !col.columnGroup)\n                .sort((a, b) => a.visibleIndex - b.visibleIndex);\n            return [visibleColumns[index]];\n        }\n    }\n\n    /**\n     *\n     * Returns an array of the current cell selection in the form of `[{ column.field: cell.value }, ...]`.\n     * @remarks\n     * If `formatters` is enabled, the cell value will be formatted by its respective column formatter (if any).\n     * If `headers` is enabled, it will use the column header (if any) instead of the column field.\n     */\n    public getSelectedData(formatters = false, headers = false) {\n        const source = this.dataView;\n        return this.extractDataFromSelection(source, formatters, headers);\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public scrollHandler = (event) => {\n        this.headerContainer.scrollPosition += event.target.scrollLeft;\n        this.verticalScrollContainer.scrollPosition += event.target.scrollTop;\n        event.target.scrollLeft = 0;\n        event.target.scrollTop = 0;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    copyHandlerIE() {\n        if (isIE()) {\n            this.copyHandler(null, true);\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public copyHandler(event, ie11 = false) {\n        if (!this.clipboardOptions.enabled || this.crudService.inEditMode) {\n            return;\n        }\n\n        const data = this.getSelectedData(this.clipboardOptions.copyFormatters, this.clipboardOptions.copyHeaders);\n        const ev = { data, cancel: false } as IGridClipboardEvent;\n        this.onGridCopy.emit(ev);\n\n        if (ev.cancel) {\n            return;\n        }\n\n        const transformer = new CharSeparatedValueData(ev.data, this.clipboardOptions.separator);\n        let result = transformer.prepareData();\n\n        if (!this.clipboardOptions.copyHeaders) {\n            result = result.substring(result.indexOf('\\n') + 1);\n        }\n\n        if (ie11) {\n            (window as any).clipboardData.setData('Text', result);\n            return;\n        }\n\n        event.preventDefault();\n\n        /* Necessary for the hiearachical case but will probably have to\n           change how getSelectedData is propagated in the hiearachical grid\n        */\n        event.stopPropagation();\n        event.clipboardData.setData('text/plain', result);\n    }\n\n    /**Navigates to a posution in the grid based on provided `rowindex` and `visibleColumnIndex`.\n     * @remarks\n     * Also can execute a custom logic over the target element,\n     * through a callback function that accepts { targetType: GridKeydownTargetType, target: Object }\n     * @example\n     * ```typescript\n     *  this.grid.navigateTo(10, 3, (args) => { args.target.nativeElement.focus(); });\n     * ```\n     */\n    public navigateTo(rowIndex: number, visibleColIndex = -1, cb: Function = null) {\n        if (rowIndex < 0 || rowIndex > this.dataView.length - 1\n            || (visibleColIndex !== -1 && this.columnList.map(col => col.visibleIndex).indexOf(visibleColIndex) === -1)) {\n            return;\n        }\n        this.wheelHandler();\n        if (this.dataView.slice(rowIndex, rowIndex + 1).find(rec => rec.expression || rec.childGridsData)) {\n            visibleColIndex = -1;\n        }\n        const shouldScrollVertically = this.navigation.shouldPerformVerticalScroll(rowIndex, visibleColIndex);\n        const shouldScrollHorizontally = visibleColIndex !== -1 && !this.navigation.isColumnFullyVisible(visibleColIndex);\n        if (shouldScrollVertically) {\n            this.navigation.performVerticalScrollToCell(rowIndex, visibleColIndex,\n                () => { this.navigateTo(rowIndex, visibleColIndex, cb); });\n        } else if (shouldScrollHorizontally) {\n            this.navigation.performHorizontalScrollToCell(rowIndex, visibleColIndex, false,\n                     () => { this.navigateTo(rowIndex, visibleColIndex, cb); });\n        } else {\n            this.executeCallback(rowIndex, visibleColIndex, cb);\n        }\n    }\n\n    /**\n    * Returns `ICellPosition` which defines the next cell,\n    * according to the current position, that match specific criteria.\n    * @remarks\n    * You can pass callback function as a third parameter of `getPreviousCell` method.\n    * The callback function accepts IgxColumnComponent as a param\n    * @example\n    * ```typescript\n    *  const nextEditableCellPosition = this.grid.getNextCell(0, 3, (column) => column.editable);\n    * ```\n    */\n    public getNextCell(currRowIndex: number, curVisibleColIndex: number,\n        callback: (IgxColumnComponent) => boolean = null): ICellPosition {\n        const columns = this.columnList.filter(col => !col.columnGroup && col.visibleIndex >= 0);\n\n        if (!this.isValidPosition(currRowIndex, curVisibleColIndex)) {\n            return { rowIndex: currRowIndex, visibleColumnIndex: curVisibleColIndex };\n        }\n        const colIndexes = callback ? columns.filter((col) => callback(col)).map(editCol => editCol.visibleIndex).sort((a, b) => a - b) :\n            columns.map(editCol => editCol.visibleIndex).sort((a, b) => a - b);\n        const nextCellIndex = colIndexes.find(index => index > curVisibleColIndex);\n        if (this.dataView.slice(currRowIndex, currRowIndex + 1)\n            .find(rec => !rec.expression && !rec.summaries && !rec.childGridsData) && nextCellIndex !== undefined) {\n            return { rowIndex: currRowIndex, visibleColumnIndex: nextCellIndex };\n        } else {\n            if (colIndexes.length === 0 || this.getNextDataRowIndex(currRowIndex) === currRowIndex) {\n                return { rowIndex: currRowIndex, visibleColumnIndex: curVisibleColIndex };\n            } else {\n                return { rowIndex: this.getNextDataRowIndex(currRowIndex), visibleColumnIndex: colIndexes[0] };\n            }\n        }\n    }\n\n    /**\n    * Returns `ICellPosition` which defines the previous cell,\n    * according to the current position, that match specific criteria.\n    * @remarks\n    * You can pass callback function as a third parameter of `getPreviousCell` method.\n    * The callback function accepts IgxColumnComponent as a param\n    * @example\n    * ```typescript\n    *  const previousEditableCellPosition = this.grid.getPreviousCell(0, 3, (column) => column.editable);\n    * ```\n    */\n    public getPreviousCell(currRowIndex: number, curVisibleColIndex: number,\n        callback: (IgxColumnComponent) => boolean = null): ICellPosition {\n        const columns = this.columnList.filter(col => !col.columnGroup && col.visibleIndex >= 0);\n\n        if (!this.isValidPosition(currRowIndex, curVisibleColIndex)) {\n            return { rowIndex: currRowIndex, visibleColumnIndex: curVisibleColIndex };\n        }\n        const colIndexes = callback ? columns.filter((col) => callback(col)).map(editCol => editCol.visibleIndex).sort((a, b) => b - a) :\n            columns.map(editCol => editCol.visibleIndex).sort((a, b) => b - a);\n        const prevCellIndex = colIndexes.find(index => index < curVisibleColIndex);\n        if (this.dataView.slice(currRowIndex, currRowIndex + 1)\n            .find(rec => !rec.expression && !rec.summaries && !rec.childGridsData) && prevCellIndex !== undefined) {\n            return { rowIndex: currRowIndex, visibleColumnIndex: prevCellIndex };\n        } else {\n            if (colIndexes.length === 0 || this.getPrevDataRowIndex(currRowIndex) === currRowIndex) {\n                return { rowIndex: currRowIndex, visibleColumnIndex: curVisibleColIndex };\n            } else {\n                return { rowIndex: this.getPrevDataRowIndex(currRowIndex), visibleColumnIndex: colIndexes[0] };\n            }\n        }\n    }\n\n    private executeCallback(rowIndex, visibleColIndex = -1, cb: Function = null) {\n        if (!cb) { return; }\n        let targetType, target;\n        const row = this.summariesRowList.filter(s => s.index !== 0).concat(this.rowList.toArray()).find(r => r.index === rowIndex);\n        if (!row) { return; }\n        switch (row.nativeElement.tagName.toLowerCase()) {\n            case 'igx-grid-groupby-row':\n                targetType = GridKeydownTargetType.groupRow;\n                target = row;\n                break;\n            case 'igx-grid-summary-row':\n                targetType = GridKeydownTargetType.summaryCell;\n                target = visibleColIndex !== -1 ?\n                    row.summaryCells.find(c => c.visibleColumnIndex === visibleColIndex) : row.summaryCells.first;\n                break;\n            case 'igx-child-grid-row':\n                targetType = GridKeydownTargetType.hierarchicalRow;\n                target = row;\n                break;\n            default:\n                targetType = GridKeydownTargetType.dataCell;\n                target = visibleColIndex !== -1 ? row.cells.find(c => c.visibleColumnIndex === visibleColIndex) : row.cells.first;\n                break;\n        }\n        const args = { targetType: targetType, target: target };\n        cb(args);\n    }\n\n    private getPrevDataRowIndex(currentRowIndex): number {\n        if (currentRowIndex <= 0) { return currentRowIndex; }\n\n        const prevRow = this.dataView.slice(0, currentRowIndex).reverse()\n            .find(rec => !rec.expression && !rec.summaries && !rec.childGridsData);\n        return prevRow ? this.dataView.indexOf(prevRow) : currentRowIndex;\n    }\n\n    private getNextDataRowIndex(currentRowIndex): number {\n        if (currentRowIndex === this.dataView.length) { return currentRowIndex; }\n\n        const nextRow = this.dataView.slice(currentRowIndex + 1, this.dataView.length)\n            .find(rec => !rec.expression && !rec.summaries && !rec.childGridsData);\n        return nextRow ? this.dataView.indexOf(nextRow) : currentRowIndex;\n    }\n\n    private isValidPosition(rowIndex, colIndex): boolean {\n        const rows = this.summariesRowList.filter(s => s.index !== 0).concat(this.rowList.toArray()).length;\n        const cols = this.columnList.filter(col => !col.columnGroup && col.visibleIndex >= 0 && !col.hidden).length;\n        if (rows < 1 || cols < 1) { return false; }\n        if (rowIndex > -1 && rowIndex < this.dataView.length &&\n            colIndex > - 1 && colIndex < cols) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public wheelHandler = (isScroll = false) => {\n        if (this.document.activeElement &&\n            // tslint:disable-next-line:no-bitwise\n            (this.document.activeElement.compareDocumentPosition(this.tbody.nativeElement) & Node.DOCUMENT_POSITION_CONTAINS ||\n            // tslint:disable-next-line:no-bitwise\n            (this.document.activeElement.\n                compareDocumentPosition(this.tfoot.nativeElement) & Node.DOCUMENT_POSITION_CONTAINS && isScroll))) {\n            (this.document.activeElement as HTMLElement).blur();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public trackColumnChanges(index, col) {\n        return col.field + col._calcWidth;\n    }\n\n    private find(text: string, increment: number, caseSensitive?: boolean, exactMatch?: boolean, scroll?: boolean) {\n        if (!this.rowList) {\n            return 0;\n        }\n\n        this.endEdit(false);\n\n        if (!text) {\n            this.clearSearch();\n            return 0;\n        }\n\n        const caseSensitiveResolved = caseSensitive ? true : false;\n        const exactMatchResolved = exactMatch ? true : false;\n        let rebuildCache = false;\n\n        if (this.lastSearchInfo.searchText !== text ||\n            this.lastSearchInfo.caseSensitive !== caseSensitiveResolved ||\n            this.lastSearchInfo.exactMatch !== exactMatchResolved) {\n            this.lastSearchInfo = {\n                searchText: text,\n                activeMatchIndex: 0,\n                caseSensitive: caseSensitiveResolved,\n                exactMatch: exactMatchResolved,\n                matchInfoCache: []\n            };\n\n            rebuildCache = true;\n        } else {\n            this.lastSearchInfo.activeMatchIndex += increment;\n        }\n\n        if (rebuildCache) {\n            this.rowList.forEach((row) => {\n                if (row.cells) {\n                    row.cells.forEach((c) => {\n                        c.highlightText(text, caseSensitiveResolved, exactMatchResolved);\n                    });\n                }\n            });\n\n            this.rebuildMatchCache();\n        }\n\n        if (this.lastSearchInfo.activeMatchIndex >= this.lastSearchInfo.matchInfoCache.length) {\n            this.lastSearchInfo.activeMatchIndex = 0;\n        } else if (this.lastSearchInfo.activeMatchIndex < 0) {\n            this.lastSearchInfo.activeMatchIndex = this.lastSearchInfo.matchInfoCache.length - 1;\n        }\n\n        if (this.lastSearchInfo.matchInfoCache.length) {\n            const matchInfo = this.lastSearchInfo.matchInfoCache[this.lastSearchInfo.activeMatchIndex];\n            this.lastSearchInfo = { ...this.lastSearchInfo };\n\n            if (scroll !== false) {\n                this.scrollTo(matchInfo.row, matchInfo.column);\n            }\n\n            IgxTextHighlightDirective.setActiveHighlight(this.id, {\n                column: matchInfo.column,\n                row: matchInfo.row,\n                index: matchInfo.index,\n            });\n\n        } else {\n            IgxTextHighlightDirective.clearActiveHighlight(this.id);\n        }\n\n        return this.lastSearchInfo.matchInfoCache.length;\n    }\n\n    /**\n     * Returns an array containing the filtered sorted data.\n     * @example\n     * ```typescript\n     * const filteredSortedData = this.grid1.filteredSortedData;\n     * ```\n    */\n    get filteredSortedData(): any[] {\n        return this._filteredSortedData;\n    }\n    set filteredSortedData(value: any[]) {\n        this._filteredSortedData = value;\n        this.refreshSearch(true);\n    }\n\n    /**\n     * @hidden\n     */\n    protected initPinning() {\n        let currentPinnedWidth = 0;\n        const pinnedColumns = [];\n        const unpinnedColumns = [];\n\n        this.calculateGridWidth();\n        this.resetCaches();\n        // When a column is a group or is inside a group, pin all related.\n        this._pinnedColumns.forEach(col => {\n            if (col.parent) {\n                col.parent.pinned = true;\n            }\n            if (col.columnGroup) {\n                col.children.forEach(child => child.pinned = true);\n            }\n        });\n\n        // Make sure we don't exceed unpinned area min width and get pinned and unpinned col collections.\n        // We take into account top level columns (top level groups and non groups).\n        // If top level is unpinned the pinning handles all children to be unpinned as well.\n        for (let i = 0; i < this._columns.length; i++) {\n            if (this._columns[i].pinned && !this._columns[i].parent) {\n                // Pinned column. Check if with it the unpinned min width is exceeded.\n                const colWidth = parseInt(this._columns[i].width, 10);\n                currentPinnedWidth += colWidth;\n                pinnedColumns.push(this._columns[i]);\n            } else if (this._columns[i].pinned && this._columns[i].parent) {\n                if (this._columns[i].topLevelParent.pinned) {\n                    pinnedColumns.push(this._columns[i]);\n                } else {\n                    this._columns[i].pinned = false;\n                    unpinnedColumns.push(this._columns[i]);\n                }\n            } else {\n                unpinnedColumns.push(this._columns[i]);\n            }\n        }\n\n        // Assign the applicaple collections.\n        this._pinnedColumns = pinnedColumns;\n        this._unpinnedColumns = unpinnedColumns;\n        this.notifyChanges();\n    }\n\n    /**\n     * @hidden\n     */\n    protected scrollTo(row: any | number, column: any | number, inCollection = this.filteredSortedData): void {\n        let delayScrolling = false;\n\n        if (this.paging && typeof (row) !== 'number') {\n            const rowIndex = inCollection.indexOf(row);\n            const page = Math.floor(rowIndex / this.perPage);\n\n            if (this.page !== page) {\n                delayScrolling = true;\n                this.page = page;\n            }\n        }\n\n        if (delayScrolling) {\n            this.verticalScrollContainer.onDataChanged.pipe(first()).subscribe(() => {\n                this.scrollDirective(this.verticalScrollContainer,\n                    typeof (row) === 'number' ? row : this.dataView.indexOf(row));\n            });\n        } else {\n            this.scrollDirective(this.verticalScrollContainer,\n                typeof (row) === 'number' ? row : this.dataView.indexOf(row));\n        }\n\n        this.scrollToHorizontally(column);\n    }\n\n    /**\n     * @hidden\n     */\n    protected scrollToHorizontally(column: any | number) {\n        let columnIndex = typeof column === 'number' ? column : this.getColumnByName(column).visibleIndex;\n        const scrollRow = this.rowList.find(r => r.virtDirRow);\n        const virtDir = scrollRow ? scrollRow.virtDirRow : null;\n        if (this.pinnedColumns.length) {\n            if (columnIndex >= this.pinnedColumns.length) {\n                columnIndex -= this.pinnedColumns.length;\n                this.scrollDirective(virtDir, columnIndex);\n            }\n        } else {\n            this.scrollDirective(virtDir, columnIndex);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected scrollDirective(directive: IgxGridForOfDirective<any>, goal: number): void {\n        if (!directive) {\n            return;\n        }\n        directive.scrollTo(goal);\n    }\n\n    private rebuildMatchCache() {\n        this.lastSearchInfo.matchInfoCache = [];\n\n        const caseSensitive = this.lastSearchInfo.caseSensitive;\n        const exactMatch = this.lastSearchInfo.exactMatch;\n        const searchText = caseSensitive ? this.lastSearchInfo.searchText : this.lastSearchInfo.searchText.toLowerCase();\n        const data = this.filteredSortedData;\n        const columnItems = this.visibleColumns.filter((c) => !c.columnGroup).sort((c1, c2) => c1.visibleIndex - c2.visibleIndex);\n\n        const numberPipe = new IgxDecimalPipeComponent(this.locale);\n        const datePipe = new IgxDatePipeComponent(this.locale);\n        data.forEach((dataRow) => {\n            columnItems.forEach((c) => {\n                const value = c.formatter ? c.formatter(dataRow[c.field]) :\n                    c.dataType === 'number' ? numberPipe.transform(dataRow[c.field], this.locale) :\n                        c.dataType === 'date' ? datePipe.transform(dataRow[c.field], this.locale)\n                            : dataRow[c.field];\n                if (value !== undefined && value !== null && c.searchable) {\n                    let searchValue = caseSensitive ? String(value) : String(value).toLowerCase();\n\n                    if (exactMatch) {\n                        if (searchValue === searchText) {\n                            this.lastSearchInfo.matchInfoCache.push({\n                                row: dataRow,\n                                column: c.field,\n                                index: 0,\n                            });\n                        }\n                    } else {\n                        let occurenceIndex = 0;\n                        let searchIndex = searchValue.indexOf(searchText);\n\n                        while (searchIndex !== -1) {\n                            this.lastSearchInfo.matchInfoCache.push({\n                                row: dataRow,\n                                column: c.field,\n                                index: occurenceIndex++,\n                            });\n\n                            searchValue = searchValue.substring(searchIndex + searchText.length);\n                            searchIndex = searchValue.indexOf(searchText);\n                        }\n                    }\n                }\n            });\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public isExpandedGroup(_group: IGroupByRecord): boolean {\n        return undefined;\n    }\n\n    protected changeRowEditingOverlayStateOnScroll(row: IgxRowDirective<IgxGridBaseDirective & GridType>) {\n        if (!this.rowEditable || !this.rowEditingOverlay || this.rowEditingOverlay.collapsed) {\n            return;\n        }\n        if (!row) {\n            this.toggleRowEditingOverlay(false);\n        } else {\n            this.repositionRowEditingOverlay(row);\n        }\n    }\n\n    /**\n     * Should be called when data and/or isLoading input changes so that the overlay can be\n     * hidden/shown based on the current value of shouldOverlayLoading\n     */\n    protected evaluateLoadingState() {\n        if (this.shouldOverlayLoading) {\n            // a new overlay should be shown\n            const overlaySettings: OverlaySettings = {\n                outlet: this.loadingOutlet,\n                closeOnOutsideClick: false,\n                positionStrategy: new ContainerPositionStrategy()\n            };\n            if (!this._loadingId) {\n                this._loadingId = this.overlayService.attach(this.loadingOverlay, overlaySettings);\n                this.overlayService.show(this._loadingId, overlaySettings);\n            }\n        } else {\n            if (this._loadingId) {\n                this.overlayService.hide(this._loadingId);\n                this._loadingId = null;\n            }\n        }\n    }\n\n    /**\n     * @hidden @internal\n    */\n    openRowOverlay(id) {\n        this.configureRowEditingOverlay(id, this.rowList.length <= MIN_ROW_EDITING_COUNT_THRESHOLD);\n\n        this.rowEditingOverlay.open(this.rowEditSettings);\n        this.rowEditPositioningStrategy.isTopInitialPosition = this.rowEditPositioningStrategy.isTop;\n        this.rowEditingOverlay.element.addEventListener('wheel', this.rowEditingWheelHandler);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public closeRowEditingOverlay() {\n        this.rowEditingOverlay.element.removeEventListener('wheel', this.rowEditingWheelHandler);\n        this.rowEditPositioningStrategy.isTopInitialPosition = null;\n        this.rowEditingOverlay.close();\n        this.rowEditingOverlay.element.parentElement.style.display = '';\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public toggleRowEditingOverlay(show) {\n        const rowStyle = this.rowEditingOverlay.element.style;\n        if (show) {\n            rowStyle.display = 'block';\n        } else {\n            rowStyle.display = 'none';\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public repositionRowEditingOverlay(row: IgxRowDirective<IgxGridBaseDirective & GridType>) {\n        if (row && !this.rowEditingOverlay.collapsed) {\n            const rowStyle = this.rowEditingOverlay.element.parentElement.style;\n            if (row) {\n                rowStyle.display = '';\n                this.configureRowEditingOverlay(row.rowID);\n                this.rowEditingOverlay.reposition();\n            } else {\n                rowStyle.display = 'none';\n            }\n        }\n    }\n\n    private configureRowEditingOverlay(rowID: any, useOuter = false) {\n        this.rowEditSettings.outlet = useOuter ? this.parentRowOutletDirective : this.rowOutletDirective;\n        this.rowEditPositioningStrategy.settings.container = this.tbody.nativeElement;\n        const targetRow = this.gridAPI.get_row_by_key(rowID);\n        if (!targetRow) {\n            return;\n        }\n        this.rowEditPositioningStrategy.settings.target = targetRow.element.nativeElement;\n        this.toggleRowEditingOverlay(true);\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public get rowChangesCount() {\n        if (!this.crudService.row) {\n            return 0;\n        }\n        const rowChanges = this.transactions.getAggregatedValue(this.crudService.row.id, false);\n        return rowChanges ? Object.keys(rowChanges).length : 0;\n    }\n\n    protected writeToData(rowIndex: number, value: any) {\n        mergeObjects(this.gridAPI.get_all_data()[rowIndex], value);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    endRowTransaction(commit: boolean, row: IgxRow) {\n        row.newData = this.transactions.getAggregatedValue(row.id, true);\n\n        let args = row.createEditEventArgs();\n\n        if (!commit) {\n            this.onRowEditCancel.emit(args);\n            this.transactions.endPending(false);\n        } else {\n            args = this.gridAPI.update_row(row, row.newData);\n        }\n        if (args.cancel) {\n            this.transactions.startPending();\n            return;\n        }\n        this.crudService.endRowEdit();\n        this.closeRowEditingOverlay();\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public gridOutletKeyboardHandler(event) {\n        // TODO: This should be removed after grid keyboard refactoring\n        // call stopPropagation for keydown event for the outlet not to propagate event to the grid\n        event.stopPropagation();\n    }\n\n    // TODO: Refactor\n    /**\n     * Finishes the row transactions on the current row.\n     * @remarks\n     * If `commit === true`, passes them from the pending state to the data (or transaction service)\n     * @example\n     * ```html\n     * <button igxButton (click)=\"grid.endEdit(true)\">Commit Row</button>\n     * ```\n     * @param commit\n     */\n    public endEdit(commit = true, event?: Event) {\n        const row = this.crudService.row;\n        const cell = this.crudService.cell;\n\n        // TODO: Merge the crudService with wht BaseAPI service\n        if (!row && !cell) { return; }\n\n        commit ? this.gridAPI.submit_value() : this.gridAPI.escape_editMode();\n\n        if (!this.rowEditable || this.rowEditingOverlay && this.rowEditingOverlay.collapsed || !row) {\n            return;\n        }\n\n        this.endRowTransaction(commit, row);\n\n        const activeCell = this.selectionService.activeElement;\n        if (event && activeCell) {\n            const rowIndex = activeCell.row;\n            const visibleColIndex = activeCell.layout ? activeCell.layout.columnVisibleIndex : activeCell.column;\n            this.navigateTo(rowIndex, visibleColIndex, (c) => {\n                if (c.targetType === GridKeydownTargetType.dataCell && c.target) {\n                    c.target.nativeElement.focus();\n                }\n            });\n        }\n    }\n    /**\n     * @hidden\n     */\n    private rowEditingWheelHandler = (event: WheelEvent) => {\n        if (event.deltaY > 0) {\n            this.verticalScrollContainer.scrollNext();\n        } else {\n            this.verticalScrollContainer.scrollPrev();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get dataWithAddedInTransactionRows() {\n        const result = <any>cloneArray(this.gridAPI.get_all_data());\n        if (this.transactions.enabled) {\n            result.push(...this.transactions.getAggregatedChanges(true)\n                .filter(t => t.type === TransactionType.ADD)\n                .map(t => t.newValue));\n        }\n\n        return result;\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public get dataLength() {\n        return this.transactions.enabled ? this.dataWithAddedInTransactionRows.length : this.gridAPI.get_all_data().length;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public hasHorizontalScroll() {\n        return this.totalWidth - this.unpinnedWidth > 0;\n    }\n\n    protected _restoreVirtState(row) {\n        // check virtualization state of data record added from cache\n        // in case state is no longer valid - update it.\n        const rowForOf = row.virtDirRow;\n        const gridScrLeft = rowForOf.getScroll().scrollLeft;\n        const left = -parseInt(rowForOf.dc.instance._viewContainer.element.nativeElement.style.left, 10);\n        const actualScrollLeft = left + rowForOf.getColumnScrollLeft(rowForOf.state.startIndex);\n        if (gridScrLeft !== actualScrollLeft) {\n            rowForOf.onHScroll(gridScrLeft);\n            rowForOf.cdr.detectChanges();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected getExportExcel(): boolean {\n        return this._exportExcel;\n    }\n\n    /**\n     * @hidden\n     */\n    protected getExportCsv(): boolean {\n        return this._exportCsv;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get shouldOverlayLoading(): boolean {\n        return this.isLoading && this.data && this.data.length > 0;\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public isSummaryRow(rowData): boolean {\n        return rowData.summaries && (rowData.summaries instanceof Map);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get isMultiRowSelectionEnabled(): boolean {\n        return this.rowSelection === GridSelectionMode.multiple;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get isRowSelectable(): boolean {\n        return this.rowSelection !== GridSelectionMode.none;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get isCellSelectable() {\n        return this.cellSelection !== GridSelectionMode.none;\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public viewDetachHandler(args: ICachedViewLoadedEventArgs) {\n        const context = args.view.context;\n        if (context['templateID'] === 'dataRow') {\n            // some browsers (like FireFox and Edge) do not trigger onBlur when the focused element is detached from DOM\n            // hence we need to trigger it manually when cell is detached.\n            const row = this.getRowByIndex(context.index);\n            const focusedCell = row && row.cells ? row.cells.find(x => x.focused) : false;\n            if (focusedCell) {\n                focusedCell.onBlur();\n            }\n        }\n    }\n\n    /**\n     * @hidden @internal\n    */\n    public cachedViewLoaded(args: ICachedViewLoadedEventArgs) {\n        if (this.hasHorizontalScroll()) {\n            const tmplId = args.context.templateID;\n            const index = args.context.index;\n            args.view.detectChanges();\n            this.zone.onStable.pipe(first()).subscribe(() => {\n                const row = tmplId === 'dataRow' ? this.getRowByIndex(index) : null;\n                const summaryRow = tmplId === 'summaryRow' ? this.summariesRowList.find((sr) => sr.dataRowIndex === index) : null;\n                if (row && row instanceof IgxRowDirective) {\n                    this._restoreVirtState(row);\n                } else if (summaryRow) {\n                    this._restoreVirtState(summaryRow);\n                }\n            });\n        }\n    }\n\n    /**\n     * Opens the advanced filtering dialog.\n     */\n    public openAdvancedFilteringDialog() {\n        if (!this._advancedFilteringOverlayId) {\n            this._advancedFilteringOverlaySettings.positionStrategy.settings.target =\n                (this as any).rootGrid ? (this as any).rootGrid.nativeElement : this.nativeElement;\n            this._advancedFilteringOverlaySettings.outlet = this.outletDirective;\n\n            this._advancedFilteringOverlayId = this.overlayService.attach(\n                IgxAdvancedFilteringDialogComponent,\n                this._advancedFilteringOverlaySettings,\n                {\n                    injector: this.viewRef.injector,\n                    componentFactoryResolver: this.resolver\n                });\n            this.overlayService.show(this._advancedFilteringOverlayId, this._advancedFilteringOverlaySettings);\n        }\n    }\n\n    /**\n     * Closes the advanced filtering dialog.\n     * @param applyChanges indicates whether the changes should be applied\n     */\n    public closeAdvancedFilteringDialog(applyChanges: boolean) {\n        if (this._advancedFilteringOverlayId) {\n            const advancedFilteringOverlay = this.overlayService.getOverlayById(this._advancedFilteringOverlayId);\n            const advancedFilteringDialog = advancedFilteringOverlay.componentRef.instance as IgxAdvancedFilteringDialogComponent;\n\n            if (applyChanges) {\n                advancedFilteringDialog.applyChanges();\n            }\n            advancedFilteringDialog.closeDialog();\n        }\n    }\n}\n","import { GridBaseAPIService } from '../api.service';\nimport { IgxGridComponent } from './grid.component';\nimport { IGroupByRecord } from '../../data-operations/groupby-record.interface';\nimport { IGroupByExpandState } from '../../data-operations/groupby-expand-state.interface';\nimport { DataUtil } from '../../data-operations/data-util';\nimport { cloneArray } from '../../core/utils';\nimport { IGroupingExpression } from '../../data-operations/grouping-expression.interface';\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class IgxGridAPIService extends GridBaseAPIService<IgxGridComponent> {\n\n    public groupBy(expression: IGroupingExpression): void {\n        const groupingState = cloneArray(this.grid.groupingExpressions);\n        const sortingState = cloneArray(this.grid.sortingExpressions);\n        this.prepare_sorting_expression([sortingState, groupingState], expression);\n        this.grid.groupingExpressions = groupingState;\n        this.arrange_sorting_expressions();\n    }\n\n    public groupBy_multiple(expressions: IGroupingExpression[]): void {\n        const groupingState = cloneArray(this.grid.groupingExpressions);\n        const sortingState = cloneArray(this.grid.sortingExpressions);\n\n        for (const each of expressions) {\n            this.prepare_sorting_expression([sortingState, groupingState], each);\n        }\n\n        this.grid.groupingExpressions = groupingState;\n        this.arrange_sorting_expressions();\n    }\n\n    public clear_groupby(name?: string | Array<string>) {\n        const groupingState = cloneArray(this.grid.groupingExpressions);\n        const sortingState = cloneArray(this.grid.sortingExpressions);\n\n        if (name) {\n            const names = typeof name === 'string' ? [ name ] : name;\n            const groupedCols = groupingState.filter((state) => names.indexOf(state.fieldName) < 0);\n            const newSortingExpr = sortingState.filter((state) => names.indexOf(state.fieldName) < 0);\n            this.grid.groupingExpressions = groupedCols;\n            this.grid.sortingExpressions = newSortingExpr;\n            names.forEach((colName) => {\n                const grExprIndex = groupingState.findIndex((exp) => exp.fieldName === colName);\n                const grpExpandState = this.grid.groupingExpansionState;\n                /* remove expansion states related to the cleared group\n                and all with deeper hierarchy than the cleared group */\n                this.grid.groupingExpansionState = grpExpandState\n                    .filter((val) => {\n                        return val.hierarchy && val.hierarchy.length <= grExprIndex;\n                    });\n            });\n        } else {\n            // clear all\n            this.grid.groupingExpressions = [];\n            this.grid.groupingExpansionState = [];\n            for (const grExpr of groupingState) {\n                const sortExprIndex = sortingState.findIndex((exp) => exp.fieldName === grExpr.fieldName);\n                if (sortExprIndex > -1) {\n                    sortingState.splice(sortExprIndex, 1);\n                }\n            }\n            this.grid.sortingExpressions = sortingState;\n        }\n    }\n\n    public groupBy_get_expanded_for_group(groupRow: IGroupByRecord): IGroupByExpandState {\n        const grState = this.grid.groupingExpansionState;\n        const hierarchy = DataUtil.getHierarchy(groupRow);\n        return grState.find((state) =>\n            DataUtil.isHierarchyMatch(state.hierarchy || [{ fieldName: groupRow.expression.fieldName, value: groupRow.value }], hierarchy));\n    }\n\n    public groupBy_is_row_in_group(groupRow: IGroupByRecord, rowID): boolean {\n        const grid = this.grid;\n        let rowInGroup = false;\n        groupRow.records.forEach(row => {\n            if (grid.primaryKey ? row[grid.primaryKey] === rowID : row === rowID) {\n                rowInGroup = true;\n            }\n        });\n        return rowInGroup;\n    }\n\n    public groupBy_toggle_group(groupRow: IGroupByRecord) {\n        const grid = this.grid;\n        if (grid.crudService.isInEditMode) {\n            grid.endEdit(true);\n        }\n\n        const expansionState = grid.groupingExpansionState;\n        const state: IGroupByExpandState = this.groupBy_get_expanded_for_group(groupRow);\n        if (state) {\n            state.expanded = !state.expanded;\n        } else {\n            expansionState.push({\n                expanded: !grid.groupsExpanded,\n                hierarchy: DataUtil.getHierarchy(groupRow)\n            });\n        }\n        this.grid.groupingExpansionState = [...expansionState];\n        if (grid.rowEditable) {\n            grid.repositionRowEditingOverlay(grid.rowInEditMode);\n        }\n    }\n\n    public groupBy_fully_expand_group(groupRow: IGroupByRecord) {\n        const state: IGroupByExpandState = this.groupBy_get_expanded_for_group(groupRow);\n        const expanded = state ? state.expanded : this.grid.groupsExpanded;\n        if (!expanded) {\n            this.groupBy_toggle_group(groupRow);\n        }\n        if (groupRow.groupParent) {\n            this.groupBy_fully_expand_group(groupRow.groupParent);\n        }\n    }\n\n    protected remove_grouping_expression(fieldName) {\n        const groupingExpressions = this.grid.groupingExpressions;\n        const index = groupingExpressions.findIndex((expr) => expr.fieldName === fieldName);\n        if (index !== -1) {\n            groupingExpressions.splice(index, 1);\n        }\n    }\n\n    public arrange_sorting_expressions() {\n        const groupingState = this.grid.groupingExpressions;\n        this.grid.sortingExpressions.sort((a, b) => {\n            const groupExprA = groupingState.find((expr) => expr.fieldName === a.fieldName);\n            const groupExprB = groupingState.find((expr) => expr.fieldName === b.fieldName);\n            if (groupExprA && groupExprB) {\n                return groupingState.indexOf(groupExprA) > groupingState.indexOf(groupExprB) ? 1 : -1;\n            } else if (groupExprA) {\n                return -1;\n            } else if (groupExprB) {\n                return 1;\n            } else {\n                return 0;\n            }\n        });\n    }\n\n    public get_groupBy_record_id(gRow: IGroupByRecord): string {\n        let recordId = '{ ';\n        const hierrarchy = DataUtil.getHierarchy(gRow);\n\n        for (let i = 0; i < hierrarchy.length; i++) {\n            const groupByKey = hierrarchy[i];\n            recordId += `'${groupByKey.fieldName}': '${groupByKey.value}'`;\n\n            if (i < hierrarchy.length - 1) {\n                recordId += ', ';\n            }\n        }\n        recordId += ' }';\n\n        return recordId;\n    }\n\n}\n","import {\n    Component, ChangeDetectionStrategy, Input, Output, EventEmitter, ContentChild, ViewChildren,\n    QueryList, ViewChild, ElementRef, TemplateRef, DoCheck, AfterContentInit, HostBinding, forwardRef, OnInit, AfterViewInit, HostListener\n} from '@angular/core';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { IgxGridNavigationService } from '../grid-navigation.service';\nimport { IgxGridAPIService } from './grid-api.service';\nimport { ISortingExpression } from '../../data-operations/sorting-expression.interface';\nimport { cloneArray, IBaseEventArgs } from '../../core/utils';\nimport { IGroupByRecord } from '../../data-operations/groupby-record.interface';\nimport { IgxGroupByRowTemplateDirective, IgxGridDetailTemplateDirective } from './grid.directives';\nimport { IgxGridGroupByRowComponent } from './groupby-row.component';\nimport { IGroupByExpandState } from '../../data-operations/groupby-expand-state.interface';\nimport { IBaseChipEventArgs, IChipClickEventArgs, IChipKeyDownEventArgs } from '../../chips/chip.component';\nimport { IChipsAreaReorderEventArgs } from '../../chips/chips-area.component';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { takeUntil, first } from 'rxjs/operators';\nimport { IgxFilteringService } from '../filtering/grid-filtering.service';\nimport { IGroupingExpression } from '../../data-operations/grouping-expression.interface';\nimport { IgxColumnResizingService } from '../resizing/resizing.service';\nimport { IgxGridSummaryService } from '../summaries/grid-summary.service';\nimport { IgxGridSelectionService, IgxGridCRUDService } from '../selection/selection.service';\nimport { IgxForOfSyncService, IgxForOfScrollSyncService } from '../../directives/for-of/for_of.sync.service';\nimport { IgxDragIndicatorIconDirective } from '../row-drag.directive';\nimport { IgxGridMRLNavigationService } from '../grid-mrl-navigation.service';\nimport { IgxRowIslandAPIService } from '../hierarchical-grid/row-island-api.service';\nimport { FilterMode } from '../common/enums';\nimport { GridType } from '../common/grid.interface';\nimport { DeprecateMethod } from '../../core/deprecateDecorators';\n\nlet NEXT_ID = 0;\n\nexport interface IGroupingDoneEventArgs extends IBaseEventArgs {\n    expressions: Array<ISortingExpression> | ISortingExpression;\n    groupedColumns: Array<IgxColumnComponent> | IgxColumnComponent;\n    ungroupedColumns: Array<IgxColumnComponent> | IgxColumnComponent;\n}\n\n/**\n * Grid provides a way to present and manipulate tabular data.\n *@igxModule IgxGridModule\n *@igxGroup Grids & Lists\n *@igxKeywords grid, table\n *@igxTheme igx-grid-theme\n *@remarks\n * The Ignite UI Grid is used for presenting and manipulating tabular data in the simplest way possible.  Once data\n * has been bound, it can be manipulated through filtering, sorting & editing operations.\n *@example\n * ```html\n * <igx-grid [data]=\"employeeData\" autoGenerate=\"false\">\n *   <igx-column field=\"first\" header=\"First Name\"></igx-column>\n *   <igx-column field=\"last\" header=\"Last Name\"></igx-column>\n *   <igx-column field=\"role\" header=\"Role\"></igx-column>\n * </igx-grid>\n * ```\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    providers: [\n        IgxGridNavigationService,\n        IgxGridSummaryService,\n        IgxGridSelectionService,\n        IgxGridCRUDService,\n        { provide: GridBaseAPIService, useClass: IgxGridAPIService },\n        { provide: IgxGridBaseDirective, useExisting: forwardRef(() => IgxGridComponent) },\n        IgxFilteringService,\n        IgxColumnResizingService,\n        IgxForOfSyncService,\n        IgxForOfScrollSyncService,\n        IgxRowIslandAPIService\n    ],\n    selector: 'igx-grid',\n    templateUrl: './grid.component.html'\n})\nexport class IgxGridComponent extends IgxGridBaseDirective implements GridType, OnInit, DoCheck, AfterContentInit, AfterViewInit {\n    private _id = `igx-grid-${NEXT_ID++}`;\n    /**\n     * @hidden @internal\n     */\n    public groupingResult: any[];\n\n    /**\n     * @hidden @internal\n     */\n    public groupingMetadata: any[];\n\n    /**\n     * @hidden @internal\n     */\n    public groupingFlatResult: any[];\n    /**\n     * @hidden\n     */\n    protected _groupingExpressions: IGroupingExpression[] = [];\n    /**\n     * @hidden\n     */\n    protected _groupingExpandState: IGroupByExpandState[] = [];\n    /**\n     * @hidden\n     */\n    protected _groupRowTemplate: TemplateRef<any>;\n    /**\n     * @hidden\n     */\n    protected _groupAreaTemplate: TemplateRef<any>;\n    /**\n     * @hidden\n     */\n    protected groupingDiffer;\n    private _data;\n    private _hideGroupedColumns = false;\n    private _dropAreaMessage = null;\n\n    /**\n     * Gets/Sets the value of the `id` attribute.\n     * @remarks\n     * If not provided it will be automatically generated.\n     * @example\n     * ```html\n     * <igx-grid [id]=\"'igx-grid-1'\" [data]=\"Data\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public get id(): string {\n        return this._id;\n    }\n    public set id(value: string) {\n        this._id = value;\n    }\n\n    /**\n     * Gets/Sets the array of data that populates the `IgxGridComponent`.\n     * @example\n     * ```html\n     * <igx-grid [data]=\"Data\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n    */\n    @Input()\n    public get data(): any[] {\n        return this._data;\n    }\n\n    public set data(value: any[]) {\n        this._data = value || [];\n        this.summaryService.clearSummaryCache();\n        if (this.shouldGenerate) {\n            this.setupColumns();\n        }\n        this.cdr.markForCheck();\n    }\n\n    /**\n     * Gets/Sets an array of objects containing the filtered data.\n     * @example\n     * ```typescript\n     * let filteredData = this.grid.filteredData;\n     * this.grid.filteredData = [...];\n     * ```\n     */\n    get filteredData() {\n        return this._filteredData;\n    }\n\n    set filteredData(value) {\n        this._filteredData = value;\n    }\n\n    /**\n     * Gets/Sets the total number of records in the data source.\n     * @remarks\n     * This property is required for remote grid virtualization to function when it is bound to remote data.\n     * @example\n     * ```typescript\n     * const itemCount = this.grid1.totalItemCount;\n     * this.grid1.totalItemCount = 55;\n     * ```\n     */\n    set totalItemCount(count) {\n        this.verticalScrollContainer.totalItemCount = count;\n        this.cdr.detectChanges();\n    }\n\n    get totalItemCount() {\n        return this.verticalScrollContainer.totalItemCount;\n    }\n\n    private get _gridAPI(): IgxGridAPIService {\n        return this.gridAPI as IgxGridAPIService;\n    }\n    private _filteredData = null;\n\n    private childDetailTemplates: Map<any, any> = new Map();\n\n    /**\n     * Gets/Sets the group by state.\n     * @example\n     * ```typescript\n     * let groupByState = this.grid.groupingExpressions;\n     * this.grid.groupingExpressions = [...];\n     * ```\n     * @remarks\n     * Supports two-way data binding.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [autoGenerate]=\"true\" [(groupingExpressions)]=\"model.groupingExpressions\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get groupingExpressions(): IGroupingExpression[] {\n        return this._groupingExpressions;\n    }\n\n    set groupingExpressions(value: IGroupingExpression[]) {\n        if (value && value.length > 10) {\n            throw Error('Maximum amount of grouped columns is 10.');\n        }\n        const oldExpressions: IGroupingExpression[] = this.groupingExpressions;\n        const newExpressions: IGroupingExpression[] = value;\n        this._groupingExpressions = cloneArray(value);\n        this.groupingExpressionsChange.emit(this._groupingExpressions);\n        this.chipsGoupingExpressions = cloneArray(value);\n        if (this._gridAPI.grid) {\n            /* grouping should work in conjunction with sorting\n            and without overriding separate sorting expressions */\n            this._applyGrouping();\n            this._gridAPI.arrange_sorting_expressions();\n            this.notifyChanges();\n        } else {\n            // setter called before grid is registered in grid API service\n            this.sortingExpressions.unshift.apply(this.sortingExpressions, this._groupingExpressions);\n        }\n        if (!this._init && JSON.stringify(oldExpressions) !== JSON.stringify(newExpressions) && this.columnList) {\n            const groupedCols: IgxColumnComponent[] = [];\n            const ungroupedCols: IgxColumnComponent[] = [];\n            const groupedColsArr = newExpressions.filter((obj) => {\n                return !oldExpressions.some((obj2) => {\n                    return obj.fieldName === obj2.fieldName;\n                });\n            });\n            groupedColsArr.forEach((elem) => {\n                groupedCols.push(this.getColumnByName(elem.fieldName));\n            }, this);\n            const ungroupedColsArr = oldExpressions.filter((obj) => {\n                return !newExpressions.some((obj2) => {\n                    return obj.fieldName === obj2.fieldName;\n                });\n            });\n            ungroupedColsArr.forEach((elem) => {\n                ungroupedCols.push(this.getColumnByName(elem.fieldName));\n            }, this);\n            this.notifyChanges();\n            const groupingDoneArgs: IGroupingDoneEventArgs = {\n                expressions: newExpressions,\n                groupedColumns: groupedCols,\n                ungroupedColumns: ungroupedCols\n            };\n            this.onGroupingDone.emit(groupingDoneArgs);\n        }\n    }\n\n    /**\n     *@hidden\n     */\n    @Output()\n    public groupingExpressionsChange = new EventEmitter<IGroupingExpression[]>();\n\n    /**\n     * Gets/Sets a list of expansion states for group rows.\n     * @remarks\n     * Includes only states that differ from the default one (controlled through groupsExpanded and states that the user has changed.\n     * Contains the expansion state (expanded: boolean) and the unique identifier for the group row (Array).\n     * Supports two-way data binding.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [autoGenerate]=\"true\" [(groupingExpansionState)]=\"model.groupingExpansionState\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get groupingExpansionState() {\n        return this._groupingExpandState;\n    }\n\n    set groupingExpansionState(value) {\n        if (value !== this._groupingExpandState) {\n            this.groupingExpansionStateChange.emit(value);\n        }\n        this._groupingExpandState = value;\n        if (this.gridAPI.grid) {\n            this.cdr.detectChanges();\n        }\n    }\n\n    /**\n    *@hidden @internal\n    */\n    @Output()\n    public groupingExpansionStateChange = new EventEmitter<IGroupByExpandState[]>();\n\n    /**\n     * Gets/Sets whether created groups are rendered expanded or collapsed.\n     * @remarks\n     * The default rendered state is expanded.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [groupsExpanded]=\"false\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public groupsExpanded = true;\n\n    /**\n     * Gets the hierarchical representation of the group by records.\n     * @example\n     * ```typescript\n     * let groupRecords = this.grid.groupsRecords;\n     * ```\n     */\n    public groupsRecords: IGroupByRecord[] = [];\n\n    /**\n     * Gets/Sets whether the grouped columns should be hidden.\n     * @remarks\n     * The default value is \"false\"\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [hideGroupedColumns]=\"true\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public get hideGroupedColumns() {\n        return this._hideGroupedColumns;\n    }\n\n    public set hideGroupedColumns(value: boolean) {\n        if (value) {\n            this.groupingDiffer = this.differs.find(this.groupingExpressions).create();\n        } else {\n            this.groupingDiffer = null;\n        }\n        if (this.columnList && this.groupingExpressions) {\n            this._setGroupColsVisibility(value);\n        }\n\n        this._hideGroupedColumns = value;\n    }\n\n    /**\n     * Gets/Sets the message displayed inside the GroupBy drop area where columns can be dragged on.\n     * @remarks\n     * The grid needs to have at least one groupable column in order the GroupBy area to be displayed.\n     * @example\n     * ```html\n     * <igx-grid dropAreaMessage=\"Drop here to group!\">\n     *      <igx-column [groupable]=\"true\" field=\"ID\"></igx-column>\n     * </igx-grid>\n     * ```\n     */\n    @Input()\n    set dropAreaMessage(value: string) {\n        this._dropAreaMessage = value;\n        this.notifyChanges();\n    }\n\n    get dropAreaMessage(): string {\n        return this._dropAreaMessage || this.resourceStrings.igx_grid_groupByArea_message;\n    }\n\n    /**\n     * Gets/Sets the template that will be rendered as a GroupBy drop area.\n     *@remarks\n     * The grid needs to have at least one groupable column in order the GroupBy area to be displayed.\n     * @example\n     * ```html\n     * <igx-grid [dropAreaTemplate]=\"dropAreaRef\">\n     * </igx-grid>\n     * <ng-template #myDropArea>\n     *      <span> Custom drop area! </span>\n     * </ng-template>\n     * ```\n     */\n    @Input()\n    public dropAreaTemplate: TemplateRef<any>;\n\n    /**\n     * Emitted when columns are grouped/ungrouped.\n     * @remarks\n     * The `onGroupingDone` event would be raised only once if several columns get grouped at once by calling\n     * the `groupBy()` or `clearGrouping()` API methods and passing an array as an argument.\n     * The event arguments provide the `expressions`, `groupedColumns` and `ungroupedColumns` properties, which contain\n     * the `ISortingExpression` and the `IgxColumnComponent` related to the grouping/ungrouping operation.\n     * Please note that `groupedColumns` and `ungroupedColumns` show only the **newly** changed columns (affected by the **last**\n     * grouping/ungrouping operation), not all columns which are currently grouped/ungrouped.\n     * columns.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" (onGroupingDone)=\"groupingDone($event)\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onGroupingDone = new EventEmitter<IGroupingDoneEventArgs>();\n\n    /**\n     * @hidden @internal\n     */\n    @ContentChild(IgxGroupByRowTemplateDirective, { read: IgxGroupByRowTemplateDirective })\n    protected groupTemplate: IgxGroupByRowTemplateDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @ContentChild(IgxGridDetailTemplateDirective, { read: IgxGridDetailTemplateDirective, static: false })\n    protected gridDetailsTemplate: IgxGridDetailTemplateDirective;\n\n    @ViewChildren(IgxGridGroupByRowComponent, { read: IgxGridGroupByRowComponent })\n    private _groupsRowList: QueryList<IgxGridGroupByRowComponent>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('defaultDropArea', { read: TemplateRef, static: true })\n    public defaultDropAreaTemplate: TemplateRef<any>;\n\n    /**\n     * Gets the list of group rows.\n     * @example\n     * ```typescript\n     * const groupList = this.grid.groupsRowList;\n     * ```\n     */\n    public get groupsRowList() {\n        const res = new QueryList<any>();\n        if (!this._groupsRowList) {\n            return res;\n        }\n        const rList = this._groupsRowList.filter((item) => {\n            return item.element.nativeElement.parentElement !== null;\n        }).sort((item1, item2) => item1.index - item2.index);\n        res.reset(rList);\n        return res;\n    }\n\n    /**\n     * @hidden @internal\n    */\n    @ViewChild('groupArea')\n    public groupArea: ElementRef;\n    /**\n    * @hidden @internal\n    */\n    @ViewChild('record_template', { read: TemplateRef, static: true })\n    protected recordTemplate: TemplateRef<any>;\n\n    @ViewChild('detail_template_container', { read: TemplateRef, static: true })\n    protected detailTemplateContainer: TemplateRef<any>;\n\n    /**\n    * @hidden @internal\n    */\n    @ContentChild(IgxGridDetailTemplateDirective, { read: TemplateRef, static: false })\n    public detailTemplate: TemplateRef<any> = null;\n\n    @ViewChild('group_template', { read: TemplateRef, static: true })\n    protected defaultGroupTemplate: TemplateRef<any>;\n\n    @ViewChild('summary_template', { read: TemplateRef, static: true })\n    protected summaryTemplate: TemplateRef<any>;\n\n\n\n\n    /**\n     *@hidden @internal\n     */\n    @Output()\n    private _focusIn = new  EventEmitter<any>();\n    @HostListener('focusin') onFocusIn() {\n        this._focusIn.emit();\n    }\n\n    /**\n     *@hidden @internal\n    */\n    public getDetailsContext(rowData, index) {\n        return {\n            $implicit: rowData,\n            index: index\n        };\n    }\n\n    /**\n    *@hidden @internal\n    */\n    public preventContainerScroll(evt) {\n        if (evt.target.scrollTop !== 0 && this.hasDetails) {\n            const activeElem = document.activeElement;\n            this.verticalScrollContainer.addScrollTop(evt.target.scrollTop);\n            evt.target.scrollTop = 0;\n            this.verticalScrollContainer.onChunkLoad.pipe(first()).subscribe(() => {\n                const active = this.selectionService.activeElement;\n                const currRow = (this.navigation as any).getRowByIndex(active.row, '');\n                // check if the focused element was a child of the details view\n                if (this.isDetailRecord(active.row) && currRow && currRow.contains(activeElem)) {\n                    // Some browsers (like Edge/IE) lose focus after scrolling even when the element was in the DOM.\n                    (activeElem as any).focus({ preventScroll: true });\n                    return;\n                }\n                const nextCellTarget = this.navigation.getCellElementByVisibleIndex(active.row, active.column);\n                const nextRowTarget = (this.navigation as any).getRowByIndex(active.row + 1, '');\n                if (nextCellTarget) {\n                    nextCellTarget.focus({ preventScroll: true });\n                } else if (nextRowTarget) {\n                    nextRowTarget.focus({ preventScroll: true });\n                }\n            });\n        }\n    }\n\n    /**\n    *@hidden @internal\n    */\n    public trackChanges(index, rec) {\n        if (rec.detailsData !== undefined) {\n            return rec.detailsData;\n        }\n        return rec;\n    }\n\n    /**\n    *@hidden @internal\n    */\n    public detailsViewFocused(container, rowIndex) {\n        this.selectionService.activeElement = {\n            row: rowIndex,\n            column: this.selectionService.activeElement ? this.selectionService.activeElement.column : 0\n        };\n    }\n\n    /**\n    *@hidden @internal\n    */\n    public detailsKeyboardHandler(event, rowIndex, container) {\n        const colIndex = this.selectionService.activeElement ? this.selectionService.activeElement.column : 0;\n        const shift = event.shiftKey;\n        const ctrl = event.ctrlKey;\n        const key = event.key.toLowerCase();\n        const target = event.target;\n        if (key === 'tab') {\n            event.stopPropagation();\n            const lastColIndex = this.unpinnedColumns[this.unpinnedColumns.length - 1].visibleIndex;\n            if (shift && target === container) {\n                // shift + tab from details to data row\n                event.preventDefault();\n                this.navigateTo(rowIndex - 1, lastColIndex,\n                    (args) => args.target.nativeElement.focus());\n            } else if (!shift) {\n                // when the next element is focused via tab check if it is an element outside the details view\n                // if so we have exited the details view and focus should move to the first cell in the next row\n                this._focusIn.pipe(first()).subscribe(() => {\n                    if (!container.contains(document.activeElement)) {\n                      this.navigation.performTab(container, {row: rowIndex, column: lastColIndex});\n                    }\n                });\n            }\n        } else if (key === 'arrowup' && !ctrl && target === container) {\n            this.navigation.navigateUp(container, {row: rowIndex, column: colIndex});\n        } else if (key === 'arrowup' && ctrl && target === container) {\n            this.navigation.navigateTop(colIndex);\n        } else if (key === 'arrowdown' && !ctrl && target === container) {\n            this.navigation.navigateDown(container, {row: rowIndex, column: colIndex});\n        } else if (key === 'arrowdown' && ctrl && target === container) {\n            this.navigation.navigateBottom(colIndex);\n        }\n    }\n\n\n    /**\n    *@hidden @internal\n    */\n    public get hasDetails() {\n        return !!this.gridDetailsTemplate;\n    }\n\n    /**\n    * @hidden @internal\n    */\n   public getRowTemplate(rowData) {\n        if (this.isGroupByRecord(rowData)) {\n            return this.defaultGroupTemplate;\n        } else if (this.isSummaryRow(rowData)) {\n            return this.summaryTemplate;\n        }  else if (this.hasDetails && this.isDetailRecord(rowData)) {\n                return this.detailTemplateContainer;\n        } else {\n            return this.recordTemplate;\n        }\n   }\n\n    /**\n    * @hidden @internal\n    */\n   public isDetailRecord(record) {\n    return record.detailsData !== undefined;\n   }\n    /**\n     * @hidden @internal\n     */\n    get groupAreaHostClass(): string {\n        return this.getComponentDensityClass('igx-drop-area');\n    }\n\n    /**\n     * Gets/Sets the template reference for the group row.\n     * @example\n     * ```\n     * const groupRowTemplate = this.grid.groupRowTemplate;\n     * this.grid.groupRowTemplate = myRowTemplate;\n     * ```\n     */\n    get groupRowTemplate(): TemplateRef<any> {\n        return this._groupRowTemplate;\n    }\n\n    set groupRowTemplate(template: TemplateRef<any>) {\n        this._groupRowTemplate = template;\n        this.notifyChanges();\n    }\n\n\n    /**\n     * Gets/Sets the template reference of the `IgxGridComponent`'s group area.\n     * @example\n     * ```typescript\n     * const groupAreaTemplate = this.grid.groupAreaTemplate;\n     * this.grid.groupAreaTemplate = myAreaTemplate.\n     * ```\n     */\n    get groupAreaTemplate(): TemplateRef<any> {\n        return this._groupAreaTemplate;\n    }\n\n    set groupAreaTemplate(template: TemplateRef<any>) {\n        this._groupAreaTemplate = template;\n        this.notifyChanges();\n    }\n\n    /**\n     * Groups by a new `IgxColumnComponent` based on the provided expression, or modifies an existing one.\n     * @remarks\n     * Also allows for multiple columns to be grouped at once if an array of `ISortingExpression` is passed.\n     * The onGroupingDone event would get raised only **once** if this method gets called multiple times with the same arguments.\n     * @example\n     * ```typescript\n     * this.grid.groupBy({ fieldName: name, dir: SortingDirection.Asc, ignoreCase: false });\n     * this.grid.groupBy([\n            { fieldName: name1, dir: SortingDirection.Asc, ignoreCase: false },\n            { fieldName: name2, dir: SortingDirection.Desc, ignoreCase: true },\n            { fieldName: name3, dir: SortingDirection.Desc, ignoreCase: false }\n        ]);\n     * ```\n     */\n    public groupBy(expression: IGroupingExpression | Array<IGroupingExpression>): void {\n        if (this.checkIfNoColumnField(expression)) {\n            return;\n        }\n        this.endEdit(true);\n        if (expression instanceof Array) {\n            this._gridAPI.groupBy_multiple(expression);\n        } else {\n            this._gridAPI.groupBy(expression);\n        }\n        this.notifyChanges(true);\n    }\n\n    /**\n     * Clears grouping for particular column, array of columns or all columns.\n     * @remarks\n     * Clears all grouping in the grid, if no parameter is passed.\n     * If a parameter is provided, clears grouping for a particular column or an array of columns.\n     * @example\n     * ```typescript\n     * this.grid.clearGrouping(); //clears all grouping\n     * this.grid.clearGrouping(\"ID\"); //ungroups a single column\n     * this.grid.clearGrouping([\"ID\", \"Column1\", \"Column2\"]); //ungroups multiple columns\n     * ```\n     *@param name Name of column or array of column names to be ungrouped.\n     */\n    public clearGrouping(name?: string | Array<string>): void {\n        this._gridAPI.clear_groupby(name);\n        this.notifyChanges(true);\n    }\n\n    /**\n     * Returns if a group is expanded or not.\n     * @param group The group record.\n     * @example\n     * ```typescript\n     * public groupRow: IGroupByRecord;\n     * const expandedGroup = this.grid.isExpandedGroup(this.groupRow);\n     * ```\n     */\n    public isExpandedGroup(group: IGroupByRecord): boolean {\n        const state: IGroupByExpandState = this._getStateForGroupRow(group);\n        return state ? state.expanded : this.groupsExpanded;\n    }\n\n    /**\n     * Toggles the expansion state of a group.\n     * @param groupRow The group record to toggle.\n     * @example\n     * ```typescript\n     * public groupRow: IGroupByRecord;\n     * const toggleExpGroup = this.grid.toggleGroup(this.groupRow);\n     * ```\n     */\n    public toggleGroup(groupRow: IGroupByRecord) {\n        this._toggleGroup(groupRow);\n        this.notifyChanges();\n    }\n\n    /**\n     * Expands the specified group and all of its parent groups.\n     * @param groupRow The group record to fully expand.\n     * @example\n     * ```typescript\n     * public groupRow: IGroupByRecord;\n     * this.grid.fullyExpandGroup(this.groupRow);\n     * ```\n     */\n    public fullyExpandGroup(groupRow: IGroupByRecord) {\n        this._fullyExpandGroup(groupRow);\n        this.notifyChanges();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public isGroupByRecord(record: any): boolean {\n        // return record.records instance of GroupedRecords fails under Webpack\n        return record.records && record.records.length;\n    }\n\n    /**\n     * Toggles the expansion state of all group rows recursively.\n     * @example\n     * ```typescript\n     * this.grid.toggleAllGroupRows;\n     * ```\n     */\n    public toggleAllGroupRows() {\n        this.groupingExpansionState = [];\n        this.groupsExpanded = !this.groupsExpanded;\n        this.notifyChanges();\n    }\n\n    /**\n     * Returns if the `IgxGridComponent` has groupable columns.\n     * @example\n     * ```typescript\n     * const groupableGrid = this.grid.hasGroupableColumns;\n     * ```\n     */\n    get hasGroupableColumns(): boolean {\n        return this.columnList.some((col) => col.groupable && !col.columnGroup);\n    }\n\n    private _setGroupColsVisibility(value) {\n        if (this.columnList.length > 0 && !this.hasColumnLayouts) {\n            this.groupingExpressions.forEach((expr) => {\n                const col = this.getColumnByName(expr.fieldName);\n                col.hidden = value;\n            });\n        }\n    }\n\n    /**\n     * Gets if the grid's group by drop area is visible.\n     * @example\n     * ```typescript\n     * const dropVisible = this.grid.dropAreaVisible;\n     * ```\n     */\n    public get dropAreaVisible(): boolean {\n        return (this.draggedColumn && this.draggedColumn.groupable) ||\n            !this.chipsGoupingExpressions.length;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    protected _getStateForGroupRow(groupRow: IGroupByRecord): IGroupByExpandState {\n        return this._gridAPI.groupBy_get_expanded_for_group(groupRow);\n    }\n\n    /**\n     * @hidden\n     */\n    protected _toggleGroup(groupRow: IGroupByRecord) {\n        this._gridAPI.groupBy_toggle_group(groupRow);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    protected _fullyExpandGroup(groupRow: IGroupByRecord) {\n        this._gridAPI.groupBy_fully_expand_group(groupRow);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    protected _applyGrouping() {\n        this._gridAPI.sort_multiple(this._groupingExpressions);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public isColumnGrouped(fieldName: string): boolean {\n        return this.groupingExpressions.find(exp => exp.fieldName === fieldName) ? true : false;\n    }\n\n    /**\n    * @hidden @internal\n    */\n    public getContext(rowData, rowIndex): any {\n        if (this.isDetailRecord(rowData)) {\n            const cachedData = this.childDetailTemplates.get(rowData.detailsData);\n            const rowID = this.primaryKey ? rowData.detailsData[this.primaryKey] : this.data.indexOf(rowData.detailsData);\n            if (cachedData) {\n                const view = cachedData.view;\n                const tmlpOutlet = cachedData.owner;\n                return {\n                    $implicit: rowData.detailsData,\n                    moveView: view,\n                    owner: tmlpOutlet,\n                    index: this.dataView.indexOf(rowData),\n                    templateID: 'detailRow-' + rowID\n                };\n            } else {\n                // child rows contain unique grids, hence should have unique templates\n                return {\n                    $implicit: rowData.detailsData,\n                    templateID: 'detailRow-' + rowID,\n                    index: this.dataView.indexOf(rowData)\n                };\n            }\n        }\n        return {\n            $implicit: rowData,\n            index: rowIndex,\n            templateID: this.isGroupByRecord(rowData) ? 'groupRow' : this.isSummaryRow(rowData) ? 'summaryRow' : 'dataRow'\n        };\n    }\n\n     /**\n     * @hidden @internal\n     */\n    public viewCreatedHandler(args) {\n        if (args.context.templateID.indexOf('detailRow') !== -1) {\n            this.childDetailTemplates.set(args.context.$implicit, args);\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public viewMovedHandler(args) {\n        if (args.context.templateID.indexOf('detailRow') !== -1) {\n            // view was moved, update owner in cache\n            const key = args.context.$implicit;\n            const cachedData = this.childDetailTemplates.get(key);\n            cachedData.owner = args.owner;\n        }\n    }\n\n\n    /**\n    * @hidden @internal\n    */\n    public get template(): TemplateRef<any> {\n        if (this.filteredData && this.filteredData.length === 0) {\n            return this.emptyGridTemplate ? this.emptyGridTemplate : this.emptyFilteredGridTemplate;\n        }\n\n        if (this.isLoading && (!this.data || this.dataLength === 0)) {\n            return this.loadingGridTemplate ? this.loadingGridTemplate : this.loadingGridDefaultTemplate;\n        }\n\n        if (this.dataLength === 0) {\n            return this.emptyGridTemplate ? this.emptyGridTemplate : this.emptyGridDefaultTemplate;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onChipRemoved(event: IBaseChipEventArgs) {\n        this.clearGrouping(event.owner.id);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public chipsOrderChanged(event: IChipsAreaReorderEventArgs) {\n        const newGrouping = [];\n        for (let i = 0; i < event.chipsArray.length; i++) {\n            const expr = this.groupingExpressions.filter((item) => {\n                return item.fieldName === event.chipsArray[i].id;\n            })[0];\n\n            if (!this.getColumnByName(expr.fieldName).groupable) {\n                // disallow changing order if there are columns with groupable: false\n                return;\n            }\n            newGrouping.push(expr);\n        }\n        this.groupingExpansionState = [];\n        this.chipsGoupingExpressions = newGrouping;\n\n        if (event.originalEvent instanceof KeyboardEvent) {\n            // When reordered using keyboard navigation, we don't have `onMoveEnd` event.\n            this.groupingExpressions = this.chipsGoupingExpressions;\n        }\n        this.notifyChanges();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public chipsMovingEnded() {\n        this.groupingExpressions = this.chipsGoupingExpressions;\n        this.notifyChanges();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onChipClicked(event: IChipClickEventArgs) {\n        const sortingExpr = this.sortingExpressions;\n        const columnExpr = sortingExpr.find((expr) => expr.fieldName === event.owner.id);\n        columnExpr.dir = 3 - columnExpr.dir;\n        this.sort(columnExpr);\n        this.notifyChanges();\n    }\n\n    /**\n     *@hidden @internal\n     */\n    public onChipKeyDown(event: IChipKeyDownEventArgs) {\n        if (event.originalEvent.key === ' ' || event.originalEvent.key === 'Spacebar' || event.originalEvent.key === 'Enter') {\n            const sortingExpr = this.sortingExpressions;\n            const columnExpr = sortingExpr.find((expr) => expr.fieldName === event.owner.id);\n            columnExpr.dir = 3 - columnExpr.dir;\n            this.sort(columnExpr);\n            this.notifyChanges();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    protected get defaultTargetBodyHeight(): number {\n        const allItems = this.totalItemCount || this.dataLength;\n        return this.renderedRowHeight * Math.min(this._defaultTargetRecordNumber,\n            this.paging ? Math.min(allItems, this.perPage) : allItems);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    protected getGroupAreaHeight(): number {\n        return this.groupArea ? this.groupArea.nativeElement.offsetHeight : 0;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    protected scrollTo(row: any | number, column: any | number): void {\n        if (this.groupingExpressions && this.groupingExpressions.length\n            && typeof(row) !== 'number') {\n            const rowIndex = this.groupingResult.indexOf(row);\n            const groupByRecord = this.groupingMetadata[rowIndex];\n            if (groupByRecord) {\n                this._fullyExpandGroup(groupByRecord);\n            }\n        }\n\n        super.scrollTo(row, column, this.groupingFlatResult);\n    }\n\n    /**\n    * @hidden @internal\n    */\n    public get dropAreaTemplateResolved(): TemplateRef<any> {\n        if (this.dropAreaTemplate) {\n            return this.dropAreaTemplate;\n        } else {\n            return this.defaultDropAreaTemplate;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public getGroupByChipTitle(expression: IGroupingExpression): string {\n        const column = this.getColumnByName(expression.fieldName);\n        return (column && column.header) || expression.fieldName;\n    }\n    /**\n     * @hidden @internal\n     */\n    public get iconTemplate() {\n        if (this.groupsExpanded) {\n            return this.headerExpandIndicatorTemplate || this.defaultExpandedTemplate;\n        } else {\n            return this.headerCollapseIndicatorTemplate || this.defaultCollapsedTemplate;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public getColumnGroupable(fieldName: string): boolean {\n        const column = this.getColumnByName(fieldName);\n        return column && column.groupable;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngAfterContentInit() {\n        super.ngAfterContentInit();\n        if (this.allowFiltering && this.hasColumnLayouts) {\n            this.filterMode = FilterMode.excelStyleFilter;\n        }\n        if (this.groupTemplate) {\n            this._groupRowTemplate = this.groupTemplate.template;\n        }\n\n        if (this.hideGroupedColumns && this.columnList && this.groupingExpressions) {\n            this._setGroupColsVisibility(this.hideGroupedColumns);\n        }\n        this._setupNavigationService();\n    }\n\n    /**\n    * @hidden @internal\n    */\n    public ngAfterViewInit() {\n        super.ngAfterViewInit();\n        this.verticalScrollContainer.onBeforeViewDestroyed.pipe(takeUntil(this.destroy$)).subscribe((view) => {\n            const rowData = view.context.$implicit;\n            if (this.isDetailRecord(rowData)) {\n                const cachedData = this.childDetailTemplates.get(rowData.detailsData);\n                if (cachedData) {\n                    const tmlpOutlet = cachedData.owner;\n                    tmlpOutlet._viewContainerRef.detach(0);\n                }\n            }\n        });\n    }\n\n    /**\n    * @hidden @internal\n    */\n    public ngOnInit() {\n        super.ngOnInit();\n        this.onGroupingDone.pipe(takeUntil(this.destroy$)).subscribe((args) => {\n            this.endEdit(true);\n            this.summaryService.updateSummaryCache(args);\n            this._headerFeaturesWidth = NaN;\n        });\n    }\n\n    /**\n    * @hidden @internal\n    */\n    public ngDoCheck(): void {\n        if (this.groupingDiffer && this.columnList && !this.hasColumnLayouts) {\n            const changes = this.groupingDiffer.diff(this.groupingExpressions);\n            if (changes && this.columnList.length > 0) {\n                changes.forEachAddedItem((rec) => {\n                    const col = this.getColumnByName(rec.item.fieldName);\n                    col.hidden = true;\n                });\n                changes.forEachRemovedItem((rec) => {\n                    const col = this.getColumnByName(rec.item.fieldName);\n                    col.hidden = false;\n                });\n            }\n        }\n        super.ngDoCheck();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    getSelectedData(formatters = false, headers = false): any[] {\n        if (this.groupingExpressions.length) {\n            const source = [];\n\n            const process = (record) => {\n                if (record.expression || record.summaries) {\n                    source.push(null);\n                    return;\n                }\n                source.push(record);\n\n            };\n\n            this.dataView.forEach(process);\n            return this.extractDataFromSelection(source, formatters, headers);\n        } else {\n            return super.getSelectedData(formatters, headers);\n        }\n    }\n\n    private _setupNavigationService() {\n        if (this.hasColumnLayouts) {\n            this.navigation = new IgxGridMRLNavigationService();\n            this.navigation.grid = this;\n        }\n    }\n\n    private checkIfNoColumnField(expression: IGroupingExpression | Array<IGroupingExpression> | any): boolean {\n        if (expression instanceof Array) {\n            for (const singleExpression of expression) {\n                if (!singleExpression.fieldName) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        return !expression.fieldName;\n    }\n\n}\n","import { Directive, Optional, Input, NgModule, Host, ComponentFactoryResolver, ViewContainerRef } from '@angular/core';\nimport { ISortingExpression } from '../data-operations/sorting-expression.interface';\nimport { FilteringExpressionsTree, IFilteringExpressionsTree } from '../data-operations/filtering-expressions-tree';\nimport { IFilteringExpression } from '../data-operations/filtering-expression.interface';\nimport { IgxColumnComponent } from './columns/column.component';\nimport { IGroupingExpression } from '../data-operations/grouping-expression.interface';\nimport { IPagingState } from '../data-operations/paging-state.interface';\nimport { DataType } from '../data-operations/data-util';\nimport { IgxBooleanFilteringOperand, IgxNumberFilteringOperand, IgxDateFilteringOperand,\n    IgxStringFilteringOperand, IFilteringOperation} from '../data-operations/filtering-condition';\nimport { GridSelectionRange } from './selection/selection.service';\nimport { IGroupByExpandState } from '../data-operations/groupby-expand-state.interface';\nimport { IGroupingState } from '../data-operations/groupby-state.interface';\nimport { IgxGridComponent } from './grid/grid.component';\n\nexport interface IGridState {\n    columns?: IColumnState[];\n    filtering?: IFilteringExpressionsTree;\n    advancedFiltering?: IFilteringExpressionsTree;\n    paging?: IPagingState;\n    sorting?: ISortingExpression[];\n    groupBy?: IGroupingState;\n    cellSelection?: GridSelectionRange[];\n    rowSelection?: any[];\n}\n\nexport interface IGridStateOptions {\n    columns?: boolean;\n    filtering?: boolean;\n    advancedFiltering?: boolean;\n    sorting?: boolean;\n    groupBy?: boolean;\n    paging?: boolean;\n    cellSelection?: boolean;\n    rowSelection?: boolean;\n}\n\nexport interface IColumnState {\n    pinned: boolean;\n    sortable: boolean;\n    filterable: boolean;\n    editable: boolean;\n    sortingIgnoreCase: boolean;\n    filteringIgnoreCase: boolean;\n    headerClasses: string;\n    headerGroupClasses: string;\n    maxWidth: string;\n    groupable: boolean;\n    movable: boolean;\n    hidden: boolean;\n    dataType: DataType;\n    hasSummary: boolean;\n    field: string;\n    width: any;\n    header: string;\n    resizable: boolean;\n    searchable: boolean;\n}\n\nconst COLUMNS = 'columns';\nconst FILTERING = 'filtering';\nconst ADVANCED_FILTERING = 'advancedFiltering';\nconst SORTING = 'sorting';\nconst GROUPBY = 'groupBy';\nconst PAGING = 'paging';\nconst ROW_SELECTION = 'rowSelection';\nconst CELL_SELECTION = 'cellSelection';\n\n@Directive({\n    selector: '[igxGridState]'\n})\nexport class IgxGridStateDirective {\n\n    private _options: IGridStateOptions = {\n        columns: true,\n        filtering: true,\n        advancedFiltering: true,\n        sorting: true,\n        groupBy: true,\n        paging: true,\n        cellSelection: true,\n        rowSelection: true\n    };\n\n    private state: IGridState;\n\n    /**\n     *  An object with options determining if a certain feature state should be saved.\n     *\n     * ```html\n     * <igx-grid [igxGridState]=\"options\"></igx-grid>\n     * ```\n     * ```typescript\n     * public options = {selection: false, advancedFiltering: false};\n     * ```\n     */\n    @Input('igxGridState')\n    public get options(): IGridStateOptions {\n       return this._options;\n    }\n\n    public set options(value: IGridStateOptions) {\n        Object.assign(this._options, value);\n    }\n\n    /**\n     * @hidden\n     */\n    constructor(\n        @Host() @Optional() private grid: IgxGridComponent,\n        private resolver: ComponentFactoryResolver,\n        protected viewRef: ViewContainerRef) { }\n\n    /**\n     * Gets the state of a feature or states of all grid features, unless a certain feature is disabled through the `options` property.\n     * @param `serialize` determines whether the returned object will be serialized to JSON string. Default value is false.\n     * @param `feature` string or array of strings determining the features which state to retrieve. If skipped, returns all.\n     * @returns Returns the serialized to JSON string IGridState object, or the non-serialized IGridState object.\n     * ```html\n     * <igx-grid [igxGridState]=\"options\"></igx-grid>\n     * ```\n     * ```typescript\n     * @ViewChild(IgxGridStateDirective, { static: true }) public state;\n     * let state =  this.state.getState();\n     * ```\n     */\n    public getState(serialize = true, feature?: string | string[]): IGridState | string  {\n        let state: IGridState | string;\n        if (feature) {\n            state = {};\n            if (Array.isArray(feature)) {\n                feature.forEach(f => {\n                    state = Object.assign(state, this.getGridFeature(f));\n                });\n            } else {\n                state = this.getGridFeature(feature);\n            }\n        } else {\n            state = this.getAllGridFeatures();\n        }\n        if (serialize) {\n            state = JSON.stringify(state, this.stringifyCallback);\n            return state as string;\n        } else {\n            return state as IGridState;\n        }\n    }\n\n    /**\n     * Restores grid features' state based on the IGridState object passed as an argument.\n     * @param IGridState object to restore state from.\n     * @returns\n     * ```html\n     * <igx-grid [igxGridState]=\"options\"></igx-grid>\n     * ```\n     * ```typescript\n     * @ViewChild(IgxGridStateDirective, { static: true }) public state;\n     * this.state.setState(gridState);\n     * ```\n     */\n    public setState(state: IGridState | string) {\n        if (typeof state === 'string') {\n            state = JSON.parse(state);\n        }\n        this.state = state as IGridState;\n        this.restoreGridState();\n        this.grid.cdr.detectChanges();\n    }\n\n    /**\n     * The method that calls corresponding methods to restore feature from this.state object.\n     */\n    private restoreGridState() {\n        for (const key of Object.keys(this.state)) {\n            if (this.state[key]) {\n                this.restoreFeature(key, this.state[key]);\n            }\n        }\n    }\n\n    /**\n     * Restores the state of a feature.\n     */\n    private restoreFeature(feature: string, state: IColumnState[] | IPagingState | ISortingExpression[] |\n        IGroupingState | FilteringExpressionsTree | GridSelectionRange[] | any[]) {\n        switch (feature) {\n            case COLUMNS: {\n               this.restoreColumns(state as IColumnState[]);\n               break;\n            }\n            case FILTERING: {\n                this.restoreFiltering(state as FilteringExpressionsTree);\n                break;\n            }\n            case ADVANCED_FILTERING: {\n                this.restoreAdvancedFiltering(state as FilteringExpressionsTree);\n                break;\n            }\n            case SORTING: {\n                this.restoreSorting(state as ISortingExpression[]);\n                break;\n             }\n             case GROUPBY: {\n                this.restoreGroupBy(state as IGroupingState);\n                break;\n             }\n             case PAGING: {\n                this.restorePaging(state as IPagingState);\n                break;\n              }\n              case ROW_SELECTION: {\n                this.restoreRowSelection(state as any[]);\n                break;\n              }\n              case CELL_SELECTION: {\n                this.restoreCellSelection(state as GridSelectionRange[]);\n                break;\n              }\n         }\n    }\n\n    /**\n     * Returns an object containing all grid features state.\n     */\n    private getAllGridFeatures(): IGridState {\n        let gridState: IGridState = {};\n\n        for (const key of Object.keys(this.options)) {\n            if (this.options[key]) {\n                const feature = this.getGridFeature(key);\n                gridState =  Object.assign(gridState, feature);\n            }\n        }\n\n        gridState = Object.assign({}, gridState);\n        return gridState;\n    }\n\n    /**\n     * Restores an object containing the state for a grid feature.\n     * `serialize` param determines whether the returned object will be serialized to a JSON string. Default value is false.,\n     */\n    private getGridFeature(feature: string): IGridState {\n        const state: IGridState = {};\n        switch (feature) {\n            case COLUMNS: {\n               Object.assign(state, this.getColumns());\n               break;\n            }\n            case FILTERING: {\n                Object.assign(state, this.getFiltering());\n                break;\n            }\n            case ADVANCED_FILTERING: {\n                Object.assign(state, this.getAdvancedFiltering());\n                break;\n            }\n            case SORTING: {\n                Object.assign(state, this.getSorting());\n                break;\n             }\n             case GROUPBY: {\n                Object.assign(state, this.getGroupBy());\n                break;\n             }\n             case PAGING: {\n                Object.assign(state, this.getPaging());\n                break;\n              }\n              case ROW_SELECTION: {\n                Object.assign(state, this.getRowSelection());\n                break;\n              }\n              case CELL_SELECTION: {\n                Object.assign(state, this.getCellSelection());\n                break;\n              }\n         }\n         return state;\n    }\n\n    /**\n     * Helper method that creates a new array with the current grid columns.\n     */\n    private getColumns(): IGridState {\n        const gridColumns: IColumnState[] = this.grid.columns.sort(this.sortByVisibleIndex).map((c) => {\n            return {\n                pinned: c.pinned,\n                sortable: c.sortable,\n                filterable: c.filterable,\n                editable: c.editable,\n                sortingIgnoreCase: c.sortingIgnoreCase,\n                filteringIgnoreCase: c.filteringIgnoreCase,\n                headerClasses: c.headerClasses,\n                headerGroupClasses: c.headerGroupClasses,\n                maxWidth: c.maxWidth,\n                groupable: c.groupable,\n                movable: c.movable,\n                hidden: c.hidden,\n                dataType: c.dataType,\n                hasSummary: c.hasSummary,\n                field: c.field,\n                width: c.width,\n                header: c.header,\n                resizable: c.resizable,\n                searchable: c.searchable\n            };\n        });\n        return { columns: gridColumns };\n    }\n\n    private getFiltering(): IGridState {\n        const filteringState = this.grid.filteringExpressionsTree;\n        return { filtering: filteringState };\n    }\n\n    private getAdvancedFiltering(): IGridState {\n        const advancedFiltering = this.grid.advancedFilteringExpressionsTree;\n        return { advancedFiltering: advancedFiltering };\n    }\n\n    private getPaging(): IGridState {\n        const pagingState = this.grid.pagingState;\n        return { paging: pagingState };\n    }\n\n    private getSorting(): IGridState {\n        const sortingState = this.grid.sortingExpressions;\n        sortingState.forEach(s => {\n            delete s.strategy;\n        });\n        return { sorting: sortingState };\n    }\n\n    private getGroupBy(): IGridState {\n        const groupingExpressions = this.grid.groupingExpressions;\n        groupingExpressions.forEach(expr => {\n            delete expr.strategy;\n        });\n        const expansionState = this.grid.groupingExpansionState;\n        const groupsExpanded = this.grid.groupsExpanded;\n\n        return { groupBy: { expressions: groupingExpressions, expansion: expansionState, defaultExpanded: groupsExpanded}  };\n    }\n\n    private getRowSelection(): IGridState {\n        const selection = this.grid.selectedRows();\n        return { rowSelection: selection };\n    }\n\n    private getCellSelection(): IGridState {\n        const selection = this.grid.getSelectedRanges().map(range => {\n            return { rowStart: range.rowStart, rowEnd: range.rowEnd, columnStart: range.columnStart, columnEnd: range.columnEnd };\n        });\n        return { cellSelection: selection };\n    }\n\n    /**\n     * Restores the grid columns by modifying the `columnList` collection of the grid.\n     */\n    private restoreColumns(columnsState: IColumnState[]): void {\n        const newColumns = [];\n        const factory = this.resolver.resolveComponentFactory(IgxColumnComponent);\n        columnsState.forEach((colState) => {\n            const ref = factory.create(this.viewRef.injector);\n            Object.assign(ref.instance, colState);\n            ref.changeDetectorRef.detectChanges();\n            newColumns.push(ref.instance);\n        });\n\n        this.grid.columnList.reset(newColumns);\n        this.grid.columnList.notifyOnChanges();\n    }\n\n    private sortByVisibleIndex(colA: IgxColumnComponent, colB: IgxColumnComponent) {\n          const a = colA.visibleIndex, b = colB.visibleIndex;\n          return a > b ? 1 : a < b ? -1 : 0;\n    }\n\n    /**\n     * Restores the grid filtering state, i.e. sets the `filteringExpressionsTree` property value.\n     */\n    private restoreFiltering(state: FilteringExpressionsTree) {\n        const filterTree = this.createExpressionsTreeFromObject(state);\n        this.grid.filteringExpressionsTree = filterTree as FilteringExpressionsTree;\n    }\n\n    /**\n     * Restores the grid advanced filtering state, i.e. sets the `advancedFilteringExpressionsTree` property value.\n     */\n    private restoreAdvancedFiltering(state: FilteringExpressionsTree) {\n        const advFilterTree = this.createExpressionsTreeFromObject(state);\n        this.grid.advancedFilteringExpressionsTree = advFilterTree as FilteringExpressionsTree;\n    }\n\n    /**\n     * Restores the grid sorting state, i.e. sets the `sortingExpressions` property value.\n     */\n    private restoreSorting(state: ISortingExpression[]) {\n        this.grid.sortingExpressions = state;\n    }\n\n    /**\n     * Restores the grid grouping state, i.e. sets the `groupbyExpressions` property value.\n     */\n    private restoreGroupBy(state: IGroupingState) {\n        (this.grid as IgxGridComponent).groupingExpressions = state.expressions as IGroupingExpression[];\n        if ((this.grid as IgxGridComponent).groupsExpanded !== state.defaultExpanded) {\n            this.grid.toggleAllGroupRows();\n        } else {\n            (this.grid as IgxGridComponent).groupingExpansionState = state.expansion as IGroupByExpandState[];\n        }\n    }\n\n    /**\n     * Restores the grid paging state, i.e. sets the `perPage` property value and paginate to index.\n     */\n    private restorePaging(state: IPagingState) {\n        if (this.grid.perPage !== state.recordsPerPage) {\n            this.grid.perPage = state.recordsPerPage;\n            this.grid.cdr.detectChanges();\n        }\n        this.grid.page = state.index;\n    }\n\n    private restoreRowSelection(state: any[]) {\n        this.grid.selectRows(state);\n    }\n\n    private restoreCellSelection(state: GridSelectionRange[]) {\n        state.forEach(r => {\n            const range = { rowStart: r.rowStart, rowEnd: r.rowEnd, columnStart: r.columnStart, columnEnd: r.columnEnd};\n            this.grid.selectRange(range);\n        });\n    }\n\n    /**\n     * This method builds a FilteringExpressionsTree from a provided object.\n     */\n    private createExpressionsTreeFromObject(exprTreeObject: FilteringExpressionsTree): FilteringExpressionsTree {\n        if (!exprTreeObject || !exprTreeObject.filteringOperands) {\n            return null;\n        }\n\n        const expressionsTree = new FilteringExpressionsTree(exprTreeObject.operator, exprTreeObject.fieldName);\n\n        for (const item of exprTreeObject.filteringOperands) {\n            // Check if item is an expressions tree or a single expression.\n            if ((item as FilteringExpressionsTree).filteringOperands) {\n                const subTree = this.createExpressionsTreeFromObject((item as FilteringExpressionsTree));\n                expressionsTree.filteringOperands.push(subTree);\n            } else {\n                const expr = item as IFilteringExpression;\n                let dataType: string;\n                if (this.grid.columnList.length > 0) {\n                    dataType = this.grid.columnList.find(c => c.field === expr.fieldName).dataType;\n                } else {\n                    dataType = this.state[COLUMNS].find(c => c.field === expr.fieldName).dataType;\n                }\n                // when ESF, values are stored in Set.\n                // First those values are converted to an array before returning string in the stringifyCallback\n                // now we need to convert those back to Set\n                if (Array.isArray(expr.searchVal)) {\n                    expr.searchVal = new Set(expr.searchVal);\n                } else {\n                    expr.searchVal = (dataType === 'date') ? new Date(Date.parse(expr.searchVal)) : expr.searchVal;\n                }\n                expr.condition = this.generateFilteringCondition(dataType, expr.condition.name);\n                expressionsTree.filteringOperands.push(expr);\n            }\n        }\n\n        return expressionsTree;\n    }\n\n    /**\n     * Returns the filtering logic function for a given dataType and condition (contains, greaterThan, etc.)\n     */\n    private generateFilteringCondition(dataType: string, name: string): IFilteringOperation {\n        let filters;\n        switch (dataType) {\n            case DataType.Boolean:\n                filters = IgxBooleanFilteringOperand.instance();\n                break;\n            case DataType.Number:\n                filters = IgxNumberFilteringOperand.instance();\n                break;\n            case DataType.Date:\n                filters = IgxDateFilteringOperand.instance();\n                break;\n            case DataType.String:\n            default:\n                filters = IgxStringFilteringOperand.instance();\n                break;\n        }\n        return filters.condition(name);\n    }\n\n    private stringifyCallback(key: string, val: any) {\n        if (key === 'searchVal' && val instanceof Set) {\n            return Array.from(val);\n        }\n        return val;\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxGridStateDirective],\n    exports: [IgxGridStateDirective]\n})\nexport class IgxGridStateModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IgxButtonModule } from '../../directives/button/button.directive';\nimport { IgxDatePickerModule } from '../../date-picker/date-picker.component';\nimport { IgxIconModule } from '../../icon/index';\nimport { IgxRippleModule } from '../../directives/ripple/ripple.directive';\nimport { IgxInputGroupModule } from '../../input-group/index';\nimport { IgxFocusModule } from '../../directives/focus/focus.directive';\nimport { IgxToggleModule } from '../../directives/toggle/toggle.directive';\nimport { IgxForOfModule } from '../../directives/for-of/for_of.directive';\nimport { IgxTemplateOutletModule } from '../../directives/template-outlet/template_outlet.directive';\nimport { IgxTextHighlightModule } from '../../directives/text-highlight/text-highlight.directive';\nimport { IgxTextSelectionModule } from '../../directives/text-selection/text-selection.directive';\nimport { IgxCheckboxModule } from '../../checkbox/checkbox.component';\nimport { IgxBadgeModule } from '../../badge/badge.component';\nimport { IgxChipsModule } from '../../chips/chips.module';\nimport { IgxDragDropModule } from '../../directives/drag-drop/drag-drop.directive';\nimport { IgxButtonGroupModule } from '../../buttonGroup/buttonGroup.component';\nimport { IgxProgressBarModule } from '../../progressbar/progressbar.component';\nimport { IgxSelectModule } from '../../select/select.module';\nimport { IgxDropDownModule } from '../../drop-down/index';\nimport { IgxGridStateModule } from '../state.directive';\n\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        IgxButtonModule,\n        IgxDatePickerModule,\n        IgxIconModule,\n        IgxRippleModule,\n        IgxInputGroupModule,\n        IgxFocusModule,\n        IgxToggleModule,\n        IgxForOfModule,\n        IgxTemplateOutletModule,\n        IgxTextHighlightModule,\n        IgxTextSelectionModule,\n        IgxCheckboxModule,\n        IgxBadgeModule,\n        IgxChipsModule,\n        IgxDragDropModule,\n        IgxDropDownModule,\n        IgxButtonGroupModule,\n        IgxProgressBarModule,\n        IgxSelectModule,\n        IgxGridStateModule\n    ],\n    exports: [\n        CommonModule,\n        FormsModule,\n        IgxButtonModule,\n        IgxDatePickerModule,\n        IgxIconModule,\n        IgxRippleModule,\n        IgxInputGroupModule,\n        IgxFocusModule,\n        IgxToggleModule,\n        IgxForOfModule,\n        IgxTemplateOutletModule,\n        IgxTextHighlightModule,\n        IgxGridStateModule,\n        IgxTextSelectionModule,\n        IgxCheckboxModule,\n        IgxBadgeModule,\n        IgxChipsModule,\n        IgxDragDropModule,\n        IgxDropDownModule,\n        IgxButtonGroupModule,\n        IgxProgressBarModule,\n        IgxSelectModule\n    ]\n})\nexport class IgxGridSharedModules {}\n","import { NgModule } from '@angular/core';\nimport { IgxGridSharedModules } from '../common/shared.module';\nimport { IgxColumnHidingItemDirective } from './column-hiding-item.directive';\nimport { IgxColumnHidingComponent } from './column-hiding.component';\n\n\n@NgModule({\n    declarations: [\n        IgxColumnHidingComponent,\n        IgxColumnHidingItemDirective\n    ],\n    imports: [\n        IgxGridSharedModules\n    ],\n    exports: [\n        IgxColumnHidingComponent\n    ],\n})\nexport class IgxColumnHidingModule {}\n","import { Component } from '@angular/core';\n\n@Component({\n    selector: 'igx-grid-footer',\n    template: '<ng-content></ng-content>'\n})\nexport class IgxGridFooterComponent {\n}\n","import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Component, Input, Output, NgModule, Optional, Inject, EventEmitter, HostBinding } from '@angular/core';\nimport { CurrentResourceStrings } from '../core/i18n/resources';\nimport { IDisplayDensityOptions, DisplayDensityToken, DisplayDensityBase, DisplayDensity } from '../core/displayDensity';\nimport { IgxSelectModule } from '../select/index';\nimport { IgxIconModule } from '../icon/index';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\n\n@Component({\n    selector: 'igx-paginator',\n    templateUrl: 'paginator.component.html',\n})\nexport class IgxPaginatorComponent extends DisplayDensityBase {\n\n    /**\n     * Total pages calculated from totalRecords and perPage\n     */\n    public totalPages: number;\n    protected _page = 0;\n    protected _totalRecords: number;\n    protected _selectOptions;\n    private defaultSelectValues = [5, 10, 15, 25, 50, 100, 500];\n    protected _perPage = 15;\n\n    /**\n     * Sets the class of the IgxPaginatorComponent based\n     * on the provided displayDensity.\n     */\n    @HostBinding('class.igx-paginator--cosy')\n    public get classCosy(): boolean {\n        return this.displayDensity === DisplayDensity.cosy;\n    }\n\n    @HostBinding('class.igx-paginator--compact')\n    public get classCompact(): boolean {\n        return this.displayDensity === DisplayDensity.compact;\n    }\n\n    @HostBinding('class.igx-paginator')\n    public get classComfortable(): boolean {\n        return this.displayDensity === DisplayDensity.comfortable;\n    }\n\n    /**\n   * An @Input property, sets current page of the `IgxPaginatorComponent`.\n   * The default is 0.\n   * ```typescript\n   * let page = this.paginator.page;\n   * ```\n   * @memberof IgxPaginatorComponent\n   */\n    @Input()\n    public get page() {\n        return this._page;\n    }\n\n    public set page(value: number) {\n        this._page = value;\n        this.pageChange.emit(this._page);\n    }\n\n    /**\n   * An @Input property, sets number of visible items per page in the `IgxPaginatorComponent`.\n   * The default is 15.\n   * ```typescript\n   * let itemsPerPage = this.paginator.perPage;\n   * ```\n   * @memberof IgxPaginatorComponent\n   */\n    @Input()\n    public get perPage() {\n        return this._perPage;\n    }\n\n    public set perPage(value: number) {\n        this._perPage = Number(value);\n        this.perPageChange.emit(this._perPage);\n        this._selectOptions = this.sortUniqueOptions(this.defaultSelectValues, this._perPage);\n        this.totalPages = Math.ceil(this.totalRecords / this._perPage);\n        if (this._page >= this.totalPages) {\n            this._page = this.totalPages - 1;\n        }\n    }\n\n    /**\n    * An @Input property that sets the total records.\n    * ```typescript\n    * let totalRecords = this.paginator.totalRecords;\n    * ```\n    * @memberof IgxPaginatorComponent\n    */\n    @Input()\n    public get totalRecords() {\n        return this._totalRecords;\n    }\n\n    public set totalRecords(value: number) {\n        this._totalRecords = value;\n        this.totalPages = Math.ceil(this.totalRecords / this.perPage);\n    }\n\n    /**\n    * An @Input property that sets custom options in the select of the paginator\n    * ```typescript\n    * let options = this.paginator.selectOptions;\n    * ```\n    * @memberof IgxPaginatorComponent\n    */\n    @Input()\n    public get selectOptions() {\n        return this._selectOptions;\n    }\n\n    public set selectOptions(value: Array<number>) {\n        this._selectOptions = this.sortUniqueOptions(value, this._perPage);\n        this.defaultSelectValues = [...value];\n    }\n    /**\n    * An @Input property that sets if the pager in the paginator should be enabled.\n    * ```html\n    * <igx-paginator [pagerEnabled]=\"true\"></igx-paginator>\n    * ```\n    * @memberof IgxPaginatorComponent\n    */\n    @Input()\n    public pagerEnabled = true;\n\n    /**\n    * An @Input property that sets if the pager in the paginator should be hidden.\n    * ```html\n    * <igx-paginator [pagerHidden]=\"true\"></igx-paginator>\n    * ```\n    * @memberof IgxPaginatorComponent\n    */\n    @Input()\n    public pagerHidden = false;\n\n    /**\n    * An @Input property that sets if the dropdown in the paginator should be enabled.\n    * ```html\n    * <igx-paginator [dropdownEnabled]=\"true\"></igx-paginator>\n    * ```\n    * @memberof IgxPaginatorComponent\n    */\n    @Input()\n    public dropdownEnabled = true;\n\n    /**\n    * An @Input property that sets if the dropdown in the paginator should be hidden.\n    * ```html\n    * <igx-paginator [dropdownHidden]=\"true\"></igx-paginator>\n    * ```\n    * @memberof IgxPaginatorComponent\n    */\n    @Input()\n    public dropdownHidden = false;\n\n    /**\n    * An @Input property, sets number of label of the select.\n    * The default is 'Items per page' localized string.\n    * ```html\n    * <igx-paginator label=\"My custom label\"></igx-paginator>\n    * ```\n    * @memberof IgxPaginatorComponent\n    */\n    @Input()\n    public selectLabel = CurrentResourceStrings.PaginatorResStrings.igx_paginator_label;\n\n    /**\n     *An event that is emitted when the select in the `IgxPaginatorComponent` changes its value.\n    */\n    @Output()\n    public perPageChange = new EventEmitter<number>();\n    /**\n     *An event that is emitted when the paginating is used.\n    */\n    @Output()\n    public pageChange = new EventEmitter<number>();\n\n    constructor(@Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions\n    ) {\n        super(_displayDensityOptions);\n    }\n\n    /**\n     * Returns if the current page is the last page.\n     * ```typescript\n     * const lastPage = this.paginator.isLastPage;\n     * ```\n     */\n    get isLastPage(): boolean {\n        return this.page + 1 >= this.totalPages;\n    }\n\n    /**\n     * Returns if the current page is the first page.\n     * ```typescript\n     * const lastPage = this.paginator.isFirstPage;\n     * ```\n     */\n    get isFirstPage(): boolean {\n        return this.page === 0;\n    }\n\n    private sortUniqueOptions(values: Array<number>, newOption: number): number[] {\n        return Array.from(new Set([...values, newOption])).sort((a, b) => a - b);\n    }\n\n    /**\n     * Sets DisplayDensity for the <select> inside the paginator\n     * @hidden\n     */\n    public paginatorSelectDisplayDensity(): string {\n        if (this.displayDensity === DisplayDensity.comfortable) {\n            return DisplayDensity.cosy;\n        }\n        return DisplayDensity.compact;\n    }\n    /**\n     * Goes to the next page of the `IgxPaginatorComponent`, if the paginator is not already at the last page.\n     * ```typescript\n     * this.paginator.nextPage();\n     * ```\n\t * @memberof IgxPaginatorComponent\n     */\n    public nextPage(): void {\n        if (!this.isLastPage) {\n            this.page += 1;\n        }\n    }\n    /**\n     * Goes to the previous page of the `IgxPaginatorComponent`, if the paginator is not already at the first page.\n     * ```typescript\n     * this.paginator.previousPage();\n     * ```\n\t * @memberof IgxPaginatorComponent\n     */\n    public previousPage(): void {\n        if (!this.isFirstPage) {\n            this.page -= 1;\n        }\n    }\n    /**\n     * Goes to the desired page index.\n     * ```typescript\n     * this.pagiantor.paginate(1);\n     * ```\n     * @param val\n     * @memberof IgxPaginatorComponent\n     */\n    public paginate(val: number): void {\n        if (val < 0 || val > this.totalPages - 1) {\n            return;\n        }\n        this.page = val;\n    }\n}\n\n@NgModule({\n    declarations: [IgxPaginatorComponent],\n    exports: [IgxPaginatorComponent],\n    imports: [CommonModule, IgxSelectModule, FormsModule, IgxIconModule, IgxButtonModule, IgxRippleModule]\n})\nexport class IgxPaginatorModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {\n    IgxGridFilterConditionPipe,\n    IgxGridTransactionPipe,\n    IgxGridNotGroupedPipe,\n    IgxGridTopLevelColumns,\n    IgxGridCellStylesPipe,\n    IgxGridCellStyleClassesPipe,\n    IgxGridPaginatorOptionsPipe,\n    IgxHasVisibleColumnsPipe,\n    IgxDatePipeComponent,\n    IgxDecimalPipeComponent\n} from './pipes';\n\n@NgModule({\n    declarations: [\n        IgxDatePipeComponent,\n        IgxDecimalPipeComponent,\n        IgxGridFilterConditionPipe,\n        IgxGridTransactionPipe,\n        IgxGridNotGroupedPipe,\n        IgxGridTopLevelColumns,\n        IgxGridCellStylesPipe,\n        IgxGridCellStyleClassesPipe,\n        IgxGridPaginatorOptionsPipe,\n        IgxHasVisibleColumnsPipe\n    ],\n    exports: [\n        IgxDatePipeComponent,\n        IgxDecimalPipeComponent,\n        IgxGridFilterConditionPipe,\n        IgxGridTransactionPipe,\n        IgxGridNotGroupedPipe,\n        IgxGridTopLevelColumns,\n        IgxGridCellStylesPipe,\n        IgxGridCellStyleClassesPipe,\n        IgxGridPaginatorOptionsPipe,\n        IgxHasVisibleColumnsPipe\n    ],\n    imports: [\n        CommonModule\n    ]\n  })\nexport class IgxGridPipesModule { }\n","import { Component, ChangeDetectionStrategy, Input } from '@angular/core';\nimport { IgxColumnComponent } from '../../columns/column.component';\nimport { IgxGridBaseDirective } from '../../grid-base.directive';\nimport { DisplayDensity } from '../../../core/density';\nimport { IgxColumnGroupComponent } from '../../columns/column-group.component';\n\n/**\n * @hidden\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-excel-style-column-moving',\n    templateUrl: './excel-style-column-moving.component.html'\n})\nexport class IgxExcelStyleColumnMovingComponent {\n\n    @Input()\n    public column: IgxColumnComponent;\n\n    @Input()\n    public grid: IgxGridBaseDirective;\n\n    @Input()\n    public displayDensity: DisplayDensity;\n\n    @Input()\n    public isColumnPinnable: boolean;\n\n    constructor() {}\n\n    private get visibleColumns() {\n        return this.grid.visibleColumns.filter(col => !(col instanceof IgxColumnGroupComponent));\n    }\n\n    get canNotMoveLeft() {\n        return this.column.visibleIndex === 0 ||\n            (this.grid.unpinnedColumns.indexOf(this.column) === 0 && this.column.disablePinning) ||\n            (this.grid.unpinnedColumns.indexOf(this.column) === 0 && !this.isColumnPinnable) ||\n            (this.column.level !== 0 && !this.findColumn(0, this.visibleColumns));\n    }\n\n    get canNotMoveRight() {\n        return this.column.visibleIndex === this.visibleColumns.length - 1 ||\n            (this.column.level !== 0 && !this.findColumn(1, this.visibleColumns));\n    }\n\n    public onMoveButtonClicked(moveDirection) {\n        let targetColumn;\n        if (this.column.pinned) {\n            if (this.column.isLastPinned && moveDirection === 1) {\n                targetColumn = this.grid.unpinnedColumns[0];\n                moveDirection = 0;\n            } else {\n                targetColumn = this.findColumn(moveDirection, this.grid.pinnedColumns);\n            }\n        } else if (this.grid.unpinnedColumns.indexOf(this.column) === 0 && moveDirection === 0) {\n            targetColumn = this.grid.pinnedColumns[this.grid.pinnedColumns.length - 1];\n            if (targetColumn.parent) {\n                targetColumn = targetColumn.topLevelParent;\n            }\n            moveDirection = 1;\n        } else {\n            targetColumn = this.findColumn(moveDirection, this.grid.unpinnedColumns);\n        }\n        this.grid.moveColumn(this.column, targetColumn, moveDirection);\n    }\n\n    private findColumn(moveDirection: number, columns: IgxColumnComponent[]) {\n        let index = columns.indexOf(this.column);\n        if (moveDirection === 0) {\n            while (index > 0) {\n                index--;\n                if (columns[index].level === this.column.level && columns[index].parent === this.column.parent) {\n                    return columns[index];\n                }\n            }\n        } else {\n            while (index < columns.length - 1) {\n                index++;\n                if (columns[index].level === this.column.level && columns[index].parent === this.column.parent) {\n                    return columns[index];\n                }\n            }\n        }\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { FilterListItem, IgxGridExcelStyleFilteringComponent } from './grid.excel-style-filtering.component';\nimport { cloneArray } from '../../../core/utils';\n\n/**\n * @hidden\n */\n@Pipe({\n    name: 'excelStyleSearchFilter'\n})\nexport class IgxExcelStyleSearchFilterPipe implements PipeTransform {\n    transform(items: FilterListItem[], searchText: string): any[] {\n        if (!items || !items.length) {\n            return [];\n        }\n\n        if (!searchText) {\n            return items;\n        }\n\n        searchText = searchText.toLowerCase();\n        const result = items.filter((it, i) => (i === 0 && it.isSpecial) ||\n            (it.label !== null && it.label !== undefined) &&\n            !it.isBlanks &&\n            it.label.toString().toLowerCase().indexOf(searchText) > -1);\n\n        // If 'result' contains the 'Select All' item and at least one more - we use it, otherwise we use an empty array.\n        return result.length > 1 ? result : [];\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IgxExcelStyleLoadingValuesTemplateDirective } from './excel-style-search.component';\nimport {\n    IgxGridExcelStyleFilteringComponent,\n    IgxExcelStyleSortingTemplateDirective,\n    IgxExcelStyleHidingTemplateDirective,\n    IgxExcelStyleMovingTemplateDirective,\n    IgxExcelStylePinningTemplateDirective\n} from './grid.excel-style-filtering.component';\nimport { IgxExcelStyleSortingComponent } from './excel-style-sorting.component';\nimport { IgxExcelStyleColumnMovingComponent } from './excel-style-column-moving.component';\nimport { IgxExcelStyleSearchComponent } from './excel-style-search.component';\nimport { IgxExcelStyleCustomDialogComponent } from './excel-style-custom-dialog.component';\nimport { IgxExcelStyleDefaultExpressionComponent } from './excel-style-default-expression.component';\nimport { IgxExcelStyleDateExpressionComponent } from './excel-style-date-expression.component';\nimport { IgxSelectionAPIService } from '../../../core/selection';\nimport { FormsModule } from '@angular/forms';\nimport { IgxGridPipesModule } from '../../common/grid-pipes.module';\nimport { IgxButtonModule } from '../../../directives/button/button.directive';\nimport { IgxButtonGroupModule } from '../../../buttonGroup/buttonGroup.component';\nimport { IgxDatePickerModule } from '../../../date-picker/date-picker.component';\nimport { IgxIconModule } from '../../../icon/index';\nimport { IgxRippleModule } from '../../../directives/ripple/ripple.directive';\nimport { IgxInputGroupModule } from '../../../input-group/input-group.component';\nimport { IgxDropDownModule } from '../../../drop-down/index';\nimport { IgxForOfModule } from '../../../directives/for-of/for_of.directive';\nimport { IgxCheckboxModule } from '../../../checkbox/checkbox.component';\nimport { IgxFilterModule } from '../../../directives/filter/filter.directive';\nimport { IgxToggleModule } from '../../../directives/toggle/toggle.directive';\nimport { IgxListModule } from '../../../list/list.component';\nimport { IgxExcelStyleSearchFilterPipe } from './excel-style-search.pipe';\nimport { IgxProgressBarModule } from '../../../progressbar/progressbar.component';\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxGridExcelStyleFilteringComponent,\n        IgxExcelStyleSortingComponent,\n        IgxExcelStyleColumnMovingComponent,\n        IgxExcelStyleSearchComponent,\n        IgxExcelStyleCustomDialogComponent,\n        IgxExcelStyleDefaultExpressionComponent,\n        IgxExcelStyleDateExpressionComponent,\n        IgxExcelStyleSortingTemplateDirective,\n        IgxExcelStyleHidingTemplateDirective,\n        IgxExcelStyleMovingTemplateDirective,\n        IgxExcelStylePinningTemplateDirective,\n        IgxExcelStyleLoadingValuesTemplateDirective,\n        IgxExcelStyleSearchFilterPipe\n    ],\n    exports: [\n        IgxGridExcelStyleFilteringComponent,\n        IgxExcelStyleSortingTemplateDirective,\n        IgxExcelStyleHidingTemplateDirective,\n        IgxExcelStyleMovingTemplateDirective,\n        IgxExcelStylePinningTemplateDirective,\n        IgxExcelStyleLoadingValuesTemplateDirective,\n        IgxExcelStyleDateExpressionComponent\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        IgxGridPipesModule,\n        IgxButtonModule,\n        IgxButtonGroupModule,\n        IgxDatePickerModule,\n        IgxIconModule,\n        IgxRippleModule,\n        IgxInputGroupModule,\n        IgxDropDownModule,\n        IgxForOfModule,\n        IgxCheckboxModule,\n        IgxFilterModule,\n        IgxToggleModule,\n        IgxListModule,\n        IgxProgressBarModule\n    ],\n    entryComponents: [\n        IgxGridExcelStyleFilteringComponent\n    ],\n    providers: [\n        IgxSelectionAPIService\n    ]\n})\nexport class IgxGridExcelStyleFilteringModule {\n\n}\n","import { NgModule } from '@angular/core';\nimport { IgxRowSelectorDirective, IgxHeadSelectorDirective } from './row-selectors';\nimport { IgxGridDragSelectDirective } from './drag-select.directive';\n\n\n@NgModule({\n    declarations: [\n        IgxRowSelectorDirective,\n        IgxHeadSelectorDirective,\n        IgxGridDragSelectDirective\n    ],\n    exports: [\n        IgxRowSelectorDirective,\n        IgxHeadSelectorDirective,\n        IgxGridDragSelectDirective\n    ]\n})\nexport class IgxGridSelectionModule {}\n","import {\n    AfterViewInit,\n    Directive,\n    ElementRef,\n    Input,\n    NgZone,\n    HostListener,\n    OnDestroy\n} from '@angular/core';\nimport { Subject, fromEvent } from 'rxjs';\nimport { debounceTime, takeUntil} from 'rxjs/operators';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IgxColumnResizingService } from './resizing.service';\n\n\n/**\n * @hidden\n * @internal\n */\n@Directive({\n    selector: '[igxResizeHandle]'\n})\nexport class IgxResizeHandleDirective implements AfterViewInit, OnDestroy {\n\n    /**\n     * @hidden\n     */\n    @Input('igxResizeHandle')\n    public column: IgxColumnComponent;\n\n    /**\n     * @hidden\n     */\n    private _dblClick = false;\n\n    /**\n     * @hidden\n     */\n    private destroy$ = new Subject<boolean>();\n\n    private readonly DEBOUNCE_TIME = 200;\n\n    constructor(private zone: NgZone,\n               private element: ElementRef,\n               public colResizingService: IgxColumnResizingService) { }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterViewInit() {\n        if (!this.column.columnGroup && this.column.resizable) {\n            this.zone.runOutsideAngular(() => {\n                fromEvent(this.element.nativeElement, 'mousedown').pipe(\n                    debounceTime(this.DEBOUNCE_TIME),\n                    takeUntil(this.destroy$)\n                ).subscribe((event: MouseEvent) => {\n\n                    if (this._dblClick) {\n                        this._dblClick = false;\n                        return;\n                    }\n\n                    if (event.button === 0) {\n                        this._onResizeAreaMouseDown(event);\n                        this.column.grid.resizeLine.resizer.onMousedown(event);\n                    }\n                });\n            });\n\n            fromEvent(this.element.nativeElement, 'mouseup').pipe(\n                debounceTime(this.DEBOUNCE_TIME),\n                takeUntil(this.destroy$)\n            ).subscribe(() => {\n                this.colResizingService.isColumnResizing = false;\n                this.colResizingService.showResizer = false;\n                this.column.grid.cdr.detectChanges();\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('mouseover')\n    public onMouseOver() {\n        this.colResizingService.resizeCursor = 'col-resize';\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('dblclick')\n    public onDoubleClick() {\n        this._dblClick = true;\n        this.colResizingService.column = this.column;\n        this.colResizingService.autosizeColumnOnDblClick();\n    }\n\n    /**\n     * @hidden\n     */\n    private _onResizeAreaMouseDown(event) {\n        this.colResizingService.column = this.column;\n        this.colResizingService.isColumnResizing = true;\n        this.colResizingService.startResizePos = event.clientX;\n\n        this.colResizingService.showResizer = true;\n        this.column.grid.cdr.detectChanges();\n    }\n}\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IgxColumnResizingService } from './resizing.service';\nimport { IgxGridColumnResizerComponent } from './resizer.component';\nimport { IgxResizeHandleDirective } from './resize-handle.directive';\nimport { IgxColumnResizerDirective } from './resizer.directive';\n\n\n@NgModule({\n    declarations: [\n        IgxGridColumnResizerComponent,\n        IgxResizeHandleDirective,\n        IgxColumnResizerDirective\n    ],\n    imports: [\n        CommonModule\n    ],\n    exports: [\n        IgxGridColumnResizerComponent,\n        IgxResizeHandleDirective,\n        IgxColumnResizerDirective\n    ],\n    providers: [\n        IgxColumnResizingService\n    ]\n})\nexport class IgxGridResizingModule {}\n","import { Directive, Input, OnDestroy, ElementRef, Renderer2, NgZone } from '@angular/core';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { DropPosition, IgxColumnMovingService } from './moving.service';\nimport { Subject, interval } from 'rxjs';\nimport { IgxColumnMovingDragDirective } from './moving.drag.directive';\nimport { takeUntil } from 'rxjs/operators';\nimport { IgxDropDirective } from '../../directives/drag-drop/drag-drop.directive';\nimport { IgxGridForOfDirective } from '../../directives/for-of/for_of.directive';\n\n\n@Directive({\n    selector: '[igxColumnMovingDrop]'\n})\nexport class IgxColumnMovingDropDirective extends IgxDropDirective implements OnDestroy {\n\n    @Input('igxColumnMovingDrop')\n    set data(val: any) {\n        if (val instanceof IgxColumnComponent) {\n            this._column = val;\n        }\n\n        if (val instanceof IgxGridForOfDirective) {\n            this._hVirtDir = val;\n        }\n    }\n\n    get column(): IgxColumnComponent {\n        return this._column;\n    }\n\n    get isDropTarget(): boolean {\n        return this._column && this._column.grid.hasMovableColumns && this.cms.column.movable &&\n            ((!this._column.pinned && this.cms.column.disablePinning) || !this.cms.column.disablePinning);\n    }\n\n    get horizontalScroll(): any {\n        if (this._hVirtDir) {\n            return this._hVirtDir;\n        }\n    }\n\n    private _dropPos: DropPosition;\n    private _dropIndicator: any = null;\n    private _lastDropIndicator: any = null;\n    private _column: IgxColumnComponent;\n    private _hVirtDir: IgxGridForOfDirective<any>;\n    private _dragLeave = new Subject<boolean>();\n    private _dropIndicatorClass = 'igx-grid__th-drop-indicator--active';\n\n    constructor(private elementRef: ElementRef, private renderer: Renderer2, private zone: NgZone, private cms: IgxColumnMovingService) {\n        super(elementRef, renderer, zone);\n    }\n\n    public ngOnDestroy() {\n        this._dragLeave.next(true);\n        this._dragLeave.complete();\n    }\n\n    public onDragOver(event) {\n        const drag = event.detail.owner;\n        if (!(drag instanceof IgxColumnMovingDragDirective)) {\n            return;\n        }\n\n        if (this.isDropTarget &&\n            this.cms.column !== this.column &&\n            this.cms.column.level === this.column.level &&\n            this.cms.column.parent === this.column.parent) {\n\n            if (this._lastDropIndicator) {\n                this.renderer.removeClass(this._dropIndicator, this._dropIndicatorClass);\n            }\n\n            const clientRect = this.elementRef.nativeElement.getBoundingClientRect();\n            const pos = clientRect.left + clientRect.width / 2;\n\n            const parent = this.elementRef.nativeElement.parentElement;\n            if (event.detail.pageX < pos) {\n                this._dropPos = DropPosition.BeforeDropTarget;\n                this._lastDropIndicator = this._dropIndicator = parent.firstElementChild;\n            } else {\n                this._dropPos = DropPosition.AfterDropTarget;\n                this._lastDropIndicator = this._dropIndicator = parent.lastElementChild;\n            }\n\n            if (this.cms.icon.innerText !== 'block') {\n                this.renderer.addClass(this._dropIndicator, this._dropIndicatorClass);\n            }\n        }\n    }\n\n    public onDragEnter(event) {\n        const drag = event.detail.owner;\n        if (!(drag instanceof IgxColumnMovingDragDirective)) {\n            return;\n        }\n\n        if (this.column && this.cms.column.grid.id !== this.column.grid.id) {\n            this.cms.icon.innerText = 'block';\n            return;\n        }\n\n        if (this.isDropTarget &&\n            this.cms.column !== this.column &&\n            this.cms.column.level === this.column.level &&\n            this.cms.column.parent === this.column.parent) {\n\n                if (!this.column.pinned || (this.column.pinned && this.cms.column.pinned)) {\n                    this.cms.icon.innerText = 'swap_horiz';\n                }\n\n                this.cms.icon.innerText = 'lock';\n            } else {\n                this.cms.icon.innerText = 'block';\n            }\n\n            if (this.horizontalScroll) {\n                this.cms.icon.innerText = event.target.id === 'right' ? 'arrow_forward' : 'arrow_back';\n\n                interval(100).pipe(takeUntil(this._dragLeave)).subscribe(() => {\n                    this.cms.column.grid.wheelHandler();\n                    event.target.id === 'right' ? this.horizontalScroll.scrollPosition += 15 :\n                        this.horizontalScroll.scrollPosition -= 15;\n                });\n            }\n    }\n\n    public onDragLeave(event) {\n        const drag = event.detail.owner;\n        if (!(drag instanceof IgxColumnMovingDragDirective)) {\n            return;\n        }\n\n        this.cms.icon.innerText = 'block';\n\n        if (this._dropIndicator) {\n            this.renderer.removeClass(this._dropIndicator, this._dropIndicatorClass);\n        }\n\n        if (this.horizontalScroll) {\n            this._dragLeave.next(true);\n        }\n    }\n\n    public onDragDrop(event) {\n        event.preventDefault();\n        const drag = event.detail.owner;\n        if (!(drag instanceof IgxColumnMovingDragDirective)) {\n            return;\n        }\n\n        if (this.column && (this.cms.column.grid.id !== this.column.grid.id)) {\n            return;\n        }\n\n        if (this.horizontalScroll) {\n            this._dragLeave.next(true);\n        }\n\n        if (this.isDropTarget) {\n            const args = {\n                source: this.cms.column,\n                target: this.column\n            };\n\n            this.column.grid.moveColumn(this.cms.column, this.column, this._dropPos);\n\n            this.column.grid.draggedColumn = null;\n            this.column.grid.cdr.detectChanges();\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { IgxColumnMovingDragDirective } from './moving.drag.directive';\nimport { IgxColumnMovingDropDirective } from './moving.drop.directive';\n\n\n@NgModule({\n    declarations: [\n        IgxColumnMovingDropDirective,\n        IgxColumnMovingDragDirective\n    ],\n    exports: [\n        IgxColumnMovingDropDirective,\n        IgxColumnMovingDragDirective\n    ]\n})\nexport class IgxColumnMovingModule {}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { GridType } from '../common/grid.interface';\n\n@Pipe({\n    name: 'igxGridSummaryDataPipe',\n    pure: true\n})\nexport class IgxSummaryDataPipe implements PipeTransform {\n\n    constructor(private gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) { }\n\n    transform(id: string, trigger: number = 0) {\n        const summaryService = this.gridAPI.grid.summaryService;\n        return summaryService.calculateSummaries(\n            summaryService.rootSummaryID,\n            this.gridAPI.get_summary_data()\n        );\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { IgxSummaryCellComponent } from './summary-cell.component';\nimport { IgxSummaryRowComponent } from './summary-row.component';\nimport { IgxSummaryDataPipe } from './grid-root-summary.pipe';\nimport { IgxGridSharedModules } from '../common/shared.module';\nimport { IgxGridPipesModule } from '../common/grid-pipes.module';\n\n\n@NgModule({\n    declarations: [\n        IgxSummaryCellComponent,\n        IgxSummaryRowComponent,\n        IgxSummaryDataPipe\n    ],\n    imports: [\n        IgxGridPipesModule,\n        IgxGridSharedModules\n    ],\n    exports: [\n        IgxSummaryCellComponent,\n        IgxSummaryRowComponent,\n        IgxSummaryDataPipe\n    ]\n})\nexport class IgxGridSummaryModule {}\n","import { NgModule } from '@angular/core';\nimport { IgxColumnPinningItemDirective } from './pinning.directive';\nimport { IgxColumnPinningComponent } from './column-pinning.component';\nimport { IgxGridSharedModules } from '../common/shared.module';\n\n\n@NgModule({\n    declarations: [\n        IgxColumnPinningItemDirective,\n        IgxColumnPinningComponent\n    ],\n    imports: [\n        IgxGridSharedModules\n    ],\n    exports: [\n        IgxColumnPinningComponent\n    ]\n})\nexport class IgxColumnPinningModule {}\n","import { NgModule } from '@angular/core';\nimport { IgxGridToolbarComponent } from './grid-toolbar.component';\nimport { IgxGridToolbarCustomContentDirective } from './toolbar.directive';\nimport { IgxGridSharedModules } from '../common/shared.module';\nimport { IgxColumnHidingModule } from '../hiding/hiding.module';\nimport { IgxColumnPinningModule } from '../pinning/pinning.module';\n\n\n@NgModule({\n    declarations: [\n        IgxGridToolbarComponent,\n        IgxGridToolbarCustomContentDirective\n    ],\n    imports: [\n        IgxGridSharedModules,\n        IgxColumnHidingModule,\n        IgxColumnPinningModule\n    ],\n    exports: [\n        IgxGridToolbarComponent,\n        IgxGridToolbarCustomContentDirective\n    ]\n})\nexport class IgxGridToolbarModule {}\n","import {\n    AfterContentInit,\n    Component,\n    ChangeDetectionStrategy,\n    forwardRef,\n    Input\n} from '@angular/core';\nimport { IgxColumnComponent } from './column.component';\nimport { IgxColumnGroupComponent } from './column-group.component';\n\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [{ provide: IgxColumnComponent, useExisting: forwardRef(() => IgxColumnLayoutComponent) }],\n    selector: 'igx-column-layout',\n    template: ``\n})\nexport class IgxColumnLayoutComponent extends IgxColumnGroupComponent implements AfterContentInit {\n    public childrenVisibleIndexes = [];\n    /**\n     * Gets the width of the column layout.\n     * ```typescript\n     * let columnGroupWidth = this.columnGroup.width;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    get width(): any {\n        const width = this.getFilledChildColumnSizes(this.children).reduce((acc, val) => acc + parseInt(val, 10), 0);\n        return width;\n    }\n\n    set width(val: any) { }\n\n    get columnLayout() {\n        return true;\n    }\n\n    /**\n     * @hidden\n     */\n    public getCalcWidth(): any {\n        let borderWidth = 0;\n\n        if (this.headerGroup && this.headerGroup.hasLastPinnedChildColumn) {\n            const headerStyles = this.grid.document.defaultView.getComputedStyle(this.headerGroup.element.nativeElement.children[0]);\n            borderWidth = parseInt(headerStyles.borderRightWidth, 10);\n        }\n\n        return super.getCalcWidth() + borderWidth;\n    }\n\n    /**\n     * Gets the column visible index.\n     * If the column is not visible, returns `-1`.\n     * ```typescript\n     * let visibleColumnIndex =  this.column.visibleIndex;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get visibleIndex(): number {\n        if (!isNaN(this._vIndex)) {\n            return this._vIndex;\n        }\n\n        const unpinnedColumns = this.grid.unpinnedColumns.filter(c => c.columnLayout && !c.hidden);\n        const pinnedColumns = this.grid.pinnedColumns.filter(c => c.columnLayout && !c.hidden);\n        let vIndex = -1;\n\n        if (!this.pinned) {\n            const indexInCollection = unpinnedColumns.indexOf(this);\n            vIndex = indexInCollection === -1 ? -1 : pinnedColumns.length + indexInCollection;\n        } else {\n            vIndex = pinnedColumns.indexOf(this);\n        }\n        this._vIndex = vIndex;\n        return vIndex;\n    }\n\n    /*\n     * Gets whether the column layout is hidden.\n     * ```typescript\n     * let isHidden = this.columnGroup.hidden;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    @Input()\n    get hidden() {\n        return this._hidden;\n    }\n\n    /**\n     * Sets the column layout hidden property.\n     * ```typescript\n     * <igx-column-layout [hidden] = \"true\"></igx-column->\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    set hidden(value: boolean) {\n        this._hidden = value;\n        this.children.forEach(child => child.hidden = value);\n        if (this.grid && this.grid.columns && this.grid.columns.length > 0) {\n            // reset indexes in case columns are hidden/shown runtime\n            this.grid.columns.filter(x => x.columnGroup).forEach(x => x.populateVisibleIndexes());\n        }\n    }\n\n    /**\n     *@hidden\n    */\n    ngAfterContentInit() {\n        super.ngAfterContentInit();\n        if (!this.hidden) {\n            this.hidden = this.allChildren.some(x => x.hidden);\n        } else {\n            this.children.forEach(child => child.hidden = this.hidden);\n        }\n\n        this.children.forEach(child => {\n            child.movable = false;\n        });\n    }\n\n    /*\n     * Gets whether the group contains the last pinned child column of the column layout.\n     * ```typescript\n     * let columsHasLastPinned = this.columnLayout.hasLastPinnedChildColumn;\n     * ```\n     * @memberof IgxColumnLayoutComponent\n     */\n    get hasLastPinnedChildColumn() {\n        return this.children.some(child => child.isLastPinned);\n    }\n\n    /**\n     *@hidden\n    */\n    public populateVisibleIndexes() {\n        this.childrenVisibleIndexes = [];\n        const grid = this.gridAPI.grid;\n        const columns = grid && grid.pinnedColumns && grid.unpinnedColumns ? grid.pinnedColumns.concat(grid.unpinnedColumns) : [];\n        const orderedCols = columns\n            .filter(x => !x.columnGroup && !x.hidden)\n            .sort((a, b) => a.rowStart - b.rowStart || columns.indexOf(a.parent) - columns.indexOf(b.parent) || a.colStart - b.colStart);\n        this.children.forEach(child => {\n            const rs = child.rowStart || 1;\n            let vIndex = 0;\n            // filter out all cols with larger rowStart\n            const cols = orderedCols.filter(c =>\n                !c.columnGroup && (c.rowStart || 1) <= rs);\n            vIndex = cols.indexOf(child);\n            this.childrenVisibleIndexes.push({ column: child, index: vIndex });\n        });\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { IgxColumnComponent } from './column.component';\nimport { IgxColumnGroupComponent } from './column-group.component';\nimport { IgxColumnLayoutComponent } from './column-layout.component';\nimport {\n    IgxCellEditorTemplateDirective,\n    IgxCellFooterTemplateDirective,\n    IgxCellHeaderTemplateDirective,\n    IgxCellTemplateDirective,\n    IgxCollapsibleIndicatorTemplateDirective,\n    IgxFilterCellTemplateDirective\n} from './templates.directive';\n\n\n@NgModule({\n    declarations: [\n        IgxFilterCellTemplateDirective,\n        IgxCellTemplateDirective,\n        IgxCellHeaderTemplateDirective,\n        IgxCellFooterTemplateDirective,\n        IgxCellEditorTemplateDirective,\n        IgxCollapsibleIndicatorTemplateDirective,\n        IgxColumnComponent,\n        IgxColumnGroupComponent,\n        IgxColumnLayoutComponent\n    ],\n    entryComponents: [\n        IgxColumnComponent,\n        IgxColumnGroupComponent,\n        IgxColumnLayoutComponent\n    ],\n    exports: [\n        IgxFilterCellTemplateDirective,\n        IgxCellTemplateDirective,\n        IgxCellHeaderTemplateDirective,\n        IgxCellFooterTemplateDirective,\n        IgxCellEditorTemplateDirective,\n        IgxCollapsibleIndicatorTemplateDirective,\n        IgxColumnComponent,\n        IgxColumnGroupComponent,\n        IgxColumnLayoutComponent\n    ]\n})\nexport class IgxGridColumnModule {}\n","import { NgModule } from '@angular/core';\nimport { IgxGridFilteringCellComponent } from './grid-filtering-cell.component';\nimport { IgxGridFilteringRowComponent } from './grid-filtering-row.component';\nimport { IgxGridSharedModules } from '../../common/shared.module';\nimport { IgxGridPipesModule } from '../../common/grid-pipes.module';\n\n\n@NgModule({\n    declarations: [\n        IgxGridFilteringCellComponent,\n        IgxGridFilteringRowComponent\n    ],\n    imports: [\n        IgxGridSharedModules,\n        IgxGridPipesModule\n    ],\n    exports: [\n        IgxGridFilteringCellComponent,\n        IgxGridFilteringRowComponent\n    ]\n})\nexport class IgxGridFilteringModule {}\n","import { NgModule } from '@angular/core';\nimport { IgxGridHeaderComponent } from './grid-header.component';\nimport { IgxGridHeaderGroupComponent } from './grid-header-group.component';\nimport { IgxGridSharedModules } from '../common/shared.module';\nimport { IgxColumnMovingModule } from '../moving/moving.module';\nimport { IgxGridFilteringModule } from '../filtering/base/filtering.module';\nimport { IgxGridResizingModule } from '../resizing/resize.module';\n\n\n@NgModule({\n    declarations: [\n        IgxGridHeaderComponent,\n        IgxGridHeaderGroupComponent\n    ],\n    imports: [\n        IgxGridSharedModules,\n        IgxGridFilteringModule,\n        IgxColumnMovingModule,\n        IgxGridResizingModule\n    ],\n    exports: [\n        IgxGridHeaderComponent,\n        IgxGridHeaderGroupComponent\n    ]\n})\nexport class IgxGridHeadersModule {}\n","import { NgModule } from '@angular/core';\nimport { IgxGridCellComponent } from './cell.component';\nimport { IgxGridFooterComponent } from './grid-footer/grid-footer.component';\nimport {\n    IgxGridBodyDirective\n} from './grid.common';\nimport { IgxGridTransaction, IgxGridBaseDirective } from './grid-base.directive';\nimport { IgxBaseTransactionService } from '../services/transaction/base-transaction';\nimport {\n    IgxRowEditTemplateDirective,\n    IgxRowEditActionsDirective,\n    IgxRowEditTextDirective,\n    IgxRowEditTabStopDirective\n} from './grid.rowEdit.directive';\nimport { IgxPaginatorModule } from '../paginator/paginator.component';\nimport { IgxGridPipesModule } from './common/grid-pipes.module';\nimport { IgxGridExcelStyleFilteringModule } from './filtering/excel-style/grid.excel-style-filtering.module';\nimport { IgxRowDragModule } from './row-drag.directive';\nimport { IgxAdvancedFilteringDialogComponent } from './filtering/advanced-filtering/advanced-filtering-dialog.component';\nimport { IgxGridSelectionModule } from './selection/selection.module';\nimport { IgxGridResizingModule } from './resizing/resize.module';\nimport { IgxColumnMovingModule } from './moving/moving.module';\nimport { IgxGridSharedModules } from './common/shared.module';\nimport { IgxGridSummaryModule } from './summaries/summary.module';\nimport { IgxGridToolbarModule } from './toolbar/toolbar.module';\nimport { IgxColumnHidingModule } from './hiding/hiding.module';\nimport { IgxColumnPinningModule } from './pinning/pinning.module';\nimport { IgxGridColumnModule } from './columns/column.module';\nimport { IgxGridHeadersModule } from './headers/headers.module';\nimport { IgxGridFilteringModule } from './filtering/base/filtering.module';\nimport { IgxRowDirective } from './row.directive';\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxGridBaseDirective,\n        IgxRowDirective,\n        IgxGridCellComponent,\n        IgxRowEditTemplateDirective,\n        IgxRowEditActionsDirective,\n        IgxRowEditTextDirective,\n        IgxRowEditTabStopDirective,\n        IgxGridBodyDirective,\n        IgxGridFooterComponent,\n        IgxAdvancedFilteringDialogComponent\n    ],\n    entryComponents: [\n        IgxAdvancedFilteringDialogComponent\n    ],\n    exports: [\n        IgxGridCellComponent,\n        IgxRowEditTemplateDirective,\n        IgxRowEditActionsDirective,\n        IgxRowEditTextDirective,\n        IgxRowEditTabStopDirective,\n        IgxGridBodyDirective,\n        IgxColumnHidingModule,\n        IgxColumnPinningModule,\n        IgxGridColumnModule,\n        IgxGridHeadersModule,\n        IgxGridPipesModule,\n        IgxGridFilteringModule,\n        IgxGridExcelStyleFilteringModule,\n        IgxRowDragModule,\n        IgxPaginatorModule,\n        IgxGridFooterComponent,\n        IgxGridResizingModule,\n        IgxColumnMovingModule,\n        IgxGridSelectionModule,\n        IgxGridSummaryModule,\n        IgxGridToolbarModule,\n        IgxAdvancedFilteringDialogComponent,\n        IgxGridSharedModules\n    ],\n    imports: [\n        IgxGridColumnModule,\n        IgxGridHeadersModule,\n        IgxColumnMovingModule,\n        IgxGridResizingModule,\n        IgxColumnPinningModule,\n        IgxGridSelectionModule,\n        IgxGridSummaryModule,\n        IgxGridToolbarModule,\n        IgxColumnHidingModule,\n        IgxGridPipesModule,\n        IgxGridFilteringModule,\n        IgxGridExcelStyleFilteringModule,\n        IgxRowDragModule,\n        IgxPaginatorModule,\n        IgxGridSharedModules\n    ],\n    providers: [\n        { provide: IgxGridTransaction, useClass: IgxBaseTransactionService }\n    ]\n})\nexport class IgxGridCommonModule { }\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { cloneArray } from '../../core/utils';\nimport { DataUtil } from '../../data-operations/data-util';\nimport { IGroupByExpandState } from '../../data-operations/groupby-expand-state.interface';\nimport { IGroupByResult } from '../../data-operations/grouping-result.interface';\nimport { IFilteringExpressionsTree, FilteringExpressionsTree } from '../../data-operations/filtering-expressions-tree';\nimport { ISortingExpression } from '../../data-operations/sorting-expression.interface';\nimport { IgxGridAPIService } from './grid-api.service';\nimport { IgxGridComponent } from './grid.component';\nimport { IGroupingExpression } from '../../data-operations/grouping-expression.interface';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { GridType } from '../common/grid.interface';\nimport { IFilteringStrategy } from '../../data-operations/filtering-strategy';\nimport { IGridSortingStrategy } from '../../data-operations/sorting-strategy';\n\n/**\n *@hidden\n */\n@Pipe({\n    name: 'gridSort',\n    pure: true\n})\nexport class IgxGridSortingPipe implements PipeTransform {\n    private gridAPI: IgxGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxGridAPIService>gridAPI;\n    }\n\n    public transform(collection: any[], expressions: ISortingExpression[], sorting: IGridSortingStrategy,\n                     id: string, pipeTrigger: number): any[] {\n        const grid = this.gridAPI.grid;\n        let result: any[];\n\n        if (!expressions.length) {\n            result = collection;\n        } else {\n            result = DataUtil.sort(cloneArray(collection), expressions, sorting);\n        }\n        grid.filteredSortedData = result;\n\n        return result;\n    }\n}\n\n/**\n *@hidden\n */\n@Pipe({\n    name: 'gridGroupBy',\n    pure: true\n})\nexport class IgxGridGroupingPipe implements PipeTransform {\n    private gridAPI: IgxGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxGridAPIService>gridAPI;\n    }\n\n    public transform(collection: any[], expression: IGroupingExpression | IGroupingExpression[],\n        expansion: IGroupByExpandState | IGroupByExpandState[], defaultExpanded: boolean,\n        id: string, groupsRecords: any[], pipeTrigger: number): IGroupByResult {\n\n        const state = { expressions: [], expansion: [], defaultExpanded };\n        const grid: IgxGridComponent = this.gridAPI.grid;\n        state.expressions = grid.groupingExpressions;\n        let result: IGroupByResult;\n        const fullResult: IGroupByResult = { data: [], metadata: [] };\n\n        if (!state.expressions.length) {\n            // empty the array without changing reference\n            groupsRecords.splice(0, groupsRecords.length);\n            result = {\n                data: collection,\n                metadata: collection\n            };\n        } else {\n            state.expansion = grid.groupingExpansionState;\n            state.defaultExpanded = grid.groupsExpanded;\n            result = DataUtil.group(cloneArray(collection), state, grid, groupsRecords, fullResult);\n        }\n        grid.groupingFlatResult = result.data;\n        grid.groupingResult = fullResult.data;\n        grid.groupingMetadata = fullResult.metadata;\n        return result;\n    }\n}\n\n/**\n *@hidden\n */\n@Pipe({\n    name: 'gridPaging',\n    pure: true\n})\nexport class IgxGridPagingPipe implements PipeTransform {\n\n    constructor(private gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) { }\n\n    public transform(collection: IGroupByResult, page = 0, perPage = 15, id: string, pipeTrigger: number): IGroupByResult {\n\n        if (!this.gridAPI.grid.paging) {\n            return collection;\n        }\n\n        const state = {\n            index: page,\n            recordsPerPage: perPage\n        };\n        DataUtil.correctPagingState(state, collection.data.length);\n\n        const result = {\n            data: DataUtil.page(cloneArray(collection.data), state),\n            metadata: DataUtil.page(cloneArray(collection.metadata), state)\n        };\n        if (this.gridAPI.grid.page !== state.index) {\n            this.gridAPI.grid.page = state.index;\n        }\n        this.gridAPI.grid.pagingState = state;\n        return result;\n    }\n}\n\n/**\n *@hidden\n */\n@Pipe({\n    name: 'gridFiltering',\n    pure: true\n})\nexport class IgxGridFilteringPipe implements PipeTransform {\n\n    constructor(private gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) { }\n\n    public transform(collection: any[], expressionsTree: IFilteringExpressionsTree,\n        filterStrategy: IFilteringStrategy,\n        advancedExpressionsTree: IFilteringExpressionsTree, id: string, pipeTrigger: number, filteringPipeTrigger: number) {\n        const grid = this.gridAPI.grid;\n        const state = {\n            expressionsTree: expressionsTree,\n            strategy: filterStrategy,\n            advancedExpressionsTree: advancedExpressionsTree\n        };\n\n        if (FilteringExpressionsTree.empty(state.expressionsTree) && FilteringExpressionsTree.empty(state.advancedExpressionsTree)) {\n            return collection;\n        }\n\n        const result = DataUtil.filter(cloneArray(collection), state);\n        grid.filteredData = result;\n        return result;\n    }\n}\n","import { Component, forwardRef, ChangeDetectionStrategy,\n     ElementRef, ChangeDetectorRef, HostBinding, ViewChildren, QueryList } from '@angular/core';\nimport { IgxGridComponent } from './grid.component';\nimport { IgxRowDirective } from '../row.directive';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridSelectionService, IgxGridCRUDService } from '../selection/selection.service';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-row',\n    templateUrl: './grid-row.component.html',\n    providers: [{ provide: IgxRowDirective, useExisting: forwardRef(() => IgxGridRowComponent) }]\n})\nexport class IgxGridRowComponent extends IgxRowDirective<IgxGridComponent> {\n\n    // R.K. TODO: Remove\n    constructor(\n        public gridAPI: GridBaseAPIService<IgxGridComponent>,\n        public crudService: IgxGridCRUDService,\n        public selectionService: IgxGridSelectionService,\n        public element: ElementRef,\n        public cdr: ChangeDetectorRef) {\n            // D.P. constructor duplication due to es6 compilation, might be obsolete in the future\n            super(gridAPI, crudService, selectionService, element, cdr);\n        }\n\n    @ViewChildren('cell')\n    private _cells: QueryList<any>;\n\n    public get cells() {\n        const res = new QueryList<any>();\n        if (!this._cells) {\n            return res;\n        }\n        const cList = this._cells.toArray().sort((item1, item2) => item1.column.visibleIndex - item2.column.visibleIndex);\n        res.reset(cList);\n        return res;\n    }\n\n    public set cells(cells) {\n\n    }\n\n    @HostBinding('class.igx-grid__tr--mrl')\n    get hasColumnLayouts(): boolean {\n        return this.grid.hasColumnLayouts;\n    }\n\n    getContext(col, row) {\n        return {\n            $implicit: col,\n            row: row\n        };\n    }\n\n    get expanded() {\n        return this.gridAPI.get_row_expansion_state(this.rowData);\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { IgxGridAPIService } from './grid-api.service';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { IgxGridComponent } from './grid.component';\nimport { ISummaryRecord } from '../summaries/grid-summary';\nimport { IGroupByRecord } from '../../data-operations/groupby-record.interface';\nimport { IGroupByResult } from '../../data-operations/grouping-result.interface';\nimport { GridSummaryCalculationMode, GridSummaryPosition } from '../common/enums';\nimport { GridType } from '../common/grid.interface';\n\n/** @hidden */\ninterface ISkipRecord {\n    skip?: boolean;\n}\n\n/** @hidden */\n@Pipe({\n    name: 'gridSummary',\n    pure: true\n})\nexport class IgxGridSummaryPipe implements PipeTransform {\n    private gridAPI: IgxGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxGridAPIService>gridAPI;\n    }\n\n    public transform(collection: IGroupByResult,\n        hasSummary: boolean,\n        summaryCalculationMode: GridSummaryCalculationMode,\n        summaryPosition: GridSummaryPosition,\n        id: string, pipeTrigger: number, summaryPipeTrigger: number): any[] {\n\n        if (!collection.data || !hasSummary || summaryCalculationMode === GridSummaryCalculationMode.rootLevelOnly) {\n            return collection.data;\n        }\n\n        return this.addSummaryRows(id, collection, summaryPosition);\n    }\n\n    private addSummaryRows(gridId: string, collection: IGroupByResult, summaryPosition: GridSummaryPosition): any[] {\n        const recordsWithSummary = [];\n        const lastChildMap = new Map<any, IGroupByRecord[]>();\n        const grid: IgxGridComponent = this.gridAPI.grid;\n        const maxSummaryHeight = grid.summaryService.calcMaxSummaryHeight();\n\n        if (collection.metadata.length && !grid.isGroupByRecord(collection.data[0]) &&\n            grid.isGroupByRecord(collection.metadata[0]) && summaryPosition === GridSummaryPosition.bottom) {\n            const groups: Array<IGroupByRecord & ISkipRecord> = [];\n            groups.push(collection.metadata[0]);\n            while (groups[groups.length - 1].groupParent) {\n                groups.push(groups[groups.length - 1].groupParent);\n            }\n            groups.reverse();\n            groups.forEach(g => g.skip = true);\n            collection.data.splice(0, 0, ...groups);\n        }\n        for (let i = 0; i < collection.data.length; i++) {\n            const record = collection.data[i];\n            let skipAdd = false;\n            let recordId;\n            let groupByRecord: IGroupByRecord = null;\n            if (grid.isGroupByRecord(record)) {\n                skipAdd = !!record.skip;\n                record.skip = null;\n                groupByRecord = record as IGroupByRecord;\n                recordId = this.gridAPI.get_groupBy_record_id(groupByRecord);\n            } else {\n                recordId = this.gridAPI.get_row_id(record);\n            }\n            if (!skipAdd) {\n                recordsWithSummary.push(record);\n            }\n\n            if (summaryPosition === GridSummaryPosition.bottom && lastChildMap.has(recordId)) {\n                const groupRecords = lastChildMap.get(recordId);\n\n                for (let j = 0; j < groupRecords.length; j++) {\n                    const groupRecord = groupRecords[j];\n                    const groupRecordId = this.gridAPI.get_groupBy_record_id(groupRecord);\n                    const records = this.removeDeletedRecord(grid, groupRecord.records.slice());\n                    const summaries = grid.summaryService.calculateSummaries(groupRecordId, records);\n                    const summaryRecord: ISummaryRecord = {\n                        summaries: summaries,\n                        max: maxSummaryHeight\n                    };\n                    recordsWithSummary.push(summaryRecord);\n                }\n            }\n\n            if (groupByRecord === null || !grid.isExpandedGroup(groupByRecord)) {\n                continue;\n            }\n\n            if (summaryPosition === GridSummaryPosition.top) {\n                const records = this.removeDeletedRecord(grid, groupByRecord.records.slice());\n                const summaries = grid.summaryService.calculateSummaries(recordId, records);\n                const summaryRecord: ISummaryRecord = {\n                    summaries: summaries,\n                    max: maxSummaryHeight\n                };\n                recordsWithSummary.push(summaryRecord);\n            } else if (summaryPosition === GridSummaryPosition.bottom) {\n                let lastChild = groupByRecord;\n\n                while (lastChild.groups && lastChild.groups.length > 0 && grid.isExpandedGroup(lastChild)) {\n                    lastChild = lastChild.groups[lastChild.groups.length - 1];\n                }\n\n                let lastChildId;\n                if (grid.isExpandedGroup(lastChild)) {\n                    lastChildId = this.gridAPI.get_row_id(lastChild.records[lastChild.records.length - 1]);\n                } else {\n                    lastChildId = this.gridAPI.get_groupBy_record_id(lastChild);\n                }\n\n                let groupRecords = lastChildMap.get(lastChildId);\n                if (!groupRecords) {\n                    groupRecords = [];\n                    lastChildMap.set(lastChildId, groupRecords);\n                }\n                groupRecords.unshift(groupByRecord);\n            }\n        }\n\n        return recordsWithSummary;\n    }\n\n    private removeDeletedRecord(grid, data) {\n        if (!grid.transactions.enabled) {\n            return data;\n        }\n        const deletedRows = grid.transactions.getTransactionLog().filter(t => t.type === 'delete').map(t => t.id);\n        deletedRows.forEach(rowID => {\n            const tempData = grid.primaryKey ? data.map(rec => rec[grid.primaryKey]) : data;\n            const index = tempData.indexOf(rowID);\n            if (index !== -1) {\n                data.splice(index, 1);\n            }\n        });\n        return data;\n    }\n}\n","import { PipeTransform, Pipe } from '@angular/core';\nimport { GridType } from '../common/grid.interface';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridAPIService } from './grid-api.service';\n\n/** @hidden */\n@Pipe({\n    name: 'gridDetails',\n    pure: true\n})\nexport class IgxGridDetailsPipe implements PipeTransform {\n    private gridAPI: IgxGridAPIService;\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxGridAPIService>gridAPI;\n    }\n    public transform(collection: any[], hasDetails: boolean, expansionStates:  Map<any, boolean>, pipeTrigger: number) {\n        if (!hasDetails) {\n            return collection;\n        }\n        const res = this.addDetailRows(collection, expansionStates);\n        return res;\n    }\n\n    protected addDetailRows(collection: any[], expansionStates: Map<any, boolean>) {\n        const result = [];\n        collection.forEach((v) => {\n            result.push(v);\n            if (!this.gridAPI.grid.isGroupByRecord(v) && !this.gridAPI.grid.isSummaryRow(v) &&\n                this.gridAPI.get_row_expansion_state(v)) {\n                const detailsObj = { detailsData: v };\n                result.push(detailsObj);\n            }\n        });\n        return result;\n    }\n}\n","import { Component, ChangeDetectorRef, ElementRef, ViewChild, Inject,\n     ChangeDetectionStrategy, NgZone, OnInit, Input, TemplateRef } from '@angular/core';\nimport { IgxGridCellComponent } from '../cell.component';\nimport { GridBaseAPIService } from '../api.service';\nimport { getNodeSizeViaRange, PlatformUtil } from '../../core/utils';\nimport { DOCUMENT } from '@angular/common';\nimport { IgxGridBaseDirective } from '.';\nimport { IgxGridSelectionService, IgxGridCRUDService } from '../selection/selection.service';\nimport { HammerGesturesManager } from '../../core/touch';\nimport { GridType } from '../common/grid.interface';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    selector: 'igx-expandable-grid-cell',\n    templateUrl: 'expandable-cell.component.html',\n    providers: [HammerGesturesManager]\n})\nexport class IgxGridExpandableCellComponent extends IgxGridCellComponent implements OnInit {\n\n    constructor(\n                selectionService: IgxGridSelectionService,\n                crudService: IgxGridCRUDService,\n                gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n                cdr: ChangeDetectorRef,\n                element: ElementRef,\n                protected zone: NgZone,\n                touchManager: HammerGesturesManager,\n                @Inject(DOCUMENT) public document,\n                protected platformUtil: PlatformUtil) {\n        super(selectionService, crudService, gridAPI, cdr, element, zone, touchManager, platformUtil);\n    }\n\n    /**\n     * @hidden\n    */\n    @Input()\n    expanded = false;\n\n    @ViewChild('indicator', { read: ElementRef })\n    public indicator: ElementRef;\n\n    @ViewChild('indentationDiv', { read: ElementRef })\n    public indentationDiv: ElementRef;\n\n    /**\n    * @hidden\n    */\n   @ViewChild('defaultExpandedTemplate', { read: TemplateRef, static: true })\n   protected defaultExpandedTemplate: TemplateRef<any>;\n\n    /**\n    * @hidden\n    */\n   @ViewChild('defaultCollapsedTemplate', { read: TemplateRef, static: true })\n   protected defaultCollapsedTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n    public toggle(event: Event) {\n        event.stopPropagation();\n        const expansionState = this.gridAPI.get_row_expansion_state(this.row.rowData);\n        this.gridAPI.set_row_expansion_state(this.row.rowID, !expansionState, event);\n    }\n\n    /**\n     * @hidden\n     */\n    public onIndicatorFocus() {\n        this.gridAPI.submit_value();\n        this.nativeElement.focus();\n    }\n\n    /**\n     * @hidden\n     */\n    public calculateSizeToFit(range: any): number {\n        const indicatorWidth = this.indicator.nativeElement.getBoundingClientRect().width;\n        const indicatorStyle = this.document.defaultView.getComputedStyle(this.indicator.nativeElement);\n        const indicatorMargin = parseFloat(indicatorStyle.marginRight);\n        let leftPadding = 0;\n        if (this.indentationDiv) {\n            const indentationStyle = this.document.defaultView.getComputedStyle(this.indentationDiv.nativeElement);\n            leftPadding = parseFloat(indentationStyle.paddingLeft);\n        }\n        const largestWidth = Math.max(...Array.from(this.nativeElement.children)\n            .map((child) => getNodeSizeViaRange(range, child)));\n        return largestWidth + indicatorWidth + indicatorMargin + leftPadding;\n    }\n\n    /**\n     * @hidden\n    */\n    public get iconTemplate() {\n        if (this.expanded) {\n            return this.grid.rowExpandedIndicatorTemplate || this.defaultExpandedTemplate;\n        } else {\n            return this.grid.rowCollapsedIndicatorTemplate || this.defaultCollapsedTemplate;\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport {\n    IgxGroupAreaDropDirective,\n    IgxGroupByRowTemplateDirective,\n    IgxRowExpandedIndicatorDirective,\n    IgxRowCollapsedIndicatorDirective,\n    IgxHeaderExpandIndicatorDirective,\n    IgxHeaderCollapseIndicatorDirective,\n    IgxGridDetailTemplateDirective\n} from './grid.directives';\nimport { IgxGridComponent } from './grid.component';\nimport {\n    IgxGridPagingPipe,\n    IgxGridGroupingPipe,\n    IgxGridSortingPipe,\n    IgxGridFilteringPipe\n} from './grid.pipes';\nimport { IgxGridGroupByRowComponent } from './groupby-row.component';\nimport { IgxGridRowComponent } from './grid-row.component';\nimport { IgxGridCommonModule } from '../grid-common.module';\nimport { IgxGridSummaryPipe } from './grid.summary.pipe';\nimport { IgxGridDetailsPipe } from './grid.details.pipe';\nimport { IgxGridExpandableCellComponent } from './expandable-cell.component';\n\n/**\n * @hidden\n */\n@NgModule({\n  declarations: [\n    IgxGridComponent,\n    IgxGridRowComponent,\n    IgxGridGroupByRowComponent,\n    IgxGroupByRowTemplateDirective,\n    IgxGridDetailTemplateDirective,\n    IgxRowExpandedIndicatorDirective,\n    IgxRowCollapsedIndicatorDirective,\n    IgxHeaderExpandIndicatorDirective,\n    IgxHeaderCollapseIndicatorDirective,\n    IgxGroupAreaDropDirective,\n    IgxGridGroupingPipe,\n    IgxGridPagingPipe,\n    IgxGridSortingPipe,\n    IgxGridFilteringPipe,\n    IgxGridSummaryPipe,\n    IgxGridDetailsPipe,\n    IgxGridExpandableCellComponent\n  ],\n  exports: [\n    IgxGridComponent,\n    IgxGridExpandableCellComponent,\n    IgxGridGroupByRowComponent,\n    IgxGridRowComponent,\n    IgxGroupByRowTemplateDirective,\n    IgxGridDetailTemplateDirective,\n    IgxRowExpandedIndicatorDirective,\n    IgxRowCollapsedIndicatorDirective,\n    IgxHeaderExpandIndicatorDirective,\n    IgxHeaderCollapseIndicatorDirective,\n    IgxGroupAreaDropDirective,\n    IgxGridGroupingPipe,\n    IgxGridPagingPipe,\n    IgxGridSortingPipe,\n    IgxGridFilteringPipe,\n    IgxGridSummaryPipe,\n    IgxGridDetailsPipe,\n    IgxGridCommonModule\n  ],\n  imports: [\n    IgxGridCommonModule,\n  ]\n})\nexport class IgxGridModule {}\n","import { GridBaseAPIService } from '../api.service';\nimport { IgxTreeGridComponent } from './tree-grid.component';\nimport { DataType } from '../../data-operations/data-util';\nimport { ITreeGridRecord } from './tree-grid.interfaces';\nimport { IRowToggleEventArgs } from '../common/events';\nimport { HierarchicalTransaction, TransactionType, State } from '../../services';\nimport { mergeObjects } from '../../core/utils';\nimport { Injectable } from '@angular/core';\nimport { ColumnType } from '../common/column.interface';\n\n@Injectable()\nexport class IgxTreeGridAPIService extends GridBaseAPIService<IgxTreeGridComponent> {\n    public get_all_data(transactions?: boolean): any[] {\n        const grid = this.grid;\n        const data = transactions ? grid.dataWithAddedInTransactionRows : grid.flatData;\n        return data ? data : [];\n    }\n\n    public get_summary_data() {\n        const grid = this.grid;\n        const data = grid.processedRootRecords.filter(row => row.isFilteredOutParent === undefined || row.isFilteredOutParent === false)\n            .map(rec => rec.data);\n        if (grid.transactions.enabled) {\n            const deletedRows = grid.transactions.getTransactionLog().filter(t => t.type === TransactionType.DELETE).map(t => t.id);\n            deletedRows.forEach(rowID => {\n                const tempData = grid.primaryKey ? data.map(rec => rec[grid.primaryKey]) : data;\n                const index = tempData.indexOf(rowID);\n                if (index !== -1) {\n                    data.splice(index, 1);\n                }\n            });\n        }\n        return data;\n    }\n\n    public allow_expansion_state_change(rowID, expanded): boolean {\n        const grid = this.grid;\n        const row = grid.records.get(rowID);\n        if (row.expanded === expanded ||\n            ((!row.children || !row.children.length) && (!grid.loadChildrenOnDemand ||\n            (grid.hasChildrenKey && !row.data[grid.hasChildrenKey])))) {\n            return false;\n        }\n        return true;\n    }\n\n    public expand_path_to_record(record: ITreeGridRecord) {\n        const grid = this.grid;\n        const expandedStates = grid.expansionStates;\n\n        while (record.parent) {\n            record = record.parent;\n            const expanded = this.get_row_expansion_state(record);\n\n            if (!expanded) {\n                expandedStates.set(record.rowID, true);\n            }\n        }\n        grid.expansionStates = expandedStates;\n\n        if (grid.rowEditable) {\n            grid.endEdit(true);\n        }\n    }\n\n    public get_row_expansion_state(record: ITreeGridRecord): boolean {\n        const grid = this.grid;\n        const states = grid.expansionStates;\n        const expanded = states.get(record.rowID);\n\n        if (expanded !== undefined) {\n            return expanded;\n        } else {\n            return record.children && record.children.length && record.level < grid.expansionDepth;\n        }\n    }\n\n    protected update_row_in_array(value: any, rowID: any, index: number) {\n        const grid = this.grid;\n        if (grid.primaryKey && grid.foreignKey) {\n            super.update_row_in_array(value, rowID, index);\n        } else {\n            const record = grid.records.get(rowID);\n            const childData = record.parent ? record.parent.data[grid.childDataKey] : grid.data;\n            index = grid.primaryKey ? childData.map(c => c[grid.primaryKey]).indexOf(rowID) :\n                childData.indexOf(rowID);\n            childData[index] = value;\n        }\n    }\n\n    public should_apply_number_style(column: ColumnType): boolean {\n        return column.dataType === DataType.Number && column.visibleIndex !== 0;\n    }\n\n    public deleteRowById(rowID: any) {\n        const treeGrid = this.grid;\n        const flatDataWithCascadeOnDeleteAndTransactions =\n        treeGrid.primaryKey &&\n        treeGrid.foreignKey &&\n        treeGrid.cascadeOnDelete &&\n        treeGrid.transactions.enabled;\n\n        if (flatDataWithCascadeOnDeleteAndTransactions) {\n            treeGrid.transactions.startPending();\n        }\n\n        super.deleteRowById(rowID);\n\n        if (flatDataWithCascadeOnDeleteAndTransactions) {\n            treeGrid.transactions.endPending(true);\n        }\n    }\n\n    public deleteRowFromData(rowID: any, index: number) {\n        const treeGrid = this.grid;\n        const record = treeGrid.records.get(rowID);\n\n        if (treeGrid.primaryKey && treeGrid.foreignKey) {\n            index = treeGrid.primaryKey ?\n                treeGrid.data.map(c => c[treeGrid.primaryKey]).indexOf(rowID) :\n                treeGrid.data.indexOf(rowID);\n            super.deleteRowFromData(rowID, index);\n\n            if (treeGrid.cascadeOnDelete) {\n                if (record && record.children && record.children.length > 0) {\n                    for (let i = 0; i < record.children.length; i++) {\n                        const child = record.children[i];\n                        super.deleteRowById(child.rowID);\n                    }\n                }\n            }\n        } else {\n            const collection = record.parent ? record.parent.data[treeGrid.childDataKey] : treeGrid.data;\n            index = treeGrid.primaryKey ?\n                collection.map(c => c[treeGrid.primaryKey]).indexOf(rowID) :\n                collection.indexOf(rowID);\n\n            const selectedChildren = [];\n            this.get_selected_children(record, selectedChildren);\n            if (selectedChildren.length > 0) {\n                treeGrid.deselectRows(selectedChildren);\n            }\n\n            if (treeGrid.transactions.enabled) {\n                const path = treeGrid.generateRowPath(rowID);\n                treeGrid.transactions.add({\n                    id: rowID,\n                    type: TransactionType.DELETE,\n                    newValue: null,\n                    path: path\n                },\n                    collection[index]\n                );\n            } else {\n                collection.splice(index, 1);\n            }\n        }\n    }\n\n    /**\n     * Updates related row of provided grid's data source with provided new row value\n     * @param grid Grid to update data for\n     * @param rowID ID of the row to update\n     * @param rowValueInDataSource Initial value of the row as it is in data source\n     * @param rowCurrentValue Current value of the row as it is with applied previous transactions\n     * @param rowNewValue New value of the row\n     */\n    protected updateData(\n        grid: IgxTreeGridComponent,\n        rowID: any,\n        rowValueInDataSource: any,\n        rowCurrentValue: any,\n        rowNewValue: { [x: string]: any }) {\n        if (grid.transactions.enabled) {\n            const path = grid.generateRowPath(rowID);\n            const transaction: HierarchicalTransaction = {\n                id: rowID,\n                type: TransactionType.UPDATE,\n                newValue: rowNewValue,\n                path: path\n            };\n            grid.transactions.add(transaction, rowCurrentValue);\n        } else {\n            mergeObjects(rowValueInDataSource, rowNewValue);\n        }\n    }\n\n    public get_selected_children(record: ITreeGridRecord, selectedRowIDs: any[]) {\n        const grid = this.grid;\n        if (!record.children || record.children.length === 0) {\n            return;\n        }\n        for (const child of record.children) {\n            if (grid.selectionService.isRowSelected(child.rowID)) {\n                selectedRowIDs.push(child.rowID);\n            }\n            this.get_selected_children(child, selectedRowIDs);\n        }\n    }\n\n    public row_deleted_transaction(rowID: any): boolean {\n        return this.row_deleted_parent(rowID) || super.row_deleted_transaction(rowID);\n    }\n\n    public get_rec_by_id(rowID) {\n        return this.grid.records.get(rowID);\n    }\n\n    private row_deleted_parent(rowID: any): boolean {\n        const grid = this.grid;\n        if (!grid) {\n            return false;\n        }\n        if ((grid.cascadeOnDelete && grid.foreignKey) || grid.childDataKey) {\n            let node = grid.records.get(rowID);\n            while (node) {\n                const state: State = grid.transactions.getState(node.rowID);\n                if (state && state.type === TransactionType.DELETE) {\n                    return true;\n                }\n                node = node.parent;\n            }\n        }\n        return false;\n    }\n}\n","import { IgxGridNavigationService } from '../grid-navigation.service';\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class IgxTreeGridNavigationService extends IgxGridNavigationService {\n\n    protected getCellSelector(visibleIndex?: number, isSummary = false): string {\n        if (isSummary) {\n            return 'igx-grid-summary-cell';\n        }\n        if (visibleIndex === 0) {\n            return 'igx-tree-grid-cell';\n        }\n        return 'igx-grid-cell';\n    }\n\n    protected getRowSelector() {\n        return 'igx-tree-grid-row';\n    }\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxRowLoadingIndicator]'\n})\nexport class IgxRowLoadingIndicatorTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) { }\n}\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    HostBinding,\n    Input,\n    Output,\n    EventEmitter,\n    forwardRef,\n    OnInit,\n    TemplateRef,\n    QueryList,\n    ContentChild,\n    AfterContentInit,\n    ViewChild,\n    DoCheck\n} from '@angular/core';\nimport { IgxTreeGridAPIService } from './tree-grid-api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { GridBaseAPIService } from '../api.service';\nimport { ITreeGridRecord } from './tree-grid.interfaces';\nimport { IRowToggleEventArgs } from '../common/events';\nimport { HierarchicalTransaction, HierarchicalState, TransactionType } from '../../services/transaction/transaction';\nimport { IgxHierarchicalTransactionService } from '../../services/index';\nimport { IgxFilteringService } from '../filtering/grid-filtering.service';\nimport { IgxTreeGridNavigationService } from './tree-grid-navigation.service';\nimport { IgxGridSummaryService } from '../summaries/grid-summary.service';\nimport { IgxGridSelectionService, IgxGridCRUDService } from '../selection/selection.service';\nimport { mergeObjects } from '../../core/utils';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { IgxRowLoadingIndicatorTemplateDirective } from './tree-grid.directives';\nimport { IgxForOfSyncService, IgxForOfScrollSyncService } from '../../directives/for-of/for_of.sync.service';\nimport { IgxDragIndicatorIconDirective } from '../row-drag.directive';\nimport { IgxGridNavigationService } from '../grid-navigation.service';\nimport { GridType } from '../common/grid.interface';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IgxRowIslandAPIService } from '../hierarchical-grid/row-island-api.service';\n\nlet NEXT_ID = 0;\n\n/**\n * **Ignite UI for Angular Tree Grid** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/grid.html)\n *\n * The Ignite UI Tree Grid displays and manipulates hierarchical data with consistent schema formatted as a table and\n * provides features such as sorting, filtering, editing, column pinning, paging, column moving and hiding.\n *\n * Example:\n * ```html\n * <igx-tree-grid [data]=\"employeeData\" primaryKey=\"employeeID\" foreignKey=\"PID\" autoGenerate=\"false\">\n *   <igx-column field=\"first\" header=\"First Name\"></igx-column>\n *   <igx-column field=\"last\" header=\"Last Name\"></igx-column>\n *   <igx-column field=\"role\" header=\"Role\"></igx-column>\n * </igx-tree-grid>\n * ```\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-tree-grid',\n    templateUrl: 'tree-grid.component.html',\n    providers: [\n        IgxGridSelectionService,\n        IgxGridCRUDService,\n        IgxGridSummaryService,\n        { provide: IgxGridNavigationService, useClass: IgxTreeGridNavigationService },\n        { provide: GridBaseAPIService, useClass: IgxTreeGridAPIService },\n        { provide: IgxGridBaseDirective, useExisting: forwardRef(() => IgxTreeGridComponent) },\n        IgxFilteringService,\n        IgxForOfSyncService,\n        IgxForOfScrollSyncService,\n        IgxRowIslandAPIService\n    ]\n})\nexport class IgxTreeGridComponent extends IgxGridBaseDirective implements GridType, OnInit, DoCheck, AfterContentInit {\n    private _id = `igx-tree-grid-${NEXT_ID++}`;\n    private _data;\n    private _rowLoadingIndicatorTemplate: TemplateRef<any>;\n    protected _transactions: IgxHierarchicalTransactionService<HierarchicalTransaction, HierarchicalState>;\n\n    /**\n     * An @Input property that sets the value of the `id` attribute. If not provided it will be automatically generated.\n     * ```html\n     * <igx-tree-grid [id]=\"'igx-tree-grid-1'\"></igx-tree-grid>\n     * ```\n\t * @memberof IgxTreeGridComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public get id(): string {\n        return this._id;\n    }\n    public set id(value: string) {\n        this._id = value;\n    }\n\n    /**\n     * An @Input property that lets you fill the `IgxTreeGridComponent` with an array of data.\n     * ```html\n     * <igx-tree-grid [data]=\"Data\" [autoGenerate]=\"true\"></igx-tree-grid>\n     * ```\n\t * @memberof IgxTreeGridComponent\n     */\n    @Input()\n    public get data(): any[] {\n        return this._data;\n    }\n\n    public set data(value: any[]) {\n        this._data = value || [];\n        this.summaryService.clearSummaryCache();\n        if (this.shouldGenerate) {\n            this.setupColumns();\n        }\n        this.cdr.markForCheck();\n    }\n\n    /**\n     * Returns an array of objects containing the filtered data in the `IgxGridComponent`.\n     * ```typescript\n     * let filteredData = this.grid.filteredData;\n     * ```\n\t * @memberof IgxTreeGridComponent\n     */\n    get filteredData() {\n        return this._filteredData;\n    }\n\n    /**\n     * Sets an array of objects containing the filtered data in the `IgxGridComponent`.\n     * ```typescript\n     * this.grid.filteredData = [{\n     *       ID: 1,\n     *       Name: \"A\"\n     * }];\n     * ```\n\t * @memberof IgxTreeGridComponent\n     */\n    set filteredData(value) {\n        this._filteredData = value;\n\n    }\n\n    /**\n     * Get transactions service for the grid.\n     * @experimental @hidden\n     */\n    get transactions() {\n        return this._transactions;\n    }\n\n    /**\n    * @hidden\n    */\n    public flatData: any[];\n\n    /**\n    * @hidden\n    */\n    public processedExpandedFlatData: any[];\n\n    /**\n     * Returns an array of the root level `ITreeGridRecord`s.\n     * ```typescript\n     * // gets the root record with index=2\n     * const states = this.grid.rootRecords[2];\n     * ```\n\t * @memberof IgxTreeGridComponent\n     */\n    public rootRecords: ITreeGridRecord[];\n\n    /**\n     * Returns a map of all `ITreeGridRecord`s.\n     * ```typescript\n     * // gets the record with primaryKey=2\n     * const states = this.grid.records.get(2);\n     * ```\n\t * @memberof IgxTreeGridComponent\n     */\n    public records: Map<any, ITreeGridRecord> = new Map<any, ITreeGridRecord>();\n\n    /**\n     * Returns an array of processed (filtered and sorted) root `ITreeGridRecord`s.\n     * ```typescript\n     * // gets the processed root record with index=2\n     * const states = this.grid.processedRootRecords[2];\n     * ```\n\t * @memberof IgxTreeGridComponent\n     */\n    public processedRootRecords: ITreeGridRecord[];\n\n    /**\n     * Returns a map of all processed (filtered and sorted) `ITreeGridRecord`s.\n     * ```typescript\n     * // gets the processed record with primaryKey=2\n     * const states = this.grid.processedRecords.get(2);\n     * ```\n\t * @memberof IgxTreeGridComponent\n     */\n    public processedRecords: Map<any, ITreeGridRecord> = new Map<any, ITreeGridRecord>();\n\n    /**\n     * An @Input property that sets the child data key of the `IgxTreeGridComponent`.\n     * ```html\n     * <igx-tree-grid #grid [data]=\"employeeData\" [childDataKey]=\"'employees'\" [autoGenerate]=\"true\"></igx-tree-grid>\n     * ```\n\t * @memberof IgxTreeGridComponent\n     */\n    @Input()\n    public childDataKey;\n\n    /**\n     * An @Input property that sets the foreign key of the `IgxTreeGridComponent`.\n     * ```html\n     * <igx-tree-grid #grid [data]=\"employeeData\" [primaryKey]=\"'employeeID'\" [foreignKey]=\"'parentID'\" [autoGenerate]=\"true\">\n     * </igx-tree-grid>\n     * ```\n\t * @memberof IgxTreeGridComponent\n     */\n    @Input()\n    public foreignKey;\n\n    /**\n     * An @Input property that sets the key indicating whether a row has children.\n     * This property is only used for load on demand scenarios.\n     * ```html\n     * <igx-tree-grid #grid [data]=\"employeeData\" [primaryKey]=\"'employeeID'\" [foreignKey]=\"'parentID'\"\n     *                [loadChildrenOnDemand]=\"loadChildren\"\n     *                [hasChildrenKey]=\"'hasEmployees'\">\n     * </igx-tree-grid>\n     * ```\n\t * @memberof IgxTreeGridComponent\n     */\n    @Input()\n    public hasChildrenKey;\n\n    /**\n     * An @Input property indicating whether child records should be deleted when their parent gets deleted.\n     * By default it is set to true and deletes all children along with the parent.\n     * ```html\n     * <igx-tree-grid [data]=\"employeeData\" [primaryKey]=\"'employeeID'\" [foreignKey]=\"'parentID'\" cascadeOnDelete=\"false\">\n     * </igx-tree-grid>\n     * ```\n\t * @memberof IgxTreeGridComponent\n     */\n    @Input()\n    public cascadeOnDelete = true;\n\n    private _expansionDepth = Infinity;\n\n    /**\n     * An @Input property that sets the count of levels to be expanded in the `IgxTreeGridComponent`. By default it is\n     * set to `Infinity` which means all levels would be expanded.\n     * ```html\n     * <igx-tree-grid #grid [data]=\"employeeData\" [childDataKey]=\"'employees'\" expansionDepth=\"1\" [autoGenerate]=\"true\"></igx-tree-grid>\n     * ```\n\t * @memberof IgxTreeGridComponent\n     */\n    @Input()\n    public get expansionDepth(): number {\n        return this._expansionDepth;\n    }\n\n    public set expansionDepth(value: number) {\n        this._expansionDepth = value;\n        this.notifyChanges();\n    }\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxRowLoadingIndicatorTemplateDirective, { read: IgxRowLoadingIndicatorTemplateDirective })\n    protected rowLoadingTemplate: IgxRowLoadingIndicatorTemplateDirective;\n\n    /**\n     * An @Input property that provides a template for the row loading indicator when load on demand is enabled.\n     * ```html\n     * <ng-template #rowLoadingTemplate>\n     *     <igx-icon fontSet=\"material\">loop</igx-icon>\n     * </ng-template>\n     *\n     * <igx-tree-grid #grid [data]=\"employeeData\" [primaryKey]=\"'ID'\" [foreignKey]=\"'parentID'\"\n     *                [loadChildrenOnDemand]=\"loadChildren\"\n     *                [rowLoadingIndicatorTemplate]=\"rowLoadingTemplate\">\n     * </igx-tree-grid>\n     * ```\n\t * @memberof IgxTreeGridComponent\n     */\n    @Input()\n    public get rowLoadingIndicatorTemplate(): TemplateRef<any> {\n        return this._rowLoadingIndicatorTemplate;\n    }\n\n    public set rowLoadingIndicatorTemplate(value: TemplateRef<any>) {\n        this._rowLoadingIndicatorTemplate = value;\n        this.notifyChanges();\n    }\n\n    /**\n     * An @Input property that provides a callback for loading child rows on demand.\n     * ```html\n     * <igx-tree-grid [data]=\"employeeData\" [primaryKey]=\"'employeeID'\" [foreignKey]=\"'parentID'\" [loadChildrenOnDemand]=\"loadChildren\">\n     * </igx-tree-grid>\n     * ```\n     * ```typescript\n     * public loadChildren = (parentID: any, done: (children: any[]) => void) => {\n     *     this.dataService.getData(parentID, children => done(children));\n     * }\n     * ```\n\t * @memberof IgxTreeGridComponent\n     */\n    @Input()\n    public loadChildrenOnDemand: (parentID: any, done: (children: any[]) => void) => void;\n\n    /**\n     * @hidden\n     */\n    public loadingRows = new Set<any>();\n\n    // Kind of stupid\n    private get _gridAPI(): IgxTreeGridAPIService {\n        return this.gridAPI as IgxTreeGridAPIService;\n    }\n    private _filteredData = null;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChild('dragIndicatorIconBase', { read: TemplateRef, static: true })\n    public dragIndicatorIconBase: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        super.ngOnInit();\n\n        this.onRowToggle.pipe(takeUntil(this.destroy$)).subscribe((args) => {\n            this.loadChildrenOnRowExpansion(args);\n        });\n    }\n\n    ngDoCheck() {\n        super.ngDoCheck();\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterContentInit() {\n        if (this.rowLoadingTemplate) {\n            this._rowLoadingIndicatorTemplate = this.rowLoadingTemplate.template;\n        }\n        super.ngAfterContentInit();\n    }\n\n    private loadChildrenOnRowExpansion(args: IRowToggleEventArgs) {\n        if (this.loadChildrenOnDemand) {\n            const parentID = args.rowID;\n\n            if (args.expanded && !this._expansionStates.has(parentID)) {\n                this.loadingRows.add(parentID);\n\n                this.loadChildrenOnDemand(parentID, children => {\n                    this.loadingRows.delete(parentID);\n                    this.addChildRows(children, parentID);\n                    this.notifyChanges();\n\n                    requestAnimationFrame(() => {\n                        const cellID = this.selectionService.activeElement;\n                        if (cellID) {\n                            const cell = this._gridAPI.get_cell_by_index(cellID.row, cellID.column);\n                            if (cell) {\n                                cell.nativeElement.focus();\n                            }\n                        }\n                    });\n                });\n            }\n        }\n    }\n\n    private addChildRows(children: any[], parentID: any) {\n        if (this.primaryKey && this.foreignKey) {\n            for (const child of children) {\n                child[this.foreignKey] = parentID;\n            }\n            this.data.push(...children);\n        } else if (this.childDataKey) {\n            let parent = this.records.get(parentID);\n            let parentData = parent.data;\n\n            if (this.transactions.enabled && this.transactions.getAggregatedChanges(true).length) {\n                const path = [];\n                while (parent) {\n                    path.push(parent.rowID);\n                    parent = parent.parent;\n                }\n\n                let collection = this.data;\n                let record: any;\n                for (let i = path.length - 1; i >= 0; i--) {\n                    const pid = path[i];\n                    record = collection.find(r => r[this.primaryKey] === pid);\n\n                    if (!record) {\n                        break;\n                    }\n                    collection = record[this.childDataKey];\n                }\n                if (record) {\n                    parentData = record;\n                }\n            }\n\n            parentData[this.childDataKey] = children;\n        }\n        this.selectionService.clearHeaderCBState();\n        this._pipeTrigger++;\n    }\n\n    private cloneMap(mapIn: Map<any, boolean>): Map<any, boolean> {\n        const mapCloned: Map<any, boolean> = new Map<any, boolean>();\n\n        mapIn.forEach((value: boolean, key: any, mapObj: Map<any, boolean>) => {\n\n            mapCloned.set(key, value);\n        });\n\n        return mapCloned;\n    }\n\n    public getDefaultExpandState(record: ITreeGridRecord) {\n        return record.children && record.children.length && record.level < this.expansionDepth;\n    }\n\n    /**\n     * Expands all rows.\n     * ```typescript\n     * this.grid.expandAll();\n     * ```\n\t * @memberof IgxTreeGridComponent\n     */\n    public expandAll() {\n        this._expansionDepth = Infinity;\n        this.expansionStates = new Map<any, boolean>();\n    }\n\n    /**\n     * Collapses all rows.\n     * ```typescript\n     * this.grid.collapseAll();\n     * ```\n\t * @memberof IgxTreeGridComponent\n     */\n    public collapseAll() {\n        this._expansionDepth = 0;\n        this.expansionStates = new Map<any, boolean>();\n    }\n\n    /**\n     * Creates a new `IgxTreeGridRowComponent` with the given data. If a parentRowID is not specified, the newly created\n     * row would be added at the root level. Otherwise, it would be added as a child of the row whose primaryKey matches\n     * the specified parentRowID. If the parentRowID does not exist, an error would be thrown.\n     * ```typescript\n     * const record = {\n     *     ID: this.grid.data[this.grid1.data.length - 1].ID + 1,\n     *     Name: this.newRecord\n     * };\n     * this.grid.addRow(record, 1); // Adds a new child row to the row with ID=1.\n     * ```\n     * @param data\n     * @param parentRowID\n     * @memberof IgxTreeGridComponent\n     */\n    public addRow(data: any, parentRowID?: any) {\n        if (parentRowID !== undefined && parentRowID !== null) {\n            super.endEdit(true);\n\n            const state = this.transactions.getState(parentRowID);\n            // we should not allow adding of rows as child of deleted row\n            if (state && state.type === TransactionType.DELETE) {\n                throw Error(`Cannot add child row to deleted parent row`);\n            }\n\n            const parentRecord = this.records.get(parentRowID);\n\n            if (!parentRecord) {\n                throw Error('Invalid parent row ID!');\n            }\n            this.summaryService.clearSummaryCache({rowID: parentRecord.rowID});\n            if (this.primaryKey && this.foreignKey) {\n                data[this.foreignKey] = parentRowID;\n                super.addRow(data);\n            } else {\n                const parentData = parentRecord.data;\n                const childKey = this.childDataKey;\n                if (this.transactions.enabled) {\n                    const rowId = this.primaryKey ? data[this.primaryKey] : data;\n                    const path: any[] = [];\n                    path.push(...this.generateRowPath(parentRowID));\n                    path.push(parentRowID);\n                    this.transactions.add({\n                        id: rowId,\n                        path: path,\n                        newValue: data,\n                        type: TransactionType.ADD\n                    } as HierarchicalTransaction,\n                        null);\n                } else {\n                    if (!parentData[childKey]) {\n                        parentData[childKey] = [];\n                    }\n                    parentData[childKey].push(data);\n                }\n                this.onRowAdded.emit({ data });\n                this._pipeTrigger++;\n                this.notifyChanges();\n            }\n        } else {\n            if (this.primaryKey && this.foreignKey) {\n                const rowID = data[this.foreignKey];\n                this.summaryService.clearSummaryCache({rowID: rowID});\n            }\n            super.addRow(data);\n        }\n    }\n\n    /** @hidden */\n    public deleteRowById(rowId: any) {\n        //  if this is flat self-referencing data, and CascadeOnDelete is set to true\n        //  and if we have transactions we should start pending transaction. This allows\n        //  us in case of delete action to delete all child rows as single undo action\n        this._gridAPI.deleteRowById(rowId);\n\n    }\n\n    /** @hidden */\n    public generateRowPath(rowId: any): any[] {\n        const path: any[] = [];\n        let record = this.records.get(rowId);\n\n        while (record.parent) {\n            path.push(record.parent.rowID);\n            record = record.parent;\n        }\n\n        return path.reverse();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    protected getDataBasedBodyHeight(): number {\n        return !this.flatData || (this.flatData.length < this._defaultTargetRecordNumber) ?\n            0 : this.defaultTargetBodyHeight;\n    }\n\n    /**\n     * @hidden\n     */\n    protected scrollTo(row: any | number, column: any | number): void {\n        let delayScrolling = false;\n        let record: ITreeGridRecord;\n\n        if (typeof(row) !== 'number') {\n            const rowData = row;\n            const rowID = this._gridAPI.get_row_id(rowData);\n            record = this.processedRecords.get(rowID);\n            this._gridAPI.expand_path_to_record(record);\n\n            if (this.paging) {\n                const rowIndex = this.processedExpandedFlatData.indexOf(rowData);\n                const page = Math.floor(rowIndex / this.perPage);\n\n                if (this.page !== page) {\n                    delayScrolling = true;\n                    this.page = page;\n                }\n            }\n        }\n\n        if (delayScrolling) {\n            this.verticalScrollContainer.onDataChanged.pipe(first()).subscribe(() => {\n                this.scrollDirective(this.verticalScrollContainer,\n                    typeof(row) === 'number' ? row : this.dataView.indexOf(record));\n            });\n        } else {\n            this.scrollDirective(this.verticalScrollContainer,\n                typeof(row) === 'number' ? row : this.dataView.indexOf(record));\n        }\n\n        this.scrollToHorizontally(column);\n    }\n\n    /**\n    * @hidden\n    */\n    public getContext(rowData: any, rowIndex: Number): any {\n        return {\n            $implicit: rowData,\n            index: rowIndex,\n            templateID: this.isSummaryRow(rowData) ? 'summaryRow' : 'dataRow'\n        };\n    }\n\n    /**\n     * @inheritdoc\n     */\n    getSelectedData(formatters = false, headers = false): any[] {\n        const source = [];\n\n        const process = (record) => {\n            if (record.summaries) {\n                source.push(null);\n                return;\n            }\n            source.push(record.data);\n        };\n\n        this.dataView.forEach(process);\n        return this.extractDataFromSelection(source, formatters, headers);\n    }\n\n    /**\n    * @hidden\n    */\n    public get template(): TemplateRef<any> {\n        if (this.filteredData && this.filteredData.length === 0) {\n            return this.emptyGridTemplate ? this.emptyGridTemplate : this.emptyFilteredGridTemplate;\n        }\n\n        if (this.isLoading && (!this.data || this.dataLength === 0)) {\n            return this.loadingGridTemplate ? this.loadingGridTemplate : this.loadingGridDefaultTemplate;\n        }\n\n        if (this.dataLength === 0) {\n            return this.emptyGridTemplate ? this.emptyGridTemplate : this.emptyGridDefaultTemplate;\n        }\n    }\n\n    protected writeToData(rowIndex: number, value: any) {\n        mergeObjects(this.flatData[rowIndex], value);\n    }\n\n    /**\n     * @hidden\n    */\n   protected initColumns(collection: QueryList<IgxColumnComponent>, cb: Function = null) {\n        if (this.hasColumnLayouts) {\n            // invalid configuration - tree grid should not allow column layouts\n            // remove column layouts\n            const nonColumnLayoutColumns = this.columnList.filter((col) => !col.columnLayout && !col.columnLayoutChild);\n            this.columnList.reset(nonColumnLayoutColumns);\n        }\n        super.initColumns(collection, cb);\n    }\n}\n","import { Component, forwardRef, Input, ViewChildren, QueryList, HostBinding, DoCheck, ChangeDetectionStrategy } from '@angular/core';\nimport { IgxTreeGridComponent } from './tree-grid.component';\nimport { IgxRowDirective } from '../row.directive';\nimport { ITreeGridRecord } from './tree-grid.interfaces';\nimport { IgxTreeGridAPIService } from './tree-grid-api.service';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    selector: 'igx-tree-grid-row',\n    templateUrl: 'tree-grid-row.component.html',\n    providers: [{ provide: IgxRowDirective, useExisting: forwardRef(() => IgxTreeGridRowComponent) }]\n})\nexport class IgxTreeGridRowComponent extends IgxRowDirective<IgxTreeGridComponent> implements DoCheck {\n    private _treeRow: ITreeGridRecord;\n\n    /**\n     * The rendered cells in the row component.\n     *\n     * ```typescript\n     * const row = this.grid.getRowByKey(1);\n     * const cells = row.cells;\n     * ```\n     */\n    @ViewChildren('treeCell')\n    public cells: QueryList<any>;\n\n    /**\n     * The `ITreeGridRecord` passed to the row component.\n     *\n     * ```typescript\n     * const row = this.grid.getRowByKey(1) as IgxTreeGridRowComponent;\n     * const treeRow = row.treeRow;\n     * ```\n     */\n    @Input()\n    public get treeRow(): ITreeGridRecord {\n        return this._treeRow;\n    }\n\n    public set treeRow(value: ITreeGridRecord) {\n        if (this._treeRow !== value) {\n            this._treeRow = value;\n            this.rowData = this._treeRow.data;\n        }\n    }\n\n    /**\n     * Returns a value indicating whether the row component is expanded.\n     *\n     * ```typescript\n     * const row = this.grid.getRowByKey(1) as IgxTreeGridRowComponent;\n     * const expanded = row.expanded;\n     * ```\n     */\n    @HostBinding('attr.aria-expanded')\n    get expanded(): boolean {\n        return this._treeRow.expanded;\n    }\n\n    /**\n     * Sets a value indicating whether the row component is expanded.\n     *\n     * ```typescript\n     * const row = this.grid.getRowByKey(1) as IgxTreeGridRowComponent;\n     * row.expanded = true;\n     * ```\n     */\n    set expanded(value: boolean) {\n        (this.gridAPI as IgxTreeGridAPIService).set_row_expansion_state(this._treeRow.rowID, value);\n    }\n\n    /**\n     * @hidden\n     */\n    public isLoading: boolean;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    get viewIndex(): number {\n        return this.index + this.grid.page * this.grid.perPage;\n    }\n\n    /**\n     * @hidden\n     */\n    public get showIndicator() {\n        return this.grid.loadChildrenOnDemand ?\n            this.grid.expansionStates.has(this.rowID) ?\n                this.treeRow.children && this.treeRow.children.length :\n                this.grid.hasChildrenKey ?\n                    this.rowData[this.grid.hasChildrenKey] :\n                    true :\n            this.treeRow.children && this.treeRow.children.length;\n    }\n\n    /**\n     * @hidden\n     */\n    protected resolveClasses(): string {\n        const classes = super.resolveClasses();\n        const filteredClass = this.treeRow.isFilteredOutParent ? 'igx-grid__tr--filtered' : '';\n        return `${classes} ${filteredClass}`;\n    }\n\n    /**\n     * @hidden\n     */\n    public ngDoCheck() {\n        this.isLoading = this.grid.loadChildrenOnDemand ? this.grid.loadingRows.has(this.rowID) : false;\n        super.ngDoCheck();\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { cloneArray, cloneHierarchicalArray } from '../../core/utils';\nimport { DataUtil } from '../../data-operations/data-util';\nimport { IgxTreeGridAPIService } from './tree-grid-api.service';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxTreeGridComponent } from './tree-grid.component';\nimport { ITreeGridRecord } from './tree-grid.interfaces';\nimport { IgxGridBaseDirective } from '../grid';\nimport { ISortingExpression } from '../../data-operations/sorting-expression.interface';\nimport { GridType } from '../common/grid.interface';\nimport { IGridSortingStrategy } from '../../data-operations/sorting-strategy';\n\n/**\n *@hidden\n */\n@Pipe({\n    name: 'treeGridHierarchizing',\n    pure: true\n})\nexport class IgxTreeGridHierarchizingPipe implements PipeTransform {\n    private gridAPI: IgxTreeGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxTreeGridAPIService>gridAPI;\n    }\n\n    public transform(collection: any[], primaryKey: string, foreignKey: string, childDataKey: string,\n        id: string, pipeTrigger: number): ITreeGridRecord[] {\n        const grid = this.gridAPI.grid;\n        let hierarchicalRecords: ITreeGridRecord[] = [];\n        const treeGridRecordsMap = new Map<any, ITreeGridRecord>();\n        const flatData: any[] = [];\n\n        if (primaryKey && foreignKey) {\n            hierarchicalRecords = this.hierarchizeFlatData(id, collection, primaryKey, foreignKey, treeGridRecordsMap, flatData);\n        } else if (childDataKey) {\n            hierarchicalRecords = this.hierarchizeRecursive(id, collection, primaryKey, childDataKey, undefined,\n                flatData, 0, treeGridRecordsMap);\n        }\n\n        grid.flatData = flatData;\n        grid.records = treeGridRecordsMap;\n        grid.rootRecords = hierarchicalRecords;\n        return hierarchicalRecords;\n    }\n\n    private getRowID(primaryKey: any, rowData: any) {\n        return primaryKey ? rowData[primaryKey] : rowData;\n    }\n\n    private hierarchizeFlatData(id: string, collection: any[], primaryKey: string, foreignKey: string,\n        map: Map<any, ITreeGridRecord>, flatData: any[]):\n        ITreeGridRecord[] {\n        const result: ITreeGridRecord[] = [];\n        const missingParentRecords: ITreeGridRecord[] = [];\n        collection.forEach(row => {\n            const record: ITreeGridRecord = {\n                rowID: this.getRowID(primaryKey, row),\n                data: row,\n                children: []\n            };\n            const parent = map.get(row[foreignKey]);\n            if (parent) {\n                record.parent = parent;\n                parent.children.push(record);\n            } else {\n                missingParentRecords.push(record);\n            }\n\n            map.set(row[primaryKey], record);\n        });\n\n        missingParentRecords.forEach(record => {\n            const parent = map.get(record.data[foreignKey]);\n            if (parent) {\n                record.parent = parent;\n                parent.children.push(record);\n            } else {\n                result.push(record);\n            }\n        });\n\n        this.setIndentationLevels(id, result, 0, flatData);\n\n        return result;\n    }\n\n    private setIndentationLevels(id: string, collection: ITreeGridRecord[], indentationLevel: number, flatData: any[]) {\n        for (let i = 0; i < collection.length; i++) {\n            const record = collection[i];\n            record.level = indentationLevel;\n            record.expanded = this.gridAPI.get_row_expansion_state(record);\n            flatData.push(record.data);\n\n            if (record.children && record.children.length > 0) {\n                this.setIndentationLevels(id, record.children, indentationLevel + 1, flatData);\n            }\n        }\n    }\n\n    private hierarchizeRecursive(id: string, collection: any[], primaryKey: string, childDataKey: string,\n        parent: ITreeGridRecord, flatData: any[], indentationLevel: number, map: Map<any, ITreeGridRecord>): ITreeGridRecord[] {\n        const result: ITreeGridRecord[] = [];\n\n        for (let i = 0; i < collection.length; i++) {\n            const item = collection[i];\n            const record: ITreeGridRecord = {\n                rowID: this.getRowID(primaryKey, item),\n                data: item,\n                parent: parent,\n                level: indentationLevel\n            };\n            record.expanded = this.gridAPI.get_row_expansion_state(record);\n            flatData.push(item);\n            map.set(record.rowID, record);\n            record.children = item[childDataKey] ?\n                this.hierarchizeRecursive(id, item[childDataKey], primaryKey, childDataKey, record, flatData, indentationLevel + 1, map) :\n                undefined;\n            result.push(record);\n        }\n\n        return result;\n    }\n}\n\n/**\n *@hidden\n */\n@Pipe({\n    name: 'treeGridFlattening',\n    pure: true\n})\nexport class IgxTreeGridFlatteningPipe implements PipeTransform {\n    private gridAPI: IgxTreeGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxTreeGridAPIService>gridAPI;\n    }\n\n    public transform(collection: ITreeGridRecord[], id: string,\n        expandedLevels: number, expandedStates: Map<any, boolean>, pipeTrigger: number): any[] {\n\n        const grid: IgxTreeGridComponent = this.gridAPI.grid;\n        const data: ITreeGridRecord[] = [];\n\n        grid.processedRootRecords = collection;\n        grid.processedRecords = new Map<any, ITreeGridRecord>();\n\n        this.getFlatDataRecursive(collection, data, expandedLevels, expandedStates, id, true);\n\n        grid.processedExpandedFlatData = data.map(r => r.data);\n\n        return data;\n    }\n\n    private getFlatDataRecursive(collection: ITreeGridRecord[], data: ITreeGridRecord[],\n        expandedLevels: number, expandedStates: Map<any, boolean>, gridID: string,\n        parentExpanded: boolean) {\n        if (!collection || !collection.length) {\n            return;\n        }\n        const grid: IgxTreeGridComponent = this.gridAPI.grid;\n\n        for (let i = 0; i < collection.length; i++) {\n            const hierarchicalRecord = collection[i];\n\n            if (parentExpanded) {\n                data.push(hierarchicalRecord);\n            }\n\n            hierarchicalRecord.expanded = this.gridAPI.get_row_expansion_state(hierarchicalRecord);\n\n            this.updateNonProcessedRecordExpansion(grid, hierarchicalRecord);\n\n            grid.processedRecords.set(hierarchicalRecord.rowID, hierarchicalRecord);\n\n            this.getFlatDataRecursive(hierarchicalRecord.children, data, expandedLevels,\n                expandedStates, gridID, parentExpanded && hierarchicalRecord.expanded);\n        }\n    }\n\n    private updateNonProcessedRecordExpansion(grid: IgxTreeGridComponent, record: ITreeGridRecord) {\n        const rec = grid.records.get(record.rowID);\n        rec.expanded = record.expanded;\n    }\n}\n\n/** @hidden */\n@Pipe({\n    name: 'treeGridSorting',\n    pure: true\n})\nexport class IgxTreeGridSortingPipe implements PipeTransform {\n    private gridAPI: IgxTreeGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxTreeGridAPIService>gridAPI;\n    }\n\n    public transform(\n        hierarchicalData: ITreeGridRecord[],\n        expressions: ISortingExpression[],\n        sorting: IGridSortingStrategy,\n        id: string,\n        pipeTrigger: number): ITreeGridRecord[] {\n        const grid = this.gridAPI.grid;\n\n        let result: ITreeGridRecord[];\n        if (!expressions.length) {\n            result = hierarchicalData;\n        } else {\n            result = DataUtil.treeGridSort(hierarchicalData, expressions, sorting);\n        }\n        const filteredSortedData = [];\n        this.flattenTreeGridRecords(result, filteredSortedData);\n        grid.filteredSortedData = filteredSortedData;\n\n        return result;\n    }\n\n    private flattenTreeGridRecords(records: ITreeGridRecord[], flatData: any[]) {\n        if (records && records.length) {\n            for (const record of records) {\n                flatData.push(record.data);\n                this.flattenTreeGridRecords(record.children, flatData);\n            }\n        }\n    }\n}\n\n/** @hidden */\n@Pipe({\n    name: 'treeGridPaging',\n    pure: true\n})\nexport class IgxTreeGridPagingPipe implements PipeTransform {\n    private gridAPI: IgxTreeGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxTreeGridAPIService>gridAPI;\n    }\n\n    public transform(collection: ITreeGridRecord[], page = 0, perPage = 15, id: string, pipeTrigger: number): ITreeGridRecord[] {\n        const grid = this.gridAPI.grid;\n        if (!grid.paging) {\n            return collection;\n        }\n\n        const len = collection.length;\n        const totalPages = Math.ceil(len / perPage);\n\n        const state = {\n            index: (totalPages > 0 && page >= totalPages) ? totalPages - 1 : page,\n            recordsPerPage: perPage\n        };\n\n        const result: ITreeGridRecord[] = DataUtil.page(cloneArray(collection), state);\n        grid.pagingState = state;\n        (grid as any)._page = state.index;\n\n        return result;\n    }\n}\n/** @hidden */\n@Pipe({\n    name: 'treeGridTransaction',\n    pure: true\n})\nexport class IgxTreeGridTransactionPipe implements PipeTransform {\n\n    private gridAPI: IgxTreeGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxTreeGridAPIService>gridAPI;\n    }\n\n    transform(collection: any[], id: string, pipeTrigger: number): any[] {\n        const grid: IgxTreeGridComponent = this.gridAPI.grid;\n\n        if (grid.transactions.enabled) {\n            const aggregatedChanges = grid.transactions.getAggregatedChanges(true);\n            if (aggregatedChanges.length > 0) {\n                const primaryKey = grid.primaryKey;\n                if (!primaryKey) {\n                    return collection;\n                }\n\n                const foreignKey = grid.foreignKey;\n                const childDataKey = grid.childDataKey;\n\n                if (foreignKey) {\n                    const flatDataClone = cloneArray(collection);\n                    return DataUtil.mergeTransactions(\n                        flatDataClone,\n                        aggregatedChanges,\n                        grid.primaryKey);\n                } else if (childDataKey) {\n                    const hierarchicalDataClone = cloneHierarchicalArray(collection, childDataKey);\n                    return DataUtil.mergeHierarchicalTransactions(\n                        hierarchicalDataClone,\n                        aggregatedChanges,\n                        childDataKey,\n                        grid.primaryKey);\n                }\n            }\n        }\n        return collection;\n    }\n}\n","import { Component, ChangeDetectorRef, ElementRef, ViewChild, Inject,\n     ChangeDetectionStrategy, NgZone, OnInit, Input, TemplateRef } from '@angular/core';\nimport { IgxGridCellComponent } from '../cell.component';\nimport { IgxTreeGridAPIService } from './tree-grid-api.service';\nimport { GridBaseAPIService } from '../api.service';\nimport { getNodeSizeViaRange, PlatformUtil } from '../../core/utils';\nimport { DOCUMENT } from '@angular/common';\nimport { IgxGridBaseDirective } from '../grid';\nimport { IgxGridSelectionService, IgxGridCRUDService } from '../selection/selection.service';\nimport { HammerGesturesManager } from '../../core/touch';\nimport { GridType } from '../common/grid.interface';\nimport { IgxGridExpandableCellComponent } from '../grid/expandable-cell.component';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    selector: 'igx-tree-grid-cell',\n    templateUrl: 'tree-cell.component.html',\n    providers: [HammerGesturesManager]\n})\nexport class IgxTreeGridCellComponent extends IgxGridExpandableCellComponent {\n    private treeGridAPI: IgxTreeGridAPIService;\n\n    constructor(\n                selectionService: IgxGridSelectionService,\n                crudService: IgxGridCRUDService,\n                gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n                cdr: ChangeDetectorRef,\n                element: ElementRef,\n                protected zone: NgZone,\n                touchManager: HammerGesturesManager,\n                @Inject(DOCUMENT) public document,\n                protected platformUtil: PlatformUtil) {\n        super(selectionService, crudService, gridAPI, cdr, element, zone, touchManager, document, platformUtil);\n        this.treeGridAPI = <IgxTreeGridAPIService>gridAPI;\n    }\n\n    /**\n     * @hidden\n     */\n    @Input()\n    level = 0;\n\n    /**\n     * @hidden\n     */\n    @Input()\n    showIndicator = false;\n\n\n    /**\n     * @hidden\n     */\n    @Input()\n    public isLoading: boolean;\n\n    /**\n     * @hidden\n     */\n    public toggle(event: Event) {\n        event.stopPropagation();\n        this.treeGridAPI.set_row_expansion_state(this.row.rowID, !this.row.expanded, event);\n    }\n\n    /**\n     * @hidden\n     */\n    public onLoadingDblClick(event: Event) {\n        event.stopPropagation();\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { IgxTreeGridAPIService } from './tree-grid-api.service';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { ITreeGridRecord } from './tree-grid.interfaces';\nimport { IgxTreeGridComponent } from './tree-grid.component';\nimport { ISummaryRecord } from '../summaries/grid-summary';\nimport { GridSummaryCalculationMode, GridSummaryPosition } from '../common/enums';\nimport { GridType } from '../common/grid.interface';\n\n/** @hidden */\n@Pipe({\n    name: 'treeGridSummary',\n    pure: true\n})\nexport class IgxTreeGridSummaryPipe implements PipeTransform {\n    private gridAPI: IgxTreeGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxTreeGridAPIService>gridAPI;\n     }\n\n    public transform(flatData: ITreeGridRecord[],\n        hasSummary: boolean,\n        summaryCalculationMode: GridSummaryCalculationMode,\n        summaryPosition: GridSummaryPosition,\n        id: string, pipeTrigger: number, summaryPipeTrigger: number): any[] {\n        const grid: IgxTreeGridComponent = this.gridAPI.grid;\n\n        if (!flatData || !hasSummary || summaryCalculationMode === GridSummaryCalculationMode.rootLevelOnly) {\n            return flatData;\n        }\n\n        return this.addSummaryRows(grid, flatData, summaryPosition);\n    }\n\n    private addSummaryRows(grid: IgxTreeGridComponent, collection: ITreeGridRecord[], summaryPosition: GridSummaryPosition): any[] {\n        const recordsWithSummary = [];\n        const maxSummaryHeight = grid.summaryService.calcMaxSummaryHeight();\n\n        for (let i = 0; i < collection.length; i++) {\n            const record = collection[i];\n            recordsWithSummary.push(record);\n\n            const isExpanded = record.children && record.children.length > 0 && record.expanded;\n\n            if (summaryPosition === GridSummaryPosition.bottom && !isExpanded) {\n                let childRecord = record;\n                let parent = record.parent;\n\n                while (parent) {\n                    const children = parent.children;\n\n                    if (children[children.length - 1] === childRecord ) {\n                        let childData = children.filter(r => !r.isFilteredOutParent).map(r => r.data);\n                        childData = this.removeDeletedRecord(grid, parent.rowID, childData);\n                        const summaries = grid.summaryService.calculateSummaries(parent.rowID, childData);\n                        const summaryRecord: ISummaryRecord = {\n                            summaries: summaries,\n                            max: maxSummaryHeight,\n                            cellIndentation: parent.level + 1\n                        };\n                        recordsWithSummary.push(summaryRecord);\n\n                        childRecord = parent;\n                        parent = childRecord.parent;\n                    } else {\n                        break;\n                    }\n                }\n            } else if (summaryPosition === GridSummaryPosition.top && isExpanded) {\n                let childData = record.children.filter(r => !r.isFilteredOutParent).map(r => r.data);\n                childData = this.removeDeletedRecord(grid, record.rowID, childData);\n                const summaries = grid.summaryService.calculateSummaries(record.rowID, childData);\n                const summaryRecord: ISummaryRecord = {\n                    summaries: summaries,\n                    max: maxSummaryHeight,\n                    cellIndentation: record.level + 1\n                };\n                recordsWithSummary.push(summaryRecord);\n            }\n        }\n        return recordsWithSummary;\n    }\n\n    private removeDeletedRecord(grid, rowId, data) {\n        if (!grid.transactions.enabled || !grid.cascadeOnDelete) {\n            return data;\n        }\n        const deletedRows = grid.transactions.getTransactionLog().filter(t => t.type === 'delete').map(t => t.id);\n        let row = grid.records.get(rowId);\n        if (!row && deletedRows.lenght === 0) { return []; }\n        row = row.children ? row : row.parent;\n        while (row) {\n            rowId = row.rowID;\n            if (deletedRows.indexOf(rowId) !== -1) {\n                return [];\n            }\n            row = row.parent;\n        }\n        deletedRows.forEach(rowID => {\n            const tempData = grid.primaryKey ? data.map(rec => rec[grid.primaryKey]) : data;\n            const index = tempData.indexOf(rowID);\n            if (index !== -1) {\n                data.splice(index, 1);\n            }\n        });\n        return data;\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { IgxTreeGridComponent } from './tree-grid.component';\nimport { IgxTreeGridRowComponent } from './tree-grid-row.component';\nimport { IgxGridCommonModule } from '../grid-common.module';\nimport { IgxTreeGridHierarchizingPipe } from './tree-grid.pipes';\nimport { IgxTreeGridFlatteningPipe, IgxTreeGridSortingPipe, IgxTreeGridPagingPipe, IgxTreeGridTransactionPipe } from './tree-grid.pipes';\nimport { IgxTreeGridCellComponent } from './tree-cell.component';\nimport { IgxTreeGridFilteringPipe } from './tree-grid.filtering.pipe';\nimport { IgxTreeGridSummaryPipe } from './tree-grid.summary.pipe';\nimport { IgxRowLoadingIndicatorTemplateDirective } from './tree-grid.directives';\n\n/**\n * @hidden\n */\n@NgModule({\n  declarations: [\n    IgxTreeGridComponent,\n    IgxTreeGridRowComponent,\n    IgxTreeGridCellComponent,\n    IgxTreeGridHierarchizingPipe,\n    IgxTreeGridFlatteningPipe,\n    IgxTreeGridSortingPipe,\n    IgxTreeGridFilteringPipe,\n    IgxTreeGridPagingPipe,\n    IgxTreeGridTransactionPipe,\n    IgxTreeGridSummaryPipe,\n    IgxRowLoadingIndicatorTemplateDirective\n  ],\n  exports: [\n    IgxTreeGridComponent,\n    IgxTreeGridRowComponent,\n    IgxTreeGridCellComponent,\n    IgxRowLoadingIndicatorTemplateDirective,\n    IgxGridCommonModule\n  ],\n  imports: [\n    IgxGridCommonModule,\n  ]\n})\nexport class IgxTreeGridModule {\n}\n","import { IgxGridNavigationService } from '../grid-navigation.service';\nimport { IgxHierarchicalGridComponent } from './hierarchical-grid.component';\nimport { first } from 'rxjs/operators';\nimport { ISelectionNode } from '../selection/selection.service';\nimport { isIE } from '../../core/utils';\nimport { FilterMode } from '../common/enums';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class IgxHierarchicalGridNavigationService extends IgxGridNavigationService {\n    public grid: IgxHierarchicalGridComponent;\n\n    protected getCellSelector(visibleIndex?: number, isSummary = false) {\n        return isSummary ? 'igx-grid-summary-cell' : 'igx-hierarchical-grid-cell';\n    }\n\n    protected getRowSelector() {\n        return 'igx-hierarchical-grid-row';\n    }\n\n    protected getRowByIndex(index) {\n        const row = super.getRowByIndex(index) as any;\n        return row;\n    }\n\n    private getChildContainer(grid?) {\n        const currGrid = grid || this.grid;\n        return currGrid.nativeElement.parentNode.parentNode.parentNode;\n    }\n\n    private getChildGridRowContainer(grid?) {\n        const currGrid = grid || this.grid;\n        return currGrid.nativeElement.parentNode.parentNode;\n    }\n\n    private getChildGrid(childGridID, grid) {\n        const cgrid = grid.hgridAPI.getChildGrids(true).filter((g) => g.id === childGridID)[0];\n        return cgrid;\n    }\n\n    private _isScrolledToBottom(grid) {\n        const scrollTop = grid.verticalScrollContainer.scrollPosition;\n        const scrollHeight = grid.verticalScrollContainer.getScroll().scrollHeight;\n        return scrollHeight === 0 || Math.round(scrollTop + grid.verticalScrollContainer.igxForContainerSize) === scrollHeight;\n    }\n    private getIsChildAtIndex(index) {\n        return this.grid.isChildGridRecord(this.grid.dataView[index]);\n    }\n\n    public getCellElementByVisibleIndex(rowIndex, visibleColumnIndex, isSummary = false) {\n        const cellSelector = this.getCellSelector(visibleColumnIndex, isSummary);\n        if (isSummary) {\n            const summaryRow = this.grid.summariesRowList.toArray()[0].nativeElement;\n            return summaryRow.querySelector(\n                `${cellSelector}[data-visibleIndex=\"${visibleColumnIndex}\"]`);\n        }\n        const row = this.getRowByIndex(rowIndex);\n        return row.querySelector(\n            `${cellSelector}[data-rowindex=\"${rowIndex}\"][data-visibleIndex=\"${visibleColumnIndex}\"]`);\n    }\n\n    public navigateUp(rowElement, selectedNode: ISelectionNode) {\n        if (selectedNode.isSummaryRow) { return; }\n        const prevElem = rowElement.previousElementSibling;\n        const visibleColumnIndex = selectedNode.column;\n        const currentRowIndex = selectedNode.row;\n        if (prevElem) {\n            const nodeName = prevElem.children[0].nodeName.toLowerCase();\n            const isElemChildGrid = nodeName.toLowerCase() === 'igx-child-grid-row';\n            if (isElemChildGrid) {\n                this.focusPrevChild(prevElem, visibleColumnIndex, this.grid);\n            } else {\n                if (this.grid.parent !== null) {\n                    // currently navigating in child grid\n                    this._navigateUpInChild(rowElement, currentRowIndex, visibleColumnIndex);\n                } else {\n                    super.navigateUp(rowElement, selectedNode);\n                }\n            }\n        } else if (currentRowIndex !== 0) {\n            // handle scenario when prev item is child grid but is not yet in view\n            const isPrevChildGrid = this.getIsChildAtIndex(currentRowIndex - 1);\n            if (!isPrevChildGrid) {\n                super.navigateUp(rowElement, selectedNode);\n            } else {\n                this.scrollGrid(this.grid, -rowElement.offsetHeight,\n                    () => {\n                        rowElement = this.getRowByIndex(currentRowIndex);\n                        this.navigateUp(rowElement, selectedNode);\n                    });\n            }\n        } else if (this.grid.parent !== null &&\n            currentRowIndex === 0) {\n            // move to prev row in sibling layout or parent\n            this.focusPrev(visibleColumnIndex);\n        }\n    }\n    public navigateDown(rowElement, selectedNode: ISelectionNode) {\n        if (selectedNode.isSummaryRow) { return; }\n        const nextElem = rowElement.nextElementSibling;\n        const visibleColumnIndex = selectedNode.column;\n        const currentRowIndex = selectedNode.row;\n        if (nextElem) {\n            // next elem is in DOM\n            const nodeName = nextElem.children[0].nodeName.toLowerCase();\n            const isNextElemChildGrid = nodeName.toLowerCase() === 'igx-child-grid-row';\n            if (isNextElemChildGrid) {\n                this.focusNextChild(nextElem, visibleColumnIndex, this.grid);\n            } else {\n                if (this.grid.parent !== null) {\n                    // currently navigating in child grid\n                    this._navigateDownInChild(rowElement, currentRowIndex, visibleColumnIndex);\n                } else {\n                    super.navigateDown(rowElement, selectedNode);\n                }\n            }\n        } else if (currentRowIndex !== this.grid.dataView.length - 1) {\n            // scroll next in view\n            super.navigateDown(rowElement, selectedNode);\n        } else if (this.grid.parent !== null &&\n            currentRowIndex === this.grid.dataView.length - 1) {\n            // move to next row in sibling layout or in parent\n            this.focusNext(visibleColumnIndex);\n        }\n    }\n\n    public navigateTop(visibleColumnIndex) {\n        if (this.grid.parent !== null) {\n            // navigating in child\n            const childContainer = this.grid.nativeElement.parentNode.parentNode;\n            const diff =\n            childContainer.getBoundingClientRect().top - this.grid.rootGrid.tbody.nativeElement.getBoundingClientRect().top;\n            const topIsVisible = diff >= 0;\n            const scrollable = this.getNextScrollable(this.grid);\n            if (!topIsVisible) {\n                this.scrollGrid(scrollable.grid, diff,\n                    () => super.navigateTop(visibleColumnIndex));\n            } else {\n                super.navigateTop(visibleColumnIndex);\n            }\n        } else {\n            super.navigateTop(visibleColumnIndex);\n        }\n    }\n\n    public navigateBottom(visibleColumnIndex) {\n        // handle scenario where last index is child grid\n        // in that case focus cell in last data row\n        const lastIndex = this.grid.dataView.length - 1;\n        if (this.getIsChildAtIndex(lastIndex)) {\n            const targetIndex = lastIndex - 1;\n            const scrTopPosition = this.grid.verticalScrollContainer.getScrollForIndex(targetIndex, true);\n            const verticalScrollTop = this.grid.verticalScrollContainer.scrollPosition;\n            const cellSelector = this.getCellSelector(visibleColumnIndex);\n            if (verticalScrollTop === scrTopPosition) {\n                const cells = this.getRowByIndex(targetIndex).querySelectorAll(\n                    `${cellSelector}[data-visibleIndex=\"${visibleColumnIndex}\"]`);\n                cells[cells.length - 1].focus();\n            } else {\n                this.scrollGrid(this.grid, scrTopPosition - verticalScrollTop,\n                    () => {\n                        const cells = this.getRowByIndex(targetIndex).querySelectorAll(\n                            `${cellSelector}[data-visibleIndex=\"${visibleColumnIndex}\"]`);\n                        if (cells.length > 0) { cells[cells.length - 1].focus(); }\n                    });\n            }\n        } else  if (this.grid.parent !== null) {\n            const childContainer = this.grid.nativeElement.parentNode.parentNode;\n            const diff =\n            childContainer.getBoundingClientRect().bottom - this.grid.rootGrid.tbody.nativeElement.getBoundingClientRect().bottom;\n            const endIsVisible = diff < 0;\n            const scrollable = this.getNextScrollableDown(this.grid);\n            if (!endIsVisible) {\n                this.scrollGrid(scrollable.grid, diff,\n                    () => super.navigateBottom(visibleColumnIndex));\n            } else {\n                super.navigateBottom(visibleColumnIndex);\n            }\n        } else {\n            super.navigateBottom(visibleColumnIndex);\n        }\n    }\n    public goToLastCell() {\n        // handle scenario where last index is child grid\n        // in that case focus last cell in last data row\n        const lastIndex = this.grid.dataView.length - 1;\n        if (this.getIsChildAtIndex(lastIndex)) {\n            const targetIndex = lastIndex - 1;\n            const scrTopPosition = this.grid.verticalScrollContainer.getScrollForIndex(targetIndex, true);\n            const verticalScrollTop = this.grid.verticalScrollContainer.scrollPosition;\n            if (verticalScrollTop === scrTopPosition) {\n                this.onKeydownEnd(targetIndex);\n            } else {\n                this.scrollGrid(this.grid, scrTopPosition - verticalScrollTop,\n                    () => {\n                        this.onKeydownEnd(targetIndex);\n                    });\n            }\n        } else {\n            super.goToLastCell();\n        }\n    }\n\n    public onKeydownEnd(rowIndex, isSummary = false) {\n        if (this.grid.parent && !isSummary) {\n            // handle scenario where last child row might not be in view\n            // parent should scroll to child grid end\n            const childContainer = this.grid.nativeElement.parentNode.parentNode;\n            const diffBottom =\n                childContainer.getBoundingClientRect().bottom - this.grid.rootGrid.nativeElement.getBoundingClientRect().bottom;\n            const row = this.grid.getRowByIndex(rowIndex).element.nativeElement;\n            const rowBottom = row.getBoundingClientRect().bottom;\n            const rowIsVisible = rowBottom <= this.grid.rootGrid.tbody.nativeElement.getBoundingClientRect().bottom;\n            const gridTop = this._getMaxTop(this.grid);\n            const diffTop = row.getBoundingClientRect().bottom -\n                row.offsetHeight - gridTop;\n            const endIsVisible = diffBottom <= 0;\n            const topVisible = diffTop >= 0;\n            if (!endIsVisible && !rowIsVisible) {\n                this.scrollGrid(this.grid.parent, diffBottom, () => super.onKeydownEnd(rowIndex));\n            } else if (!topVisible) {\n                const scrGrid = this.grid.verticalScrollContainer.scrollPosition !== 0 ? this.grid :\n                    this.getNextScrollable(this.grid).grid;\n                const topGrid = scrGrid.tbody.nativeElement.getBoundingClientRect().top >\n                    this.grid.rootGrid.tbody.nativeElement.getBoundingClientRect().top ? scrGrid : this.grid.rootGrid;\n                this.scrollGrid(topGrid, diffTop, () => super.onKeydownEnd(rowIndex));\n            } else {\n                super.onKeydownEnd(rowIndex, isSummary);\n            }\n        } else {\n            super.onKeydownEnd(rowIndex, isSummary);\n        }\n\n    }\n\n    public goToFirstCell() {\n        const verticalScroll = this.grid.verticalScrollContainer.getScroll();\n        const horizontalScroll = this.grid.dataRowList.first.virtDirRow.getScroll();\n        if (verticalScroll.scrollTop === 0 && this.grid.parent) {\n            // scroll parent so that current child is in view\n            if (!horizontalScroll.clientWidth || parseInt(horizontalScroll.scrollLeft, 10) <= 1 || this.grid.pinnedColumns.length) {\n                this.navigateTop(0);\n            } else {\n                this.horizontalScroll(this.grid.dataRowList.first.index).scrollTo(0);\n                this.grid.parentVirtDir.onChunkLoad\n                    .pipe(first())\n                    .subscribe(() => {\n                        this.navigateTop(0);\n                    });\n            }\n        } else {\n            super.goToFirstCell();\n        }\n    }\n\n    public performTab(currentRowEl, selectedNode: ISelectionNode) {\n        if (this.grid.rowInEditMode) {\n            super.performTab(currentRowEl, selectedNode);\n            return;\n        }\n        const rowIndex = selectedNode.row;\n        const visibleColumnIndex = selectedNode.column;\n        const isSummaryRow = selectedNode.isSummaryRow;\n        const summaryRows = this.grid.summariesRowList.toArray();\n        const hasSummaries = summaryRows.length > 0;\n        const isLastDataRow = rowIndex === this.grid.dataView.length - 1;\n        const nextIsDataRow = this.grid.dataRowList.find(row => row.index === rowIndex + 1);\n        const isLastColumn = this.grid.unpinnedColumns[this.grid.unpinnedColumns.length - 1].visibleIndex === visibleColumnIndex;\n        const isLastSummaryRow = hasSummaries && isSummaryRow;\n        const nextIndex = rowIndex + 1;\n        const virt = this.grid.verticalScrollContainer;\n        const isNextChild = nextIndex <= virt.igxForOf.length - 1 &&\n            this.grid.isChildGridRecord(virt.igxForOf[nextIndex]);\n        if (!nextIsDataRow && !(isLastDataRow && hasSummaries) && isLastColumn && !isSummaryRow) {\n            // navigating in child, next is not summary\n            const childContainer = this.getChildGridRowContainer();\n            const nextIsSiblingChild = this.grid.parent ? !!childContainer.nextElementSibling : false;\n            if (nextIsSiblingChild) {\n                this.focusNextChildDOMElem(childContainer, this.grid.parent);\n            } else if (isNextChild) {\n                const isInView = virt.state.startIndex + virt.state.chunkSize > nextIndex;\n                if (!isInView) {\n                    this.scrollGrid(this.grid, 'next', () => {\n                        this.focusNextChildDOMElem(currentRowEl, this.grid);\n                    });\n                } else {\n                    this.focusNextChildDOMElem(currentRowEl, this.grid);\n                }\n            } else if (this.grid.parent && this.grid.parent.summariesRowList.length > 0) {\n               this._navigateToNextParentRow(currentRowEl);\n            } else {\n                this.navigateDown(currentRowEl, { row: rowIndex, column: 0 });\n            }\n        } else if (isLastSummaryRow && isLastColumn && this.grid.parent) {\n            this._navigateToNextParentRow(currentRowEl);\n        } else  if (isLastDataRow && hasSummaries && isLastColumn && this.grid.parent) {\n            // navigating in child rows, next is child grid's summary row\n           this.focusNextRow(summaryRows[0].nativeElement, 0, this.grid.parent, true);\n        } else {\n            super.performTab(currentRowEl, selectedNode);\n        }\n    }\n\n    private _navigateToNextParentRow(currentRowEl: any): void {\n         // next is parent summary or next parent row\n         const parent = this.grid.parent;\n         const parentHasSummary = parent.summariesRowList.length > 0;\n         const parentRowIndex = parseInt(\n            this.getClosestElemByTag(currentRowEl, 'igx-child-grid-row').parentNode.getAttribute('data-rowindex'), 10);\n         const isLastRowInParent = parent.dataView.length - 1 === parentRowIndex;\n         // check if next is sibling\n         const childRowContainer = this.getChildGridRowContainer(this.grid);\n         const nextIsSiblingChild = !!childRowContainer.nextElementSibling;\n         if (isLastRowInParent && parentHasSummary && !nextIsSiblingChild) {\n             // next is parent summary\n             const parentSummary = parent.summariesRowList.first.nativeElement;\n             parent.navigation.focusNextRow(parentSummary, 0, parent, true);\n         } else {\n             // next is sibling or parent\n             this.focusNext(0);\n         }\n    }\n\n    private focusNextChildDOMElem(currentRowEl, grid) {\n        const gridElem = currentRowEl.nextElementSibling.querySelector('igx-hierarchical-grid');\n        const childGridID = gridElem.getAttribute('id');\n        const childGrid = this.getChildGrid(childGridID, grid);\n        if (childGrid.allowFiltering && childGrid.filterMode === FilterMode.quickFilter) {\n            childGrid.navigation.moveFocusToFilterCell(true);\n            return;\n        }\n        this.focusNextChild(currentRowEl.nextElementSibling, 0, grid);\n    }\n\n    public navigatePrevFilterCell(column: IgxColumnComponent, eventArgs) {\n        if (column.visibleIndex === 0 && this.grid.parent) {\n            eventArgs.preventDefault();\n            let targetGrid = this.grid.parent;\n            const prevSiblingChild = this.getChildGridRowContainer().previousElementSibling;\n            if (prevSiblingChild) {\n                const gridElem = prevSiblingChild.querySelectorAll('igx-hierarchical-grid')[0];\n                targetGrid = this.getChildGrid(gridElem.getAttribute('id'), this.grid.parent);\n            }\n            this.focusPrev(targetGrid.unpinnedColumns[targetGrid.unpinnedColumns.length - 1].visibleIndex);\n        } else {\n            super.navigatePrevFilterCell(column, eventArgs);\n        }\n    }\n\n    public navigateNextFilterCell(column: IgxColumnComponent, eventArgs) {\n        const cols = this.grid.filteringService.unpinnedFilterableColumns;\n        const nextFilterableIndex = cols.indexOf(column) + 1;\n        if (nextFilterableIndex >= this.grid.filteringService.unpinnedFilterableColumns.length) {\n            // next is not filter cell\n            const dataRows = this.grid.rowList.toArray();\n            const hasRows = dataRows.length !== 0;\n            const summaryRows = this.grid.summariesRowList.toArray();\n            const hasSummaries = summaryRows.length > 0 && summaryRows[0].summaryCells.length > 0;\n            if (hasRows) {\n                this.focusNextRow(dataRows[0].nativeElement, 0, this.grid, false);\n            } else if (hasSummaries) {\n                this.focusNextRow(summaryRows[0].nativeElement, 0, this.grid, true);\n            } else {\n                this.focusNext(0);\n            }\n            eventArgs.preventDefault();\n        } else {\n            super.navigateNextFilterCell(column, eventArgs);\n        }\n    }\n\n    public performShiftTabKey(currentRowEl, selectedNode: ISelectionNode) {\n        if (this.grid.rowInEditMode) {\n            super.performShiftTabKey(currentRowEl, selectedNode);\n            return;\n        }\n        const rowIndex = selectedNode.row;\n        const visibleColumnIndex = selectedNode.column;\n        const isSummary = selectedNode.isSummaryRow;\n        if (visibleColumnIndex === 0 && rowIndex === 0 && this.grid.parent && !isSummary) {\n            if (this.grid.allowFiltering && this.grid.filterMode === FilterMode.quickFilter) {\n                this.moveFocusToFilterCell();\n            } else {\n                const prevSiblingChild = this.getChildGridRowContainer().previousElementSibling;\n                if (prevSiblingChild) {\n                    const gridElem = prevSiblingChild.querySelectorAll('igx-hierarchical-grid')[0];\n                    this.performShiftTabIntoChild(gridElem, currentRowEl, rowIndex);\n                } else {\n                    const selNode = {\n                        row: rowIndex,\n                        column: this.grid.parent.unpinnedColumns[this.grid.parent.unpinnedColumns.length - 1].visibleIndex\n                    };\n                    this.navigateUp(currentRowEl, selNode);\n                }\n            }\n        } else if (visibleColumnIndex === 0 && currentRowEl.previousElementSibling &&\n            currentRowEl.previousElementSibling.children[0].tagName.toLowerCase() === 'igx-child-grid-row') {\n            const gridElem = this.getLastGridElem(currentRowEl.previousElementSibling);\n            this.performShiftTabIntoChild(gridElem, currentRowEl, rowIndex);\n        } else if (visibleColumnIndex === 0 && isSummary) {\n            const lastRowIndex = this.grid.dataView.length - 1;\n            if (lastRowIndex === -1) {\n                // no child data\n                if (this.grid.allowFiltering && this.grid.filterMode === FilterMode.quickFilter) {\n                    this.moveFocusToFilterCell();\n                } else {\n                    const selNode = {\n                        row: rowIndex,\n                        column: this.grid.parent.unpinnedColumns[this.grid.parent.unpinnedColumns.length - 1].visibleIndex\n                    };\n                    this.navigateUp(currentRowEl, selNode);\n                }\n            } else if (!this.getIsChildAtIndex(lastRowIndex)) {\n                super.goToLastCell();\n            } else {\n                const scrTopPosition = this.grid.verticalScrollContainer.getScrollForIndex(lastRowIndex, true);\n                const verticalScrollTop = this.grid.verticalScrollContainer.scrollPosition;\n                if (verticalScrollTop === scrTopPosition || isNaN(scrTopPosition)) {\n                    const closestChild = this.getLastGridElem(this.grid.getRowByIndex(lastRowIndex).nativeElement.parentElement);\n                    this.performShiftTabIntoChild(closestChild, currentRowEl, rowIndex);\n                } else {\n                    this.scrollGrid(this.grid, scrTopPosition - verticalScrollTop,\n                        () => {\n                            const closestChild = this.getLastGridElem(this.grid.getRowByIndex(lastRowIndex).nativeElement.parentElement);\n                            this.performShiftTabIntoChild(closestChild, currentRowEl, rowIndex);\n                        });\n                }\n            }\n        } else {\n            super.performShiftTabKey(currentRowEl, selectedNode);\n        }\n    }\n\n    public getFocusableGrid() {\n        return (isIE() && this.grid.rootGrid) ? this.grid.rootGrid : this.grid;\n    }\n\n    private getLastGridElem(trContainer) {\n        const children = trContainer.children;\n        const closestChild = children[children.length - 1].children[0].children[0];\n        return closestChild;\n    }\n\n    private performShiftTabIntoChild(gridElem, currentRowEl, rowIndex) {\n        const childGridID = gridElem.getAttribute('id');\n            const childGrid = this.getChildGrid(childGridID, this.grid) || this.getChildGrid(childGridID, this.grid.parent);\n            const lastIndex = childGrid.unpinnedColumns[childGrid.unpinnedColumns.length - 1].visibleIndex;\n            const summaryRows = childGrid.summariesRowList.toArray();\n            if (summaryRows.length > 0 && summaryRows[0].summaryCells.length > 0) {\n                // move focus to last summary row cell\n                const summaryRow = summaryRows[0].nativeElement;\n                this.focusPrevRow(summaryRow, lastIndex, childGrid, true, true);\n            } else if (childGrid.rowList.length === 0 &&\n             childGrid.allowFiltering && childGrid.filterMode === FilterMode.quickFilter) {\n                 // move to filter cell\n                childGrid.navigation.moveFocusToFilterCell();\n            } else if (childGrid.rowList.length === 0) {\n                // move to prev child or parent row\n                const prevChild = this.getSibling(childGrid);\n                if (prevChild) {\n                    this.performShiftTabIntoChild(prevChild, currentRowEl, rowIndex);\n                } else {\n                    const selNode = {\n                        row:  rowIndex,\n                        column: this.grid.unpinnedColumns[this.grid.unpinnedColumns.length - 1].visibleIndex\n                    };\n                    this.navigateUp(currentRowEl, selNode);\n                }\n            } else {\n                // move to prev cell\n                childGrid.navigation.goToLastCell();\n            }\n    }\n\n    private getSibling(childGrid) {\n        const prevChildRow = childGrid.childRow.nativeElement.previousElementSibling;\n        if (prevChildRow) {\n            return prevChildRow.children[0].children[0];\n        }\n        return null;\n    }\n\n    private focusNextChild(elem, visibleColumnIndex, grid) {\n        const gridElem = elem.querySelector('igx-hierarchical-grid');\n        const childGridID = gridElem.getAttribute('id');\n        const childGrid = this.getChildGrid(childGridID, grid);\n\n        if (childGrid.rowList.length === 0) {\n            this.focusNext(visibleColumnIndex, childGrid);\n            return;\n        }\n\n        // Update column index since the next child can have in general less columns than visibleColumnIndex value.\n        const lastCellIndex = childGrid.unpinnedColumns[childGrid.unpinnedColumns.length - 1].visibleIndex;\n        visibleColumnIndex = Math.min(lastCellIndex, visibleColumnIndex);\n\n        if (childGrid.verticalScrollContainer.state.startIndex !== 0) {\n            // scroll to top\n            this.scrollGrid(childGrid, 'top', () => this.focusNextRow(elem, visibleColumnIndex, childGrid));\n        } else {\n            this.focusNextRow(elem, visibleColumnIndex, childGrid);\n        }\n    }\n    private focusPrevChild(elem, visibleColumnIndex, grid) {\n        const grids = [];\n        const gridElems = Array.from(elem.querySelectorAll('igx-hierarchical-grid'));\n        const childLevel = grid.childLayoutList.first.level;\n        gridElems.forEach((hg) => {\n            const parentRow = this.getClosestElemByTag(hg, 'igx-child-grid-row');\n            if (parentRow && parseInt(parentRow.getAttribute('data-level'), 10) === childLevel) {\n                grids.push(hg);\n            }\n        });\n        const gridElem = grids[grids.length - 1];\n        const childGridID = gridElem.getAttribute('id');\n        const childGrid = this.getChildGrid(childGridID, grid);\n\n        if (childGrid.rowList.length === 0) {\n            this.focusPrev(visibleColumnIndex, childGrid);\n            return;\n        }\n\n        // Update column index since the previous child can have in general less columns than visibleColumnIndex value.\n        const lastCellIndex = childGrid.unpinnedColumns[childGrid.unpinnedColumns.length - 1].visibleIndex;\n        visibleColumnIndex = Math.min(lastCellIndex, visibleColumnIndex);\n\n        const isScrolledToBottom = this._isScrolledToBottom(childGrid);\n        const lastIndex = childGrid.dataView.length - 1;\n        if (!isScrolledToBottom) {\n            // scroll to end\n            this.scrollGrid(childGrid, 'bottom', () => this.focusPrevChild(elem, visibleColumnIndex, grid));\n        } else {\n            const lastRowInChild = childGrid.getRowByIndex(lastIndex);\n            const isChildGrid = lastRowInChild.nativeElement.nodeName.toLowerCase() === 'igx-child-grid-row';\n            if (isChildGrid) {\n                this.focusPrevChild(lastRowInChild.nativeElement.parentNode, visibleColumnIndex, childGrid);\n            } else {\n                this.focusPrevRow(lastRowInChild.nativeElement, visibleColumnIndex, childGrid, true);\n            }\n        }\n    }\n    private focusPrev(visibleColumnIndex, grid?) {\n        const currGrid = grid || this.grid;\n        let parentContainer = this.getChildContainer(currGrid);\n        let childRowContainer = this.getChildGridRowContainer(currGrid);\n        const prevIsSiblingChild = !!childRowContainer.previousElementSibling;\n        let prev = childRowContainer.previousElementSibling || parentContainer.previousElementSibling;\n        if (prev) {\n            if (prevIsSiblingChild) {\n                this.focusPrevChild(prev, visibleColumnIndex, currGrid.parent);\n            } else {\n                this.focusPrevRow(prev, visibleColumnIndex, currGrid.parent);\n            }\n        } else {\n            this.scrollGrid(currGrid.parent, 'prev',\n                () => {\n                    parentContainer = this.getChildContainer(grid);\n                    childRowContainer = this.getChildGridRowContainer(grid);\n                    prev = childRowContainer.previousElementSibling || parentContainer.previousElementSibling;\n                    if (prevIsSiblingChild) {\n                        this.focusPrevChild(prev, visibleColumnIndex, currGrid.parent);\n                    } else {\n                        this.focusPrevRow(prev, visibleColumnIndex, currGrid.parent);\n                    }\n                });\n        }\n    }\n\n    private getNextParentInfo(grid) {\n        // find next parent that is not at bottom\n        let currGrid = grid.parent;\n        let nextElem = this.getChildContainer(grid).nextElementSibling;\n        while (!nextElem && currGrid.parent !== null) {\n            nextElem = this.getChildContainer(currGrid).nextElementSibling;\n            currGrid = currGrid.parent;\n        }\n\n        return { grid: currGrid, nextElement: nextElem };\n    }\n    private getNextScrollable(grid) {\n        let currGrid = grid.parent;\n        if (!currGrid) {\n            return { grid: grid, prev: null };\n        }\n        let nonScrollable = currGrid.verticalScrollContainer.scrollPosition === 0;\n        let prev = grid;\n        while (nonScrollable && currGrid.parent !== null) {\n            prev = currGrid;\n            currGrid = currGrid.parent;\n            nonScrollable = currGrid.verticalScrollContainer.scrollPosition === 0;\n        }\n        return { grid: currGrid, prev: prev };\n    }\n\n    private focusNext(visibleColumnIndex, grid?) {\n        const currGrid = grid || this.grid;\n        const parentInfo = this.getNextParentInfo(currGrid);\n        const nextParentGrid = parentInfo.grid;\n        let nextParentElem = parentInfo.nextElement;\n        let childRowContainer = this.getChildGridRowContainer(currGrid);\n        const nextIsSiblingChild = !!childRowContainer.nextElementSibling;\n        let next = childRowContainer.nextElementSibling || nextParentElem;\n        const verticalScroll = nextParentGrid.verticalScrollContainer.getScroll();\n        const parentState = nextParentGrid.verticalScrollContainer.state;\n        const atLastChunk = parentState.startIndex + parentState.chunkSize ===\n         nextParentGrid.dataView.length;\n        if (next) {\n            if (nextIsSiblingChild) {\n                this.focusNextChild(next, visibleColumnIndex, nextParentGrid);\n            } else {\n                this.focusNextRow(next, visibleColumnIndex, grid || nextParentGrid);\n            }\n        } else if (verticalScroll.scrollTop !==\n            verticalScroll.scrollHeight - nextParentGrid.verticalScrollContainer.igxForContainerSize && !atLastChunk) {\n            this.scrollGrid(nextParentGrid, 'next',\n                () => {\n                    nextParentElem = parentInfo.nextElement;\n                    childRowContainer = this.getChildGridRowContainer();\n                    next = childRowContainer.nextElementSibling || nextParentElem;\n                    if (next && nextIsSiblingChild) {\n                        this.focusNextChild(next, visibleColumnIndex, nextParentGrid);\n                    } else if (next) {\n                        this.focusNextRow(next, visibleColumnIndex, grid || nextParentGrid);\n                    }\n                });\n        }\n    }\n    private getNextScrollableDown(grid) {\n        let currGrid = grid.parent;\n        if (!currGrid) {\n            return { grid: grid, prev: null };\n        }\n        let scrollTop = currGrid.verticalScrollContainer.scrollPosition;\n        let scrollHeight = currGrid.verticalScrollContainer.getScroll().scrollHeight;\n        let nonScrollable = scrollHeight === 0 ||\n            Math.round(scrollTop + currGrid.verticalScrollContainer.igxForContainerSize) === scrollHeight;\n        let prev = grid;\n        while (nonScrollable && currGrid.parent !== null) {\n            prev = currGrid;\n            currGrid = currGrid.parent;\n            scrollTop = currGrid.verticalScrollContainer.scrollPosition;\n            scrollHeight = currGrid.verticalScrollContainer.getScroll().scrollHeight;\n            nonScrollable = scrollHeight === 0 ||\n                Math.round(scrollTop + currGrid.verticalScrollContainer.igxForContainerSize) === scrollHeight;\n        }\n        return { grid: currGrid, prev: prev };\n    }\n\n    private _getMinBottom(grid) {\n        let currGrid = grid;\n        let bottom = currGrid.tbody.nativeElement.getBoundingClientRect().bottom;\n        while (currGrid.parent) {\n            currGrid = currGrid.parent;\n            bottom = Math.min(bottom, currGrid.tbody.nativeElement.getBoundingClientRect().bottom);\n        }\n        return bottom;\n    }\n\n    private _getMaxTop(grid) {\n        let currGrid = grid;\n        let top = currGrid.tbody.nativeElement.getBoundingClientRect().top;\n        while (currGrid.parent) {\n            currGrid = currGrid.parent;\n            top = Math.max(top, currGrid.tbody.nativeElement.getBoundingClientRect().top);\n        }\n        return top;\n    }\n\n    private focusNextRow(elem, visibleColumnIndex, grid, isSummary?) {\n        const lastCellIndex = grid.unpinnedColumns[grid.unpinnedColumns.length - 1].visibleIndex;\n        visibleColumnIndex = Math.min(lastCellIndex, visibleColumnIndex);\n        const cellSelector = this.getCellSelector(visibleColumnIndex, isSummary);\n        if (grid.navigation.isColumnFullyVisible(visibleColumnIndex) || grid.rowList.length === 0) {\n            const cell =\n                elem.querySelector(`${cellSelector}[data-visibleIndex=\"${visibleColumnIndex}\"]`);\n            const closestScrollableGrid = this.getNextScrollableDown(grid).grid;\n            // const diff = cell.getBoundingClientRect().bottom - grid.rootGrid.tbody.nativeElement.getBoundingClientRect().bottom;\n            const gridBottom = this._getMinBottom(grid);\n            const diff = cell.getBoundingClientRect().bottom - gridBottom;\n            const inView = diff <= 0;\n            const scrollTop = closestScrollableGrid.verticalScrollContainer.scrollPosition;\n            const scrollHeight = closestScrollableGrid.verticalScrollContainer.getScroll().scrollHeight;\n            const canScroll = !(scrollHeight === 0 ||\n                Math.round(scrollTop + closestScrollableGrid.verticalScrollContainer.igxForContainerSize) === scrollHeight);\n            if (!inView && canScroll) {\n                this.scrollGrid(closestScrollableGrid, diff, () => cell.focus({ preventScroll: true }));\n            } else {\n                cell.focus({ preventScroll: true });\n            }\n        } else {\n            this.horizontalScrollGridToIndex(grid, visibleColumnIndex, () => {\n                this.focusNextRow(elem, visibleColumnIndex, grid, isSummary);\n            });\n        }\n    }\n    public getColumnUnpinnedIndex(visibleColumnIndex: number, grid?: IgxHierarchicalGridComponent) {\n        const currGrid = grid || this.grid;\n        const column = currGrid.unpinnedColumns.find((col) => !col.columnGroup && col.visibleIndex === visibleColumnIndex);\n        return currGrid.pinnedColumns.length ? currGrid.unpinnedColumns.filter((c) => !c.columnGroup).indexOf(column) :\n            visibleColumnIndex;\n    }\n\n    private focusPrevRow(elem, visibleColumnIndex, grid, inChild?, isSummary?) {\n        const lastCellIndex = grid.unpinnedColumns[grid.unpinnedColumns.length - 1].visibleIndex;\n        visibleColumnIndex = Math.min(lastCellIndex, visibleColumnIndex);\n        if (grid.navigation.isColumnFullyVisible(visibleColumnIndex)) {\n            const cellSelector = this.getCellSelector(visibleColumnIndex, isSummary);\n            const cells = elem.querySelectorAll(`${cellSelector}[data-visibleIndex=\"${visibleColumnIndex}\"]`);\n            let cell = cells[cells.length - 1];\n            const rIndex = parseInt(elem.getAttribute('data-rowindex'), 10);\n            const scrGrid = grid.verticalScrollContainer.scrollPosition !== 0 ? grid :\n                this.getNextScrollable(grid).grid;\n            const topGrid = scrGrid.tbody.nativeElement.getBoundingClientRect().top >\n                grid.rootGrid.tbody.nativeElement.getBoundingClientRect().top ? scrGrid : grid.rootGrid;\n            const gridTop = this._getMaxTop(grid);\n            const scrTop = scrGrid.verticalScrollContainer.scrollPosition;\n            const diff = cell.getBoundingClientRect().bottom -\n                cell.offsetHeight - gridTop;\n            if (scrTop !== 0 && diff < 0 && !inChild) {\n                this.scrollGrid(scrGrid, diff, () => {\n                    const el = !isSummary ? grid.navigation.getRowByIndex(rIndex) : elem;\n                    cell = el.querySelectorAll(`${cellSelector}[data-visibleIndex=\"${visibleColumnIndex}\"]`)[0];\n                    cell.focus({ preventScroll: true });\n                });\n            } else if (diff < 0 && inChild) {\n                this.scrollGrid(topGrid, diff, () => {\n                    cell.focus({ preventScroll: true });\n                });\n            } else {\n                cell.focus({ preventScroll: true });\n            }\n        } else {\n            this.horizontalScrollGridToIndex(grid, visibleColumnIndex, () => {\n                this.focusPrevRow(elem, visibleColumnIndex, grid, inChild, isSummary);\n            });\n        }\n    }\n\n    private horizontalScrollGridToIndex(grid, visibleColumnIndex, callBackFunc) {\n        const unpinnedIndex = this.getColumnUnpinnedIndex(visibleColumnIndex, grid);\n        grid.parentVirtDir.onChunkLoad\n            .pipe(first())\n            .subscribe(callBackFunc);\n        if (grid.dataRowList.length > 0) {\n            grid.dataRowList.first.virtDirRow.scrollTo(unpinnedIndex);\n        } else {\n            grid.headerContainer.scrollTo(unpinnedIndex);\n        }\n\n    }\n    private scrollGrid(grid, target, callBackFunc) {\n        this.getFocusableGrid().nativeElement.focus({preventScroll: true});\n        requestAnimationFrame(() => {\n            if (typeof target === 'number') {\n                grid.verticalScrollContainer.addScrollTop(target);\n            } else {\n                switch (target) {\n                    case 'top': grid.verticalScrollContainer.scrollTo(0); break;\n                    case 'bottom': grid.verticalScrollContainer.scrollTo(grid.dataView.length - 1); break;\n                    case 'next': grid.verticalScrollContainer.scrollNext(); break;\n                    case 'prev': grid.verticalScrollContainer.scrollPrev(); break;\n                }\n            }\n            grid.verticalScrollContainer.onChunkLoad\n                .pipe(first())\n                .subscribe(callBackFunc);\n        });\n    }\n\n    private _navigateUpInChild(rowElement, currentRowIndex, visibleColumnIndex) {\n        const prevElem = rowElement.previousElementSibling;\n        const scrollable = this.getNextScrollable(this.grid);\n        const grid = scrollable.grid;\n        const scrTop = grid.verticalScrollContainer.scrollPosition;\n        const containerTop = scrollable.prev.nativeElement.parentNode.parentNode.parentNode.parentNode;\n        const top = parseInt(containerTop.style.top, 10);\n        if (scrTop !== 0 && top < 0) {\n            this.scrollGrid(grid, -prevElem.offsetHeight,\n                () => super.navigateUp(rowElement, { row: currentRowIndex, column: visibleColumnIndex }));\n        } else {\n            super.navigateUp(rowElement, { row: currentRowIndex, column: visibleColumnIndex });\n        }\n    }\n\n    private _navigateDownInChild(rowElement, currentRowIndex, visibleColumnIndex) {\n        const nextElem = rowElement.nextElementSibling;\n        const childContainer = this.grid.nativeElement.parentNode.parentNode;\n        const diff =\n            childContainer.getBoundingClientRect().bottom - this.grid.rootGrid.nativeElement.getBoundingClientRect().bottom;\n        const endIsVisible = diff < 0;\n        const scrollable = this.getNextScrollableDown(this.grid);\n        const grid = scrollable.grid;\n        if (!endIsVisible) {\n            this.scrollGrid(grid, nextElem.offsetHeight,\n                () => super.navigateDown(rowElement, { row: currentRowIndex, column: visibleColumnIndex }));\n        } else {\n            super.navigateDown(rowElement, { row: currentRowIndex, column: visibleColumnIndex });\n        }\n    }\n\n    protected getNextRowByIndex(nextIndex) {\n        return this.grid.dataRowList.find(element => element.index === nextIndex).element.nativeElement;\n   }\n}\n","import {\n    ElementRef,\n    NgZone,\n    ChangeDetectorRef,\n    IterableDiffers,\n    ViewContainerRef,\n    Inject,\n    ComponentFactoryResolver,\n    Optional,\n    Input,\n    ViewChild,\n    TemplateRef,\n    Directive\n} from '@angular/core';\nimport { IgxGridBaseDirective, IgxGridTransaction } from '../grid-base.directive';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxHierarchicalGridAPIService } from './hierarchical-grid-api.service';\nimport { IgxRowIslandComponent } from './row-island.component';\nimport { IgxFilteringService } from '../filtering/grid-filtering.service';\nimport { IDisplayDensityOptions, DisplayDensityToken } from '../../core/displayDensity';\nimport { IgxSummaryOperand } from '../summaries/grid-summary';\nimport { IgxOverlayService, IgxTransactionService, Transaction, TransactionService, State } from '../../services/index';\nimport { DOCUMENT } from '@angular/common';\nimport { IgxHierarchicalGridNavigationService } from './hierarchical-grid-navigation.service';\nimport { IgxGridSummaryService } from '../summaries/grid-summary.service';\nimport { IgxGridSelectionService, IgxGridCRUDService } from '../selection/selection.service';\nimport { IgxChildGridRowComponent } from './child-grid-row.component';\nimport { IgxColumnResizingService } from '../resizing/resizing.service';\nimport { GridType } from '../common/grid.interface';\nimport { IgxColumnGroupComponent } from '../columns/column-group.component';\nimport { IgxColumnComponent } from '../columns/column.component';\n\nexport const IgxHierarchicalTransactionServiceFactory = {\n    provide: IgxGridTransaction,\n    useFactory: hierarchicalTransactionServiceFactory\n};\n\nexport function hierarchicalTransactionServiceFactory() {\n    return new IgxTransactionService();\n}\n\nexport interface IPathSegment {\n    rowID: any;\n    rowIslandKey: string;\n}\n\n@Directive({\n    selector: '[igxHierarchicalGridBase]'\n})\nexport class IgxHierarchicalGridBaseDirective extends IgxGridBaseDirective {\n    public rootGrid;\n\n    @Input()\n    public expandChildren: boolean;\n\n    @Input()\n    public hasChildrenKey: string;\n\n    @Input()\n    public showExpandAll = false;\n\n    /**\n     * @hidden\n     */\n    get maxLevelHeaderDepth() {\n        if (this._maxLevelHeaderDepth === null) {\n            this._maxLevelHeaderDepth = this.columnList.reduce((acc, col) => Math.max(acc, col.level), 0);\n        }\n        return this._maxLevelHeaderDepth;\n    }\n\n     /**\n     * @hidden\n     */\n    protected get outlet() {\n        return this.rootGrid ? this.rootGrid.outletDirective : this.outletDirective;\n    }\n\n    /**\n     * @hidden\n     */\n    public hgridAPI: IgxHierarchicalGridAPIService;\n\n    /**\n     * @hidden\n     */\n    public parentIsland: IgxRowIslandComponent;\n\n    /**\n     * @hidden\n    */\n    public childRow: IgxChildGridRowComponent;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChild('dragIndicatorIconBase', { read: TemplateRef, static: true })\n    public dragIndicatorIconBase: TemplateRef<any>;\n\n    constructor(\n        public selectionService: IgxGridSelectionService,\n        crudService: IgxGridCRUDService,\n        public colResizingService: IgxColumnResizingService,\n        gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n        @Inject(IgxGridTransaction) protected transactionFactory: TransactionService<Transaction, State>,\n        elementRef: ElementRef,\n        zone: NgZone,\n        @Inject(DOCUMENT) public document,\n        cdr: ChangeDetectorRef,\n        resolver: ComponentFactoryResolver,\n        differs: IterableDiffers,\n        viewRef: ViewContainerRef,\n        navigation: IgxHierarchicalGridNavigationService,\n        filteringService: IgxFilteringService,\n        @Inject(IgxOverlayService) protected overlayService: IgxOverlayService,\n        public summaryService: IgxGridSummaryService,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n        super(\n            selectionService,\n            crudService,\n            colResizingService,\n            gridAPI,\n            transactionFactory,\n            elementRef,\n            zone,\n            document,\n            cdr,\n            resolver,\n            differs,\n            viewRef,\n            navigation,\n            filteringService,\n            overlayService,\n            summaryService,\n            _displayDensityOptions);\n        this.hgridAPI = <IgxHierarchicalGridAPIService>gridAPI;\n    }\n\n    /**\n     * @hidden\n     */\n    public createColumnsList(cols: Array<any>) {\n        const columns = [];\n        const topLevelCols = this.onlyTopLevel(cols);\n        topLevelCols.forEach((col) => {\n            const ref = this._createColumn(col);\n            ref.changeDetectorRef.detectChanges();\n            columns.push(ref.instance);\n        });\n        const result = flatten(columns);\n        this.columnList.reset(result);\n        this.columnList.notifyOnChanges();\n        this.initPinning();\n    }\n\n    protected _createColumn(col) {\n        let ref;\n        if (col instanceof IgxColumnGroupComponent) {\n            ref = this._createColGroupComponent(col);\n        } else {\n            ref = this._createColComponent(col);\n        }\n        return ref;\n    }\n\n    protected _createColGroupComponent(col: IgxColumnGroupComponent) {\n        const factoryGroup = this.resolver.resolveComponentFactory(IgxColumnGroupComponent);\n        const ref = this.viewRef.createComponent(factoryGroup, null, this.viewRef.injector);\n        ref.changeDetectorRef.detectChanges();\n        factoryGroup.inputs.forEach((input) => {\n            const propName = input.propName;\n            (<any>ref.instance)[propName] = (<any>col)[propName];\n        });\n        if (col.children.length > 0) {\n            const newChildren = [];\n            col.children.forEach(child => {\n                const newCol = this._createColumn(child).instance;\n                newCol.parent = ref.instance;\n                newChildren.push(newCol);\n            });\n            (<IgxColumnGroupComponent>ref.instance).children.reset(newChildren);\n            (<IgxColumnGroupComponent>ref.instance).children.notifyOnChanges();\n        }\n        return ref;\n    }\n\n    protected _createColComponent(col) {\n        const factoryColumn = this.resolver.resolveComponentFactory(IgxColumnComponent);\n        const ref = this.viewRef.createComponent(factoryColumn, null, this.viewRef.injector);\n        factoryColumn.inputs.forEach((input) => {\n            const propName = input.propName;\n            if (!((<any>col)[propName] instanceof IgxSummaryOperand)) {\n                (<any>ref.instance)[propName] = (<any>col)[propName];\n            } else {\n                (<any>ref.instance)[propName] = col[propName].constructor;\n            }\n        });\n        return ref;\n    }\n\n    protected getGridsForIsland(rowIslandID: string) {\n        return this.hgridAPI.getChildGridsForRowIsland(rowIslandID);\n    }\n\n    protected getChildGrid(path: Array<IPathSegment>) {\n        if (!path) {\n            return;\n        }\n        return this.hgridAPI.getChildGrid(path);\n    }\n}\n\nfunction flatten(arr: any[]) {\n    let result = [];\n\n    arr.forEach(el => {\n        result.push(el);\n        if (el.children) {\n            result = result.concat(flatten(el.children.toArray()));\n        }\n    });\n    return result;\n}\n","import { Directive } from '@angular/core';\nimport { IBaseEventArgs } from '../core/utils';\n\n/**\n * Template directive that allows you to set a custom template representing the lower label value of the {@link IgxSliderComponent}\n *\n *```html\n * <igx-slider>\n *  <ng-template igxSliderThumbFrom let-value let-labels>{{value}}</ng-template>\n * </igx-slider>\n * ```\n *\n * @context {@link IgxSliderComponent.context}\n */\n@Directive({\n    selector: '[igxSliderThumbFrom]'\n})\nexport class IgxThumbFromTemplateDirective {}\n\n/**\n * Template directive that allows you to set a custom template representing the upper label value of the {@link IgxSliderComponent}\n *\n * ```html\n * <igx-slider>\n *  <ng-template igxSliderThumbTo let-value let-labels>{{value}}</ng-template>\n * </igx-slider>\n * ```\n *\n * @context {@link IgxSliderComponent.context}\n */\n@Directive({\n    selector: '[igxSliderThumbTo]'\n})\nexport class IgxThumbToTemplateDirective {}\n\n/**\n * Template directive that allows you to set a custom template, represeting primary/secondary tick labels of the {@link IgxSliderComponent}\n *\n * @context {@link IgxTicksComponent.context}\n */\n@Directive({\n    selector: '[igxSliderTickLabel]'\n})\nexport class IgxTickLabelTemplateDirective {}\n\nexport interface IRangeSliderValue {\n    lower: number;\n    upper: number;\n}\n\nexport interface ISliderValueChangeEventArgs {\n    oldValue: number | IRangeSliderValue;\n    value: number | IRangeSliderValue;\n}\n\nexport enum IgxSliderType {\n    /**\n     * Slider with single thumb.\n     */\n    SLIDER,\n    /**\n     *  Range slider with multiple thumbs, that can mark the range.\n     */\n    RANGE\n}\n\nexport enum SliderHandle {\n    FROM,\n    TO\n}\n\n/**\n * Slider Tick labels Orientation\n */\nexport enum TickLabelsOrientation {\n    Horizontal,\n    TopToBottom,\n    BottomToTop\n}\n\n/**\n * Slider Ticks orientation\n */\nexport enum TicksOrientation {\n    Top,\n    Bottom,\n    Mirror\n}\n","import { IgxHierarchicalGridComponent } from './hierarchical-grid.component';\nimport { IgxRowIslandComponent } from './row-island.component';\nimport { Subject } from 'rxjs';\nimport { IPathSegment } from './hierarchical-grid-base.directive';\nimport { IgxGridBaseDirective, GridBaseAPIService } from '../grid';\nimport { GridType } from '../common/grid.interface';\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class IgxHierarchicalGridAPIService extends GridBaseAPIService<IgxGridBaseDirective & GridType> {\n    protected childRowIslands: Map<string, IgxRowIslandComponent> = new Map<string, IgxRowIslandComponent>();\n    protected childGrids:  Map<string, Map<any, IgxHierarchicalGridComponent>> =\n        new Map<string, Map<any, IgxHierarchicalGridComponent>>();\n\n    registerChildRowIsland(rowIsland: IgxRowIslandComponent) {\n        this.childRowIslands.set(rowIsland.key, rowIsland);\n        this.destroyMap.set(rowIsland.key, new Subject<boolean>());\n    }\n\n    unsetChildRowIsland(rowIsland: IgxRowIslandComponent) {\n        this.childGrids.delete(rowIsland.key);\n        this.childRowIslands.delete(rowIsland.key);\n        this.destroyMap.delete(rowIsland.key);\n    }\n\n    getChildRowIsland(key: string) {\n        return this.childRowIslands.get(key);\n    }\n\n    getChildGrid(path: Array<IPathSegment>) {\n        const currPath = path;\n        let grid;\n        const pathElem = currPath.shift();\n        const childrenForLayout = this.childGrids.get(pathElem.rowIslandKey);\n        if (childrenForLayout) {\n            const childGrid = childrenForLayout.get(pathElem.rowID);\n            if (currPath.length === 0) {\n                grid = childGrid;\n            } else {\n                grid = childGrid.hgridAPI.getChildGrid(currPath);\n            }\n        }\n        return grid;\n    }\n\n    getChildGrids(inDepth?: boolean) {\n        const allChildren = [];\n        this.childGrids.forEach((layoutMap) => {\n            layoutMap.forEach((grid) => {\n                allChildren.push(grid);\n                if (inDepth) {\n                    const children = grid.hgridAPI.getChildGrids(inDepth);\n                    children.forEach((item) => {\n                        allChildren.push(item);\n                    });\n                }\n            });\n        });\n\n        return allChildren;\n    }\n\n    getParentRowId(childGrid: IgxHierarchicalGridComponent) {\n        let rowID;\n        this.childGrids.forEach((layoutMap) => {\n            layoutMap.forEach((grid, key) => {\n                if (grid === childGrid) {\n                    rowID = key;\n                    return;\n                }\n            });\n        });\n        return rowID;\n    }\n\n    registerChildGrid(parentRowID: string|object, rowIslandKey: string, grid: IgxHierarchicalGridComponent) {\n        let childrenForLayout = this.childGrids.get(rowIslandKey);\n        if (!childrenForLayout) {\n            this.childGrids.set(rowIslandKey, new Map<any, IgxHierarchicalGridComponent>());\n            childrenForLayout = this.childGrids.get(rowIslandKey);\n        }\n        childrenForLayout.set(parentRowID, grid);\n    }\n\n    getChildGridsForRowIsland(rowIslandKey): IgxHierarchicalGridComponent[] {\n        const childrenForLayout = this.childGrids.get(rowIslandKey);\n        const children = [];\n        if (childrenForLayout) {\n            childrenForLayout.forEach((child) => {\n                children.push(child);\n            });\n        }\n        return children;\n    }\n\n    getChildGridByID(rowIslandKey, rowID) {\n        const childrenForLayout = this.childGrids.get(rowIslandKey);\n        return childrenForLayout.get(rowID);\n    }\n\n    public get_row_expansion_state(record: any): boolean {\n        let inState;\n        if (record.childGridsData !== undefined) {\n            const ri = record.rowID;\n            const rec = this.grid.primaryKey ? this.get_rec_by_id(ri) : ri;\n            inState = !!super.get_row_expansion_state(rec);\n        } else {\n            inState = !!super.get_row_expansion_state(record);\n        }\n        return inState && (this.grid as any).childLayoutList.length !== 0;\n    }\n\n    public allow_expansion_state_change(rowID, expanded): boolean {\n        const rec = this.get_rec_by_id(rowID);\n        const grid = (this.grid as any);\n        if (grid.hasChildrenKey && !rec[grid.hasChildrenKey]) {\n            return false;\n        }\n        return !!rec && this.grid.expansionStates.get(rowID) !== expanded;\n    }\n\n    public get_rec_by_id(rowID): any {\n        const data = this.get_all_data(false);\n        const index = this.get_row_index_in_data(rowID);\n        return data[index];\n    }\n}\n","import {\n    AfterContentInit,\n    ChangeDetectionStrategy,\n    Component,\n    ContentChildren,\n    Input,\n    QueryList,\n    OnInit,\n    Inject,\n    ElementRef,\n    ChangeDetectorRef,\n    ComponentFactoryResolver,\n    IterableDiffers,\n    ViewContainerRef,\n    NgZone,\n    AfterViewInit,\n    OnChanges,\n    Output,\n    EventEmitter,\n    Optional,\n    OnDestroy,\n    DoCheck\n} from '@angular/core';\nimport { IgxHierarchicalGridComponent } from './hierarchical-grid.component';\nimport { IgxGridTransaction, IgxGridBaseDirective } from '../grid-base.directive';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxHierarchicalGridAPIService } from './hierarchical-grid-api.service';\nimport { DOCUMENT } from '@angular/common';\nimport { IgxFilteringService } from '../filtering/grid-filtering.service';\nimport { IDisplayDensityOptions, DisplayDensityToken } from '../../core/displayDensity';\nimport { TransactionService, Transaction, State } from '../../services';\nimport { IgxGridSummaryService } from '../summaries/grid-summary.service';\nimport { IgxHierarchicalGridBaseDirective } from './hierarchical-grid-base.directive';\nimport { IgxHierarchicalGridNavigationService } from './hierarchical-grid-navigation.service';\nimport { IgxGridSelectionService, IgxGridCRUDService } from '../selection/selection.service';\n\nimport { IgxOverlayService } from '../../services/index';\nimport { takeUntil } from 'rxjs/operators';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IgxRowIslandAPIService } from './row-island-api.service';\nimport { IBaseEventArgs } from '../../core/utils';\nimport { IgxColumnResizingService } from '../resizing/resizing.service';\nimport { GridType } from '../common/grid.interface';\nexport interface IGridCreatedEventArgs extends IBaseEventArgs {\n    owner: IgxRowIslandComponent;\n    parentID: any;\n    grid: IgxHierarchicalGridComponent;\n}\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    selector: 'igx-row-island',\n    template: ``,\n    providers: [IgxRowIslandAPIService]\n})\nexport class IgxRowIslandComponent extends IgxHierarchicalGridBaseDirective\n            implements AfterContentInit, AfterViewInit, OnChanges, OnInit, OnDestroy, DoCheck {\n    /**\n     * Sets the key of the row island by which child data would be taken from the row data if such is provided.\n     * ```html\n     * <igx-hierarchical-grid [data]=\"Data\" [autoGenerate]=\"true\">\n     *      <igx-row-island [key]=\"'childData'\">\n     *          <!-- ... -->\n     *      </igx-row-island>\n     * </igx-hierarchical-grid>\n     * ```\n     * @memberof IgxRowIslandComponent\n     */\n    @Input()\n    public key: string;\n\n    /**\n     * Sets if all immediate children of the grids for this `IgxRowIslandComponent` should be expanded/collapsed.\n     * ```html\n     * <igx-hierarchical-grid [data]=\"Data\" [autoGenerate]=\"true\">\n     *      <igx-row-island [key]=\"'childData'\" [expandChildren]=\"true\" #rowIsland>\n     *          <!-- ... -->\n     *      </igx-row-island>\n     * </igx-hierarchical-grid>\n     * ```\n     * @memberof IgxRowIslandComponent\n     */\n    @Input()\n    set expandChildren(value: boolean) {\n        this._defaultExpandState  = value;\n        this.rowIslandAPI.getChildGrids().forEach((grid) => {\n            if (document.body.contains(grid.nativeElement)) {\n                // Detect changes right away if the grid is visible\n                grid.expandChildren = value;\n                grid.markForCheck();\n            } else {\n                // Else defer the detection on changes when the grid gets into view for performance.\n                grid.updateOnRender = true;\n            }\n        });\n    }\n\n    /**\n     * Gets if all immediate children of the grids for this `IgxRowIslandComponent` have been set to be expanded/collapsed.\n     * ```typescript\n     * const expanded = this.rowIsland.expandChildren;\n     * ```\n     * @memberof IgxRowIslandComponent\n     */\n    get expandChildren(): boolean {\n        return this._defaultExpandState;\n    }\n\n    /**\n     * @hidden\n     */\n    @ContentChildren(IgxRowIslandComponent, { read: IgxRowIslandComponent, descendants: false })\n    public children = new QueryList<IgxRowIslandComponent>();\n\n    /**\n     * @hidden\n     */\n    @ContentChildren(IgxColumnComponent, { read: IgxColumnComponent, descendants: false })\n    public childColumns = new QueryList<IgxColumnComponent>();\n\n    /**\n     * @hidden\n     */\n    @Output()\n    public onLayoutChange = new EventEmitter<any>();\n\n    /**\n     * Event emmited when a grid is being created based on this row island.\n     * ```html\n     * <igx-hierarchical-grid [data]=\"Data\" [autoGenerate]=\"true\">\n     *      <igx-row-island [key]=\"'childData'\" (onGridCreated)=\"gridCreated($event)\" #rowIsland>\n     *          <!-- ... -->\n     *      </igx-row-island>\n     * </igx-hierarchical-grid>\n     * ```\n     * @memberof IgxRowIslandComponent\n     */\n    @Output()\n    public onGridCreated = new EventEmitter<IGridCreatedEventArgs>();\n\n    /**\n     * @hidden\n     */\n    get id() {\n        const pId = this.parentId ? this.parentId.substring(this.parentId.indexOf(this.layout_id) + this.layout_id.length) + '-' : '';\n        return this.layout_id + pId +  this.key;\n    }\n\n    /**\n     * @hidden\n     */\n    get parentId() {\n       return this.parentIsland ? this.parentIsland.id : null;\n    }\n\n    /**\n     * @hidden\n     */\n    get level() {\n        let ptr = this.parentIsland;\n        let lvl = 0;\n        while (ptr) {\n            lvl++;\n            ptr = ptr.parentIsland;\n        }\n        return lvl + 1;\n    }\n\n    /**\n     * @hidden\n     */\n    public initialChanges = [];\n\n    /**\n     * @hidden\n     */\n    public rootGrid = null;\n    readonly data: any[];\n    readonly filteredData: any[];\n    private layout_id = `igx-row-island-`;\n    private isInit = false;\n\n    constructor(\n        public selectionService: IgxGridSelectionService,\n        crudService: IgxGridCRUDService,\n        public colResizingService: IgxColumnResizingService,\n        gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n        @Inject(IgxGridTransaction) protected transactionFactory: any,\n        elementRef: ElementRef,\n        zone: NgZone,\n        @Inject(DOCUMENT) public document,\n        cdr: ChangeDetectorRef,\n        resolver: ComponentFactoryResolver,\n        differs: IterableDiffers,\n        viewRef: ViewContainerRef,\n        navigation: IgxHierarchicalGridNavigationService,\n        filteringService: IgxFilteringService,\n        @Inject(IgxOverlayService) protected overlayService: IgxOverlayService,\n        public summaryService: IgxGridSummaryService,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions,\n        public rowIslandAPI: IgxRowIslandAPIService) {\n        super(\n            selectionService,\n            crudService,\n            colResizingService,\n            gridAPI,\n            typeof transactionFactory === 'function' ? transactionFactory() : transactionFactory,\n            elementRef,\n            zone,\n            document,\n            cdr,\n            resolver,\n            differs,\n            viewRef,\n            navigation,\n            filteringService,\n            overlayService,\n            summaryService,\n            _displayDensityOptions\n        );\n        this.hgridAPI = <IgxHierarchicalGridAPIService>gridAPI;\n    }\n\n    /**\n     * @hidden\n     */\n    ngOnInit() {\n        this.rootGrid = this.hgridAPI.grid;\n        this.rowIslandAPI.rowIsland = this;\n    }\n\n    /**\n     * @hidden\n     */\n    ngDoCheck() {\n    }\n\n    /**\n     * @hidden\n     */\n    ngAfterContentInit() {\n        this.updateChildren();\n        this.children.notifyOnChanges();\n        this.children.changes.pipe(takeUntil(this.destroy$))\n        .subscribe((change) => {\n            this.updateChildren();\n            // update existing grids since their child ri have been changed.\n            this.getGridsForIsland(this.key).forEach(grid => {\n                (grid as any).onRowIslandChange(this.children);\n            });\n        });\n        const nestedColumns = this.children.map((layout) => layout.columnList.toArray());\n        const colsArray = [].concat.apply([], nestedColumns);\n        const topCols = this.columnList.filter((item) => {\n            return colsArray.indexOf(item) === -1;\n        });\n        this.childColumns.reset(topCols);\n        this.columnList.changes.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            Promise.resolve().then(() => {\n                this.updateColumnList();\n            });\n         });\n    }\n\n    protected updateChildren() {\n        if (this.children.first === this) {\n            this.children.reset(this.children.toArray().slice(1));\n        }\n        this.children.forEach(child => {\n            child.parentIsland = this;\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    ngAfterViewInit() {\n        this.rowIslandAPI.register(this);\n        if (this.parentIsland) {\n            this.parentIsland.rowIslandAPI.registerChildRowIsland(this);\n        } else {\n            this.rootGrid.hgridAPI.registerChildRowIsland(this);\n        }\n        this._init = false;\n    }\n\n    /**\n     * @hidden\n     */\n    ngOnChanges(changes) {\n        this.onLayoutChange.emit(changes);\n        if (!this.isInit) {\n            this.initialChanges.push(changes);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    ngOnDestroy() {\n        // Override the base destroy because we don't have rendered anything to use removeEventListener on\n        this.destroy$.next(true);\n        this.destroy$.complete();\n        this._destroyed = true;\n        this.rowIslandAPI.unset(this.id);\n        if (this.parentIsland) {\n            this.getGridsForIsland(this.key).forEach(grid => {\n                this.cleanGridState(grid);\n                grid.hgridAPI.unsetChildRowIsland(this);\n            });\n            this.parentIsland.rowIslandAPI.unsetChildRowIsland(this);\n        } else {\n            this.rootGrid.hgridAPI.unsetChildRowIsland(this);\n            this.cleanGridState(this.rootGrid);\n        }\n    }\n\n    private cleanGridState(grid) {\n        grid.childGridTemplates.forEach((tmpl) => {\n            tmpl.owner.cleanView(tmpl.context.templateID);\n        });\n        grid.childGridTemplates.clear();\n        grid.onRowIslandChange();\n    }\n\n    /**\n     * @hidden\n     */\n    reflow() {}\n\n    /**\n     * @hidden\n     */\n    calculateGridHeight() {}\n\n    protected updateColumnList() {\n        const nestedColumns = this.children.map((layout) => layout.columnList.toArray());\n        const colsArray = [].concat.apply([], nestedColumns);\n        const topCols = this.columnList.filter((item) => {\n            if (colsArray.indexOf(item) === -1) {\n                /* Reset the default width of the columns that come into this row island,\n                because the root catches them first during the detectChanges() and sets their defaultWidth. */\n                item.defaultWidth = undefined;\n                return true;\n            }\n            return false;\n        });\n        this.childColumns.reset(topCols);\n\n        if (this.parentIsland) {\n            this.parentIsland.columnList.notifyOnChanges();\n        } else {\n            this.rootGrid.columnList.notifyOnChanges();\n        }\n\n        this.rowIslandAPI.getChildGrids().forEach((grid: IgxHierarchicalGridComponent) => {\n            grid.createColumnsList(this.childColumns.toArray());\n            if (!document.body.contains(grid.nativeElement)) {\n                grid.updateOnRender = true;\n            }\n        });\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ElementRef,\n    HostBinding,\n    Input,\n    OnInit,\n    ViewChild,\n    AfterViewInit,\n    SimpleChanges,\n    ComponentFactoryResolver\n} from '@angular/core';\nimport { GridBaseAPIService } from '.././api.service';\nimport { IgxRowIslandComponent } from './row-island.component';\nimport { IgxGridComponent } from '../grid/grid.component';\nimport { takeUntil } from 'rxjs/operators';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-child-grid-row',\n    templateUrl: './child-grid-row.component.html'\n})\nexport class IgxChildGridRowComponent implements AfterViewInit, OnInit {\nprivate resolver;\n\n    /**\n * Returns whether the row is expanded.\n * ```typescript\n * const RowExpanded = this.grid1.rowList.first.expanded;\n * ```\n */\n    public expanded = false;\n\n    @Input()\n    layout: IgxRowIslandComponent;\n\n    /**\n     * @hidden\n     */\n    public get parentHasScroll() {\n        return !this.parentGrid.verticalScrollContainer.dc.instance.notVirtual;\n    }\n\n\n    /**\n    * @hidden\n    */\n    @Input()\n    public parentGridID: string;\n\n    /**\n     *  The data passed to the row component.\n     *\n     * ```typescript\n     * // get the row data for the first selected row\n     * let selectedRowData = this.grid.selectedRows[0].rowData;\n     * ```\n     */\n    @Input()\n    public rowData: any = [];\n\n    /**\n     * The index of the row.\n     *\n     * ```typescript\n     * // get the index of the second selected row\n     * let selectedRowIndex = this.grid.selectedRows[1].index;\n     * ```\n     */\n    @Input()\n    public index: number;\n\n    @ViewChild('hgrid', { static: true })\n    private hGrid: any/* TODO: IgxHierarchicalGridComponent*/;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('attr.tabindex')\n    public tabindex = 0;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('attr.role')\n    public role = 'row';\n\n    /**\n     * Get a reference to the grid that contains the selected row.\n     *\n     * ```typescript\n     * handleRowSelection(event) {\n     *  // the grid on which the onRowSelectionChange event was triggered\n     *  const grid = event.row.grid;\n     * }\n     * ```\n     *\n     * ```html\n     *  <igx-grid\n     *    [data]=\"data\"\n     *    (onRowSelectionChange)=\"handleRowSelection($event)\">\n     *  </igx-grid>\n     * ```\n     */\n    // TODO: Refactor\n    get parentGrid(): any/* TODO: IgxHierarchicalGridComponent*/ {\n        return this.gridAPI.grid;\n    }\n\n    @HostBinding('attr.data-level')\n    get level() {\n        return this.layout.level;\n    }\n\n    /**\n     * The native DOM element representing the row. Could be null in certain environments.\n     *\n     * ```typescript\n     * // get the nativeElement of the second selected row\n     * let selectedRowNativeElement = this.grid.selectedRows[1].nativeElement;\n     * ```\n     */\n    get nativeElement() {\n        return this.element.nativeElement;\n    }\n\n    constructor(public gridAPI: GridBaseAPIService<any/* TODO: IgxHierarchicalGridComponent*/>,\n        public element: ElementRef,\n        resolver: ComponentFactoryResolver,\n        public cdr: ChangeDetectorRef) {\n            this.resolver = resolver;\n    }\n\n    /**\n     * @hidden\n     */\n    ngOnInit() {\n        this.layout.onLayoutChange.subscribe((ch) => {\n            this._handleLayoutChanges(ch);\n        });\n        const changes = this.layout.initialChanges;\n        changes.forEach(change => {\n            this._handleLayoutChanges(change);\n        });\n        this.hGrid.parent = this.parentGrid;\n        this.hGrid.parentIsland = this.layout;\n        this.hGrid.childRow =  this;\n        // handler logic that re-emits hgrid events on the row island\n        this.setupEventEmitters();\n        this.layout.onGridCreated.emit({\n            owner: this.layout,\n            parentID: this.rowData.rowID,\n            grid: this.hGrid\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    ngAfterViewInit() {\n        this.hGrid.childLayoutList = this.layout.children;\n        const layouts = this.hGrid.childLayoutList.toArray();\n        layouts.forEach((l) => this.hGrid.hgridAPI.registerChildRowIsland(l));\n        this.parentGrid.hgridAPI.registerChildGrid(this.rowData.rowID, this.layout.key, this.hGrid);\n        this.layout.rowIslandAPI.registerChildGrid(this.rowData.rowID, this.hGrid);\n\n        this.hGrid.cdr.detectChanges();\n    }\n\n    private setupEventEmitters() {\n        const destructor = takeUntil(this.hGrid.destroy$);\n\n        const factory = this.resolver.resolveComponentFactory(IgxGridComponent);\n        // exclude outputs related to two-way binding functionality\n        const inputNames = factory.inputs.map(input => input.propName);\n        const outputs = factory.outputs.filter(o => {\n            const matchingInputPropName = o.propName.slice(0, o.propName.indexOf('Change'));\n            return inputNames.indexOf(matchingInputPropName) === -1;\n        });\n        outputs.forEach(output => {\n            if (this.hGrid[output.propName]) {\n                this.hGrid[output.propName].pipe(destructor).subscribe((args) => {\n                    if (!args) {\n                        args = {};\n                    }\n                    args.owner = this.hGrid;\n                    this.layout[output.propName].emit(args);\n                });\n            }\n        });\n    }\n\n\n    private _handleLayoutChanges(changes: SimpleChanges) {\n        for (const change in changes) {\n            if (changes.hasOwnProperty(change)) {\n                this.hGrid[change] = changes[change].currentValue;\n            }\n        }\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    HostBinding,\n    Input,\n    forwardRef,\n    TemplateRef,\n    ViewChild,\n    ViewChildren,\n    QueryList,\n    ContentChildren,\n    ElementRef,\n    AfterViewInit,\n    AfterContentInit,\n    OnInit,\n    OnDestroy,\n    DoCheck,\n    EventEmitter,\n    Output\n} from '@angular/core';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxHierarchicalGridAPIService } from './hierarchical-grid-api.service';\nimport { IgxRowIslandComponent } from './row-island.component';\nimport { IgxChildGridRowComponent } from './child-grid-row.component';\nimport { IgxFilteringService } from '../filtering/grid-filtering.service';\nimport { DisplayDensity } from '../../core/displayDensity';\nimport { IgxColumnComponent, } from '../columns/column.component';\nimport { IgxHierarchicalGridNavigationService } from './hierarchical-grid-navigation.service';\nimport { IgxGridSummaryService } from '../summaries/grid-summary.service';\nimport { IgxHierarchicalGridBaseDirective } from './hierarchical-grid-base.directive';\nimport { takeUntil } from 'rxjs/operators';\nimport { IgxTemplateOutletDirective } from '../../directives/template-outlet/template_outlet.directive';\nimport { IgxGridSelectionService, IgxGridCRUDService } from '../selection/selection.service';\nimport { IgxTransactionService } from '../../services/index';\nimport { IgxForOfSyncService, IgxForOfScrollSyncService } from '../../directives/for-of/for_of.sync.service';\nimport { GridType } from '../common/grid.interface';\nimport { IgxRowIslandAPIService } from './row-island-api.service';\nimport { DeprecateProperty } from '../../core/deprecateDecorators';\n\nlet NEXT_ID = 0;\n\nexport interface HierarchicalStateRecord {\n    rowID: any;\n}\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-hierarchical-grid',\n    templateUrl: 'hierarchical-grid.component.html',\n    providers: [\n        IgxGridSelectionService,\n        IgxGridCRUDService,\n        { provide: GridBaseAPIService, useClass: IgxHierarchicalGridAPIService },\n        { provide: IgxGridBaseDirective, useExisting: forwardRef(() => IgxHierarchicalGridComponent) },\n        IgxGridSummaryService,\n        IgxFilteringService,\n        IgxHierarchicalGridNavigationService,\n        IgxForOfSyncService,\n        IgxForOfScrollSyncService,\n        IgxRowIslandAPIService\n    ]\n})\nexport class IgxHierarchicalGridComponent extends IgxHierarchicalGridBaseDirective\n    implements GridType, AfterViewInit, AfterContentInit, OnInit, OnDestroy, DoCheck {\n\n    /**\n     * Sets the value of the `id` attribute. If not provided it will be automatically generated.\n     * ```html\n     * <igx-hierarchical-grid [id]=\"'igx-hgrid-1'\" [data]=\"Data\" [autoGenerate]=\"true\"></igx-hierarchical-grid>\n     * ```\n     * @memberof IgxHierarchicalGridComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public get id(): string {\n        return this.h_id;\n    }\n\n    /**\n     * An @Input property that lets you fill the `IgxHierarchicalGridComponent` with an array of data.\n     * ```html\n     * <igx-hierarchical-grid [data]=\"Data\" [autoGenerate]=\"true\"></igx-hierarchical-grid>\n     * ```\n     * @memberof IgxHierarchicalGridComponent\n     */\n    @Input()\n    public set data(value: any[]) {\n        this._data = value || [];\n        this.summaryService.clearSummaryCache();\n        if (this.shouldGenerate) {\n            this.setupColumns();\n            this.reflow();\n        }\n        this.cdr.markForCheck();\n        if (this.parent && (this.height === null || this.height.indexOf('%') !== -1)) {\n            // If the height will change based on how much data there is, recalculate sizes in igxForOf.\n            this.notifyChanges(true);\n        }\n    }\n\n    /**\n     * Returns an array of data set to the `IgxHierarchicalGridComponent`.\n     * ```typescript\n     * let filteredData = this.grid.filteredData;\n     * ```\n     * @memberof IgxHierarchicalGridComponent\n     */\n    public get data(): any[] {\n        return this._data;\n    }\n\n    /**\n     *@hidden\n     *@deprecated\n     * Sets the state of the `IgxHierarchicalGridComponent` containing which rows are expanded.\n    */\n    @Input()\n    @DeprecateProperty(`'hierarchicalState' property is deprecated. Use 'expansionStates' instead.`)\n    public get hierarchicalState() {\n        const res = Array.from(this.expansionStates.entries()).filter(({1: v}) => v === true).map(([k]) => k);\n        return res;\n    }\n    public set hierarchicalState(val) {\n        if (this.hasChildrenKey) {\n            val = val.filter(item => {\n                const rec = this.primaryKey ? this.data.find(x => x[this.primaryKey] === item.rowID) : item.rowID;\n                return rec[this.hasChildrenKey];\n            });\n        }\n        const expansionStates = new Map<any, boolean>();\n        val.forEach(item => {\n            const rec = this.primaryKey ? this.data.find(x => x[this.primaryKey] === item.rowID) : item.rowID;\n            expansionStates.set(rec, true);\n        });\n        this.expansionStates = expansionStates;\n        if (this.parent) {\n            this.notifyChanges(true);\n        }\n    }\n\n    /**\n     *@hidden\n     *@deprecated\n     */\n    @Output()\n    @DeprecateProperty(`'hierarchicalStateChange' @Output property is deprecated. Use 'expansionStates' instead.`)\n    public hierarchicalStateChange = new EventEmitter<any>();\n\n    /**\n     * Sets an array of objects containing the filtered data in the `IgxHierarchicalGridComponent`.\n     * ```typescript\n     * this.grid.filteredData = [{\n     *       ID: 1,\n     *       Name: \"A\"\n     * }];\n     * ```\n     * @memberof IgxHierarchicalGridComponent\n     */\n    public set filteredData(value) {\n        this._filteredData = value;\n\n\n    }\n\n    /**\n     * Returns an array of objects containing the filtered data in the `IgxHierarchicalGridComponent`.\n     * ```typescript\n     * let filteredData = this.grid.filteredData;\n     * ```\n     * @memberof IgxHierarchicalGridComponent\n     */\n    public get filteredData() {\n        return this._filteredData;\n    }\n\n    /**\n     * Sets if all immediate children of the `IgxHierarchicalGridComponent` should be expanded/collapsed.\n     * Defult value is false.\n     * ```html\n     * <igx-hierarchical-grid [id]=\"'igx-grid-1'\" [data]=\"Data\" [autoGenerate]=\"true\" [expandChildren]=\"true\"></igx-hierarchical-grid>\n     * ```\n     * @memberof IgxHierarchicalGridComponent\n     */\n    @Input()\n    set expandChildren(value: boolean) {\n        this._defaultExpandState  = value;\n        this.expansionStates = new Map<any, boolean>();\n    }\n\n    /**\n     * Gets if all immediate children of the `IgxHierarchicalGridComponent` previously have been set to be expanded/collapsed.\n     * If previously set and some rows have been manually expanded/collapsed it will still return the last set value.\n     * ```typescript\n     * const expanded = this.grid.expandChildren;\n     * ```\n     * @memberof IgxHierarchicalGridComponent\n     */\n    get expandChildren(): boolean {\n        return this._defaultExpandState ;\n    }\n\n    /**\n     * Gets the unique identifier of the parent row. It may be a `string` or `number` if `primaryKey` of the\n     * parent grid is set or an object reference of the parent record otherwise.\n     * ```typescript\n     * const foreignKey = this.grid.foreignKey;\n     * ```\n     * @memberof IgxHierarchicalGridComponent\n     */\n    public get foreignKey() {\n        if (!this.parent) {\n            return null;\n        }\n        return this.parent.hgridAPI.getParentRowId(this);\n    }\n\n    /**\n     * @hidden\n     */\n    @ContentChildren(IgxRowIslandComponent, { read: IgxRowIslandComponent, descendants: false })\n    public childLayoutList: QueryList<IgxRowIslandComponent>;\n\n    /**\n     * @hidden\n     */\n    @ContentChildren(IgxRowIslandComponent, { read: IgxRowIslandComponent, descendants: true })\n    public allLayoutList: QueryList<IgxRowIslandComponent>;\n\n    @ViewChild('hierarchical_record_template', { read: TemplateRef, static: true })\n    protected hierarchicalRecordTemplate: TemplateRef<any>;\n\n    @ViewChild('child_record_template', { read: TemplateRef, static: true })\n    protected childTemplate: TemplateRef<any>;\n\n    @ViewChild('headerHierarchyExpander', { read: ElementRef, static: true })\n    protected headerHierarchyExpander: ElementRef;\n\n    /**\n     * @hidden\n     */\n    @ViewChildren(IgxTemplateOutletDirective, { read: IgxTemplateOutletDirective })\n    public templateOutlets: QueryList<any>;\n\n    /**\n     * @hidden\n     */\n    @ViewChildren(IgxChildGridRowComponent, { read: IgxChildGridRowComponent })\n    public hierarchicalRows: QueryList<IgxChildGridRowComponent>;\n\n    /**\n     * @hidden\n     */\n    get hasExpandableChildren() {\n        return !!this.childLayoutKeys.length;\n    }\n\n    /**\n     * @hidden\n     */\n    public childLayoutKeys = [];\n\n    /**\n     * @hidden\n     */\n    public highlightedRowID = null;\n\n    /**\n     * @hidden\n     */\n    public updateOnRender = false;\n\n    /**\n     * @hidden\n     */\n    public parent = null;\n\n    private _data;\n    private _filteredData = null;\n    private h_id = `igx-hierarchical-grid-${NEXT_ID++}`;\n    private childGridTemplates: Map<any, any> = new Map();\n    private scrollTop = 0;\n    private scrollLeft = 0;\n\n    /**\n     * @hidden\n     */\n    ngOnInit() {\n        if (this._transactions instanceof IgxTransactionService) {\n            // transaction service cannot be injected in a derived class in a factory manner\n            this._transactions = new IgxTransactionService();\n        }\n        this.expansionStatesChange.pipe(takeUntil(this.destroy$)).subscribe((value: Map<any, boolean>) => {\n            const res = Array.from(value.entries()).filter(({1: v}) => v === true).map(([k]) => k);\n            this.hierarchicalStateChange.emit(res);\n        });\n        super.ngOnInit();\n    }\n\n    public ngDoCheck() {\n        if (this._cdrRequestRepaint && !this._init) {\n            this.updateSizes();\n        }\n        super.ngDoCheck();\n    }\n\n    /**\n     * @hidden\n     */\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n        this.verticalScrollContainer.getScroll().addEventListener('scroll', this.hg_verticalScrollHandler.bind(this));\n        this.headerContainer.getScroll().addEventListener('scroll', this.hg_horizontalScrollHandler.bind(this));\n\n        this.verticalScrollContainer.onBeforeViewDestroyed.pipe(takeUntil(this.destroy$)).subscribe((view) => {\n            const rowData = view.context.$implicit;\n            if (this.isChildGridRecord(rowData)) {\n                const cachedData = this.childGridTemplates.get(rowData.rowID);\n                if (cachedData) {\n                    const tmlpOutlet = cachedData.owner;\n                    tmlpOutlet._viewContainerRef.detach(0);\n                }\n            }\n        });\n\n        if (this.parent) {\n            this._displayDensity = this.rootGrid._displayDensity;\n            this.rootGrid.onDensityChanged.pipe(takeUntil(this.destroy$)).subscribe(() => {\n                this._displayDensity = this.rootGrid._displayDensity;\n                this.notifyChanges(true);\n                this.cdr.markForCheck();\n            });\n            this.childLayoutKeys = this.parentIsland.children.map((item) => item.key);\n        }\n\n        this.toolbarCustomContentTemplates = this.parentIsland ?\n            this.parentIsland.toolbarCustomContentTemplates :\n            this.toolbarCustomContentTemplates;\n\n        this.headSelectorsTemplates = this.parentIsland ?\n            this.parentIsland.headSelectorsTemplates :\n            this.headSelectorsTemplates;\n\n        this.rowSelectorsTemplates = this.parentIsland ?\n            this.parentIsland.rowSelectorsTemplates :\n            this.rowSelectorsTemplates;\n        this.dragIndicatorIconTemplate = this.parentIsland ?\n            this.parentIsland.dragIndicatorIconTemplate :\n            this.dragIndicatorIconTemplate;\n        this.rowExpandedIndicatorTemplate  = this.rootGrid.rowExpandedIndicatorTemplate;\n        this.rowCollapsedIndicatorTemplate   = this.rootGrid.rowCollapsedIndicatorTemplate;\n        this.headerCollapseIndicatorTemplate = this.rootGrid.headerCollapseIndicatorTemplate;\n        this.headerExpandIndicatorTemplate = this.rootGrid.headerExpandIndicatorTemplate;\n        this.hasChildrenKey = this.parentIsland ?\n         this.parentIsland.hasChildrenKey || this.rootGrid.hasChildrenKey :\n         this.rootGrid.hasChildrenKey;\n         this.showExpandAll = this.parentIsland ?\n         this.parentIsland.showExpandAll : this.rootGrid.showExpandAll;\n    }\n\n    private updateSizes() {\n        if (document.body.contains(this.nativeElement) && this.isPercentWidth) {\n            this.reflow();\n\n            this.hgridAPI.getChildGrids(false).forEach((grid) => {\n                grid.updateSizes();\n            });\n        }\n    }\n\n    protected _shouldAutoSize(renderedHeight) {\n        if (this.isPercentHeight && this.parent) {\n            return true;\n        }\n        return super._shouldAutoSize(renderedHeight);\n    }\n\n    public get outletDirective() {\n        return this.rootGrid._outletDirective;\n    }\n\n    /**\n     * @hidden\n     */\n    ngAfterContentInit() {\n        this.updateColumnList(false);\n        this.childLayoutKeys = this.parent ?\n            this.parentIsland.children.map((item) => item.key) :\n            this.childLayoutKeys = this.childLayoutList.map((item) => item.key);\n        this.childLayoutList.notifyOnChanges();\n        this.childLayoutList.changes.pipe(takeUntil(this.destroy$)).subscribe(() =>\n            this.onRowIslandChange()\n        );\n        super.ngAfterContentInit();\n    }\n\n    /** @hidden */\n    public featureColumnsWidth() {\n        return super.featureColumnsWidth(this.headerHierarchyExpander);\n    }\n\n    /**\n    * @hidden\n    */\n    public onRowIslandChange() {\n        if (this.parent) {\n            this.childLayoutKeys = this.parentIsland.children.filter(item => !(item as any)._destroyed).map((item) => item.key);\n        } else {\n            this.childLayoutKeys = this.childLayoutList.filter(item => !(item as any)._destroyed).map((item) => item.key);\n        }\n        if (!(this.cdr as any).destroyed) {\n            this.cdr.detectChanges();\n        }\n    }\n\n\n    protected setupColumns() {\n        if (this.parentIsland && this.parentIsland.childColumns.length > 0 && !this.autoGenerate) {\n            this.createColumnsList(this.parentIsland.childColumns.toArray());\n        }\n        super.setupColumns();\n    }\n\n    protected onColumnsChanged(change: QueryList<IgxColumnComponent>) {\n        Promise.resolve().then(() => {\n            this.updateColumnList();\n            const cols = change.filter(c => c.gridAPI.grid === this);\n            if (cols.length > 0 || this.autoGenerate) {\n                this.columnList.reset(cols);\n                super.onColumnsChanged(this.columnList);\n            }\n        });\n    }\n\n    private updateColumnList(recalcColSizes = true) {\n        const childLayouts = this.parent ? this.childLayoutList : this.allLayoutList;\n        const nestedColumns = childLayouts.map((layout) => {\n            return layout.columnList.toArray();\n        });\n        const colsArray = [].concat.apply([], nestedColumns);\n        const colLength = this.columnList.length;\n        if (colsArray.length > 0) {\n            const topCols = this.columnList.filter((item) => {\n                return colsArray.indexOf(item) === -1;\n            });\n            this.columnList.reset(topCols);\n            if (recalcColSizes && this.columnList.length !== colLength) {\n                this.calculateGridSizes(false);\n            }\n        }\n    }\n\n    ngOnDestroy() {\n        if (!this.parent) {\n            this.hgridAPI.getChildGrids(true).forEach((grid) => {\n                if (!grid.childRow.cdr.destroyed) {\n                    grid.childRow.cdr.destroy();\n                }\n            });\n        }\n        if (this.parent && this.selectionService.activeElement) {\n            // in case selection is in destroyed child grid, selection should be cleared.\n            this._clearSeletionHighlights();\n        }\n        super.ngOnDestroy();\n    }\n\n    private _clearSeletionHighlights() {\n        [this.rootGrid, ...this.rootGrid.getChildGrids(true)].forEach(grid => {\n            grid.selectionService.clear();\n            grid.selectionService.activeElement = null;\n            grid.nativeElement.classList.remove('igx-grid__tr--highlighted');\n            grid.highlightedRowID = null;\n            grid.cdr.markForCheck();\n        });\n    }\n\n    /**\n    * @hidden\n    */\n    public get template(): TemplateRef<any> {\n        if (this.filteredData && this.filteredData.length === 0) {\n            return this.emptyGridTemplate ? this.emptyGridTemplate : this.emptyFilteredGridTemplate;\n        }\n\n        if (this.isLoading && (!this.data || this.dataLength === 0)) {\n            return this.loadingGridTemplate ? this.loadingGridTemplate : this.loadingGridDefaultTemplate;\n        }\n\n        if (this.dataLength === 0) {\n            return this.emptyGridTemplate ? this.emptyGridTemplate : this.emptyGridDefaultTemplate;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public isRowHighlighted(rowData) {\n        return this.highlightedRowID === rowData.rowID;\n    }\n\n    /**\n     * @hidden\n     */\n    public isHierarchicalRecord(record: any): boolean {\n        return this.childLayoutList.length !== 0 && record[this.childLayoutList.first.key];\n    }\n\n    /**\n     * @hidden\n     */\n    public isChildGridRecord(record: any): boolean {\n        // Can be null when there is defined layout but no child data was found\n        return record.childGridsData !== undefined;\n    }\n\n    /**\n     * @hidden\n     */\n    public trackChanges(index, rec) {\n        if (rec.childGridsData !== undefined) {\n            // if is child rec\n            return rec.rowID;\n        }\n        return rec;\n    }\n\n    /**\n     * @hidden\n     */\n    public getContext(rowData): any {\n        if (this.isChildGridRecord(rowData)) {\n            const cachedData = this.childGridTemplates.get(rowData.rowID);\n            if (cachedData) {\n                const view = cachedData.view;\n                const tmlpOutlet = cachedData.owner;\n                return {\n                    $implicit: rowData,\n                    moveView: view,\n                    owner: tmlpOutlet,\n                    index: this.dataView.indexOf(rowData)\n                };\n            } else {\n                const rowID = this.primaryKey ? rowData.rowID : this.data.indexOf(rowData.rowID);\n                // child rows contain unique grids, hence should have unique templates\n                return {\n                    $implicit: rowData,\n                    templateID: 'childRow-' + rowID,\n                    index: this.dataView.indexOf(rowData)\n                };\n            }\n        } else {\n            return {\n                $implicit: rowData,\n                templateID: 'dataRow',\n                index: this.dataView.indexOf(rowData)\n            };\n        }\n    }\n\n    /**\n     * @hidden\n    */\n    public get rootGrid() {\n        let currGrid = this;\n        while (currGrid.parent) {\n            currGrid = currGrid.parent;\n        }\n        return currGrid;\n    }\n\n    /**\n     * @hidden\n    */\n    public get iconTemplate() {\n        const expanded = this.hasExpandedRecords() && this.hasExpandableChildren;\n        if (!expanded && this.showExpandAll) {\n            return this.headerCollapseIndicatorTemplate || this.defaultCollapsedTemplate;\n        } else {\n            return this.headerExpandIndicatorTemplate || this.defaultExpandedTemplate;\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public getDragGhostCustomTemplate(): TemplateRef<any> {\n        if (this.parentIsland) {\n            return this.parentIsland.getDragGhostCustomTemplate();\n        }\n        return super.getDragGhostCustomTemplate();\n    }\n\n    /**\n     * @hidden\n    */\n    protected initColumns(collection: QueryList<IgxColumnComponent>, cb: Function = null) {\n        if (this.hasColumnLayouts) {\n            // invalid configuration - hierarchical grid should not allow column layouts\n            // remove column layouts\n            const nonColumnLayoutColumns = this.columnList.filter((col) => !col.columnLayout && !col.columnLayoutChild);\n            this.columnList.reset(nonColumnLayoutColumns);\n        }\n        super.initColumns(collection, cb);\n    }\n\n    /**\n     * @hidden\n     * Gets the visible content height that includes header + tbody + footer.\n     * For hierarchical child grid it may be scrolled and not fully visible.\n     */\n    public getVisibleContentHeight() {\n        let height = super.getVisibleContentHeight();\n        if (this.parent) {\n            const rootHeight = this.rootGrid.getVisibleContentHeight();\n            const topDiff = this.nativeElement.getBoundingClientRect().top - this.rootGrid.nativeElement.getBoundingClientRect().top;\n            height = rootHeight - topDiff > height ? height : rootHeight - topDiff;\n        }\n        return height;\n    }\n\n    /**\n     * @hidden\n    */\n   toggleAll() {\n    const expanded = this.hasExpandedRecords() && this.hasExpandableChildren;\n    if (!expanded && this.showExpandAll) {\n        this.expandAll();\n    } else {\n        this.collapseAll();\n    }\n   }\n\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public hasExpandedRecords() {\n       if (this.expandChildren) {\n            return true;\n       }\n       let hasExpandedEntry = false;\n       this.expansionStates.forEach((value, key) => {\n           if (value) {\n            hasExpandedEntry = value;\n           }\n        });\n        return hasExpandedEntry;\n    }\n\n    public getDefaultExpandState(record: any) {\n        return this.expandChildren;\n\n    }\n\n    /**\n    * @hidden\n    */\n    public isExpanded(record: any): boolean {\n        return this.gridAPI.get_row_expansion_state(record);\n    }\n\n    /**\n     * @hidden\n     */\n    public viewCreatedHandler(args) {\n        if (this.isChildGridRecord(args.context.$implicit)) {\n            const key = args.context.$implicit.rowID;\n            this.childGridTemplates.set(key, args);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public viewMovedHandler(args) {\n        if (this.isChildGridRecord(args.context.$implicit)) {\n            // view was moved, update owner in cache\n            const key = args.context.$implicit.rowID;\n            const cachedData = this.childGridTemplates.get(key);\n            cachedData.owner = args.owner;\n\n            this.childLayoutList.forEach((layout) => {\n                const relatedGrid = this.hgridAPI.getChildGridByID(layout.key, args.context.$implicit.rowID);\n                if (relatedGrid && relatedGrid.updateOnRender) {\n                    // Detect changes if `expandChildren` has changed when the grid wasn't visible. This is for performance reasons.\n                    relatedGrid.notifyChanges(true);\n                    relatedGrid.updateOnRender = false;\n                }\n            });\n\n            const childGrids = this.getChildGrids(true);\n            childGrids.forEach((grid) => {\n                if (grid.isPercentWidth) {\n                    grid.notifyChanges(true);\n                }\n                grid.updateScrollPosition();\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public updateScrollPosition() {\n        const vScr = this.verticalScrollContainer.getScroll();\n        const hScr = this.headerContainer.getScroll();\n        if (vScr) {\n            vScr.scrollTop = this.scrollTop;\n        }\n        if (hScr) {\n            hScr.scrollLeft = this.scrollLeft;\n        }\n    }\n\n    protected getChildGrids(inDeph?: boolean) {\n        return this.hgridAPI.getChildGrids(inDeph);\n    }\n\n    protected generateDataFields(data: any[]): string[] {\n        return super.generateDataFields(data).filter((field) => {\n            const layoutsList = this.parentIsland ? this.parentIsland.children : this.childLayoutList;\n            const keys = layoutsList.map((item) => item.key);\n            return keys.indexOf(field) === -1;\n        });\n    }\n\n\n    private hg_verticalScrollHandler(event) {\n        this.scrollTop = event.target.scrollTop;\n    }\n\n    public onContainerScroll() {\n        this.hideOverlays();\n    }\n\n    private hg_horizontalScrollHandler(event) {\n        this.scrollLeft = event.target.scrollLeft;\n    }\n}\n","import { IgxGridCellComponent } from '../cell.component';\nimport { GridBaseAPIService } from '../api.service';\nimport { ChangeDetectorRef, ElementRef, ChangeDetectionStrategy, Component,\n     OnInit, HostListener, NgZone } from '@angular/core';\nimport { IgxHierarchicalGridComponent } from './hierarchical-grid.component';\nimport { IgxGridSelectionService, IgxGridCRUDService } from '../selection/selection.service';\nimport { HammerGesturesManager } from '../../core/touch';\nimport { PlatformUtil } from '../../core/utils';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-hierarchical-grid-cell',\n    templateUrl: './../cell.component.html',\n    providers: [HammerGesturesManager]\n})\nexport class IgxHierarchicalGridCellComponent extends IgxGridCellComponent implements OnInit {\n\n    // protected hSelection;\n    protected _rootGrid;\n\n    constructor(\n        protected selectionService: IgxGridSelectionService,\n        protected crudService: IgxGridCRUDService,\n        public gridAPI: GridBaseAPIService<IgxHierarchicalGridComponent>,\n        public cdr: ChangeDetectorRef,\n        private helement: ElementRef,\n        protected zone: NgZone,\n        touchManager: HammerGesturesManager,\n        protected platformUtil: PlatformUtil\n        ) {\n            super(selectionService, crudService, gridAPI, cdr, helement, zone, touchManager, platformUtil);\n         }\n\n    ngOnInit() {\n        super.ngOnInit();\n        this._rootGrid = this._getRootGrid();\n    }\n\n    private _getRootGrid() {\n        let currGrid = this.grid;\n        while (currGrid.parent) {\n            currGrid = currGrid.parent;\n        }\n        return currGrid;\n    }\n\n    // TODO: Extend the new selection service to avoid complete traversal\n    _clearAllHighlights() {\n        [this._rootGrid, ...this._rootGrid.getChildGrids(true)].forEach(grid => {\n            grid.selectionService.clear();\n            grid.selectionService.activeElement = null;\n            grid.nativeElement.classList.remove('igx-grid__tr--highlighted');\n            grid.highlightedRowID = null;\n            grid.cdr.markForCheck();\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('focus', ['$event'])\n    onFocus(event) {\n        if (this.focused) {\n            return;\n        }\n        this._clearAllHighlights();\n        const currentElement = this.grid.nativeElement;\n        let parentGrid = this.grid;\n        let childGrid;\n        // add highligh to the current grid\n        if (this._rootGrid.id !== currentElement.id) {\n            currentElement.classList.add('igx-grid__tr--highlighted');\n        }\n\n        // add highligh to the current grid\n        while (this._rootGrid.id !== parentGrid.id) {\n            childGrid = parentGrid;\n            parentGrid = parentGrid.parent;\n\n            const parentRowID = parentGrid.hgridAPI.getParentRowId(childGrid);\n            parentGrid.highlightedRowID = parentRowID;\n        }\n        super.onFocus(event);\n    }\n\n    // TODO: Refactor\n    /**\n     * @hidden\n     * @internal\n     */\n    dispatchEvent(event: KeyboardEvent) {\n        const key = event.key.toLowerCase();\n        if (event.altKey && !this.row.added) {\n            const collapse = this.row.expanded && (key === 'left' || key === 'arrowleft' || key === 'up' || key === 'arrowup');\n            const expand = !this.row.expanded && (key === 'right' || key === 'arrowright' || key === 'down' || key === 'arrowdown');\n            if (collapse) {\n                this.gridAPI.set_row_expansion_state(this.row.rowID, false, event);\n            } else if (expand) {\n                this.gridAPI.set_row_expansion_state(this.row.rowID, true, event);\n            }\n            return;\n        }\n        super.dispatchEvent(event);\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    HostBinding,\n    forwardRef,\n    ElementRef,\n    ViewChildren,\n    QueryList,\n    ViewChild,\n    TemplateRef\n} from '@angular/core';\nimport { IgxHierarchicalGridComponent } from './hierarchical-grid.component';\nimport { IgxRowDirective } from '../row.directive';\nimport { IgxHierarchicalGridCellComponent } from './hierarchical-cell.component';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-hierarchical-grid-row',\n    templateUrl: './hierarchical-row.component.html',\n    providers: [{ provide: IgxRowDirective, useExisting: forwardRef(() => IgxHierarchicalRowComponent) }]\n})\nexport class IgxHierarchicalRowComponent extends IgxRowDirective<IgxHierarchicalGridComponent> {\n    /**\n     * The rendered cells in the row component.\n     *\n     * ```typescript\n     * // get the cells of the third selected row\n     * let selectedRowCells = this.grid.selectedRows[2].cells;\n     * ```\n     */\n    @ViewChildren(forwardRef(() => IgxHierarchicalGridCellComponent), { read: IgxHierarchicalGridCellComponent })\n    public cells: QueryList<IgxHierarchicalGridCellComponent>;\n\n    @ViewChild('expander', { read: ElementRef })\n    public expander: ElementRef<HTMLElement>;\n\n    get viewIndex(): number {\n        return this.index + this.grid.page * this.grid.perPage;\n    }\n\n    /**\n    * @hidden\n    */\n   @ViewChild('defaultExpandedTemplate', { read: TemplateRef, static: true })\n   protected defaultExpandedTemplate: TemplateRef<any>;\n\n    /**\n    * @hidden\n    */\n   @ViewChild('defaultEmptyTemplate', { read: TemplateRef, static: true })\n   protected defaultEmptyTemplate: TemplateRef<any>;\n\n    /**\n    * @hidden\n    */\n   @ViewChild('defaultCollapsedTemplate', { read: TemplateRef, static: true })\n   protected defaultCollapsedTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('attr.tabindex')\n    public tabindex = 0;\n\n        /**\n     * Returns whether the row is expanded.\n     * ```typescript\n     * const RowExpanded = this.grid1.rowList.first.expanded;\n     * ```\n     */\n    @HostBinding('class.igx-grid__tr--expanded')\n    public get expanded() {\n        return this.gridAPI.get_row_expansion_state(this.rowData);\n    }\n\n    public get hasChildren() {\n        return  !!this.grid.childLayoutKeys.length;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-grid__tr--highlighted')\n    public get highlighted() {\n        return this.grid && this.grid.highlightedRowID === this.rowID;\n    }\n\n    /**\n    * @hidden\n    */\n   public expanderClick(event) {\n        event.stopPropagation();\n        this.toggle();\n    }\n\n    /**\n     * Toggles the hierarchical row.\n     * ```typescript\n     * this.grid1.rowList.first.toggle()\n     * ```\n     */\n    public toggle() {\n        if (this.added) {\n            return;\n        }\n        const grid = this.gridAPI.grid;\n        this.endEdit(grid.rootGrid);\n        this.gridAPI.set_row_expansion_state(this.rowID, !this.expanded);\n        grid.cdr.detectChanges();\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public select = () => {\n        this.grid.selectRows([this.rowID]);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public deselect = () => {\n        this.grid.deselectRows([this.rowID]);\n    }\n\n    /**\n    * @hidden\n    */\n    public get iconTemplate() {\n        let expandable = true;\n        if (this.grid.hasChildrenKey) {\n            expandable = this.rowData[this.grid.hasChildrenKey];\n        }\n        if (!expandable) {\n            return this.defaultEmptyTemplate;\n        }\n        if (this.expanded) {\n            return this.grid.rowExpandedIndicatorTemplate || this.defaultExpandedTemplate;\n        } else {\n            return this.grid.rowCollapsedIndicatorTemplate || this.defaultCollapsedTemplate;\n        }\n    }\n\n    private endEdit(grid: IgxHierarchicalGridComponent) {\n        if (grid.crudService.inEditMode) {\n            grid.endEdit();\n        }\n        grid.hgridAPI.getChildGrids(true).forEach(g => {\n            if (g.crudService.inEditMode) {\n            g.endEdit();\n        }});\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { cloneArray } from '../../core/utils';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxHierarchicalGridComponent } from './hierarchical-grid.component';\nimport { DataUtil } from '../../data-operations/data-util';\n\n/**\n *@hidden\n */\n@Pipe({\n    name: 'gridHierarchical',\n    pure: true\n})\nexport class IgxGridHierarchicalPipe implements PipeTransform {\n\n    constructor(private gridAPI: GridBaseAPIService<IgxHierarchicalGridComponent>) { }\n\n    public transform(\n        collection: any,\n        state = new Map<any, boolean>(),\n        id: string,\n        primaryKey: any,\n        childKeys: string[],\n        pipeTrigger: number\n        ): any[] {\n        if (childKeys.length === 0) {\n            return collection;\n        }\n        const grid: IgxHierarchicalGridComponent = this.gridAPI.grid;\n        const result = this.addHierarchy(grid, cloneArray(collection), state, primaryKey, childKeys);\n\n        return result;\n    }\n\n    public addHierarchy<T>(grid, data: T[], state, primaryKey, childKeys: string[]): T[] {\n        const result = [];\n\n        data.forEach((v) => {\n            result.push(v);\n            const childGridsData = {};\n            childKeys.forEach((childKey) => {\n                const childData = v[childKey] ? v[childKey] : null;\n                childGridsData[childKey] = childData;\n            });\n            if (grid.gridAPI.get_row_expansion_state(v)) {\n                result.push({ rowID: primaryKey ? v[primaryKey] : v, childGridsData: childGridsData});\n            }\n        });\n        return result;\n    }\n}\n\n/**\n *@hidden\n */\n@Pipe({\n    name: 'gridHierarchicalPaging',\n    pure: true\n})\nexport class IgxGridHierarchicalPagingPipe implements PipeTransform {\n\n    constructor(private gridAPI: GridBaseAPIService<IgxHierarchicalGridComponent>) { }\n\n    public transform(collection: any[], page = 0, perPage = 15, id: string, pipeTrigger: number): any[] {\n\n        if (!this.gridAPI.grid.paging) {\n            return collection;\n        }\n\n        const state = {\n            index: page,\n            recordsPerPage: perPage\n        };\n\n        const result: any[] = DataUtil.page(cloneArray(collection), state);\n        this.gridAPI.grid.pagingState = state;\n        return result;\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { IgxGridModule } from '../grid/grid.module';\nimport { IgxHierarchicalGridComponent } from './hierarchical-grid.component';\nimport { IgxHierarchicalRowComponent } from './hierarchical-row.component';\nimport { IgxGridHierarchicalPipe, IgxGridHierarchicalPagingPipe } from './hierarchical-grid.pipes';\nimport { IgxRowIslandComponent } from './row-island.component';\nimport { IgxChildGridRowComponent } from './child-grid-row.component';\nimport { IgxHierarchicalGridCellComponent } from './hierarchical-cell.component';\nimport { IgxGridComponent } from '../grid/grid.component';\nimport { IgxHierarchicalGridBaseDirective } from './hierarchical-grid-base.directive';\n\n/**\n * @hidden\n */\n@NgModule({\n  declarations: [\n    IgxHierarchicalGridBaseDirective,\n    IgxHierarchicalGridComponent,\n    IgxHierarchicalRowComponent,\n    IgxRowIslandComponent,\n    IgxChildGridRowComponent,\n    IgxHierarchicalGridCellComponent,\n    IgxGridHierarchicalPipe,\n    IgxGridHierarchicalPagingPipe\n  ],\n  exports: [\n    IgxGridModule,\n    IgxHierarchicalGridComponent,\n    IgxHierarchicalRowComponent,\n    IgxHierarchicalGridCellComponent,\n    IgxRowIslandComponent,\n    IgxChildGridRowComponent\n  ],\n  imports: [\n    IgxGridModule,\n  ],\n  entryComponents: [\n    IgxGridComponent\n  ]\n})\nexport class IgxHierarchicalGridModule {\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    Component,\n    EventEmitter,\n    HostBinding,\n    Input,\n    NgModule,\n    Output,\n    Directive,\n    ContentChild\n} from '@angular/core';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxIconModule } from '../icon/index';\n\n/**\n * IgxActionIcon is a container for the action nav icon of the IgxNavbar.\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-action-icon'\n})\nexport class IgxActionIconDirective { }\n\nlet NEXT_ID = 0;\n/**\n * **Ignite UI for Angular Navbar** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/navbar.html)\n *\n * The Ignite UI Navbar is most commonly used to provide an app header with a hamburger menu and navigation\n * state such as a \"Go Back\" button. It also supports other actions represented by icons.\n *\n * Example:\n * ```html\n * <igx-navbar title=\"Sample App\" actionButtonIcon=\"menu\">\n *   <igx-icon>search</igx-icon>\n *   <igx-icon>favorite</igx-icon>\n *   <igx-icon>more_vert</igx-icon>\n * </igx-navbar>\n * ```\n */\n\n@Component({\n    selector: 'igx-navbar',\n    templateUrl: 'navbar.component.html',\n    styles: [`\n        :host {\n            display: block;\n        }\n    `\n    ]\n})\n\nexport class IgxNavbarComponent {\n    private static NEXT_ID = 1;\n    private isVisible = true;\n\n    /**\n     *An @Input property that sets the value of the `id` attribute. If not provided it will be automatically generated.\n     *```html\n     *<igx-navbar [id]=\"'igx-navbar-12'\" title=\"Sample App\" actionButtonIcon=\"menu\">\n     *```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-navbar-${NEXT_ID++}`;\n    /**\n     *Returns whether the `IgxNavbarComponent` action button is visible, true/false.\n     *```typescript\n     *@ViewChild(\"MyChild\")\n     *public navBar: IgxNavbarComponent;\n     *ngAfterViewInit(){\n     *    let actionButtonVisibile = this.navBar.isActionButtonVisible;\n     *}\n     *```\n     */\n    @Input()\n    public get isActionButtonVisible(): boolean {\n        if (this.actionIconTemplate || !this.actionButtonIcon) {\n            return false;\n        }\n        return this.isVisible;\n    }\n\n    /**\n     *Sets whether the action button of the `IgxNavbarComponent` is visible.\n     *```html\n     *<igx-navbar [title]=\"currentView\" [isActionButtonVisible]=\"'false'\"></igx-navbar>\n     *```\n     */\n    public set isActionButtonVisible(value: boolean) {\n        this.isVisible = value;\n    }\n    /**\n     *An @Input property that sets the icon of the `IgxNavbarComponent`.\n     *```html\n     *<igx-navbar [title]=\"currentView\" actionButtonIcon=\"arrow_back\"></igx-navbar>\n     *```\n     */\n    @Input() public actionButtonIcon: string;\n\n    /**\n     *An @Input property that sets the title of the `IgxNavbarComponent`.\n     *```html\n     *<igx-navbar title=\"Sample App\" actionButtonIcon=\"menu\">\n     *```\n     */\n    @Input() public title: string;\n\n    /**\n     *The event that will be thrown when the action is executed,\n     *provides reference to the `IgxNavbar` component as argument\n     *```typescript\n     *public actionExc(event){\n     *    alert(\"Action Execute!\");\n     *}\n     * //..\n     *```\n     *```html\n     *<igx-navbar (onAction)=\"actionExc($event)\" title=\"Sample App\" actionButtonIcon=\"menu\">\n     *```\n     */\n    @Output() public onAction = new EventEmitter<IgxNavbarComponent>();\n\n    /**\n     *An @Input property that sets the titleId of the `IgxNavbarComponent`. If not set it will be automatically generated.\n     *```html\n     *<igx-navbar [titleId]=\"'igx-navbar-7'\" title=\"Sample App\" actionButtonIcon=\"menu\">\n     *```\n     */\n    @Input()\n    public titleId = `igx-navbar-${IgxNavbarComponent.NEXT_ID++}`;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxActionIconDirective, { read: IgxActionIconDirective })\n    protected actionIconTemplate: IgxActionIconDirective;\n\n    /**\n     *@hidden\n     */\n    public _triggerAction() {\n        this.onAction.emit(this);\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxNavbarComponent, IgxActionIconDirective],\n    exports: [IgxNavbarComponent, IgxActionIconDirective],\n    imports: [IgxButtonModule, IgxIconModule, CommonModule]\n})\nexport class IgxNavbarModule {\n}\n","import { Directive, HostBinding, Input, TemplateRef } from '@angular/core';\n\n@Directive({\n    selector: '[igxDrawerItem]',\n    exportAs: 'igxDrawerItem'\n})\nexport class IgxNavDrawerItemDirective {\n\n    /**\n     * @hidden\n     */\n    @Input('active') public active = false;\n\n    /**\n     * @hidden\n     */\n    @Input('isHeader') public isHeader = false;\n\n    /**\n     * @hidden\n     */\n    public readonly activeClass = 'igx-nav-drawer__item--active';\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-nav-drawer__item')\n    get defaultCSS(): boolean {\n        return !this.active && !this.isHeader;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-nav-drawer__item--active')\n    get currentCSS(): boolean {\n        return this.active && !this.isHeader;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-nav-drawer__item--header')\n    get headerCSS(): boolean {\n        return this.isHeader;\n    }\n}\n\n@Directive({\n    selector: '[igxDrawer]'\n})\nexport class IgxNavDrawerTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) {\n     }\n}\n\n@Directive({\n    selector: '[igxDrawerMini]'\n})\nexport class IgxNavDrawerMiniTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) {\n     }\n}\n","import {\n    AfterContentInit,\n    Component,\n    ContentChild,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    Inject,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Optional,\n    Output,\n    SimpleChange,\n    ViewChild,\n    Renderer2\n} from '@angular/core';\nimport { fromEvent, interval, Subscription } from 'rxjs';\nimport { debounce } from 'rxjs/operators';\nimport { IgxNavigationService, IToggleView } from '../core/navigation';\nimport { HammerGesturesManager } from '../core/touch';\nimport { IgxNavDrawerMiniTemplateDirective, IgxNavDrawerTemplateDirective } from './navigation-drawer.directives';\nimport { PlatformUtil } from '../core/utils';\n\nlet NEXT_ID = 0;\n/**\n * **Ignite UI for Angular Navigation Drawer** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/navdrawer.html)\n *\n * The Ignite UI Navigation Drawer is a collapsible side navigation container commonly used in combination with the Navbar.\n *\n * Example:\n * ```html\n * <igx-nav-drawer id=\"navigation\" [isOpen]=\"true\">\n *   <ng-template igxDrawer>\n *     <nav>\n *       <span igxDrawerItem [isHeader]=\"true\">Email</span>\n *       <span igxDrawerItem igxRipple>Inbox</span>\n *       <span igxDrawerItem igxRipple>Deleted</span>\n *       <span igxDrawerItem igxRipple>Sent</span>\n *     </nav>\n *   </ng-template>\n * </igx-nav-drawer>\n * ```\n */\n@Component({\n    providers: [HammerGesturesManager],\n    selector: 'igx-nav-drawer',\n    templateUrl: 'navigation-drawer.component.html',\n    styles: [`\n        :host {\n            display: block;\n            height: 100%;\n        }\n    `]\n})\nexport class IgxNavigationDrawerComponent implements\n    IToggleView,\n    OnInit,\n    AfterContentInit,\n    OnDestroy,\n    OnChanges {\n\n    private _isOpen = false;\n\n    /** @hidden @internal */\n    @HostBinding('class.igx-nav-drawer')\n    public cssClass = true;\n\n    /**\n     * ID of the component\n     *\n     * ```typescript\n     * // get\n     * let myNavDrawerId = this.navdrawer.id;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     *  <igx-nav-drawer id='navdrawer'></igx-nav-drawer>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input() public id = `igx-nav-drawer-${NEXT_ID++}`;\n\n    /**\n     * Position of the Navigation Drawer. Can be \"left\"(default) or \"right\".\n     *\n     * ```typescript\n     * // get\n     * let myNavDrawerPosition = this.navdrawer.position;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-nav-drawer [position]=\"'left'\"></igx-nav-drawer>\n     * ```\n     */\n    @Input() public position = 'left';\n\n    /**\n     * Enables the use of touch gestures to manipulate the drawer:\n     * - swipe/pan from edge to open, swipe-toggle and pan-drag.\n     *\n     * ```typescript\n     * // get\n     * let gesturesEnabled = this.navdrawer.enableGestures;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-nav-drawer [enableGestures]='true'></igx-nav-drawer>\n     * ```\n     */\n    @Input() public enableGestures = true;\n\n    /**\n     * State of the drawer.\n     *\n     * ```typescript\n     * // get\n     * let navDrawerIsOpen = this.navdrawer.isOpen;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-nav-drawer [isOpen]='false'></igx-nav-drawer>\n     * ```\n     *\n     * Two-way data binding.\n     * ```html\n     * <!--set-->\n     * <igx-nav-drawer [(isOpen)]='model.isOpen'></igx-nav-drawer>\n     * ```\n     */\n    @Input()\n    public get isOpen() {\n        return this._isOpen;\n    }\n    public set isOpen(value) {\n        this._isOpen = value;\n        this.isOpenChange.emit(this._isOpen);\n    }\n\n    /**\n     *@hidden\n     */\n    @Output() public isOpenChange = new EventEmitter<boolean>();\n\n    /**\n     * When pinned the drawer is relatively positioned instead of sitting above content.\n     * May require additional layout styling.\n     *\n     * ```typescript\n     * // get\n     * let navDrawerIsPinned = this.navdrawer.pin;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-nav-drawer [pin]='false'></igx-nav-drawer>\n     * ```\n     */\n    @Input() public pin = false;\n\n    /**\n     * Minimum device width required for automatic pin to be toggled.\n     * Default is 1024, can be set to a falsy value to disable this behavior.\n     *\n     * ```typescript\n     * // get\n     * let navDrawerPinTreshold = this.navdrawer.pinThreshold;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-nav-drawer [pinTreshold]='1024'></igx-nav-drawer>\n     * ```\n     */\n    @Input() public pinThreshold = 1024;\n\n    /**\n     * Returns nativeElement of the component.\n     *\n     * @hidden\n     */\n    get element() {\n        return this.elementRef.nativeElement;\n    }\n\n    /**\n     * Width of the drawer in its open state. Defaults to \"280px\".\n     *\n     * ```typescript\n     * // get\n     * let navDrawerWidth = this.navdrawer.width;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-nav-drawer [width]=\"'228px'\"></igx-nav-drawer>\n     * ```\n     */\n    @Input() public width = '280px';\n\n    /**\n     * Width of the drawer in its mini state. Defaults to 68px.\n     *\n     * ```typescript\n     * // get\n     * let navDrawerMiniWidth = this.navdrawer.miniWidth;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-nav-drawer [miniWidth]=\"'34px'\"></igx-nav-drawer>\n     * ```\n     */\n    @Input() public miniWidth = '68px';\n\n    /**\n     * Pinned state change output for two-way binding.\n     *\n     * ```html\n     * <igx-nav-drawer [(pin)]='isPinned'></igx-nav-drawer>\n     * ```\n     */\n    @Output() public pinChange = new EventEmitter<boolean>(true);\n    /**\n     * Event fired as the Navigation Drawer is about to open.\n     *\n     * ```html\n     *  <igx-nav-drawer (opening)='onOpening()'></igx-nav-drawer>\n     * ```\n     */\n    @Output() public opening = new EventEmitter();\n    /**\n     * Event fired when the Navigation Drawer has opened.\n     *\n     * ```html\n     * <igx-nav-drawer (opened)='onOpened()'></igx-nav-drawer>\n     * ```\n     */\n    @Output() public opened = new EventEmitter();\n    /**\n     * Event fired as the Navigation Drawer is about to close.\n     *\n     * ```html\n     * <igx-nav-drawer (closing)='onClosing()'></igx-nav-drawer>\n     * ```\n     */\n    @Output() public closing = new EventEmitter();\n    /**\n     * Event fired when the Navigation Drawer has closed.\n     *\n     * ```html\n     * <igx-nav-drawer (closed)='onClosed()'></igx-nav-drawer>\n     * ```\n     */\n    @Output() public closed = new EventEmitter();\n\n    /**\n     * @hidden\n     */\n    get template() {\n        if (this.miniTemplate && !this.isOpen) {\n            return this.miniTemplate.template;\n        } else if (this.contentTemplate) {\n            return this.contentTemplate.template;\n        }\n    }\n\n    private _miniTemplate: IgxNavDrawerMiniTemplateDirective;\n    /**\n     * @hidden\n     */\n    public get miniTemplate(): IgxNavDrawerMiniTemplateDirective {\n        return this._miniTemplate;\n    }\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxNavDrawerMiniTemplateDirective, { read: IgxNavDrawerMiniTemplateDirective })\n    public set miniTemplate(v: IgxNavDrawerMiniTemplateDirective) {\n        if (!this.isOpen) {\n            this.setDrawerWidth(v ? this.miniWidth : '');\n        }\n        this._miniTemplate = v;\n    }\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxNavDrawerTemplateDirective, { read: IgxNavDrawerTemplateDirective })\n    protected contentTemplate: IgxNavDrawerTemplateDirective;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.flexBasis')\n    get flexWidth() {\n        if (!this.pin) {\n            return '0px';\n        }\n        if (this.isOpen) {\n            return this.width;\n        }\n        if (this.miniTemplate && this.miniWidth) {\n            return this.miniWidth;\n        }\n\n        return '0px';\n    }\n\n    /** @hidden */\n    @HostBinding('style.order')\n    get isPinnedRight() {\n        return this.pin && this.position === 'right' ? '1' : '0';\n    }\n\n    private _gesturesAttached = false;\n    private _widthCache: { width: number, miniWidth: number, windowWidth: number } = { width: null, miniWidth: null, windowWidth: null };\n    private _resizeObserver: Subscription;\n    private css: { [name: string]: string; } = {\n        drawer: 'igx-nav-drawer__aside',\n        mini: 'igx-nav-drawer__aside--mini',\n        overlay: 'igx-nav-drawer__overlay',\n        styleDummy: 'igx-nav-drawer__style-dummy'\n    };\n\n    @ViewChild('aside', { static: true }) private _drawer: ElementRef;\n    @ViewChild('overlay', { static: true }) private _overlay: ElementRef;\n    @ViewChild('dummy', { static: true }) private _styleDummy: ElementRef;\n\n    /**\n      * @hidden\n      */\n    get drawer() {\n        return this._drawer.nativeElement;\n    }\n\n    /**\n     * @hidden\n     */\n    get overlay() {\n        return this._overlay.nativeElement;\n    }\n\n    /**\n     * @hidden\n     */\n    get styleDummy() {\n        return this._styleDummy.nativeElement;\n    }\n\n    /** Pan animation properties */\n    private _panning = false;\n    private _panStartWidth: number;\n    private _panLimit: number;\n\n    /**\n     * Property to decide whether to change width or translate the drawer from pan gesture.\n     *\n     * @hidden\n     */\n    public get hasAnimateWidth(): boolean {\n        return this.pin || !!this.miniTemplate;\n    }\n\n    private _maxEdgeZone = 50;\n    /**\n     * Used for touch gestures (swipe and pan).\n     * Defaults to 50 (in px) and is extended to at least 110% of the mini template width if available.\n     *\n     * @hidden\n     */\n    public get maxEdgeZone() {\n        return this._maxEdgeZone;\n    }\n\n    /**\n     * Gets the Drawer width for specific state.\n     * Will attempt to evaluate requested state and cache.\n     *\n     *\n     * @hidden\n     */\n    public get expectedWidth() {\n        return this.getExpectedWidth(false);\n    }\n\n    /**\n     * Get the Drawer mini width for specific state.\n     * Will attempt to evaluate requested state and cache.\n     *\n     * @hidden\n     */\n    public get expectedMiniWidth() {\n        return this.getExpectedWidth(true);\n    }\n\n    /**\n     * @hidden\n     */\n    public get touchManager() {\n        return this._touchManager;\n    }\n\n    /**\n     * Exposes optional navigation service\n     *\n     * @hidden\n     */\n    public get state() {\n        return this._state;\n    }\n\n    constructor(\n        @Inject(ElementRef) private elementRef: ElementRef,\n        @Optional() private _state: IgxNavigationService,\n        protected renderer: Renderer2,\n        private _touchManager: HammerGesturesManager,\n        private platformUtil: PlatformUtil) {\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        // DOM and @Input()-s initialized\n        if (this._state) {\n            this._state.add(this.id, this);\n        }\n        if (this.isOpen) {\n            this.setDrawerWidth(this.width);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterContentInit() {\n        // wait for template and ng-content to be ready\n        this.updateEdgeZone();\n        this.checkPinThreshold();\n\n        this.ensureEvents();\n\n        // TODO: apply platform-safe Ruler from http://plnkr.co/edit/81nWDyreYMzkunihfRgX?p=preview\n        // (https://github.com/angular/angular/issues/6515), blocked by https://github.com/angular/angular/issues/6904\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this._touchManager.destroy();\n        if (this._state) {\n            this._state.remove(this.id);\n        }\n        if (this._resizeObserver) {\n            this._resizeObserver.unsubscribe();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnChanges(changes: { [propName: string]: SimpleChange }) {\n        // simple settings can come from attribute set (rather than binding), make sure boolean props are converted\n        if (changes.enableGestures && changes.enableGestures.currentValue !== undefined) {\n            this.enableGestures = !!(this.enableGestures && this.enableGestures.toString() === 'true');\n            this.ensureEvents();\n        }\n        if (changes.pin && changes.pin.currentValue !== undefined) {\n            this.pin = !!(this.pin && this.pin.toString() === 'true');\n            if (this.pin) {\n                this._touchManager.destroy();\n                this._gesturesAttached = false;\n            } else {\n                this.ensureEvents();\n            }\n        }\n\n        if (changes.pinThreshold) {\n            if (this.pinThreshold) {\n                this.ensureEvents();\n                this.checkPinThreshold();\n            }\n        }\n\n        if (changes.width && this.isOpen) {\n            this.setDrawerWidth(changes.width.currentValue);\n        }\n\n        if (changes.miniWidth) {\n            if (!this.isOpen) {\n                this.setDrawerWidth(changes.miniWidth.currentValue);\n            }\n            this.updateEdgeZone();\n        }\n    }\n\n    /**\n     * Toggle the open state of the Navigation Drawer.\n     *\n     * ```typescript\n     * this.navdrawer.toggle();\n     * ```\n     */\n    public toggle() {\n        if (this.isOpen) {\n            this.close();\n        } else {\n            this.open();\n        }\n    }\n\n    /**\n     * Open the Navigation Drawer. Has no effect if already opened.\n     *\n     * ```typescript\n     * this.navdrawer.open();\n     * ```\n     */\n    public open() {\n        if (this._panning) {\n            this.resetPan();\n        }\n        if (this.isOpen) {\n            return;\n        }\n        this.opening.emit();\n        this.isOpen = true;\n\n        // TODO: Switch to animate API when available\n        // var animationCss = this.animate.css();\n        //     animationCss\n        //         .setStyles({'width':'50px'}, {'width':'400px'})\n        //         .start(this.elementRef.nativeElement)\n        //         .onComplete(() => animationCss.setToStyles({'width':'auto'}).start(this.elementRef.nativeElement));\n\n        this.elementRef.nativeElement.addEventListener('transitionend', this.toggleOpenedEvent, false);\n        this.setDrawerWidth(this.width);\n    }\n\n    /**\n     * Close the Navigation Drawer. Has no effect if already closed.\n     *\n     * ```typescript\n     * this.navdrawer.close();\n     * ```\n     */\n    public close() {\n        if (this._panning) {\n            this.resetPan();\n        }\n        if (!this.isOpen) {\n            return;\n        }\n        this.closing.emit();\n\n        this.isOpen = false;\n        this.setDrawerWidth(this.miniTemplate ? this.miniWidth : '');\n        this.elementRef.nativeElement.addEventListener('transitionend', this.toggleClosedEvent, false);\n    }\n\n    /**\n     * @hidden\n     */\n    protected set_maxEdgeZone(value: number) {\n        this._maxEdgeZone = value;\n    }\n\n    /**\n     * Get the Drawer width for specific state. Will attempt to evaluate requested state and cache.\n     *\n     * @hidden\n     * @param [mini] - Request mini width instead\n     */\n    protected getExpectedWidth(mini?: boolean): number {\n        if (mini) {\n            if (!this.miniTemplate) {\n                return 0;\n            }\n            if (this.miniWidth) {\n                return parseFloat(this.miniWidth);\n            } else {\n                // if (!this.isOpen) { // This WON'T work due to transition timings...\n                //     return this.elementRef.nativeElement.children[1].offsetWidth;\n                // } else {\n                if (this._widthCache.miniWidth === null) {\n                    // force class for width calc. TODO?\n                    // force class for width calc. TODO?\n                    this.renderer.addClass(this.styleDummy, this.css.drawer);\n                    this.renderer.addClass(this.styleDummy, this.css.mini);\n                    this._widthCache.miniWidth = this.styleDummy.offsetWidth;\n                    this.renderer.removeClass(this.styleDummy, this.css.drawer);\n                    this.renderer.removeClass(this.styleDummy, this.css.mini);\n                }\n                return this._widthCache.miniWidth;\n            }\n        } else {\n            if (this.width) {\n                return parseFloat(this.width);\n            } else {\n                if (this._widthCache.width === null) {\n                    // force class for width calc. TODO?\n                    // force class for width calc. TODO?\n                    this.renderer.addClass(this.styleDummy, this.css.drawer);\n                    this._widthCache.width = this.styleDummy.offsetWidth;\n                    this.renderer.removeClass(this.styleDummy, this.css.drawer);\n                }\n                return this._widthCache.width;\n            }\n        }\n    }\n\n    private getWindowWidth() {\n        return (window.innerWidth > 0) ? window.innerWidth : screen.width;\n    }\n\n    /**\n     * Sets the drawer width.\n     */\n    private setDrawerWidth(width: string) {\n        if (this.platformUtil.isBrowser) {\n            requestAnimationFrame(() => {\n                if (this.drawer) {\n                    this.renderer.setStyle(this.drawer, 'width', width);\n                }\n            });\n        } else {\n            this.renderer.setStyle(this.drawer, 'width', width);\n        }\n    }\n\n    /**\n     * Get current Drawer width.\n     */\n    private getDrawerWidth(): number {\n        return this.drawer.offsetWidth;\n    }\n\n    private ensureEvents() {\n        // set listeners for swipe/pan only if needed, but just once\n        if (this.enableGestures && !this.pin && !this._gesturesAttached) {\n            // Built-in manager handler(L20887) causes endless loop and max stack exception.\n            // https://github.com/angular/angular/issues/6993\n            // Use ours for now (until beta.10):\n            // this.renderer.listen(document, \"swipe\", this.swipe);\n            this._touchManager.addGlobalEventListener('document', 'swipe', this.swipe);\n            this._gesturesAttached = true;\n\n            // this.renderer.listen(document, \"panstart\", this.panstart);\n            // this.renderer.listen(document, \"pan\", this.pan);\n            this._touchManager.addGlobalEventListener('document', 'panstart', this.panstart);\n            this._touchManager.addGlobalEventListener('document', 'panmove', this.pan);\n            this._touchManager.addGlobalEventListener('document', 'panend', this.panEnd);\n        }\n        if (!this._resizeObserver && this.platformUtil.isBrowser) {\n            this._resizeObserver = fromEvent(window, 'resize').pipe(debounce(() => interval(150)))\n                .subscribe((value) => {\n                    this.checkPinThreshold(value);\n                });\n        }\n    }\n\n    private updateEdgeZone() {\n        let maxValue;\n\n        if (this.miniTemplate) {\n            maxValue = Math.max(this._maxEdgeZone, this.getExpectedWidth(true) * 1.1);\n            this.set_maxEdgeZone(maxValue);\n        }\n    }\n\n    private checkPinThreshold = (evt?: Event) => {\n        if (!this.platformUtil.isBrowser) {\n            return;\n        }\n        let windowWidth;\n        if (this.pinThreshold) {\n            windowWidth = this.getWindowWidth();\n            if (evt && this._widthCache.windowWidth === windowWidth) {\n                return;\n            }\n            this._widthCache.windowWidth = windowWidth;\n            if (!this.pin && windowWidth >= this.pinThreshold) {\n                this.pin = true;\n                this.pinChange.emit(true);\n            } else if (this.pin && windowWidth < this.pinThreshold) {\n                this.pin = false;\n                this.pinChange.emit(false);\n            }\n        }\n    }\n\n    private swipe = (evt: HammerInput) => {\n        // TODO: Could also force input type: http://stackoverflow.com/a/27108052\n        if (!this.enableGestures || evt.pointerType !== 'touch') {\n            return;\n        }\n\n        // HammerJS swipe is horizontal-only by default, don't check deltaY\n        let deltaX;\n        let startPosition;\n        if (this.position === 'right') {\n            // when on the right use inverse of deltaX\n            deltaX = -evt.deltaX;\n            startPosition = this.getWindowWidth() - (evt.center.x + evt.distance);\n        } else {\n            deltaX = evt.deltaX;\n            startPosition = evt.center.x - evt.distance;\n        }\n        // only accept closing swipe (ignoring minEdgeZone) when the drawer is expanded:\n        if ((this.isOpen && deltaX < 0) ||\n            // positive deltaX from the edge:\n            (deltaX > 0 && startPosition < this.maxEdgeZone)) {\n            this.toggle();\n        }\n    }\n\n    private panstart = (evt: HammerInput) => { // TODO: test code\n        if (!this.enableGestures || this.pin || evt.pointerType !== 'touch') {\n            return;\n        }\n        const startPosition = this.position === 'right' ? this.getWindowWidth() - (evt.center.x + evt.distance)\n            : evt.center.x - evt.distance;\n\n        // cache width during animation, flag to allow further handling\n        if (this.isOpen || (startPosition < this.maxEdgeZone)) {\n            this._panning = true;\n            this._panStartWidth = this.getExpectedWidth(!this.isOpen);\n            this._panLimit = this.getExpectedWidth(this.isOpen);\n\n            this.renderer.addClass(this.overlay, 'panning');\n            this.renderer.addClass(this.drawer, 'panning');\n        }\n    }\n\n    private pan = (evt: HammerInput) => {\n        // TODO: input.deltaX = prevDelta.x + (center.x - offset.x);\n        // get actual delta (not total session one) from event?\n        // pan WILL also fire after a full swipe, only resize on flag\n        if (!this._panning) {\n            return;\n        }\n        const right: boolean = this.position === 'right';\n        // when on the right use inverse of deltaX\n        const deltaX = right ? -evt.deltaX : evt.deltaX;\n        let visibleWidth;\n        let newX;\n        let percent;\n\n        visibleWidth = this._panStartWidth + deltaX;\n\n        if (this.isOpen && deltaX < 0) {\n            // when visibleWidth hits limit - stop animating\n            if (visibleWidth <= this._panLimit) {\n                return;\n            }\n\n            if (this.hasAnimateWidth) {\n                percent = (visibleWidth - this._panLimit) / (this._panStartWidth - this._panLimit);\n                newX = visibleWidth;\n            } else {\n                percent = visibleWidth / this._panStartWidth;\n                newX = evt.deltaX;\n            }\n            this.setXSize(newX, percent.toPrecision(2));\n\n        } else if (!this.isOpen && deltaX > 0) {\n            // when visibleWidth hits limit - stop animating\n            if (visibleWidth >= this._panLimit) {\n                return;\n            }\n\n            if (this.hasAnimateWidth) {\n                percent = (visibleWidth - this._panStartWidth) / (this._panLimit - this._panStartWidth);\n                newX = visibleWidth;\n            } else {\n                percent = visibleWidth / this._panLimit;\n                newX = (this._panLimit - visibleWidth) * (right ? 1 : -1);\n            }\n            this.setXSize(newX, percent.toPrecision(2));\n        }\n    }\n\n    private panEnd = (evt: HammerInput) => {\n        if (this._panning) {\n            const deltaX = this.position === 'right' ? -evt.deltaX : evt.deltaX;\n            const visibleWidth: number = this._panStartWidth + deltaX;\n            this.resetPan();\n\n            // check if pan brought the drawer to 50%\n            if (this.isOpen && visibleWidth <= this._panStartWidth / 2) {\n                this.close();\n            } else if (!this.isOpen && visibleWidth >= this._panLimit / 2) {\n                this.open();\n            }\n            this._panStartWidth = null;\n        }\n    }\n\n    private resetPan() {\n        this._panning = false;\n        /* styles fail to apply when set on parent due to extra attributes, prob ng bug */\n        /* styles fail to apply when set on parent due to extra attributes, prob ng bug */\n        this.renderer.removeClass(this.overlay, 'panning');\n        this.renderer.removeClass(this.drawer, 'panning');\n        this.setXSize(0, '');\n    }\n\n    /**\n     * Sets the absolute position or width in case the drawer doesn't change position.\n     * @param x the number pixels to translate on the X axis or the width to set. 0 width will clear the style instead.\n     * @param opacity optional value to apply to the overlay\n     */\n    private setXSize(x: number, opacity?: string) {\n        // Angular polyfills patches window.requestAnimationFrame, but switch to DomAdapter API (TODO)\n        window.requestAnimationFrame(() => {\n            if (this.hasAnimateWidth) {\n                this.renderer.setStyle(this.drawer, 'width', x ? Math.abs(x) + 'px' : '');\n            } else {\n                this.renderer.setStyle(this.drawer, 'transform', x ? 'translate3d(' + x + 'px,0,0)' : '');\n                this.renderer.setStyle(this.drawer, '-webkit-transform', x ? 'translate3d(' + x + 'px,0,0)' : '');\n            }\n            if (opacity !== undefined) {\n                this.renderer.setStyle(this.overlay, 'opacity', opacity);\n            }\n        });\n    }\n\n    private toggleOpenedEvent = (evt?) => {\n        this.elementRef.nativeElement.removeEventListener('transitionend', this.toggleOpenedEvent, false);\n        this.opened.emit();\n    }\n\n    private toggleClosedEvent = (evt?) => {\n        this.elementRef.nativeElement.removeEventListener('transitionend', this.toggleClosedEvent, false);\n        this.closed.emit();\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { IgxNavigationDrawerComponent } from './navigation-drawer.component';\nimport {\n    IgxNavDrawerItemDirective,\n    IgxNavDrawerMiniTemplateDirective,\n    IgxNavDrawerTemplateDirective\n} from './navigation-drawer.directives';\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxNavigationDrawerComponent,\n        IgxNavDrawerItemDirective,\n        IgxNavDrawerMiniTemplateDirective,\n        IgxNavDrawerTemplateDirective\n    ],\n    exports: [\n        IgxNavigationDrawerComponent,\n        IgxNavDrawerItemDirective,\n        IgxNavDrawerMiniTemplateDirective,\n        IgxNavDrawerTemplateDirective\n    ],\n    imports: [CommonModule]\n})\nexport class IgxNavigationDrawerModule {}\n","import {\n    Component,\n    Input,\n    HostListener,\n    ElementRef,\n    HostBinding,\n    Output,\n    EventEmitter,\n    OnInit,\n    OnDestroy,\n    TemplateRef\n} from '@angular/core';\nimport { takeUntil } from 'rxjs/operators';\nimport { SliderHandle } from '../slider.common';\nimport { Subject } from 'rxjs';\n\n/**\n * @hidden\n */\n@Component({\n    selector: 'igx-thumb',\n    templateUrl: 'thumb-slider.component.html',\n})\nexport class IgxSliderThumbComponent implements OnInit, OnDestroy {\n\n    private _isActive = false;\n    private _isPressed = false;\n    private _destroy$ = new Subject<boolean>();\n\n    private get thumbPositionX() {\n        const thumbBounderies = this.nativeElement.getBoundingClientRect();\n        const thumbCenter = (thumbBounderies.right - thumbBounderies.left) / 2;\n        return thumbBounderies.left + thumbCenter;\n    }\n\n    public isActive = false;\n\n    @Input()\n    public value: number;\n\n    @Input()\n    public continuous: boolean;\n\n    @Input()\n    public thumbLabelVisibilityDuration;\n\n    @Input()\n    public disabled: boolean;\n\n    @Input()\n    public onPan: Subject<number>;\n\n    @Input()\n    public stepDistance: number;\n\n    @Input()\n    public step: number;\n\n    @Input()\n    public templateRef: TemplateRef<any>;\n\n    @Input()\n    public context: any;\n\n    @Input()\n    public type: SliderHandle;\n\n    @Input()\n    public deactiveState: boolean;\n\n    @Output()\n    public onThumbValueChange = new EventEmitter<number>();\n\n    @Output()\n    public onChange = new EventEmitter<any>();\n\n    @Output()\n    public onHoverChange = new EventEmitter<boolean>();\n\n    @HostBinding('attr.tabindex')\n    public tabindex = 0;\n\n    @HostBinding('attr.z-index')\n    public zIndex = 0;\n\n    @HostBinding('class.igx-slider__thumb-from')\n    public get thumbFromClass() {\n        return this.type === SliderHandle.FROM;\n    }\n\n    @HostBinding('class.igx-slider__thumb-to')\n    public get thumbToClass() {\n        return this.type === SliderHandle.TO;\n    }\n\n    @HostBinding('class.igx-slider__thumb-from--active')\n    public get thumbFromActiveClass() {\n        return this.type === SliderHandle.FROM && this._isActive;\n    }\n\n    @HostBinding('class.igx-slider__thumb-to--active')\n    public get thumbToActiveClass() {\n        return this.type === SliderHandle.TO && this._isActive;\n    }\n\n    @HostBinding('class.igx-slider__thumb--pressed')\n    public get thumbPressedClass() {\n        return this.isActive && this._isPressed;\n    }\n\n    public get nativeElement() {\n        return this._elementRef.nativeElement;\n    }\n\n    public get destroy(): Subject<boolean> {\n        return this._destroy$;\n    }\n\n    constructor(private _elementRef: ElementRef) { }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        this.onPan\n            .pipe(takeUntil(this._destroy$))\n            .subscribe(mouseX =>\n                this.updateThumbValue(mouseX)\n            );\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this._destroy$.next(true);\n        this._destroy$.complete();\n    }\n\n    @HostListener('pointerenter')\n    public onPinterEnter() {\n        this.onHoverChange.emit(true);\n    }\n\n    @HostListener('pointerleave')\n    public onPointerLeave() {\n        this.onHoverChange.emit(false);\n    }\n\n    @HostListener('keydown', ['$event'])\n    public onKeyDown(event: KeyboardEvent) {\n        if (this.disabled) {\n            return;\n        }\n\n        let increment = 0;\n        if (event.key.endsWith('Left')) {\n            increment = this.step * - 1;\n        } else if (event.key.endsWith('Right')) {\n            increment = this.step;\n        } else {\n            return;\n        }\n\n        this.onChange.emit();\n        this.onThumbValueChange.emit(increment);\n    }\n\n    @HostListener('blur')\n    public onBlur() {\n        this.isActive = false;\n        this.zIndex = 0;\n    }\n\n    @HostListener('focus')\n    public onFocusListener() {\n        this.isActive = true;\n        this.zIndex = 1;\n    }\n\n    /**\n     * Show thumb label and ripple.\n     */\n    public showThumbIndicators() {\n        this.toggleThumbIndicators(true);\n    }\n\n    /**\n     * Hide thumb label and ripple.\n     */\n    public hideThumbIndicators() {\n        this.toggleThumbIndicators(false);\n    }\n\n    private updateThumbValue(mouseX: number) {\n        const updateValue = this.calculateTrackUpdate(mouseX);\n        if (this.isActive && updateValue !== 0) {\n            this.onThumbValueChange.emit(updateValue);\n        }\n    }\n\n    private calculateTrackUpdate(mouseX: number): number {\n        const scaleX = mouseX - this.thumbPositionX;\n        const stepDistanceCenter = this.stepDistance / 2;\n\n        // If the thumb scale range (slider update) is less thn a half step,\n        // the position stays the same.\n        const scaleXPositive = Math.abs(scaleX);\n        if (scaleXPositive < stepDistanceCenter) {\n            return 0;\n        }\n\n        return this.stepToProceed(scaleX, this.stepDistance);\n    }\n\n    private stepToProceed(scaleX, stepDist) {\n        return Math.round(scaleX / stepDist) * this.step;\n    }\n\n    private toggleThumbIndicators(visible: boolean) {\n        this._isPressed = visible;\n\n        if (this.continuous || this.deactiveState) {\n            this._isActive = false;\n        } else {\n            this._isActive = visible;\n        }\n\n    }\n}\n","import {\n    Component,\n    Directive,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    Input,\n    NgModule,\n    Output,\n    Provider,\n    ViewChild,\n    ElementRef\n} from '@angular/core';\nimport { CheckboxRequiredValidator, ControlValueAccessor, NG_VALIDATORS, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { isIE, IBaseEventArgs } from '../core/utils';\nimport { EditorProvider } from '../core/edit-provider';\n\nexport enum SwitchLabelPosition {\n    BEFORE = 'before',\n    AFTER = 'after'\n}\n\nexport interface IChangeSwitchEventArgs extends IBaseEventArgs {\n    checked: boolean;\n    switch: IgxSwitchComponent;\n}\n\nconst noop = () => { };\nlet nextId = 0;\n/**\n *\n * The Switch component is a binary choice selection component.\n *\n * @igxModule IgxSwitchModule\n *\n * @igxTheme igx-switch-theme, igx-tooltip-theme\n *\n * @igxKeywords switch, states, tooltip\n *\n * @igxGroup Data Entry & Display\n *\n * @remarks\n *\n * The Ignite UI Switch lets the user toggle between on/off or true/false states.\n *\n * @example\n * ```html\n * <igx-switch [checked]=\"true\">\n *   Simple switch\n * </igx-switch>\n * ```\n */\n@Component({\n    providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: IgxSwitchComponent, multi: true }],\n    selector: 'igx-switch',\n    templateUrl: 'switch.component.html'\n})\nexport class IgxSwitchComponent implements ControlValueAccessor, EditorProvider {\n    /**\n     * @hidden\n     * @internal\n     */\n    protected _value: any;\n    /**\n     * Returns a reference to the native checkbox element.\n     *\n     * @example\n     * ```typescript\n     * let checkboxElement =  this.switch.nativeCheckbox;\n     * ```\n     */\n    @ViewChild('checkbox', { static: true }) public nativeCheckbox: ElementRef;\n    /**\n     * Returns reference to the native label element.\n     *\n     * @example\n     * ```typescript\n     * let labelElement =  this.switch.nativeLabel;\n     * ```\n     */\n    @ViewChild('label', { static: true }) public nativeLabel;\n    /**\n     * Returns reference to the label placeholder element.\n     *\n     * @example\n     * ```typescript\n     * let labelPlaceholder = this.switch.placeholderLabel;\n     * ```\n     */\n    @ViewChild('placeholderLabel', { static: true }) public placeholderLabel;\n\n    /**\n     * Sets/gets the `id` of the switch component.\n     * If not set, the `id` of the first switch component will be `\"igx-switch-0\"`.\n     *\n     * @example\n     * ```html\n     * <igx-switch id=\"my-first-switch\"></igx-switch>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input() public id = `igx-switch-${nextId++}`;\n    /**\n     * Sets/gets the id of the `label` element of the switch component.\n     * If not set, the label of the first switch component will have value `\"igx-switch-0-label\"`.\n     *\n     * @example\n     * ```html\n     * <igx-switch labelId=\"Label1\"></igx-switch>\n     * ```\n     */\n    @Input() public labelId = `${this.id}-label`;\n    /**\n     * Sets/gets the `value` attribute of the switch component.\n     *\n     * @example\n     * ```html\n     * <igx-switch [value]=\"switchValue\"></igx-switch>\n     * ```\n     */\n    @Input() public value: any;\n    /**\n     * Sets/gets the `name` attribute of the switch component.\n     *\n     * @example\n     * ```html\n     * <igx-switch name=\"Switch1\"></igx-switch>\n     * ```\n     */\n    @Input() public name: string;\n    /**\n     * Sets/gets the value of the `tabindex` attribute.\n     *\n     * @example\n     * ```html\n     * <igx-switch [tabindex]=\"1\"></igx-switch>\n     * ```\n     */\n    @Input() public tabindex: number = null;\n    /**\n     * Sets/gets the position of the `label` in the switch component.\n     * If not set, `labelPosition` will have value `\"after\"`.\n     *\n     * @example\n     * ```html\n     * <igx-switch labelPosition=\"before\"></igx-switch>\n     * ```\n     */\n    @Input() public labelPosition: SwitchLabelPosition | string = 'after';\n    /**\n     * Enables/Disables the ripple effect\n     * If not set, `disableRipple` will have value `false`.\n     *\n     * @example\n     * ```html\n     * <igx-switch [disableRipple]=\"true\"></igx-switch>\n     * ```\n     */\n    @Input() public disableRipple = false;\n    /**\n     * Sets/gets whether switch is required.\n     * If not set, `required` will have value `false`.\n     *\n     * @example\n     * ```html\n     * <igx-switch [required]=\"true\"></igx-switch>\n     * ```\n     */\n    @Input() public required = false;\n    /**\n     * Sets/gets the `aria-labelledBy` attribute.\n     * If not set, the  value of `aria-labelledBy` will be equal to the value of `labelId` attribute.\n     *\n     * @example\n     * ```html\n     * <igx-switch aria-labelledby = \"Label1\"></igx-switch>\n     * ```\n     */\n    @Input('aria-labelledby')\n    public ariaLabelledBy = this.labelId;\n    /**\n     * Sets/gets the value of the `aria-label` attribute.\n     *\n     * @example\n     * ```html\n     * <igx-switch aria-label=\"Label1\"></igx-switch>\n     * ```\n     */\n    @Input('aria-label')\n    public ariaLabel: string | null = null;\n    /**\n     * An event that is emitted after the switch state is changed.\n     * Provides references to the `IgxSwitchComponent` and the `checked` property as event arguments.\n     */\n    @Output()\n    readonly change: EventEmitter<IChangeSwitchEventArgs> = new EventEmitter<IChangeSwitchEventArgs>();\n    /**\n     * @hidden\n     * @internal\n     */\n    private _onTouchedCallback: () => void = noop;\n    /**\n     * @hidden\n     * @internal\n     */\n    private _onChangeCallback: (_: any) => void = noop;\n    /**\n     * Returns the class of the switch component.\n     *\n     * @example\n     * ```typescript\n     * let switchClass = this.switch.cssClass;\n     * ```\n     */\n    @HostBinding('class.igx-switch')\n    public cssClass = 'igx-switch';\n    /**\n     * Sets/gets whether the switch is on or off.\n     * Default value is 'false'.\n     *\n     * @example\n     * ```html\n     *  <igx-switch [checked]=\"true\"></igx-switch>\n     * ```\n     */\n    @HostBinding('class.igx-switch--checked')\n    @Input() public checked = false;\n    /**\n     * Sets/gets the `disabled` attribute.\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     * <igx-switch [disabled]=\"true\"><igx-switch>\n     * ```\n     */\n    @HostBinding('class.igx-switch--disabled')\n    @Input() public disabled = false;\n    /**\n     * Sets/gets whether the switch component is on focus.\n     * Default value is `false`.\n     *\n     * @example\n     * ```typescript\n     * this.switch.focused = true;\n     * ```\n     */\n    @HostBinding('class.igx-switch--focused')\n    public focused = false;\n    /**\n     * @hidden\n     * @internal\n     */\n    public inputId = `${this.id}-input`;\n    /**\n     * Toggles the checked state of the switch.\n     *\n     * @example\n     * ```typescript\n     * this.switch.toggle();\n     * ```\n     */\n    public toggle() {\n        if (this.disabled) {\n            return;\n        }\n\n        this.checked = !this.checked;\n        this.focused = false;\n        this.change.emit({ checked: this.checked, switch: this });\n        this._onChangeCallback(this.checked);\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public _onSwitchChange(event) {\n        event.stopPropagation();\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public _onSwitchClick(event) {\n        event.stopPropagation();\n        this.toggle();\n\n        if (isIE()) {\n            this.nativeCheckbox.nativeElement.blur();\n        }\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public _onLabelClick(event) {\n        this.toggle();\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public onFocus(event) {\n        this.focused = true;\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public onBlur(event) {\n        this.focused = false;\n        this._onTouchedCallback();\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public writeValue(value) {\n        this._value = value;\n        this.checked = !!this._value;\n    }\n    /**\n     * @hidden\n     * @internal\n     * */\n    public getEditElement() {\n        return this.nativeCheckbox.nativeElement;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get labelClass(): string {\n        switch (this.labelPosition) {\n            case SwitchLabelPosition.BEFORE:\n                return `${this.cssClass}__label--before`;\n            case SwitchLabelPosition.AFTER:\n            default:\n                return `${this.cssClass}__label`;\n        }\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public registerOnChange(fn: (_: any) => void) { this._onChangeCallback = fn; }\n    /**\n     * @hidden\n     * @internal\n     */\n    public registerOnTouched(fn: () => void) { this._onTouchedCallback = fn; }\n}\n\nexport const IGX_SWITCH_REQUIRED_VALIDATOR: Provider = {\n    provide: NG_VALIDATORS,\n    useExisting: forwardRef(() => IgxSwitchRequiredDirective),\n    multi: true\n};\n\n/* tslint:disable directive-selector */\n@Directive({\n    selector: `igx-switch[required][formControlName],\n    igx-switch[required][formControl],\n    igx-switch[required][ngModel]`,\n    providers: [IGX_SWITCH_REQUIRED_VALIDATOR]\n})\nexport class IgxSwitchRequiredDirective extends CheckboxRequiredValidator { }\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxSwitchComponent, IgxSwitchRequiredDirective],\n    exports: [IgxSwitchComponent, IgxSwitchRequiredDirective],\n    imports: [IgxRippleModule]\n})\nexport class IgxSwitchModule { }\n","import { Component, Input, TemplateRef, HostBinding, ElementRef } from '@angular/core';\nimport { SliderHandle } from '../slider.common';\n\n@Component({\n    selector: 'igx-thumb-label',\n    templateUrl: 'thumb-label.component.html'\n})\nexport class IgxThumbLabelComponent {\n    private _active: boolean;\n\n    @Input()\n    public value: number;\n\n    @Input()\n    public templateRef: TemplateRef<any>;\n\n    @Input()\n    public context: any;\n\n    @Input()\n    public type: SliderHandle;\n\n    @Input()\n    public continuous: boolean;\n\n    @Input()\n    public deactiveState: boolean;\n\n    @HostBinding('class.igx-slider__label-from')\n    public get thumbFromClass() {\n        return this.type === SliderHandle.FROM;\n    }\n\n    @HostBinding('class.igx-slider__label-to')\n    public get thumbToClass() {\n        return this.type === SliderHandle.TO;\n    }\n\n    @HostBinding('class.igx-slider__label-from--active')\n    public get thumbFromActiveClass() {\n        return this.type === SliderHandle.FROM && this.active;\n    }\n\n    @HostBinding('class.igx-slider__label-to--active')\n    public get thumbToActiveClass() {\n        return this.type === SliderHandle.TO && this.active;\n    }\n\n    constructor(private _elementRef: ElementRef) { }\n\n    public get nativeElement() {\n        return this._elementRef.nativeElement;\n    }\n\n    public get active() {\n        return this._active;\n    }\n\n    public set active(val: boolean) {\n        if (this.continuous || this.deactiveState) {\n            this._active = false;\n        } else {\n            this._active = val;\n        }\n    }\n}\n","import { Component, Input, TemplateRef, HostBinding } from '@angular/core';\nimport { TicksOrientation, TickLabelsOrientation } from '../slider.common';\n\n/**\n * @hidden\n */\n@Component({\n    selector: 'igx-ticks',\n    templateUrl: 'ticks.component.html',\n})\nexport class IgxTicksComponent {\n    @Input()\n    public primaryTicks: number;\n\n    @Input()\n    public secondaryTicks: number;\n\n    @Input()\n    public primaryTickLabels: boolean;\n\n    @Input()\n    public secondaryTickLabels: boolean;\n\n    @Input()\n    public ticksOrientation: TicksOrientation;\n\n    @Input()\n    public tickLabelsOrientation: TickLabelsOrientation;\n\n    @Input()\n    public maxValue: number;\n\n    @Input()\n    public minValue: number;\n\n    @Input()\n    public labelsViewEnabled: boolean;\n\n    @Input()\n    public labels: Array<number | string | boolean | null | undefined>;\n\n    @Input()\n    public tickLabelTemplateRef: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-slider__ticks')\n    public ticksClass = true;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-slider__ticks--top')\n    public get ticksTopClass() {\n        return this.ticksOrientation === TicksOrientation.Top;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-slider__ticks--tall')\n    public get hasPrimaryClass() {\n        return this.primaryTicks > 0;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-slider__tick-labels--top-bottom')\n    public get labelsTopToBottomClass() {\n        return this.tickLabelsOrientation === TickLabelsOrientation.TopToBottom;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-slider__tick-labels--bottom-top')\n    public get labelsBottomToTopClass() {\n        return this.tickLabelsOrientation === TickLabelsOrientation.BottomToTop;\n    }\n\n    /**\n     * Returns the template context corresponding to\n     * {@link IgxTickLabelTemplateDirective}\n     *\n     * ```typescript\n     * return {\n     *  $implicit //returns the value per each tick label.\n     *  isPrimery //returns if the tick is primary.\n     *  labels // returns the {@link labels} collection.\n     *  index // returns the index per each tick of the whole sequence.\n     * }\n     * ```\n     *\n     * @param idx the index per each tick label.\n     */\n    public context(idx: number): any {\n        return {\n            $implicit: this.tickLabel(idx),\n            isPrimary: this.isPrimary(idx),\n            labels: this.labels,\n            index: idx\n        };\n    }\n\n    /**\n     * @hidden\n     */\n    public get ticksLength() {\n        return this.primaryTicks > 0 ?\n                ((this.primaryTicks - 1) * this.secondaryTicks) + this.primaryTicks :\n                this.secondaryTicks > 0 ? this.secondaryTicks : 0;\n    }\n\n    public hiddenTickLabels(idx: number) {\n        return this.isPrimary(idx) ? this.primaryTickLabels : this.secondaryTickLabels;\n    }\n\n    /**\n     * @hidden\n     */\n    public isPrimary(idx: number) {\n        return this.primaryTicks <= 0 ? false :\n            idx % (this.secondaryTicks + 1) === 0;\n    }\n\n    /**\n     * @hidden\n     */\n    public tickLabel(idx: number) {\n        if (this.labelsViewEnabled) {\n            return this.labels[idx];\n        }\n\n        const labelStep = (Math.max(this.minValue, this.maxValue) - Math.min(this.minValue, this.maxValue)) / (this.ticksLength - 1);\n        const labelVal = labelStep * idx;\n\n        return (this.minValue + labelVal).toFixed(2);\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n    name: 'spreadTickLabels'\n})\nexport class IgxTickLabelsPipe implements PipeTransform {\n\n\n    public transform(labels: Array<string | number | boolean | null | undefined>, secondaryTicks: number) {\n        if (!labels) {\n            return;\n        }\n\n        const result = [];\n        labels.forEach(item => {\n            result.push(item);\n            for (let i = 0; i < secondaryTicks; i++) {\n                result.push('');\n            }\n        });\n\n        return result;\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    AfterViewInit, Component, ElementRef, EventEmitter,\n    HostBinding, Input, NgModule, OnInit, Output, Renderer2,\n    ViewChild,\n    TemplateRef,\n    ContentChild,\n    OnDestroy,\n    HostListener,\n    ViewChildren,\n    QueryList,\n    ChangeDetectorRef,\n    OnChanges,\n    NgZone,\n    AfterContentInit\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR, FormsModule } from '@angular/forms';\nimport { EditorProvider } from '../core/edit-provider';\nimport { IgxSliderThumbComponent } from './thumb/thumb-slider.component';\nimport { Subject, merge, Observable, timer, pipe } from 'rxjs';\nimport { takeUntil, throttleTime } from 'rxjs/operators';\nimport { SliderHandle,\n    IgxThumbFromTemplateDirective,\n    IgxThumbToTemplateDirective,\n    IRangeSliderValue,\n    IgxSliderType,\n    ISliderValueChangeEventArgs,\n    TicksOrientation,\n    TickLabelsOrientation,\n    IgxTickLabelTemplateDirective\n} from './slider.common';\nimport { IgxThumbLabelComponent } from './label/thumb-label.component';\nimport { IgxTicksComponent } from './ticks/ticks.component';\nimport { IgxTickLabelsPipe } from './ticks/tick.pipe';\nimport { resizeObservable } from '../core/utils';\n\nconst noop = () => {\n};\n\nlet NEXT_ID = 0;\n\n/**\n * **Ignite UI for Angular Slider** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/slider.html)\n *\n * The Ignite UI Slider allows selection in a given range by moving the thumb along the track. The track\n * can be defined as continuous or stepped, and you can choose between single and range slider types.\n *\n * Example:\n * ```html\n * <igx-slider id=\"slider\"\n *            [minValue]=\"0\" [maxValue]=\"100\"\n *            [continuous]=true [(ngModel)]=\"volume\">\n * </igx-slider>\n * ```\n */\n@Component({\n    providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: IgxSliderComponent, multi: true }],\n    selector: 'igx-slider',\n    templateUrl: 'slider.component.html'\n})\nexport class IgxSliderComponent implements\n    ControlValueAccessor,\n    EditorProvider,\n    OnInit,\n    AfterViewInit,\n    AfterContentInit,\n    OnChanges,\n    OnDestroy {\n\n    // Limit handle travel zone\n    private _pMin = 0;\n    private _pMax = 1;\n\n    // From/upperValue in percent values\n    private _hasViewInit = false;\n    private _minValue = 0;\n    private _maxValue = 100;\n    private _lowerBound?: number;\n    private _upperBound?: number;\n    private _lowerValue?: number;\n    private _upperValue?: number;\n    private _continuous = false;\n    private _disabled = false;\n    private _step = 1;\n    private _value: number | IRangeSliderValue = 0;\n\n    // ticks\n    private _primaryTicks = 0;\n    private _secondaryTicks = 0;\n\n    private _labels = new Array<number|string|boolean|null|undefined>();\n    private _type = IgxSliderType.SLIDER;\n\n    private _destroyer$ = new Subject<boolean>();\n    private _indicatorsDestroyer$ = new Subject<boolean>();\n    private _indicatorsTimer: Observable<any>;\n\n    private _onChangeCallback: (_: any) => void = noop;\n    private _onTouchedCallback: () => void = noop;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('ticks', { static: true })\n    private ticks: ElementRef;\n\n    /**\n     * @hidden\n     */\n    @ViewChildren(IgxSliderThumbComponent)\n    private thumbs: QueryList<IgxSliderThumbComponent> = new QueryList<IgxSliderThumbComponent>();\n\n    /**\n     * @hidden\n     */\n    @ViewChildren(IgxThumbLabelComponent)\n    private labelRefs: QueryList<IgxThumbLabelComponent> = new QueryList<IgxThumbLabelComponent>();\n\n    private get thumbFrom(): IgxSliderThumbComponent {\n        return this.thumbs.find(thumb => thumb.type === SliderHandle.FROM);\n    }\n\n    private get thumbTo(): IgxSliderThumbComponent {\n        return this.thumbs.find(thumb => thumb.type === SliderHandle.TO);\n    }\n\n    private get labelFrom(): IgxThumbLabelComponent {\n        return this.labelRefs.find(label => label.type === SliderHandle.FROM);\n    }\n\n    private get labelTo(): IgxThumbLabelComponent {\n        return this.labelRefs.find(label => label.type === SliderHandle.TO);\n    }\n\n    /**\n     * @hidden\n     */\n    @ViewChild('track', { static: true })\n    public trackRef: ElementRef;\n\n    /**\n     * @hidden\n     */\n    public stepDistance = this._step;\n\n    /**\n     * @hidden\n     */\n    public onPan: Subject<number> = new Subject<number>();\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxThumbFromTemplateDirective, { read: TemplateRef })\n    public thumbFromTemplateRef: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxThumbToTemplateDirective, { read: TemplateRef })\n    public thumbToTemplateRef: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxTickLabelTemplateDirective, { read: TemplateRef, static: false })\n    public tickLabelTemplateRef: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n    @HostBinding(`attr.role`)\n    public role = 'slider';\n\n    /**\n     * @hidden\n     */\n    @HostBinding(`attr.aria-valuemin`)\n    public get valuemin() {\n        return this.minValue;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding(`attr.aria-valuemax`)\n    public get valuemax() {\n        return this.maxValue;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding(`attr.aria-readonly`)\n    public get readonly() {\n        return this.disabled;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-slider')\n    public slierClass = true;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-slider--disabled')\n    public get disabledClass() {\n        return this.disabled;\n    }\n\n    /**\n     * An @Input property that sets the value of the `id` attribute.\n     * If not provided it will be automatically generated.\n     * ```html\n     * <igx-slider [id]=\"'igx-slider-32'\" [(ngModel)]=\"task.percentCompleted\" [step]=\"5\" [lowerBound]=\"20\">\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-slider-${NEXT_ID++}`;\n\n    /**\n     * An @Input property that gets the type of the `IgxSliderComponent`.\n     * The slider can be IgxSliderType.SLIDER(default) or IgxSliderType.RANGE.\n     * ```typescript\n     * @ViewChild(\"slider2\")\n     * public slider: IgxSliderComponent;\n     * ngAfterViewInit(){\n     *     let type = this.slider.type;\n     * }\n     */\n    @Input()\n    public get type() {\n        return this._type;\n    }\n\n    /**\n     * An @Input property that sets the type of the `IgxSliderComponent`.\n     * The slider can be IgxSliderType.SLIDER(default) or IgxSliderType.RANGE.\n     * ```typescript\n     * sliderType: IgxSliderType = IgxSliderType.RANGE;\n     * ```\n     * ```html\n     * <igx-slider #slider2 [type]=\"sliderType\" [(ngModel)]=\"rangeValue\" [minValue]=\"0\" [maxValue]=\"100\">\n     * ```\n     */\n    public set type(type: IgxSliderType) {\n        this._type = type;\n\n        if (type === IgxSliderType.SLIDER) {\n            this.lowerValue = 0;\n        }\n\n        if (this.labelsViewEnabled && this.upperValue > this.maxValue) {\n            this.upperValue = this.labels.length - 1;\n        }\n\n        if (this._hasViewInit) {\n            this.updateTrack();\n        }\n    }\n\n    /**\n     *An @Input property that sets the duration visibility of thumbs labels. The default value is 750 milliseconds.\n     *```html\n     *<igx-slider #slider [thumbLabelVisibilityDuration]=\"3000\" [(ngModel)]=\"task.percentCompleted\" [step]=\"5\">\n     *```\n     */\n    @Input()\n    public thumbLabelVisibilityDuration = 750;\n\n\n    /**\n     * Enables `labelView`, by accepting a collection of primitive values with more than one element.\n     * Each element will be equally spread over the slider and it will serve as a thumb label.\n     * Once the property is set, it will precendence over {@link maxValue}, {@link minValue}, {@link step}.\n     * This means that the manipulation for those properties won't be allowed.\n     */\n    @Input()\n    public get labels() {\n        return this._labels;\n    }\n\n    public set labels(labels: Array<number|string|boolean|null|undefined>) {\n        this._labels = labels;\n\n        this._pMax = this.valueToFraction(this.upperBound, 0, 1);\n        this._pMin = this.valueToFraction(this.lowerBound, 0, 1);\n\n        this.stepDistance = this.calculateStepDistance();\n        this.positionHandlersAndUpdateTrack();\n\n        if (this._hasViewInit) {\n            this.setTickInterval();\n        }\n    }\n\n    /**\n     * Returns the template context corresponding\n     * to {@link IgxThumbFromTemplateDirective} and {@link IgxThumbToTemplateDirective} templates.\n     *\n     * ```typescript\n     * return {\n     *  $implicit // returns the value of the label,\n     *  labels // returns the labels collection the user has passed.\n     * }\n     * ```\n     */\n    public get context(): any {\n        return {\n            $implicit: this.value,\n            labels: this.labels\n        };\n    }\n\n    /**\n     * An @Input property that sets the incremental/decremental step of the value when dragging the thumb.\n     * The default step is 1, and step should not be less or equal than 0.\n     * ```html\n     * <igx-slider #slider [(ngModel)]=\"task.percentCompleted\" [step]=\"5\">\n     * ```\n     */\n    @Input()\n    public set step(step: number) {\n        this._step = step;\n\n        this.stepDistance = this.calculateStepDistance();\n        if (this._hasViewInit) {\n            this.normalizeByStep(this.value);\n            this.setTickInterval();\n        }\n    }\n\n    /**\n     * Returns the incremental/decremental dragging step of the {@link IgxSliderComponent}.\n     * ```typescript\n     * @ViewChild(\"slider2\")\n     * public slider: IgxSliderComponent;\n     * ngAfterViewInit(){\n     *     let step = this.slider.step;\n     * }\n     * ```\n     */\n    public get step() {\n        return this.labelsViewEnabled ? 1 : this._step;\n    }\n\n    /**\n     * Returns if the {@link IgxSliderComponent} is disabled.\n     * ```typescript\n     * @ViewChild(\"slider2\")\n     * public slider: IgxSliderComponent;\n     * ngAfterViewInit(){\n     *     let isDisabled = this.slider.disabled;\n     * }\n     * ```\n     */\n    @Input()\n    public get disabled(): boolean {\n        return this._disabled;\n    }\n\n    /**\n     *An @Input property that disables or enables UI interaction.\n     *```html\n     *<igx-slider #slider [disabled]=\"'true'\" [(ngModel)]=\"task.percentCompleted\" [step]=\"5\" [lowerBound]=\"20\">\n     *```\n     */\n    public set disabled(disable: boolean) {\n        this._disabled = disable;\n\n        if (this._hasViewInit) {\n            this.changeThumbFocusableState(disable);\n        }\n    }\n\n    /**\n     * Returns if the {@link IgxSliderComponent} is set as continuous.\n     * ```typescript\n     * @ViewChild(\"slider2\")\n     * public slider: IgxSliderComponent;\n     * ngAfterViewInit(){\n     *     let continuous = this.slider.continuous;\n     * }\n     * ```\n     */\n    @Input()\n    public get continuous(): boolean {\n        return this._continuous;\n    }\n\n    /**\n     * An @Input property that marks the {@link IgxSliderComponent} as continuous.\n     * By default is considered that the {@link IgxSliderComponent} is discrete.\n     * Discrete {@link IgxSliderComponent} does not have ticks and does not show bubble labels for values.\n     * ```html\n     * <igx-slider #slider [continuous]=\"'true'\" [(ngModel)]=\"task.percentCompleted\" [step]=\"5\" [lowerBound]=\"20\">\n     * ```\n     */\n    public set continuous(continuous: boolean) {\n        this._continuous = continuous;\n        if (this._hasViewInit) {\n            this.setTickInterval();\n        }\n    }\n\n    /**\n     *Returns the minimal value of the `IgxSliderComponent`.\n     *```typescript\n     *@ViewChild(\"slider2\")\n     *public slider: IgxSliderComponent;\n     *ngAfterViewInit(){\n     *    let sliderMin = this.slider.minValue;\n     *}\n     *```\n     */\n    public get minValue(): number {\n        if (this.labelsViewEnabled) {\n            return 0;\n        }\n\n        return this._minValue;\n    }\n\n    /**\n     * Sets the minimal value for the `IgxSliderComponent`.\n     * The default minimal value is 0.\n     * ```html\n     * <igx-slider [type]=\"sliderType\" [minValue]=\"56\" [maxValue]=\"100\">\n     * ```\n     */\n    @Input()\n    public set minValue(value: number) {\n        if (value >= this.maxValue) {\n            return;\n        } else {\n            this._minValue = value;\n        }\n\n        if (value > this.upperBound) {\n            this.updateUpperBoundAndMaxTravelZone();\n            this.lowerBound = value;\n        }\n\n        // Refresh min travel zone limit.\n        this._pMin = 0;\n        // Recalculate step distance.\n        this.stepDistance = this.calculateStepDistance();\n        this.positionHandlersAndUpdateTrack();\n        if (this._hasViewInit) {\n            this.setTickInterval();\n        }\n    }\n\n        /**\n     * Returns the maximum value for the {@link IgxSliderComponent}.\n     * ```typescript\n     *@ViewChild(\"slider\")\n     *public slider: IgxSliderComponent;\n     *ngAfterViewInit(){\n     *    let sliderMax = this.slider.maxValue;\n     *}\n     * ```\n     */\n    public get maxValue(): number {\n        return this.labelsViewEnabled ?\n            this.labels.length - 1 :\n            this._maxValue;\n    }\n\n    /**\n     * Sets the maximal value for the `IgxSliderComponent`.\n     * The default maximum value is 100.\n     * ```html\n     * <igx-slider [type]=\"sliderType\" [minValue]=\"56\" [maxValue]=\"256\">\n     * ```\n     */\n    @Input()\n    public set maxValue(value: number) {\n        if (value <= this._minValue) {\n            return;\n        } else {\n            this._maxValue = value;\n        }\n\n        if (value < this.lowerBound) {\n            this.updateLowerBoundAndMinTravelZone();\n            this.upperBound = value;\n        }\n\n        // refresh max travel zone limits.\n        this._pMax = 1;\n        // recalculate step distance.\n        this.stepDistance = this.calculateStepDistance();\n        this.positionHandlersAndUpdateTrack();\n        if (this._hasViewInit) {\n            this.setTickInterval();\n        }\n    }\n\n    /**\n     * Returns the lower boundary of the `IgxSliderComponent`.\n     *```typescript\n     *@ViewChild(\"slider\")\n     *public slider: IgxSliderComponent;\n     *ngAfterViewInit(){\n     *    let sliderLowBound = this.slider.lowerBound;\n     *}\n     *```\n     */\n    public get lowerBound(): number {\n        if (!Number.isNaN(this._lowerBound) && this._lowerBound !== undefined) {\n            return this.valueInRange(this._lowerBound, this.minValue, this.maxValue);\n        }\n\n        return this.minValue;\n    }\n\n    /**\n     * Sets the lower boundary of the `IgxSliderComponent`.\n     * If not set is the same as min value.\n     * ```html\n     * <igx-slider [step]=\"5\" [lowerBound]=\"20\">\n     * ```\n     */\n    @Input()\n    public set lowerBound(value: number) {\n        if (value >= this.upperBound || (this.labelsViewEnabled && value < 0)) {\n            return;\n        }\n\n        this._lowerBound = this.valueInRange(value, this.minValue, this.maxValue);\n\n        // Refresh min travel zone.\n        this._pMin = this.valueToFraction(this._lowerBound, 0, 1);\n        this.positionHandlersAndUpdateTrack();\n    }\n\n    /**\n     * Returns the upper boundary of the `IgxSliderComponent`.\n     * ```typescript\n     *@ViewChild(\"slider\")\n     *public slider: IgxSliderComponent;\n     *ngAfterViewInit(){\n     *    let sliderUpBound = this.slider.upperBound;\n     *}\n     * ```\n     */\n    public get upperBound(): number {\n        if (!Number.isNaN(this._upperBound) && this._upperBound !== undefined) {\n            return this.valueInRange(this._upperBound, this.minValue, this.maxValue);\n        }\n\n        return this.maxValue;\n    }\n\n    /**\n     * Sets the upper boundary of the `IgxSliderComponent`.\n     * If not set is the same as max value.\n     * ```html\n     * <igx-slider [step]=\"5\" [upperBound]=\"20\">\n     * ```\n     */\n    @Input()\n    public set upperBound(value: number) {\n        if (value <= this.lowerBound || (this.labelsViewEnabled && value > this.labels.length - 1)) {\n            return;\n        }\n\n        this._upperBound = this.valueInRange(value, this.minValue, this.maxValue);\n        // Refresh time travel zone.\n        this._pMax = this.valueToFraction(this._upperBound, 0, 1);\n        this.positionHandlersAndUpdateTrack();\n    }\n\n    /**\n     * Returns the slider value. If the slider is of type {@link IgxSliderType.SLIDER} the returned value is number.\n     * If the slider type is {@link IgxSliderType.RANGE}.\n     * The returned value represents an object of {@link lowerValue} and {@link upperValue}.\n     *```typescript\n     *@ViewChild(\"slider2\")\n     *public slider: IgxSliderComponent;\n     *public sliderValue(event){\n     *    let sliderVal = this.slider.value;\n     *}\n     *```\n     */\n    public get value(): number | IRangeSliderValue {\n        if (this.isRange) {\n            return {\n                lower: this.valueInRange(this.lowerValue, this.lowerBound, this.upperBound),\n                upper: this.valueInRange(this.upperValue, this.lowerBound, this.upperBound)\n            };\n        } else {\n            return this.valueInRange(this.upperValue, this.lowerBound, this.upperBound);\n        }\n    }\n\n    /**\n     * Sets the slider value.\n     * If the slider is of type {@link IgxSliderType.SLIDER}.\n     * The argument is number. By default the {@link value} gets the {@link lowerBound}.\n     * If the slider type is {@link IgxSliderType.RANGE} the argument\n     * represents an object of {@link lowerValue} and {@link upperValue} properties.\n     * By default the object is associated with the {@link lowerBound} and {@link upperBound} property values.\n     * ```typescript\n     *rangeValue = {\n     *   lower: 30,\n     *   upper: 60\n     *};\n     * ```\n     * ```html\n     * <igx-slider [type]=\"sliderType\" [(ngModel)]=\"rangeValue\" [minValue]=\"56\" [maxValue]=\"256\">\n     * ```\n     */\n    @Input()\n    public set value(value: number | IRangeSliderValue) {\n        if (this._hasViewInit) {\n            this.setValue(value);\n            this.positionHandlersAndUpdateTrack();\n        } else {\n            this._value = value;\n        }\n    }\n\n    /**\n     * Returns the number of the presented primary ticks.\n     * ```typescript\n     * const primaryTicks = this.slider.primaryTicks;\n     * ```\n     */\n    @Input()\n    public get primaryTicks() {\n        if (this.labelsViewEnabled) {\n            return this._primaryTicks = this.labels.length;\n        }\n        return this._primaryTicks;\n    }\n\n    /**\n     * Sets the number of primary ticks. If {@link @labels} is enabled, this property won't function.\n     * Insted enable ticks by {@link showTicks} property.\n     * ```typescript\n     * this.slider.primaryTicks = 5;\n     * ```\n     */\n    public set primaryTicks(val: number) {\n        if (val <= 1) {\n            return;\n        }\n\n        this._primaryTicks = val;\n    }\n\n    /**\n     * Returns the number of the presented secondary ticks.\n     * ```typescript\n     * const secondaryTicks = this.slider.secondaryTicks;\n     * ```\n     */\n    @Input()\n    public get secondaryTicks() {\n        return this._secondaryTicks;\n    }\n\n    /**\n     * Sets the number of secondary ticks. The property functions even when {@link labels} is enabled,\n     * but all secondary ticks won't present any tick labels.\n     * ```typescript\n     * this.slider.secondaryTicks = 5;\n     * ```\n     */\n    public set secondaryTicks(val: number) {\n        if (val < 1 ) {\n            return;\n        }\n\n        this._secondaryTicks = val;\n    }\n\n    /**\n     * Show/hide slider ticks\n     * ```html\n     * <igx-slier [showTicks]=\"true\" [primaryTicks]=\"5\"></igx-slier>\n     * ```\n     */\n    @Input()\n    public showTicks = false;\n\n    /**\n     * show/hide primary tick labels\n     * ```html\n     * <igx-slider [primaryTicks]=\"5\" [primaryTickLabels]=\"false\"></igx-slider>\n     * ```\n     */\n    @Input()\n    public primaryTickLabels = true;\n\n    /**\n     * show/hide secondary tick labels\n     * ```html\n     * <igx-slider [secondaryTicks]=\"5\" [secondaryTickLabels]=\"false\"></igx-slider>\n     * ```\n     */\n    @Input()\n    public secondaryTickLabels = true;\n\n    /**\n     * Changes ticks orientation:\n     * bottom - The default orienation, below the slider track.\n     * top - Above the slider track\n     * mirror - combines top and bottom orientation.\n     * ```html\n     * <igx-slider [primaryTicks]=\"5\" [ticksOrientation]=\"ticksOrientation\"></igx-slider>\n     * ```\n     */\n    @Input()\n    public ticksOrientation: TicksOrientation = TicksOrientation.Bottom;\n\n    /**\n     * Changes tick labels rotation:\n     * horizontal - The default rotation\n     * toptobottom - Rotates tick labels vertically to 90deg\n     * bottomtotop - Rotate tick labels vertically to -90deg\n     * ```html\n     * <igx-slider [primaryTicks]=\"5\" [secondaryTicks]=\"3\" [tickLabelsOrientation]=\"tickLabelsOrientaiton\"></igx-slider>\n     * ```\n     */\n    @Input()\n    public tickLabelsOrientation = TickLabelsOrientation.Horizontal;\n\n    /**\n     * @hidden\n     */\n    public get deactivateThumbLabel() {\n        return ((this.primaryTicks && this.primaryTickLabels) || (this.secondaryTicks && this.secondaryTickLabels)) &&\n            (this.ticksOrientation === TicksOrientation.Top || this.ticksOrientation === TicksOrientation.Mirror);\n    }\n\n    /**\n     * This event is emitted every time the value is changed.\n     * ```typescript\n     * public change(event){\n     *    alert(\"The value has been changed!\");\n     *}\n     * ```\n     * ```html\n     * <igx-slider (onValueChange)=\"change($event)\" #slider [(ngModel)]=\"task.percentCompleted\" [step]=\"5\">\n     * ```\n     */\n    @Output()\n    public onValueChange = new EventEmitter<ISliderValueChangeEventArgs>();\n\n    /**\n     * This event is emitted at the end of every slide interaction.\n     * ```typescript\n     * public change(event){\n     *    alert(\"The value has been changed!\");\n     *}\n     * ```\n     * ```html\n     * <igx-slider (onValueChanged)=\"change($event)\" #slider [(ngModel)]=\"task.percentCompleted\" [step]=\"5\">\n     * ```\n     */\n    @Output()\n    public onValueChanged = new EventEmitter<number | IRangeSliderValue>();\n\n\n    constructor(\n        private renderer: Renderer2,\n        private _el: ElementRef,\n        private _cdr: ChangeDetectorRef,\n        private _ngZone: NgZone) { }\n\n    /**\n     * @hidden\n     */\n    @HostListener('pointerdown', ['$event'])\n    public onPointerDown($event: PointerEvent) {\n        this.findClosestThumb($event);\n\n        if (!this.thumbTo.isActive && this.thumbFrom === undefined) {\n            return;\n        }\n\n        const activeThumb = this.thumbTo.isActive ? this.thumbTo : this.thumbFrom;\n        activeThumb.nativeElement.setPointerCapture($event.pointerId);\n        this.showSliderIndicators();\n\n        $event.preventDefault();\n    }\n\n\n    /**\n     * @hidden\n     */\n    @HostListener('pointerup', ['$event'])\n    public onPointerUp($event: PointerEvent) {\n        if (!this.thumbTo.isActive && this.thumbFrom === undefined) {\n            return;\n        }\n\n        const activeThumb = this.thumbTo.isActive ? this.thumbTo : this.thumbTo;\n        activeThumb.nativeElement.releasePointerCapture($event.pointerId);\n\n        this.hideSliderIndicators();\n        this.onValueChanged.emit(this.value);\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('focus')\n    public onFocus() {\n        this.toggleSliderIndicators();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('pan', ['$event'])\n    public onPanListener($event) {\n        this.update($event.srcEvent.clientX);\n    }\n\n    /**\n     *Returns whether the `IgxSliderComponent` type is RANGE.\n     *```typescript\n     *@ViewChild(\"slider\")\n     *public slider: IgxSliderComponent;\n     *ngAfterViewInit(){\n     *    let sliderRange = this.slider.isRange;\n     *}\n     * ```\n     */\n    public get isRange(): boolean {\n        return this.type === IgxSliderType.RANGE;\n    }\n\n    /**\n     * Returns the lower value of the `IgxSliderComponent`.\n     * ```typescript\n     * @ViewChild(\"slider\")\n     * public slider: IgxSliderComponent;\n     * public lowValue(event){\n     *    let sliderLowValue = this.slider.lowerValue;\n     *}\n     *```\n     */\n    public get lowerValue(): number {\n        if (!Number.isNaN(this._lowerValue) && this._lowerValue !== undefined && this._lowerValue >= this.lowerBound) {\n            return this._lowerValue;\n        }\n\n        return this.lowerBound;\n    }\n\n    /**\n     *Sets the lower value of the `IgxSliderComponent`.\n     *```typescript\n     *@ViewChild(\"slider2\")\n     *public slider: IgxSliderComponent;\n     *public lowValue(event){\n     *    this.slider.lowerValue = 120;\n     *}\n     *```\n     */\n    public set lowerValue(value: number) {\n        value = this.valueInRange(value, this.lowerBound, this.upperBound);\n        this._lowerValue = value;\n\n    }\n\n    /**\n     *Returns the upper value of the `IgxSliderComponent`.\n     *```typescript\n     *@ViewChild(\"slider2\")\n     *public slider: IgxSliderComponent;\n     *public upperValue(event){\n     *    let upperValue = this.slider.upperValue;\n     *}\n     *```\n     */\n    public get upperValue() {\n        if (!Number.isNaN(this._upperValue) && this._upperValue !== undefined && this._upperValue <= this.upperBound) {\n            return this._upperValue;\n        }\n\n        return this.upperBound;\n    }\n\n    /**\n     *Sets the upper value of the `IgxSliderComponent`.\n     *```typescript\n     *@ViewChild(\"slider2\")\n     *public slider: IgxSliderComponent;\n     *public upperValue(event){\n     *    this.slider.upperValue = 120;\n     *}\n     *```\n     */\n    public set upperValue(value: number) {\n        value = this.valueInRange(value, this.lowerBound, this.upperBound);\n        this._upperValue = value;\n    }\n\n    /**\n     * Returns the value corresponding the lower label.\n     *```typescript\n     * @ViewChild(\"slider\")\n     * public slider: IgxSliderComponent;\n     * let label = this.slider.lowerLabel;\n     *```\n     */\n    public get lowerLabel() {\n        return this.labelsViewEnabled ?\n            this.labels[this.lowerValue] :\n            this.lowerValue;\n    }\n\n    /**\n     * Returns the value corresponding the upper label.\n     *```typescript\n     * @ViewChild(\"slider\")\n     * public slider: IgxSliderComponent;\n     * let label = this.slider.upperLabel;\n     *```\n     */\n    public get upperLabel() {\n        return this.labelsViewEnabled ?\n            this.labels[this.upperValue] :\n            this.upperValue;\n    }\n\n    /**\n     * Returns if label view is enabled.\n     * If the {@link labels} is set, the view is automatically activated.\n     *```typescript\n     * @ViewChild(\"slider\")\n     * public slider: IgxSliderComponent;\n     * let labelView = this.slider.labelsViewEnabled;\n     *```\n     */\n    public get labelsViewEnabled(): boolean {\n        return !!(this.labels && this.labels.length > 1);\n    }\n\n    /**\n     * @hidden\n     */\n    public get showTopTicks() {\n        return this.ticksOrientation === TicksOrientation.Top ||\n            this.ticksOrientation === TicksOrientation.Mirror;\n    }\n\n    /**\n     * @hidden\n     */\n    public get showBottomTicks() {\n        return this.ticksOrientation === TicksOrientation.Bottom ||\n            this.ticksOrientation === TicksOrientation.Mirror;\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        this.sliderSetup();\n\n        // Set track travel zone\n        this._pMin = this.valueToFraction(this.lowerBound) || 0;\n        this._pMax = this.valueToFraction(this.upperBound) || 1;\n    }\n\n    public ngOnChanges(changes) {\n        if (changes.minValue && changes.maxValue &&\n                changes.minValue.currentValue < changes.maxValue.currentValue) {\n            this._maxValue = changes.maxValue.currentValue;\n            this._minValue = changes.minValue.currentValue;\n        }\n    }\n\n    public ngAfterContentInit() {\n        this.setValue(this._value);\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterViewInit() {\n        this._hasViewInit = true;\n        this.positionHandlersAndUpdateTrack();\n        this.setTickInterval();\n        this.changeThumbFocusableState(this.disabled);\n\n        this.subscribeTo(this.thumbFrom, this.thumbChanged.bind(this));\n        this.subscribeTo(this.thumbTo, this.thumbChanged.bind(this));\n\n        this.thumbs.changes.pipe(takeUntil(this._destroyer$)).subscribe(change => {\n            const thumbFrom = change.find((thumb: IgxSliderThumbComponent) => thumb.type === SliderHandle.FROM);\n            this.positionHandler(thumbFrom, null, this.lowerValue);\n            this.subscribeTo(thumbFrom, this.thumbChanged.bind(this));\n            this.changeThumbFocusableState(this.disabled);\n        });\n\n        this.labelRefs.changes.pipe(takeUntil(this._destroyer$)).subscribe(change => {\n            const labelFrom = this.labelRefs.find((label: IgxThumbLabelComponent) => label.type === SliderHandle.FROM);\n            this.positionHandler(null, labelFrom, this.lowerValue);\n        });\n\n        this._ngZone.runOutsideAngular(() => {\n            resizeObservable(this._el.nativeElement).pipe(\n                throttleTime(40),\n                takeUntil(this._destroyer$)).subscribe(() => this._ngZone.run( () => {\n                    this.stepDistance = this.calculateStepDistance();\n                }));\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this._destroyer$.next(true);\n        this._destroyer$.complete();\n\n        this._indicatorsDestroyer$.next(true);\n        this._indicatorsDestroyer$.complete();\n    }\n\n    /**\n     * @hidden\n     */\n    public writeValue(value: IRangeSliderValue | number): void {\n        if (!value) {\n            return;\n        }\n\n        this.normalizeByStep(value);\n    }\n\n    /**\n     * @hidden\n     */\n    public registerOnChange(fn: any): void {\n        this._onChangeCallback = fn;\n    }\n\n    /**\n     * @hidden\n     */\n    public registerOnTouched(fn: any): void {\n        this._onTouchedCallback = fn;\n    }\n\n    /** @hidden */\n     public getEditElement() {\n        return this.isRange ? this.thumbFrom.nativeElement : this.thumbTo.nativeElement;\n    }\n\n    /**\n     *\n     * @hidden\n     */\n    public update(mouseX) {\n        if (this.disabled) {\n            return;\n        }\n\n        // Update To/From Values\n        this.onPan.next(mouseX);\n\n        // Finally do positionHandlersAndUpdateTrack the DOM\n        // based on data values\n        this.positionHandlersAndUpdateTrack();\n        this._onTouchedCallback();\n    }\n\n    /**\n     * @hidden\n     */\n    public thumbChanged(value: number, thumbType: number) {\n        const oldValue = this.value;\n\n        let newVal: IRangeSliderValue;\n        if (this.isRange) {\n            if (thumbType === SliderHandle.FROM) {\n                newVal = {\n                    lower: (this.value as IRangeSliderValue).lower + value,\n                    upper: (this.value as IRangeSliderValue).upper\n                };\n            } else {\n                newVal = {\n                    lower: (this.value as IRangeSliderValue).lower,\n                    upper: (this.value as IRangeSliderValue).upper + value\n                };\n            }\n\n            // Swap the thumbs if a collision appears.\n            if (newVal.lower >= newVal.upper) {\n                this.value = this.swapThumb(newVal);\n            } else {\n                this.value = newVal;\n            }\n\n        } else {\n            this.value = this.value as number + value;\n        }\n\n        if (this.hasValueChanged(oldValue)) {\n            this.emitValueChanged(oldValue);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public onThumbChange() {\n        this.toggleSliderIndicators();\n    }\n\n    /**\n     * @hidden\n     */\n    public onHoverChange(state: boolean) {\n        return state ? this.showSliderIndicators() : this.hideSliderIndicators();\n    }\n\n\n\n    private swapThumb(value: IRangeSliderValue) {\n        if (this.thumbFrom.isActive) {\n            value.upper = this.upperValue;\n            value.lower = this.upperValue;\n        } else {\n            value.upper = this.lowerValue;\n            value.lower = this.lowerValue;\n        }\n\n        this.toggleThumb();\n        return value;\n    }\n\n    private findClosestThumb(event: PointerEvent) {\n        if (this.isRange) {\n            this.closestHandle(event);\n        } else {\n            this.thumbTo.nativeElement.focus();\n        }\n\n        this.update(event.clientX);\n    }\n\n    private updateLowerBoundAndMinTravelZone() {\n        this.lowerBound = this.minValue;\n        this._pMin = 0;\n    }\n\n    private updateUpperBoundAndMaxTravelZone() {\n        this.upperBound = this.maxValue;\n        this._pMax = 1;\n    }\n\n    private sliderSetup() {\n        /**\n         * if {@link SliderType.SLIDER} than the initial value shold be the lowest one.\n         */\n        if (!this.isRange && this._upperValue === undefined) {\n            this._upperValue = this.lowerBound;\n        }\n    }\n\n    private calculateStepDistance() {\n        return this._el.nativeElement.getBoundingClientRect().width / (this.maxValue - this.minValue) * this.step;\n    }\n\n    private toggleThumb() {\n        return this.thumbFrom.isActive ?\n            this.thumbTo.nativeElement.focus() :\n            this.thumbFrom.nativeElement.focus();\n    }\n\n    private valueInRange(value, min = 0, max = 100) {\n        return Math.max(Math.min(value, max), min);\n    }\n\n    private generateTickMarks(color: string, interval: number) {\n        return interval !== null ? `repeating-linear-gradient(\n            ${'to left'},\n            ${color},\n            ${color} 1.5px,\n            transparent 1.5px,\n            transparent ${interval}%\n        ), repeating-linear-gradient(\n            ${'to right'},\n            ${color},\n            ${color} 1.5px,\n            transparent 1.5px,\n            transparent ${interval}%\n        )` : interval;\n    }\n\n    private positionHandler(thumbHandle: ElementRef, labelHandle: ElementRef, position: number) {\n        const positionLeft = `${this.valueToFraction(position) * 100}%`;\n\n        if (thumbHandle) {\n            thumbHandle.nativeElement.style.left = positionLeft;\n        }\n\n        if (labelHandle) {\n            labelHandle.nativeElement.style.left = positionLeft;\n        }\n    }\n\n    private positionHandlersAndUpdateTrack() {\n        if (!this.isRange) {\n            this.positionHandler(this.thumbTo, this.labelTo, this.value as number);\n        } else {\n            this.positionHandler(this.thumbTo, this.labelTo, (this.value as IRangeSliderValue).upper);\n            this.positionHandler(this.thumbFrom, this.labelFrom, (this.value as IRangeSliderValue).lower);\n        }\n\n        if (this._hasViewInit) {\n            this.updateTrack();\n        }\n    }\n\n    private closestHandle(event: PointerEvent) {\n        const fromOffset = this.thumbFrom.nativeElement.offsetLeft + this.thumbFrom.nativeElement.offsetWidth / 2;\n        const toOffset = this.thumbTo.nativeElement.offsetLeft + this.thumbTo.nativeElement.offsetWidth / 2;\n        const xPointer = event.clientX - this._el.nativeElement.getBoundingClientRect().left;\n        const match = this.closestTo(xPointer, [fromOffset, toOffset]);\n\n        if (fromOffset === toOffset && toOffset < xPointer) {\n            this.thumbTo.nativeElement.focus();\n        } else if (fromOffset === toOffset && toOffset > xPointer ) {\n            this.thumbFrom.nativeElement.focus();\n        } else if (match === fromOffset) {\n            this.thumbFrom.nativeElement.focus();\n        } else {\n            this.thumbTo.nativeElement.focus();\n        }\n    }\n\n    private setTickInterval() {\n        let interval;\n        const trackProgress = 100;\n        if (this.labelsViewEnabled) {\n            // Calc ticks depending on the labels length;\n            interval = ((trackProgress / (this.labels.length - 1) * 10)) / 10;\n        } else {\n            const trackRange = this.maxValue - this.minValue;\n            interval = this.step > 1 ?\n                (trackProgress / ((trackRange / this.step)) * 10) / 10\n                : null;\n        }\n\n        const renderCallbackExecution = !this.continuous ? this.generateTickMarks('white', interval) : null;\n        this.renderer.setStyle(this.ticks.nativeElement, 'background', renderCallbackExecution);\n    }\n\n    private showSliderIndicators() {\n        if (this.disabled) {\n            return;\n        }\n\n        if (this._indicatorsTimer) {\n            this._indicatorsDestroyer$.next(true);\n            this._indicatorsTimer = null;\n        }\n\n        this.thumbTo.showThumbIndicators();\n        this.labelTo.active = true;\n        if (this.thumbFrom) {\n            this.thumbFrom.showThumbIndicators();\n        }\n\n        if (this.labelFrom) {\n            this.labelFrom.active = true;\n        }\n\n    }\n\n    private hideSliderIndicators() {\n        if (this.disabled) {\n            return;\n        }\n\n        this._indicatorsTimer = timer(this.thumbLabelVisibilityDuration);\n        this._indicatorsTimer.pipe(takeUntil(this._indicatorsDestroyer$)).subscribe(() => {\n            this.thumbTo.hideThumbIndicators();\n            this.labelTo.active = false;\n            if (this.thumbFrom) {\n                this.thumbFrom.hideThumbIndicators();\n            }\n\n            if (this.labelFrom) {\n                this.labelFrom.active = false;\n            }\n        });\n    }\n\n    private toggleSliderIndicators() {\n        this.showSliderIndicators();\n        this.hideSliderIndicators();\n    }\n\n    private changeThumbFocusableState(state: boolean) {\n        const value = state ? -1 : 1;\n\n        if (this.isRange) {\n            this.thumbFrom.tabindex = value;\n        }\n\n        this.thumbTo.tabindex = value;\n\n        this._cdr.detectChanges();\n    }\n\n    private closestTo(goal: number, positions: number[]): number {\n        return positions.reduce((previous, current) => {\n            return (Math.abs(goal - current) < Math.abs(goal - previous) ? current : previous);\n        });\n    }\n\n    private valueToFraction(value: number, pMin = this._pMin, pMax = this._pMax) {\n        return this.valueInRange((value - this.minValue) / (this.maxValue - this.minValue), pMin, pMax);\n    }\n\n    /**\n     * @hidden\n     * Normaliz the value when two-way data bind is used and {@link this.step} is set.\n     * @param value\n     */\n    private normalizeByStep(value: IRangeSliderValue | number) {\n        if (this.isRange) {\n            this.value =  {\n                lower: (value as IRangeSliderValue).lower - ((value as IRangeSliderValue).lower % this.step),\n                upper: (value as IRangeSliderValue).upper - ((value as IRangeSliderValue).upper % this.step)\n            };\n        } else {\n            this.value = (value as number) - ((value as number) % this.step);\n        }\n    }\n\n    private updateTrack() {\n        const fromPosition = this.valueToFraction(this.lowerValue);\n        const toPosition = this.valueToFraction(this.upperValue);\n        const positionGap = toPosition - fromPosition;\n\n        let trackLeftIndention = fromPosition;\n        if (this.isRange) {\n            if (positionGap) {\n                trackLeftIndention = Math.round((1 / positionGap * fromPosition) * 100);\n            }\n\n            this.renderer.setStyle(this.trackRef.nativeElement, 'transform', `scaleX(${positionGap}) translateX(${trackLeftIndention}%)`);\n        } else {\n            this.renderer.setStyle(this.trackRef.nativeElement, 'transform', `scaleX(${toPosition})`);\n        }\n    }\n\n    private validateInitialValue(value: IRangeSliderValue) {\n        if (value.lower < this.lowerBound && value.upper < this.lowerBound) {\n            value.upper = this.lowerBound;\n            value.lower = this.lowerBound;\n        }\n\n        if (value.lower > this.upperBound && value.upper > this.upperBound) {\n            value.upper = this.upperBound;\n            value.lower = this.upperBound;\n        }\n\n        if (value.upper < value.lower) {\n            value.upper = this.upperValue;\n            value.lower = this.lowerValue;\n        }\n\n        return value;\n    }\n\n    private subscribeTo(thumb: IgxSliderThumbComponent, callback: (a: number, b: number) => void) {\n        if (!thumb) {\n            return;\n        }\n\n        thumb.onThumbValueChange\n            .pipe(takeUntil(this.unsubscriber(thumb)))\n            .subscribe(value => callback(value, thumb.type));\n    }\n\n    private unsubscriber(thumb: IgxSliderThumbComponent) {\n        return merge(this._destroyer$, thumb.destroy);\n    }\n\n    private hasValueChanged(oldValue) {\n        const isSliderWithDifferentValue: boolean = !this.isRange && oldValue !== this.value;\n        const isRangeWithOneDifferentValue: boolean = this.isRange &&\n            ((oldValue as IRangeSliderValue).lower !== (this.value as IRangeSliderValue).lower ||\n                (oldValue as IRangeSliderValue).upper !== (this.value as IRangeSliderValue).upper);\n\n        return isSliderWithDifferentValue || isRangeWithOneDifferentValue;\n    }\n\n    public setValue(value: number | IRangeSliderValue) {\n        if (!this.isRange) {\n            this.upperValue = value as number - (value as number % this.step);\n        } else {\n            value = this.validateInitialValue(value as IRangeSliderValue);\n            this.upperValue = (value as IRangeSliderValue).upper;\n            this.lowerValue = (value as IRangeSliderValue).lower;\n        }\n\n        this._onChangeCallback(this.value);\n    }\n\n    private emitValueChanged(oldValue: number | IRangeSliderValue) {\n        this.onValueChange.emit({ oldValue, value: this.value });\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxSliderComponent,\n        IgxThumbFromTemplateDirective,\n        IgxThumbToTemplateDirective,\n        IgxTickLabelTemplateDirective,\n        IgxSliderThumbComponent,\n        IgxThumbLabelComponent,\n        IgxTicksComponent,\n        IgxTickLabelsPipe],\n    exports: [\n        IgxSliderComponent,\n        IgxThumbFromTemplateDirective,\n        IgxThumbToTemplateDirective,\n        IgxTickLabelTemplateDirective,\n        IgxSliderThumbComponent,\n        IgxThumbLabelComponent,\n        IgxTicksComponent],\n    imports: [CommonModule, FormsModule]\n})\nexport class IgxSliderModule {\n}\n","import {\n    AnimationEvent,\n    transition,\n    trigger,\n    useAnimation\n} from '@angular/animations';\nimport { CommonModule } from '@angular/common';\nimport {\n    Component,\n    EventEmitter,\n    HostBinding,\n    Input,\n    NgModule,\n    NgZone,\n    Output\n} from '@angular/core';\nimport { fadeIn, fadeOut, slideInBottom, slideOutBottom } from '../animations/main';\n\nlet NEXT_ID = 0;\n/**\n * **Ignite UI for Angular Snackbar** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/snackbar.html)\n *\n * The Ignite UI Snack Bar provides feedback about an operation with a single-line message, which can\n * include a link to an action such as Undo.\n *\n * Example:\n * ```html\n * <button (click)=\"snackbar.show()\">Send message</button>\n * <div>\n *   <igx-snackbar #snackbar message=\"Message sent\">\n *   </igx-snackbar>\n * </div>\n * ```\n */\n@Component({\n    animations: [\n        trigger('slideInOut', [\n            transition('void => *', [\n                useAnimation(slideInBottom, {\n                    params: {\n                        duration: '.35s',\n                        easing: 'cubic-bezier(0.0, 0.0, 0.2, 1)',\n                        fromPosition: 'translateY(100%)',\n                        toPosition: 'translateY(0)'\n                    }\n                })\n            ]),\n            transition('* => void', [\n                useAnimation(slideOutBottom, {\n                    params: {\n                        duration: '.2s',\n                        easing: 'cubic-bezier(0.4, 0.0, 1, 1)',\n                        fromPosition: 'translateY(0)',\n                        toOpacity: 1,\n                        toPosition: 'translateY(100%)'\n                    }\n                })\n            ])\n        ]),\n        trigger('fadeInOut', [\n            transition('void => *', [\n                useAnimation(fadeIn, {\n                    params: {\n                        duration: '.35s',\n                        easing: 'ease-out'\n                    }\n                })\n            ]),\n            transition('* => void', [\n                useAnimation(fadeOut, {\n                    params: {\n                        duration: '.2s',\n                        easing: 'ease-out'\n                    }\n                })\n            ])\n        ])\n    ],\n    selector: 'igx-snackbar',\n    templateUrl: 'snackbar.component.html',\n    styles: [`\n        :host {\n            display: block;\n        }\n    `]\n})\nexport class IgxSnackbarComponent {\n\n    /**\n     * Sets/gets the `id` of the snackbar.\n     * If not set, the `id` of the first snackbar component  will be `\"igx-snackbar-0\"`;\n     * ```html\n     * <igx-snackbar id = \"Snackbar1\"></igx-snackbar>\n     * ```\n     * ```typescript\n     * let snackbarId = this.snackbar.id;\n     * ```\n     * @memberof IgxSnackbarComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-snackbar-${NEXT_ID++}`;\n    /**\n     * Sets/gets the `message` attribute.\n     * ```html\n     * <igx-snackbar [message] = \"'Snackbar Component'\"></igx-snackbar>\n     * ```\n     * ```typescript\n     * let message =  this.snackbar.message;\n     * ```\n     */\n    @Input() public message: string;\n\n    /**\n     * Enables/Disables the visibility of the snackbar.\n     * If not set, the `isVisible` attribute will have value `false`.\n     * ```html\n     * <igx-snackbar [isVisible] = \"true\"></igx-snackbar>\n     * ```\n     * ```typescript\n     * let isVisible =  this.snackbar.isVisible;\n     * ```\n     */\n    @Input() public isVisible = false;\n\n    /**\n     * Sets/gets if the snackbar will be automatically hidden after the `displayTime` is over.\n     * Default value is `true`.\n     * ```html\n     * <igx-snackbar [autoHide] = \"false\"></igx-snackbar>\n     * ```\n     * ```typescript\n     * let autoHide =  this.snackbar.autoHide;\n     * ```\n     */\n    @Input() public autoHide = true;\n\n    /**\n     * Sets/gets the duration of time(in milliseconds) in which the snackbar will be visible after it is being shown.\n     * Default value is 4000.\n     * ```html\n     * <igx-snackbar [displayTime] = \"2000\"></igx-snackbar>\n     * ```\n     * ```typescript\n     * let displayTime = this.snackbar.displayTime;\n     * ```\n     */\n    @Input() public displayTime = 4000;\n\n    /**\n     * Sets/gets the `actionText` attribute.\n     * ```html\n     * <igx-snackbar [actionText] = \"'Action Text'\"></igx-snackbar>\n     * ```\n     */\n    @Input() public actionText?: string;\n\n    /**\n     * An event that will be emitted when the action is executed.\n     * Provides reference to the `IgxSnackbarComponent` as an argument.\n     * ```html\n     * <igx-snackbar (onAction) = \"onAction($event)\"></igx-snackbar>\n     * ```\n     */\n    @Output() public onAction = new EventEmitter<IgxSnackbarComponent>();\n\n    /**\n     * An event that will be emitted when the snackbar animation starts.\n     * Provides reference to the `AnimationEvent` interface as an argument.\n     * ```html\n     * <igx-snackbar (animationStarted) = \"animationStarted($event)\"></igx-snackbar>\n     * ```\n     */\n    @Output() public animationStarted = new EventEmitter<AnimationEvent>();\n\n    /**\n     * An event that will be emitted when the snackbar animation ends.\n     * Provides reference to the `AnimationEvent` interface as an argument.\n     * ```html\n     * <igx-snackbar (animationDone) = \"animationDone($event)\"></igx-snackbar>\n     * ```\n     */\n    @Output() public animationDone = new EventEmitter<AnimationEvent>();\n    /**\n     *@hidden\n     */\n    private timeoutId;\n\n    constructor(private zone: NgZone) { }\n\n    /**\n     * Shows the snackbar and hides it after the `displayTime` is over if `autoHide` is set to `true`.\n     * ```typescript\n     * this.snackbar.show();\n     * ```\n     */\n    public show(): void {\n        clearTimeout(this.timeoutId);\n        setTimeout(this.timeoutId);\n        this.isVisible = true;\n\n        if (this.autoHide) {\n            this.timeoutId = setTimeout(() => {\n                this.hide();\n            }, this.displayTime);\n        }\n    }\n\n    /**\n     * Hides the snackbar.\n     * ```typescript\n     * this.snackbar.hide();\n     * ```\n     */\n    public hide(): void {\n        this.isVisible = false;\n        clearTimeout(this.timeoutId);\n    }\n    /**\n     *@hidden\n     */\n    public triggerAction(): void {\n        this.onAction.emit(this);\n    }\n    /**\n     *@hidden\n     * @memberof IgxSnackbarComponent\n     */\n    public snackbarAnimationStarted(evt: AnimationEvent): void {\n        if (evt.fromState === 'void') {\n            this.animationStarted.emit(evt);\n        }\n    }\n    /**\n     *@hidden\n     * @memberof IgxSnackbarComponent\n     */\n    public snackbarAnimationDone(evt: AnimationEvent): void {\n        if (evt.fromState === 'show') {\n            this.animationDone.emit(evt);\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxSnackbarComponent],\n    exports: [IgxSnackbarComponent],\n    imports: [CommonModule]\n})\nexport class IgxSnackbarModule { }\n","import {\n    Directive,\n    HostBinding,\n    TemplateRef\n} from '@angular/core';\nimport { IgxTabsBase } from './tabs.common';\n\nenum ButtonStyle {\n    VISIBLE = 'visible',\n    HIDDEN = 'hidden',\n    NOT_DISPLAYED = 'not_displayed'\n}\n\n@Directive({\n    selector: '[igxRightButtonStyle]'\n})\n\nexport class IgxRightButtonStyleDirective {\n    constructor(public tabs: IgxTabsBase) {\n    }\n\n    @HostBinding('class.igx-tabs__header-button')\n    get visibleCSS(): boolean {\n        return (this.getRightButtonStyle() === ButtonStyle.VISIBLE) ? true : false;\n    }\n\n    @HostBinding('class.igx-tabs__header-button--hidden')\n    get hiddenCSS(): boolean {\n        return (this.getRightButtonStyle() === ButtonStyle.HIDDEN) ? true : false;\n    }\n\n    @HostBinding('class.igx-tabs__header-button--none')\n    get notDisplayedCSS(): boolean {\n        return (this.getRightButtonStyle() === ButtonStyle.NOT_DISPLAYED) ? true : false;\n    }\n\n    private getRightButtonStyle(): string {\n        const viewPortWidth = this.tabs.viewPort.nativeElement.offsetWidth;\n\n        // We use this hacky way to get the width of the itemsContainer,\n        // because there is inconsistency in IE we cannot use offsetWidth or scrollOffset.\n        const itemsContainerChildrenCount = this.tabs.itemsContainer.nativeElement.children.length;\n        let itemsContainerWidth = 0;\n        if (itemsContainerChildrenCount > 1) {\n            const lastTab = this.tabs.itemsContainer.nativeElement.children[itemsContainerChildrenCount - 2];\n            itemsContainerWidth = lastTab.offsetLeft + lastTab.offsetWidth;\n        }\n        const headerContainerWidth = this.tabs.headerContainer.nativeElement.offsetWidth;\n        const offset = this.tabs.offset;\n        const total = offset + viewPortWidth;\n\n        // Fix for IE 11, a difference is accumulated from the widths calculations.\n        if (itemsContainerWidth - headerContainerWidth <= 1 && offset === 0) {\n            return ButtonStyle.NOT_DISPLAYED;\n        }\n\n        if (itemsContainerWidth > total) {\n            return ButtonStyle.VISIBLE;\n        } else {\n            return ButtonStyle.HIDDEN;\n        }\n    }\n}\n\n@Directive({\n    selector: '[igxLeftButtonStyle]'\n})\n\nexport class IgxLeftButtonStyleDirective {\n    constructor(public tabs: IgxTabsBase) {\n    }\n\n    @HostBinding('class.igx-tabs__header-button')\n    get visibleCSS(): boolean {\n        return (this.getLeftButtonStyle() === ButtonStyle.VISIBLE) ? true : false;\n    }\n\n    @HostBinding('class.igx-tabs__header-button--hidden')\n    get hiddenCSS(): boolean {\n        return (this.getLeftButtonStyle() === ButtonStyle.HIDDEN) ? true : false;\n    }\n\n    @HostBinding('class.igx-tabs__header-button--none')\n    get notDisplayedCSS(): boolean {\n        return (this.getLeftButtonStyle() === ButtonStyle.NOT_DISPLAYED) ? true : false;\n    }\n\n    private getLeftButtonStyle(): string {\n        // We use this hacky way to get the width of the itemsContainer,\n        // because there is inconsistency in IE we cannot use offsetWidth or scrollOffset.\n        const itemsContainerChildrenCount = this.tabs.itemsContainer.nativeElement.children.length;\n        let itemsContainerWidth = 0;\n        if (itemsContainerChildrenCount > 1) {\n            const lastTab = this.tabs.itemsContainer.nativeElement.children[itemsContainerChildrenCount - 2];\n            itemsContainerWidth = lastTab.offsetLeft + lastTab.offsetWidth;\n        }\n        const headerContainerWidth = this.tabs.headerContainer.nativeElement.offsetWidth;\n        const offset = this.tabs.offset;\n        if (offset === 0) {\n            // Fix for IE 11, a difference is accumulated from the widths calculations.\n            if (itemsContainerWidth - headerContainerWidth <= 1) {\n                return ButtonStyle.NOT_DISPLAYED;\n            }\n            return ButtonStyle.HIDDEN;\n        } else {\n            return ButtonStyle.VISIBLE;\n        }\n    }\n}\n\n@Directive({\n    selector: '[igxTab]'\n})\nexport class IgxTabItemTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) {\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    AfterContentInit,\n    AfterViewInit,\n    Component,\n    ContentChild,\n    ContentChildren,\n    Directive,\n    ElementRef,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    HostListener,\n    Input,\n    NgModule,\n    Output,\n    QueryList,\n    TemplateRef,\n    ViewChild,\n    ViewChildren,\n    OnDestroy\n} from '@angular/core';\nimport { IgxBadgeModule } from '../badge/badge.component';\nimport { IgxIconModule } from '../icon/index';\nimport { IBaseEventArgs } from '../core/utils';\nimport { Subscription } from 'rxjs';\n\nexport interface ISelectTabEventArgs extends IBaseEventArgs {\n    tab: IgxTabComponent;\n    panel: IgxTabPanelComponent;\n}\n\nlet NEXT_ID = 0;\n\n@Directive({\n    selector: '[igxTab]'\n})\nexport class IgxTabTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) {\n    }\n}\n/**\n * **Ignite UI for Angular Tab Bar** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/tabbar.html)\n *\n * The Ignite UI Tab Bar enables the user to navigate among a number of content panels displayed in a single view.\n *\n * Example:\n * ```html\n * <igx-bottom-nav>\n *   <igx-tab-panel label=\"Tab 1\">Tab 1 Content</igx-tab-panel>\n *   <igx-tab-panel label=\"Tab 2\">Tab 2 Content</igx-tab-panel>\n *   <igx-tab-panel label=\"Tab 3\">Tab 3 Content</igx-tab-panel>\n * </igx-bottom-nav>\n * ```\n */\n@Component({\n    selector: 'igx-bottom-nav',\n    templateUrl: 'tab-bar-content.component.html',\n    styles: [`\n        :host {\n            display: block;\n        }\n    `]\n})\nexport class IgxBottomNavComponent implements AfterViewInit, OnDestroy {\n    private _currentBottomNavId = NEXT_ID++;\n    private _panelsChanges$: Subscription;\n\n    /**\n     * Gets the `IgxTabComponent` elements in the tab bar component created based on the provided panels.\n     * ```typescript\n     * let tabs: QueryList<IgxTabComponent> =  this.tabBar.viewTabs;\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    @ViewChildren(forwardRef(() => IgxTabComponent))\n    public viewTabs: QueryList<IgxTabComponent>;\n\n    /**\n     * Gets the `IgxTabComponent` elements in the tab bar component defined as content child.\n     * ```typescript\n     * let tabs: QueryList<IgxTabComponent> =  this.tabBar.contentTabs;\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    @ContentChildren(forwardRef(() => IgxTabComponent))\n    public contentTabs: QueryList<IgxTabComponent>;\n\n    /**\n     * Gets the `IgxTabComponent` elements for this bottom navigation component.\n     * First try to get them as content children if not available get them as view children.\n     * ```typescript\n     * let tabs: QueryList<IgxTabComponent> =  this.tabBar.tabs;\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    public get tabs(): QueryList<IgxTabComponent> {\n        return this.hasContentTabs ? this.contentTabs : this.viewTabs;\n    }\n\n    /**\n     * Gets the `IgxTabPanelComponent` elements in the tab bar component.\n     * ```typescript\n     * let tabPanels: QueryList<IgxTabPanelComponent> = this.tabBar.panels;\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    @ContentChildren(forwardRef(() => IgxTabPanelComponent))\n    public panels: QueryList<IgxTabPanelComponent>;\n\n    /**\n     * Sets/gets the `id` of the tab bar.\n     * If not set, the `id` of the first tab bar component will be `\"igx-bottom-nav-0\"`.\n     * ```html\n     * <igx-bottom-nav id = \"my-first-tab-bar\"></igx-bottom-nav>\n     * ```\n     * ```typescript\n     * let tabBarId =  this.tabBar.id;\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-bottom-nav-${this._currentBottomNavId}`;\n\n    /**\n     * Emits an event when a new tab is selected.\n     * Provides references to the `IgxTabComponent` and `IgxTabPanelComponent` as event arguments.\n     * ```html\n     * <igx-bottom-nav (onTableSelected) = \"onTabSelected($event)\"><igx-bottom-nav>\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    @Output() public onTabSelected = new EventEmitter<ISelectTabEventArgs>();\n\n    /**\n     * Emits an event when a tab is deselected.\n     * Provides references to the `IgxTabComponent` and `IgxTabPanelComponent` as event arguments.\n     * ```html\n     * <igx-bottom-nav (onTabDeselected) = \"onTabDeselected($event)\"><igx-bottom-nav>\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    @Output() public onTabDeselected = new EventEmitter<ISelectTabEventArgs>();\n\n    /**\n     * Gets the `index` of selected tab/panel in the respective collection.\n     * ```typescript\n     * let index =  this.tabBar.selectedIndex;\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    public selectedIndex = -1;\n\n    /**\n     * Gets the `itemStyle` of the tab bar.\n     * ```typescript\n     * let itemStyle =  this.tabBar.itemStyle;\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    public get itemStyle(): string {\n        return this._itemStyle;\n    }\n\n    /**\n     *@hidden\n     */\n    public get hasContentTabs(): boolean {\n        return (this.contentTabs && this.contentTabs.length > 0);\n    }\n\n    /**\n     *@hidden\n     */\n    private _itemStyle = 'igx-bottom-nav';\n\n    /**\n     * Gets the selected tab in the tab bar.\n     * ```typescript\n     * let tab =  this.tabBar.selectedTab;\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    get selectedTab(): IgxTabComponent {\n        if (this.tabs && this.selectedIndex !== undefined) {\n            return this.tabs.toArray()[this.selectedIndex];\n        }\n    }\n\n    constructor(private _element: ElementRef) {\n    }\n\n    /**\n     *@hidden\n     */\n    public ngAfterViewInit() {\n        this.setPanelsAttributes();\n        this._panelsChanges$ = this.panels.changes.subscribe(() => {\n            this.setPanelsAttributes();\n        });\n\n        // initial selection\n        setTimeout(() => {\n            if (this.selectedIndex === -1) {\n                const selectablePanels = this.panels.filter((p) => !p.disabled);\n                const panel = selectablePanels[0];\n                if (panel) {\n                    panel.select();\n                }\n            }\n        }, 0);\n    }\n\n    /**\n     *@hidden\n     */\n    public ngOnDestroy(): void {\n        if (this._panelsChanges$) {\n            this._panelsChanges$.unsubscribe();\n        }\n    }\n\n    private setPanelsAttributes() {\n        const panelsArray = Array.from(this.panels);\n        for (let index = 0; index < this.panels.length; index++) {\n            const tabPanels = panelsArray[index] as IgxTabPanelComponent;\n            tabPanels.nativeElement.setAttribute('id', this.getTabPanelId(index));\n            tabPanels.nativeElement.setAttribute('aria-labelledby', this.getTabId(index));\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('onTabSelected', ['$event'])\n    public _selectedPanelHandler(args) {\n        if (this.hasContentTabs) {\n            this.selectedIndex = args.tab.index;\n            this.contentTabs.forEach((t) => {\n                if (t !== args.tab) {\n                    this._deselectTab(t);\n                }\n            });\n        } else {\n            if (args.panel) {\n                this.selectedIndex = args.panel.index;\n                this.panels.forEach((p) => {\n                    if (p.index !== this.selectedIndex) {\n                        this._deselectPanel(p);\n                    }\n                });\n            }\n        }\n    }\n\n    /**\n     *@hidden\n     */\n    private _deselectPanel(panel: IgxTabPanelComponent) {\n        // Cannot deselect the selected tab - this will mean that there will be not selected tab left\n        if (panel.disabled || this.selectedTab.index === panel.index) {\n            return;\n        }\n\n        panel.isSelected = false;\n        this.onTabDeselected.emit({ tab: this.tabs[panel.index], panel });\n    }\n\n    private _deselectTab(aTab: IgxTabComponent) {\n        aTab.isSelected = false;\n        this.onTabDeselected.emit({ tab: aTab, panel: null });\n    }\n\n    /**\n     * @hidden\n     */\n    public getTabId(index: number): string {\n        return `igx-tab-${this._currentBottomNavId}-${index}`;\n    }\n\n    /**\n     * @hidden\n     */\n    public getTabPanelId(index: number): string {\n        return `igx-tab-panel-${this._currentBottomNavId}-${index}`;\n    }\n}\n\n// ================================= IgxTabPanelComponent ======================================\n\n@Component({\n    selector: 'igx-tab-panel',\n    templateUrl: 'tab-panel.component.html'\n})\nexport class IgxTabPanelComponent implements AfterContentInit {\n\n    /**\n     *@hidden\n     */\n    private _itemStyle = 'igx-tab-panel';\n\n    /**\n     *@hidden\n     */\n    private _isSelected = false;\n\n    /**\n     * Sets/gets the `label` of the tab panel.\n     * ```html\n     * <igx-tab-panel [label] = \"'Tab panel label'\"><igx-tab-panel>\n     * ```\n     * ```typescript\n     * let tabPanelLabel = this.tabPanel.label;\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    @Input() public label: string;\n\n    /**\n     * Sets/gets  the `icon` of the tab panel.\n     * ```html\n     * <igx-tab-panel [icon] = \"panel_icon\"><igx-tab-panel>\n     * ```\n     * ```typescript\n     * let tabPanelIcon =  this.tabPanel.icon;\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    @Input() public icon: string;\n\n    /**\n     * Sets/gets whether the tab panel is disabled.\n     * ```html\n     * <igx-tab-panel [disabled] = \"true\"><igx-tab-panel>\n     * ```\n     * ```typescript\n     * let isDisabled = this.tabPanel.disabled;\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    @Input() public disabled: boolean;\n\n    /**\n     * Gets the role of the tab panel.\n     * ```typescript\n     * let tabPanelRole = this.tabPanel.role;\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    @HostBinding('attr.role') public role = 'tabpanel';\n\n    /**\n     * Gets whether a tab panel will have `igx-bottom-nav__panel` class.\n     * ```typescript\n     * let styleClass = this.tabPanel.styleClass;\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    @HostBinding('class.igx-bottom-nav__panel')\n    get styleClass(): boolean {\n        return (!this.isSelected);\n    }\n\n    /**\n     * Sets/gets whether a tab panel is selected.\n     * ```typescript\n     * this.tabPanel.isSelected = true;\n     * ```\n     * ```typescript\n     * let isSelected =  this.tabPanel.isSelected;\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    @HostBinding('class.igx-bottom-nav__panel--selected')\n    public get isSelected(): boolean {\n        return this._isSelected;\n    }\n    public set isSelected(newValue: boolean) {\n        if (this._isSelected !== newValue) {\n            if (newValue) {\n                this.select();\n            } else {\n                this._isSelected = newValue;\n            }\n        }\n    }\n\n    /**\n     * Gets the `itemStyle` of the tab panel.\n     * ```typescript\n     * let itemStyle = this.tabPanel.itemStyle;\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    public get itemStyle(): string {\n        return this._itemStyle;\n    }\n\n    /**\n     * Returns the native element of the tab-panel component\n     * ```typescript\n     *  const mytabPanelElement: HTMLElement = tabPanel.nativeElement;\n     * ```\n     */\n    public get nativeElement() {\n        return this._element.nativeElement;\n    }\n\n    /**\n     * Gets the tab associated with the panel.\n     * ```typescript\n     * let tab = this.tabPanel.relatedTab;\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    get relatedTab(): IgxTabComponent {\n        if (this._tabBar.tabs) {\n            return this._tabBar.tabs.toArray()[this.index];\n        }\n    }\n\n    /**\n     * Gets the changes and updates accordingly applied to the tab/panel.\n     *\n     * @memberof IgxTabComponent\n     */\n    get changesCount(): number {\n        return this.relatedTab ? this.relatedTab.changesCount : 0;\n    }\n\n    /**\n     * Gets the index of a panel in the panels collection.\n     * ```typescript\n     * let panelIndex =  this.tabPanel.index\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    get index() {\n        if (this._tabBar.panels) {\n            return this._tabBar.panels.toArray().indexOf(this);\n        }\n    }\n\n    /**\n     * Gets the tab template.\n     * ```typescript\n     * let tabTemplate = this.tabPanel.customTabTemplate\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    get customTabTemplate(): TemplateRef<any> {\n        return this._tabTemplate;\n    }\n\n    /**\n     * Sets the tab template.\n     * ```typescript\n     * this.tabPanel.customTabTemplate(tabTemplate);\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    set customTabTemplate(template: TemplateRef<any>) {\n        this._tabTemplate = template;\n    }\n\n    /**\n     *@hidden\n     */\n    private _tabTemplate: TemplateRef<any>;\n\n    /**\n     *@hidden\n     */\n    @ContentChild(IgxTabTemplateDirective, { read: IgxTabTemplateDirective })\n    protected tabTemplate: IgxTabTemplateDirective;\n\n    constructor(private _tabBar: IgxBottomNavComponent, private _element: ElementRef) {\n    }\n\n    /**\n     *@hidden\n     */\n    public ngAfterContentInit(): void {\n        if (this.tabTemplate) {\n            this._tabTemplate = this.tabTemplate.template;\n        }\n    }\n\n\n    /**\n     * Selects the current tab and the tab panel.\n     * ```typescript\n     * this.tabPanel.select();\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    public select() {\n        if (this.disabled || this._tabBar.selectedIndex === this.index) {\n            return;\n        }\n\n        this._isSelected = true;\n        this._tabBar.onTabSelected.emit({ tab: this._tabBar.tabs.toArray()[this.index], panel: this });\n    }\n}\n\n// ======================================= IgxTabComponent ==========================================\n\n@Component({\n    selector: 'igx-tab',\n    templateUrl: 'tab.component.html'\n})\nexport class IgxTabComponent {\n    /**\n     * Gets the `role` attribute.\n     * ```typescript\n     * let tabRole = this.tab.role;\n     * ```\n     * @memberof IgxTabComponent\n     */\n    @HostBinding('attr.role')\n    public role = 'tab';\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.aria-label')\n    public ariaLabel = this.label;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.aria-disabled')\n    public ariaDisabled = this.disabled;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.aria-selected')\n    public ariaSelected = this.isSelected;\n\n\n    /**\n     * Gets the panel associated with the tab.\n     * ```typescript\n     * let tabPanel =  this.tab.relatedPanel;\n     * ```\n     * @memberof IgxTabComponent\n     */\n    @Input()\n    public relatedPanel: IgxTabPanelComponent;\n\n    /**\n     *@hidden\n     */\n    private _label: string;\n\n    /**\n     * Sets/gets the `label` of the tab panel.\n     * ```html\n     * <igx-tab [label] = \"'Tab label'\"><igx-tab>\n     * ```\n     * ```typescript\n     * let tabLabel = this.tab.label;\n     * ```\n     * @memberof IgxTabComponent\n     */\n    @Input()\n    public get label(): string {\n        return this.relatedPanel ? this.relatedPanel.label : this._label;\n    }\n    public set label(newValue: string) {\n        if (this.relatedPanel) {\n            this.relatedPanel.label = newValue;\n        }\n        this._label = newValue;\n    }\n\n    /**\n     *@hidden\n     */\n    private _icon: string;\n\n    /**\n     * Sets/gets  the `icon` of the tab panel.\n     * ```html\n     * <igx-tab [icon] = \"tab_icon\"><igx-tab>\n     * ```\n     * ```typescript\n     * let tabIcon =  this.tab.icon;\n     * ```\n     * @memberof IgxTabComponent\n     */\n    @Input()\n    public get icon(): string {\n        return this.relatedPanel ? this.relatedPanel.icon : this._icon;\n    }\n    public set icon(newValue: string) {\n        if (this.relatedPanel) {\n            this.relatedPanel.icon = newValue;\n        }\n        this._icon = newValue;\n    }\n\n    /**\n     *@hidden\n     */\n    private _changesCount = 0; // changes and updates accordingly applied to the tab.\n\n    /**\n     * Gets the changes and updates accordingly applied to the tab.\n     *\n     * @memberof IgxTabComponent\n     */\n    get changesCount(): number {\n        return this._changesCount;\n    }\n\n    private _disabled = false;\n\n    /**\n     * Gets whether the tab is disabled.\n     * ```typescript\n     * let isDisabled = this.tab.disabled;\n     * ```\n     * @memberof IgxTabComponent\n     */\n    @Input()\n    get disabled(): boolean {\n        return this.relatedPanel ? this.relatedPanel.disabled : this._disabled;\n    }\n    set disabled(newValue: boolean) {\n        if (this.relatedPanel) {\n            this.relatedPanel.disabled = newValue;\n        } else {\n            this._disabled = newValue;\n        }\n    }\n\n    public _selected = false;\n\n    /**\n     * Gets whether the tab is selected.\n     * ```typescript\n     * let isSelected  = this.tab.isSelected;\n     * ```\n     * @memberof IgxTabComponent\n     */\n    @Input()\n    set isSelected(newValue: boolean) {\n        if (this.relatedPanel) {\n            this.relatedPanel.isSelected = newValue;\n        } else if (this._selected !== newValue) {\n            this._selected = newValue;\n            if (this._selected) {\n                this._tabBar.onTabSelected.emit({ tab: this, panel: null });\n            }\n        }\n    }\n    get isSelected(): boolean {\n        return this.relatedPanel ? this.relatedPanel.isSelected : this._selected;\n    }\n\n    /**\n     * @hidden @internal\n     * Set to true when the tab is automatically generated from the IgxBottomNavComponent when tab panels are defined.\n     */\n    @Input()\n    public autoGenerated: boolean;\n\n    @HostBinding('class.igx-bottom-nav__menu-item--selected')\n    public get cssClassSelected(): boolean {\n        return this.isSelected;\n    }\n\n    @HostBinding('class.igx-bottom-nav__menu-item--disabled')\n    public get cssClassDisabled(): boolean {\n        return this.disabled;\n    }\n\n    @HostBinding('class.igx-bottom-nav__menu-item')\n    public get cssClass(): boolean {\n        return (!this.disabled && !this.isSelected);\n    }\n\n    /**\n     * Gets the `index` of the tab.\n     * ```typescript\n     * let tabIndex = this.tab.index;\n     * ```\n     * @memberof IgxTabComponent\n     */\n    public get index(): number {\n        if (this._tabBar.tabs) {\n            return this._tabBar.tabs.toArray().indexOf(this);\n        }\n    }\n\n    /**@hidden*/\n    @ViewChild('defaultTabTemplate', { read: TemplateRef, static: true })\n    protected defaultTabTemplate: TemplateRef<any>;\n\n    /**@hidden*/\n    @ContentChild(IgxTabTemplateDirective, { read: IgxTabTemplateDirective })\n    protected customTabTemplateDir: IgxTabTemplateDirective;\n\n    /**\n     * Returns the `template` for this IgxTabComponent.\n     * ```typescript\n     * let tabItemTemplate = this.tabItem.template;\n     * ```\n     * @memberof IgxTabComponent\n     */\n    public get template(): TemplateRef<any> {\n        if (this.relatedPanel && this.relatedPanel.customTabTemplate) {\n            return this.relatedPanel.customTabTemplate;\n        }\n        if (this.customTabTemplateDir) {\n            return this.customTabTemplateDir.template;\n        }\n        return this.defaultTabTemplate;\n    }\n\n    /**\n     * Returns the `context` object for the template of this `IgxTabComponent`.\n     * ```typescript\n     * let tabItemContext = this.tabItem.context;\n     * ```\n     */\n    public get context(): any {\n        return this.relatedPanel ? this.relatedPanel : this;\n    }\n\n    constructor(private _tabBar: IgxBottomNavComponent, private _element: ElementRef) {\n    }\n\n    /**\n     * Selects the current tab and the associated panel.\n     * ```typescript\n     * this.tab.select();\n     * ```\n     * @memberof IgxTabComponent\n     */\n    public select() {\n        if (this.relatedPanel) {\n            this.relatedPanel.select();\n        } else {\n            this._selected = true;\n            this._tabBar.onTabSelected.emit({ tab: this, panel: null });\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('click')\n    public onClick() {\n        if (this.autoGenerated) {\n            this.select();\n        }\n    }\n\n    public elementRef(): ElementRef {\n        return this._element;\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxBottomNavComponent, IgxTabPanelComponent, IgxTabComponent, IgxTabTemplateDirective],\n    exports: [IgxBottomNavComponent, IgxTabPanelComponent, IgxTabComponent, IgxTabTemplateDirective],\n    imports: [CommonModule, IgxBadgeModule, IgxIconModule]\n})\nexport class IgxBottomNavModule {\n}\n","import { ElementRef, QueryList, EventEmitter } from '@angular/core';\n\n/** @hidden */\nexport abstract class IgxTabsBase {\n    selectedIndicator: ElementRef<any>;\n    tabs: QueryList<IgxTabItemBase>;\n    groups: QueryList<IgxTabsGroupBase>;\n    offset: number;\n    selectedIndex: number;\n    viewPort: ElementRef;\n    contentsContainer: ElementRef;\n    tabsContainer: ElementRef;\n    itemsContainer: ElementRef;\n    headerContainer: ElementRef;\n    onTabItemSelected: EventEmitter<{}>; // TODO: Define event arg interface!\n    hasContentTabs: boolean;\n    scrollElement(element: any, scrollRight: boolean) {}\n    performSelectionChange(newTab: IgxTabItemBase) {}\n    transformContentAnimation(tab: IgxTabItemBase, duration: number) {}\n    transformIndicatorAnimation(element: HTMLElement, duration?: number) {}\n}\n\n/** @hidden */\nexport abstract class IgxTabItemBase {\n    nativeTabItem: ElementRef;\n    get index(): number { return 0; }\n    select(): void {}\n    setSelectedInternal(newValue: boolean) {}\n}\n\n/** @hidden */\nexport abstract class IgxTabsGroupBase {\n    select(): void {}\n    setSelectedInternal(newValue: boolean) {}\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    AfterViewInit,\n    Component,\n    ContentChildren,\n    ElementRef,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    Input,\n    NgModule,\n    Output,\n    QueryList,\n    ViewChild,\n    ViewChildren,\n    OnDestroy,\n    NgZone\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { IgxBadgeModule } from '../badge/badge.component';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxIconModule } from '../icon/index';\nimport { IgxTabItemComponent } from './tab-item.component';\nimport { IgxTabsGroupComponent } from './tabs-group.component';\nimport { IgxLeftButtonStyleDirective, IgxRightButtonStyleDirective, IgxTabItemTemplateDirective } from './tabs.directives';\nimport { IgxTabsBase, IgxTabItemBase } from './tabs.common';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport { PlatformUtil } from '../core/utils';\n\nexport enum IgxTabsType {\n    FIXED = 'fixed',\n    CONTENTFIT = 'contentfit'\n}\n\nlet NEXT_TABS_ID = 0;\n\n@Component({\n    selector: 'igx-tabs',\n    templateUrl: 'tabs.component.html',\n    providers: [{ provide: IgxTabsBase, useExisting: IgxTabsComponent }]\n})\n\nexport class IgxTabsComponent implements IgxTabsBase, AfterViewInit, OnDestroy {\n    private _currentTabsId = NEXT_TABS_ID++;\n\n    /**\n    * Provides an observable collection of all `IgxTabsGroupComponent`s.\n    * ```typescript\n    * const groupItems = this.myTabComponent.groups;\n    * ```\n    */\n    @ContentChildren(forwardRef(() => IgxTabsGroupComponent))\n    public groups: QueryList<IgxTabsGroupComponent>;\n\n    /**\n    * Provides an observable collection of all `IgxTabItemComponent`s defined in the page.\n    * ```typescript\n    * const tabItems = this.myTabComponent.contentTabs;\n    * ```\n    */\n    @ContentChildren(forwardRef(() => IgxTabItemComponent))\n    public contentTabs: QueryList<IgxTabItemComponent>;\n\n    /**\n    * An @Input property that sets the value of the `selectedIndex`.\n    * Default value is 0.\n    * ```html\n    * <igx-tabs selectedIndex=\"1\">\n    * ```\n    *\n    * Two-way data binding.\n    * ```html\n    * <igx-tabs [(selectedIndex)]=\"model.selectedIndex\">\n    * ```\n    */\n    @Input()\n    public get selectedIndex(): number {\n        return this._selectedIndex;\n    }\n\n    public set selectedIndex(index: number) {\n        const newIndex = typeof index !== 'number' ? parseInt(index, 10) : index;\n        if (this._selectedIndex !== newIndex) {\n            if (this.tabs && this.tabs.length > 0) {\n                const newTab = this.tabs.toArray()[newIndex];\n                if (newTab) {\n                   this.performSelectionChange(newTab);\n                }\n            } else {\n                this._selectedIndex = newIndex;\n            }\n        }\n    }\n\n    /**\n     *@hidden\n     */\n    @Output()\n    public selectedIndexChange = new EventEmitter<number>();\n\n    /**\n     * Defines the tab header sizing mode. You can choose between `contentfit` or `fixed`.\n     * By default the header sizing mode is `contentfit`.\n     * ```html\n     * <igx-tabs type=\"fixed\">\n     *     <igx-tabs-group label=\"HOME\">Home</igx-tabs-group>\n     * </igx-tabs>\n     * ```\n     */\n    @Input('type')\n    public type: string | IgxTabsType = 'contentfit';\n\n    /**\n     * Sets/gets the `id` of the tabs.\n     *\n     * @remarks\n     * If not set, the `id` will have value `\"igx-tabs-0\"`.\n     *\n     * @example\n     * ```html\n     * <igx-tabs id=\"my-first-tabs\"></igx-tabs>\n     * ```\n     * @memberof IgxTabsComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-tabs-${this._currentTabsId}`;\n\n    /**\n     * @hidden\n     */\n    @Input()\n    public class = '';\n\n    /**\n     * Emitted when a tab item is deselected.\n     * ```html\n     * <igx-tabs (onTabItemDeselected)=\"itemDeselected($event)\">\n     *      <igx-tabs-group label=\"Tab 1\">This is Tab 1 content.</igx-tabs-group>\n     *      <igx-tabs-group label=\"Tab 2\">This is Tab 2 content.</igx-tabs-group>\n     * </igx-tabs>\n     * ```\n     * ```typescript\n     * itemDeselected(e){\n     *      const tabGroup = e.group;\n     *      const tabItem = e.tab;\n     * }\n     * ```\n     */\n    @Output()\n    public onTabItemDeselected = new EventEmitter();\n\n    /**\n    * Emitted when a tab item is selected.\n    * ```html\n    * <igx-tabs (onTabItemSelected)=\"itemSelected($event)\">\n    *      <igx-tabs-group label=\"Tab 1\">This is Tab 1 content.</igx-tabs-group>\n    *      <igx-tabs-group label=\"Tab 2\">This is Tab 2 content.</igx-tabs-group>\n    * </igx-tabs>\n    * ```\n    * ```typescript\n    * itemSelected(e){\n    *      const tabGroup = e.group;\n    *      const tabItem = e.tab;\n    * }\n    * ```\n    */\n    @Output()\n    public onTabItemSelected = new EventEmitter();\n\n    /**\n     * @hidden\n     */\n    @ViewChild('contentsContainer', { static: true })\n    public contentsContainer: ElementRef;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('headerContainer', { static: true })\n    public headerContainer: ElementRef;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('itemsContainer', { static: true })\n    public itemsContainer: ElementRef;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('selectedIndicator')\n    public selectedIndicator: ElementRef;\n\n    /**\n    * @hidden\n    */\n    @ViewChild('tabsContainer', { static: true })\n    public tabsContainer: ElementRef;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('viewPort', { static: true })\n    public viewPort: ElementRef;\n\n    /**\n     * Provides an observable collection of all `IgxTabItemComponent`s.\n     * ```typescript\n     * const tabItems = this.myTabComponent.viewTabs;\n     * ```\n     */\n    @ViewChildren(forwardRef(() => IgxTabItemComponent))\n    public viewTabs: QueryList<IgxTabItemComponent>;\n\n    /**\n     * Provides an observable collection of all `IgxTabItemComponent`s.\n     * First try to get them as content children if not available get them as view children.\n     * ```typescript\n     * const tabItems = this.myTabComponent.tabs;\n     * ```\n     */\n    public get tabs(): QueryList<IgxTabItemComponent> {\n        if (this.hasContentTabs) {\n            return this.contentTabs;\n        }\n        return this.viewTabs;\n    }\n\n    /**\n     *@hidden\n     */\n    public get hasContentTabs(): boolean {\n        return (this.contentTabs && this.contentTabs.length > 0);\n    }\n\n    /**\n     * @hidden\n     */\n    public calculatedWidth: number;\n\n    /**\n     * @hidden\n     */\n    public visibleItemsWidth: number;\n\n    /**\n     * @hidden\n     */\n    public offset = 0;\n\n    private _groupChanges$: Subscription;\n    private _selectedIndex = -1;\n    private _resizeObserver: ResizeObserver;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('attr.class')\n    public get cssClass() {\n        const defaultStyle = `igx-tabs`;\n        const fixedStyle = `igx-tabs--fixed`;\n        const iconStyle = `igx-tabs--icons`;\n        const iconLabelFoundInGroups = this.groups.find((group) => group.icon != null && group.label != null);\n        const iconLabelFoundInTabs = this.contentTabs.find((tab) => tab.icon != null && tab.label != null);\n        let css: string;\n        switch (IgxTabsType[this.type.toUpperCase()]) {\n            case IgxTabsType.FIXED: {\n                css = fixedStyle;\n                break;\n            }\n            default: {\n                css = defaultStyle;\n                break;\n            }\n        }\n\n        // Layout fix for items with icons\n        if (iconLabelFoundInGroups !== undefined || iconLabelFoundInTabs !== undefined) {\n            css = `${css} ${iconStyle}`;\n        }\n\n        return `${css} ${this.class}`;\n    }\n\n    /**\n     * @hidden\n     */\n    public scrollLeft(event): void {\n        this.scroll(false);\n    }\n\n    /**\n     * @hidden\n     */\n    public scrollRight(event): void {\n        this.scroll(true);\n    }\n\n    /**\n     * @hidden\n     */\n    public scrollElement(element: any, scrollRight: boolean): void {\n        const viewPortWidth = this.viewPort.nativeElement.offsetWidth;\n\n        this.offset = (scrollRight) ? element.offsetWidth + element.offsetLeft - viewPortWidth : element.offsetLeft;\n        this.itemsContainer.nativeElement.style.transform = `translate(${-this.offset}px)`;\n    }\n\n    /**\n     * Gets the selected `IgxTabItemComponent`.\n     * ```\n     * const selectedItem = this.myTabComponent.selectedTabItem;\n     * ```\n     */\n    get selectedTabItem(): IgxTabItemComponent {\n        if (this.tabs && this.selectedIndex !== undefined) {\n            return this.tabs.toArray()[this.selectedIndex];\n        }\n    }\n\n    constructor(private _element: ElementRef, private _ngZone: NgZone, private platformUtil: PlatformUtil) { }\n\n    /**\n     * @hidden\n     */\n    public ngAfterViewInit() {\n        if (this._selectedIndex === -1) {\n            this.tabs.forEach((t) => {\n                if (t.isSelected) {\n                    this._selectedIndex = t.index;\n                }\n            });\n        }\n\n        if (!this.hasContentTabs && (this.selectedIndex < 0 || this.selectedIndex >= this.groups.length)) {\n            this._selectedIndex = 0;\n        }\n\n        if (this.platformUtil.isBrowser) {\n            requestAnimationFrame(() => {\n                const newTab = this.tabs.toArray()[this._selectedIndex];\n                if (newTab) {\n                    this.performSelection(newTab);\n                } else {\n                    this.hideIndicator();\n                }\n            });\n            this._ngZone.runOutsideAngular(() => {\n                this._resizeObserver = new ResizeObserver(() => {\n                    if (!this.hasContentTabs && this._selectedIndex >= 0 && this._selectedIndex < this.tabs.length) {\n                        const newTab = this.tabs.toArray()[this._selectedIndex];\n                        this.transformContentAnimation(newTab, 0);\n                    }\n                });\n\n                this._resizeObserver.observe(this.tabsContainer.nativeElement);\n            });\n        }\n\n        this.setGroupsAttributes();\n        this._groupChanges$ = this.groups.changes.subscribe(() => {\n            this.setGroupsAttributes();\n            this.resetSelectionOnCollectionChanged();\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy(): void {\n        if (this._groupChanges$) {\n            this._groupChanges$.unsubscribe();\n        }\n        if (this._resizeObserver) {\n            this._ngZone.runOutsideAngular(() => {\n                this._resizeObserver.disconnect();\n            });\n        }\n    }\n\n    private setGroupsAttributes() {\n        const groupsArray = Array.from(this.groups);\n        for (let index = 0; index < this.groups.length; index++) {\n            const tabsGroup = groupsArray[index] as IgxTabsGroupComponent;\n            tabsGroup.nativeElement.setAttribute('id', this.getTabsGroupId(index));\n            tabsGroup.nativeElement.setAttribute('aria-labelledby', this.getTabItemId(index));\n        }\n    }\n\n    private resetSelectionOnCollectionChanged(): void {\n        requestAnimationFrame(() => {\n            const currentTab = this.tabs.toArray()[this.selectedIndex];\n            if (currentTab) {\n                this.performSelectionChange(currentTab);\n            } else if (this.selectedIndex >= this.tabs.length) {\n                this.performSelectionChange(this.tabs.last);\n            } else {\n                this.hideIndicator();\n            }\n        });\n    }\n\n    private scroll(scrollRight: boolean): void {\n        const tabsArray = this.tabs.toArray();\n        for (const tab of tabsArray) {\n            const element = tab.nativeTabItem.nativeElement;\n            if (scrollRight) {\n                if (element.offsetWidth + element.offsetLeft > this.viewPort.nativeElement.offsetWidth + this.offset) {\n                    this.scrollElement(element, scrollRight);\n                    break;\n                }\n            } else {\n                if (element.offsetWidth + element.offsetLeft >= this.offset) {\n                    this.scrollElement(element, scrollRight);\n                    break;\n                }\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public performSelectionChange(newTab: IgxTabItemBase): void {\n        const oldTab = this.selectedTabItem;\n        if (oldTab) {\n            this.performDeselection(oldTab);\n        }\n        if (newTab) {\n            this.performSelection(newTab);\n        } else {\n            // if there is no new selected tab hide the selection indicator\n            this.hideIndicator();\n        }\n        this.selectedIndexChange.emit(this._selectedIndex);\n    }\n\n    private performDeselection(oldTab: IgxTabItemBase): void {\n        oldTab.setSelectedInternal(false);\n        const oldTabRelatedGroup = this.groups.toArray()[oldTab.index];\n        if (oldTabRelatedGroup) {\n            oldTabRelatedGroup.setSelectedInternal(false);\n        }\n        this._selectedIndex = -1;\n        this.onTabItemDeselected.emit({ tab: oldTab, group: oldTabRelatedGroup });\n    }\n\n    private performSelection(newTab: IgxTabItemBase): void {\n        newTab.setSelectedInternal(true);\n        this._selectedIndex = newTab.index;\n\n        let newTabRelatedGroup = null;\n        if (!this.hasContentTabs && this.groups) {\n            newTabRelatedGroup = this.groups.toArray()[newTab.index];\n            if (newTabRelatedGroup) {\n                newTabRelatedGroup.setSelectedInternal(true);\n            }\n        }\n\n        this.onTabItemSelected.emit({ tab: newTab, group: newTabRelatedGroup });\n\n        requestAnimationFrame(() => {\n            // bring the new selected tab into view if it is not\n            this.bringNewTabIntoView(newTab);\n            // animate the new selection indicator\n            this.transformIndicatorAnimation(newTab.nativeTabItem.nativeElement);\n            // animate the new tab's group content\n            if (!this.hasContentTabs) {\n                this.transformContentAnimation(newTab, 0.2);\n            }\n        });\n    }\n\n    private bringNewTabIntoView(newTab: IgxTabItemBase): void {\n        const tabNativeElement = newTab.nativeTabItem.nativeElement;\n\n        // Scroll left if there is need\n        if (tabNativeElement.offsetLeft < this.offset) {\n            this.scrollElement(tabNativeElement, false);\n        }\n\n        // Scroll right if there is need\n        const viewPortOffsetWidth = this.viewPort.nativeElement.offsetWidth;\n        const delta = (tabNativeElement.offsetLeft + tabNativeElement.offsetWidth) - (viewPortOffsetWidth + this.offset);\n\n        // Fix for IE 11, a difference is accumulated from the widths calculations\n        if (delta > 1) {\n            this.scrollElement(tabNativeElement, true);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public getTabItemId(index: number): string {\n        return `igx-tab-item-${this._currentTabsId}-${index}`;\n    }\n\n    /**\n     * @hidden\n     */\n    public getTabsGroupId(index: number): string {\n        return `igx-tabs-group-${this._currentTabsId}-${index}`;\n    }\n\n    /**\n     * @hidden\n     */\n    // animation for the new panel/group (not needed for tab only mode)\n    public transformContentAnimation(tab: IgxTabItemBase, duration: number): void {\n        const contentOffset = this.tabsContainer.nativeElement.offsetWidth * tab.index;\n        this.contentsContainer.nativeElement.style.transitionDuration = duration > 0 ? `${duration}s` : 'initial';\n        this.contentsContainer.nativeElement.style.transform = `translate(${-contentOffset}px)`;\n    }\n\n    /**\n     * @hidden\n     */\n    public transformIndicatorAnimation(element: HTMLElement, duration = 0.3): void {\n        if (this.selectedIndicator) {\n            this.selectedIndicator.nativeElement.style.visibility = 'visible';\n            this.selectedIndicator.nativeElement.style.transitionDuration = duration > 0 ? `${duration}s` : 'initial';\n            this.selectedIndicator.nativeElement.style.width = `${element.offsetWidth}px`;\n            this.selectedIndicator.nativeElement.style.transform = `translate(${element.offsetLeft}px)`;\n        }\n    }\n\n    public hideIndicator(): void {\n        if (this.selectedIndicator) {\n            this.selectedIndicator.nativeElement.style.visibility = 'hidden';\n        }\n    }\n\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxTabsComponent,\n        IgxTabsGroupComponent,\n        IgxTabItemComponent,\n        IgxTabItemTemplateDirective,\n        IgxRightButtonStyleDirective,\n        IgxLeftButtonStyleDirective],\n    exports: [IgxTabsComponent,\n        IgxTabsGroupComponent,\n        IgxTabItemComponent,\n        IgxTabItemTemplateDirective,\n        IgxRightButtonStyleDirective,\n        IgxLeftButtonStyleDirective],\n    imports: [CommonModule, IgxBadgeModule, IgxIconModule, IgxRippleModule]\n})\n\nexport class IgxTabsModule {\n}\n","import {\n    Component,\n    ContentChild,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Input,\n    TemplateRef,\n    ViewChild,\n    NgZone,\n    AfterViewInit,\n    OnDestroy\n} from '@angular/core';\nimport { KEYS } from '../core/utils';\nimport { IgxTabsGroupComponent } from './tabs-group.component';\nimport { IgxTabItemBase, IgxTabsBase } from './tabs.common';\nimport { IgxTabItemTemplateDirective } from './tabs.directives';\nimport ResizeObserver from 'resize-observer-polyfill';\n\n@Component({\n    selector: 'igx-tab-item',\n    templateUrl: 'tab-item.component.html'\n})\n\nexport class IgxTabItemComponent extends IgxTabItemBase implements AfterViewInit, OnDestroy {\n    /**\n    * Gets the group associated with the tab.\n    * ```html\n    * const relatedGroup = this.tabbar.tabs.toArray()[1].relatedGroup;\n    * ```\n    */\n    @Input()\n    public relatedGroup: IgxTabsGroupComponent;\n\n    /**@hidden*/\n    private _icon: string;\n\n    /**\n    * An @Input property that sets the value of the `icon`.\n    * The value should be valid icon name from {@link https://material.io/tools/icons/?style=baseline}.\n    *```html\n    *<igx-tab-item label=\"Tab 1\" icon=\"home\">\n    *```\n    */\n    @Input()\n    public get icon(): string {\n        return this.relatedGroup ? this.relatedGroup.icon : this._icon;\n    }\n    public set icon(newValue: string) {\n        if (this.relatedGroup) {\n            this.relatedGroup.icon = newValue;\n        }\n        this._icon = newValue;\n    }\n\n    /**@hidden*/\n    private _label: string;\n\n    /**\n    * An @Input property that sets the value of the `label`.\n    *```html\n    *<igx-tabs-item label=\"Tab 2\" icon=\"folder\">\n    *```\n    */\n    @Input()\n    public get label(): string {\n        return this.relatedGroup ? this.relatedGroup.label : this._label;\n    }\n    public set label(newValue: string) {\n        if (this.relatedGroup) {\n            this.relatedGroup.label = newValue;\n        }\n        this._label = newValue;\n    }\n\n    /**\n     * @hidden @internal\n     * Set to true when the tab item is automatically generated from the IgxTabsComponent when tab groups are defined.\n     */\n    @Input()\n    public autoGenerated: boolean;\n\n    /**@hidden*/\n    @ViewChild('defaultTabTemplate', { read: TemplateRef, static: true })\n    protected defaultTabTemplate: TemplateRef<any>;\n\n    /**@hidden*/\n    @ContentChild(IgxTabItemTemplateDirective, { read: IgxTabItemTemplateDirective })\n    protected customTabTemplateDir: IgxTabItemTemplateDirective;\n\n    private _nativeTabItem: ElementRef;\n    private _changesCount = 0; // changes and updates accordingly applied to the tab.\n    private _isSelected = false;\n    private _disabled = false;\n    private _resizeObserver: ResizeObserver;\n\n    constructor(private _tabs: IgxTabsBase, private _element: ElementRef, private _ngZone: NgZone) {\n        super();\n        this._nativeTabItem = _element;\n    }\n\n    @HostBinding('class.igx-tabs__header-menu-item--selected')\n    public get provideCssClassSelected(): boolean {\n        return this.isSelected;\n    }\n\n    @HostBinding('class.igx-tabs__header-menu-item--disabled')\n    public get provideCssClassDisabled(): boolean {\n        return this.disabled;\n    }\n\n    @HostBinding('class.igx-tabs__header-menu-item')\n    public get provideCssClass(): boolean {\n        return (!this.disabled && !this.isSelected);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.role')\n    public role = 'tab';\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.tabindex')\n    public tabindex = -1;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.aria-label')\n    public ariaLabel = this.label;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.aria-disabled')\n    public ariaDisabled = this.disabled;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.aria-selected')\n    public ariaSelected = this.isSelected;\n\n    ngAfterViewInit(): void {\n        this._ngZone.runOutsideAngular(() => {\n            this._resizeObserver = new ResizeObserver(() => {\n                this._tabs.transformIndicatorAnimation(this._nativeTabItem.nativeElement, 0);\n            });\n        });\n    }\n\n    ngOnDestroy(): void {\n        this._ngZone.runOutsideAngular(() => {\n            this._resizeObserver.disconnect();\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('click', ['$event'])\n    public onClick(event) {\n        if (this.autoGenerated) {\n            this.select();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown', ['$event'])\n    public onKeydown(event: KeyboardEvent) {\n        const tabsArray = this._tabs.tabs.toArray();\n        const startIndex = tabsArray.indexOf(this);\n        let finalIndex = -1;\n        let currentIndex = startIndex;\n\n        switch (event.key) {\n            case KEYS.RIGHT_ARROW:\n            case KEYS.RIGHT_ARROW_IE:\n                do {\n                    currentIndex++;\n                    if (currentIndex === tabsArray.length) {\n                        currentIndex = -1;\n                        continue;\n                    } else if ((tabsArray[currentIndex] as IgxTabItemComponent).disabled === false) {\n                        finalIndex = currentIndex;\n                        break;\n                    }\n                }\n                while (currentIndex !== startIndex);\n                break;\n            case KEYS.LEFT_ARROW:\n            case KEYS.LEFT_ARROW_IE:\n                do {\n                    currentIndex--;\n                    if (currentIndex === -1) {\n                        currentIndex = tabsArray.length;\n                        continue;\n                    } else if ((tabsArray[currentIndex] as IgxTabItemComponent).disabled === false) {\n                        finalIndex = currentIndex;\n                        break;\n                    }\n                }\n                while (currentIndex !== startIndex);\n                break;\n            case KEYS.HOME:\n                event.preventDefault();\n                finalIndex = tabsArray.find(t => (t as IgxTabItemComponent).disabled === false).index;\n                break;\n            case KEYS.END:\n                event.preventDefault();\n                finalIndex = tabsArray.slice().reverse().find(t => (t as IgxTabItemComponent).disabled === false).index;\n                break;\n            case KEYS.ENTER:\n                if (!this.autoGenerated) {\n                    this.nativeTabItem.nativeElement.click();\n                }\n                break;\n            case KEYS.SPACE:\n            case KEYS.SPACE_IE:\n                event.preventDefault();\n                if (!this.autoGenerated) {\n                    this.nativeTabItem.nativeElement.click();\n                }\n                break;\n            default:\n                break;\n        }\n\n        if (finalIndex > -1) {\n            const tab = tabsArray[finalIndex];\n            tab.nativeTabItem.nativeElement.focus();\n\n            if (this.autoGenerated) {\n                tab.select();\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    get changesCount(): number {\n        return this._changesCount;\n    }\n\n    /**\n     * @hidden\n     */\n    get nativeTabItem(): ElementRef {\n        return this._nativeTabItem;\n    }\n\n    /**\n    * \tGets whether the tab is disabled.\n    * ```\n    * const disabledItem = this.myTabComponent.tabs.first.disabled;\n    * ```\n    */\n    @Input()\n    get disabled(): boolean {\n        return this.relatedGroup ? this.relatedGroup.disabled : this._disabled;\n    }\n    set disabled(newValue: boolean) {\n        if (this.relatedGroup) {\n            this.relatedGroup.disabled = newValue;\n        } else {\n            this._disabled = newValue;\n        }\n    }\n\n    /**\n     * Gets whether the tab is selected.\n     * ```typescript\n     * const selectedItem = this.myTabComponent.tabs.first.isSelected;\n     * ```\n     */\n    @Input()\n    get isSelected(): boolean {\n        return this.relatedGroup ? this.relatedGroup.isSelected : this._isSelected;\n    }\n    set isSelected(newValue: boolean) {\n        if (!this.disabled && this.isSelected !== newValue) {\n            this._tabs.performSelectionChange(newValue ? this : null);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public select(): void {\n        if (!this.disabled && !this.isSelected) {\n            this._tabs.performSelectionChange(this);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    get index(): number {\n        if (this._tabs.tabs) {\n            return this._tabs.tabs.toArray().indexOf(this);\n        }\n        return -1;\n    }\n\n    /**\n     * @hidden\n     */\n    public setSelectedInternal(newValue: boolean) {\n        this._isSelected = newValue;\n        this._ngZone.runOutsideAngular(() => {\n            if (this._resizeObserver) {\n                if (this._isSelected) {\n                    this._resizeObserver.observe(this._element.nativeElement);\n                } else {\n                    this._resizeObserver.disconnect();\n                }\n            }\n        });\n        this.tabindex = newValue ? 0 : -1;\n    }\n\n    /**\n     * @hidden\n     */\n    public get template(): TemplateRef<any> {\n        if (this.relatedGroup && this.relatedGroup.customTabTemplate) {\n            return this.relatedGroup.customTabTemplate;\n        }\n        if (this.customTabTemplateDir) {\n            return this.customTabTemplateDir.template;\n        }\n        return this.defaultTabTemplate;\n    }\n\n    /**\n     * @hidden\n     */\n    public get context(): any {\n        return this.relatedGroup ? this.relatedGroup : this;\n    }\n}\n","import {\n    AfterContentInit,\n    Component,\n    ContentChild,\n    ElementRef,\n    HostBinding,\n    Input,\n    TemplateRef,\n} from '@angular/core';\n\nimport { IgxTabItemComponent } from './tab-item.component';\nimport { IgxTabItemTemplateDirective } from './tabs.directives';\nimport { IgxTabsBase, IgxTabsGroupBase } from './tabs.common';\n\n@Component({\n    selector: 'igx-tabs-group',\n    templateUrl: 'tabs-group.component.html'\n})\n\nexport class IgxTabsGroupComponent extends IgxTabsGroupBase implements AfterContentInit {\n    /**\n    * An @Input property that allows you to enable/disable the `IgxTabGroupComponent`.\n    *```html\n    *<igx-tabs-group label=\"Tab 2  Lorem ipsum dolor sit\" icon=\"home\" [disabled]=\"true\">\n    *```\n    */\n    @Input()\n    public disabled = false;\n\n    /**\n    * An @Input property that sets the value of the `icon`.\n    * The value should be valid icon name from {@link https://material.io/tools/icons/?style=baseline}.\n    *```html\n    *<igx-tabs-group label=\"Tab 1\" icon=\"home\">\n    *```\n    */\n    @Input()\n    public icon: string;\n\n    /**\n    * An @Input property that sets the value of the `label`.\n    *```html\n    *<igx-tabs-group label=\"Tab 1\" icon=\"folder\">\n    *```\n    */\n    @Input()\n    public label: string;\n\n    /**\n     * Sets/gets whether a tab group is selected.\n     * ```typescript\n     * this.tabGroup.isSelected = true;\n     * ```\n     * ```typescript\n     * let isSelected = this.tabGroup.isSelected;\n     * ```\n     * @memberof IgxTabsGroupComponent\n     */\n    public get isSelected(): boolean {\n        return this._isSelected;\n    }\n    public set isSelected(newValue: boolean) {\n        if (!this.disabled && this.isSelected !== newValue) {\n            this._tabs.performSelectionChange(newValue ? this.relatedTab : null);\n        }\n    }\n\n    /**\n     * Returns the native element of the tabs-group component\n     * ```typescript\n     *  const mytabsGroupElement: HTMLElement = tabsGroup.nativeElement;\n     * ```\n     */\n    public get nativeElement() {\n        return this._element.nativeElement;\n    }\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxTabItemTemplateDirective, { read: IgxTabItemTemplateDirective })\n    protected tabTemplate: IgxTabItemTemplateDirective;\n\n    private _tabTemplate: TemplateRef<any>;\n    private _isSelected = false;\n\n    constructor(private _tabs: IgxTabsBase, private _element: ElementRef) {\n        super();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('attr.role')\n    public role = 'tabpanel';\n\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-tabs__group')\n    public styleClass = true;\n\n    /**\n     * An accessor that returns the `IgxTabItemComponent` component.\n     * ```typescript\n     * @ViewChild(\"MyTabsGroup\")\n     * public tab: IgxTabsGroupComponent;\n     * ngAfterViewInIt(){\n     *    let tabComponent = this.tab.relatedTab;\n     * }\n     * ```\n     */\n    get relatedTab(): IgxTabItemComponent {\n        if (this._tabs.tabs) {\n            return this._tabs.tabs.toArray()[this.index] as IgxTabItemComponent;\n        }\n    }\n\n    /**\n     * An accessor that returns the value of the index of the `IgxTabsGroupComponent`.\n     * ```typescript\n     * @ViewChild(\"MyTabsGroup\")\n     * public tab: IgxTabsGroupComponent;\n     * ngAfterViewInIt(){\n     *    let tabIndex = this.tab.index;\n     * }\n     * ```\n     */\n    get index(): number {\n        if (this._tabs.groups) {\n            return this._tabs.groups.toArray().indexOf(this);\n        }\n        return -1;\n    }\n\n    /**\n     * @hidden\n     */\n    get customTabTemplate(): TemplateRef<any> {\n        return this._tabTemplate;\n    }\n\n    /**\n     *@hidden\n     */\n    set customTabTemplate(template: TemplateRef<any>) {\n        this._tabTemplate = template;\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterContentInit(): void {\n        if (this.tabTemplate) {\n            this._tabTemplate = this.tabTemplate.template;\n        }\n    }\n\n    /**\n     * A method that sets the focus on a tab.\n     * @memberof {@link IgxTabsGroupComponent}\n     *```typescript\n     *@ViewChild(\"MyChild\")\n     *public tab : IgxTabsGroupComponent;\n     *ngAfterViewInit(){\n     *    this.tab.select();\n     *}\n     *```\n     */\n    public select(): void {\n        if (!this.disabled && !this.isSelected) {\n            this._tabs.performSelectionChange(this.relatedTab);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public setSelectedInternal(newValue: boolean) {\n        this._isSelected = newValue;\n    }\n}\n","import { animate, state, style, transition, trigger } from '@angular/animations';\nimport { CommonModule } from '@angular/common';\nimport {\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    Input,\n    NgModule,\n    OnDestroy,\n    OnInit,\n    Optional,\n    Output\n} from '@angular/core';\nimport { IgxNavigationService, IToggleView } from '../core/navigation';\n\nlet NEXT_ID = 0;\n/**\n * **Ignite UI for Angular Toast** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/toast.html)\n *\n * The Ignite UI Toast provides information and warning messages that are non-interactive and cannot\n * be dismissed by the user. Toasts can be displayed at the bottom, middle, or top of the page.\n *\n * Example:\n * ```html\n * <button (click)=\"toast.show()\">Show notification</button>\n * <igx-toast #toast\n *           message=\"Notification displayed\"\n *           displayTime=\"1000\">\n * </igx-toast>\n * ```\n */\n@Component({\n    animations: [\n        trigger('animate', [\n            state('show', style({\n                opacity: 1\n            })),\n            transition('* => show', animate('.20s ease')),\n            transition('show => *', animate('.40s ease-out'))\n        ])\n    ],\n    selector: 'igx-toast',\n    templateUrl: 'toast.component.html',\n    styles: [`\n        :host {\n            display: block;\n        }\n    `]\n})\nexport class IgxToastComponent implements IToggleView, OnInit, OnDestroy {\n    private _isVisible = false;\n    /**\n     * Returns a list of available CSS classes.\n     * ```typescript\n     * let toastClasses =  this.toast.CSS_CLASSES;\n     * ```\n     * @memberof IgxToastComponent\n     */\n    public readonly CSS_CLASSES = {\n        IGX_TOAST_BOTTOM: 'igx-toast--bottom',\n        IGX_TOAST_MIDDLE: 'igx-toast--middle',\n        IGX_TOAST_TOP: 'igx-toast--top'\n    };\n\n    /**\n     * Sets/gets the `id` of the toast.\n     * If not set, the `id` will have value `\"igx-toast-0\"`.\n     * ```html\n     * <igx-toast id = \"my-first-toast\"></igx-toast>\n     * ```\n     * ```typescript\n     * let toastId = this.toast.id;\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-toast-${NEXT_ID++}`;\n\n    /**\n     * Emits an event prior the toast is shown.\n     * Provides reference to the `IgxToastComponent` as event argument.\n     * ```html\n     * <igx-toast (onShowing) = \"onShowing($event)\"></igx-toast>\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Output()\n    public onShowing = new EventEmitter<IgxToastComponent>();\n\n    /**\n     * Emits an event when the toast is shown.\n     * Provides reference to the `IgxToastComponent` as event argument.\n     * ```html\n     * <igx-toast (onShown) = \"onShown($event)\"></igx-toast>\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Output()\n    public onShown = new EventEmitter<IgxToastComponent>();\n\n    /**\n     * Emits an event prior the toast is hidden.\n     * Provides reference to the `IgxToastComponent` as event argument.\n     * ```html\n     * <igx-toast (onHiding) = \"onHiding($event)\"></igx-toast>\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Output()\n    public onHiding = new EventEmitter<IgxToastComponent>();\n\n    /**\n     *  Emits an event when the toast is hidden.\n     *  Provides reference to the `IgxToastComponent` as event argument.\n     * ```html\n     * <igx-toast (onHidden) = \"onHidden($event)\"></igx-toast>\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Output()\n    public onHidden = new EventEmitter<IgxToastComponent>();\n    /**\n     * Sets/gets the `role` attribute.\n     * If not set, `role` will have value `\"alert\"`.\n     * ```html\n     * <igx-toast [role] = \"'notify'\"></igx-toast>\n     * ```\n     * ```typescript\n     * let toastRole = this.toast.role;\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Input()\n    public role = 'alert';\n    /**\n     * Sets/gets whether the toast will be hidden after the `displayTime` is over.\n     * Default value is `true`.\n     * ```html\n     * <igx-toast [autoHide] = \"false\"></igx-toast>\n     * ```\n     * ```typescript\n     * let autoHide = this.toast.autoHide;\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Input()\n    public autoHide = true;\n\n    /**\n     * Sets/gets the duration of time span(in milliseconds) which the toast will be visible\n     * after it is being shown.\n     * Default value is `4000`.\n     * ```html\n     * <igx-toast [displayTime] = \"2500\"></igx-toast>\n     * ```\n     * ```typescript\n     * let displayTime = this.toast.displayTime;\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Input()\n    public displayTime = 4000;\n\n    /**\n     * Enables/Disables the visibility of the toast.\n     * If not set, the `isVisible` attribute will have value `false`.\n     * ```html\n     * <igx-toast [isVisible] = \"true\"></igx-toast>\n     * ```\n     * ```typescript\n     * let isVisible = this.toast.isVisible;\n     * ```\n     *\n     * Two-way data binding.\n     * ```html\n     * <igx-toast [(isVisible)] = \"model.isVisible\"></igx-toast>\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Input()\n    public get isVisible() {\n        return this._isVisible;\n    }\n    public set isVisible(value) {\n        this._isVisible = value;\n        this.isVisibleChange.emit(this._isVisible);\n\n    }\n\n    /**\n     *@hidden\n     */\n    @Output()\n    public isVisibleChange = new EventEmitter<boolean>();\n\n    /**\n     * Sets/gets the message that will be shown by the toast.\n     * ```html\n     * <igx-toast [message] = \"Notification\"></igx-toast>\n     * ```\n     * ```typescript\n     * let toastMessage = this.toast.message;\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Input()\n    public message: string;\n\n    /**\n     * Sets/gets the position of the toast.\n     * If not set, the `position` attribute will have value `IgxToastPosition.Bottom`.\n     * ```html\n     * <igx-toast [position] = \"top\"></igx-toast>\n     * ```\n     * ```typescript\n     * let toastPosition = this.toast.position;\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Input()\n    public position: IgxToastPosition = IgxToastPosition.Bottom;\n\n    /**\n     * Gets the nativeElement of the toast.\n     * ```typescript\n     * let nativeElement = this.toast.element;\n     * ```\n     * @memberof IgxToastComponent\n     */\n    public get element() {\n        return this.elementRef.nativeElement;\n    }\n    /**\n     *@hidden\n     */\n    private timeoutId;\n\n    constructor(\n        private elementRef: ElementRef,\n        @Optional() private navService: IgxNavigationService) { }\n\n    /**\n     * Shows the toast.\n     * If `autoHide` is enabled, the toast will hide after `displayTime` is over.\n     * ```typescript\n     * this.toast.show();\n     * ```\n     * @memberof IgxToastComponent\n     */\n    public show(): void {\n        clearInterval(this.timeoutId);\n        this.onShowing.emit(this);\n        this.isVisible = true;\n\n        if (this.autoHide) {\n            this.timeoutId = setTimeout(() => {\n                this.hide();\n            }, this.displayTime);\n        }\n\n        this.onShown.emit(this);\n    }\n\n    /**\n     * Hides the toast.\n     * ```typescript\n     * this.toast.hide();\n     * ```\n     * @memberof IgxToastComponent\n     */\n    public hide(): void {\n        this.onHiding.emit(this);\n        this.isVisible = false;\n        this.onHidden.emit(this);\n\n        clearInterval(this.timeoutId);\n    }\n\n    /**\n     * Wraps @show() method due @IToggleView interface implementation.\n     * @hidden\n     */\n    public open() {\n        this.show();\n    }\n\n    /**\n     * Wraps @hide() method due @IToggleView interface implementation.\n     * @hidden\n     */\n    public close() {\n        this.hide();\n    }\n\n    /**\n     * Toggles the visible state of the toast.\n     * ```typescript\n     * this.toast.toggle();\n     * ```\n     * @memberof IgxToastComponent\n     */\n    public toggle() {\n        this.isVisible ? this.close() : this.open();\n    }\n    /**\n     * Sets/gets the class name of the toast based on the `position` value.\n     * ```typescript\n     * let className =  this.toast.mapPositionToClassName();\n     * ```\n     * @memberof IgxToastComponent\n     */\n    public mapPositionToClassName(): any {\n        if (this.position === IgxToastPosition.Top) {\n            return this.CSS_CLASSES.IGX_TOAST_TOP;\n        }\n\n        if (this.position === IgxToastPosition.Middle) {\n            return this.CSS_CLASSES.IGX_TOAST_MIDDLE;\n        }\n\n        if (this.position === IgxToastPosition.Bottom) {\n            return this.CSS_CLASSES.IGX_TOAST_BOTTOM;\n        }\n    }\n    /**\n     *@hidden\n     */\n    public ngOnInit() {\n        if (this.navService && this.id) {\n            this.navService.add(this.id, this);\n        }\n    }\n    /**\n     *@hidden\n     */\n    public ngOnDestroy() {\n        if (this.navService && this.id) {\n            this.navService.remove(this.id);\n        }\n    }\n}\n\n/**\n * Enumeration for toast position\n * Can be:\n * Bottom\n * Middle\n * Top\n */\nexport enum IgxToastPosition {\n    Bottom,\n    Middle,\n    Top\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxToastComponent],\n    exports: [IgxToastComponent],\n    imports: [CommonModule]\n})\nexport class IgxToastModule { }\n","import { ElementRef } from '@angular/core';\nimport { InteractionMode } from '../core/enums';\n\n/** @hidden */\nexport const IGX_TIME_PICKER_COMPONENT = 'IgxTimePickerComponentToken';\n\n/** @hidden */\nexport interface IgxTimePickerBase {\n    hourList: ElementRef;\n    minuteList: ElementRef;\n    secondsList: ElementRef;\n    ampmList: ElementRef;\n    selectedHour: string;\n    selectedMinute: string;\n    selectedSeconds: string;\n    selectedAmPm: string;\n    format: string;\n    promptChar: string;\n    cleared: boolean;\n    mode: InteractionMode;\n    showHoursList: boolean;\n    showMinutesList: boolean;\n    showSecondsList: boolean;\n    showAmPmList: boolean;\n    nextHour();\n    prevHour();\n    nextMinute();\n    prevMinute();\n    nextSeconds();\n    prevSeconds();\n    nextAmPm();\n    prevAmPm();\n    okButtonClick(): boolean;\n    cancelButtonClick(): void;\n    scrollHourIntoView(item: string): void;\n    scrollMinuteIntoView(item: string): void;\n    scrollSecondsIntoView(item: string): void;\n    scrollAmPmIntoView(item: string): void;\n    close(): void;\n    parseMask(preserveAmPm?: boolean): string;\n}\n\n","/**\n * This file contains all the directives used by the @link IgxTimePickerComponent.\n * You should generally not use them directly.\n * @preferred\n */\nimport {\n    Directive,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Inject,\n    Input,\n    TemplateRef\n} from '@angular/core';\nimport { IGX_TIME_PICKER_COMPONENT, IgxTimePickerBase } from './time-picker.common';\nimport { InteractionMode } from '../core/enums';\n\n/** @hidden */\n@Directive({\n    selector: '[igxItemList]'\n})\nexport class IgxItemListDirective {\n\n    @Input('igxItemList')\n    public type: string;\n\n    public isActive: boolean;\n\n    constructor(\n        @Inject(IGX_TIME_PICKER_COMPONENT) public timePicker: IgxTimePickerBase,\n        private elementRef: ElementRef\n    ) { }\n\n    @HostBinding('attr.tabindex')\n    public tabindex = 0;\n\n    @HostBinding('class.igx-time-picker__column')\n    get defaultCSS(): boolean {\n        return true;\n    }\n\n    @HostBinding('class.igx-time-picker__hourList')\n    get hourCSS(): boolean {\n        return this.type === 'hourList';\n    }\n\n    @HostBinding('class.igx-time-picker__minuteList')\n    get minuteCSS(): boolean {\n        return this.type === 'minuteList';\n    }\n\n    @HostBinding('class.igx-time-picker__secondsList')\n    get secondsCSS(): boolean {\n        return this.type === 'secondsList';\n    }\n\n    @HostBinding('class.igx-time-picker__ampmList')\n    get ampmCSS(): boolean {\n        return this.type === 'ampmList';\n    }\n\n    @HostListener('focus')\n    public onFocus() {\n        this.isActive = true;\n    }\n\n    @HostListener('blur')\n    public onBlur() {\n        this.isActive = false;\n    }\n\n    private nextItem(): void {\n        switch (this.type) {\n            case 'hourList': {\n                this.timePicker.nextHour();\n                break;\n            }\n            case 'minuteList': {\n                this.timePicker.nextMinute();\n                break;\n            }\n            case 'secondsList': {\n                this.timePicker.nextSeconds();\n                break;\n            }\n            case 'ampmList': {\n                this.timePicker.nextAmPm();\n                break;\n            }\n        }\n    }\n\n    private prevItem(): void {\n        switch (this.type) {\n            case 'hourList': {\n                this.timePicker.prevHour();\n                break;\n            }\n            case 'minuteList': {\n                this.timePicker.prevMinute();\n                break;\n            }\n            case 'secondsList': {\n                this.timePicker.prevSeconds();\n                break;\n            }\n            case 'ampmList': {\n                this.timePicker.prevAmPm();\n                break;\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowdown', ['$event'])\n    public onKeydownArrowDown(event: KeyboardEvent) {\n        event.preventDefault();\n\n        this.nextItem();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowup', ['$event'])\n    public onKeydownArrowUp(event: KeyboardEvent) {\n        event.preventDefault();\n\n        this.prevItem();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowright', ['$event'])\n    public onKeydownArrowRight(event: KeyboardEvent) {\n        event.preventDefault();\n\n        const listName = (event.target as HTMLElement).className;\n\n        if (listName.indexOf('hourList') !== -1 && this.timePicker.minuteList) {\n            this.timePicker.minuteList.nativeElement.focus();\n        } else if ((listName.indexOf('hourList') !== -1 || listName.indexOf('minuteList') !== -1) && this.timePicker.secondsList) {\n            this.timePicker.secondsList.nativeElement.focus();\n        } else if ((listName.indexOf('hourList') !== -1 || listName.indexOf('minuteList') !== -1 ||\n            listName.indexOf('secondsList') !== -1) && this.timePicker.ampmList) {\n            this.timePicker.ampmList.nativeElement.focus();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowleft', ['$event'])\n    public onKeydownArrowLeft(event: KeyboardEvent) {\n        event.preventDefault();\n        const listName = (event.target as HTMLElement).className;\n\n        if (listName.indexOf('ampmList') !== -1 && this.timePicker.secondsList) {\n            this.timePicker.secondsList.nativeElement.focus();\n        } else if (listName.indexOf('secondsList') !== -1 && this.timePicker.secondsList\n            && listName.indexOf('minutesList') && this.timePicker.minuteList) {\n            this.timePicker.minuteList.nativeElement.focus();\n        } else if (listName.indexOf('ampmList') !== -1 && this.timePicker.minuteList) {\n            this.timePicker.minuteList.nativeElement.focus();\n        } else if ((listName.indexOf('ampmList') !== -1 || listName.indexOf('secondsList') !== -1 ||\n            listName.indexOf('minuteList') !== -1) && this.timePicker.hourList) {\n            this.timePicker.hourList.nativeElement.focus();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.enter', ['$event'])\n    public onKeydownEnter(event: KeyboardEvent) {\n        event.preventDefault();\n\n        if (this.timePicker.mode === InteractionMode.DropDown) {\n            this.timePicker.close();\n            return;\n        }\n        this.timePicker.okButtonClick();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.escape', ['$event'])\n    public onKeydownEscape(event: KeyboardEvent) {\n        event.preventDefault();\n\n        this.timePicker.cancelButtonClick();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('mouseover')\n    public onHover() {\n        this.elementRef.nativeElement.focus();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('wheel', ['$event'])\n    public onScroll(event) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        if (event.deltaY > 0) {\n            this.nextItem();\n        } else if (event.deltaY < 0) {\n            this.prevItem();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('panmove', ['$event'])\n    public onPanMove(event) {\n        if (event.deltaY < 0) {\n            this.nextItem();\n        } else if (event.deltaY > 0) {\n            this.prevItem();\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxHourItem]'\n})\nexport class IgxHourItemDirective {\n\n    @Input('igxHourItem')\n    public value: string;\n\n    @HostBinding('class.igx-time-picker__item')\n    get defaultCSS(): boolean {\n        return true;\n    }\n\n    @HostBinding('class.igx-time-picker__item--selected')\n    get selectedCSS(): boolean {\n        return this.isSelectedHour;\n    }\n\n    @HostBinding('class.igx-time-picker__item--active')\n    get activeCSS(): boolean {\n        return this.isSelectedHour && this.itemList.isActive;\n    }\n\n    get isSelectedHour(): boolean {\n        return this.timePicker.selectedHour === this.value;\n    }\n\n    constructor(@Inject(IGX_TIME_PICKER_COMPONENT)\n    public timePicker: IgxTimePickerBase,\n        private itemList: IgxItemListDirective) { }\n\n    @HostListener('click', ['value'])\n    public onClick(item) {\n        if (item !== '') {\n            this.timePicker.scrollHourIntoView(item);\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxMinuteItem]'\n})\nexport class IgxMinuteItemDirective {\n\n    @Input('igxMinuteItem')\n    public value: string;\n\n    @HostBinding('class.igx-time-picker__item')\n    get defaultCSS(): boolean {\n        return true;\n    }\n\n    @HostBinding('class.igx-time-picker__item--selected')\n    get selectedCSS(): boolean {\n        return this.isSelectedMinute;\n    }\n\n    @HostBinding('class.igx-time-picker__item--active')\n    get activeCSS(): boolean {\n        return this.isSelectedMinute && this.itemList.isActive;\n    }\n\n    get isSelectedMinute(): boolean {\n        return this.timePicker.selectedMinute === this.value;\n    }\n\n    constructor(@Inject(IGX_TIME_PICKER_COMPONENT)\n    public timePicker: IgxTimePickerBase,\n        private itemList: IgxItemListDirective) { }\n\n    @HostListener('click', ['value'])\n    public onClick(item) {\n        if (item !== '') {\n            this.timePicker.scrollMinuteIntoView(item);\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxSecondsItem]'\n})\nexport class IgxSecondsItemDirective {\n\n    @Input('igxSecondsItem')\n    public value: string;\n\n    @HostBinding('class.igx-time-picker__item')\n    get defaultCSS(): boolean {\n        return true;\n    }\n\n    @HostBinding('class.igx-time-picker__item--selected')\n    get selectedCSS(): boolean {\n        return this.isSelectedSeconds;\n    }\n\n    @HostBinding('class.igx-time-picker__item--active')\n    get activeCSS(): boolean {\n        return this.isSelectedSeconds && this.itemList.isActive;\n    }\n\n    get isSelectedSeconds(): boolean {\n        return this.timePicker.selectedSeconds === this.value;\n    }\n\n    constructor(@Inject(IGX_TIME_PICKER_COMPONENT)\n    public timePicker: IgxTimePickerBase,\n        private itemList: IgxItemListDirective) { }\n\n    @HostListener('click', ['value'])\n    public onClick(item) {\n        if (item !== '') {\n            this.timePicker.scrollSecondsIntoView(item);\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxAmPmItem]'\n})\nexport class IgxAmPmItemDirective {\n\n    @Input('igxAmPmItem')\n    public value: string;\n\n    @HostBinding('class.igx-time-picker__item')\n    get defaultCSS(): boolean {\n        return true;\n    }\n\n    @HostBinding('class.igx-time-picker__item--selected')\n    get selectedCSS(): boolean {\n        return this.isSelectedAmPm;\n    }\n\n    @HostBinding('class.igx-time-picker__item--active')\n    get activeCSS(): boolean {\n        return this.isSelectedAmPm && this.itemList.isActive;\n    }\n\n    get isSelectedAmPm(): boolean {\n        return this.timePicker.selectedAmPm === this.value;\n    }\n\n    constructor(@Inject(IGX_TIME_PICKER_COMPONENT)\n    public timePicker: IgxTimePickerBase,\n        private itemList: IgxItemListDirective) { }\n\n    @HostListener('click', ['value'])\n    public onClick(item) {\n        if (item !== '') {\n            this.timePicker.scrollAmPmIntoView(item);\n        }\n    }\n}\n\n/**\n * This directive should be used to mark which ng-template will be used from IgxTimePicker when re-templating its input group.\n */\n@Directive({\n    selector: '[igxTimePickerTemplate]'\n})\nexport class IgxTimePickerTemplateDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n\n/**\n * This directive can be used to add custom action buttons to the dropdownb/dialog.\n */\n@Directive({\n    selector: '[igxTimePickerActions]'\n})\nexport class IgxTimePickerActionsDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n","import { Pipe, PipeTransform, Inject } from '@angular/core';\nimport { IGX_TIME_PICKER_COMPONENT, IgxTimePickerBase } from './time-picker.common';\n\n\n/**\n * Formats `IgxTimePickerComponent` display value according to the `format` property,\n * when the input element loses focus.\n **/\n@Pipe({ name: 'displayFormat' })\nexport class TimeDisplayFormatPipe implements PipeTransform {\n    constructor(@Inject(IGX_TIME_PICKER_COMPONENT) private timePicker: IgxTimePickerBase) { }\n\n    transform(value: any): string {\n        let hour, minutes, seconds, amPM;\n\n        const maskAmPM = this.timePicker.parseMask();\n        const mask = this.timePicker.parseMask(false);\n        if (!value || value === mask || value === maskAmPM) {\n            return '';\n        }\n\n        const sections = value.split(/[\\s:]+/);\n\n        if (this.timePicker.showHoursList) {\n            hour = sections[0];\n        }\n\n        if (this.timePicker.showMinutesList) {\n            minutes = this.timePicker.showHoursList ? sections[1] : sections[0];\n        }\n\n        if (this.timePicker.showSecondsList) {\n            seconds = sections[sections.length - (this.timePicker.showAmPmList ? 2 : 1)];\n        }\n\n        if (this.timePicker.showAmPmList) {\n            amPM = sections[sections.length - 1];\n        }\n\n        const format = this.timePicker.format;\n        const prompt = this.timePicker.promptChar;\n        const regExp = new RegExp(this.timePicker.promptChar, 'g');\n\n        if (format.indexOf('hh') !== -1 || format.indexOf('HH') !== -1 && hour.indexOf(prompt) !== -1) {\n            hour = hour === prompt + prompt ? '00' : hour.replace(regExp, '0');\n        }\n\n        if (format.indexOf('mm') !== -1 && minutes.indexOf(prompt) !== -1) {\n            minutes = minutes === prompt + prompt ? '00' : minutes.replace(regExp, '0');\n        }\n\n        if (format.indexOf('ss') !== -1 && seconds.indexOf(prompt) !== -1) {\n            seconds = seconds === prompt + prompt ? '00' : seconds.replace(regExp, '0');\n        }\n\n        if (format.indexOf('hh') === -1 && format.indexOf('HH') === -1 && hour !== undefined) {\n            hour = hour.indexOf(prompt) !== -1 ? hour.replace(regExp, '') : hour;\n            const hourVal = parseInt(hour, 10);\n            hour = !hourVal ? '0' : hourVal < 10 && hourVal !== 0 ? hour.replace('0', '') : hour;\n        }\n\n        if (format.indexOf('mm') === -1 && minutes !== undefined) {\n            minutes = minutes.indexOf(prompt) !== -1 ? minutes.replace(regExp, '') : minutes;\n            const minutesVal = parseInt(minutes, 10);\n            minutes = !minutesVal ? '0' : minutesVal < 10 && minutesVal !== 0 ? minutes.replace('0', '') : minutes;\n        }\n\n        if (format.indexOf('ss') === -1 && seconds !== undefined) {\n            seconds = seconds.indexOf(prompt) !== -1 ? seconds.replace(regExp, '') : seconds;\n            const secondsVal = parseInt(seconds, 10);\n            seconds = !secondsVal ? '0' : secondsVal < 10 && secondsVal !== 0 ? seconds.replace('0', '') : seconds;\n        }\n\n        if (format.indexOf('tt') !== -1 && (amPM !== 'AM' || amPM !== 'PM')) {\n            amPM = amPM.indexOf('p') !== -1 || amPM.indexOf('P') !== -1 ? 'PM' : 'AM';\n        }\n\n        let result = `${hour}:${minutes}:${seconds}`;\n        if (!hour) {\n            // remove the hours\n            result = result.slice(result.indexOf(':') + 1);\n        }\n        if (!minutes) {\n            if (hour) {\n                // get the hours and seconds and concat them\n                result = result.slice(0, result.indexOf(':')) +\n                    result.slice(result.lastIndexOf(':'), result.length);\n            } else {\n                // remove the minutes\n                result = result.slice(result.indexOf(':') + 1);\n            }\n        }\n        if (!seconds) {\n            // remove the seconds\n            result = result.slice(0, result.lastIndexOf(':'));\n        }\n\n        return amPM ? `${result} ${amPM}` : result;\n    }\n}\n\n/**\n * Formats `IgxTimePickerComponent` display value according to the `format` property,\n * when the input element gets focus.\n **/\n@Pipe({ name: 'inputFormat' })\nexport class TimeInputFormatPipe implements PipeTransform {\n    constructor(@Inject(IGX_TIME_PICKER_COMPONENT) private timePicker: IgxTimePickerBase) { }\n\n    transform(value: any): string {\n        const prompt = this.timePicker.promptChar;\n        const regExp = new RegExp(prompt, 'g');\n\n        let mask, hour, minutes, seconds, amPM;\n\n        if (this.timePicker.cleared) {\n            this.timePicker.cleared = false;\n            mask = this.timePicker.parseMask(false);\n        } else {\n            mask = this.timePicker.parseMask();\n        }\n\n        if (!value || value === mask) {\n            return mask;\n        }\n\n        const sections = value.split(/[\\s:]+/);\n\n        if (this.timePicker.showHoursList) {\n            hour = sections[0];\n            hour = hour.replace(regExp, '');\n\n            const leadZeroHour = (parseInt(hour, 10) < 10 && !hour.startsWith('0')) || hour === '0';\n            hour = leadZeroHour ? '0' + hour : hour;\n        }\n\n        if (this.timePicker.showMinutesList) {\n            minutes = this.timePicker.showHoursList ? sections[1] : sections[0];\n            minutes = minutes.replace(regExp, '');\n\n            const leadZeroMinutes = (parseInt(minutes, 10) < 10 && !minutes.startsWith('0')) || minutes === '0';\n            minutes = leadZeroMinutes ? '0' + minutes : minutes;\n        }\n\n        if (this.timePicker.showSecondsList) {\n            seconds = sections[sections.length - (this.timePicker.showAmPmList ? 2 : 1)];\n            seconds = seconds.replace(regExp, '');\n\n            const leadZeroSeconds = (parseInt(seconds, 10) < 10 && !seconds.startsWith('0')) || seconds === '0';\n            seconds = leadZeroSeconds ? '0' + seconds : seconds;\n        }\n\n        if (this.timePicker.showAmPmList) {\n            amPM = sections[sections.length - 1];\n        }\n\n        let result = `${hour}:${minutes}:${seconds}`;\n        if (!hour) {\n            // remove the hours\n            result = result.slice(result.indexOf(':') + 1);\n        }\n        if (!minutes) {\n            if (hour) {\n                // get the hours and seconds and concat them\n                result = result.slice(0, result.indexOf(':')) +\n                    result.slice(result.lastIndexOf(':'), result.length);\n            } else {\n                // remove the minutes\n                result = result.slice(result.indexOf(':') + 1);\n            }\n        }\n        if (!seconds) {\n            // remove the seconds\n            result = result.slice(0, result.lastIndexOf(':'));\n        }\n\n        return amPM ? `${result} ${amPM}` : result;\n    }\n}\n","import {\n    CommonModule\n} from '@angular/common';\nimport {\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    HostListener,\n    Input,\n    NgModule,\n    OnDestroy,\n    OnInit,\n    Output,\n    TemplateRef,\n    ViewChild,\n    ContentChild,\n    Injectable,\n    AfterViewInit,\n    Injector,\n    ChangeDetectorRef,\n    AfterViewChecked\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR, NgControl, AbstractControl } from '@angular/forms';\nimport { HAMMER_GESTURE_CONFIG, HammerGestureConfig } from '@angular/platform-browser';\nimport { IgxIconModule } from '../icon/index';\nimport { IgxInputGroupModule, IgxInputGroupComponent } from '../input-group/input-group.component';\nimport { IgxInputDirective, IgxInputState } from '../directives/input/input.directive';\nimport {\n    IgxAmPmItemDirective,\n    IgxHourItemDirective,\n    IgxMinuteItemDirective,\n    IgxSecondsItemDirective,\n    IgxItemListDirective,\n    IgxTimePickerTemplateDirective,\n    IgxTimePickerActionsDirective\n} from './time-picker.directives';\nimport { Subject, fromEvent, interval, animationFrameScheduler, Subscription } from 'rxjs';\nimport { EditorProvider } from '../core/edit-provider';\nimport { IgxTimePickerBase, IGX_TIME_PICKER_COMPONENT } from './time-picker.common';\nimport { AbsoluteScrollStrategy } from '../services/overlay/scroll';\nimport { AutoPositionStrategy } from '../services/overlay/position';\nimport { OverlaySettings } from '../services/overlay/utilities';\nimport { takeUntil, throttle } from 'rxjs/operators';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxMaskModule } from '../directives/mask/mask.directive';\nimport { IgxOverlayOutletDirective, IgxToggleModule, IgxToggleDirective } from '../directives/toggle/toggle.directive';\nimport { TimeDisplayFormatPipe, TimeInputFormatPipe } from './time-picker.pipes';\nimport { ITimePickerResourceStrings } from '../core/i18n/time-picker-resources';\nimport { CurrentResourceStrings } from '../core/i18n/resources';\nimport { KEYS, CancelableBrowserEventArgs, IBaseEventArgs } from '../core/utils';\nimport { InteractionMode } from '../core/enums';\nimport { DeprecateProperty } from '../core/deprecateDecorators';\n\nlet NEXT_ID = 0;\nconst ITEMS_COUNT = 7;\n\n@Injectable()\nexport class TimePickerHammerConfig extends HammerGestureConfig {\n    public overrides = {\n        pan: { direction: Hammer.DIRECTION_VERTICAL, threshold: 1 }\n    };\n}\n\nexport interface IgxTimePickerValueChangedEventArgs extends IBaseEventArgs {\n    oldValue: Date;\n    newValue: Date;\n}\n\nexport interface IgxTimePickerValidationFailedEventArgs extends IBaseEventArgs {\n    timePicker: IgxTimePickerComponent;\n    currentValue: Date;\n    setThroughUI: boolean;\n}\n\nconst noop = () => { };\n\n@Component({\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: IgxTimePickerComponent,\n            multi: true\n        },\n        {\n            provide: HAMMER_GESTURE_CONFIG,\n            useClass: TimePickerHammerConfig\n        },\n        {\n            provide: IGX_TIME_PICKER_COMPONENT,\n            useExisting: IgxTimePickerComponent\n        }\n    ],\n    selector: 'igx-time-picker',\n    templateUrl: 'time-picker.component.html',\n    styles: [\n        `:host {\n            display: block;\n        }`\n    ]\n})\nexport class IgxTimePickerComponent implements\n    IgxTimePickerBase,\n    ControlValueAccessor,\n    EditorProvider,\n    OnInit,\n    OnDestroy,\n    AfterViewInit,\n    AfterViewChecked {\n\n    /**\n     * An @Input property that sets the value of the `id` attribute.\n     * ```html\n     * <igx-time-picker [id]=\"'igx-time-picker-5'\" format=\"h:mm tt\" ></igx-time-picker>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-time-picker-${NEXT_ID++}`;\n\n    /**\n     * An accessor that allows you to set a time using the `value` input.\n     * ```html\n     *public date: Date = new Date(Date.now());\n     *  //...\n     *<igx-time-picker [value]=\"date\" format=\"h:mm tt\"></igx-time-picker>\n     * ```\n     */\n    @Input()\n    set value(value: Date) {\n        if (this._isValueValid(value)) {\n            const oldVal = this._value;\n\n            this._value = value;\n            this._onChangeCallback(value);\n\n            const dispVal = this._formatTime(this.value, this.format);\n            if (this.mode === InteractionMode.DropDown && this._displayValue !== dispVal) {\n                this.displayValue = dispVal;\n            }\n\n            const args: IgxTimePickerValueChangedEventArgs = {\n                oldValue: oldVal,\n                newValue: value\n            };\n            this.onValueChanged.emit(args);\n        } else {\n            const args: IgxTimePickerValidationFailedEventArgs = {\n                timePicker: this,\n                currentValue: value,\n                setThroughUI: false\n            };\n            this.onValidationFailed.emit(args);\n        }\n    }\n\n    /**\n     * An accessor that returns the value of `igx-time-picker` component.\n     * ```html\n     *@ViewChild(\"MyPick\")\n     *public pick: IgxTimePickerComponent;\n     *ngAfterViewInit(){\n     *    let pickSelect = this.pick.value;\n     * }\n     * ```\n     */\n    get value(): Date {\n        return this._value;\n    }\n\n    /**\n     * An @Input property that allows you to disable the `igx-time-picker` component. By default `disabled` is set to false.\n     * ```html\n     * <igx-time-picker [disabled]=\"'true'\" [vertical]=\"true\" format=\"h:mm tt\" ></igx-time-picker>\n     * ```\n     */\n    @Input()\n    public disabled = false;\n\n    /**\n     * An accessor that sets the resource strings.\n     * By default it uses EN resources.\n    */\n    @Input()\n    set resourceStrings(value: ITimePickerResourceStrings) {\n        this._resourceStrings = Object.assign({}, this._resourceStrings, value);\n    }\n\n    /**\n     * An accessor that returns the resource strings.\n    */\n    get resourceStrings(): ITimePickerResourceStrings {\n        return this._resourceStrings;\n    }\n\n    /**\n     * An @Input property that renders OK button with custom text. By default `okButtonLabel` is set to OK.\n     * ```html\n     * <igx-time-picker okButtonLabel='SET' [value]=\"date\" format=\"h:mm tt\"></igx-time-picker>\n     * ```\n     */\n    @Input()\n    set okButtonLabel(value: string) {\n        this._okButtonLabel = value;\n    }\n\n    /**\n     * An accessor that returns the label of ok button.\n    */\n    get okButtonLabel(): string {\n        if (this._okButtonLabel === null) {\n            return this.resourceStrings.igx_time_picker_ok;\n        }\n        return this._okButtonLabel;\n    }\n\n    /**\n     * An @Input property that renders cancel button with custom text.\n     * By default `cancelButtonLabel` is set to Cancel.\n     * ```html\n     * <igx-time-picker cancelButtonLabel='Exit' [value]=\"date\" format=\"h:mm tt\"></igx-time-picker>\n     * ```\n     */\n    @Input()\n    set cancelButtonLabel(value: string) {\n        this._cancelButtonLabel = value;\n    }\n\n    /**\n    * An accessor that returns the label of cancel button.\n    */\n    get cancelButtonLabel(): string {\n        if (this._cancelButtonLabel === null) {\n            return this.resourceStrings.igx_time_picker_cancel;\n        }\n        return this._cancelButtonLabel;\n    }\n\n    /**\n     * An @Input property that gets/sets the delta by which hour and minute items would be changed <br>\n     * when the user presses the Up/Down keys.\n     * By default `itemsDelta` is set to `{hours: 1, minutes: 1, seconds: 1}`\n     * ```html\n     *<igx-time-picker [itemsDelta]=\"{hours:3, minutes:5, seconds:10}\" id=\"time-picker\"></igx-time-picker>\n     *```\n     */\n    @Input()\n    set itemsDelta(value) {\n        this._itemsDelta = { hours: 1, minutes: 1, seconds: 1, ...value };\n    }\n\n    get itemsDelta(): { hours: number, minutes: number, seconds: number } {\n        return this._itemsDelta;\n    }\n\n    /**\n     * An @Input property that allows you to set the `minValue` to limit the user input.\n     *```html\n     *public min: string = \"09:00\";\n     *  //..\n     *<igx-time-picker format=\"HH:mm\" [vertical]=\"true\" [minValue]=\"min\"></igx-time-picker>\n     *```\n     */\n    @Input()\n    public minValue: string;\n\n    /**\n     * An @Input property that allows you to set the `maxValue` to limit the user input.\n     *```html\n     *public max: string = \"18:00\";\n     *  //..\n     *<igx-time-picker format=\"HH:mm\" [vertical]=\"true\" [maxValue]=\"max\"></igx-time-picker>\n     *```\n     */\n    @Input()\n    public maxValue: string;\n\n    /**\n     * An @Input property that determines the spin behavior. By default `isSpinLoop` is set to true.\n     * The seconds, minutes and hour spinning will wrap around by default.\n     *```html\n     *<igx-time-picker [isSpinLoop]=\"false\" id=\"time-picker\"></igx-time-picker>\n     *```\n     */\n    @Input()\n    public isSpinLoop = true;\n\n    /**\n     * An @Input property that Gets/Sets the orientation of the `igxTimePicker`. By default `vertical` is set to false.\n     * ```html\n     *<igx-time-picker [vertical]=\"true\" id=\"time-picker\"></igx-time-picker>\n     * ```\n     */\n    @Input()\n    public vertical = false;\n\n    /**\n     * An @Input property that Gets/Sets format of time while `igxTimePicker` does not have focus. <br>\n     * By default `format` is set to hh:mm tt. <br>\n     * List of time-flags: <br>\n     * `h` : hours field in 12-hours format without leading zero <br>\n     * `hh` : hours field in 12-hours format with leading zero <br>\n     * `H` : hours field in 24-hours format without leading zero <br>\n     * `HH` : hours field in 24-hours format with leading zero <br>\n     * `m` : minutes field without leading zero <br>\n     * `mm` : minutes field with leading zero <br>\n     * `s` : seconds field without leading zero <br>\n     * `ss` : seconds field with leading zero <br>\n     * `tt` : 2 character string which represents AM/PM field <br>\n     * ```html\n     *<igx-time-picker format=\"HH:m\" id=\"time-picker\"></igx-time-picker>\n     * ```\n     */\n    @Input()\n    get format() {\n        return this._format || 'hh:mm tt';\n    }\n\n    set format(formatValue: string) {\n        this._format = formatValue;\n        this.mask = this._format.indexOf('tt') !== -1 ? '00:00:00 LL' : '00:00:00';\n\n        if (!this.showHoursList || !this.showMinutesList) {\n            this.trimMask();\n        }\n\n        if (!this.showSecondsList) {\n            this.trimMask();\n        }\n\n        if (this.displayValue) {\n            this.displayValue = this._formatTime(this.value, this._format);\n        }\n\n        this.determineCursorPos();\n    }\n\n    /**\n     * Sets the character used to prompt the user for input.\n     * Default value is \"'-'\".\n     * ```html\n     * <igx-time-picker [promptChar] = \"'_'\">\n     * ```\n     * @memberof IgxTimePickerComponent\n     */\n    @Input()\n    public promptChar = '-';\n\n    /**\n     * An @Input property that allows you to switch the interaction mode between\n     * a dialog picker or dropdown with editable masked input.\n     * Deafult is dialog picker.\n     *```html\n     *public mode = InteractionMode.DROPDOWN;\n     *  //..\n     *<igx-time-picker [mode]=\"mode\"></igx-time-picker>\n     *```\n     * @memberof IgxTimePickerComponent\n     */\n    @Input()\n    public mode = InteractionMode.Dialog;\n\n    /**\n     * Determines the container the popup element should be attached to.\n     *\n     * ```html\n     * <div igxOverlayOutlet #outlet=\"overlay-outlet\"></div>\n     * //..\n     * <igx-time-picker [outlet]=\"outlet\"></igx-time-picker>\n     * //..\n     * ```\n     * Where `outlet` is an instance of `IgxOverlayOutletDirective` or an `ElementRef`.\n     */\n    @Input()\n    public outlet: IgxOverlayOutletDirective | ElementRef;\n\n    /**\n    * An @Input property that allows you to modify overlay positioning, interaction and scroll behavior.\n    * ```typescript\n    * const settings: OverlaySettings = {\n    *      closeOnOutsideClick: true,\n    *      modal: false\n    *  }\n    * ```\n    * ---\n    * ```html\n    * <igx-time-picker [overlaySettings]=\"settings\"></igx-time-picker>\n    * ```\n     * @memberof IgxTimePickerComponent\n     */\n    @Input()\n    public set overlaySettings(value: OverlaySettings) {\n        this._overlaySettings = value;\n    }\n\n    public get overlaySettings(): OverlaySettings {\n        return this._overlaySettings ? this._overlaySettings :\n            (this.mode === InteractionMode.Dialog ? this._dialogOverlaySettings : this._dropDownOverlaySettings);\n    }\n\n    /**\n     * Emitted when selection is made. The event contains the selected value. Returns {`oldValue`: `Date`, `newValue`: `Date`}.\n     *```typescript\n     * @ViewChild(\"toast\")\n     *private toast: IgxToastComponent;\n     *public onValueChanged(timepicker){\n     *    this.toast.show()\n     *}\n     * //...\n     * ```\n     * ```html\n     *<igx-time-picker (onValueChanged)=\"onValueChanged($event)\"></igx-time-picker>\n     *<igx-toast #toast message=\"The value has been changed!\"></igx-toast>\n     *```\n     */\n    @Output()\n    public onValueChanged = new EventEmitter<IgxTimePickerValueChangedEventArgs>();\n\n    /**\n     * Emitted when an invalid value is being set. Returns {`timePicker`: `any`, `currentValue`: `Date`, `setThroughUI`: `boolean`}\n     * ```typescript\n     *public min: string = \"09:00\";\n     *public max: string = \"18:00\";\n     *@ViewChild(\"toast\")\n     *private toast: IgxToastComponent;\n     *public onValidationFailed(timepicker){\n     *    this.toast.show();\n     *}\n     * //...\n     * ```\n     * ```html\n     *<igx-time-picker [minValue]=\"min\" [maxValue]=\"max\" (onValidationFailed)=\"onValidationFailed($event)\"></igx-time-picker>\n     *<igx-toast #toast message=\"Value must be between 09:00 and 18:00!\"></igx-toast>\n     * ```\n     */\n    @Output()\n    public onValidationFailed = new EventEmitter<IgxTimePickerValidationFailedEventArgs>();\n\n    /**\n     * @deprecated Use 'onOpened' instead.\n     * Emitted when a timePicker is being opened.\n     * ```html\n     *@ViewChild(\"toast\")\n     *private toast: IgxToastComponent;\n     *public onOpen(timepicker){\n     *    this.toast.show();\n     *}\n     * //...\n     * ```\n     * ```html\n     *<igx-time-picker [minValue]=\"min\" [maxValue]=\"max\" (onOpen)=\"onOpen($event)\"></igx-time-picker>\n     *<igx-toast #toast message=\"The time picker has been opened!\"></igx-toast>\n     * ```\n     */\n    @DeprecateProperty(`'onOpen' @Output property is deprecated. Use 'onOpened' instead.`)\n    @Output()\n    public get onOpen(): EventEmitter<IgxTimePickerComponent> {\n        return this._onOpen;\n    }\n\n    public set onOpen(val: EventEmitter<IgxTimePickerComponent>) {\n        this._onOpen = val;\n    }\n\n    /**\n     * Emitted when a timePicker is opened.\n     */\n    @Output()\n    public onOpened = new EventEmitter<IgxTimePickerComponent>();\n\n    /**\n     * @deprecated Use 'onClosed' instead.\n     * Emitted when a timePicker is being closed.\n     */\n    @DeprecateProperty(`'onClose' @Output property is deprecated. Use 'onClosed' instead.`)\n    @Output()\n    public get onClose(): EventEmitter<IgxTimePickerComponent> {\n        return this._onClose;\n    }\n\n    public set onClose(val: EventEmitter<IgxTimePickerComponent>) {\n        this._onClose = val;\n    }\n\n    /**\n     * Emitted when a timePicker is closed.\n     */\n    @Output()\n    public onClosed = new EventEmitter<IgxTimePickerComponent>();\n\n    /**\n     * Emitted when a timePicker is being closed.\n     */\n    @Output()\n    public onClosing = new EventEmitter<CancelableBrowserEventArgs & IBaseEventArgs>();\n\n    /**\n     * @hidden\n     */\n    @ViewChild('hourList')\n    public hourList: ElementRef;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('minuteList')\n    public minuteList: ElementRef;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('secondsList')\n    public secondsList: ElementRef;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('ampmList')\n    public ampmList: ElementRef;\n\n    /*\n     * @hidden\n     */\n    @ViewChild('defaultTimePickerTemplate', { read: TemplateRef, static: true })\n    protected defaultTimePickerTemplate: TemplateRef<any>;\n\n    @ViewChild('dropdownInputTemplate', { read: TemplateRef, static: true })\n    private dropdownInputTemplate: TemplateRef<any>;\n\n    /**\n     *@hidden\n     */\n    @ContentChild(IgxTimePickerTemplateDirective, { read: IgxTimePickerTemplateDirective })\n    protected timePickerTemplateDirective: IgxTimePickerTemplateDirective;\n\n    /**\n     *@hidden\n     */\n    @ContentChild(IgxTimePickerActionsDirective, { read: IgxTimePickerActionsDirective })\n    public timePickerActionsDirective: IgxTimePickerActionsDirective;\n\n    /**\n     * @hidden\n     */\n    @ViewChild(IgxToggleDirective, { static: true })\n    public toggleRef: IgxToggleDirective;\n\n    @ViewChild(IgxInputDirective, { read: ElementRef })\n    private _inputElementRef: ElementRef;\n\n    @ViewChild(IgxInputDirective, { read: IgxInputDirective})\n    private _inputDirective: IgxInputDirective;\n\n    @ContentChild(IgxInputDirective, { read: IgxInputDirective})\n    private _inputDirectiveUserTemplate: IgxInputDirective;\n\n    @ViewChild(IgxInputGroupComponent, { read: IgxInputGroupComponent })\n    private _inputGroup: IgxInputGroupComponent;\n\n    private _overlaySettings: OverlaySettings;\n\n    /**\n     * @hidden\n     */\n    public _hourItems = [];\n\n    /**\n     * @hidden\n     */\n    public _minuteItems = [];\n\n    /**\n     * @hidden\n     */\n    public _secondsItems = [];\n\n    /**\n     * @hidden\n     */\n    public _ampmItems = [];\n\n    /**\n     * @hidden\n    */\n    public cleared = false;\n\n    /**\n     * @hidden\n    */\n    public isNotEmpty = false;\n\n    /**\n     * @hidden\n    */\n    public displayFormat = new TimeDisplayFormatPipe(this);\n\n    /**\n     * @hidden\n    */\n    public inputFormat = new TimeInputFormatPipe(this);\n\n    /**\n     * @hidden\n     */\n    public selectedHour: string;\n\n    /**\n     * @hidden\n     */\n    public selectedMinute: string;\n\n    /**\n     * @hidden\n     */\n    public selectedSeconds: string;\n\n    /**\n     * @hidden\n     */\n    public selectedAmPm: string;\n\n    /** @hidden @internal */\n    private _value: Date;\n    private _resourceStrings = CurrentResourceStrings.TimePickerResStrings;\n    private _okButtonLabel = null;\n    private _cancelButtonLabel = null;\n    private _format: string;\n    private _mask: string;\n    private _displayValue: string;\n    private _itemsDelta: { hours: number, minutes: number, seconds: number } = { hours: 1, minutes: 1, seconds: 1 };\n\n    private _isHourListLoop = this.isSpinLoop;\n    private _isMinuteListLoop = this.isSpinLoop;\n    private _isSecondsListLoop = this.isSpinLoop;\n\n    private _hourView = [];\n    private _minuteView = [];\n    private _secondsView = [];\n    private _ampmView = [];\n\n    private _dateFromModel: Date;\n    private _destroy$ = new Subject<boolean>();\n    private _statusChanges$: Subscription;\n    private _dropDownOverlaySettings: OverlaySettings;\n    private _dialogOverlaySettings: OverlaySettings;\n\n    private _prevSelectedHour: string;\n    private _prevSelectedMinute: string;\n    private _prevSelectedSeconds: string;\n    private _prevSelectedAmPm: string;\n\n    private _onOpen = new EventEmitter<IgxTimePickerComponent>();\n    private _onClose = new EventEmitter<IgxTimePickerComponent>();\n\n    private _hoursPos = new Set();\n    private _minutesPos = new Set();\n    private _secondsPos = new Set();\n    private _amPmPos = new Set();\n    private _ngControl: NgControl = null;\n\n    //#region ControlValueAccessor\n\n    private _onChangeCallback: (_: Date) => void = noop;\n    private _onTouchedCallback: () => void = noop;\n\n    /** @hidden @internal */\n    public writeValue(value: Date) {\n        // use this flag to make sure that min/maxValue are checked (in _convertMinMaxValue() method)\n        // against the real value when initializing the component and value is bound via ngModel\n        this._dateFromModel = value;\n\n        this._value = value;\n\n        if (this.mode === InteractionMode.DropDown) {\n            this.displayValue = this._formatTime(this.value, this.format);\n        }\n    }\n\n    /** @hidden @internal */\n    public registerOnChange(fn: (_: Date) => void) { this._onChangeCallback = fn; }\n\n    /** @hidden @internal */\n    public registerOnTouched(fn: () => void) { this._onTouchedCallback = fn; }\n\n    /** @hidden @internal */\n    public setDisabledState(isDisabled: boolean): void { this.disabled = isDisabled; }\n\n    //#endregion\n\n    private trimMask(): void {\n        this.mask = this.mask.slice(this.mask.indexOf(':') + 1, this.mask.length);\n    }\n\n    /**\n     * @hidden\n    */\n    get mask(): string {\n        return this._mask || '00:00 LL';\n    }\n\n    set mask(val: string) {\n        this._mask = val;\n    }\n\n    /**\n     * @hidden\n     */\n    get displayValue(): string {\n        if (this._displayValue === undefined) {\n            return this._formatTime(this.value, this.format);\n        }\n        return this._displayValue;\n    }\n\n    set displayValue(value: string) {\n        this._displayValue = value;\n    }\n\n    /**\n     * Returns the current time formatted as string using the `format` option.\n     * If there is no set time the return is an empty string.\n     *```typescript\n     *@ViewChild(\"MyChild\")\n     *private picker: IgxTimePickerComponent;\n     *ngAfterViewInit(){\n     *    let time = this.picker.displayTime;\n     *}\n     *```\n     */\n    public get displayTime(): string {\n        if (this.value) {\n            return this._formatTime(this.value, this.format);\n        }\n        return '';\n    }\n\n    /**\n     * @hidden\n     */\n    get hourView(): string[] {\n        return this._hourView;\n    }\n\n    /**\n     * @hidden\n     */\n    get minuteView(): string[] {\n        return this._minuteView;\n    }\n\n    /**\n     * @hidden\n     */\n    get secondsView(): string[] {\n        return this._secondsView;\n    }\n\n    /**\n     * @hidden\n     */\n    get ampmView(): string[] {\n        return this._ampmView;\n    }\n\n    /**\n     * @hidden\n     */\n    get showClearButton(): boolean {\n        return (this.displayValue && this.displayValue !== this.parseMask(false)) || this.isNotEmpty;\n    }\n\n    /**\n     * @hidden\n     */\n    get showHoursList(): boolean {\n        return this.format.indexOf('h') !== - 1 || this.format.indexOf('H') !== - 1;\n    }\n\n    /**\n     * @hidden\n     */\n    get showMinutesList(): boolean {\n        return this.format.indexOf('m') !== - 1;\n    }\n\n    /**\n     * @hidden\n     */\n    get showSecondsList(): boolean {\n        return this.format.indexOf('s') !== - 1;\n    }\n\n    /**\n     * @hidden\n     */\n    get showAmPmList(): boolean {\n        return this.format.indexOf('t') !== - 1;\n    }\n\n    /**\n     * @hidden\n     */\n    get validSecondsEntries(): any[] {\n        const secondsEntries = [];\n        for (let i = 0; i < 60; i++) {\n            secondsEntries.push(i);\n        }\n        return secondsEntries;\n    }\n\n    /**\n     * @hidden\n     */\n    get validMinuteEntries(): any[] {\n        const minuteEntries = [];\n        for (let i = 0; i < 60; i++) {\n            minuteEntries.push(i);\n        }\n        return minuteEntries;\n    }\n\n    /**\n     * @hidden\n     */\n    get validHourEntries(): any[] {\n        const hourEntries = [];\n        const index = this.format.indexOf('h') !== -1 ? 13 : 24;\n        for (let i = 0; i < index; i++) {\n            hourEntries.push(i);\n        }\n        return hourEntries;\n    }\n\n    /**\n     * Gets the input group template.\n     * ```typescript\n     * let template = this.template();\n     * ```\n     * @memberof IgxTimePickerComponent\n     */\n    get template(): TemplateRef<any> {\n        if (this.timePickerTemplateDirective) {\n            return this.timePickerTemplateDirective.template;\n        }\n        return this.mode === InteractionMode.Dialog ? this.defaultTimePickerTemplate : this.dropdownInputTemplate;\n    }\n\n    /**\n     * Gets the context passed to the input group template.\n     * @memberof IgxTimePickerComponent\n     */\n    get context() {\n        return {\n            value: this.value,\n            displayTime: this.displayTime,\n            displayValue: this.displayValue,\n            openDialog: (target?: HTMLElement) => this.openDialog(target)\n        };\n    }\n\n    private get required(): boolean {\n        if (this._ngControl && this._ngControl.control && this._ngControl.control.validator) {\n            // Run the validation with empty object to check if required is enabled.\n            const error = this._ngControl.control.validator({} as AbstractControl);\n            return error && error.required;\n        }\n\n        return false;\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit(): void {\n        this._generateHours();\n        this._generateMinutes();\n        this._generateSeconds();\n        if (this.format.indexOf('tt') !== -1) {\n            this._generateAmPm();\n        }\n\n        this._dropDownOverlaySettings = {\n            modal: false,\n            closeOnOutsideClick: true,\n            scrollStrategy: new AbsoluteScrollStrategy(),\n            positionStrategy: new AutoPositionStrategy()\n        };\n        this._dialogOverlaySettings = {};\n        this._ngControl = this._injector.get<NgControl>(NgControl, null);\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterViewInit(): void {\n        if (this.mode === InteractionMode.DropDown && this._inputElementRef) {\n            fromEvent(this._inputElementRef.nativeElement, 'keydown').pipe(\n                throttle(() => interval(0, animationFrameScheduler)),\n                takeUntil(this._destroy$)\n            ).subscribe((event: KeyboardEvent) => {\n                if (event.key === KEYS.UP_ARROW || event.key === KEYS.UP_ARROW_IE ||\n                    event.key === KEYS.DOWN_ARROW || event.key === KEYS.DOWN_ARROW_IE) {\n                    this.spinOnEdit(event);\n                }\n            });\n        }\n\n        if (this.toggleRef && this._inputGroup) {\n            this.toggleRef.element.style.width = this._inputGroup.element.nativeElement.getBoundingClientRect().width + 'px';\n        }\n\n        if (this.toggleRef) {\n            this.toggleRef.onClosed.pipe(takeUntil(this._destroy$)).subscribe(() => {\n                if (this.mode === InteractionMode.DropDown) {\n                    this._onDropDownClosed();\n                }\n\n                this.onClosed.emit(this);\n\n                // TODO: remove this line after deprecating 'onClose'\n                this._onClose.emit(this);\n            });\n\n            this.toggleRef.onOpened.pipe(takeUntil(this._destroy$)).subscribe(() => {\n                this.onOpened.emit(this);\n\n                // TODO: remove this line after deprecating 'onOpen'\n                this._onOpen.emit(this);\n            });\n\n            this.toggleRef.onClosing.pipe(takeUntil(this._destroy$)).subscribe((event) => {\n                this.onClosing.emit(event);\n                // If canceled in a user onClosing handler\n                if (event.cancel) {\n                    return;\n                }\n                // Do not focus the input if clicking outside in dropdown mode\n                const input = this.getEditElement();\n                if (input && !(event.event && this.mode === InteractionMode.DropDown)) {\n                    input.focus();\n                } else {\n                    this._updateValidityOnBlur();\n                }\n            });\n\n            this.determineCursorPos();\n\n            if (this._ngControl) {\n                this._statusChanges$ = this._ngControl.statusChanges.subscribe(this.onStatusChanged.bind(this));\n            }\n        }\n    }\n\n    public ngAfterViewChecked() {\n        // if one sets mode at run time this forces initialization of new igxInputGroup\n        // As a result a new igxInputDirective is initialized too. In ngAfterViewInit of\n        // the new directive isRequired of the igxInputGroup is set again. However\n        // ngAfterViewInit of the time picker is not called again and we may finish with wrong\n        // isRequired in igxInputGroup. This is why we should set it her, only when needed\n        if (this._inputGroup && this._inputGroup.isRequired !== this.required) {\n            this._inputGroup.isRequired = this.required;\n            this._cdr.detectChanges();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy(): void {\n        this._destroy$.next(true);\n        this._destroy$.complete();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.spacebar', ['$event'])\n    @HostListener('keydown.space', ['$event'])\n    public onKeydownSpace(event) {\n        this.openDialog(this.getInputGroupElement());\n        event.preventDefault();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.Alt.ArrowDown')\n    public onAltArrowDown() {\n        this.openDialog(this.getInputGroupElement());\n    }\n\n    constructor(\n        private _injector: Injector,\n        private _cdr: ChangeDetectorRef) { }\n\n    private determineCursorPos(): void {\n        this.clearCursorPos();\n        for (const char of this.format) {\n            switch (char) {\n                case 'H':\n                case 'h':\n                    this._hoursPos.size === 0 ? this._hoursPos.add(this.format.indexOf(char)) :\n                        this._hoursPos.add(this.format.lastIndexOf(char));\n                    this._hoursPos.add(this.format.lastIndexOf(char) + 1);\n                    break;\n                case 'M':\n                case 'm':\n                    this._minutesPos.size === 0 ? this._minutesPos.add(this.format.indexOf(char)) :\n                        this._minutesPos.add(this.format.lastIndexOf(char));\n                    this._minutesPos.add(this.format.lastIndexOf(char) + 1);\n                    break;\n                case 'S':\n                case 's':\n                    this._secondsPos.size === 0 ? this._secondsPos.add(this.format.indexOf(char)) :\n                        this._secondsPos.add(this.format.lastIndexOf(char));\n                    this._secondsPos.add(this.format.lastIndexOf(char) + 1);\n                    break;\n                case 'T':\n                case 't':\n                    this._amPmPos.size === 0 ? this._amPmPos.add(this.format.indexOf(char)) :\n                        this._amPmPos.add(this.format.lastIndexOf(char));\n                    this._amPmPos.add(this.format.lastIndexOf(char) + 1);\n                    break;\n            }\n        }\n    }\n\n    private clearCursorPos() {\n        this._hoursPos.forEach(v => this._hoursPos.delete(v));\n        this._minutesPos.forEach(v => this._minutesPos.delete(v));\n        this._secondsPos.forEach(v => this._secondsPos.delete(v));\n        this._amPmPos.forEach(v => this._amPmPos.delete(v));\n    }\n\n    private _scrollItemIntoView(item: string, items: any[], selectedItem: string, isListLoop: boolean, viewType: string): any {\n        let itemIntoView;\n        if (items) {\n            const index = (item === 'AM' || item === 'PM') ? items.indexOf(item) : items.indexOf(parseInt(item, 10));\n            let view;\n\n            if (index !== -1) {\n                if (isListLoop) {\n                    if (index > 0) {\n                        selectedItem = this._itemToString(items[index - 1], viewType);\n                        itemIntoView = this._nextItem(items, selectedItem, isListLoop, viewType);\n                    } else {\n                        selectedItem = this._itemToString(items[1], viewType);\n                        itemIntoView = this._prevItem(items, selectedItem, isListLoop, viewType);\n                    }\n                } else {\n                    view = items.slice(index - 3, index + 4);\n                    selectedItem = this._itemToString(items[index], viewType);\n                    itemIntoView = { selectedItem, view };\n                }\n                itemIntoView.view = this._viewToString(itemIntoView.view, viewType);\n            }\n        }\n        return itemIntoView;\n    }\n\n    private _viewToString(view: any, viewType: string): any {\n        for (let i = 0; i < view.length; i++) {\n            if (typeof (view[i]) !== 'string') {\n                view[i] = this._itemToString(view[i], viewType);\n            }\n        }\n        return view;\n    }\n\n    private _itemToString(item: any, viewType: string): string {\n        if (item === null) {\n            item = '';\n        } else if (viewType && typeof (item) !== 'string') {\n            const leadZeroHour = (item < 10 && (this.format.indexOf('hh') !== -1 || this.format.indexOf('HH') !== -1));\n            const leadZeroMinute = (item < 10 && this.format.indexOf('mm') !== -1);\n            const leadZeroSeconds = (item < 10 && this.format.indexOf('ss') !== -1);\n\n            const leadZero = {\n                hour: leadZeroHour,\n                minute: leadZeroMinute,\n                seconds: leadZeroSeconds\n            }[viewType];\n\n            item = (leadZero) ? '0' + item : `${item}`;\n        }\n        return item;\n    }\n\n    private _prevItem(items: any[], selectedItem: string, isListLoop: boolean, viewType: string): any {\n        const selectedIndex = items.indexOf(parseInt(selectedItem, 10));\n        const itemsCount = items.length;\n        let view;\n\n        if (selectedIndex === -1) {\n            view = items.slice(0, 7);\n            selectedItem = items[3];\n        } else if (isListLoop) {\n            if (selectedIndex - 4 < 0) {\n                view = items.slice(itemsCount - (4 - selectedIndex), itemsCount);\n                view = view.concat(items.slice(0, selectedIndex + 3));\n            } else if (selectedIndex + 4 > itemsCount) {\n                view = items.slice(selectedIndex - 4, itemsCount);\n                view = view.concat(items.slice(0, selectedIndex + 3 - itemsCount));\n            } else {\n                view = items.slice(selectedIndex - 4, selectedIndex + 3);\n            }\n\n            selectedItem = (selectedIndex === 0) ? items[itemsCount - 1] : items[selectedIndex - 1];\n        } else if (selectedIndex > 3) {\n            view = items.slice(selectedIndex - 4, selectedIndex + 3);\n            selectedItem = items[selectedIndex - 1];\n        } else if (selectedIndex === 3) {\n            view = items.slice(0, 7);\n        }\n        view = this._viewToString(view, viewType);\n        selectedItem = this._itemToString(selectedItem, viewType);\n        return {\n            selectedItem,\n            view\n        };\n    }\n\n    private _nextItem(items: any[], selectedItem: string, isListLoop: boolean, viewType: string): any {\n        const selectedIndex = items.indexOf(parseInt(selectedItem, 10));\n        const itemsCount = items.length;\n        let view;\n\n        if (selectedIndex === -1) {\n            view = items.slice(0, 7);\n            selectedItem = items[3];\n        } else if (isListLoop) {\n            if (selectedIndex < 2) {\n                view = items.slice(itemsCount - (2 - selectedIndex), itemsCount);\n                view = view.concat(items.slice(0, selectedIndex + 5));\n            } else if (selectedIndex + 4 >= itemsCount) {\n                view = items.slice(selectedIndex - 2, itemsCount);\n                view = view.concat(items.slice(0, selectedIndex + 5 - itemsCount));\n            } else {\n                view = items.slice(selectedIndex - 2, selectedIndex + 5);\n            }\n\n            selectedItem = (selectedIndex === itemsCount - 1) ? items[0] : items[selectedIndex + 1];\n        } else if (selectedIndex + 1 < itemsCount - 3) {\n            view = items.slice(selectedIndex - 2, selectedIndex + 5);\n            selectedItem = items[selectedIndex + 1];\n        } else if (selectedIndex === itemsCount - 4) {\n            view = items.slice(selectedIndex - 3, itemsCount);\n        }\n        view = this._viewToString(view, viewType);\n        selectedItem = this._itemToString(selectedItem, viewType);\n        return {\n            selectedItem,\n            view\n        };\n    }\n\n    private _formatTime(value: Date, format: string): string {\n        if (!value) {\n            return '';\n        } else {\n            let hour = value.getHours();\n            let formattedSeconds, formattedMinute, formattedHour;\n\n            const minute = value.getMinutes();\n            const seconds = value.getSeconds();\n            const amPM = (hour > 11) ? 'PM' : 'AM';\n\n            if (format.indexOf('h') !== -1) {\n                if (hour > 12) {\n                    hour -= 12;\n                    formattedHour = hour < 10 && format.indexOf('hh') !== -1 ? '0' + hour : `${hour}`;\n                } else if (hour === 0) {\n                    formattedHour = '12';\n                } else if (hour < 10 && format.indexOf('hh') !== -1) {\n                    formattedHour = '0' + hour;\n                } else {\n                    formattedHour = `${hour}`;\n                }\n            } else {\n                if (hour < 10 && format.indexOf('HH') !== -1) {\n                    formattedHour = '0' + hour;\n                } else {\n                    formattedHour = `${hour}`;\n                }\n            }\n\n            formattedMinute = minute < 10 && format.indexOf('mm') !== -1 ? '0' + minute : `${minute}`;\n\n            formattedSeconds = seconds < 10 && format.indexOf('ss') !== -1 ? '0' + seconds : `${seconds}`;\n\n            return format.replace('hh', formattedHour).replace('h', formattedHour)\n                .replace('HH', formattedHour).replace('H', formattedHour)\n                .replace('mm', formattedMinute).replace('m', formattedMinute)\n                .replace('ss', formattedSeconds).replace('s', formattedSeconds)\n                .replace('tt', amPM);\n        }\n    }\n\n    private _updateHourView(start: any, end: any): void {\n        this._hourView = this._viewToString(this._hourItems.slice(start, end), 'hour');\n    }\n\n    private _updateMinuteView(start: any, end: any): void {\n        this._minuteView = this._viewToString(this._minuteItems.slice(start, end), 'minute');\n    }\n\n    private _updateSecondsView(start: any, end: any): void {\n        this._secondsView = this._viewToString(this._secondsItems.slice(start, end), 'seconds');\n    }\n\n    private _updateAmPmView(start: any, end: any): void {\n        this._ampmView = this._ampmItems.slice(start, end);\n    }\n\n    private _addEmptyItems(items: string[]): void {\n        for (let i = 0; i < 3; i++) {\n            items.push(null);\n        }\n    }\n\n    private _generateHours(): void {\n        let hourItemsCount = 24;\n        if (this.format.indexOf('h') !== -1) {\n            hourItemsCount = 13;\n        }\n\n        hourItemsCount /= this.itemsDelta.hours;\n\n        let i = this.format.indexOf('H') !== -1 ? 0 : 1;\n\n        if (hourItemsCount < 7 || !this.isSpinLoop) {\n            this._addEmptyItems(this._hourItems);\n            this._isHourListLoop = false;\n        }\n\n        if (hourItemsCount > 1) {\n            for (i; i < hourItemsCount; i++) {\n                this._hourItems.push(i * this.itemsDelta.hours);\n            }\n        } else {\n            this._hourItems.push(0);\n        }\n\n        if (hourItemsCount < 7 || !this.isSpinLoop) {\n            this._addEmptyItems(this._hourItems);\n        }\n    }\n\n    private _generateMinutes(): void {\n        const minuteItemsCount = 60 / this.itemsDelta.minutes;\n\n        if (minuteItemsCount < 7 || !this.isSpinLoop) {\n            this._addEmptyItems(this._minuteItems);\n            this._isMinuteListLoop = false;\n        }\n\n        for (let i = 0; i < minuteItemsCount; i++) {\n            this._minuteItems.push(i * this.itemsDelta.minutes);\n        }\n\n        if (minuteItemsCount < 7 || !this.isSpinLoop) {\n            this._addEmptyItems(this._minuteItems);\n        }\n    }\n\n    private _generateSeconds(): void {\n        const secondsItemsCount = 60 / this.itemsDelta.seconds;\n\n        if (secondsItemsCount < 7 || !this.isSpinLoop) {\n            this._addEmptyItems(this._secondsItems);\n            this._isSecondsListLoop = false;\n        }\n\n        for (let i = 0; i < secondsItemsCount; i++) {\n            this._secondsItems.push(i * this.itemsDelta.seconds);\n        }\n\n        if (secondsItemsCount < 7 || !this.isSpinLoop) {\n            this._addEmptyItems(this._secondsItems);\n        }\n    }\n\n    private _generateAmPm(): void {\n\n        this._addEmptyItems(this._ampmItems);\n\n        this._ampmItems.push('AM');\n        this._ampmItems.push('PM');\n\n        this._addEmptyItems(this._ampmItems);\n    }\n\n    private _getSelectedTime(): Date {\n        const date = this.value ? new Date(this.value) : new Date();\n        if (this.selectedHour) {\n            date.setHours(parseInt(this.selectedHour, 10));\n        }\n        if (this.selectedMinute) {\n            date.setMinutes(parseInt(this.selectedMinute, 10));\n        }\n        if (this.selectedSeconds) {\n            date.setSeconds(parseInt(this.selectedSeconds, 10));\n        }\n        if (((this.showHoursList && this.selectedHour !== '12') || (!this.showHoursList && this.selectedHour <= '11')) &&\n            this.selectedAmPm === 'PM') {\n            date.setHours(date.getHours() + 12);\n        }\n        if (!this.showHoursList && this.selectedAmPm === 'AM' && this.selectedHour > '11') {\n            date.setHours(date.getHours() - 12);\n        }\n        if (this.selectedAmPm === 'AM' && this.selectedHour === '12') {\n            date.setHours(0);\n        }\n        return date;\n    }\n\n    private _convertMinMaxValue(value: string): Date {\n        const date = this.value ? new Date(this.value) : this._dateFromModel ? new Date(this._dateFromModel) : new Date();\n        const sections = value.split(/[\\s:]+/);\n        let hour, minutes, seconds, amPM;\n\n        date.setSeconds(0);\n\n        if (this.showHoursList) {\n            hour = sections[0];\n            date.setHours(parseInt(hour, 10));\n        }\n\n        if (this.showMinutesList) {\n            minutes = this.showHoursList ? sections[1] : sections[0];\n            date.setMinutes(parseInt(minutes, 10));\n        }\n\n        if (this.showSecondsList) {\n            seconds = sections[sections.length - (this.showAmPmList ? 2 : 1)];\n            date.setSeconds(parseInt(seconds, 10));\n        }\n\n        if (this.showAmPmList) {\n            amPM = sections[sections.length - 1];\n\n            if (((this.showHoursList && date.getHours().toString() !== '12') ||\n                (!this.showHoursList && date.getHours().toString() <= '11')) && amPM === 'PM') {\n                date.setHours(date.getHours() + 12);\n            }\n\n            if (!this.showHoursList && amPM === 'AM' && date.getHours().toString() > '11') {\n                date.setHours(date.getHours() - 12);\n            }\n\n            if (this.showHoursList && date.getHours() === 12 && amPM === 'AM') {\n                date.setHours(0);\n            }\n        }\n\n        return date;\n    }\n\n    private _isValueValid(value: Date): boolean {\n        if (this.maxValue && value > this._convertMinMaxValue(this.maxValue)) {\n            return false;\n        } else if (this.minValue && value < this._convertMinMaxValue(this.minValue)) {\n            return false;\n        }\n\n        return true;\n    }\n\n    private _isEntryValid(val: string): boolean {\n        let validH = true;\n        let validM = true;\n        let validS = true;\n\n        const sections = val.split(/[\\s:]+/);\n        const re = new RegExp(this.promptChar, 'g');\n\n        if (this.showHoursList) {\n            validH = this.validHourEntries.indexOf(parseInt(sections[0].replace(re, ''), 10)) !== -1;\n        }\n\n        if (this.showMinutesList) {\n            const minutes = this.showHoursList ? sections[1] : sections[0];\n            validM = this.validMinuteEntries.indexOf(parseInt(minutes.replace(re, ''), 10)) !== -1;\n        }\n\n        if (this.showSecondsList) {\n            const seconds = sections[sections.length - (this.showAmPmList ? 2 : 1)];\n            validS = this.validSecondsEntries.indexOf(parseInt(seconds.replace(re, ''), 10)) !== -1;\n        }\n\n        return validH && validM && validS;\n    }\n\n    private _getCursorPosition(): number {\n        return this._inputElementRef.nativeElement.selectionStart;\n    }\n\n    private _setCursorPosition(start: number, end: number = start): void {\n        this._inputElementRef.nativeElement.setSelectionRange(start, end);\n    }\n\n    private _updateEditableInput(): void {\n        if (this.mode === InteractionMode.DropDown) {\n            this.displayValue = this._formatTime(this._getSelectedTime(), this.format);\n        }\n    }\n\n    private _spinHours(currentVal: Date, minVal: Date, maxVal: Date, hDelta: number, sign: number): Date {\n        const oldVal = new Date(currentVal);\n\n        currentVal.setMinutes(sign * hDelta);\n        if (currentVal.getDate() !== oldVal.getDate() && this.isSpinLoop) {\n            currentVal.setDate(oldVal.getDate());\n        }\n\n        let minutes = currentVal.getMinutes();\n        if (currentVal.getTime() > maxVal.getTime()) {\n            if (this.isSpinLoop) {\n                minutes = minutes < minVal.getMinutes() ? 60 + minutes : minutes;\n                minVal.setMinutes(sign * minutes);\n                return minVal;\n            } else {\n                return oldVal;\n            }\n        } else if (currentVal.getTime() < minVal.getTime()) {\n            if (this.isSpinLoop) {\n                minutes = minutes <= maxVal.getMinutes() ? minutes : minutes - 60;\n                maxVal.setMinutes(minutes);\n                return maxVal;\n            } else {\n                return oldVal;\n            }\n        } else {\n            return currentVal;\n        }\n    }\n\n    private _spinMinutes(currentVal: Date, mDelta: number, sign: number) {\n        let minutes = currentVal.getMinutes() + (sign * mDelta);\n\n        if (minutes < 0 || minutes >= 60) {\n            minutes = this.isSpinLoop ? minutes - (sign * 60) : currentVal.getMinutes();\n        }\n\n        currentVal.setMinutes(minutes);\n        return currentVal;\n    }\n\n    private _spinSeconds(currentVal: Date, sDelta: number, sign: number) {\n        let seconds = currentVal.getSeconds() + (sign * sDelta);\n\n        if (seconds < 0 || seconds >= 60) {\n            seconds = this.isSpinLoop ? seconds - (sign * 60) : currentVal.getSeconds();\n        }\n\n        currentVal.setSeconds(seconds);\n        return currentVal;\n    }\n\n    private _initializeContainer() {\n        if (this.value) {\n            const formttedTime = this._formatTime(this.value, this.format);\n            const sections = formttedTime.split(/[\\s:]+/);\n\n            if (this.showHoursList) {\n                this.selectedHour = sections[0];\n            }\n\n            if (this.showMinutesList) {\n                this.selectedMinute = this.showHoursList ? sections[1] : sections[0];\n            }\n\n            if (this.showSecondsList) {\n                this.selectedSeconds = sections[sections.length - (this.showAmPmList ? 2 : 1)];\n            }\n\n            if (this.showAmPmList && this._ampmItems !== null) {\n                this.selectedAmPm = sections[sections.length - 1];\n            }\n        }\n\n        if (this.selectedHour === undefined) {\n            this.selectedHour = !this.showHoursList && this.value ? this.value.getHours().toString() :\n                this.showHoursList ? `${this._hourItems[3]}` : '0';\n        }\n        if (this.selectedMinute === undefined) {\n            this.selectedMinute = !this.showMinutesList && this.value ? this.value.getMinutes().toString() : '0';\n        }\n        if (this.selectedSeconds === undefined) {\n            this.selectedSeconds = !this.showSecondsList && this.value ? this.value.getSeconds().toString() : '0';\n        }\n        if (this.selectedAmPm === undefined && this._ampmItems !== null) {\n            this.selectedAmPm = this._ampmItems[3];\n        }\n\n        this._prevSelectedHour = this.selectedHour;\n        this._prevSelectedMinute = this.selectedMinute;\n        this._prevSelectedSeconds = this.selectedSeconds;\n        this._prevSelectedAmPm = this.selectedAmPm;\n\n        this._onTouchedCallback();\n\n        this._updateHourView(0, ITEMS_COUNT);\n        this._updateMinuteView(0, ITEMS_COUNT);\n        this._updateSecondsView(0, ITEMS_COUNT);\n        this._updateAmPmView(0, ITEMS_COUNT);\n\n        if (this.selectedHour) {\n            this.scrollHourIntoView(this.selectedHour);\n        }\n        if (this.selectedMinute) {\n            this.scrollMinuteIntoView(this.selectedMinute);\n        }\n        if (this.selectedSeconds) {\n            this.scrollSecondsIntoView(this.selectedSeconds);\n        }\n        if (this.selectedAmPm) {\n            this.scrollAmPmIntoView(this.selectedAmPm);\n        }\n\n        requestAnimationFrame(() => {\n            if (this.hourList) {\n                this.hourList.nativeElement.focus();\n            } else if (this.minuteList) {\n                this.minuteList.nativeElement.focus();\n            } else if (this.secondsList) {\n                this.secondsList.nativeElement.focus();\n            }\n        });\n    }\n\n    private _onDropDownClosed(): void {\n        const oldValue = this.value;\n        const newVal = this._convertMinMaxValue(this.displayValue);\n\n        if (this.displayValue === this.parseMask(false)) {\n            return;\n        }\n\n        if (this._isValueValid(newVal)) {\n            if (!this.value || oldValue.getTime() !== newVal.getTime()) {\n                this.value = newVal;\n            }\n        } else {\n            this.displayValue = this.inputFormat.transform(this._formatTime(oldValue, this.format));\n\n            const args: IgxTimePickerValidationFailedEventArgs = {\n                timePicker: this,\n                currentValue: newVal,\n                setThroughUI: true\n            };\n            this.onValidationFailed.emit(args);\n        }\n    }\n\n    protected onStatusChanged() {\n        if ((this._ngControl.control.touched || this._ngControl.control.dirty) &&\n            (this._ngControl.control.validator || this._ngControl.control.asyncValidator)) {\n            const input = this._inputDirective || this._inputDirectiveUserTemplate;\n            if (this._inputGroup.isFocused) {\n                input.valid = this._ngControl.valid ? IgxInputState.VALID : IgxInputState.INVALID;\n            } else {\n                input.valid = this._ngControl.valid ? IgxInputState.INITIAL : IgxInputState.INVALID;\n            }\n        }\n\n        if (this._inputGroup && this._inputGroup.isRequired !== this.required) {\n            this._inputGroup.isRequired = this.required;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    getEditElement() {\n        return this._inputElementRef ? this._inputElementRef.nativeElement : null;\n    }\n\n    /**\n     * @hidden\n     */\n    public getInputGroupElement() {\n        return this._inputGroup ? this._inputGroup.element.nativeElement : null;\n    }\n\n\n    /**\n     * opens the dialog.\n     * @param target HTMLElement - the target element to use for positioning the drop down container according to\n     * ```html\n     * <igx-time-picker [value]=\"date\" mode=\"dropdown\" #retemplated>\n     *   <ng-template igxTimePickerTemplate let-openDialog=\"openDialog\"\n     *                let-displayTime=\"displayTime\">\n     *     <igx-input-group>\n     *       <input #dropDownTarget igxInput [value]=\"displayTime\" />\n     *       <igx-suffix (click)=\"openDialog(dropDownTarget)\">\n     *         <igx-icon>alarm</igx-icon>\n     *       </igx-suffix>\n     *     </igx-input-group>\n     *   </ng-template>\n     * </igx-time-picker>\n     * ```\n     */\n    public openDialog(target?: HTMLElement): void {\n        if (!this.toggleRef.collapsed) {\n            return this._onDropDownClosed();\n        }\n        const settings = this.overlaySettings;\n\n        if (target && settings && settings.positionStrategy) {\n            settings.positionStrategy.settings.target = target;\n        }\n        if (this.outlet) {\n            settings.outlet = this.outlet;\n        }\n\n        this.toggleRef.open(settings);\n        this._initializeContainer();\n    }\n\n    /**\n     * Scrolls a hour item into view.\n     * ```typescript\n     *scrhintoView(picker) {\n     *picker.scrollHourIntoView('2');\n     *}\n     * ```\n     *```html\n     *<igx-time-picker #picker format=\"h:mm tt\" (onOpen)=\"scrhintoView(picker)\"></igx-time-picker>\n     *```\n     *@param item to be scrolled in view.\n     */\n    public scrollHourIntoView(item: string): void {\n        if (this.showHoursList) {\n            const hourIntoView = this._scrollItemIntoView(item, this._hourItems, this.selectedHour, this._isHourListLoop, 'hour');\n            if (hourIntoView) {\n                this._hourView = hourIntoView.view;\n                this.selectedHour = hourIntoView.selectedItem;\n                this._updateEditableInput();\n            }\n        }\n    }\n\n    /**\n     * Scrolls a minute item into view.\n     * ```typescript\n     *scrMintoView(picker) {\n     *picker.scrollMinuteIntoView('3');\n     *}\n     * ```\n     *```html\n     *<igx-time-picker #picker format=\"h:mm tt\" (onOpen)=\"scrMintoView(picker)\"></igx-time-picker>\n     *```\n     * @param item to be scrolled in view.\n     */\n    public scrollMinuteIntoView(item: string): void {\n        if (this.showMinutesList) {\n            const minuteIntoView = this._scrollItemIntoView(item, this._minuteItems, this.selectedMinute, this._isMinuteListLoop, 'minute');\n            if (minuteIntoView) {\n                this._minuteView = minuteIntoView.view;\n                this.selectedMinute = minuteIntoView.selectedItem;\n                this._updateEditableInput();\n            }\n        }\n    }\n\n    /**\n     * Scrolls a seconds item into view.\n     * ```typescript\n     *scrMintoView(picker) {\n     *picker.scrollSecondsIntoView('4');\n     *}\n     * ```\n     *```html\n     *<igx-time-picker #picker format=\"h:mm tt\" (onOpen)=\"scrMintoView(picker)\"></igx-time-picker>\n     *```\n     * @param item to be scrolled in view.\n     */\n    public scrollSecondsIntoView(item: string): void {\n        if (this.showSecondsList) {\n            const secondsIntoView = this._scrollItemIntoView(item,\n                this._secondsItems, this.selectedSeconds, this._isSecondsListLoop, 'seconds');\n            if (secondsIntoView) {\n                this._secondsView = secondsIntoView.view;\n                this.selectedSeconds = secondsIntoView.selectedItem;\n                this._updateEditableInput();\n            }\n        }\n    }\n\n    /**\n     * Scrolls an ampm item into view.\n     * ```typescript\n     *scrAmPmIntoView(picker) {\n     *picker.scrollAmPmIntoView('PM');\n     *}\n     * ```\n     *```html\n     *<igx-time-picker #picker format=\"h:mm tt\" (onOpen)=\"scrAmPmIntoView(picker)\"></igx-time-picker>\n     *```\n     * @param item to be scrolled in view.\n     */\n    public scrollAmPmIntoView(item: string): void {\n        if (this.showAmPmList) {\n            const ampmIntoView = this._scrollItemIntoView(item, this._ampmItems, this.selectedAmPm, false, null);\n            if (ampmIntoView) {\n                this._ampmView = ampmIntoView.view;\n                this.selectedAmPm = ampmIntoView.selectedItem;\n                this._updateEditableInput();\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public nextHour() {\n        const nextHour = this._nextItem(this._hourItems, this.selectedHour, this._isHourListLoop, 'hour');\n        this._hourView = nextHour.view;\n        this.selectedHour = nextHour.selectedItem;\n\n        this._updateEditableInput();\n    }\n\n    /**\n     * @hidden\n     */\n    public prevHour() {\n        const prevHour = this._prevItem(this._hourItems, this.selectedHour, this._isHourListLoop, 'hour');\n        this._hourView = prevHour.view;\n        this.selectedHour = prevHour.selectedItem;\n\n        this._updateEditableInput();\n    }\n\n    /**\n     * @hidden\n     */\n    public nextMinute() {\n        const nextMinute = this._nextItem(this._minuteItems, this.selectedMinute, this._isMinuteListLoop, 'minute');\n        this._minuteView = nextMinute.view;\n        this.selectedMinute = nextMinute.selectedItem;\n\n        this._updateEditableInput();\n    }\n\n    /**\n     * @hidden\n     */\n    public prevMinute() {\n        const prevMinute = this._prevItem(this._minuteItems, this.selectedMinute, this._isMinuteListLoop, 'minute');\n        this._minuteView = prevMinute.view;\n        this.selectedMinute = prevMinute.selectedItem;\n\n        this._updateEditableInput();\n    }\n\n    /**\n     * @hidden\n     */\n    public nextSeconds() {\n        const nextSeconds = this._nextItem(this._secondsItems, this.selectedSeconds, this._isSecondsListLoop, 'seconds');\n        this._secondsView = nextSeconds.view;\n        this.selectedSeconds = nextSeconds.selectedItem;\n\n        this._updateEditableInput();\n    }\n\n    /**\n     * @hidden\n     */\n    public prevSeconds() {\n        const prevSeconds = this._prevItem(this._secondsItems, this.selectedSeconds, this._isSecondsListLoop, 'seconds');\n        this._secondsView = prevSeconds.view;\n        this.selectedSeconds = prevSeconds.selectedItem;\n\n        this._updateEditableInput();\n    }\n\n    /**\n     * @hidden\n     */\n    public nextAmPm() {\n        const selectedIndex = this._ampmItems.indexOf(this.selectedAmPm);\n\n        if (selectedIndex + 1 < this._ampmItems.length - 3) {\n            this._updateAmPmView(selectedIndex - 2, selectedIndex + 5);\n            this.selectedAmPm = this._ampmItems[selectedIndex + 1];\n\n            this._updateEditableInput();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public prevAmPm() {\n        const selectedIndex = this._ampmItems.indexOf(this.selectedAmPm);\n\n        if (selectedIndex > 3) {\n            this._updateAmPmView(selectedIndex - 4, selectedIndex + 3);\n            this.selectedAmPm = this._ampmItems[selectedIndex - 1];\n\n            this._updateEditableInput();\n        }\n    }\n\n    /**\n     * If current value is valid selects it, closes the dialog and returns true, otherwise returns false.\n     * ```html\n     * <igx-dialog class=\"igx-time-picker__dialog-popup\" [rightButtonLabel]=\"okButtonLabel\" (onRightButtonSelect)=\"okButtonClick()\">\n     * //..\n     * </igx-dialog>\n     * ```\n     */\n    public okButtonClick(): boolean {\n        const time = this._getSelectedTime();\n        if (this._isValueValid(time)) {\n            this.close();\n            this.value = time;\n            return true;\n        } else {\n            const args: IgxTimePickerValidationFailedEventArgs = {\n                timePicker: this,\n                currentValue: time,\n                setThroughUI: true\n            };\n            this.onValidationFailed.emit(args);\n            return false;\n        }\n    }\n\n    /**\n     * Closes the dialog without selecting the current value.\n     * ```html\n     * <igx-dialog class=\"igx-time-picker__dialog-popup\" [leftButtonLabel]=\"cancelButtonLabel\" (onLeftButtonSelect)=\"cancelButtonClick()\">\n     * //...\n     * </igx-dialog>\n     * ```\n     */\n    public cancelButtonClick(): void {\n        if (this.mode === InteractionMode.DropDown) {\n            this.displayValue = this.value ? this._formatTime(this.value, this.format) : this.parseMask(false);\n        }\n\n        this.close();\n\n        this.selectedHour = this._prevSelectedHour;\n        this.selectedMinute = this._prevSelectedMinute;\n        this.selectedSeconds = this._prevSelectedSeconds;\n        this.selectedAmPm = this._prevSelectedAmPm;\n    }\n\n    /**\n     * Returns an array of the hours currently in view.\n     *```html\n     *@ViewChild(\"MyChild\")\n     *private picker: IgxTimePickerComponent;\n     *ngAfterViewInit(){\n     *    let hInView = this.picker.hoursInView;\n     *}\n     *```\n     */\n    public hoursInView(): string[] {\n        return this._hourView.filter((hour) => hour !== '');\n    }\n\n    /**\n     * Returns an array of the minutes currently in view.\n     *```html\n     *@ViewChild(\"MyChild\")\n     *private picker: IgxTimePickerComponent;\n     *ngAfterViewInit(){\n     *    let minInView = this.picker.minutesInView;\n     *}\n     *```\n     */\n    public minutesInView(): string[] {\n        return this._minuteView.filter((minute) => minute !== '');\n    }\n\n    /**\n     * Returns an array of the seconds currently in view.\n     *```html\n     *@ViewChild(\"MyChild\")\n     *private picker: IgxTimePickerComponent;\n     *ngAfterViewInit(){\n     *    let minInView = this.picker.secondsInView;\n     *}\n     *```\n     */\n    public secondsInView(): string[] {\n        return this._secondsView.filter((seconds) => seconds !== '');\n    }\n\n    /**\n     * Returns an array of the AM/PM currently in view.\n     *```html\n     *@ViewChild(\"MyChild\")\n     *private picker: IgxTimePickerComponent;\n     *ngAfterViewInit(){\n     *    let ApInView = this.picker.ampmInView;\n     *}\n     *```\n     */\n    public ampmInView(): string[] {\n        return this._ampmView.filter((ampm) => ampm !== '');\n    }\n\n    /**\n     * Closes the dropdown/dialog.\n     * ```html\n     *<igx-time-picker #timePicker></igx-time-picker>\n     * ```\n     * ```typescript\n     * @ViewChild('timePicker', { read: IgxTimePickerComponent }) picker: IgxTimePickerComponent;\n     * picker.close();\n     * ```\n     */\n    public close(): void {\n        this.toggleRef.close();\n    }\n\n    /**\n     * @hidden\n     */\n    public parseMask(preserveAmPm = true): string {\n        const maskWithAmPm = this.mask.replace(new RegExp('0', 'g'), this.promptChar).replace('LL', 'AM');\n        const pureMask = this.mask.replace(new RegExp('0', 'g'), this.promptChar).replace(new RegExp('L', 'g'), this.promptChar);\n\n        return preserveAmPm ? maskWithAmPm : pureMask;\n    }\n\n    /**\n     * @hidden\n     */\n    public clear(): void {\n        if (this.toggleRef.collapsed) {\n            this.cleared = true;\n            this.isNotEmpty = false;\n\n            const oldVal = new Date(this.value);\n\n            this.displayValue = '';\n            this.value.setHours(0, 0);\n\n            if (oldVal.getTime() !== this.value.getTime()) {\n                const args: IgxTimePickerValueChangedEventArgs = {\n                    oldValue: oldVal,\n                    newValue: this.value\n                };\n                this.onValueChanged.emit(args);\n            }\n        } else {\n            this.close();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public onInput(event): void {\n        const val = event.target.value;\n        const oldVal = new Date(this.value);\n\n        this.isNotEmpty = val !== this.parseMask(false);\n\n        // handle cases where all empty positions (promts) are filled and we want to update\n        // timepicker own value property if it is a valid Date\n        if (val.indexOf(this.promptChar) === -1) {\n            if (this._isEntryValid(val)) {\n                const newVal = this._convertMinMaxValue(val);\n                if (oldVal.getTime() !== newVal.getTime()) {\n                    this.value = newVal;\n                }\n            } else {\n                const args: IgxTimePickerValidationFailedEventArgs = {\n                    timePicker: this,\n                    currentValue: val,\n                    setThroughUI: false\n                };\n                this.onValidationFailed.emit(args);\n            }\n            // handle cases where the user deletes the display value (when pressing backspace or delete)\n        } else if (!this.value || !val || val === this.parseMask(false)) {\n            this.isNotEmpty = false;\n\n            this.value.setHours(0, 0);\n            this.displayValue = val;\n\n            if (oldVal.getTime() !== this.value.getTime()) {\n                const args: IgxTimePickerValueChangedEventArgs = {\n                    oldValue: oldVal,\n                    newValue: this.value\n                };\n                this.onValueChanged.emit(args);\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public onFocus(event): void {\n        this.isNotEmpty = event.target.value !== this.parseMask(false);\n    }\n\n    /**\n     * @hidden\n     */\n    public onBlur(event): void {\n        if (this.mode === InteractionMode.DropDown) {\n            const value = event.target.value;\n\n            this.isNotEmpty = value !== '';\n            this.displayValue = value;\n\n            if (value && value !== this.parseMask()) {\n                if (this._isEntryValid(value)) {\n                    const newVal = this._convertMinMaxValue(value);\n                    if (!this.value || this.value.getTime() !== newVal.getTime()) {\n                        this.value = newVal;\n                    }\n                } else {\n                    const args: IgxTimePickerValidationFailedEventArgs = {\n                        timePicker: this,\n                        currentValue: value,\n                        setThroughUI: false\n                    };\n                    this.onValidationFailed.emit(args);\n                }\n            }\n        }\n\n        if (this.toggleRef.collapsed) {\n            this._updateValidityOnBlur();\n        }\n    }\n\n    public mouseDown(event: MouseEvent): void {\n        // if the click is not on the input but in input group\n        // e.g. on prefix or suffix, prevent default and this way prevent blur\n        if (event.target !== this.getEditElement()) {\n            event.preventDefault();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public spinOnEdit(event): void {\n        event.preventDefault();\n\n        let sign: number;\n        let displayVal: string;\n        const currentVal = new Date(this.value);\n        const min = this.minValue ? this._convertMinMaxValue(this.minValue) : this._convertMinMaxValue('00:00');\n        const max = this.maxValue ? this._convertMinMaxValue(this.maxValue) : this._convertMinMaxValue('24:00');\n\n        const cursor = this._getCursorPosition();\n\n        if (event.key) {\n            const key = event.key;\n            sign = key === KEYS.DOWN_ARROW || key === KEYS.DOWN_ARROW_IE ? -1 : 1;\n        }\n\n        if (event.deltaY) {\n            sign = event.deltaY < 0 ? 1 : -1;\n        }\n\n        if (!this.displayValue) {\n            this.value = min;\n            displayVal = this._formatTime(this.value, this.format);\n        } else {\n            const hDelta = this.itemsDelta.hours * 60 + (sign * this.value.getMinutes());\n            const mDelta = this.itemsDelta.minutes;\n            const sDelta = this.itemsDelta.seconds;\n\n            if (this.cursorOnHours(cursor, this.showHoursList)) {\n                this.value = this._spinHours(currentVal, min, max, hDelta, sign);\n            }\n            if (this.cursorOnMinutes(cursor, this.showHoursList, this.showMinutesList)) {\n                this.value = this._spinMinutes(currentVal, mDelta, sign);\n            }\n            if (this.cursorOnSeconds(cursor, this.showHoursList, this.showMinutesList, this.showSecondsList)) {\n                this.value = this._spinSeconds(currentVal, sDelta, sign);\n            }\n            if (this.cursorOnAmPm(cursor, this.showHoursList, this.showMinutesList, this.showSecondsList, this.showAmPmList)) {\n                const sections = this.displayValue.split(/[\\s:]+/);\n                sign = sections[sections.length - 1] === 'AM' ? 1 : -1;\n                currentVal.setHours(currentVal.getHours() + (sign * 12));\n\n                this.value = currentVal;\n            }\n\n            displayVal = this._formatTime(this.value, this.format);\n        }\n\n        // minor hack for preventing cursor jumping in IE\n        this._displayValue = this.inputFormat.transform(displayVal);\n        this._inputElementRef.nativeElement.value = this._displayValue;\n        this._setCursorPosition(cursor);\n\n        requestAnimationFrame(() => {\n            this._setCursorPosition(cursor);\n        });\n    }\n\n    private cursorOnHours(cursor: number, showHours: boolean): boolean {\n        return showHours && this._hoursPos.has(cursor);\n    }\n\n    private cursorOnMinutes(cursor: number, showHours: boolean, showMinutes: boolean): boolean {\n        return showMinutes &&\n            (showHours && this._minutesPos.has(cursor)) ||\n            (!showHours && this._minutesPos.has(cursor));\n    }\n\n    private cursorOnSeconds(cursor: number, showHours: boolean, showMinutes: boolean, showSeconds: boolean): boolean {\n        return showSeconds &&\n            (showHours && showMinutes && this._secondsPos.has(cursor)) ||\n            ((!showHours || !showMinutes) && this._secondsPos.has(cursor)) ||\n            (!showHours && !showMinutes && this._secondsPos.has(cursor));\n    }\n\n    private cursorOnAmPm(cursor: number, showHours: boolean, showMinutes: boolean,\n        showSeconds: boolean, showAmPm: boolean): boolean {\n        return showAmPm &&\n            (showHours && showMinutes && showSeconds && this._amPmPos.has(cursor)) ||\n            ((!showHours || !showMinutes || !showSeconds) && this._amPmPos.has(cursor)) ||\n            (!showHours && (!showMinutes || !showSeconds) && this._amPmPos.has(cursor));\n    }\n\n    private _updateValidityOnBlur() {\n        this._onTouchedCallback();\n        const input = this._inputDirective || this._inputDirectiveUserTemplate;\n        if (this._ngControl && !this._ngControl.valid) {\n            input.valid = IgxInputState.INVALID;\n        } else {\n            input.valid = IgxInputState.INITIAL;\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxTimePickerComponent,\n        IgxHourItemDirective,\n        IgxMinuteItemDirective,\n        IgxSecondsItemDirective,\n        IgxItemListDirective,\n        IgxAmPmItemDirective,\n        IgxTimePickerTemplateDirective,\n        IgxTimePickerActionsDirective,\n        TimeDisplayFormatPipe,\n        TimeInputFormatPipe\n    ],\n    exports: [\n        IgxTimePickerComponent,\n        IgxTimePickerTemplateDirective,\n        IgxTimePickerActionsDirective,\n        TimeDisplayFormatPipe,\n        TimeInputFormatPipe\n    ],\n    imports: [\n        CommonModule,\n        IgxInputGroupModule,\n        IgxIconModule,\n        IgxButtonModule,\n        IgxMaskModule,\n        IgxToggleModule\n    ],\n    providers: []\n})\nexport class IgxTimePickerModule { }\n"]}